<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîß Alternative Language Debug</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            max-width: 1000px; 
            margin: 0 auto; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container { 
            background: rgba(255, 255, 255, 0.95); 
            padding: 25px; 
            border-radius: 15px; 
            box-shadow: 0 8px 32px rgba(0,0,0,0.1); 
            margin: 20px 0; 
            color: #333;
        }
        .debug-info { 
            font-family: monospace; 
            font-size: 14px; 
            background: #2d3748; 
            color: #e2e8f0; 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 6px; 
            white-space: pre-wrap;
        }
        .success { color: #4CAF50; font-weight: bold; }
        .warning { color: #ff9800; font-weight: bold; }
        .error { color: #f44336; font-weight: bold; }
        button { 
            background: linear-gradient(45deg, #2196F3, #21CBF3); 
            color: white; 
            border: none; 
            padding: 12px 24px; 
            border-radius: 8px; 
            cursor: pointer; 
            margin: 8px; 
            font-weight: 600; 
        }
        button:hover { transform: translateY(-2px); }
        h1 { text-align: center; }
        .step-card { 
            background: #f8f9fa; 
            padding: 20px; 
            margin: 15px 0; 
            border-radius: 10px; 
            border-left: 5px solid #2196F3; 
        }
    </style>
</head>
<body>
    <h1>üîß Alternative Language Debug Method</h1>
    <p style="text-align: center;">Since Appwrite fetch is failing, let's use browser console debugging</p>

    <div class="container">
        <h2>üéØ Problem Summary</h2>
        <div class="step-card">
            <strong>Issue:</strong> Phil10's languages don't display on home page cards, but Tata's do.<br>
            <strong>Fetch Error:</strong> "Failed to fetch" suggests Appwrite connection issues.<br>
            <strong>Solution:</strong> Debug directly through the live application's console logs.
        </div>
    </div>

    <div class="container">
        <h2>üîç Step-by-Step Browser Console Debug</h2>
        
        <div class="step-card">
            <h3>Step 1: Check Home Page Console Logs</h3>
            <button onclick="openHomePage()">üè† Open Home Page</button>
            <div class="debug-info">
Instructions:
1. Open http://localhost:3000/ 
2. Open browser console (F12)
3. Look for these logs:

üè† HomePage passing to TherapistCard: { 
  name: "Tata", 
  languages: "[\"English\",\"Indonesian\"]"  ‚Üê Working
}

üè† HomePage passing to TherapistCard: { 
  name: "Phil10", 
  languages: null or "" or "[]"  ‚Üê Broken
}

üåê TherapistCard Debug - Raw therapist.languages: [data]
üåê TherapistCard Debug - Parsed languages: [array]
            </div>
        </div>

        <div class="step-card">
            <h3>Step 2: Compare Tata vs Phil10 Console Data</h3>
            <div class="debug-info">
Look for differences in the console logs:

‚úÖ TATA (Working):
- languages: "[\"English\",\"Indonesian\"]" 
- Parsed: ["English","Indonesian"]
- Length: 2
- Shows flags on card

‚ùå PHIL10 (Broken):  
- languages: null or "" or "[]"
- Parsed: []
- Length: 0
- No languages section on card
            </div>
        </div>

        <div class="step-card">
            <h3>Step 3: Fix Phil10 via Dashboard</h3>
            <button onclick="openTherapistDashboard()">üë§ Open Therapist Dashboard</button>
            <div class="debug-info">
Manual Fix Steps:
1. Go to therapist dashboard 
2. Login as Phil10
3. Scroll to Languages section
4. Select 2-3 languages (English, Indonesian, etc.)
5. Watch for green preview tags
6. Click "Save Profile"
7. Look for console log: "üåê Dashboard Debug - Stringified languages: [data]"
8. Go back to home page and check if languages appear
            </div>
        </div>

        <div class="step-card">
            <h3>Step 4: Verify the Fix</h3>
            <button onclick="verifyFix()">‚úÖ Verify Language Fix</button>
            <div class="debug-info">
Verification Checklist:
‚ñ° Phil10's dashboard shows selected languages in green tags
‚ñ° Save gives success notification
‚ñ° Console shows stringified language data
‚ñ° Home page console shows Phil10 with language data
‚ñ° Phil10's card displays language flags like Tata's
            </div>
        </div>
    </div>

    <div class="container">
        <h2>üöÄ Alternative: Browser Storage Check</h2>
        
        <div class="step-card">
            <h3>Check Local Application State</h3>
            <button onclick="checkAppState()">üìä Check App State</button>
            <div id="app-state-result" class="debug-info" style="display: none;"></div>
        </div>
    </div>

    <div class="container">
        <h2>üîß Emergency Language Fix</h2>
        <div class="step-card">
            <p>If Phil10's dashboard save isn't working properly, try this emergency fix:</p>
            
            <button onclick="showEmergencyFix()" class="warning">‚ö†Ô∏è Show Emergency Fix Code</button>
            <div id="emergency-fix" style="display: none; margin-top: 15px;">
                <div class="debug-info">
// Run this in browser console on the therapist dashboard page:

// 1. Force set languages state
if (typeof setLanguages !== 'undefined') {
    setLanguages(['English', 'Indonesian']);
    console.log('‚úÖ Languages forced to: English, Indonesian');
} else {
    console.log('‚ùå setLanguages function not found');
}

// 2. Check if languages are in component state
console.log('Current component state check needed');

// 3. Trigger save manually if needed
console.log('Manual save trigger may be required');
                </div>
                <p class="warning">‚ö†Ô∏è Use this only if the normal dashboard save doesn't work</p>
            </div>
        </div>
    </div>

    <script>
        function openHomePage() {
            console.log('üè† Opening home page for console debugging...');
            window.open('http://localhost:3000/', '_blank');
            
            setTimeout(() => {
                alert(`üîç Console Debug Instructions:

1. Look for therapist data logs
2. Find Tata vs Phil10 differences  
3. Check language field values
4. Note which one has proper language data

Key logs to find:
üè† HomePage passing to TherapistCard
üåê TherapistCard Debug - Raw therapist.languages`);
            }, 2000);
        }

        function openTherapistDashboard() {
            console.log('üë§ Opening therapist dashboard...');
            window.open('http://localhost:3000/', '_blank');
            
            setTimeout(() => {
                alert(`üë§ Dashboard Fix Instructions:

1. Login as Phil10 therapist
2. Go to profile section
3. Find Languages section  
4. Select English, Indonesian
5. Save profile
6. Check console for save logs
7. Return to home page to test`);
            }, 2000);
        }

        function verifyFix() {
            console.log('‚úÖ Starting verification process...');
            
            const instructions = `
‚úÖ Verification Steps:

1. Open home page: http://localhost:3000/
2. Open browser console (F12)
3. Look for Phil10's therapist card
4. Check if languages appear with flags
5. Compare with Tata's card (working example)

Expected result: Phil10 should now show:
üá¨üáß EN üáÆüá© ID (or similar flags)
            `;
            
            alert(instructions);
            window.open('http://localhost:3000/', '_blank');
        }

        function checkAppState() {
            const resultDiv = document.getElementById('app-state-result');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '';
            
            let result = 'Checking localStorage and sessionStorage...\n\n';
            
            // Check localStorage for therapist data
            const keys = Object.keys(localStorage);
            const relevantKeys = keys.filter(k => 
                k.includes('therapist') || 
                k.includes('app_') || 
                k.includes('language')
            );
            
            if (relevantKeys.length > 0) {
                result += 'Found relevant localStorage keys:\n';
                relevantKeys.forEach(key => {
                    const value = localStorage.getItem(key);
                    result += `${key}: ${value ? value.substring(0, 100) + '...' : 'null'}\n`;
                });
            } else {
                result += 'No relevant localStorage data found.\n';
            }
            
            result += '\nüéØ To see live app data, check browser console on home page.';
            result += '\nüìä Look for: üè† HomePage and üåê TherapistCard debug logs';
            
            resultDiv.textContent = result;
        }

        function showEmergencyFix() {
            const fixDiv = document.getElementById('emergency-fix');
            fixDiv.style.display = fixDiv.style.display === 'none' ? 'block' : 'none';
        }

        // Auto-show instructions
        window.addEventListener('load', () => {
            console.log('üîß Alternative Language Debug Tool Loaded');
            console.log('üéØ Since Appwrite fetch failed, use browser console debugging method');
            
            setTimeout(() => {
                if (confirm('Since Appwrite connection failed, would you like to start with browser console debugging?')) {
                    openHomePage();
                }
            }, 1000);
        });
    </script>
</body>
</html>