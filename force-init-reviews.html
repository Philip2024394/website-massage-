<!DOCTYPE html>
<html>
<head>
    <title>Force Initialize All Reviews</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        button { padding: 15px 30px; font-size: 16px; margin: 10px; cursor: pointer; border: none; border-radius: 5px; }
        .success { background: #4CAF50; color: white; }
        .danger { background: #f44336; color: white; }
        .info { background: #2196F3; color: white; }
        pre { background: #f5f5f5; padding: 15px; border-radius: 5px; overflow-x: auto; }
        .status { padding: 15px; margin: 15px 0; border-radius: 5px; }
        .status.success { background: #d4edda; border-left: 4px solid #28a745; }
        .status.error { background: #f8d7da; border-left: 4px solid #dc3545; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß Force Initialize All Therapist Reviews</h1>
        <p>This will generate initial reviews for ALL Yogyakarta therapists</p>
        
        <button class="success" onclick="initializeAll()">Initialize All Reviews</button>
        <button class="info" onclick="checkStatus()">Check Status</button>
        <button class="danger" onclick="clearAll()">Clear Everything</button>
        
        <div id="output"></div>
    </div>

    <script>
        const THERAPISTS = [
            { id: '692467a3001f6f05aaa1', name: 'Budi' },
            { id: '69499239000c90bfd283', name: 'ww #1' },
            { id: '694a02cd0036089583db', name: 'ww #2' },
            { id: '694ed78f9574395fd7b9', name: 'Wiwid' },
            { id: '693cfadf003d16b9896a', name: 'Surtiningsih' }
        ];

        const NAMES = [
            'Sarah Mitchell', 'Budi Santoso', 'Emma Rodriguez', 'Ahmad Hidayat',
            'David Chen', 'Sari Wulandari', 'Michael Johnson', 'Dewi Lestari',
            'James Anderson', 'Rina Putri', 'Lisa Thompson', 'Agus Wijaya',
            'Tom Wilson', 'Maya Kusuma', 'Anna Schmidt', 'Rudi Hartono',
            'Sophie Martin', 'Fitri Rahmawati', 'Chris Lee', 'Indah Permata'
        ];

        const COMMENTS = [
            'Excellent massage! Very professional.',
            'Amazing experience, highly recommend.',
            'Great service, will book again.',
            'Fantastic massage therapy session! The therapist was very professional and knew exactly how to address my muscle tension. Highly recommended.',
            'Very relaxing experience. Great technique and wonderful atmosphere. Will definitely return for another session.',
            'Professional service from start to finish. The massage helped tremendously with my back pain. Excellent value for money.',
            'Absolutely incredible massage experience! The therapist arrived on time and was very professional throughout the entire session. My shoulder tension has significantly improved after just one visit. The technique used was perfect for my needs and I felt completely relaxed. Will definitely book again!',
            'One of the best massages I\'ve ever had! The therapist was highly skilled and really understood how to work with my specific problem areas. The pressure was perfect and the overall atmosphere was very relaxing. After weeks of back pain, I finally feel relief. Highly recommend to anyone visiting the area!',
            'Perfect session, exactly what I needed.',
            'Outstanding therapist, very skilled.',
            'Wonderful massage in a comfortable setting. The therapist was skilled and attentive to my needs. Very satisfied with the service.',
            'Great experience overall! Punctual, professional, and very skilled. The massage was exactly what I needed after a long week.'
        ];

        function initializeAll() {
            const output = document.getElementById('output');
            output.innerHTML = '<h2>Initializing...</h2>';

            const existingReviewsJson = localStorage.getItem('massage_app_reviews');
            const existingReviews = existingReviewsJson ? JSON.parse(existingReviewsJson) : [];

            let allReviews = [];
            let report = [];

            THERAPISTS.forEach(therapist => {
                const therapistReviews = existingReviews.filter(r => r.providerId === therapist.id);
                
                if (therapistReviews.length > 0) {
                    // Keep existing reviews
                    allReviews.push(...therapistReviews);
                    report.push(`‚úÖ ${therapist.name}: Already has ${therapistReviews.length} reviews (kept)`);
                } else {
                    // Generate 8 new reviews
                    const newReviews = [];
                    for (let i = 0; i < 8; i++) {
                        const rating = Math.random() > 0.2 ? 5 : 4;
                        const review = {
                            id: `review_${therapist.id}_${Date.now()}_${i}`,
                            providerId: therapist.id,
                            providerType: 'therapist',
                            userId: `user_${Date.now()}_${i}`,
                            userName: NAMES[Math.floor(Math.random() * NAMES.length)],
                            rating: rating,
                            comment: COMMENTS[Math.floor(Math.random() * COMMENTS.length)],
                            location: 'Yogyakarta, Indonesia',
                            createdAt: new Date(Date.now() - (i * 3600000 * 24)).toISOString(),
                            isVerified: false
                        };
                        newReviews.push(review);
                    }
                    allReviews.push(...newReviews);
                    report.push(`‚úÖ ${therapist.name}: Generated ${newReviews.length} new reviews`);
                }
            });

            // Save to localStorage
            localStorage.setItem('massage_app_reviews', JSON.stringify(allReviews));

            // Dispatch event
            window.dispatchEvent(new CustomEvent('reviewsUpdated'));

            output.innerHTML = `
                <div class="status success">
                    <h2>‚úÖ Initialization Complete!</h2>
                    ${report.map(r => `<p>${r}</p>`).join('')}
                    <p><strong>Total reviews in storage:</strong> ${allReviews.length}</p>
                </div>
                <h3>Next Steps:</h3>
                <ol>
                    <li>Refresh your app page (press F5 or Ctrl+R)</li>
                    <li>Navigate to any therapist profile</li>
                    <li>Scroll to bottom to see reviews</li>
                </ol>
            `;
        }

        function checkStatus() {
            const reviewsJson = localStorage.getItem('massage_app_reviews');
            const reviews = reviewsJson ? JSON.parse(reviewsJson) : [];

            let report = ['<h2>Current Status:</h2>'];
            report.push(`<p><strong>Total reviews:</strong> ${reviews.length}</p>`);
            
            THERAPISTS.forEach(therapist => {
                const count = reviews.filter(r => r.providerId === therapist.id).length;
                const status = count > 0 ? '‚úÖ' : '‚ùå';
                report.push(`<p>${status} <strong>${therapist.name}:</strong> ${count} reviews</p>`);
            });

            document.getElementById('output').innerHTML = `
                <div class="status ${reviews.length > 0 ? 'success' : 'error'}">
                    ${report.join('')}
                </div>
            `;
        }

        function clearAll() {
            if (confirm('Are you sure you want to clear ALL reviews? This cannot be undone.')) {
                localStorage.removeItem('massage_app_reviews');
                document.getElementById('output').innerHTML = `
                    <div class="status success">
                        <h2>‚úÖ All reviews cleared</h2>
                        <p>Click "Initialize All Reviews" to regenerate them.</p>
                    </div>
                `;
            }
        }

        // Check status on load
        checkStatus();
    </script>
</body>
</html>
