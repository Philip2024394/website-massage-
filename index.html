<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover, interactive-widget=resizes-content" />
    
    <!-- ‚úÖ Cache control managed by Netlify headers, not meta tags -->
    
    <!-- ‚úÖ MOBILE-FIRST: Critical CSS for first paint loading state -->
    <!-- Prevents 5-10 second blank white screen on slow 3G/4G connections -->
    <style>
        /* Loading spinner for initial app bootstrap */
        #root:empty::before {
            content: '';
            position: fixed;
            top: 50%;
            left: 50%;
            width: 40px;
            height: 40px;
            margin: -20px 0 0 -20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            z-index: 9999;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* Prevent layout shift */
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        #root {
            min-height: 100vh;
        }
    </style>
    
    <!-- üîÑ MOBILE PULL-TO-REFRESH: Allow native mobile refresh gesture -->
    <style>
        /* Allow pull-to-refresh on mobile while preventing back/forward navigation */
        html, body {
            overscroll-behavior-y: auto;
            overscroll-behavior-x: none;
        }
        /* Prevent mobile browser horizontal overscroll navigation */
        body {
            position: relative;
            overflow-x: hidden;
        }
    </style>
    
    <!-- Preview mode: Auto-refresh disabled to prevent flashing -->
    <script>
        // Stable preview mode - no auto-refresh
        console.log('üì± Preview mode active - stable connection');
    </script>
    
    <!-- üì± PWA MANIFEST: Critical for background notifications -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#f97316" />
    
    <!-- üì± FULL-SCREEN PWA: Hide browser UI completely -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="apple-mobile-web-app-title" content="IndaStreet" />
    <link rel="apple-touch-icon" href="https://ik.imagekit.io/7grri5v7d/indastreet_massage_button-removebg-preview.png" />
    
    <!-- Android Chrome specific -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="IndaStreet" />
    
    <!-- PWA Splash Screens -->
    <link rel="apple-touch-startup-image" href="https://ik.imagekit.io/7grri5v7d/indastreet%20massage.png" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    
    <!-- Prevent page zoom on form inputs for Android -->
    <meta name="HandheldFriendly" content="true" />
    
    <!-- ‚úÖ Cache control managed by Netlify HTTP headers, not meta tags -->
    
    <!-- Primary Meta Tags - SEO Optimized for Global Coverage -->
    <title>IndaStreet - Global Massage & Wellness Directory | 200+ Cities in 6 Countries</title>
    <meta name="title" content="IndaStreet - Global Massage & Wellness Directory | Professional Therapists Worldwide" />
    <meta name="description" content="Find professional massage therapists, luxury spas & wellness services worldwide. Coverage in Indonesia, Philippines, UK, USA, Australia, Germany. 200+ cities, 2000+ verified professionals. Instant booking available." />
    <meta name="keywords" content="massage directory, massage therapist, spa services, wellness directory, massage worldwide, spa booking, professional massage, massage Indonesia, massage USA, massage UK, massage Australia, massage Germany, massage Philippines, home massage service, hotel massage, verified therapists, instant booking, mobile massage, outcall massage, wellness services" />
    <meta name="author" content="IndaStreet - Global Massage & Wellness Directory" />
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
    <meta name="language" content="English, Indonesian, German, Filipino" />
    <meta name="revisit-after" content="1 day" />
    <meta name="rating" content="general" />
    <meta name="distribution" content="global" />
    <meta name="coverage" content="Worldwide" />
    
    <!-- Geo Meta Tags - Global Coverage -->
    <meta name="geo.region" content="ID;PH;GB;US;AU;DE" />
    <meta name="geo.placename" content="Indonesia, Philippines, United Kingdom, United States, Australia, Germany" />
    <meta name="geo.coverage" content="Jakarta, Manila, London, New York, Sydney, Berlin, Bali, Tokyo, Los Angeles, Melbourne, Munich, Birmingham" />
    
    <!-- Open Graph / Facebook - Enhanced -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.indastreetmassage.com/" />
    <meta property="og:title" content="IndaStreet - Global Massage & Wellness Directory | 200+ Cities Worldwide" />
    <meta property="og:description" content="Find professional massage therapists, spas & wellness services in 6 countries. Indonesia, Philippines, UK, USA, Australia, Germany. 2000+ verified professionals. Instant booking." />
    <meta property="og:image" content="https://ik.imagekit.io/7grri5v7d/Massage%20hub%20indastreet.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:locale:alternate" content="id_ID" />
    <meta property="og:locale:alternate" content="de_DE" />
    <meta property="og:locale:alternate" content="tl_PH" />
    <meta property="og:site_name" content="IndaStreet" />
    <meta property="fb:app_id" content="YOUR_FACEBOOK_APP_ID" />
    
    <!-- Twitter - Enhanced -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://www.indastreetmassage.com/" />
    <meta property="twitter:title" content="IndaStreet - Global Massage & Wellness Directory" />
    <meta property="twitter:description" content="Find verified massage therapists & wellness services in 6 countries. 200+ cities, 2000+ professionals. Instant booking available." />
    <meta property="twitter:image" content="https://ik.imagekit.io/7grri5v7d/Massage%20hub%20indastreet.png" />
    <meta property="twitter:site" content="@indastreet" />
    <meta property="twitter:creator" content="@indastreet" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="https://ik.imagekit.io/7grri5v7d/indastreet_massage_button-removebg-preview.png" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#f97316" />
    <!-- Canonical -->
    <link rel="canonical" href="https://www.indastreetmassage.com/" />
    
    <!-- Alternate Language Links for Global SEO -->
    <link rel="alternate" hreflang="en" href="https://www.indastreetmassage.com/" />
    <link rel="alternate" hreflang="id" href="https://www.indastreetmassage.com/id" />
    <link rel="alternate" hreflang="de" href="https://www.indastreetmassage.com/de" />
    <link rel="alternate" hreflang="tl" href="https://www.indastreetmassage.com/ph" />
    <link rel="alternate" hreflang="en-GB" href="https://www.indastreetmassage.com/gb" />
    <link rel="alternate" hreflang="en-US" href="https://www.indastreetmassage.com/us" />
    <link rel="alternate" hreflang="en-AU" href="https://www.indastreetmassage.com/au" />
    <link rel="alternate" hreflang="en-PH" href="https://www.indastreetmassage.com/ph?lang=en" />
    <link rel="alternate" hreflang="x-default" href="https://www.indastreetmassage.com/" />
    
    <!-- RSS Feed -->
    <link rel="alternate" type="application/rss+xml" title="IndaStreet - Global Updates" href="https://www.indastreetmassage.com/rss-global.xml" />
    
    <!-- Structured Data - Global Organization -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "IndaStreet",
      "alternateName": "IndaStreet Global Massage & Wellness Directory",
      "description": "Global Massage & Wellness Directory connecting users with professional therapists and spa services in 6 countries: Indonesia, Philippines, UK, USA, Australia, Germany. 200+ cities, 2000+ verified professionals.",
      "image": [
        "https://ik.imagekit.io/7grri5v7d/Massage%20hub%20indastreet.png",
        "https://ik.imagekit.io/7grri5v7d/indastreet%20massage%20logo.png"
      ],
      "@id": "https://www.indastreetmassage.com",
      "url": "https://www.indastreetmassage.com",
      "telephone": "+62-813-9200-0050",
      "email": "indastreet.id@gmail.com",
      "sameAs": [
        "https://www.facebook.com/indastreet",
        "https://www.instagram.com/indastreet",
        "https://twitter.com/indastreet"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "contactType": "Customer Service",
        "availableLanguage": ["English", "Indonesian", "German", "Filipino"]
      },
      "areaServed": [
        {
          "@type": "Country",
          "name": "Indonesia",
          "sameAs": "https://www.indastreetmassage.com/id"
        },
        {
          "@type": "Country",
          "name": "Philippines",
          "sameAs": "https://www.indastreetmassage.com/ph"
        },
        {
          "@type": "Country",
          "name": "United Kingdom",
          "sameAs": "https://www.indastreetmassage.com/gb"
        },
        {
          "@type": "Country",
          "name": "United States",
          "sameAs": "https://www.indastreetmassage.com/us"
        },
        {
          "@type": "Country",
          "name": "Australia",
          "sameAs": "https://www.indastreetmassage.com/au"
        },
        {
          "@type": "Country",
          "name": "Germany",
          "sameAs": "https://www.indastreetmassage.com/de"
        }
      ]
    }
    </script>
    
    <!-- Structured Data - WebSite with Search -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "IndaStreet",
      "url": "https://www.indastreetmassage.com",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://www.indastreetmassage.com/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      },
      "inLanguage": ["en", "id", "de", "tl"]
    }
    </script>
    
    <!-- Social Media Hashtags for Global SEO -->
    <meta name="hashtags" content="#MassageTherapy #WellnessDirectory #GlobalSpa #MassageIndonesia #MassageUK #MassageUSA #MassageAustralia #MassageGermany #MassagePhilippines #SpaBooking #TherapistDirectory #WorldwideMassage #MassageLondon #MassageNYC #MassageSydney #MassageBerlin #MassageManila #MassageJakarta #MassageBali" />
    
    <style>
        /* Hide scrollbar for navigation buttons */
        .overflow-x-auto::-webkit-scrollbar {
            display: none;
        }
        
        /* Smooth fade-in for initial load */
        #root {
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
    </style>
    <!-- 
        ========================================================================
                                  GOOGLE MAPS SETUP
        ========================================================================
        The Google Maps API Key is now managed within the application.
        To enable location features:
        1. Log in to the Admin Dashboard.
        2. Navigate to the "Google Maps API Key" section.
        3. Enter your valid API key and save.
        
        The app will automatically load the Maps API once the key is provided.
        Get a key from the Google Cloud Console: https://console.cloud.google.com/google/maps-apis
        ========================================================================
    -->
    <style>
        /* Hide scrollbar for Chrome, Safari and Opera */
        *::-webkit-scrollbar {
            display: none;
        }

        /* Hide scrollbar for IE, Edge and Firefox */
        * {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        
        /* PWA Splash Screen - Elegant Black & White Design */
        #pwa-splash {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: linear-gradient(135deg, #ffffff 0%, #f5f5f5 100%);
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          z-index: 9999;
          opacity: 1;
          transition: opacity 0.3s ease-out;
        }
        
        #pwa-splash.hidden {
          opacity: 0;
          pointer-events: none;
        }
        
        #pwa-splash img {
          width: 120px;
          height: 120px;
          object-fit: contain;
          margin-bottom: 20px;
          border-radius: 50%;
          padding: 10px;
          background: transparent;
          animation: fadeIn 0.8s ease-out;
        }
        
        #pwa-splash h1 {
          color: #000000;
          font-size: 32px;
          font-weight: 700;
          margin: 0;
          letter-spacing: -0.5px;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
          animation: fadeIn 0.8s ease-out 0.2s both;
        }
        
        #pwa-splash p {
          color: transparent;
          font-size: 12px;
          margin: 16px 0 0 0;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
          display: flex;
          gap: 4px;
          align-items: center;
        }
        
        /* Dancing dots animation */
        .loading-dot {
          width: 8px;
          height: 8px;
          border-radius: 50%;
          background: #000000;
          animation: dotPulse 1.4s ease-in-out infinite;
        }
        
        .loading-dot:nth-child(1) {
          animation-delay: 0s;
        }
        
        .loading-dot:nth-child(2) {
          animation-delay: 0.2s;
        }
        
        .loading-dot:nth-child(3) {
          animation-delay: 0.4s;
        }
        
        @keyframes dotPulse {
          0%, 80%, 100% {
            transform: scale(0.8);
            opacity: 0.5;
          }
          40% {
            transform: scale(1.2);
            opacity: 1;
          }
        }
        
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
    </style>
    
    <!-- Social Media Hashtags for Global SEO -->
    <meta name="hashtags" content="#MassageTherapy #WellnessDirectory #GlobalSpa #MassageIndonesia #MassageUK #MassageUSA #MassageAustralia #MassageGermany #MassagePhilippines #SpaBooking #TherapistDirectory #WorldwideMassage #MassageLondon #MassageNYC #MassageSydney #MassageBerlin #MassageManila #MassageJakarta #MassageBali" />
    
</head>
<body class="bg-gray-100">
    <!-- PWA Splash Screen - Elegant Black & White Design -->
    <div id="pwa-splash">
      <img src="https://ik.imagekit.io/7grri5v7d/indastreet_massage_button-removebg-preview.png" alt="IndaStreet" />
      <h1>Indastreet</h1>
      <p>
        <span class="loading-dot"></span>
        <span class="loading-dot"></span>
        <span class="loading-dot"></span>
      </p>
    </div>
    
    <div id="root"></div>
  <!-- Dedicated overlay root for portals (toasts, modals, etc.) -->
  <div id="overlay-root"></div>
    
    <!-- Hide splash screen after React loads -->
    <script>
      (function() {
        var splashHidden = false;
        var contentReady = false;
        
        // Hide splash smoothly
        function hideSplash() {
          if (splashHidden) return;
          splashHidden = true;
          
          var splash = document.getElementById('pwa-splash');
          if (splash) {
            splash.style.opacity = '0';
            setTimeout(function() {
              if (splash.parentNode) {
                splash.remove();
              }
            }, 300);
          }
        }
        
        // Preload background image BEFORE React loads
        var bgImg = new Image();
        var imageLoaded = false;
        bgImg.onload = function() {
          imageLoaded = true;
          if (contentReady) {
            setTimeout(hideSplash, 100);
          }
        };
        bgImg.onerror = function() {
          imageLoaded = true;
        };
        bgImg.src = 'https://ik.imagekit.io/7grri5v7d/indastreet%20massage.png?updatedAt=1761978080830';
        
        // Wait for React content
        var observer = new MutationObserver(function(mutations) {
          var root = document.getElementById('root');
          if (root && root.children.length > 0 && !contentReady) {
            contentReady = true;
            
            // If image already loaded, hide immediately
            if (imageLoaded) {
              setTimeout(hideSplash, 100);
            } else {
              // Wait for image or timeout
              setTimeout(hideSplash, 500);
            }
            
            observer.disconnect();
          }
        });
        observer.observe(document.getElementById('root'), { childList: true });
        
        // Fallback: hide on window load
        window.addEventListener('load', function() {
          setTimeout(hideSplash, 200);
        });
        
        // Fallback: hide on first touch (user interaction)
        document.addEventListener('touchstart', function() {
          setTimeout(hideSplash, 50);
        }, { once: true });
        
        // Emergency fallback: max 2 seconds
        setTimeout(hideSplash, 2000);
      })();
    </script>
    
    <!-- CACHE BUSTER: 2024-10-31-10:05:00 -->
    <script type="module" src="/src/index.tsx?v=20241031100500"></script>
    <script>
      // Note: All console errors will now display naturally as per system honesty requirements
      // This includes 401/501 authentication errors which are expected when not logged in
      
      // üì± PWA SERVICE WORKER: Disabled on localhost to avoid dev cache issues
      if ('serviceWorker' in navigator) {
        const isLocal = ['localhost', '127.0.0.1'].includes(window.location.hostname);

        if (isLocal) {
          // Proactively unregister any SWs when developing locally
          navigator.serviceWorker.getRegistrations().then((regs) => {
            regs.forEach((reg) => reg.unregister());
            console.log('üßπ Unregistered existing service workers on localhost');
          });
        } else if (window.location.protocol === 'https:') {
          // Only register in production (HTTPS) environments
          window.addEventListener('load', function() {
            navigator.serviceWorker.register('/sw.js')
              .then(function(registration) {
                console.log('‚úÖ PWA Service Worker registered:', registration.scope);

                // Enable install prompt for "Add to Home Screen"
                // Store prompt for user-triggered install (e.g., via button click)
                window.deferredPrompt = null;
                window.addEventListener('beforeinstallprompt', (e) => {
                  e.preventDefault();
                  window.deferredPrompt = e;
                  console.log('üì± PWA install prompt ready - call window.deferredPrompt.prompt() on user action');
                });

                // Note: Install prompt must be triggered by user gesture (button click)
                // To show install UI, create a button that calls:
                // window.deferredPrompt?.prompt()
              })
              .catch(function(error) {
                console.log('‚ùå PWA Service Worker registration failed:', error);
              });
          });
        }
      }
    </script>
</body>
</html>
