/* Global Scroll & Footer Fix - Modern Architecture */

/* CRITICAL: Fix body and html scrolling behavior */
html, body {
  height: 100vh !important;
  overflow: hidden !important; /* Prevent body scroll */
  margin: 0;
  padding: 0;
  position: relative; /* Establish stacking context for proper z-index */
}

/* CRITICAL: Root container handles ALL scrolling */
#root {
  height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
  overflow: hidden !important;
}

/* CRITICAL: App container structure */
.mobile-optimized, 
.container-mobile {
  height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
  /* overflow: hidden removed to allow drawers to display */
}

/* CRITICAL: Content area handles scrolling, not body */
.content-landscape,
.flex-1 {
  flex: 1 !important;
  overflow-y: auto !important; /* Content scrolls, not body */
  overflow-x: hidden !important;
  -webkit-overflow-scrolling: touch; /* Smooth iOS scrolling */
  position: relative; /* Create stacking context */
  z-index: 20; /* Above footer, below drawers */
}

/* CRITICAL: Footer always at bottom, behind drawers */
footer {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  z-index: 50 !important; /* Lower than drawers (z-99999) */
  flex-shrink: 0 !important; /* Footer never shrinks */
}

/* CRITICAL: Ensure drawers/modals appear above footer */
[role="dialog"], 
.fixed.inset-0,
div[role="dialog"] {
  position: fixed !important;
  z-index: 2147483647 !important; /* Maximum possible z-index */
  isolation: isolate; /* Create new stacking context */
  transform: translateZ(0); /* Force hardware acceleration and new layer */
}

/* Force drawer backdrop and panel to top */
.fixed.inset-0 > .absolute,
.fixed.inset-0 .bg-white {
  z-index: 2147483647 !important;
  transform: translateZ(0); /* Force to top layer */
}

/* Z-Index Hierarchy (Footer Behind Drawers) */
/* 
  Footer: z-10 (behind everything)
  Content: z-20 (above footer)
  Drawers & Modals: z-[100] (above content)
  High Priority Modals: z-[9999]+ (top layer)
*/

/* Page content scrolling rules - CRITICAL FIX */
.min-h-screen {
  height: 100% !important; /* Fill available space */
  overflow-y: auto !important; /* Allow page content to scroll */
  overflow-x: hidden !important;
  position: relative; /* Create stacking context */
  z-index: 1; /* LOWER than footer - allows drawer to escape page context */
}

/* CRITICAL: Allow drawers to escape page containers */
.min-h-screen [role="dialog"] {
  position: fixed !important;
  z-index: 2147483647 !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
}

/* FORCE ALL DRAWERS TO TOP LAYER */
[role="dialog"] {
  position: fixed !important;
  z-index: 2147483647 !important;
  isolation: isolate !important;
  transform: translateZ(0) !important;
}

/* Ensure no container can contain the drawer */
*:has([role="dialog"]) {
  transform: none !important;
  contain: none !important;
  isolation: auto !important;
}

/* Remove all bottom padding that interferes with footer */
.pb-16, .pb-20, .pb-24 {
  padding-bottom: 0 !important;
}

/* Ensure all overlays appear above footer */
/* z-index hierarchy enforced via component classes */

/* Ensure smooth scrolling on all devices */
* {
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* Fix for mobile devices */
@media (max-width: 640px) {
  .content-landscape {
    -webkit-overflow-scrolling: touch !important;
  }
}

.flex-grow {
  flex: 1;
}