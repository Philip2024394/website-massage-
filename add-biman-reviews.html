<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Initialize Biman Reviews</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #7f8c8d;
            margin-bottom: 30px;
        }
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        button:hover {
            background: #2980b9;
        }
        button.danger {
            background: #e74c3c;
        }
        button.danger:hover {
            background: #c0392b;
        }
        button.success {
            background: #27ae60;
        }
        button.success:hover {
            background: #229954;
        }
        #output {
            margin-top: 20px;
            padding: 15px;
            background: #ecf0f1;
            border-radius: 6px;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 6px;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Initialize Biman Reviews</h1>
        <p class="subtitle">Manage reviews for therapist Biman (ID: 694fa81cd8ff39b89351)</p>
        
        <div>
            <button onclick="checkStatus()">üìä Check Current Status</button>
            <button class="success" onclick="initializeReviews()">‚ú® Initialize Biman Reviews</button>
            <button class="danger" onclick="clearAllReviews()">üóëÔ∏è Clear All Reviews</button>
        </div>
        
        <div id="output"></div>
    </div>

    <script>
        const BIMAN_ID = '694fa81cd8ff39b89351';
        const BIMAN_NAME = 'Biman';

        const names = [
            'John Davis', 'Rachel Thompson', 'Mark Stevens', 'Sophie Lewis',
            'Daniel Kim', 'Emma Wilson', 'Robert Martinez', 'Nina Patel',
            'Thomas Hughes', 'Linda Robinson', 'Chris Bennett', 'Julia Foster',
            'Michael Chang', 'Sarah Anderson', 'David Lee', 'Amy Rodriguez'
        ];

        const comments = [
            'Biman is exceptional! His deep tissue massage was exactly what I needed for my chronic back pain. Very professional and skilled. Highly recommend!',
            'Best massage therapist in Yogyakarta! Biman really knows his craft and was able to identify and work on my problem areas. Very satisfied!',
            'Outstanding service! Biman was punctual, professional, and his massage technique is top-notch. I felt amazing after the session.',
            'Wonderful experience! Biman has strong hands and really knows how to work out the knots. Very attentive and professional throughout.',
            'Highly skilled therapist! Biman\'s expertise in traditional and sports massage is evident. He helped me recover from a sports injury quickly.',
            'Absolutely fantastic! Biman was very professional and his massage technique was perfect. I felt completely relaxed and rejuvenated.',
            'Excellent massage! Biman has great technique and really listens to what you need. His deep pressure work is incredible.',
            'Best massage I\'ve had in years! Biman is very skilled and attentive. He customized the massage to my specific needs perfectly.',
            'Professional and skilled! Biman\'s massage helped tremendously with my neck and shoulder tension. Will definitely book again!',
            'Amazing therapist! Biman is very knowledgeable and his technique is excellent. I felt so much better after just one session.',
            'Outstanding service from start to finish! Biman is professional, punctual, and incredibly skilled. Highly recommend him!',
            'Fantastic massage! Biman has a great understanding of muscle anatomy and really knows how to release tension. Very satisfied!',
            'Incredible experience! Biman provided the best therapeutic massage I\'ve ever had. His technique is masterful.',
            'Very impressed with Biman\'s professionalism and skill. The massage was perfect for my sports recovery needs.',
            'Biman is a true expert! His massage therapy helped relieve my chronic pain significantly. Can\'t thank him enough!',
            'Superb service! Biman\'s attention to detail and expert technique made this the best massage experience in Yogyakarta.'
        ];

        function checkStatus() {
            const output = document.getElementById('output');
            const reviewsJson = localStorage.getItem('massage_app_reviews');
            
            if (!reviewsJson) {
                output.innerHTML = '<div class="status info">‚ÑπÔ∏è No reviews found in localStorage yet.</div>';
                return;
            }

            const reviews = JSON.parse(reviewsJson);
            const bimanReviews = reviews.filter(r => r.providerId === BIMAN_ID);
            
            output.innerHTML = `
                <div class="status success">
                    <strong>‚úÖ Reviews Status:</strong><br>
                    Total reviews in system: ${reviews.length}<br>
                    Biman's reviews: ${bimanReviews.length}
                </div>
                ${bimanReviews.length > 0 ? `
                    <h3>Biman's Reviews:</h3>
                    ${bimanReviews.map((r, i) => `
                        <div style="margin: 10px 0; padding: 10px; background: white; border-left: 3px solid #3498db;">
                            <strong>${i + 1}. ${r.userName}</strong> - ${'‚≠ê'.repeat(r.rating)}<br>
                            <small>${r.comment}</small><br>
                            <small style="color: #7f8c8d;">üìÖ ${new Date(r.createdAt).toLocaleDateString()}</small>
                        </div>
                    `).join('')}
                ` : ''}
            `;
        }

        function initializeReviews() {
            const output = document.getElementById('output');
            
            // Get existing reviews
            const reviewsJson = localStorage.getItem('massage_app_reviews');
            const existingReviews = reviewsJson ? JSON.parse(reviewsJson) : [];
            
            // Check if Biman already has reviews
            const bimanReviews = existingReviews.filter(r => r.providerId === BIMAN_ID);
            
            if (bimanReviews.length > 0) {
                output.innerHTML = `
                    <div class="status error">
                        ‚ùå Biman already has ${bimanReviews.length} reviews!<br>
                        Click "Clear All Reviews" first if you want to reinitialize.
                    </div>
                `;
                return;
            }
            
            // Generate 12 reviews for Biman
            const newReviews = [];
            for (let i = 0; i < 12; i++) {
                const rating = Math.random() > 0.15 ? 5 : 4; // 85% 5-star, 15% 4-star
                const daysAgo = Math.floor(Math.random() * 20) + 1; // 1-20 days ago
                
                const review = {
                    id: `review_biman_${Date.now()}_${i}`,
                    providerId: BIMAN_ID,
                    providerType: 'therapist',
                    userId: `user_${Date.now()}_${i}`,
                    userName: names[i % names.length],
                    rating: rating,
                    comment: comments[i % comments.length],
                    location: 'Yogyakarta, Indonesia',
                    createdAt: new Date(Date.now() - (daysAgo * 86400000)).toISOString(),
                    isVerified: false
                };
                newReviews.push(review);
            }
            
            // Add to existing reviews
            const allReviews = [...existingReviews, ...newReviews];
            localStorage.setItem('massage_app_reviews', JSON.stringify(allReviews));
            
            // Dispatch event to refresh UI
            window.dispatchEvent(new CustomEvent('reviewsUpdated'));
            
            output.innerHTML = `
                <div class="status success">
                    ‚úÖ Successfully generated ${newReviews.length} reviews for Biman!<br><br>
                    <strong>Next steps:</strong><br>
                    1. Refresh your app to see the reviews<br>
                    2. Visit Biman's profile page<br>
                    3. Auto-review system will continue adding reviews every 5 minutes
                </div>
                <h3>Generated Reviews Preview:</h3>
                ${newReviews.slice(0, 3).map((r, i) => `
                    <div style="margin: 10px 0; padding: 10px; background: white; border-left: 3px solid #27ae60;">
                        <strong>${i + 1}. ${r.userName}</strong> - ${'‚≠ê'.repeat(r.rating)}<br>
                        <small>${r.comment}</small><br>
                        <small style="color: #7f8c8d;">üìÖ ${new Date(r.createdAt).toLocaleDateString()}</small>
                    </div>
                `).join('')}
                <p><em>...and ${newReviews.length - 3} more reviews</em></p>
            `;
        }

        function clearAllReviews() {
            if (!confirm('‚ö†Ô∏è This will delete ALL reviews in localStorage. Are you sure?')) {
                return;
            }
            
            localStorage.removeItem('massage_app_reviews');
            window.dispatchEvent(new CustomEvent('reviewsUpdated'));
            
            document.getElementById('output').innerHTML = `
                <div class="status success">
                    ‚úÖ All reviews cleared from localStorage!<br>
                    Refresh the page and the system will auto-generate reviews for all Yogyakarta therapists.
                </div>
            `;
        }

        // Check status on page load
        window.addEventListener('load', checkStatus);
    </script>
</body>
</html>
