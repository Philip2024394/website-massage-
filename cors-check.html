<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>CORS Check</title><style>body{font-family:system-ui,Arial,sans-serif;margin:24px}pre{background:#f6f8fa;padding:16px;border-radius:8px;overflow:auto}.ok{color:#0a7}.err{color:#b00020}.section{margin-bottom:20px}code{background:#eef;padding:2px 6px;border-radius:4px}</style><script src="https://cdn.jsdelivr.net/npm/appwrite@13/dist/browser/appwrite.min.js"></script><script>const endpoint="https://syd.cloud.appwrite.io/v1";const projectId="68f23b11000d25eb3664";const databaseId="68f76ee1000e64ca8d05";const therapistsCollectionId="therapists_collection_id";async function runChecks(){const out=document.getElementById("out");const log=(label,obj,cls="")=>{const div=document.createElement("div");div.className="section "+cls;div.innerHTML=`<strong>${label}</strong>`;const pre=document.createElement("pre");pre.textContent=typeof obj==="string"?obj:JSON.stringify(obj,null,2);div.appendChild(pre);out.appendChild(div)};try{const res=await fetch(`${endpoint}/health`);const txt=await res.text();let json;try{json=JSON.parse(txt)}catch{json={rawText:txt}}log("Health endpoint response",{status:res.status,ok:res.ok,json},res.ok?"ok":"err")}catch(e){log("Health endpoint fetch error",{message:e?.message||String(e),name:e?.name},"err")}try{const client=new Appwrite.Client().setEndpoint(endpoint).setProject(projectId);const databases=new Appwrite.Databases(client);const res=await databases.listDocuments(databaseId,therapistsCollectionId);log("SDK listDocuments (unauthenticated)",{count:res.documents.length,sample:res.documents.slice(0,3).map(d=>({id:d.$id,name:d.name}))},"ok")}catch(e){log("SDK listDocuments error (unauthenticated)",{message:e?.message||String(e),code:e?.code||"n/a",type:e?.type||"n/a"},"err")}try{const client=new Appwrite.Client().setEndpoint(endpoint).setProject(projectId);const account=new Appwrite.Account(client);const anon=await account.createAnonymousSession();log("Anonymous session created",{$id:anon?.$id||"ok"},"ok");const databases=new Appwrite.Databases(client);const res=await databases.listDocuments(databaseId,therapistsCollectionId);log("SDK listDocuments (anonymous session)",{count:res.documents.length,sample:res.documents.slice(0,3).map(d=>({id:d.$id,name:d.name}))},"ok")}catch(e){log("Anonymous session/listDocuments error",{message:e?.message||String(e),code:e?.code||"n/a",type:e?.type||"n/a"},"err")}}window.addEventListener("DOMContentLoaded",runChecks)</script></head><body><h1>CORS & Access Diagnostics</h1><p>Origin: <code id="origin"></code> Â· Endpoint: <code>https://syd.cloud.appwrite.io/v1</code></p><div id="out"></div><script>document.getElementById("origin").textContent=window.location.origin;</script></body></html>
