# Git Workflow Guide - Protect Your Work

## Current Branch Structure

- **`main`** - Active development branch
- **`production-stable`** - Last known working state (safe backup)
- **`protect/therapist-dashboard`** - Protected copy of therapist dashboard

## Daily Workflow

### Starting New Work
```powershell
# Always start from main
git checkout main
git pull origin main

# Create a feature branch for specific work
git checkout -b feature/your-feature-name
```

### Working on Features
```powershell
# Make your changes...
git add .
git commit -m "feat: description of changes"
git push origin feature/your-feature-name
```

### If Something Breaks
```powershell
# Quick recovery - go back to stable version
git checkout production-stable

# Or recover specific file from stable branch
git checkout production-stable -- pages/TherapistDashboardPage.tsx
```

### Merging Back to Main
```powershell
# When your feature is tested and working
git checkout main
git merge feature/your-feature-name
git push origin main

# Update stable backup
git checkout production-stable
git merge main
git push origin production-stable
```

## Protecting Therapist Dashboard

### Restore Dashboard from Protected Branch
```powershell
# If dashboard gets broken, restore it:
git checkout protect/therapist-dashboard -- pages/TherapistDashboardPage.tsx
git add pages/TherapistDashboardPage.tsx
git commit -m "restore: therapist dashboard from protected branch"
```

### Update Protected Dashboard (Only When Intentional)
```powershell
# Only do this when you've tested and confirmed dashboard works perfectly
git checkout protect/therapist-dashboard
git checkout main -- pages/TherapistDashboardPage.tsx
git add pages/TherapistDashboardPage.tsx
git commit -m "update: protected therapist dashboard"
git push origin protect/therapist-dashboard
git checkout main
```

## Quick Commands

### See What Branch You're On
```powershell
git branch
```

### See All Branches
```powershell
git branch -a
```

### Discard Local Changes
```powershell
# Discard changes to specific file
git restore pages/TherapistDashboardPage.tsx

# Discard ALL local changes (careful!)
git restore .
```

### Compare Files Between Branches
```powershell
# See what changed in a file
git diff production-stable main -- pages/TherapistDashboardPage.tsx
```

## Emergency Recovery

### Everything is Broken - Go Back to Stable
```powershell
git stash  # Save current work
git checkout production-stable  # Switch to working version
# Fix issues, then optionally:
git stash pop  # Restore your work
```

### Undo Last Commit (Local Only)
```powershell
git reset --soft HEAD~1  # Keeps changes
# or
git reset --hard HEAD~1  # Discards changes (careful!)
```

## Best Practices

1. **Commit Often** - Small commits are easier to track and revert
2. **Branch for Features** - Never work directly on main for experiments
3. **Test Before Merging** - Always test on feature branch first
4. **Update Stable Weekly** - Keep production-stable current when main is working well
5. **Use Descriptive Names** - feature/promoter-qr-code is better than feature/fix

## Command Shortcuts for Your .profile

Add these to your PowerShell profile for quick access:

```powershell
# Quick switch to stable
function stable { git checkout production-stable }

# Quick restore dashboard
function restore-dashboard { 
    git checkout protect/therapist-dashboard -- pages/TherapistDashboardPage.tsx
    Write-Host "âœ… Therapist dashboard restored from protected branch"
}

# Quick feature branch
function new-feature($name) {
    git checkout main
    git pull origin main
    git checkout -b "feature/$name"
}
```
