<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Languages Debug Tool</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .debug-section {
            padding: 30px;
        }
        .debug-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            transition: all 0.3s ease;
        }
        .debug-card:hover {
            border-color: #007bff;
            transform: translateY(-2px);
        }
        .code-block {
            background: #f1f3f4;
            border: 1px solid #dadce0;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            margin: 10px 0;
        }
        .test-button {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            width: 100%;
            margin-top: 15px;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        }
        .result-display {
            background: #e9ecef;
            border: 1px solid #ced4da;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            display: none;
            max-height: 400px;
            overflow-y: auto;
        }
        .step-list {
            margin: 15px 0;
            padding-left: 20px;
        }
        .step-list li {
            margin: 8px 0;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸŒ Languages Debug Tool</h1>
            <p>Debug languages not displaying on therapist cards</p>
        </div>

        <div class="debug-section">
            <div class="debug-card">
                <h3>ğŸ” Issue Analysis</h3>
                <p><strong>Problem:</strong> Languages selected in therapist dashboard are not displaying on live therapist cards.</p>
                
                <h4>ğŸ§ª Debug Process:</h4>
                <ol class="step-list">
                    <li><strong>Dashboard Save:</strong> Check if languages are being saved correctly</li>
                    <li><strong>Data Storage:</strong> Verify languages are stored in database</li>
                    <li><strong>Card Loading:</strong> Check if languages are loaded in therapist cards</li>
                    <li><strong>Parsing:</strong> Verify parseLanguages function works correctly</li>
                    <li><strong>Display Logic:</strong> Check if display conditions are met</li>
                </ol>
            </div>

            <div class="debug-card">
                <h3>ğŸ“Š Expected Console Logs</h3>
                <p>When you test, look for these console messages:</p>
                
                <div class="code-block">
ğŸŒ Dashboard Debug - Languages before save: ['English', 'Indonesian', 'Mandarin']
ğŸŒ Dashboard Debug - Stringified languages: ["English","Indonesian","Mandarin"]
ğŸŒ Dashboard Debug - Full therapist data being saved: {languages: '["English","Indonesian","Mandarin"]', ...}
                </div>

                <div class="code-block">
ğŸŒ TherapistCard Debug - Raw therapist.languages: ["English","Indonesian","Mandarin"]
ğŸŒ TherapistCard Debug - Languages type: string
ğŸŒ TherapistCard Debug - Parsed languages: ['English', 'Indonesian', 'Mandarin']
ğŸŒ TherapistCard Debug - Languages length: 3
ğŸŒ TherapistCard Debug - Is Array?: true
                </div>
            </div>

            <div class="debug-card">
                <h3>ğŸ§ª Testing Steps</h3>
                
                <h4>Step 1: Test Dashboard Save</h4>
                <ol class="step-list">
                    <li>Go to therapist dashboard: <code>http://localhost:3005/</code></li>
                    <li>Login as therapist and navigate to profile</li>
                    <li>Select 2-3 languages (English, Indonesian, Mandarin)</li>
                    <li>Click Save Profile</li>
                    <li>Check console for dashboard debug logs</li>
                </ol>
                
                <h4>Step 2: Test Card Display</h4>
                <ol class="step-list">
                    <li>Go to home page after saving</li>
                    <li>Look for your therapist card</li>
                    <li>Check console for TherapistCard debug logs</li>
                    <li>Verify if languages section appears</li>
                </ol>

                <button class="test-button" onclick="runDebugTest()">
                    ğŸ” Start Debug Test Process
                </button>
                <div id="debug-result" class="result-display"></div>
            </div>

            <div class="debug-card">
                <h3>ğŸ”§ Helper Functions Test</h3>
                
                <div class="code-block">
// Test parseLanguages and stringifyLanguages
const testLanguages = ['English', 'Indonesian', 'Mandarin'];
const stringified = JSON.stringify(testLanguages);
const parsed = JSON.parse(stringified);

console.log('Original:', testLanguages);
console.log('Stringified:', stringified);
console.log('Parsed back:', parsed);
console.log('Arrays equal:', JSON.stringify(testLanguages) === JSON.stringify(parsed));
                </div>

                <button class="test-button" onclick="testHelperFunctions()">
                    âš™ï¸ Test Helper Functions
                </button>
                <div id="helper-result" class="result-display"></div>
            </div>

            <div class="debug-card">
                <h3>ğŸ¯ Possible Issues & Solutions</h3>
                
                <h4>Issue 1: Data Not Saving</h4>
                <ul class="step-list">
                    <li><strong>Symptom:</strong> No dashboard debug logs</li>
                    <li><strong>Solution:</strong> Check if languages state is updating correctly</li>
                </ul>
                
                <h4>Issue 2: Data Not Loading on Cards</h4>
                <ul class="step-list">
                    <li><strong>Symptom:</strong> Dashboard logs OK, but no card logs</li>
                    <li><strong>Solution:</strong> Check if therapist data is being fetched properly</li>
                </ul>
                
                <h4>Issue 3: Parsing Issue</h4>
                <ul class="step-list">
                    <li><strong>Symptom:</strong> Raw data exists but parsed array is empty</li>
                    <li><strong>Solution:</strong> Check parseLanguages function</li>
                </ul>
                
                <h4>Issue 4: Display Condition Not Met</h4>
                <ul class="step-list">
                    <li><strong>Symptom:</strong> Parsed data OK but languages section not showing</li>
                    <li><strong>Solution:</strong> Check display conditions in TherapistCard</li>
                </ul>
            </div>

            <div class="debug-card">
                <h3>ğŸš€ Quick Actions</h3>
                
                <button class="test-button" onclick="openDashboard()">
                    ğŸ‘¨â€âš•ï¸ Open Therapist Dashboard
                </button>
                
                <button class="test-button" onclick="openHomePage()">
                    ğŸ  Open Home Page (Check Cards)
                </button>
            </div>
        </div>
    </div>

    <script>
        function runDebugTest() {
            const result = document.getElementById('debug-result');
            result.style.display = 'block';
            result.innerHTML = '<strong>ğŸ” Debug Test Instructions:</strong><br><br>';
            
            result.innerHTML += '1. Open developer console (F12)<br>';
            result.innerHTML += '2. Go to therapist dashboard<br>';
            result.innerHTML += '3. Select languages and save<br>';
            result.innerHTML += '4. Check for dashboard debug logs<br>';
            result.innerHTML += '5. Go to home page<br>';
            result.innerHTML += '6. Check for card debug logs<br>';
            result.innerHTML += '7. Compare expected vs actual logs<br><br>';
            
            result.innerHTML += '<strong>Expected Dashboard Logs:</strong><br>';
            result.innerHTML += 'ğŸŒ Dashboard Debug - Languages before save: [...]<br>';
            result.innerHTML += 'ğŸŒ Dashboard Debug - Stringified languages: "[...]"<br><br>';
            
            result.innerHTML += '<strong>Expected Card Logs:</strong><br>';
            result.innerHTML += 'ğŸŒ TherapistCard Debug - Raw therapist.languages: "[...]"<br>';
            result.innerHTML += 'ğŸŒ TherapistCard Debug - Parsed languages: [...]<br>';
        }

        function testHelperFunctions() {
            const result = document.getElementById('helper-result');
            result.style.display = 'block';
            
            // Test the helper functions
            const testLanguages = ['English', 'Indonesian', 'Mandarin'];
            const stringified = JSON.stringify(testLanguages);
            const parsed = JSON.parse(stringified);
            
            result.innerHTML = '<strong>ğŸ§ª Helper Functions Test Results:</strong><br><br>';
            result.innerHTML += `Original Array: ${JSON.stringify(testLanguages)}<br>`;
            result.innerHTML += `Stringified: ${stringified}<br>`;
            result.innerHTML += `Parsed Back: ${JSON.stringify(parsed)}<br>`;
            result.innerHTML += `Arrays Equal: ${JSON.stringify(testLanguages) === JSON.stringify(parsed)}<br>`;
            result.innerHTML += `Type Check: ${typeof stringified} â†’ ${typeof parsed}<br><br>`;
            
            result.innerHTML += '<strong>âœ… Helper Functions Status:</strong><br>';
            result.innerHTML += 'JSON.stringify: Working âœ“<br>';
            result.innerHTML += 'JSON.parse: Working âœ“<br>';
            result.innerHTML += 'Round-trip conversion: Working âœ“<br>';
        }

        function openDashboard() {
            window.open('http://localhost:3005/', '_blank');
        }

        function openHomePage() {
            window.open('http://localhost:3005/', '_blank');
        }

        // Auto-run helper function test
        console.log('ğŸŒ Languages Debug Tool Loaded');
        console.log('ğŸ§ª Testing helper functions...');
        testHelperFunctions();
        
        // Log instructions
        console.log('ğŸ“‹ Debug Instructions:');
        console.log('1. Select languages in therapist dashboard');
        console.log('2. Save profile and watch for dashboard logs');
        console.log('3. Go to home page and check card logs');
        console.log('4. Look for ğŸŒ prefixed debug messages');
    </script>
</body>
</html>