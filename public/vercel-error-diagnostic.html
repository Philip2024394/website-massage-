<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Vercel Error Diagnostic Scan</title>
    <style>
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            line-height: 1.6;
        }
        .scan-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            padding: 25px;
            margin: 20px 0;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        .success { border-left: 5px solid #2ed573; }
        .warning { border-left: 5px solid #ffa502; }
        .error { border-left: 5px solid #ff4757; }
        .info { border-left: 5px solid #3742fa; }
        
        .test-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }
        
        .status-good { color: #2ed573; }
        .status-warning { color: #ffa502; }
        .status-error { color: #ff4757; }
        
        button {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px 5px;
            transition: all 0.3s ease;
        }
        button:hover { 
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        code {
            background: rgba(0, 0, 0, 0.4);
            padding: 4px 8px;
            border-radius: 4px;
            font-family: monospace;
        }
        
        .log-area {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>üîç Vercel Error Diagnostic Scan</h1>
    
    <div class="scan-card success">
        <h2>‚úÖ Local Build Status</h2>
        <div class="test-item">
            <span>TypeScript Compilation</span>
            <span class="status-good">‚úÖ PASSED</span>
        </div>
        <div class="test-item">
            <span>Vite Production Build</span>
            <span class="status-good">‚úÖ PASSED</span>
        </div>
        <div class="test-item">
            <span>CSS Processing (Tailwind)</span>
            <span class="status-good">‚úÖ PASSED</span>
        </div>
        <div class="test-item">
            <span>Main.tsx Cleanup</span>
            <span class="status-good">‚úÖ COMPLETED (36 lines)</span>
        </div>
        <div class="test-item">
            <span>Node.js Version</span>
            <span class="status-good">‚úÖ UPDATED (22.x)</span>
        </div>
    </div>

    <div class="scan-card warning">
        <h2>‚ö†Ô∏è Build Warnings (Non-Critical)</h2>
        <p>The following warnings were detected but <strong>do not prevent deployment:</strong></p>
        <div class="test-item">
            <span>Dynamic Import Warnings</span>
            <span class="status-warning">‚ö†Ô∏è WARNINGS ONLY</span>
        </div>
        <p><small>These are optimization warnings from Vite about module chunking. They don't break the app.</small></p>
    </div>

    <div class="scan-card info">
        <h2>üéØ Production Site Tests</h2>
        <p>Test your production site to identify the specific error:</p>
        
        <button onclick="testProductionSite()">üöÄ Test Production Site</button>
        <button onclick="checkConsoleErrors()">üîç Check Console Errors</button>
        <button onclick="testCORS()">üåê Test CORS</button>
        <button onclick="testCSS()">üé® Test CSS Loading</button>
        
        <div id="test-results" class="log-area" style="display: none;">
            <div id="test-log"></div>
        </div>
    </div>

    <div class="scan-card error">
        <h2>‚ùì What Error Are You Seeing?</h2>
        <p>Please describe the specific Vercel error you're encountering:</p>
        <ul>
            <li><strong>Build Error:</strong> Deployment fails during build?</li>
            <li><strong>Runtime Error:</strong> Site loads but shows errors?</li>
            <li><strong>CORS Error:</strong> API calls failing?</li>
            <li><strong>CSS Error:</strong> Styling still broken?</li>
            <li><strong>404 Error:</strong> Pages not found?</li>
        </ul>
    </div>

    <div class="scan-card info">
        <h2>üìä Current Status Summary</h2>
        <div class="test-item">
            <span>Git Status</span>
            <span class="status-good">‚úÖ All changes pushed</span>
        </div>
        <div class="test-item">
            <span>Critical Fixes Deployed</span>
            <span class="status-good">‚úÖ Commit 23e1848</span>
        </div>
        <div class="test-item">
            <span>CORS Platform Config</span>
            <span class="status-good">‚úÖ Sydney console configured</span>
        </div>
        <div class="test-item">
            <span>Local Build</span>
            <span class="status-good">‚úÖ Successful</span>
        </div>
        <div class="test-item">
            <span>Local Dev Server</span>
            <span class="status-good">‚úÖ Running (port 3001)</span>
        </div>
    </div>

    <script>
        let testLog = '';
        
        function addLog(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logDiv = document.getElementById('test-log');
            const resultDiv = document.getElementById('test-results');
            
            testLog += `[${timestamp}] ${message}\n`;
            logDiv.innerHTML = testLog.replace(/\n/g, '<br>');
            resultDiv.style.display = 'block';
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        function testProductionSite() {
            addLog('üöÄ Opening production site for testing...');
            window.open('https://massagewebsiteindastreet.vercel.app', '_blank');
            
            setTimeout(() => {
                const status = prompt('What do you see on the production site?\n\n1. Loads properly with styling\n2. Loads but broken/unstyled\n3. Shows error message\n4. Blank page\n5. CORS errors in console\n\nEnter 1, 2, 3, 4, or 5:');
                
                switch(status) {
                    case '1':
                        addLog('‚úÖ SUCCESS: Site loads properly! Issue may be resolved.');
                        break;
                    case '2':
                        addLog('‚ùå CSS Issue: Site loads but styling broken. Need to investigate CSS loading.');
                        break;
                    case '3':
                        addLog('‚ùå Error Message: Please describe the specific error you see.');
                        break;
                    case '4':
                        addLog('‚ùå Blank Page: Likely JavaScript/React mounting issue.');
                        break;
                    case '5':
                        addLog('‚ùå CORS Errors: API calls failing. Platform config may need more time to propagate.');
                        break;
                    default:
                        addLog('‚ÑπÔ∏è Please describe the specific error you\'re seeing on Vercel.');
                }
            }, 3000);
        }
        
        function checkConsoleErrors() {
            addLog('üîç Instructions for checking console errors:');
            addLog('1. Open your production site');
            addLog('2. Press F12 (Developer Tools)');
            addLog('3. Click "Console" tab');
            addLog('4. Look for red error messages');
            addLog('5. Report any errors you see');
            
            alert('Console Check Instructions:\n\n1. Open production site\n2. Press F12\n3. Check Console tab\n4. Look for red errors\n5. Report what you find');
        }
        
        function testCORS() {
            addLog('üåê Testing CORS connectivity...');
            
            fetch('https://syd.cloud.appwrite.io/v1/health')
                .then(response => response.json())
                .then(data => {
                    addLog('‚úÖ CORS Test: Appwrite health check successful');
                    addLog(`Response: ${JSON.stringify(data)}`);
                })
                .catch(error => {
                    addLog(`‚ùå CORS Test Failed: ${error.message}`);
                    if (error.message.includes('CORS')) {
                        addLog('CORS is still blocked. Platform config may need more time to propagate.');
                    }
                });
        }
        
        function testCSS() {
            addLog('üé® Testing CSS loading...');
            addLog('CSS files should be properly bundled in the build.');
            addLog('Check if Tailwind classes are working on the production site.');
        }
    </script>
</body>
</html>