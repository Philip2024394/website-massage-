<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Appwrite Data Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>üîç Appwrite Data Fetching Test</h1>
    
    <div id="status">Testing...</div>
    
    <h2>üìã Therapists Data</h2>
    <div id="therapists-result"></div>
    
    <h2>üè¢ Places Data</h2>
    <div id="places-result"></div>

    <script src="https://cdn.jsdelivr.net/npm/appwrite@15.0.0/dist/sdk.js"></script>
    <script>
        const { Client, Databases } = Appwrite;

        const client = new Client()
            .setEndpoint('https://syd.cloud.appwrite.io/v1')
            .setProject('68f23b11000d25eb3664');

        const databases = new Databases(client);
        const databaseId = '68f76ee1000e64ca8d05';

        async function testDataFetching() {
            const statusDiv = document.getElementById('status');
            const therapistsDiv = document.getElementById('therapists-result');
            const placesDiv = document.getElementById('places-result');

            try {
                statusDiv.innerHTML = '<span class="info">üîÑ Testing Appwrite connection...</span>';

                // Test therapists collection
                try {
                    console.log('üìã Fetching therapists from collection: therapists_collection_id');
                    const therapistsResponse = await databases.listDocuments(
                        databaseId,
                        'therapists_collection_id'
                    );
                    
                    therapistsDiv.innerHTML = `
                        <span class="success">‚úÖ Therapists loaded successfully!</span><br>
                        <strong>Count:</strong> ${therapistsResponse.documents.length}<br>
                        <pre>${JSON.stringify(therapistsResponse.documents.slice(0, 2), null, 2)}</pre>
                    `;
                } catch (error) {
                    therapistsDiv.innerHTML = `
                        <span class="error">‚ùå Therapists failed:</span><br>
                        <pre>${error.message}</pre>
                    `;
                }

                // Test places collection
                try {
                    console.log('üè¢ Fetching places from collection: places_collection_id');
                    const placesResponse = await databases.listDocuments(
                        databaseId,
                        'places_collection_id'
                    );
                    
                    placesDiv.innerHTML = `
                        <span class="success">‚úÖ Places loaded successfully!</span><br>
                        <strong>Count:</strong> ${placesResponse.documents.length}<br>
                        <pre>${JSON.stringify(placesResponse.documents.slice(0, 2), null, 2)}</pre>
                    `;
                } catch (error) {
                    placesDiv.innerHTML = `
                        <span class="error">‚ùå Places failed:</span><br>
                        <pre>${error.message}</pre>
                    `;
                }

                statusDiv.innerHTML = '<span class="success">‚úÖ Test completed!</span>';

            } catch (error) {
                statusDiv.innerHTML = `<span class="error">‚ùå Connection failed: ${error.message}</span>`;
                console.error('Appwrite test error:', error);
            }
        }

        // Run test on page load
        testDataFetching();
    </script>
</body>
</html>