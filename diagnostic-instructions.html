<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Therapist Data Flow Diagnostic</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 1200px; margin: 0 auto; }
        h1 { color: #333; }
        .stage { background: #f5f5f5; padding: 15px; margin: 10px 0; border-left: 4px solid #007bff; }
        .success { border-color: #28a745; }
        .error { border-color: #dc3545; }
        .warning { border-color: #ffc107; }
        pre { background: #fff; padding: 10px; border: 1px solid #ddd; overflow-x: auto; }
        .instructions { background: #e7f3ff; padding: 15px; border-left: 4px solid #2196f3; margin-bottom: 20px; }
    </style>
</head>
<body>
    <h1>üîç Therapist Data Flow Diagnostic</h1>
    
    <div class="instructions">
        <h3>üìã Instructions:</h3>
        <p>1. Open your main app at <a href="http://127.0.0.1:3000/" target="_blank">http://127.0.0.1:3000/</a></p>
        <p>2. Open the browser console (F12 or Right-click ‚Üí Inspect ‚Üí Console)</p>
        <p>3. Look for log messages starting with [STAGE 1] through [STAGE 6]</p>
        <p>4. Copy all console output below and send it to me</p>
    </div>
    
    <h2>What to Look For in Console:</h2>
    
    <div class="stage">
        <h3>[STAGE 1 - APPWRITE] - Data Fetch from Appwrite</h3>
        <p>Should show: "Raw fetch result: X documents"</p>
        <p><strong>Expected:</strong> 57-60 therapists</p>
        <p><strong>If 0 or missing:</strong> Collection ID is wrong or empty</p>
    </div>
    
    <div class="stage">
        <h3>[STAGE 2 - HOOK] - useDataFetching Hook</h3>
        <p>Should show: "Therapists after robustQuery: X"</p>
        <p><strong>Expected:</strong> Same as Stage 1 (57-60)</p>
        <p><strong>If less:</strong> robustCollectionQuery is filtering data</p>
    </div>
    
    <div class="stage">
        <h3>[STAGE 3 - useAllHooks] - Setting App State</h3>
        <p>Should show: "Therapists set in state: X"</p>
        <p><strong>Expected:</strong> Same as Stage 2 (57-60)</p>
        <p><strong>If less:</strong> State setter is not working</p>
    </div>
    
    <div class="stage">
        <h3>[STAGE 4 - HomePage] - HomePage Props</h3>
        <p>Should show: "Therapists prop received: X"</p>
        <p><strong>Expected:</strong> Same as Stage 3 (57-60)</p>
        <p><strong>If less:</strong> Props not passed correctly from App.tsx</p>
    </div>
    
    <div class="stage">
        <h3>[STAGE 5 - HomePage Filters] - Location & Live Filters</h3>
        <p>Should show: "Final filtered therapists: X"</p>
        <p><strong>Expected:</strong> At least some therapists (not 0)</p>
        <p><strong>If 0:</strong> Filters are too restrictive (check isLive, location, etc.)</p>
    </div>
    
    <div class="stage">
        <h3>[STAGE 6 - Render] - Card Rendering</h3>
        <p>Should show: "Rendering TherapistHomeCard for: [name]"</p>
        <p><strong>Expected:</strong> Multiple therapist names</p>
        <p><strong>If none:</strong> Cards are not rendering despite data being available</p>
    </div>
    
    <h2>Common Issues:</h2>
    <ul>
        <li><strong>Stage 1 shows 0:</strong> Wrong collection ID - check .env file</li>
        <li><strong>Stage 4 shows 0:</strong> Props not passed - check App.tsx and AppRouter</li>
        <li><strong>Stage 5 shows 0:</strong> All therapists filtered out - check isLive flags in Appwrite</li>
        <li><strong>Stage 6 missing:</strong> activeTab not set to 'home' - check tab state</li>
    </ul>
    
    <h2>Quick Checks:</h2>
    <pre>
1. Collection ID in .env:
   VITE_THERAPISTS_COLLECTION_ID=673d17fb0028fddd90e8
   
2. Check activeTab in console:
   Look for: "activeTab: 'home'" or similar
   
3. Check if route guard blocking:
   Look for: "Blocked render outside home route"
   
4. Check isLive flags in Appwrite:
   All therapists should have isLive=true or status="available"
    </pre>
</body>
</html>
