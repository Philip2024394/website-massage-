const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/route-therapist.DVVqC6AH.js","assets/vendor-appwrite.BT2H32tF.js","assets/vendor-react.DJgHGAhw.js","assets/route-booking.yuk30L8G.js","assets/vendor-misc.BCNplu90.js","assets/route-portals.BJGRQhN_.js","assets/route-therapist.ChBoUtyP.css","assets/dataService.Cikv1nws.js","assets/vendor-ui.D6Y-8hbd.js","assets/route-payment.T2FKxZVj.js","assets/silentLocationCapture.CQB_8zQb.js","assets/ContactUsPage.DV4utDjL.js","assets/contactFormService.2Zcd5K5l.js","assets/CompanyProfilePage.dVncL88N.js","assets/HowItWorksPage.BOyEnl8V.js","assets/FloatingPageFooter.BEXmstKk.js","assets/FAQPage._UJ5_xMD.js","assets/MassageTypesPage.BJRJg84E.js","assets/FacialTypesPage.CsNpGecn.js","assets/rootConstants.DIeQ-JNW.js","assets/CustomerProvidersPage.Bif_eKCU.js","assets/FacialProvidersPage.CHxTg8m7.js","assets/FacialPlaceCard.DjrSskkp.js","assets/cardConstants.BKSexKMn.js","assets/TodaysDiscountsPage.DHbuQOD4.js","assets/WomenReviewsPage.DUff6_LR.js","assets/AdvancedSearchPage.CX-G-I_L.js","assets/HelpFaqPage.DsOtl_c1.js","assets/TopTherapistsPage.SPxrOncs.js","assets/SpecialOffersPage.Dz3HX4O3.js","assets/VideoCenterPage.DaCPdUtU.js","assets/HotelsVillasPage.s0U2Nr-F.js","assets/HotelVillaSafePassPage.DSzXUDVP.js","assets/PackageOnboarding.BK7VRGyn.js","assets/MassagePlaceProfilePage.DhV9LK04.js","assets/MassagePlaceCard.MsOXjXY2.js","assets/FacialPlaceToClinicProfileAdapter.DnD8kIg3.js","assets/PlaceDetailPage.dPbr8XOc.js","assets/SharedPlaceProfile.CAEnyrjr.js","assets/useSharedProfile.Cbuv3HUv.js","assets/SharedFacialProfile.PI484jqc.js","assets/PrivacyPolicyPage.LeqxEl_5.js","assets/CookiesPolicyPage.BFrdo30N.js","assets/PlaceTermsPage.DVl0CCuu.js","assets/NotificationBell.CyVqwYx2.js","assets/PackageTermsPage.DLJo6Apr.js","assets/route-jobs._xfuCszQ.js","assets/route-jobs.Cr6QhOWT.css","assets/MobileTermsAndConditionsPage.BtTA1cvN.js","assets/BlogIndexPage.DZgVeY54.js","assets/MassageBaliPage.CgOazCA0.js","assets/BalineseMassagePage.CAU9X0L6.js","assets/DeepTissueMassagePage.CVxeMAIC.js","assets/PressMediaPage.B13v7cvw.js","assets/pwaInstallationStatus.6Ba8jDFX.js","assets/AdminDashboardPage.DY4gCNX6.js","assets/appwriteClient.DhdE2o8g.js","assets/route-admin.B3FykHSQ.js","assets/AdminSafePassManagement.w35TmZZf.js","assets/AdminSafePassManagementAll.CsGJiXO2.js","assets/App.CX7dple4.js","assets/ImageUpload.DqEc8poE.js","assets/PlaceSafePassWrapper.6G1F8yH2.js","assets/main.DHABHNLT.js","assets/main.ByQHldSB.css","assets/CreateAccountPage.BHwtkvB3.js","assets/ConfirmTherapistsPage.BN_51BUl.js","assets/IndastreetPartnersPage.CURrGxlc.js","assets/IndastreetNewsPage.r2sbe-j4.js","assets/WebsiteManagementPage.Bs1ZJ2dg.js","assets/GuestProfilePage.D2flX5hd.js","assets/QRCodePage.BG8LmvgP.js","assets/NotificationsPage.Bz-GNX2d.js","assets/LeadAcceptPage.B7tjraNP.js","assets/LeadDeclinePage.C6Msy2lp.js","assets/ApplyForJobPage.COulnbYM.js","assets/PartnershipApplicationPage.w3QFSpMV.js","assets/PartnerContactPage.CCvziKeT.js","assets/ReviewsPage.CcvVb7_o.js","assets/JobUnlockPaymentPage.vqpERglx.js","assets/AppwriteDiagnostic.C-Lj8BOP.js","assets/DiagnosticPage.DUqZhWxz.js","assets/CustomerReviewsPage.lBY3T6yz.js","assets/RoleSelectionPage.JSyjk5BG.js","assets/CustomerSupportPage.OHkOu_Nv.js","assets/PlaceDiscountBadgePage.DGCi52xw.js","assets/VerifiedProBadgePage.Bzjb17Rz.js","assets/MobileTherapistStandardsPage.CRkrd3EX.js","assets/GuestAlertsPage.c8XVnnKA.js","assets/PartnerSettingsPage.FMgODVdw.js","assets/CareerOpportunitiesPage.CHQp8xn-.js","assets/BaliSpaIndustryTrends2025Page.pG6IK71U.js","assets/seoSchema.CHbssig1.js","assets/BlogArticleLayout.CMpm3vnG.js","assets/Top10MassageTechniquesPage.BSQsCN0S.js","assets/MassageCareerIndonesiaPage.DWwuGLVp.js","assets/BenefitsRegularMassageTherapyPage.CP7c0N_o.js","assets/HiringMassageTherapistsGuidePage.CGhpJ2Cj.js","assets/TraditionalBalineseMassagePage.uSqQEOsp.js","assets/SpaTourismIndonesiaPage.BpPC7-jD.js","assets/AromatherapyMassageOilsPage.8KHuG_cd.js","assets/PricingGuideMassageTherapistsPage.C4GZODqR.js","assets/DeepTissueVsSwedishMassagePage.DqSqxHfT.js","assets/OnlinePresenceMassageTherapistPage.BEdSpHjG.js","assets/WellnessTourismUbudPage.BVlkRotV.js","assets/WellnessSoutheastAsiaPage.C9HfVX4s.js","assets/MassageSpaStandardsAsiaEuropePage.CKbAgNU9.js","assets/SkinClinicTrendsInternationalPage.DmpAQGtY.js","assets/BuildingWellnessBusinessInternationalPage.D7YMtVrc.js","assets/loyaltyService.CRrgZYbG.js","assets/bookingExpirationService.CM8Yhd05.js","assets/enterpriseInitService.BM-4udNH.js"])))=>i.map(i=>d[i]);
var Nl=Object.defineProperty;var kl=(t,a,s)=>a in t?Nl(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;var Se=(t,a,s)=>kl(t,typeof a!="symbol"?a+"":a,s);import{l as u,u as So,aw as Sl,ax as Pl,_ as z,ay as Il,ag as Cs,q as pi,az as xi,aA as Cl,aB as Po,aC as Tl,Q as fi,O as bi,af as ts,aD as Io,aE as yi,k as As,W as wi,aF as Ks,aG as Al,aH as El,aI as Co,ac as Os,aJ as nn,al as fn,I as ln,aK as Rr,aL as Dl,aM as _l,aq as To,ar as Ll,aN as Rl,d as je,A as Pe,aO as Ml,a9 as Xn,G as Bl,U as vi,e as bn,f as Mr,aP as $l,H as Br,aQ as Zn,y as Ol,aR as ei,a0 as Ul,F as Es,aS as Fl,aT as Hl,Z as Vl,r as Wl,au as xs,h as Ye,p as Xt,aU as ji,aV as $r,c as $t,o as Je,C as it,ae as zl,B as Gl,aW as Kl,aa as Ao,s as se,aX as Jl,aY as ql,aZ as Yl,M as Ql,i as ti,a_ as Xl,a$ as Eo,b0 as Do,b1 as ut,b2 as At,ao as Ke,b3 as Zl,b4 as ai,b5 as ec,b6 as Js,b7 as _o,b8 as Or,b9 as tc,ba as ac,n as sc,at as qs,bb as nc,bc as ic,g as he,t as Cn,bd as rc,be as Lo,bf as oc,bg as lc,bh as Tn,bi as cc,bj as dc,bk as mc,as as Fa,bl as fs,bm as bs,ai as Ur,ad as uc,bn as ja,bo as gc,av as hc,bp as pc,bq as xc}from"./route-therapist.DVVqC6AH.js";import{a as o,j as e,R as ce,M as Pa,X as wt,ay as Ro,l as yn,ak as Ds,h as si,d as ss,aI as fc,aJ as bc,aK as yc,z as Mo,k as Ts,O as _s,m as Ct,Q as za,H as ls,V as cn,W as ma,v as $e,p as jt,U as ni,ai as Fr,S as zt,aw as Bo,I as Ni,aL as wc,aM as vc,n as ze,C as dn,T as ns,N as Ca,a5 as da,q as dt,b as Ia,ad as ki,L as ea,x as Si,ae as Ot,aa as $o,a9 as Mt,B as Ls,s as Rs,u as Hr,aN as ii,a8 as wn,w as Gt,y as Zt,aO as Vr,aP as mn,E as Oo,aQ as un,G as jc,t as kt,a2 as xa,aR as Nc,av as kc,Z as Uo,e as rn,az as Sc,aA as Bt,aG as Pc,aS as Ic,a1 as Wr,aT as Fo,aU as Cc,J as Tc,aV as Ac,D as is,aW as zr,an as Gr,a4 as gn,au as Ec,A as Dc,aX as _c,ac as Ra,ab as Lc,K as Rc}from"./vendor-react.DJgHGAhw.js";import{D as Ns,E as Mc,F as Ma,H as ha,I as Bc}from"./vendor-misc.BCNplu90.js";import{A as $c,m as na}from"./vendor-ui.D6Y-8hbd.js";import{Query as ae,ID as yt,Client as Oc,Databases as Uc,Storage as Fc}from"./vendor-appwrite.BT2H32tF.js";import{P as cs,R as vn,c as hn,a as Pi}from"./route-portals.BJGRQhN_.js";import{B as Hc,b as Ms,T as Vc,s as Ha,a as Ho}from"./route-booking.yuk30L8G.js";import{d as Vo,T as Rt,g as Wc,a as ds,H as Nt,o as zc,E as Gc,s as Za,b as ys,e as Ba,c as Kc,n as Jc,f as qc,p as An,h as Yc,i as Qc,j as Xc,m as Zc,k as ed,l as td}from"./route-payment.T2FKxZVj.js";const ad=({children:t,onRefresh:a,disabled:s=!1,threshold:n=80,className:i="",eliteMode:r=!0,errorBoundary:l=!0,loadingText:d="ðŸ”„ Refreshing...",releaseText:g="â†‘ Release to refresh",pullText:m="â†“ Pull to refresh"})=>{const[x,v]=o.useState(0),[j,I]=o.useState(!1),[p,R]=o.useState(!1),[w,P]=o.useState(!1),[D,L]=o.useState(null),O=o.useRef(null),H=o.useRef(0),S=o.useRef(!0),N=o.useRef(0),k=o.useRef(null),b=o.useCallback(async E=>{if(!l)return await E();try{P(!1),await E()}catch(W){u.error("PullToRefresh: Error occurred:",W),P(!0),r&&setTimeout(()=>P(!1),2e3)}},[l,r]),y=o.useCallback(()=>{if(O.current){const E=O.current.scrollTop,W=window.scrollY||window.pageYOffset,X=document.documentElement.scrollTop;S.current=E<=1&&W<=1&&X<=1}},[]),T=o.useCallback(E=>{if(r&&"ontouchstart"in window){const W=document.body,X=document.documentElement;E?(W.style.touchAction="none",W.classList.add("elite-pulling"),X.classList.add("elite-refresh-mode")):(W.style.overflow="",W.style.touchAction="",W.classList.remove("elite-pulling"),X.classList.remove("elite-refresh-mode"))}},[r]);o.useEffect(()=>{if(r)return document.documentElement.classList.add("elite-refresh-mode"),document.body.classList.add("elite-refresh-mode"),()=>{document.documentElement.classList.remove("elite-refresh-mode"),document.body.classList.remove("elite-refresh-mode")}},[r]);const F=o.useCallback(E=>{if(!(s||p||w)&&E.touches.length===1&&(y(),S.current)){const W=E.touches[0],X=Date.now();L(W.identifier),N.current=X,H.current=W.clientY,I(!0),r&&T(!0)}},[s,p,w,r,y,T]),U=o.useCallback(E=>{if(s||p||!j||w)return;const W=Array.from(E.touches).find(q=>q.identifier===D);if(!W)return;const _=W.clientY-H.current,$=Date.now();if(r){if($-N.current<16)return;if(N.current=$,_>0&&(y(),!S.current)){B();return}}if(_>0&&S.current){E.preventDefault(),E.stopPropagation();const q=r?.35:.5,J=n*(r?2.5:1.5),Z=r?_*q*(1-Math.pow(_/(J*2),.5)):_*q,me=Math.max(0,Math.min(Z,J));k.current&&cancelAnimationFrame(k.current),k.current=requestAnimationFrame(()=>{v(me)})}},[s,p,j,w,r,n,D,y]),B=o.useCallback(async()=>{if(s||p||!j)return;I(!1),L(null),r&&T(!1),k.current&&(cancelAnimationFrame(k.current),k.current=null),x>=n&&(r&&"vibrate"in navigator&&navigator.vibrate([10]),R(!0),await b(async()=>{await a()}),R(!1)),v(0)},[s,p,j,x,n,a,b,r,T]);o.useEffect(()=>{const E=O.current;if(!E)return;const W=$=>{const q=$;q.persist=()=>{},F(q)},X=$=>{const q=$;q.persist=()=>{},U(q)},_=$=>{const q=$;q.persist=()=>{},B(q)};return E.addEventListener("touchstart",W,{passive:!1}),E.addEventListener("touchmove",X,{passive:!1}),E.addEventListener("touchend",_,{passive:!1}),()=>{E.removeEventListener("touchstart",W),E.removeEventListener("touchmove",X),E.removeEventListener("touchend",_)}},[F,U,B]),o.useEffect(()=>()=>{k.current&&cancelAnimationFrame(k.current),r&&T(!1)},[r,T]);const f=()=>w?"âš ï¸ Refresh failed":p?d:x>=n?g:x>0?m:"",A=Math.min(x/n,1),c=Math.min(.7+x/n*.3,1),h=p?0:x/n*180,C=()=>w?"border-red-500 bg-red-50 text-red-600":p?"border-blue-500 bg-blue-50 text-blue-600":x>=n?"border-green-500 bg-green-50 text-green-600":"border-gray-300 bg-gray-50 text-gray-600",M=r?"translateY(".concat(Math.min(x*.8,n*.8),"px)"):"translateY(".concat(Math.min(x,n),"px)");return e.jsxs("div",{ref:O,className:"relative overflow-hidden ".concat(i),style:{transform:M,transition:j?"none":"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",WebkitOverflowScrolling:"touch",overscrollBehavior:r?"none":"auto"},children:[(x>0||p)&&e.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-center z-50 ".concat(r?"py-6":"py-4"),style:{opacity:A,transform:"scale(".concat(c,") translateY(-").concat(n-x,"px)"),transition:j?"none":"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",background:r?"linear-gradient(180deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.8) 50%, rgba(255,255,255,0) 100%)":"linear-gradient(180deg, rgba(59, 130, 246, 0.1) 0%, transparent 100%)"},children:e.jsxs("div",{className:"flex items-center gap-3 px-6 py-3 rounded-full shadow-lg border backdrop-blur-sm ".concat(C()),children:[e.jsx("div",{className:"w-5 h-5 border-2 rounded-full transition-all duration-300 ".concat(p?"border-t-transparent animate-spin":w?"border-red-500":x>=n?"border-green-500":"border-gray-400"),style:{transform:p?"none":"rotate(".concat(h,"deg)")}}),e.jsx("span",{className:"text-sm font-medium transition-colors ".concat(r?"font-semibold":""),children:f()}),r&&x>n*.5&&!p&&e.jsx("div",{className:"w-1 h-1 bg-current rounded-full animate-pulse"})]})}),e.jsx("div",{style:{paddingTop:j||p?"".concat(Math.max(x*(r?.6:1),0),"px"):"0px",transition:j?"none":"padding-top 0.3s cubic-bezier(0.4, 0, 0.2, 1)",minHeight:"100vh"},children:t}),r&&(j||p)&&e.jsx("div",{className:"absolute inset-0 pointer-events-none z-10",style:{background:"radial-gradient(circle at center top, rgba(59, 130, 246, ".concat(A*.1,") 0%, transparent 50%)"),opacity:A*.5}})]})},sd=({isFullScreen:t,children:a,onRefresh:s,enablePullToRefresh:n=!0})=>{const i=async()=>{s?await s():window.location.reload()},r=e.jsx("div",{className:t?"w-full min-h-screen mobile-optimized":"max-w-md mx-auto min-h-screen bg-white shadow-lg mobile-optimized container-mobile",children:e.jsx("div",{className:"content-landscape",children:a})});return n&&"ontouchstart"in window?e.jsx(ad,{onRefresh:i,eliteMode:!0,errorBoundary:!0,threshold:90,className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))]",loadingText:"ðŸ”„ Refreshing...",releaseText:"â†‘ Release to refresh",pullText:"â†“ Pull to refresh",children:r}):r},nd=({currentPage:t,onNavigate:a,userRole:s,unreadNotifications:n=0,hasNewBookings:i=!1})=>{const r=m=>{const x=["home","landing"],v=["search","therapists","places","massageTypes"],j=["notifications"],I=["membership"],p=["profile","therapistPortal","agentDashboard"];switch(m){case"home":return x.includes(t);case"search":return v.includes(t);case"notifications":return j.includes(t);case"membership":return I.includes(t);case"profile":return p.includes(t);default:return!1}},l=(m,x,v)=>e.jsx("img",{src:x,alt:v,loading:"lazy",className:"w-7 h-7 object-contain transition-opacity ".concat(r(m)?"opacity-100":"opacity-60")}),d=()=>({key:"notifications",icon:l("notifications","https://ik.imagekit.io/7grri5v7d/home%20buttons.png","Notifications"),label:"Notifications",onClick:()=>a("notifications"),badgeCount:n});let g=[{key:"home",icon:l("home","https://ik.imagekit.io/7grri5v7d/home%20button.png","Home"),label:"Home",onClick:()=>a("home"),badgeCount:0},d(),{key:"profile",icon:l("profile","https://ik.imagekit.io/7grri5v7d/home%20buttonsss.png?updatedAt=1763217899529","Profile"),label:"Profile",onClick:()=>{switch(s){case"therapist":case"place":a("therapistPortal");break;case"hotel":a("agentDashboard");break;case"agent":a("agentDashboard");break;default:a("profile");break}},badgeCount:n}];return e.jsxs("footer",{className:"fixed left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-[9999]",style:{bottom:"calc(env(safe-area-inset-bottom, 0px) + 12px)",paddingBottom:"calc(env(safe-area-inset-bottom, 0px) + 8px)"},children:[e.jsx("div",{className:"flex justify-around items-center h-20 max-w-md mx-auto px-2",children:g.map(m=>e.jsxs("button",{onClick:m.onClick,className:"flex flex-col items-center justify-center flex-1 h-full relative transition-all duration-200 hover:bg-gray-50 rounded-lg group",children:[e.jsxs("div",{className:"relative",children:[m.icon,m.badgeCount>0&&e.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center border-2 border-white",children:m.badgeCount>9?"9+":m.badgeCount})]}),e.jsx("span",{className:"text-xs mt-1 font-medium transition-colors ".concat(r(m.key)?"text-orange-600":"text-gray-500 group-hover:text-gray-700"),children:m.label})]},m.key))}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-orange-500 to-orange-600 opacity-20"})]})},id=()=>{const t=()=>{window.open("https://www.indastreet.id","_blank","noopener,noreferrer")};return e.jsxs("div",{className:"fixed bottom-20 right-4 z-50 flex flex-col items-center",children:[e.jsxs("button",{onClick:t,className:"\n                    relative bg-black/20 backdrop-blur-md border border-white/10\n                    text-white rounded-2xl shadow-2xl\n                    transition-all duration-500 transform \n                    hover:scale-110 hover:bg-black/40 hover:border-white/20\n                    active:scale-95 active:bg-black/60\n                    w-14 h-14 flex items-center justify-center\n                    group overflow-hidden\n                    before:absolute before:inset-0 before:bg-gradient-to-br \n                    before:from-white/5 before:to-transparent before:rounded-2xl\n                    after:absolute after:inset-0 after:bg-gradient-to-t \n                    after:from-black/20 after:to-transparent after:rounded-2xl\n                ",style:{backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",boxShadow:"\n                        0 8px 32px rgba(0, 0, 0, 0.3),\n                        inset 0 1px 0 rgba(255, 255, 255, 0.1),\n                        inset 0 -1px 0 rgba(0, 0, 0, 0.1)\n                    "},"aria-label":"Visit IndaStreet Website",children:[e.jsx("svg",{className:"w-7 h-7 text-white relative z-10 drop-shadow-lg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 via-transparent to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("span",{className:"text-xs font-semibold text-white mt-2 bg-black/40 backdrop-blur-md px-3 py-1 rounded-full shadow-lg border border-white/10",style:{backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:"IndaStreet"})]})},rd=({language:t,hasLocation:a,onNavigateToCookiesPolicy:s})=>{const[n,i]=o.useState(!1);o.useEffect(()=>{if(!localStorage.getItem("cookie-consent")&&a){const v=setTimeout(()=>i(!0),3e5);return()=>clearTimeout(v)}},[a]);const r=()=>{localStorage.setItem("cookie-consent","accepted"),localStorage.setItem("cookie-consent-date",new Date().toISOString()),i(!1);const x=new Audio("/sounds/booking-notification.mp3");x.volume=.2,x.play().catch(()=>{})},l=()=>{localStorage.setItem("cookie-consent","declined"),localStorage.setItem("cookie-consent-date",new Date().toISOString()),i(!1)};if(!n)return null;const d={en:{title:"Cookie Policy",message:"We use cookies to enhance your experience, analyze site traffic, and provide social media features. By continuing, you consent to our use of cookies.",learnMore:"Learn more",accept:"Accept All",decline:"Decline"},id:{title:"Kebijakan Cookie",message:"Kami menggunakan cookie untuk meningkatkan pengalaman Anda, menganalisis lalu lintas situs, dan menyediakan fitur media sosial. Dengan melanjutkan, Anda menyetujui penggunaan cookie kami.",learnMore:"Pelajari lebih lanjut",accept:"Terima Semua",decline:"Tolak"}},m=d[t==="gb"?"en":t]||d.en;return e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-[9999] flex items-center justify-center p-4 animate-fadeIn",style:{animation:"fadeIn 0.3s ease-out"},children:[e.jsx("style",{children:"\n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n          }\n          to {\n            opacity: 1;\n          }\n        }\n        @keyframes slideUp {\n          from {\n            transform: translateY(20px);\n            opacity: 0;\n          }\n          to {\n            transform: translateY(0);\n            opacity: 1;\n          }\n        }\n      "}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-6 animate-slideUp",style:{animation:"slideUp 0.4s ease-out"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-4xl",children:"ðŸª"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:m.title})]}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed mb-1",children:m.message}),e.jsx("button",{onClick:()=>{i(!1),s&&s()},className:"text-sm text-orange-500 hover:text-orange-600 underline font-semibold inline-block mb-6",children:m.learnMore}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:l,className:"flex-1 px-4 py-2 rounded-lg border-2 border-gray-300 text-gray-700 hover:bg-gray-50 transition-all duration-300 font-semibold text-sm",children:m.decline}),e.jsx("button",{onClick:r,className:"flex-1 bg-orange-500 px-4 py-2 rounded-lg hover:bg-orange-600 text-white transition-all duration-300 font-semibold shadow-lg hover:shadow-xl text-sm",children:m.accept})]})]})]})},od=({isOpen:t,onClose:a,onRegister:s,language:n,context:i="booking"})=>{if(!t)return null;const r={en:{booking:{title:"Create Account",message:"Please register an account to use our booking services and enjoy exclusive benefits!"},chat:{title:"Create Account",message:"Please register an account to access our chat feature and communicate with therapists!"},registerButton:"Create Account",cancelButton:"Maybe Later"},id:{booking:{title:"Buat Akun Untuk Melanjutkan",message:"Silakan daftar akun untuk menggunakan layanan booking kami dan nikmati manfaat eksklusif!"},chat:{title:"Buat Akun Untuk Melanjutkan",message:"Silakan daftar akun untuk mengakses fitur chat dan berkomunikasi dengan terapis!"},registerButton:"Buat Akun",cancelButton:"Nanti Saja"}},d=r[n==="gb"?"en":n]||r.en,g=d[i];return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black bg-opacity-50 animate-fadeIn",children:[e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-slideUp max-h-[90vh] ",children:[e.jsx("div",{className:"p-6 pb-2",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:g.title}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"px-6 pb-6",children:[e.jsx("p",{className:"text-gray-700 text-lg mb-6 leading-relaxed",children:g.message}),e.jsxs("div",{className:"relative rounded-xl overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-20",style:{backgroundImage:"url(https://ik.imagekit.io/7grri5v7d/screen%20cover.png?updatedAt=1761711498523)",filter:"blur(2px)"}}),e.jsxs("div",{className:"relative flex gap-3 p-4 bg-gradient-to-br from-orange-50/90 to-yellow-50/90 backdrop-blur-sm",children:[e.jsx("button",{onClick:()=>{s(),a()},className:"flex-1 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-bold py-4 px-6 rounded-xl hover:from-orange-600 hover:to-orange-700 transform hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl",children:d.registerButton}),e.jsx("button",{onClick:a,className:"flex-1 bg-gray-200 text-gray-700 font-semibold py-4 px-6 rounded-xl hover:bg-gray-300 transition-colors duration-300",children:d.cancelButton})]})]})]}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-yellow-300 rounded-full opacity-10 -mr-16 -mt-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-orange-300 rounded-full opacity-10 -ml-12 -mb-12"})]}),e.jsx("style",{children:"\n                @keyframes fadeIn {\n                    from {\n                        opacity: 0;\n                    }\n                    to {\n                        opacity: 1;\n                    }\n                }\n\n                @keyframes slideUp {\n                    from {\n                        transform: translateY(20px);\n                        opacity: 0;\n                    }\n                    to {\n                        transform: translateY(0);\n                        opacity: 1;\n                    }\n                }\n\n                @keyframes slideIn {\n                    from {\n                        transform: translateX(-10px);\n                        opacity: 0;\n                    }\n                    to {\n                        transform: translateX(0);\n                        opacity: 1;\n                    }\n                }\n\n                .animate-fadeIn {\n                    animation: fadeIn 0.3s ease-out;\n                }\n\n                .animate-slideUp {\n                    animation: slideUp 0.4s ease-out;\n                }\n\n                .animate-slideIn {\n                    animation: slideIn 0.4s ease-out forwards;\n                    opacity: 0;\n                }\n            "})]})},ld=({event:t,onClose:a})=>{const[s,n]=o.useState([]);return o.useEffect(()=>{if(t){const i=Array.from({length:20},(l,d)=>({id:d,x:Math.random()*100,delay:Math.random()*.5}));n(i);const r=setTimeout(()=>{a()},5e3);return()=>clearTimeout(r)}},[t,a]),t?e.jsx($c,{children:e.jsxs(na.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",onClick:a,children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:s.map(i=>e.jsx(na.div,{initial:{y:-50,x:"".concat(i.x,"%"),opacity:1},animate:{y:"100vh",rotate:360*3,opacity:[1,1,.5,0]},transition:{duration:3,delay:i.delay,ease:"easeIn"},className:"absolute text-4xl",children:"ðŸª™"},i.id))}),e.jsxs(na.div,{initial:{scale:.5,y:50,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.5,opacity:0},transition:{type:"spring",duration:.5},className:"relative bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full mx-4",onClick:i=>i.stopPropagation(),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-200 via-orange-200 to-orange-300 rounded-3xl opacity-20 blur-xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(na.div,{initial:{scale:0},animate:{scale:[0,1.2,1]},transition:{delay:.2,duration:.5},className:"text-7xl mb-4",children:"ðŸŽŠ"}),e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-orange-500 to-orange-600 bg-clip-text text-transparent",children:"Booking Confirmed!"})]}),e.jsxs(na.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.4,type:"spring",stiffness:200},className:"bg-gradient-to-br from-yellow-400 via-orange-400 to-orange-500 rounded-2xl p-6 mb-6 text-center shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("span",{className:"text-5xl",children:"ðŸª™"}),e.jsxs(na.span,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},className:"text-5xl font-bold text-white",children:["+",t.coinsEarned]})]}),e.jsxs("p",{className:"text-white text-lg font-semibold",children:[t.providerCoinId," Earned!"]}),t.streakCount&&e.jsxs(na.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8},className:"mt-2 flex items-center justify-center gap-1 text-white",children:[e.jsx("span",{className:"text-xl",children:"ðŸ”¥"}),e.jsxs("span",{className:"font-semibold",children:[t.streakCount," Booking Streak!"]})]})]}),t.tierUnlocked&&t.discountUnlocked&&e.jsxs(na.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl p-4 mb-6 text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸŽ‰ New Tier Unlocked!"}),e.jsx("p",{className:"text-white text-xl font-bold",children:"Discount Available!"}),e.jsx("p",{className:"text-white text-sm mt-1",children:"Your next booking will be discounted"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"From"}),e.jsx("p",{className:"text-gray-900 font-semibold text-lg",children:t.providerName}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Total Coins"}),e.jsxs("p",{className:"text-orange-600 font-bold text-lg",children:[t.totalCoins," ðŸª™"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Total Visits"}),e.jsx("p",{className:"text-orange-600 font-bold text-lg",children:t.totalVisits})]})]})]}),!t.tierUnlocked&&t.totalVisits<20&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Next Reward"}),e.jsxs("span",{className:"text-gray-900 font-semibold",children:[t.totalVisits<3&&"".concat(3-t.totalVisits," more visit").concat(3-t.totalVisits!==1?"s":""),t.totalVisits>=3&&t.totalVisits<5&&"".concat(5-t.totalVisits," more visit").concat(5-t.totalVisits!==1?"s":""),t.totalVisits>=5&&t.totalVisits<10&&"".concat(10-t.totalVisits," more visits"),t.totalVisits>=10&&t.totalVisits<20&&"".concat(20-t.totalVisits," more visits")]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx(na.div,{initial:{width:0},animate:{width:"".concat(t.totalVisits<3?t.totalVisits/3*100:t.totalVisits<5?(t.totalVisits-3)/2*100:t.totalVisits<10?(t.totalVisits-5)/5*100:(t.totalVisits-10)/10*100,"%")},transition:{delay:1.2,duration:1},className:"h-full bg-gradient-to-r from-orange-400 to-orange-600 rounded-full"})})]}),e.jsx(na.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white font-semibold py-3 rounded-xl hover:shadow-lg transition-shadow",children:"Awesome! ðŸŽ‰"}),e.jsx("p",{className:"text-center text-gray-500 text-xs mt-3",children:"Auto-closing in 5 seconds..."})]})]})]})}):null},cd=({showFooter:t,showFloatingButton:a,page:s,language:n,userLocation:i,unreadNotifications:r,hasNewBookings:l,showRegisterPrompt:d,registerPromptContext:g,loyaltyEvent:m,getUserRole:x,handleRegisterPromptClose:v,handleRegisterPromptRegister:j,setPage:I,setLoyaltyEvent:p})=>e.jsxs(e.Fragment,{children:[t&&e.jsx(nd,{currentPage:s,onNavigate:R=>{I(R)},userRole:x(),unreadNotifications:r,hasNewBookings:l}),a&&e.jsx(id,{}),e.jsx(rd,{language:n,hasLocation:i!==null,onNavigateToCookiesPolicy:()=>I("cookies-policy")}),e.jsx(od,{isOpen:d,onClose:v,onRegister:j,language:n,context:g}),e.jsx(ld,{event:m,onClose:()=>p(null)})]}),dd=()=>{var t;return typeof window=="undefined"?!1:window.matchMedia("(display-mode: standalone)").matches||((t=window.navigator)==null?void 0:t.standalone)===!0},md=t=>{const[a,s]=o.useState(!1);return o.useEffect(()=>{const n=()=>{try{const r=document.querySelector(".content-landscape")||document.body,l=r==null?void 0:r.querySelector('header, [data-page-header="true"]');s(!!l)}catch{s(!1)}};n();const i=new MutationObserver(()=>n());return i.observe(document.body,{childList:!0,subtree:!0}),()=>i.disconnect()},t),a},ud=({page:t,title:a})=>{const s=o.useMemo(dd,[]),n=md([t]);return So(),u.debug("ðŸ” GlobalHeader render check:",{page:t,isStandalone:s,hasPageHeader:n,shouldRender:s&&!n}),null};let En=null;const Dn=async()=>(En||(En=(await z(()=>import("./route-therapist.DVVqC6AH.js").then(a=>a.bs),__vite__mapDeps([0,1,2,3,4,5,6]))).translations),En),ri="indostreet_translations",gd=1e3*60*60,hd=()=>{try{const t=localStorage.getItem(ri);if(!t)return null;const{data:a,timestamp:s}=JSON.parse(t);return Date.now()-s>gd?(localStorage.removeItem(ri),null):a}catch{return null}},Kr=t=>{try{localStorage.setItem(ri,JSON.stringify({data:t,timestamp:Date.now()}))}catch{}};function Us(t){const a=o.useContext(Sl),s=()=>{try{const R=window.localStorage.getItem("app_language");return R==="id"||R==="en"||R==="gb"?R:"id"}catch{return"id"}},n=t||a.language||s(),i=n==="gb"?"en":n,[r,l]=o.useState({en:{},id:{}}),[d,g]=o.useState(!0);o.useEffect(()=>{Dn().then(R=>{l(R),g(!1)}).catch(R=>{g(!1)})},[]);const m=o.useCallback(async()=>{try{const R=await Dn(),w=hd();if(w&&w[i]){l(w),g(!1);return}const P=await Pl.getAll();P&&P[i]&&Object.keys(P[i]).length>0?(l(P),Kr(P)):(l(R),Kr(R))}catch{const w=await Dn();l(w)}finally{g(!1)}},[i]),x=o.useRef({}),v=3e3;o.useEffect(()=>{const R=Date.now(),w=x.current[i]||0;R-w<v||(x.current[i]=R,m())},[i,m,n]);const j=R=>R&&Object.keys(R).length>0;let I=r[i];j(I)||(I=r.en||{}),(!I||typeof I!="object")&&(I={});const p=(R,w)=>{if(!R)return w;const P=w.split(".");let D=R;for(const L of P)if(D&&typeof D=="object"&&L in D)D=D[L];else return w;return typeof D=="string"?D:w};return{t:R=>p(I,R),dict:I,loading:d,refresh:m,hasLanguage:!!(r[i]&&Object.keys(r[i]).length>0)}}const Wo=o.createContext(void 0),Fs=()=>{const t=o.useContext(Wo);if(!t)throw new Error("useLoading must be used within LoadingProvider");return t},pd=({children:t})=>{const[a,s]=o.useState({global:!1,auth:!1,page:!1,data:!1,components:{},operations:{}}),[n,i]=o.useState({current:0,total:100,stage:"initializing"}),r=o.useCallback((D,L)=>{s(O=>({...O,global:D})),D&&L&&i(O=>({...O,message:L,stage:"initializing"}))},[]),l=o.useCallback(D=>{s(L=>({...L,auth:D})),D&&i(L=>({...L,stage:"authenticating"}))},[]),d=o.useCallback(D=>{s(L=>({...L,page:D})),D&&i(L=>({...L,stage:"loading"}))},[]),g=o.useCallback(D=>{s(L=>({...L,data:D}))},[]),m=o.useCallback((D,L)=>{s(O=>({...O,components:{...O.components,[D]:L}}))},[]),x=o.useCallback(D=>a.components[D]||!1,[a.components]),v=o.useCallback((D,L)=>{s(O=>({...O,operations:{...O.operations,[D]:L}}))},[]),j=o.useCallback(D=>a.operations[D]||!1,[a.operations]),I=o.useCallback(D=>{i(L=>({...L,...D}))},[]),p=o.useCallback(()=>a.global||a.auth||a.page||a.data||Object.values(a.components).some(Boolean)||Object.values(a.operations).some(Boolean),[a]),R=o.useCallback(()=>a.global||a.auth,[a.global,a.auth]),w=o.useCallback(()=>!a.global&&!a.auth,[a.global,a.auth]),P={loading:a,progress:n,setGlobalLoading:r,setAuthLoading:l,setPageLoading:d,setDataLoading:g,setComponentLoading:m,getComponentLoading:x,setOperationLoading:v,getOperationLoading:j,setProgress:I,isAnyLoading:p,isCriticalLoading:R,canShowContent:w};return e.jsx(Wo.Provider,{value:P,children:t})},xd=t=>{const{setComponentLoading:a,getComponentLoading:s}=Fs(),n=s(t),i=o.useCallback(r=>{a(t,r)},[t,a]);return{isLoading:n,setLoading:i}},Qt=({variant:t="text",count:a=1,className:s="",animate:n=!0})=>{const i="bg-gray-200 ".concat(n?"animate-pulse":""),r=()=>{switch(t){case"text":return e.jsx("div",{className:"".concat(i," h-4 w-full rounded ").concat(s)});case"avatar":return e.jsx("div",{className:"".concat(i," h-12 w-12 rounded-full ").concat(s)});case"button":return e.jsx("div",{className:"".concat(i," h-10 w-24 rounded-md ").concat(s)});case"card":return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 ".concat(s),children:[e.jsx("div",{className:"".concat(i," h-6 w-3/4 rounded mb-2")}),e.jsx("div",{className:"".concat(i," h-4 w-full rounded mb-1")}),e.jsx("div",{className:"".concat(i," h-4 w-2/3 rounded")})]});case"list":return e.jsx("div",{className:"space-y-3 ".concat(s),children:Array.from({length:a}).map((l,d)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"".concat(i," h-8 w-8 rounded-full")}),e.jsxs("div",{className:"space-y-1 flex-1",children:[e.jsx("div",{className:"".concat(i," h-4 w-3/4 rounded")}),e.jsx("div",{className:"".concat(i," h-3 w-1/2 rounded")})]})]},d))});case"therapist-profile":return e.jsxs("div",{className:"".concat(s),children:[e.jsxs("div",{className:"flex items-start space-x-4 mb-6",children:[e.jsx("div",{className:"".concat(i," h-20 w-20 rounded-full")}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"".concat(i," h-6 w-2/3 rounded")}),e.jsx("div",{className:"".concat(i," h-4 w-1/2 rounded")}),e.jsx("div",{className:"".concat(i," h-4 w-3/4 rounded")})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"".concat(i," h-5 w-32 rounded")}),Array.from({length:3}).map((l,d)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"".concat(i," h-5 w-3/4 rounded mb-2")}),e.jsx("div",{className:"".concat(i," h-4 w-full rounded mb-1")}),e.jsx("div",{className:"".concat(i," h-4 w-1/3 rounded")})]},d))]})]});case"chat-message":return e.jsxs("div",{className:"flex space-x-3 ".concat(s),children:[e.jsx("div",{className:"".concat(i," h-8 w-8 rounded-full flex-shrink-0")}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("div",{className:"".concat(i," h-4 w-1/4 rounded")}),e.jsx("div",{className:"".concat(i," h-16 w-full rounded-lg")})]})]});case"booking-card":return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 ".concat(s),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"".concat(i," h-6 w-32 rounded")}),e.jsx("div",{className:"".concat(i," h-6 w-20 rounded-full")})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"".concat(i," h-4 w-24 rounded")}),e.jsx("div",{className:"".concat(i," h-4 w-32 rounded")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"".concat(i," h-4 w-20 rounded")}),e.jsx("div",{className:"".concat(i," h-4 w-24 rounded")})]}),e.jsx("div",{className:"".concat(i," h-10 w-full rounded-md mt-4")})]})]});default:return e.jsx("div",{className:"".concat(i," h-4 w-full rounded ").concat(s)})}};return["text","avatar","button"].includes(t)&&a>1?e.jsx("div",{className:"space-y-2",children:Array.from({length:a}).map((l,d)=>e.jsx(ce.Fragment,{children:r()},d))}):r()},zo=({variant:t="generic"})=>{switch(t){case"therapist-dashboard":return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(Qt,{variant:"text",className:"h-8 w-64 mb-4"}),e.jsx(Qt,{variant:"text",className:"h-5 w-96"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((a,s)=>e.jsx(Qt,{variant:"booking-card"},s))})]});case"home":return e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"bg-gray-100 h-96 flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Qt,{className:"h-12 w-96 mx-auto"}),e.jsx(Qt,{className:"h-6 w-64 mx-auto"}),e.jsx(Qt,{variant:"button",className:"h-12 w-48 mx-auto"})]})}),e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsx(Qt,{variant:"list",count:4})})]});default:return e.jsxs("div",{className:"min-h-screen p-6",children:[e.jsx(Qt,{className:"h-8 w-64 mb-8"}),e.jsx(Qt,{variant:"list",count:5})]})}},Go=({variant:t="component",fallback:a,className:s="",children:n,componentId:i,showProgress:r=!1,pageVariant:l="generic"})=>{const{loading:d,progress:g,canShowContent:m,isCriticalLoading:x,getComponentLoading:v}=Fs(),[j,I]=o.useState(!1),[p,R]=o.useState(!1);o.useEffect(()=>{if(t==="global"&&d.global){u.debug("â±ï¸ [FAIL-SAFE] Starting 8-second timeout for global loader");const D=setTimeout(()=>{u.error("ðŸš¨ [FAIL-SAFE] Global loader timeout after 8 seconds!"),u.error("ðŸš¨ [FAIL-SAFE] Loading state:",{loading:d,progress:g}),u.error("ðŸš¨ [FAIL-SAFE] This indicates a blocking error during app bootstrap"),u.error("ðŸš¨ [FAIL-SAFE] Check console for errors above"),I(!0),R(!0)},8e3);return()=>clearTimeout(D)}},[t,d.global,d,g]);const P=(()=>{switch(t){case"global":return d.global;case"page":return d.page||x();case"component":return i?v(i):!1;case"inline":return d.data;default:return!1}})();return p&&t==="global"?e.jsx("div",{className:"fixed inset-0 flex flex-col items-center justify-center z-50 bg-red-500 px-4",role:"alert","aria-live":"assertive",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âš ï¸"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"App Loading Failed"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"The app is taking too long to start. This usually means:"}),e.jsxs("ul",{className:"text-left text-gray-600 space-y-2 mb-6",children:[e.jsx("li",{children:"â€¢ Network connection issue"}),e.jsx("li",{children:"â€¢ Server is temporarily unavailable"}),e.jsx("li",{children:"â€¢ Old cached version conflict"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-orange-500 text-white py-3 px-4 rounded-lg font-medium hover:bg-orange-600 transition",children:"ðŸ”„ Reload Page"}),e.jsx("button",{onClick:()=>{sessionStorage.clear(),localStorage.clear(),window.location.reload()},className:"w-full bg-gray-200 text-gray-700 py-3 px-4 rounded-lg font-medium hover:bg-gray-300 transition",children:"ðŸ§¹ Clear Cache & Reload"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-4 text-center",children:["Version: ",window.APP_VERSION||"unknown"]})]})}):t==="global"&&P?e.jsxs("div",{className:"fixed inset-0 flex flex-col items-center justify-center z-50 bg-orange-500",role:"status","aria-live":"polite","aria-label":g.message||"Application is loading",children:[e.jsxs("div",{className:"mb-8 text-center",style:{zIndex:10,position:"relative"},children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",style:{color:"#ffffff",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:"IndaStreet"}),e.jsx("p",{className:"text-lg font-medium",style:{color:"#ffffff",opacity:1,textShadow:"0 1px 2px rgba(0,0,0,0.1)"},children:"Professional Massage Services"})]}),r&&e.jsxs("div",{className:"relative w-20 h-20 mb-6",children:[e.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",viewBox:"0 0 80 80",children:[e.jsx("circle",{cx:"40",cy:"40",r:"36",stroke:"rgba(255,255,255,0.2)",strokeWidth:"8",fill:"none"}),e.jsx("circle",{cx:"40",cy:"40",r:"36",stroke:"white",strokeWidth:"8",fill:"none",strokeLinecap:"round",strokeDasharray:"".concat(2*Math.PI*36),strokeDashoffset:"".concat(2*Math.PI*36*(1-g.current/100)),className:"transition-all duration-300 ease-out"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})})]}),e.jsx("p",{className:"text-white/90 text-base font-medium mb-4",children:g.message||"Loading..."}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),r&&e.jsxs("div",{className:"mt-8 w-64 max-w-full",children:[e.jsxs("div",{className:"flex justify-between text-white/70 text-xs mb-2",children:[e.jsx("span",{className:g.stage==="initializing"?"text-white":"",children:"Initializing"}),e.jsx("span",{className:g.stage==="loading"?"text-white":"",children:"Loading"}),e.jsx("span",{className:g.stage==="authenticating"?"text-white":"",children:"Authenticating"}),e.jsx("span",{className:g.stage==="finalizing"?"text-white":"",children:"Ready"})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-1",children:e.jsx("div",{className:"h-1 rounded-full bg-white transition-all duration-500",style:{width:"".concat(Math.min(g.current,100),"%")}})})]})]}):t==="page"&&P?e.jsx("div",{className:"".concat(s),role:"status","aria-live":"polite","aria-label":"Page content is loading",children:a||e.jsx(zo,{variant:l})}):t==="component"&&P?e.jsx("div",{className:"".concat(s),role:"status","aria-live":"polite","aria-label":"Content is loading",children:a||e.jsx(Qt,{variant:"card"})}):t==="inline"&&P?e.jsxs("div",{className:"flex items-center justify-center ".concat(s),children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-orange-500 border-t-transparent"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading..."})]}):e.jsx(e.Fragment,{children:n})};class fd extends o.Component{constructor(s){super(s);Se(this,"handleRetry",()=>{this.setState({hasError:!1,errorMessage:""})});this.state={hasError:!1,errorMessage:""}}static getDerivedStateFromError(s){return{hasError:!0,errorMessage:s.message}}componentDidCatch(s,n){this.logErrorToService(s,n)}logErrorToService(s,n){}render(){return this.state.hasError?e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"We're sorry, but there was an issue loading the page. This has been logged and will be fixed."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:this.handleRetry,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors",children:"Reload Page"})]}),!1]})}):this.props.children}}class bd{constructor(){Se(this,"STORAGE_KEY","customer_gps_data");Se(this,"MAX_AGE_HOURS",2);Se(this,"PROXIMITY_THRESHOLD_KM",25)}async autoCollectOnEntry(){try{const a=this.getCachedGPSData();if(a&&this.isDataFresh(a))return a;if(!navigator.geolocation)return null;const s=await this.collectGPSWithFallback("landing");return s&&this.storeGPSData(s),s}catch{return null}}async collectForBooking(){try{const a=await this.collectGPSWithFallback("booking");return a&&this.storeGPSData(a),a}catch{throw new Error("Unable to get your location. Please enable location services and try again.")}}async collectGPSWithFallback(a){try{const s=await Il.getCurrentLocation({enableHighAccuracy:!0,timeout:15e3,maximumAge:3e5}),n={coordinates:{lat:s.lat,lng:s.lng},address:s.address,accuracy:50,timestamp:new Date,collectedAt:a};return n.city=this.extractCityFromAddress(s.address),n.region=this.extractRegionFromAddress(s.address),n}catch{return await this.fallbackGPSCollection(a)}}async fallbackGPSCollection(a){return new Promise(s=>{navigator.geolocation.getCurrentPosition(n=>{const i={coordinates:{lat:n.coords.latitude,lng:n.coords.longitude},address:"".concat(n.coords.latitude.toFixed(6),", ").concat(n.coords.longitude.toFixed(6)),accuracy:n.coords.accuracy,timestamp:new Date,collectedAt:a};s(i)},n=>{s(null)},{enableHighAccuracy:!1,timeout:1e4,maximumAge:6e5})})}async compareWithTherapist(a,s){const n=this.getCachedGPSData();if(!n)return null;try{const i=this.extractTherapistGPS(s);if(!i)return{customerGPS:n,distance:0,isNearby:!1,verificationStatus:"no_therapist_gps",recommendation:"Therapist should set GPS location for distance verification"};const r=this.calculateDistanceKm(n.coordinates,i),l=r<=this.PROXIMITY_THRESHOLD_KM;return{customerGPS:n,therapistGPS:i,distance:r,isNearby:l,verificationStatus:this.getVerificationStatus(r),recommendation:this.getLocationRecommendation(r,l)}}catch{return null}}extractTherapistGPS(a){var s,n,i,r;if(!a)return null;if((s=a.geopoint)!=null&&s.lat&&((n=a.geopoint)!=null&&n.lng))return{lat:a.geopoint.lat,lng:a.geopoint.lng,address:a.location};if((i=a.coordinate)!=null&&i.lat&&((r=a.coordinate)!=null&&r.lng))return{lat:a.coordinate.lat,lng:a.coordinate.lng,address:a.location};if(a.coordinates&&typeof a.coordinates=="string")try{const l=JSON.parse(a.coordinates);if(l.lat&&l.lng)return{lat:l.lat,lng:l.lng,address:a.location}}catch{}return null}calculateDistanceKm(a,s){const i=this.toRad(s.lat-a.lat),r=this.toRad(s.lng-a.lng),l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(this.toRad(a.lat))*Math.cos(this.toRad(s.lat))*Math.sin(r/2)*Math.sin(r/2);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}toRad(a){return a*(Math.PI/180)}getVerificationStatus(a){return a<=5?"verified":a<=15?"needs_check":"mismatch"}getLocationRecommendation(a,s){return a<=5?"âœ… Perfect! Therapist is very close to your location.":a<=15?"âœ… Good! Therapist is ".concat(a.toFixed(1),"km away - within service area."):a<=25?"âš ï¸ Therapist is ".concat(a.toFixed(1),"km away. Please confirm they serve your area."):"âŒ Therapist is ".concat(a.toFixed(1),"km away - may be too far for service.")}storeGPSData(a){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(a))}catch{}}getCachedGPSData(){try{const a=localStorage.getItem(this.STORAGE_KEY);if(!a)return null;const s=JSON.parse(a);return s.timestamp=new Date(s.timestamp),s}catch{return null}}isDataFresh(a){return(Date.now()-a.timestamp.getTime())/(1e3*60*60)<this.MAX_AGE_HOURS}extractCityFromAddress(a){const s=a.split(",").map(i=>i.trim()),n=["Jakarta","Surabaya","Bandung","Medan","Bekasi","Depok","Tangerang","Palembang","Semarang","Makassar","Yogyakarta","Bogor","Malang","Solo","Batam","Denpasar","Balikpapan","Pekanbaru","Bandar Lampung","Padang"];for(const i of s)for(const r of n)if(i.toLowerCase().includes(r.toLowerCase()))return r;return s.length>1?s[s.length-2]:void 0}extractRegionFromAddress(a){const s=a.split(",").map(n=>n.trim());return s.length>0?s[s.length-1]:void 0}clearStoredData(){localStorage.removeItem(this.STORAGE_KEY)}getDataStats(){const a=this.getCachedGPSData();if(!a)return{hasData:!1};const s=(Date.now()-a.timestamp.getTime())/(1e3*60*60);return{hasData:!0,age:Math.round(s*10)/10,accuracy:a.accuracy,collectedAt:a.collectedAt,city:a.city}}}const Jr=new bd,yd="ios_a2hs_dismissed",wd=({visible:t,onClose:a})=>{const[s,n]=o.useState(!1);if(!t)return null;const i=()=>{try{s&&localStorage.setItem(yd,"1")}catch{}a()};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:i}),e.jsxs("div",{className:"relative z-10 w-[92%] max-w-md bg-gray-900 rounded-2xl shadow-2xl overflow-hidden border border-gray-700",children:[e.jsxs("div",{className:"px-5 py-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Add to Home Screen"}),e.jsx("p",{className:"text-xs opacity-90",children:"Install the app for a full-screen experience"})]}),e.jsxs("div",{className:"p-5 text-white",children:[e.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm",children:[e.jsx("li",{children:"Open this page in Safari on iPhone."}),e.jsx("li",{children:"Tap the Share icon at the bottom."}),e.jsxs("li",{children:["Choose ",e.jsx("span",{className:"font-semibold text-orange-400",children:"Add to Home Screen"}),"."]}),e.jsxs("li",{children:["Confirm the name, then tap ",e.jsx("span",{className:"font-semibold text-orange-400",children:"Add"}),"."]})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-xs text-gray-300",children:[e.jsx("input",{id:"dont-show-ios",type:"checkbox",checked:s,onChange:r=>n(r.target.checked),className:"h-4 w-4 rounded border-gray-600 bg-gray-800 text-orange-500"}),e.jsx("label",{htmlFor:"dont-show-ios",children:"Donâ€™t show these tips again"})]})]}),e.jsx("div",{className:"px-5 pb-5",children:e.jsx("button",{onClick:i,className:"w-full bg-black text-white py-2.5 rounded-lg font-semibold hover:bg-gray-900 transition",type:"button",children:"Got it"})})]})]})};function Ko(t){const a=window.__PWA_UPDATE__;if(a!=null&&a.checkBeforeInstall)a.checkBeforeInstall(()=>{if(typeof t=="function"){const s=t();s instanceof Promise&&s.catch(()=>{})}});else if(typeof t=="function"){const s=t();s instanceof Promise&&s.catch(()=>{})}}const vd=()=>{const[t,a]=o.useState(null),[s,n]=o.useState(!1),[i,r]=o.useState(!1),l=/iphone|ipad|ipod/i.test(navigator.userAgent),d=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;o.useEffect(()=>{const m=j=>{j.preventDefault(),a(j),window.deferredPrompt=j,window.dispatchEvent(new CustomEvent("pwa-install-available"))},x=()=>{};window.addEventListener("beforeinstallprompt",m),window.addEventListener("sw-registered",x);const v=()=>{n(!0),a(null),r(!1)};return window.addEventListener("appinstalled",v),d?n(!0):l&&r(!1),()=>{window.removeEventListener("beforeinstallprompt",m),window.removeEventListener("appinstalled",v),window.removeEventListener("sw-registered",x)}},[l,d]);const g=o.useCallback(async()=>s?{outcome:"already-installed"}:t?new Promise(m=>{Ko(async()=>{t.prompt();const x=await t.userChoice;a(null),m(x)})}):l?(r(!0),{outcome:"ios-instructions"}):{outcome:"unavailable"},[t,s,l]);return{isSupported:!!t,isInstalled:s,deferredPrompt:t,isIOS:l,showIOSInstructions:i,requestInstall:g,setShowIOSInstructions:r}},jd=["en","id","th","vi","ms","tl","zh","ja","ko","es","fr","de","it","pt","ru","ar","hi","nl","tr","pl","sv","da"],Nd={en:Cs.en||{},id:Cs.id||{}},kd=()=>{try{const t=window.localStorage.getItem("app_language");return jd.includes(t||"")?t:"id"}catch{return"id"}};async function Ys(t){if(!Ns.hasResourceBundle(t,"common"))try{if(t==="en"||t==="id"){Ns.addResourceBundle(t,"common",Cs[t]);return}Ns.addResourceBundle(t,"common",Cs.en,!0,!0)}catch{Ns.addResourceBundle(t,"common",Cs.en,!0,!0)}}Ns.use(Mc).init({resources:Nd,lng:kd(),fallbackLng:"en",defaultNS:"common",interpolation:{escapeValue:!1},debug:!1});const Sd=({location:t,onDismiss:a})=>{const[s,n]=o.useState(!1);o.useEffect(()=>{if(t.method==="nearest"&&t.detectedCountry){n(!0);const r=setTimeout(()=>{i()},1e4);return()=>clearTimeout(r)}},[t]);const i=()=>{n(!1),a==null||a()};return!s||t.method!=="nearest"||!t.detectedCountry?null:e.jsxs("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50 animate-slide-down",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg shadow-2xl max-w-md mx-4",children:[e.jsxs("div",{className:"p-4 flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx(Pa,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"font-semibold text-sm mb-1",children:["Location Detected: ",t.detectedCountry]}),e.jsxs("p",{className:"text-xs opacity-90 leading-relaxed",children:["We've automatically selected ",e.jsx("strong",{children:t.countryName})," as your nearest supported country for the best experience."]}),t.latitude&&t.longitude&&e.jsxs("p",{className:"text-xs opacity-75 mt-2",children:["ðŸ“ Your location: ",t.latitude.toFixed(2),"Â°, ",t.longitude.toFixed(2),"Â°"]})]}),e.jsx("button",{onClick:i,className:"flex-shrink-0 p-1 hover:bg-white/20 rounded transition-colors","aria-label":"Dismiss notification",children:e.jsx(wt,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"h-1 bg-white/20 overflow-hidden",children:e.jsx("div",{className:"h-full bg-white/50 animate-progress-10s",style:{animation:"progress 10s linear forwards"}})})]}),e.jsx("style",{children:"\n        @keyframes slide-down {\n          from {\n            transform: translate(-50%, -100%);\n            opacity: 0;\n          }\n          to {\n            transform: translate(-50%, 0);\n            opacity: 1;\n          }\n        }\n\n        @keyframes progress {\n          from {\n            width: 100%;\n          }\n          to {\n            width: 0%;\n          }\n        }\n\n        .animate-slide-down {\n          animation: slide-down 0.3s ease-out forwards;\n        }\n\n        .animate-progress-10s {\n          width: 100%;\n        }\n      "})]})},Pd="https://ik.imagekit.io/7grri5v7d/indastreet%20massage.png?v=2026",Qs=[{code:"ID",name:"Indonesia",flag:"ðŸ‡®ðŸ‡©",description:"Southeast Asian archipelago",language:"id",languages:["id","en"]},{code:"MY",name:"Malaysia",flag:"ðŸ‡²ðŸ‡¾",description:"Truly Asia",language:"en",languages:["en"]},{code:"SG",name:"Singapore",flag:"ðŸ‡¸ðŸ‡¬",description:"Lion City",language:"en",languages:["en"]},{code:"TH",name:"Thailand",flag:"ðŸ‡¹ðŸ‡­",description:"Land of Smiles",language:"en",languages:["en"]},{code:"PH",name:"Philippines",flag:"ðŸ‡µðŸ‡­",description:"Pearl of the Orient Seas",language:"tl",languages:["tl","en"]},{code:"VN",name:"Vietnam",flag:"ðŸ‡»ðŸ‡³",description:"Timeless Charm",language:"en",languages:["en"]},{code:"GB",name:"United Kingdom",flag:"ðŸ‡¬ðŸ‡§",description:"England, Scotland, Wales",language:"en",languages:["en"]},{code:"US",name:"United States",flag:"ðŸ‡ºðŸ‡¸",description:"Land of opportunity",language:"en",languages:["en"]},{code:"AU",name:"Australia",flag:"ðŸ‡¦ðŸ‡º",description:"Down under",language:"en",languages:["en"]},{code:"DE",name:"Germany",flag:"ðŸ‡©ðŸ‡ª",description:"Heart of Europe",language:"de",languages:["de","en"]}],Id={ID:[{name:"Denpasar",region:"Bali",description:"Capital of Bali",popular:!0,country:"ID"},{name:"Canggu",region:"Bali",description:"Surfing & digital nomad hub",popular:!0,country:"ID"},{name:"Seminyak",region:"Bali",description:"Luxury beach resort area",popular:!0,country:"ID"},{name:"Kuta",region:"Bali",description:"Famous beach & nightlife",popular:!0,country:"ID"},{name:"Ubud",region:"Bali",description:"Cultural heart of Bali",popular:!0,country:"ID"},{name:"Sanur",region:"Bali",description:"Relaxed beachside town",popular:!0,country:"ID"},{name:"Nusa Dua",region:"Bali",description:"Luxury resort enclave",popular:!0,country:"ID"},{name:"Jimbaran",region:"Bali",description:"Seafood & sunset beaches",popular:!0,country:"ID"},{name:"Jakarta",region:"DKI Jakarta",description:"Capital of Indonesia",popular:!0,country:"ID"},{name:"Jakarta Pusat",region:"DKI Jakarta",description:"Central Jakarta",popular:!0,country:"ID"},{name:"Jakarta Barat",region:"DKI Jakarta",description:"West Jakarta",popular:!1,country:"ID"},{name:"Jakarta Selatan",region:"DKI Jakarta",description:"South Jakarta",popular:!0,country:"ID"},{name:"Jakarta Timur",region:"DKI Jakarta",description:"East Jakarta",popular:!1,country:"ID"},{name:"Jakarta Utara",region:"DKI Jakarta",description:"North Jakarta",popular:!1,country:"ID"},{name:"Tangerang",region:"Banten",description:"Jakarta satellite city",popular:!1,country:"ID"},{name:"Tangerang Selatan",region:"Banten",description:"South Tangerang",popular:!1,country:"ID"},{name:"Yogyakarta",region:"DI Yogyakarta",description:"Cultural & historical city",popular:!0,country:"ID"},{name:"Semarang",region:"Central Java",description:"Port city",popular:!1,country:"ID"},{name:"Surakarta",region:"Central Java",description:"Solo - cultural hub",popular:!1,country:"ID"},{name:"Magelang",region:"Central Java",description:"Near Borobudur",popular:!1,country:"ID"},{name:"Pekalongan",region:"Central Java",description:"Batik city",popular:!1,country:"ID"},{name:"Salatiga",region:"Central Java",description:"Mountain city",popular:!1,country:"ID"},{name:"Tegal",region:"Central Java",description:"North coast city",popular:!1,country:"ID"},{name:"Surabaya",region:"East Java",description:"Second largest city",popular:!0,country:"ID"},{name:"Malang",region:"East Java",description:"Cool highland city",popular:!0,country:"ID"},{name:"Batu",region:"East Java",description:"Apple city",popular:!1,country:"ID"},{name:"Blitar",region:"East Java",description:"Historical city",popular:!1,country:"ID"},{name:"Kediri",region:"East Java",description:"Sugar city",popular:!1,country:"ID"},{name:"Madiun",region:"East Java",description:"City of industry",popular:!1,country:"ID"},{name:"Mojokerto",region:"East Java",description:"Historical town",popular:!1,country:"ID"},{name:"Pasuruan",region:"East Java",description:"Port city",popular:!1,country:"ID"},{name:"Probolinggo",region:"East Java",description:"Bromo gateway",popular:!1,country:"ID"},{name:"Bandung",region:"West Java",description:"Cool mountain city",popular:!0,country:"ID"},{name:"Bekasi",region:"West Java",description:"Industrial hub",popular:!1,country:"ID"},{name:"Bogor",region:"West Java",description:"Rain city",popular:!1,country:"ID"},{name:"Depok",region:"West Java",description:"University town",popular:!1,country:"ID"},{name:"Cimahi",region:"West Java",description:"Textile city",popular:!1,country:"ID"},{name:"Cirebon",region:"West Java",description:"Port city",popular:!1,country:"ID"},{name:"Sukabumi",region:"West Java",description:"Tea plantations",popular:!1,country:"ID"},{name:"Tasikmalaya",region:"West Java",description:"Craft city",popular:!1,country:"ID"},{name:"Banjar",region:"West Java",description:"Small city",popular:!1,country:"ID"},{name:"Serang",region:"Banten",description:"Capital of Banten",popular:!1,country:"ID"},{name:"Cilegon",region:"Banten",description:"Industrial city",popular:!1,country:"ID"},{name:"Medan",region:"North Sumatra",description:"Gateway to Sumatra",popular:!0,country:"ID"},{name:"Binjai",region:"North Sumatra",description:"Rambutan city",popular:!1,country:"ID"},{name:"Gunungsitoli",region:"North Sumatra",description:"Nias island",popular:!1,country:"ID"},{name:"Padang Sidempuan",region:"North Sumatra",description:"South Tapanuli",popular:!1,country:"ID"},{name:"Pematangsiantar",region:"North Sumatra",description:"Simalungun",popular:!1,country:"ID"},{name:"Sibolga",region:"North Sumatra",description:"Port city",popular:!1,country:"ID"},{name:"Tanjungbalai",region:"North Sumatra",description:"Fishing port",popular:!1,country:"ID"},{name:"Tebing Tinggi",region:"North Sumatra",description:"Serbelawan",popular:!1,country:"ID"},{name:"Padang",region:"West Sumatra",description:"Minang cuisine capital",popular:!0,country:"ID"},{name:"Bukittinggi",region:"West Sumatra",description:"Fort de Kock",popular:!1,country:"ID"},{name:"Padang Panjang",region:"West Sumatra",description:"Cultural city",popular:!1,country:"ID"},{name:"Pariaman",region:"West Sumatra",description:"Coastal city",popular:!1,country:"ID"},{name:"Payakumbuh",region:"West Sumatra",description:"Highland city",popular:!1,country:"ID"},{name:"Sawahlunto",region:"West Sumatra",description:"Coal mining heritage",popular:!1,country:"ID"},{name:"Solok",region:"West Sumatra",description:"Lake district",popular:!1,country:"ID"},{name:"Palembang",region:"South Sumatra",description:"River city",popular:!0,country:"ID"},{name:"Lubuklinggau",region:"South Sumatra",description:"Musi Rawas",popular:!1,country:"ID"},{name:"Pagar Alam",region:"South Sumatra",description:"Highland resort",popular:!1,country:"ID"},{name:"Prabumulih",region:"South Sumatra",description:"Oil city",popular:!1,country:"ID"},{name:"Pekanbaru",region:"Riau",description:"Oil & palm capital",popular:!1,country:"ID"},{name:"Dumai",region:"Riau",description:"Port city",popular:!1,country:"ID"},{name:"Batam",region:"Riau Islands",description:"Industrial island",popular:!0,country:"ID"},{name:"Tanjungpinang",region:"Riau Islands",description:"Bintan capital",popular:!1,country:"ID"},{name:"Bandar Lampung",region:"Lampung",description:"Southern Sumatra",popular:!1,country:"ID"},{name:"Metro",region:"Lampung",description:"Small city",popular:!1,country:"ID"},{name:"Bengkulu",region:"Bengkulu",description:"Rafflesia city",popular:!1,country:"ID"},{name:"Jambi",region:"Jambi",description:"Batanghari river",popular:!1,country:"ID"},{name:"Sungai Penuh",region:"Jambi",description:"Highland city",popular:!1,country:"ID"},{name:"Banda Aceh",region:"Aceh",description:"Veranda of Mecca",popular:!1,country:"ID"},{name:"Langsa",region:"Aceh",description:"Eastern Aceh",popular:!1,country:"ID"},{name:"Lhokseumawe",region:"Aceh",description:"Industrial city",popular:!1,country:"ID"},{name:"Sabang",region:"Aceh",description:"Weh island",popular:!1,country:"ID"},{name:"Subulussalam",region:"Aceh",description:"Mountain city",popular:!1,country:"ID"},{name:"Balikpapan",region:"East Kalimantan",description:"Oil city",popular:!1,country:"ID"},{name:"Samarinda",region:"East Kalimantan",description:"Capital of East Kalimantan",popular:!1,country:"ID"},{name:"Bontang",region:"East Kalimantan",description:"LNG city",popular:!1,country:"ID"},{name:"Tarakan",region:"North Kalimantan",description:"Island city",popular:!1,country:"ID"},{name:"Pontianak",region:"West Kalimantan",description:"Equator city",popular:!1,country:"ID"},{name:"Singkawang",region:"West Kalimantan",description:"Thousand temples",popular:!1,country:"ID"},{name:"Palangka Raya",region:"Central Kalimantan",description:"Capital of Central Kalimantan",popular:!1,country:"ID"},{name:"Banjarmasin",region:"South Kalimantan",description:"River city",popular:!1,country:"ID"},{name:"Banjarbaru",region:"South Kalimantan",description:"Satellite city",popular:!1,country:"ID"},{name:"Makassar",region:"South Sulawesi",description:"Gateway to eastern Indonesia",popular:!0,country:"ID"},{name:"Palopo",region:"South Sulawesi",description:"Luwu",popular:!1,country:"ID"},{name:"Parepare",region:"South Sulawesi",description:"Port city",popular:!1,country:"ID"},{name:"Palu",region:"Central Sulawesi",description:"Bay city",popular:!1,country:"ID"},{name:"Manado",region:"North Sulawesi",description:"Bunaken diving",popular:!1,country:"ID"},{name:"Bitung",region:"North Sulawesi",description:"Port city",popular:!1,country:"ID"},{name:"Kotamobagu",region:"North Sulawesi",description:"Bolaang Mongondow",popular:!1,country:"ID"},{name:"Tomohon",region:"North Sulawesi",description:"Flower city",popular:!1,country:"ID"},{name:"Kendari",region:"Southeast Sulawesi",description:"Capital of Southeast Sulawesi",popular:!1,country:"ID"},{name:"Baubau",region:"Southeast Sulawesi",description:"Buton island",popular:!1,country:"ID"},{name:"Gorontalo",region:"Gorontalo",description:"Diving paradise",popular:!1,country:"ID"},{name:"Mataram",region:"West Nusa Tenggara",description:"Lombok capital",popular:!1,country:"ID"},{name:"Bima",region:"West Nusa Tenggara",description:"Sumbawa",popular:!1,country:"ID"},{name:"Kupang",region:"East Nusa Tenggara",description:"NTT capital",popular:!1,country:"ID"},{name:"Ambon",region:"Maluku",description:"Spice islands",popular:!1,country:"ID"},{name:"Tual",region:"Maluku",description:"Kei islands",popular:!1,country:"ID"},{name:"Ternate",region:"North Maluku",description:"Clove island",popular:!1,country:"ID"},{name:"Tidore Kepulauan",region:"North Maluku",description:"Sultan city",popular:!1,country:"ID"},{name:"Jayapura",region:"Papua",description:"Papua capital",popular:!1,country:"ID"},{name:"Sorong",region:"Southwest Papua",description:"Raja Ampat gateway",popular:!1,country:"ID"},{name:"Pangkalpinang",region:"Bangka Belitung Islands",description:"Tin island",popular:!1,country:"ID"}],MY:[{name:"Kuala Lumpur",region:"Federal Territory",description:"Capital of Malaysia",popular:!0,country:"MY"},{name:"KLCC",region:"Kuala Lumpur",description:"Twin towers district",popular:!0,country:"MY"},{name:"Bukit Bintang",region:"Kuala Lumpur",description:"Shopping & entertainment",popular:!0,country:"MY"},{name:"George Town",region:"Penang",description:"UNESCO heritage city",popular:!0,country:"MY"},{name:"Johor Bahru",region:"Johor",description:"Gateway to Singapore",popular:!0,country:"MY"},{name:"Petaling Jaya",region:"Selangor",description:"Satellite city",popular:!0,country:"MY"},{name:"Shah Alam",region:"Selangor",description:"State capital",popular:!1,country:"MY"},{name:"Ipoh",region:"Perak",description:"Heritage city",popular:!1,country:"MY"},{name:"Malacca City",region:"Malacca",description:"Historic port city",popular:!1,country:"MY"},{name:"Kota Kinabalu",region:"Sabah",description:"Gateway to Borneo",popular:!1,country:"MY"}],SG:[{name:"Singapore",region:"Central",description:"City-state",popular:!0,country:"SG"},{name:"Marina Bay",region:"Downtown Core",description:"Iconic waterfront",popular:!0,country:"SG"},{name:"Orchard Road",region:"Orchard",description:"Shopping paradise",popular:!0,country:"SG"},{name:"Chinatown",region:"Outram",description:"Historic district",popular:!0,country:"SG"},{name:"Sentosa",region:"Southern Islands",description:"Resort island",popular:!0,country:"SG"},{name:"Clarke Quay",region:"Singapore River",description:"Riverside dining & nightlife",popular:!0,country:"SG"},{name:"Bugis",region:"Rochor",description:"Shopping & culture",popular:!1,country:"SG"},{name:"Raffles Place",region:"Downtown Core",description:"Financial district",popular:!1,country:"SG"}],TH:[{name:"Bangkok",region:"Central Thailand",description:"Capital of Thailand",popular:!0,country:"TH"},{name:"Sukhumvit",region:"Bangkok",description:"Expat & nightlife hub",popular:!0,country:"TH"},{name:"Silom",region:"Bangkok",description:"Business district",popular:!0,country:"TH"},{name:"Siam",region:"Bangkok",description:"Shopping paradise",popular:!0,country:"TH"},{name:"Phuket",region:"Southern Thailand",description:"Beach paradise",popular:!0,country:"TH"},{name:"Patong",region:"Phuket",description:"Beach & nightlife",popular:!0,country:"TH"},{name:"Chiang Mai",region:"Northern Thailand",description:"Cultural hub",popular:!0,country:"TH"},{name:"Pattaya",region:"Eastern Thailand",description:"Beach resort city",popular:!0,country:"TH"},{name:"Krabi",region:"Southern Thailand",description:"Limestone cliffs & beaches",popular:!1,country:"TH"},{name:"Koh Samui",region:"Southern Thailand",description:"Tropical island",popular:!1,country:"TH"},{name:"Hua Hin",region:"Central Thailand",description:"Royal beach resort",popular:!1,country:"TH"}],PH:[{name:"Manila",region:"Metro Manila",description:"Capital of Philippines",popular:!0,country:"PH"},{name:"Makati",region:"Metro Manila",description:"Financial district",popular:!0,country:"PH"},{name:"Quezon City",region:"Metro Manila",description:"Largest city in Metro Manila",popular:!0,country:"PH"},{name:"Pasig",region:"Metro Manila",description:"Business hub",popular:!0,country:"PH"},{name:"Taguig (BGC)",region:"Metro Manila",description:"Bonifacio Global City",popular:!0,country:"PH"},{name:"Cebu City",region:"Cebu",description:"Queen City of the South",popular:!0,country:"PH"},{name:"Boracay",region:"Aklan",description:"World-famous beach island",popular:!0,country:"PH"},{name:"Davao City",region:"Davao del Sur",description:"Largest city in Mindanao",popular:!0,country:"PH"},{name:"Puerto Princesa",region:"Palawan",description:"Underground river",popular:!0,country:"PH"},{name:"Baguio",region:"Benguet",description:"Summer capital",popular:!0,country:"PH"},{name:"Iloilo City",region:"Iloilo",description:"City of love",popular:!1,country:"PH"},{name:"Mandaue",region:"Cebu",description:"Industrial city",popular:!1,country:"PH"},{name:"Lapu-Lapu",region:"Cebu",description:"Mactan Island",popular:!1,country:"PH"}],VN:[{name:"Ho Chi Minh City",region:"Southern Vietnam",description:"Economic capital",popular:!0,country:"VN"},{name:"District 1",region:"Ho Chi Minh City",description:"Downtown core",popular:!0,country:"VN"},{name:"District 3",region:"Ho Chi Minh City",description:"Expat area",popular:!0,country:"VN"},{name:"Hanoi",region:"Northern Vietnam",description:"Capital of Vietnam",popular:!0,country:"VN"},{name:"Old Quarter",region:"Hanoi",description:"Historic heart",popular:!0,country:"VN"},{name:"Da Nang",region:"Central Vietnam",description:"Coastal city",popular:!0,country:"VN"},{name:"Hoi An",region:"Central Vietnam",description:"Ancient town",popular:!0,country:"VN"},{name:"Nha Trang",region:"Central Vietnam",description:"Beach resort city",popular:!0,country:"VN"},{name:"Vung Tau",region:"Southern Vietnam",description:"Beach city near Saigon",popular:!1,country:"VN"},{name:"Dalat",region:"Central Highlands",description:"Mountain resort town",popular:!1,country:"VN"},{name:"Hue",region:"Central Vietnam",description:"Imperial city",popular:!1,country:"VN"}],GB:[{name:"London",region:"Greater London",description:"Capital of UK",popular:!0,country:"GB"},{name:"Westminster",region:"London",description:"Political heart",popular:!0,country:"GB"},{name:"Camden",region:"London",description:"Arts & music hub",popular:!0,country:"GB"},{name:"Kensington",region:"London",description:"Royal borough",popular:!0,country:"GB"},{name:"Shoreditch",region:"London",description:"Trendy East London",popular:!0,country:"GB"},{name:"Canary Wharf",region:"London",description:"Financial district",popular:!0,country:"GB"},{name:"Manchester",region:"Greater Manchester",description:"Northern powerhouse",popular:!0,country:"GB"},{name:"Birmingham",region:"West Midlands",description:"Second largest city",popular:!0,country:"GB"},{name:"Liverpool",region:"Merseyside",description:"Beatles city",popular:!0,country:"GB"},{name:"Leeds",region:"West Yorkshire",description:"Yorkshire hub",popular:!0,country:"GB"},{name:"Glasgow",region:"Scotland",description:"Largest Scottish city",popular:!0,country:"GB"},{name:"Edinburgh",region:"Scotland",description:"Capital of Scotland",popular:!0,country:"GB"},{name:"Bristol",region:"South West England",description:"Creative city",popular:!0,country:"GB"},{name:"Newcastle",region:"Tyne and Wear",description:"Geordie city",popular:!1,country:"GB"},{name:"Cardiff",region:"Wales",description:"Capital of Wales",popular:!1,country:"GB"},{name:"Brighton",region:"East Sussex",description:"Seaside city",popular:!1,country:"GB"},{name:"Oxford",region:"Oxfordshire",description:"University city",popular:!1,country:"GB"},{name:"Cambridge",region:"Cambridgeshire",description:"University city",popular:!1,country:"GB"},{name:"Nottingham",region:"Nottinghamshire",description:"Robin Hood city",popular:!1,country:"GB"},{name:"Sheffield",region:"South Yorkshire",description:"Steel city",popular:!1,country:"GB"}],US:[{name:"New York City",region:"New York",description:"The Big Apple",popular:!0,country:"US"},{name:"Manhattan",region:"New York",description:"Heart of NYC",popular:!0,country:"US"},{name:"Brooklyn",region:"New York",description:"Hipster capital",popular:!0,country:"US"},{name:"Queens",region:"New York",description:"Diverse borough",popular:!0,country:"US"},{name:"Los Angeles",region:"California",description:"City of Angels",popular:!0,country:"US"},{name:"Hollywood",region:"California",description:"Entertainment capital",popular:!0,country:"US"},{name:"Santa Monica",region:"California",description:"Beach city",popular:!0,country:"US"},{name:"Beverly Hills",region:"California",description:"Luxury district",popular:!0,country:"US"},{name:"Chicago",region:"Illinois",description:"Windy City",popular:!0,country:"US"},{name:"Houston",region:"Texas",description:"Space City",popular:!0,country:"US"},{name:"Phoenix",region:"Arizona",description:"Valley of the Sun",popular:!0,country:"US"},{name:"Philadelphia",region:"Pennsylvania",description:"City of Brotherly Love",popular:!0,country:"US"},{name:"San Antonio",region:"Texas",description:"Alamo city",popular:!0,country:"US"},{name:"San Diego",region:"California",description:"Americas Finest City",popular:!0,country:"US"},{name:"Dallas",region:"Texas",description:"Big D",popular:!0,country:"US"},{name:"San Francisco",region:"California",description:"Golden Gate city",popular:!0,country:"US"},{name:"Austin",region:"Texas",description:"Live music capital",popular:!0,country:"US"},{name:"Seattle",region:"Washington",description:"Emerald City",popular:!0,country:"US"},{name:"Denver",region:"Colorado",description:"Mile High City",popular:!0,country:"US"},{name:"Washington DC",region:"District of Columbia",description:"Nations capital",popular:!0,country:"US"},{name:"Boston",region:"Massachusetts",description:"Historic city",popular:!0,country:"US"},{name:"Las Vegas",region:"Nevada",description:"Entertainment capital",popular:!0,country:"US"},{name:"Miami",region:"Florida",description:"Magic City",popular:!0,country:"US"},{name:"Orlando",region:"Florida",description:"Theme park capital",popular:!1,country:"US"},{name:"Atlanta",region:"Georgia",description:"Capital of the South",popular:!1,country:"US"},{name:"Portland",region:"Oregon",description:"Keep Portland weird",popular:!1,country:"US"},{name:"Nashville",region:"Tennessee",description:"Music City",popular:!1,country:"US"},{name:"New Orleans",region:"Louisiana",description:"The Big Easy",popular:!1,country:"US"}],AU:[{name:"Sydney",region:"New South Wales",description:"Harbor city",popular:!0,country:"AU"},{name:"CBD Sydney",region:"New South Wales",description:"Business district",popular:!0,country:"AU"},{name:"Bondi",region:"New South Wales",description:"Famous beach",popular:!0,country:"AU"},{name:"Manly",region:"New South Wales",description:"Beach suburb",popular:!0,country:"AU"},{name:"Parramatta",region:"New South Wales",description:"Western Sydney",popular:!0,country:"AU"},{name:"Melbourne",region:"Victoria",description:"Cultural capital",popular:!0,country:"AU"},{name:"CBD Melbourne",region:"Victoria",description:"City center",popular:!0,country:"AU"},{name:"St Kilda",region:"Victoria",description:"Beachside suburb",popular:!0,country:"AU"},{name:"Fitzroy",region:"Victoria",description:"Hipster hub",popular:!0,country:"AU"},{name:"Brisbane",region:"Queensland",description:"River city",popular:!0,country:"AU"},{name:"Gold Coast",region:"Queensland",description:"Beach paradise",popular:!0,country:"AU"},{name:"Perth",region:"Western Australia",description:"Most isolated city",popular:!0,country:"AU"},{name:"Adelaide",region:"South Australia",description:"City of churches",popular:!0,country:"AU"},{name:"Canberra",region:"Australian Capital Territory",description:"Nations capital",popular:!0,country:"AU"},{name:"Hobart",region:"Tasmania",description:"Island capital",popular:!1,country:"AU"},{name:"Darwin",region:"Northern Territory",description:"Top End city",popular:!1,country:"AU"},{name:"Cairns",region:"Queensland",description:"Great Barrier Reef gateway",popular:!1,country:"AU"},{name:"Newcastle",region:"New South Wales",description:"Coal city",popular:!1,country:"AU"},{name:"Wollongong",region:"New South Wales",description:"Steel city",popular:!1,country:"AU"}],DE:[{name:"Berlin",region:"Berlin",description:"Capital of Germany",popular:!0,country:"DE"},{name:"Mitte",region:"Berlin",description:"Central district",popular:!0,country:"DE"},{name:"Kreuzberg",region:"Berlin",description:"Multicultural hub",popular:!0,country:"DE"},{name:"Friedrichshain",region:"Berlin",description:"Alternative scene",popular:!0,country:"DE"},{name:"Charlottenburg",region:"Berlin",description:"Western district",popular:!0,country:"DE"},{name:"Munich",region:"Bavaria",description:"Bavarian capital",popular:!0,country:"DE"},{name:"Hamburg",region:"Hamburg",description:"Port city",popular:!0,country:"DE"},{name:"Frankfurt",region:"Hesse",description:"Financial capital",popular:!0,country:"DE"},{name:"Cologne",region:"North Rhine-Westphalia",description:"Cathedral city",popular:!0,country:"DE"},{name:"Stuttgart",region:"Baden-WÃ¼rttemberg",description:"Auto industry hub",popular:!0,country:"DE"},{name:"DÃ¼sseldorf",region:"North Rhine-Westphalia",description:"Fashion capital",popular:!0,country:"DE"},{name:"Dortmund",region:"North Rhine-Westphalia",description:"Industrial city",popular:!1,country:"DE"},{name:"Essen",region:"North Rhine-Westphalia",description:"Ruhr area",popular:!1,country:"DE"},{name:"Leipzig",region:"Saxony",description:"Music city",popular:!1,country:"DE"},{name:"Dresden",region:"Saxony",description:"Baroque city",popular:!1,country:"DE"},{name:"Hanover",region:"Lower Saxony",description:"Fair city",popular:!1,country:"DE"},{name:"Nuremberg",region:"Bavaria",description:"Medieval city",popular:!1,country:"DE"},{name:"Bremen",region:"Bremen",description:"Hanseatic city",popular:!1,country:"DE"}]},Cd=({onEnterApp:t,handleEnterApp:a,onLanguageSelect:s,handleLanguageSelect:n,language:i="id",onLanguageChange:r})=>{u.debug("ðŸŽ¬ LandingPage component mounted");const[l,d]=o.useState(i),[g,m]=o.useState(!1),{isInstalled:x,isIOS:v,showIOSInstructions:j,setShowIOSInstructions:I}=vd();o.useEffect(()=>{const ue=()=>{u.debug("ðŸš€ PWA install capability detected on landing page")};return window.addEventListener("pwa-install-available",ue),()=>window.removeEventListener("pwa-install-available",ue)},[]);const p=ce.useRef(!0),R=ce.useRef(!1),{city:w,countryCode:P,autoDetected:D,detectionMethod:L,locationResult:O,setCity:H,setCountry:S,clearCountry:N,confirmLocation:k,hasConfirmedCity:b,confirmedLocation:y}=pi(),[T,F]=o.useState(null),[U,B]=o.useState(!1),[f,A]=o.useState(!1),[c,h]=o.useState(null),[C,M]=o.useState(""),[E,W]=o.useState(!1),[X,_]=o.useState(null),$=o.useRef(null),q=o.useRef(!1),[J,Z]=o.useState("idle"),[me,Fe]=o.useState(null),[ve,re]=o.useState(null),Oe=a||t,Le=n||s,De=o.useMemo(()=>Qs.find(ue=>ue.code===P),[P]),ht=o.useCallback((ue,we=null,_e=null,Me)=>{try{const Ue=xi(ue);localStorage.setItem("user_city_id",Ue),localStorage.setItem("user_city_name",ue),we!==null&&Number.isFinite(we)?localStorage.setItem("user_city_lat",String(we)):localStorage.removeItem("user_city_lat"),_e!==null&&Number.isFinite(_e)?localStorage.setItem("user_city_lng",String(_e)):localStorage.removeItem("user_city_lng"),Me&&Me.trim().length>0?localStorage.setItem("user_city_address",Me.trim()):localStorage.removeItem("user_city_address")}catch(Ue){u.warn("âš ï¸ Failed to persist city selection",Ue)}},[]),St=o.useCallback((ue,we,_e,Me)=>{var Be;return{address:Me&&Me.trim().length>0?Me.trim():"".concat(ue,", ").concat((Be=De==null?void 0:De.name)!=null?Be:"").trim(),lat:we!=null?we:0,lng:_e!=null?_e:0}},[De==null?void 0:De.name]),Pt=o.useCallback((ue,we,_e,Me)=>{ht(ue,we,_e,Me);const Ue=St(ue,we,_e,Me);return $.current=Ue,Ue},[ht,St]),te=ue=>{u.debug("ðŸŒ Language changed to:",ue),d(ue),r&&r(ue),Le&&Le(ue)};o.useEffect(()=>(p.current=!0,()=>{p.current=!1}),[]),o.useEffect(()=>{if(R.current)return;R.current=!0,(async()=>{if(P&&P!=="ID"){u.debug("âœ… Country already detected:",P);return}try{u.debug("ðŸŒ IP detection initiated by CityContext")}catch(we){u.warn("âš ï¸ IP detection skipped:",we)}})()},[]),o.useEffect(()=>{const we=setTimeout(async()=>{try{u.debug("ðŸ“ Starting silent GPS collection on landing page..."),await Jr.autoCollectOnEntry(),u.debug("âœ… GPS auto-collection completed")}catch(_e){u.debug("ðŸ“ GPS auto-collection failed (this is normal):",_e)}},1500);return()=>clearTimeout(we)},[]);const ie=o.useCallback(ue=>{var Be;if(typeof window=="undefined"){u.warn("âš ï¸ Unable to navigate from non-browser environment.");return}const we=ue?"?c=".concat(encodeURIComponent(ue)):"",_e="/home".concat(we),Me="#/home".concat(we);try{sessionStorage.setItem("current_page","home")}catch(mt){u.warn("âš ï¸ Unable to persist current_page session state",mt)}const Ue=()=>{try{window.history.replaceState({page:"home"},"",_e)}catch(mt){u.warn("âš ï¸ Unable to update history state",mt)}window.location.hash!==Me&&(window.location.hash=Me)};if(typeof((Be=window.App)==null?void 0:Be.setPage)=="function"){u.debug("ðŸš€ Navigating to home via App.setPage"),window.App.setPage("home"),Ue();return}if(typeof window.setPage=="function"){u.debug("ðŸš€ Navigating to home via global setPage"),window.setPage("home"),Ue();return}u.debug("ðŸš€ Navigating to home via hash routing"),Ue()},[]),Ie=o.useCallback(async(ue,we)=>{const _e=ue||$.current||{address:"Unknown",lat:0,lng:0};if(Oe){u.debug("ðŸš€ Using provided enterApp callback");try{if(!p.current)return;await Oe(l,_e),ie(we);return}catch(Me){u.error("âŒ enterApp callback failed, falling back to direct navigation",Me)}}u.debug("ðŸš€ Final navigation to home"),ie(we)},[l,Oe,ie]);o.useEffect(()=>{typeof window!="undefined"&&("geolocation"in navigator||(u.warn("ðŸ“ Browser does not support geolocation. Prompting manual selection."),Z("error"),Fe("Location services are unavailable. Please select your city below.")))},[]);const de=async ue=>{var _e,Me,Ue;if(g)return;m(!0),re(null),F(ue.name),H(ue.name),q.current=!0,A(!1),u.debug("ðŸ“ City selected:",ue.name,"in country:",ue.country);const we=Qs.find(Be=>Be.code===ue.country);if(we&&we.language!==l){u.debug("ðŸŒ Auto-switching to country language:",we.language);try{const Be=we.language;await Ys(Be),te(Be),u.debug("âœ… Language auto-switched to:",Be)}catch(Be){u.warn("âš ï¸ Language auto-switch failed, using English:",Be),te("en")}}S(ue.country,!1);try{const Be=Cl(ue.name),mt=(_e=Be==null?void 0:Be.coordinates.lat)!=null?_e:null,Xe=(Me=Be==null?void 0:Be.coordinates.lng)!=null?Me:null,rt=C.trim().length>0?C:Be?"".concat(Be.name,", ").concat(Be.province):"".concat(ue.name,", ").concat((Ue=De==null?void 0:De.name)!=null?Ue:"");h(mt!==null&&Xe!==null?{lat:mt,lng:Xe}:null);const ba=Pt(ue.name,mt,Xe,rt||null);await k({cityName:ue.name,latitude:mt,longitude:Xe,locationText:rt||null}),Z("success"),Fe(null),await Ie(ba,ue.name)}catch(Be){u.error("âŒ Failed to navigate after city selection:",Be),alert("Unable to open your city right now. Please try again or use GPS.")}finally{p.current&&m(!1)}},He=async ue=>{const we=Qs.find(_e=>_e.code===ue);if(B(!1),F(null),S(ue,!0),we){const _e=we.language,Me=we.languages||[_e];if(Me.length===1&&Me[0]==="en")try{await Ys("en"),te("en")}catch{}else if(Me.length>1)try{await Ys(_e),te(_e)}catch{te("en")}else if(_e!==l)try{await Ys(_e),te(_e)}catch{te("en")}}},Qe=async()=>{A(!0),m(!0),re(null);try{const ue=await Jr.collectForBooking();if(!ue)throw new Error("Unable to get your location");const we={address:ue.address,lat:ue.coordinates.lat,lng:ue.coordinates.lng};W(!0),_(we.address);const _e=we.address.split(",");let Me=_e[0].trim();_e.length>1&&(Me=_e.slice(0,2).find(Be=>!Be.match(/^\d{5}/)&&Be.length>2)||_e[0],Me=Me.trim()),F(Me),H(Me),h({lat:we.lat,lng:we.lng});const Ue=Pt(Me,we.lat,we.lng,we.address);k({cityName:Me,latitude:we.lat,longitude:we.lng,locationText:we.address}),await Ie(Ue)}catch{re("Unable to detect your location. Please select your city from the list below.")}finally{p.current&&m(!1)}},xt=o.useMemo(()=>Id[P]||[],[P]);return e.jsxs("div",{"data-landing-page":"ready",className:"landing-page-container mobile-optimized scrollable relative w-full bg-gray-900",style:{height:"auto",minHeight:"100dvh",maxHeight:"none",position:"relative",paddingBottom:"max(env(safe-area-inset-bottom, 20px), 40px)",WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x",overscrollBehavior:"auto",backgroundColor:"#111827"},children:[O&&e.jsx(Sd,{location:O}),e.jsx(cs,{pageNumber:1,pageName:"LandingPage"}),e.jsx("div",{id:"main-background-image",className:"fixed inset-0 z-0 w-full h-full bg-gray-900",style:{backgroundImage:"url('".concat(Pd,"')"),backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",willChange:"contents",minHeight:"100dvh",minWidth:"100%",position:"fixed",top:0,left:0,right:0,bottom:0}}),e.jsx("div",{className:"absolute inset-0 z-10 bg-black/50 pointer-events-none",style:{willChange:"contents"}}),e.jsxs("div",{className:"scrollable relative z-20 flex flex-col items-center justify-center text-white px-4 sm:px-6 text-center w-full",style:{minHeight:"100dvh",paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:[e.jsxs("div",{className:"flex-1 flex flex-col justify-center w-full max-w-sm sm:max-w-lg",children:[e.jsxs("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold mb-3 sm:mb-4",children:[e.jsx("span",{className:"text-white",children:"Inda"}),e.jsx("span",{className:"text-orange-400",children:"street"})]}),e.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-semibold text-white mb-5 sm:mb-8",children:(De==null?void 0:De.name)==="Philippines"?"".concat(De==null?void 0:De.name,"' Massage Hub"):"".concat(De==null?void 0:De.name,"'s Massage Hub")}),e.jsx("div",{className:"w-full max-w-sm sm:max-w-lg px-1 sm:px-4",children:e.jsxs("div",{className:"bg-gray-900 rounded-xl p-2.5 sm:p-6 border border-gray-700 shadow-xl",style:{backgroundColor:"rgba(17, 24, 39, 0.95)"},children:[e.jsx("div",{className:"mb-4 p-3 sm:p-4 bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("span",{className:"text-xl sm:text-2xl",children:De==null?void 0:De.flag}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-bold text-white text-sm sm:text-base",children:De==null?void 0:De.name}),D&&e.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full text-white whitespace-nowrap",children:L==="ip"?"ðŸ“ Auto-detected":"âœ“ Saved"})]}),e.jsx("p",{className:"text-xs text-orange-100 mt-1",children:"Select your city to continue"})]})]}),e.jsx("button",{onClick:()=>B(!0),className:"text-xs text-white hover:text-orange-200 underline font-medium whitespace-nowrap",children:"Change country"})]})}),E&&X&&e.jsxs("div",{className:"mb-3 px-4 py-2 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsxs("span",{className:"text-xs font-medium",children:["ðŸ“ Location detected: ",X]})]}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Therapist bookings will include your precise location automatically"})]}),e.jsx("button",{onClick:Qe,disabled:g,className:"w-full mb-3 rounded-lg border-2 border-orange-500 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3 pl-4 pr-3 py-4",children:[e.jsx("div",{className:"w-6 h-6 flex-shrink-0",children:e.jsx(Pa,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-base font-bold leading-tight",children:g&&f?"Detecting your location...":"Use My GPS Location"}),e.jsx("div",{className:"text-xs text-orange-100 leading-tight mt-1",children:g&&f?"Please allow location access":"Find therapists & places closest to you"})]})]})}),ve&&e.jsx("div",{className:"mb-3 px-4 py-2 bg-amber-950/80 border border-amber-600 rounded-lg",children:e.jsx("p",{className:"text-sm text-amber-200",children:ve})}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-700"}),e.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"OR SELECT A CITY"}),e.jsx("div",{className:"flex-1 h-px bg-gray-700"})]}),e.jsx("div",{className:"flex flex-col gap-2  scrollbar-thin scrollbar-thumb-orange-500 scrollbar-track-gray-700",style:{maxHeight:"35vh"},children:xt.length>0?e.jsx(e.Fragment,{children:xt.map((ue,we)=>e.jsx("button",{onClick:()=>de(ue),className:"w-full rounded-lg border-2 transition-all flex-shrink-0 ".concat(T===ue.name?"border-orange-500 bg-orange-500 text-white shadow-lg":"border-gray-600 bg-gray-800 hover:border-orange-400 hover:bg-gray-700 text-white"),children:e.jsxs("div",{className:"flex items-center gap-3 p-3",children:[e.jsx(Pa,{className:"w-4 h-4 flex-shrink-0 ".concat(T===ue.name?"text-white":"text-orange-400")}),e.jsxs("div",{className:"flex-1 text-left min-w-0",children:[e.jsx("div",{className:"font-medium text-sm leading-tight truncate",children:ue.name}),e.jsxs("div",{className:"text-xs leading-tight mt-0.5 truncate ".concat(T===ue.name?"text-orange-100":"text-gray-400"),children:[ue.region," â€¢ ",ue.description]})]})]})},"".concat(ue.name,"-").concat(we)))}):e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(Pa,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No cities available for this country"})]})})]})})]}),e.jsx(wd,{visible:j&&v&&!x&&(()=>{try{return!localStorage.getItem("ios_a2hs_dismissed")}catch{return!0}})(),onClose:()=>I(!1)})]}),U&&e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",style:{position:"fixed",top:"0",left:"0",width:"100%",height:"calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom))",zIndex:9999},children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl p-6 max-w-md w-full max-h-[90vh]  border border-gray-700 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Change Country"}),e.jsx("button",{onClick:()=>B(!1),className:"p-1 hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(wt,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Qs.map(ue=>e.jsx("button",{onClick:()=>He(ue.code),className:"p-3 rounded-lg transition-all text-left ".concat(P===ue.code?"bg-orange-500 border-2 border-orange-400":"bg-gray-800 border-2 border-gray-700 hover:border-orange-400 hover:bg-gray-700"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:ue.flag}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm ".concat((P===ue.code,"text-white")),children:ue.name}),e.jsx("div",{className:"text-xs ".concat(P===ue.code?"text-orange-100":"text-gray-300"),children:ue.description})]})]}),P===ue.code&&e.jsx(Ro,{className:"w-4 h-4 text-white rotate-0"})]})},ue.code))}),e.jsx("p",{className:"text-xs text-gray-400 text-center mt-4",children:"Your city selection will be cleared when changing country"})]})})]})},Td=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",children:e.jsx("path",{fill:"currentColor",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),Ad=({therapist:t,onClick:a,onIncrementAnalytics:s,userLocation:n,readOnly:i=!1,onNavigate:r,selectedCity:l,t:d,avatarOffsetPx:g=0,prefetchedMenu:m,prefetchedShareLink:x})=>{var St,Pt;const[v,j]=o.useState(()=>{try{if(t.analytics){const te=JSON.parse(t.analytics);if(te&&typeof te.bookings=="number")return te.bookings}}catch{}return 0}),[I,p]=o.useState(!1),[R,w]=o.useState(""),[P,D]=o.useState(!1),[L,O]=o.useState(!1),[H,S]=o.useState(!1),[N,k]=o.useState([]),[b,y]=o.useState(null),[T,F]=o.useState(null),{openBookingWithService:U}=Po();o.useCallback((te,ie)=>{u.debug("ðŸ  HomePageBookingSlider selection:",{type:te.id,therapist:ie.name,requiresVerification:te.requiresVerification}),(te.id==="book-now"||te.id==="scheduled")&&a(ie),s("".concat(te.id,"_bookings"))},[a,s]);const B=te=>{te.stopPropagation(),p(!0)};o.useEffect(()=>{(async()=>{try{const ie=String(t.id||t.$id||"");if(!ie)return;const Ie=await Os.getBookingsCount(ie,"therapist");j(Ie)}catch{}})()},[t]);const f=(te,ie)=>{u.debug("ðŸ’° Service selected:",{index:te,duration:ie}),y(te),F(ie)},[A,c]=o.useState(!1);o.useEffect(()=>{A||(async()=>{if(m!==void 0){if(m!=null&&m.menuData)try{const ie=JSON.parse(m.menuData);k(Array.isArray(ie)?ie:[]),c(!0),u.debug("ðŸš€ Using prefetched menu for",t.name,":",ie.length,"items")}catch(ie){u.warn("Failed to parse prefetched menu:",ie),k([]),c(!0)}else k([]),c(!0);return}try{const ie=String(t.$id||t.id);u.debug("ðŸ  Loading menu data for TherapistHomeCard:",t.name,ie);try{const Ie=await nn.getByTherapistId(ie);if(Ie!=null&&Ie.menuData){const de=JSON.parse(Ie.menuData);k(Array.isArray(de)?de:[]),c(!0),u.debug("ðŸ  Menu data loaded for",t.name,":",de.length,"items")}else k([]),c(!0)}catch{u.debug("ðŸ  Menu collection not available for",t.name,"- using default pricing"),k([]),c(!0)}}catch{k([]),c(!0)}})()},[t.$id,t.id,m,A]),o.useEffect(()=>{(async()=>{if(x!==void 0){if(x){const ie="https://www.indastreetmassage.com/share/".concat(x.shortId);w(ie),u.debug("ðŸš€ Using prefetched share link for",t.name)}else{const ie=Ks(t);w(ie)}return}try{const ie=String(t.id||t.$id||"");if(!ie)return;const Ie=await fn.getByEntity("therapist",ie);if(Ie){const de="https://www.indastreetmassage.com/share/".concat(Ie.shortId);w(de)}else{const de=Ks(t);w(de)}}catch(ie){u.error("Error generating share URL:",ie);const Ie=Ks(t);w(Ie)}})()},[t,x]);const h=(te,ie)=>{const de=te.lat*Math.PI/180,He=ie.lat*Math.PI/180,Qe=(ie.lat-te.lat)*Math.PI/180,xt=(ie.lng-te.lng)*Math.PI/180,ue=Math.sin(Qe/2)*Math.sin(Qe/2)+Math.cos(de)*Math.cos(He)*Math.sin(xt/2)*Math.sin(xt/2);return 6371e3*(2*Math.atan2(Math.sqrt(ue),Math.sqrt(1-ue)))};ce.useMemo(()=>{var de,He;if(!n)return null;let te=null;try{if(t.geopoint&&t.geopoint.lat&&t.geopoint.lng)te=t.geopoint;else if(t.coordinates)if(Array.isArray(t.coordinates))te={lat:t.coordinates[1],lng:t.coordinates[0]};else if(typeof t.coordinates=="string"){const Qe=JSON.parse(t.coordinates);Array.isArray(Qe)?te={lat:Qe[1],lng:Qe[0]}:Qe.lat&&Qe.lng&&(te=Qe)}else(de=t.coordinates)!=null&&de.lat&&((He=t.coordinates)!=null&&He.lng)&&(te=t.coordinates)}catch(Qe){u.warn("Failed to parse therapist coordinates:",Qe)}if(!te)return null;const ie=h(n,te),Ie=ie/1e3;return Ie<1?"".concat(Math.round(ie),"m away"):"".concat(Ie.toFixed(1),"km away")},[n,t.geopoint,t.coordinates]);const C=t._locationArea,E=(()=>{if(u.debug("ðŸ  TherapistHomeCard getLocationAreaDisplayName:",{therapistName:t.name,selectedCity:l,therapistLocation:t.location,therapistLocationArea:C}),t.isCustomLocation&&t.customCity){const ie=t.customCity;return t.customArea?"".concat(ie," - ").concat(t.customArea):"".concat(ie)}if(l&&l!=="all"){const ie=ln.flatMap(He=>He.cities),Ie=l.toLowerCase().trim(),de=ie.find(He=>He.locationId===Ie||He.name.toLowerCase()===Ie);if(de){if(t.serviceAreas)try{const He=JSON.parse(t.serviceAreas);if(Array.isArray(He)&&He.length>0){const Qe=He.map(xt=>xt.split("-").slice(1).map(we=>we.charAt(0).toUpperCase()+we.slice(1)).join(" ")).filter(Boolean);if(Qe.length>0)return"".concat(de.name," - ").concat(Qe.join(", "))}}catch{}return de.name}}let te="";if(!C)te=(t.location||"Bali").split(",")[0].trim();else{const Ie=ln.flatMap(de=>de.cities).find(de=>de.locationId===C);te=(Ie==null?void 0:Ie.name)||C}if(t.serviceAreas)try{const ie=JSON.parse(t.serviceAreas);if(Array.isArray(ie)&&ie.length>0){const Ie=ie.map(de=>de.split("-").slice(1).map(Qe=>Qe.charAt(0).toUpperCase()+Qe.slice(1)).join(" ")).filter(Boolean);if(Ie.length>0)return"".concat(te," - ").concat(Ie.join(", "))}}catch{}return te})(),W=Tl(N,t),_=(()=>{if(W.length>0){const ie=Rr(W);if(ie){const Ie={60:Number(ie.price60)*1e3,90:Number(ie.price90)*1e3,120:Number(ie.price120)*1e3};if(Ie[60]>0&&Ie[90]>0&&Ie[120]>0)return u.debug("ðŸ  Using lowest (combined menu) pricing for",t.name,":",Ie),Ie}}if(t.price60&&parseInt(t.price60)>0&&t.price90&&parseInt(t.price90)>0&&t.price120&&parseInt(t.price120)>0)return{60:parseInt(t.price60)*1e3,90:parseInt(t.price90)*1e3,120:parseInt(t.price120)*1e3};if(!Dl(t)){const ie=String(t.$id||t.id||"");if(ie)return _l(ie)}return{60:0,90:0,120:0}})(),q=(()=>{if(W.length>0){const te=Rr(W);if(te){const ie=te.name||te.serviceName||te.title;if(ie)return u.debug("ðŸ  Service name for ".concat(t.name,': "').concat(ie,'"')),ie}}return"Traditional Massage"})(),J=fi(t.rating,t.reviewCount),Z=J>0?J:4.8,me=bi(Z),Fe=te=>te>=1e6?"".concat((te/1e6).toFixed(1),"M"):te>=1e3?"".concat((te/1e3).toFixed(0),"K"):te.toLocaleString("id-ID"),re=String(t.availability||t.status||"Busy")==="Available"?{bg:"bg-green-100",text:"text-green-700",dot:"bg-green-500",label:"Available",isAvailable:!0}:{bg:"bg-orange-100",text:"text-orange-700",dot:"bg-orange-500",label:"Busy",isAvailable:!1},Oe=te=>{let ie=0;for(let Ie=0;Ie<te.length;Ie++)ie=(ie<<5)-ie+te.charCodeAt(Ie),ie=ie&ie;return 23+Math.abs(ie)%18},Le=t.membershipStartDate||t.activeMembershipDate||t.$createdAt,De=(()=>{if(!Le)return"â€”";try{const te=new Date(Le);return isNaN(te.getTime())?"â€”":te.toLocaleDateString("en-GB")}catch{return"â€”"}})(),ht=v===0?Oe(String(t.id||t.$id||"")):v;return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[e.jsxs("span",{className:"text-[11px] text-gray-600 font-medium flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),De]}),i&&e.jsxs("span",{className:"text-[11px] text-gray-500 font-medium flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Read Only"]})]}),e.jsxs("div",{onClick:i?void 0:()=>{a(t),s("views")},className:"bg-white rounded-2xl overflow-visible border border-gray-200 transition-all duration-300 ".concat(i?"cursor-default":"cursor-pointer hover:shadow-xl"," group ").concat(i?"opacity-90":""," relative"),children:[e.jsxs("div",{className:"relative h-56 overflow-visible bg-transparent rounded-t-2xl",style:{minHeight:"224px"},children:[e.jsx("img",{src:Io(t),alt:ts(t.name),className:"w-full h-full object-cover transition-transform duration-500 rounded-t-2xl",style:{aspectRatio:"400/224",minHeight:"224px"},loading:"lazy",width:"400",height:"224",onError:te=>{te.target.src="/default-avatar.jpg"}}),e.jsxs("div",{className:"absolute top-3 left-3 shadow-lg flex items-center gap-1.5 bg-black/70 backdrop-blur-sm rounded-full px-3 py-1.5",children:[e.jsx(Td,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-bold text-white",children:me})]}),ht>0&&e.jsxs("div",{className:"absolute top-3 right-3 bg-black/70 backdrop-blur-sm text-white text-[11px] font-bold px-3 py-1.5 rounded-full shadow-lg",children:[ht,"+ Orders"]}),yi(t)&&e.jsx("div",{className:"absolute bottom-3 left-1/2 transform -translate-x-1/2 px-3 py-1 rounded-full bg-gradient-to-r from-orange-500 to-red-500 backdrop-blur-sm animate-pulse",children:e.jsx("span",{className:"text-xs font-bold text-white flex items-center gap-1",children:"ðŸ”¥ Discount Active"})}),e.jsx("button",{onClick:te=>{te.stopPropagation(),B(te)},className:"absolute bottom-3 right-3 bg-black/50 backdrop-blur-sm text-white p-2 rounded-full hover:bg-black/70 transition-all z-10",title:"Share this therapist","aria-label":"Share this therapist",children:e.jsx(yn,{className:"w-4 h-4 text-white",strokeWidth:2.5,"aria-hidden":!0})})]}),e.jsxs("div",{className:"px-4 mt-3 flex flex-col items-end",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-black font-medium",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),E]}),e.jsxs("div",{className:"text-xs text-orange-500 mt-1 font-medium",children:["Serves ",E," area"]})]}),e.jsx("div",{className:"px-4 -mt-[115px] pb-4 relative z-30 overflow-visible pointer-events-none",children:e.jsx("div",{className:"flex items-start gap-3",children:e.jsx("div",{className:"flex-shrink-0 relative z-30",children:e.jsx("div",{className:"w-[100px] h-[100px] sm:w-[110px] sm:h-[110px] md:w-[120px] md:h-[120px] rounded-full overflow-hidden relative",children:e.jsx("img",{className:"w-full h-full object-cover pointer-events-auto border-4 border-white rounded-full",src:t.profilePicture||"/default-avatar.jpg",alt:"".concat(ts(t.name)," profile"),style:{aspectRatio:"1/1"},loading:"lazy",onError:te=>{te.target.src="/default-avatar.jpg"}})})})})}),e.jsx("div",{className:"px-4 mt-[2px] mb-3 relative z-40",children:e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("div",{className:"mb-2 ml-[75px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[(t.verifiedBadge||t.isVerified||t.hotelVillaSafePassStatus==="active")&&e.jsx("img",{src:As,alt:"Verified",className:"w-5 h-5 flex-shrink-0",title:"Verified Therapist"}),(()=>{const te=String(t.clientPreferences||t.clientPreference||"").toLowerCase(),ie=String(t.therapistGender||"").toLowerCase();return(te.includes("female")||te.includes("woman")||te.includes("wanita")||ie==="female"||ie==="unisex")&&e.jsxs("span",{className:"px-2 py-0.5 bg-pink-100 text-pink-700 text-[10px] font-semibold rounded-full flex items-center gap-1",title:"Preferred by Women Clients",children:[e.jsx("span",{children:"ðŸ‘©â€âš•ï¸"}),e.jsx("span",{children:"Women-Friendly"})]})})(),e.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{const te=t.verifiedBadge||t.isVerified,ie=t.bankName&&t.accountName&&t.accountNumber,Ie=t.ktpPhotoUrl;return(te||ie&&Ie)&&e.jsx("img",{src:As,alt:"Verified",className:"w-5 h-5 flex-shrink-0",title:"Verified Therapist - Complete Profile"})})(),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:ts(t.name)})]})]})}),e.jsx("div",{className:"overflow-visible flex justify-start ml-[75px]",children:e.jsxs("div",{className:"inline-flex items-center px-2.5 rounded-full font-medium whitespace-nowrap ".concat(re.bg," ").concat(re.text),style:{paddingTop:"0px",paddingBottom:"0px",lineHeight:"1",fontSize:"10px",transform:"scaleY(0.9)"},children:[e.jsxs("span",{className:"relative inline-flex mr-1.5",style:{width:"32px",height:"32px",minWidth:"32px",minHeight:"32px"},children:[e.jsx("span",{className:"absolute rounded-full ".concat(re.dot," ").concat(re.isAvailable?"":"animate-pulse"," z-10"),style:{width:"8px",height:"8px",left:"12px",top:"12px"}},"".concat(t.$id||t.id,"-dot")),re.isAvailable&&e.jsxs(ce.Fragment,{children:[e.jsx("span",{className:"absolute rounded-full bg-green-400 opacity-75 animate-ping",style:{width:"20px",height:"20px",left:"6px",top:"6px"}},"".concat(t.$id||t.id,"-ring1")),e.jsx("span",{className:"absolute rounded-full bg-green-300 opacity-50 animate-ping",style:{width:"28px",height:"28px",left:"2px",top:"2px",animationDuration:"1.5s"}},"".concat(t.$id||t.id,"-ring2"))]},"".concat(t.$id||t.id,"-rings"))]}),e.jsx("span",{className:"text-xs",children:re.label})]})})]})}),e.jsx("div",{className:"mx-4 mb-7",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-xs text-gray-600 flex-shrink-0",children:[e.jsx("span",{className:"font-bold",children:"Menerima:"})," ",t.clientPreference||"Pria / Wanita"]}),t.hotelVillaSafePassStatus==="active"&&e.jsx("button",{onClick:te=>{te.stopPropagation(),S(!0)},className:"p-0 bg-transparent hover:opacity-80 transition-opacity duration-200",title:"View SafePass Certificate",children:e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/hotel%205.png?updatedAt=1770362023320",alt:"SafePass",className:"w-14 h-14 object-contain",loading:"lazy",decoding:"async"})})]})}),t.description&&e.jsx("div",{className:"mx-4 mb-3",children:e.jsx("p",{className:"text-sm text-gray-700 leading-5 break-words whitespace-normal line-clamp-2 text-left",children:t.description})}),_[60]>0&&_[90]>0&&_[120]>0&&e.jsxs("div",{className:"mx-4 mb-4",children:[e.jsx("h3",{className:"text-gray-800 font-bold text-sm tracking-wide text-center mb-2",children:q}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-sm",children:[e.jsxs("div",{className:"bg-gray-100 border border-gray-200 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-gray-600 text-xs mb-1 font-medium",children:"60 min"}),e.jsxs("p",{className:"font-bold text-slate-900 text-sm",children:["IDR ",Fe(_[60])]}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1",children:"Basic"})]}),e.jsxs("div",{className:"bg-gray-100 border border-gray-200 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-gray-600 text-xs mb-1 font-medium",children:"90 min"}),e.jsxs("p",{className:"font-bold text-slate-900 text-sm",children:["IDR ",Fe(_[90])]}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1",children:"Premium"})]}),e.jsxs("div",{className:"bg-gray-100 border border-gray-200 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-gray-600 text-xs mb-1 font-medium",children:"120 min"}),e.jsxs("p",{className:"font-bold text-slate-900 text-sm",children:["IDR ",Fe(_[120])]}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1",children:"Luxury"})]})]})]}),e.jsx("div",{className:"px-4 pb-4",children:e.jsx("button",{onClick:()=>a(t),disabled:i,className:"w-full py-3 font-semibold rounded-lg transition-all ".concat(i?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg"),children:i?((St=d==null?void 0:d.home)==null?void 0:St.viewOnly)||"View Only":((Pt=d==null?void 0:d.home)==null?void 0:Pt.viewProfile)||"View Profile"})})]}),I&&e.jsx(wi,{isOpen:I,onClose:()=>p(!1),title:ts(t.name),description:"Professional massage therapist in Bali",url:R||Ks(t),type:"therapist"}),e.jsx(Al,{isOpen:P,onClose:()=>D(!1),onNavigate:r}),e.jsx(El,{showPriceListModal:L,setShowPriceListModal:O,therapist:t,displayRating:me,arrivalCountdown:"60",formatCountdown:te=>te,menuData:N,selectedServiceIndex:b,selectedDuration:T,handleSelectService:f,setSelectedServiceIndex:y,setSelectedDuration:F,openBookingWithService:U,chatLang:(d==null?void 0:d.locale)||"id",showBookingButtons:!1}),e.jsx(Co,{isOpen:H,onClose:()=>S(!1),therapist:t})]})},Va=class Va{constructor(){Se(this,"isLoaded",!1);Se(this,"apiKey",null);this.apiKey=To()}static getInstance(){return Va.instance||(Va.instance=new Va),Va.instance}async initializeGoogleMaps(){return this.isLoaded?!0:this.apiKey?new Promise(a=>{Ll(this.apiKey,()=>{this.isLoaded=!0,a(!0)},()=>{a(!1)})}):!1}async calculateDistanceWithGoogleMaps(a,s,n="DRIVING"){var r,l,d;return!await this.initializeGoogleMaps()||!((r=window.google)!=null&&r.maps)||!((d=(l=window.google)==null?void 0:l.maps)!=null&&d.DistanceMatrixService)?this.calculateHaversineDistance(a,s):new Promise(g=>{try{new window.google.maps.DistanceMatrixService().getDistanceMatrix({origins:[new window.google.maps.LatLng(a.lat,a.lng)],destinations:[new window.google.maps.LatLng(s.lat,s.lng)],travelMode:window.google.maps.TravelMode[n],unitSystem:window.google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},(x,v)=>{if(v==="OK"&&x.rows[0].elements[0].status==="OK"){const j=x.rows[0].elements[0];g({distance:j.distance.value/1e3,duration:j.duration.value/60,distanceText:j.distance.text,durationText:j.duration.text})}else g(this.calculateHaversineDistance(a,s))})}catch{g(this.calculateHaversineDistance(a,s))}})}calculateHaversineDistance(a,s){const i=(s.lat-a.lat)*Math.PI/180,r=(s.lng-a.lng)*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(a.lat*Math.PI/180)*Math.cos(s.lat*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2),g=6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)));return{distance:g,distanceText:"".concat(g.toFixed(1)," km"),durationText:"~".concat(Math.round(g*3)," mins")}}async getDistance(a,s){try{return await this.calculateDistanceWithGoogleMaps(a,s)}catch{return this.calculateHaversineDistance(a,s)}}async getMultipleDistances(a,s){var i;return!await this.initializeGoogleMaps()||!((i=window.google)!=null&&i.maps)||s.length>25?s.map(r=>this.calculateHaversineDistance(a,r)):new Promise(r=>{new window.google.maps.DistanceMatrixService().getDistanceMatrix({origins:[new window.google.maps.LatLng(a.lat,a.lng)],destinations:s.map(d=>new window.google.maps.LatLng(d.lat,d.lng)),travelMode:window.google.maps.TravelMode.DRIVING,unitSystem:window.google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},(d,g)=>{if(g==="OK"){const m=d.rows[0].elements.map((x,v)=>x.status==="OK"?{distance:x.distance.value/1e3,duration:x.duration.value/60,distanceText:x.distance.text,durationText:x.duration.text}:this.calculateHaversineDistance(a,s[v]));r(m)}else r(s.map(m=>this.calculateHaversineDistance(a,m)))})})}async isGoogleMapsAvailable(){return await this.initializeGoogleMaps()}updateApiKey(a){this.apiKey=a,this.isLoaded=!1}};Se(Va,"instance");let oi=Va;const Ed=oi.getInstance(),ks={async getDistanceWithTravelTime(t,a){return await Ed.getDistance(t,a)},formatDistance(t){return"".concat(t.toFixed(1)," km")},formatTravelTime(t){if(t<60)return"".concat(Math.round(t)," mins");const a=Math.floor(t/60),s=Math.round(t%60);return"".concat(a,"h ").concat(s,"m")},isWithinRadius(t,a){return t<=a},getTravelModeIcon(t="DRIVING"){switch(t){case"DRIVING":return"ðŸš—";case"WALKING":return"ðŸš¶";case"TRANSIT":return"ðŸšŒ";default:return"ðŸ“"}}},Jo=({userLocation:t,providerLocation:a,className:s="",showTravelTime:n=!0,showIcon:i=!0,mode:r="DRIVING",size:l="md"})=>{const[d,g]=o.useState(""),[m,x]=o.useState(""),[v,j]=o.useState(!1),[I,p]=o.useState(!1);if(o.useEffect(()=>{(async()=>{if(!t||!a){g(""),x("");return}j(!0),p(!1);try{const D=await ks.getDistanceWithTravelTime(t,a);g(D.distanceText||ks.formatDistance(D.distance)),n&&D.duration&&x(D.durationText||ks.formatTravelTime(D.duration))}catch(D){logger.error("Error calculating distance:",D),p(!0),g("Distance unavailable"),x("")}finally{j(!1)}})()},[t,a,n,r]),!t||I)return null;const R=()=>{switch(l){case"sm":return"text-xs";case"lg":return"text-base";default:return"text-sm"}},w=()=>{switch(l){case"sm":return"w-3 h-3";case"lg":return"w-5 h-5";default:return"w-4 h-4"}};return e.jsxs("div",{className:"flex items-center gap-1 text-gray-600 ".concat(R()," ").concat(s),children:[i&&e.jsxs("svg",{className:"".concat(w()," text-red-500"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),v?e.jsx("span",{className:"text-gray-400",children:"Calculating..."}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium text-gray-700",children:d}),n&&m&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-400",children:"â€¢"}),e.jsx("span",{className:"text-gray-600",children:m}),i&&e.jsx("span",{className:"ml-1",children:ks.getTravelModeIcon(r)})]})]})]})},Dd=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",children:e.jsx("path",{fill:"currentColor",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),_d=({place:t,onClick:a,onIncrementAnalytics:s,userLocation:n,readOnly:i=!1})=>{const[r,l]=o.useState(()=>{try{if(t.analytics){const y=JSON.parse(t.analytics);if(y&&typeof y.bookings=="number")return y.bookings}}catch{}return 0}),[d,g]=o.useState(!1),[m,x]=o.useState(""),[v,j]=o.useState(!1),I=y=>{y.stopPropagation(),g(!0)};o.useEffect(()=>{(async()=>{try{const T=String(t.id||t.$id||"");if(!T)return;const F=await Os.getBookingsCount(T,"place");l(F)}catch(T){u.error("Failed to load bookings count:",T)}})()},[t]),o.useEffect(()=>{(async()=>{var T,F;try{const U=String(t.id||t.$id||"");if(!U)return;const B=await fn.getByEntity("place",U);if(B){const f="https://www.indastreetmassage.com/share/".concat(B.shortId);x(f)}else{const f="https://www.indastreetmassage.com/place/".concat((T=t.name)==null?void 0:T.replace(/\\s+/g,"-").toLowerCase());x(f)}}catch(U){u.error("Error generating share URL:",U);const B="https://www.indastreetmassage.com/place/".concat((F=t.name)==null?void 0:F.replace(/\\s+/g,"-").toLowerCase());x(B)}})()},[t]);const R=t.price60&&parseInt(t.price60)>0||t.price90&&parseInt(t.price90)>0||t.price120&&parseInt(t.price120)>0?{60:t.price60?parseInt(t.price60)*1e3:0,90:t.price90?parseInt(t.price90)*1e3:0,120:t.price120?parseInt(t.price120)*1e3:0}:{60:0,90:0,120:0},w=fi(t.rating,t.reviewCount),P=w>0?w:4.8,D=bi(P),L=y=>y>=1e6?"".concat((y/1e6).toFixed(1),"M"):y>=1e3?"".concat((y/1e3).toFixed(0),"K"):y.toLocaleString("id-ID"),H=(()=>{const y=String(t.availability||t.status||"Open");return y==="Open"||y==="Available"?{bg:"bg-green-100",text:"text-green-700",dot:"bg-green-500",label:"Open"}:y==="Busy"?{bg:"bg-orange-100",text:"text-orange-700",dot:"bg-orange-500",label:"Busy"}:{bg:"bg-red-100",text:"text-red-700",dot:"bg-red-500",label:"Closed"}})(),S=y=>{let T=0;for(let F=0;F<y.length;F++)T=(T<<5)-T+y.charCodeAt(F),T=T&T;return 35+Math.abs(T)%31},N=t.membershipStartDate||t.activeMembershipDate||t.$createdAt,k=(()=>{if(!N)return"â€”";try{const y=new Date(N);return isNaN(y.getTime())?"â€”":y.toLocaleDateString("en-GB")}catch{return"â€”"}})(),b=r===0?S(String(t.id||t.$id||"")):r;return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[e.jsxs("span",{className:"text-[11px] text-gray-600 font-medium flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),k]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!i&&e.jsx("span",{className:"text-[11px] text-green-600 font-semibold",children:"Massage Spa Join Free"}),i&&e.jsx("span",{className:"text-[11px] text-gray-500 font-medium bg-gray-200 px-2 py-0.5 rounded-full",children:"Read Only"})]})]}),e.jsxs("div",{onClick:i?void 0:()=>{a(t),s("views")},className:"bg-white rounded-2xl overflow-hidden border border-gray-200 transition-all duration-300 ".concat(i?"cursor-default":"cursor-pointer hover:shadow-xl"," group ").concat(i?"opacity-90":""),children:[e.jsxs("div",{className:"relative h-48 sm:h-56 overflow-hidden",children:[e.jsx("img",{src:t.mainImage||t.profilePicture||t.image||"/default-place.jpg",alt:t.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",onError:y=>{y.target.src="/default-place.jpg"}}),e.jsxs("div",{className:"absolute top-3 left-3 shadow-lg flex items-center gap-1.5 bg-black/70 backdrop-blur-sm rounded-full px-3 py-1.5",children:[e.jsx(Dd,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-bold text-white",children:D})]}),b>0&&e.jsxs("div",{className:"absolute top-3 right-3 bg-black/70 backdrop-blur-sm text-white text-[11px] font-bold px-3 py-1.5 rounded-full shadow-lg",children:[b,"+ Orders"]}),yi(t)&&e.jsx("div",{className:"absolute bottom-3 left-1/2 transform -translate-x-1/2 px-3 py-1 rounded-full bg-gradient-to-r from-orange-500 to-amber-500 backdrop-blur-sm animate-pulse",children:e.jsx("span",{className:"text-xs font-bold text-white flex items-center gap-1",children:"ðŸ”¥ Discount Active"})}),!i&&e.jsx("button",{onClick:I,className:"absolute bottom-2 right-2 w-11 h-11 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 rounded-full flex items-center justify-center shadow-lg hover:scale-110 transition-all z-30",title:"Share this place","aria-label":"Share profile",style:{minWidth:"44px",minHeight:"44px"},children:e.jsx(yn,{className:"w-5 h-5 text-white",color:"white",strokeWidth:2.5})})]}),e.jsx("div",{className:"px-4 mt-2 mb-1 flex justify-end",children:e.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("svg",{className:"w-3.5 h-3.5 text-red-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:(t.location||"Bali").split(",")[0].trim()})]}),n&&e.jsx("div",{className:"text-xs text-orange-500 font-medium",children:e.jsx(Jo,{userLocation:n,targetLocation:{lat:parseFloat(String(t.lat||t.latitude||0)),lng:parseFloat(String(t.lng||t.longitude||0))},className:"text-xs text-orange-500 font-medium"})})]})}),e.jsx("div",{className:"px-4 -mt-10 sm:-mt-16 pb-4 relative z-20 overflow-visible",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 relative z-20",children:e.jsx("div",{className:"w-24 h-24 bg-white rounded-full p-1 relative aspect-square ring-2 ring-orange-100 overflow-visible",children:e.jsx("img",{className:"w-full h-full rounded-full object-cover aspect-square",src:t.profilePicture||t.mainImage||t.image||"/default-place.jpg",alt:t.name,loading:"lazy",width:"96",height:"96",onError:y=>{y.target.src="/default-place.jpg"}})})}),e.jsxs("div",{className:"flex-1 pt-12 sm:pt-14 pb-3 overflow-visible",children:[e.jsx("div",{className:"mb-1",children:e.jsx("div",{className:"flex items-center justify-between gap-2 mb-1",children:e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(()=>{const y=t.verifiedBadge||t.isVerified,T=t.bankName&&t.accountName&&t.accountNumber,F=t.ktpPhotoUrl;return(y||T&&F)&&e.jsx("img",{src:As,alt:"Verified",className:"w-5 h-5 flex-shrink-0",title:"Verified Place - Complete Profile"})})(),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 truncate",children:t.name||"Massage Place"})]})})}),e.jsx("div",{className:"overflow-visible",children:e.jsxs("div",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium whitespace-nowrap ".concat(H.bg," ").concat(H.text),children:[e.jsx("span",{className:"w-2 h-2 rounded-full ".concat(H.dot," animate-pulse mr-1.5")}),e.jsx("span",{className:"text-xs",children:H.label})]})})]})]})}),e.jsx("div",{className:"mx-4 mb-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-xs text-gray-600 flex-shrink-0",children:[e.jsx("span",{className:"font-bold",children:"Area of Service:"})," ",t.services||"All Massage Types"]}),t.hotelVillaSafePassStatus==="active"&&e.jsx("button",{onClick:y=>{y.stopPropagation(),j(!0)},className:"p-0 bg-transparent hover:opacity-80 transition-opacity duration-200 ml-2",title:"View SafePass Certificate",children:e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/hotel%205.png?updatedAt=1770362023320",alt:"SafePass",className:"w-14 h-14 object-contain",loading:"lazy",decoding:"async"})}),(()=>{const y=t.languages,T=y?typeof y=="string"?y.split(",").map(U=>U.trim()):y:[];if(u.debug("ðŸ  MassagePlaceHomeCard languages debug:",{placeName:t.name,languagesValue:y,parsedLanguages:T,languagesType:typeof y}),!T||!Array.isArray(T)||T.length===0)return e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("span",{className:"px-2 py-0.5 bg-blue-50 border border-blue-200 text-gray-800 text-xs font-medium rounded-full flex items-center gap-1",children:[e.jsx("span",{className:"text-sm",style:{fontFamily:'"Segoe UI Emoji", "Noto Color Emoji", "Apple Color Emoji", sans-serif',fontSize:"14px",lineHeight:"1"},children:"ðŸ‡®ðŸ‡©"}),e.jsx("span",{className:"text-xs font-semibold",children:"ID"})]}),e.jsxs("span",{className:"px-2 py-0.5 bg-blue-50 border border-blue-200 text-gray-800 text-xs font-medium rounded-full flex items-center gap-1",children:[e.jsx("span",{className:"text-sm",style:{fontFamily:'"Segoe UI Emoji", "Noto Color Emoji", "Apple Color Emoji", sans-serif',fontSize:"14px",lineHeight:"1"},children:"ðŸ‡¬ðŸ‡§"}),e.jsx("span",{className:"text-xs font-semibold",children:"EN"})]})]});const F={english:{flag:"ðŸ‡¬ðŸ‡§",name:"EN",flagClass:"fi fi-gb"},indonesian:{flag:"ðŸ‡®ðŸ‡©",name:"ID",flagClass:"fi fi-id"},mandarin:{flag:"ðŸ‡¨ðŸ‡³",name:"ZH",flagClass:"fi fi-cn"},japanese:{flag:"ðŸ‡¯ðŸ‡µ",name:"JP",flagClass:"fi fi-jp"},korean:{flag:"ðŸ‡°ðŸ‡·",name:"KR",flagClass:"fi fi-kr"},thai:{flag:"ðŸ‡¹ðŸ‡­",name:"TH",flagClass:"fi fi-th"},vietnamese:{flag:"ðŸ‡»ðŸ‡³",name:"VI",flagClass:"fi fi-vn"},french:{flag:"ðŸ‡«ðŸ‡·",name:"FR",flagClass:"fi fi-fr"},german:{flag:"ðŸ‡©ðŸ‡ª",name:"DE",flagClass:"fi fi-de"},spanish:{flag:"ðŸ‡ªðŸ‡¸",name:"ES",flagClass:"fi fi-es"},portuguese:{flag:"ðŸ‡µðŸ‡¹",name:"PT",flagClass:"fi fi-pt"},italian:{flag:"ðŸ‡®ðŸ‡¹",name:"IT",flagClass:"fi fi-it"},russian:{flag:"ðŸ‡·ðŸ‡º",name:"RU",flagClass:"fi fi-ru"},arabic:{flag:"ðŸ‡¸ðŸ‡¦",name:"AR",flagClass:"fi fi-sa"},hindi:{flag:"ðŸ‡®ðŸ‡³",name:"HI",flagClass:"fi fi-in"},en:{flag:"ðŸ‡¬ðŸ‡§",name:"EN",flagClass:"fi fi-gb"},id:{flag:"ðŸ‡®ðŸ‡©",name:"ID",flagClass:"fi fi-id"},zh:{flag:"ðŸ‡¨ðŸ‡³",name:"ZH",flagClass:"fi fi-cn"},ja:{flag:"ðŸ‡¯ðŸ‡µ",name:"JP",flagClass:"fi fi-jp"},ko:{flag:"ðŸ‡°ðŸ‡·",name:"KR",flagClass:"fi fi-kr"},th:{flag:"ðŸ‡¹ðŸ‡­",name:"TH",flagClass:"fi fi-th"},vi:{flag:"ðŸ‡»ðŸ‡³",name:"VI",flagClass:"fi fi-vn"},fr:{flag:"ðŸ‡«ðŸ‡·",name:"FR",flagClass:"fi fi-fr"},de:{flag:"ðŸ‡©ðŸ‡ª",name:"DE",flagClass:"fi fi-de"},es:{flag:"ðŸ‡ªðŸ‡¸",name:"ES",flagClass:"fi fi-es"},pt:{flag:"ðŸ‡µðŸ‡¹",name:"PT",flagClass:"fi fi-pt"},it:{flag:"ðŸ‡®ðŸ‡¹",name:"IT",flagClass:"fi fi-it"},ru:{flag:"ðŸ‡·ðŸ‡º",name:"RU",flagClass:"fi fi-ru"},ar:{flag:"ðŸ‡¸ðŸ‡¦",name:"AR",flagClass:"fi fi-sa"},hi:{flag:"ðŸ‡®ðŸ‡³",name:"HI",flagClass:"fi fi-in"}};return e.jsx("div",{className:"flex items-center gap-1",children:T.slice(0,2).map((U,B,f)=>{const A=U.toLowerCase(),c=F[A]||{flag:"ðŸ‡®ðŸ‡©",name:"ID"};return f.slice(0,B).some(C=>{const M=C.toLowerCase();return(F[M]||{name:"ID"}).name===c.name})?null:e.jsxs("span",{className:"px-2 py-0.5 bg-blue-50 border border-blue-200 text-gray-800 text-xs font-medium rounded-full flex items-center gap-1",children:[e.jsx("span",{className:"text-sm",style:{fontFamily:'"Segoe UI Emoji", "Noto Color Emoji", "Apple Color Emoji", sans-serif',fontSize:"14px",lineHeight:"1"},children:c.flag}),e.jsx("span",{className:"text-xs font-semibold",children:c.name})]},U)})})})()]})}),t.description&&e.jsx("div",{className:"mx-4 mb-3",children:e.jsx("p",{className:"text-sm text-gray-700 leading-5 break-words whitespace-normal line-clamp-2 text-left",children:t.description})}),e.jsxs("div",{className:"px-4 pb-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-200 rounded-lg min-w-0",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"60 min"}),e.jsx("div",{className:"text-xs sm:text-sm font-bold text-gray-900 break-words",children:R[60]>0?"IDR ".concat(L(R[60])):"Contact"})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-200 rounded-lg min-w-0",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"90 min"}),e.jsx("div",{className:"text-xs sm:text-sm font-bold text-gray-900 break-words",children:R[90]>0?"IDR ".concat(L(R[90])):"Contact"})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-200 rounded-lg min-w-0",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"120 min"}),e.jsx("div",{className:"text-xs sm:text-sm font-bold text-gray-900 break-words",children:R[120]>0?"IDR ".concat(L(R[120])):"Contact"})]})]}),e.jsx("button",{onClick:y=>{y.stopPropagation(),u.debug("ðŸ”µ MASSAGE PLACE VIEW PROFILE CLICKED:",{placeId:t.id||t.$id,placeName:t.name,readOnly:i}),i||(a(t),s("views"))},disabled:i,className:"w-full py-2.5 font-semibold rounded-lg transition-all ".concat(i?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700"),children:i?"View Only":"View Profile"})]})]}),d&&e.jsx(wi,{isOpen:d,onClose:()=>g(!1),title:t.name,description:t.description||"Professional massage services",url:m,type:"place"}),e.jsx(Co,{isOpen:v,onClose:()=>j(!1),therapist:t})]})},Ld=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",children:e.jsx("path",{fill:"currentColor",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),Rd=({place:t,onClick:a,onIncrementAnalytics:s,userLocation:n})=>{const[i,r]=o.useState(()=>{try{if(t.analytics){const N=JSON.parse(t.analytics);if(N&&typeof N.bookings=="number")return N.bookings}}catch{}return 0}),[l,d]=o.useState(!1),[g,m]=o.useState(""),x=N=>{N.stopPropagation(),d(!0)};o.useEffect(()=>{(async()=>{try{const k=String(t.id||t.$id||"");if(!k)return;const b=await Os.getBookingsCount(k,"place");r(b)}catch{}})()},[t]),o.useEffect(()=>{(async()=>{var k,b;try{const y=String(t.id||t.$id||"");if(!y)return;const T=await fn.getByEntity("facial",y);if(T){const F="https://www.indastreetmassage.com/share/".concat(T.shortId);m(F)}else{const F="https://www.indastreetmassage.com/facial/".concat((k=t.name)==null?void 0:k.replace(/\\s+/g,"-").toLowerCase());m(F)}}catch(y){u.error("Error generating share URL:",y);const T="https://www.indastreetmassage.com/facial/".concat((b=t.name)==null?void 0:b.replace(/\\s+/g,"-").toLowerCase());m(T)}})()},[t]);const j=t.price60&&parseInt(t.price60)>0||t.price90&&parseInt(t.price90)>0||t.price120&&parseInt(t.price120)>0?{60:t.price60?parseInt(t.price60)*1e3:0,90:t.price90?parseInt(t.price90)*1e3:0,120:t.price120?parseInt(t.price120)*1e3:0}:{60:0,90:0,120:0},I=fi(t.rating,t.reviewCount),p=I>0?I:4.9,R=bi(p),w=N=>N>=1e6?"".concat((N/1e6).toFixed(1),"M"):N>=1e3?"".concat((N/1e3).toFixed(0),"K"):N.toLocaleString("id-ID"),D=(()=>{const N=String(t.availability||t.status||"Busy").trim(),k=N.toLowerCase();return N==="Available"||k==="available"?{bg:"bg-green-100",text:"text-green-700",dot:"bg-green-500",label:"Available",isAvailable:!0}:{bg:"bg-orange-100",text:"text-orange-700",dot:"bg-orange-500",label:"Busy",isAvailable:!1}})(),L=N=>{let k=0;for(let b=0;b<N.length;b++)k=(k<<5)-k+N.charCodeAt(b),k=k&k;return 25+Math.abs(k)%31},O=t.membershipStartDate||t.activeMembershipDate||t.$createdAt,H=(()=>{if(!O)return"â€”";try{const N=new Date(O);return isNaN(N.getTime())?"â€”":N.toLocaleDateString("en-GB")}catch{return"â€”"}})(),S=i===0?L(String(t.id||t.$id||"")):i;return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[e.jsxs("span",{className:"text-[11px] text-gray-600 font-medium flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),H]}),e.jsxs("span",{className:"text-[11px] text-pink-600 font-semibold flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),"Beauty Portal"]})]}),e.jsxs("div",{onClick:()=>{typeof a=="function"&&(a(t),s("views"))},className:"bg-white rounded-2xl overflow-visible border border-slate-200 hover:border-orange-200 hover:shadow-xl transition-all duration-300 cursor-pointer group",children:[e.jsxs("div",{className:"relative h-56 overflow-visible bg-transparent rounded-t-2xl",style:{minHeight:"224px"},children:[e.jsx("img",{src:t.mainImage||t.profilePicture||t.image||"https://ik.imagekit.io/7grri5v7d/facial%202.png",alt:t.name||"Facial Clinic",className:"w-full h-full object-cover transition-transform duration-300 rounded-t-2xl group-hover:scale-105",style:{aspectRatio:"400/224",minHeight:"224px"},onError:N=>{N.target.src="https://ik.imagekit.io/7grri5v7d/facial%202.png"}}),e.jsxs("div",{className:"absolute top-3 left-3 shadow-lg flex items-center gap-1.5 bg-black/70 backdrop-blur-sm rounded-full px-3 py-1.5",children:[e.jsx(Ld,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-bold text-white",children:R})]}),e.jsxs("div",{className:"absolute top-3 right-3 bg-black/70 backdrop-blur-sm text-white text-[11px] font-bold px-3 py-1.5 rounded-full shadow-lg",children:[S,"+ ",S===1?"treatment":"treatments"]}),e.jsx("button",{onClick:N=>{N.stopPropagation(),x(N)},className:"absolute bottom-3 right-3 bg-black/50 backdrop-blur-sm text-white p-2 rounded-full hover:bg-black/70 transition-all z-10",title:"Share this clinic","aria-label":"Share this clinic",children:e.jsx(yn,{className:"w-4 h-4 text-white",strokeWidth:2.5,"aria-hidden":!0})}),yi(t)&&e.jsx("div",{className:"absolute bottom-3 left-1/2 transform -translate-x-1/2 px-3 py-1 rounded-full bg-gradient-to-r from-orange-500 to-red-500 backdrop-blur-sm animate-pulse",children:e.jsxs("span",{className:"text-xs font-bold text-white",children:[t.discountPercentage,"% OFF"]})}),e.jsx("div",{className:"absolute bottom-3 left-3 bg-orange-500/90 text-white px-2.5 py-1 rounded-lg text-xs font-semibold shadow-md",children:"Facial â€¢ Skin clinic"})]}),e.jsxs("div",{className:"px-4 mt-3 flex flex-col items-end",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-black font-medium",children:[e.jsx("svg",{className:"w-3 h-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),e.jsx("span",{className:"truncate max-w-[200px] sm:max-w-none",children:t.address||t.location||t.city||"Clinic location"})]}),e.jsx("div",{className:"text-xs text-orange-500 mt-1 font-medium",children:t.city?"Serves ".concat(t.city," area"):t.address||t.location?"Serves ".concat((t.address||t.location||"").split(",")[0].trim()||"this"," area"):"View profile for location"})]}),e.jsx("div",{className:"px-4 -mt-[115px] pb-4 relative z-30 overflow-visible pointer-events-none",children:e.jsx("div",{className:"flex items-start gap-3",children:e.jsx("div",{className:"flex-shrink-0 relative z-30",children:e.jsx("div",{className:"w-[100px] h-[100px] sm:w-[110px] sm:h-[110px] md:w-[120px] md:h-[120px] rounded-full overflow-hidden relative",children:e.jsx("img",{className:"w-full h-full object-cover pointer-events-auto border-4 border-white rounded-full",src:t.mainImage||t.profilePicture||t.image||"https://ik.imagekit.io/7grri5v7d/facial%202.png",alt:t.name||"Clinic",loading:"lazy",onError:N=>{N.target.src="https://ik.imagekit.io/7grri5v7d/facial%202.png"}})})})})}),e.jsxs("div",{className:"px-4 mt-[2px] mb-3 relative z-40",children:[e.jsx("div",{className:"mb-2 ml-[75px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{const N=t.verifiedBadge||t.isVerified,k=t.bankName&&t.accountName&&t.accountNumber,b=t.ktpPhotoUrl;return(N||k&&b)&&e.jsx("img",{src:As,alt:"Verified",className:"w-5 h-5 flex-shrink-0",title:"Verified Place - Complete Profile"})})(),e.jsx("h3",{className:"text-lg font-bold text-gray-900 truncate",children:t.name||"Facial Clinic"})]})}),e.jsx("div",{className:"overflow-visible flex justify-start ml-[75px]",children:e.jsxs("div",{className:"inline-flex items-center px-2.5 rounded-full font-medium whitespace-nowrap ".concat(D.bg," ").concat(D.text),style:{paddingTop:"0px",paddingBottom:"0px",lineHeight:"1",fontSize:"10px",transform:"scaleY(0.9)"},children:[e.jsxs("span",{className:"relative inline-flex mr-1.5",style:{width:"32px",height:"32px",minWidth:"32px",minHeight:"32px"},children:[e.jsx("span",{className:"absolute rounded-full ".concat(D.dot," ").concat(D.isAvailable?"":"animate-pulse"," z-10"),style:{width:"8px",height:"8px",left:"12px",top:"12px"}}),D.isAvailable&&e.jsxs(ce.Fragment,{children:[e.jsx("span",{className:"absolute rounded-full bg-green-400 opacity-75 animate-ping",style:{width:"20px",height:"20px",left:"6px",top:"6px"}}),e.jsx("span",{className:"absolute rounded-full bg-green-300 opacity-50 animate-ping",style:{width:"28px",height:"28px",left:"2px",top:"2px",animationDuration:"1.5s"}})]})]}),e.jsx("span",{className:"text-xs",children:D.label})]})})]}),e.jsx("div",{className:"mx-4 mb-1",children:e.jsx("p",{className:"text-xs text-orange-600 font-medium",children:"Facial treatment massage & skin care"})}),e.jsx("div",{className:"mx-4 mb-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-xs text-gray-600 flex-shrink-0",children:[e.jsx("span",{className:"font-bold",children:"Treatments:"})," ",t.treatments||"Facial & Beauty Services"]}),(()=>{const N=t.languages,k=N?typeof N=="string"?N.split(",").map(y=>y.trim()):N:[];if(u.debug("ðŸ  FacialPlaceHomeCard languages debug:",{placeName:t.name,languagesValue:N,parsedLanguages:k,languagesType:typeof N}),!k||!Array.isArray(k)||k.length===0)return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"flex items-center gap-0.5 text-xs",children:[e.jsx("span",{className:"text-sm",style:{fontFamily:'"Segoe UI Emoji", "Noto Color Emoji", "Apple Color Emoji", sans-serif',fontSize:"14px",lineHeight:"1"},children:"ðŸ‡®ðŸ‡©"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"ID"})]}),e.jsxs("span",{className:"flex items-center gap-0.5 text-xs",children:[e.jsx("span",{className:"text-sm",style:{fontFamily:'"Segoe UI Emoji", "Noto Color Emoji", "Apple Color Emoji", sans-serif',fontSize:"14px",lineHeight:"1"},children:"ðŸ‡¬ðŸ‡§"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"EN"})]})]});const b={english:{flag:"ðŸ‡¬ðŸ‡§",name:"EN",flagClass:"fi fi-gb"},indonesian:{flag:"ðŸ‡®ðŸ‡©",name:"ID",flagClass:"fi fi-id"},mandarin:{flag:"ðŸ‡¨ðŸ‡³",name:"ZH",flagClass:"fi fi-cn"},japanese:{flag:"ðŸ‡¯ðŸ‡µ",name:"JP",flagClass:"fi fi-jp"},korean:{flag:"ðŸ‡°ðŸ‡·",name:"KR",flagClass:"fi fi-kr"},thai:{flag:"ðŸ‡¹ðŸ‡­",name:"TH",flagClass:"fi fi-th"},vietnamese:{flag:"ðŸ‡»ðŸ‡³",name:"VI",flagClass:"fi fi-vn"},french:{flag:"ðŸ‡«ðŸ‡·",name:"FR",flagClass:"fi fi-fr"},german:{flag:"ðŸ‡©ðŸ‡ª",name:"DE",flagClass:"fi fi-de"},spanish:{flag:"ðŸ‡ªðŸ‡¸",name:"ES",flagClass:"fi fi-es"},portuguese:{flag:"ðŸ‡µðŸ‡¹",name:"PT",flagClass:"fi fi-pt"},italian:{flag:"ðŸ‡®ðŸ‡¹",name:"IT",flagClass:"fi fi-it"},russian:{flag:"ðŸ‡·ðŸ‡º",name:"RU",flagClass:"fi fi-ru"},arabic:{flag:"ðŸ‡¸ðŸ‡¦",name:"AR",flagClass:"fi fi-sa"},hindi:{flag:"ðŸ‡®ðŸ‡³",name:"HI",flagClass:"fi fi-in"},en:{flag:"ðŸ‡¬ðŸ‡§",name:"EN",flagClass:"fi fi-gb"},id:{flag:"ðŸ‡®ðŸ‡©",name:"ID",flagClass:"fi fi-id"},zh:{flag:"ðŸ‡¨ðŸ‡³",name:"ZH",flagClass:"fi fi-cn"},ja:{flag:"ðŸ‡¯ðŸ‡µ",name:"JP",flagClass:"fi fi-jp"},ko:{flag:"ðŸ‡°ðŸ‡·",name:"KR",flagClass:"fi fi-kr"},th:{flag:"ðŸ‡¹ðŸ‡­",name:"TH",flagClass:"fi fi-th"},vi:{flag:"ðŸ‡»ðŸ‡³",name:"VI",flagClass:"fi fi-vn"},fr:{flag:"ðŸ‡«ðŸ‡·",name:"FR",flagClass:"fi fi-fr"},de:{flag:"ðŸ‡©ðŸ‡ª",name:"DE",flagClass:"fi fi-de"},es:{flag:"ðŸ‡ªðŸ‡¸",name:"ES",flagClass:"fi fi-es"},pt:{flag:"ðŸ‡µðŸ‡¹",name:"PT",flagClass:"fi fi-pt"},it:{flag:"ðŸ‡®ðŸ‡¹",name:"IT",flagClass:"fi fi-it"},ru:{flag:"ðŸ‡·ðŸ‡º",name:"RU",flagClass:"fi fi-ru"},ar:{flag:"ðŸ‡¸ðŸ‡¦",name:"AR",flagClass:"fi fi-sa"},hi:{flag:"ðŸ‡®ðŸ‡³",name:"HI",flagClass:"fi fi-in"}};return e.jsx("div",{className:"flex items-center gap-1",children:k.slice(0,2).map(y=>{const T=y.toLowerCase(),F=b[T]||{flag:"ðŸŒ",name:y.slice(0,2).toUpperCase()};return e.jsxs("span",{className:"flex items-center gap-0.5 text-xs",children:[e.jsx("span",{className:"text-sm",style:{fontFamily:'"Segoe UI Emoji", "Noto Color Emoji", "Apple Color Emoji", sans-serif',fontSize:"14px",lineHeight:"1"},children:F.flag}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:F.name})]},y)})})})()]})}),t.description&&e.jsx("div",{className:"mx-4 mb-3",children:e.jsx("p",{className:"text-sm text-gray-700 leading-5 break-words whitespace-normal line-clamp-2 text-left",children:t.description})}),e.jsxs("div",{className:"mx-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-800 mb-3",children:"Treatment packages"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xs font-medium text-orange-700 mb-1",children:"60 min"}),e.jsx("div",{className:"text-sm font-bold text-slate-900",children:j[60]>0?"".concat(w(j[60])):"Call"}),e.jsx("div",{className:"text-[10px] text-slate-600 mt-1",children:"Basic"})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-300 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xs font-medium text-orange-700 mb-1",children:"90 min"}),e.jsx("div",{className:"text-sm font-bold text-slate-900",children:j[90]>0?"".concat(w(j[90])):"Call"}),e.jsx("div",{className:"text-[10px] text-slate-600 mt-1",children:"Premium"})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xs font-medium text-orange-700 mb-1",children:"120 min"}),e.jsx("div",{className:"text-sm font-bold text-slate-900",children:j[120]>0?"".concat(w(j[120])):"Call"}),e.jsx("div",{className:"text-[10px] text-slate-600 mt-1",children:"Luxury"})]})]})]}),e.jsx("div",{className:"mx-4 mb-3",children:e.jsx("button",{onClick:N=>{N.stopPropagation(),typeof a=="function"&&a(t)},className:"w-full bg-orange-500 hover:bg-orange-600 text-white px-4 py-2.5 rounded-lg text-sm font-semibold transition-all hover:shadow-lg flex items-center justify-center gap-2",children:"View profile"})}),e.jsx("div",{className:"mx-4 pb-4 flex items-center",children:e.jsx("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:n&&e.jsx(Jo,{userLocation:n,targetLocation:{lat:parseFloat(String(t.lat||t.latitude||0)),lng:parseFloat(String(t.lng||t.longitude||0))},className:"text-slate-600"})})})]}),e.jsx(wi,{isOpen:l,onClose:()=>d(!1),title:t.name||"Facial Clinic",description:t.description||"Professional beauty and facial treatments",url:g,type:"facial"})]})},Md=[{name:"Indonesia",code:"ID",dial_code:"+62"},{name:"Malaysia",code:"MY",dial_code:"+60"},{name:"Singapore",code:"SG",dial_code:"+65"},{name:"Australia",code:"AU",dial_code:"+61"},{name:"United Kingdom",code:"GB",dial_code:"+44"},{name:"United States",code:"US",dial_code:"+1"},{name:"Afghanistan",code:"AF",dial_code:"+93"},{name:"Albania",code:"AL",dial_code:"+355"},{name:"Algeria",code:"DZ",dial_code:"+213"},{name:"American Samoa",code:"AS",dial_code:"+1684"},{name:"Andorra",code:"AD",dial_code:"+376"},{name:"Angola",code:"AO",dial_code:"+244"},{name:"Argentina",code:"AR",dial_code:"+54"},{name:"Brazil",code:"BR",dial_code:"+55"},{name:"Canada",code:"CA",dial_code:"+1"},{name:"China",code:"CN",dial_code:"+86"},{name:"France",code:"FR",dial_code:"+33"},{name:"Germany",code:"DE",dial_code:"+49"},{name:"India",code:"IN",dial_code:"+91"},{name:"Italy",code:"IT",dial_code:"+39"},{name:"Japan",code:"JP",dial_code:"+81"},{name:"Mexico",code:"MX",dial_code:"+52"},{name:"Russia",code:"RU",dial_code:"+7"},{name:"South Korea",code:"KR",dial_code:"+82"},{name:"Spain",code:"ES",dial_code:"+34"}],Bd=[{emoji:"ðŸ˜ ",label:"Angry",rating:1},{emoji:"ðŸ˜ž",label:"Sad",rating:2},{emoji:"ðŸ˜",label:"Neutral",rating:3},{emoji:"ðŸ˜Š",label:"Happy",rating:4},{emoji:"ðŸ¤©",label:"Amazing",rating:5}],$d=({onClose:t,onSubmit:a,itemName:s,itemType:n,itemId:i,t:r})=>{const[l,d]=o.useState(null),[g,m]=o.useState("+62"),[x,v]=o.useState(""),[j,I]=o.useState(""),[p,R]=o.useState(!1),w=async()=>{if(l===null){I(r.selectRatingError);return}if(!x.trim()){I(r.whatsappRequiredError);return}R(!0),I("");const P="".concat(g).concat(x.replace(/^0+/,""));u.debug("Rating submitted:",{providerId:i,providerType:n,providerName:s,rating:l,whatsapp:P,status:"pending"}),R(!1),alert(r.confirmationV2),a()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4",onClick:t,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md mx-auto",onClick:P=>P.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1 pr-2",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-800",children:r.title.replace("{itemName}",s)}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:r.prompt})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 flex-shrink-0",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex justify-around items-center my-6",children:Bd.map(({emoji:P,label:D,rating:L})=>e.jsx("button",{onClick:()=>d(L),className:"flex flex-col items-center gap-1 p-2 rounded-lg transition-transform duration-200 ".concat(l===L?"transform scale-110 sm:scale-125":"opacity-60 hover:opacity-100"),"aria-label":D,children:e.jsx("span",{className:"text-3xl sm:text-4xl",children:P})},L))}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"whatsapp",className:"block text-sm font-medium text-gray-700 mb-1",children:r.whatsappLabel}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("select",{value:g,onChange:P=>m(P.target.value),className:"flex-shrink-0 z-10 inline-flex items-center py-2.5 px-3 text-sm font-medium text-center text-gray-900 bg-gray-100 border border-r-0 border-gray-300 rounded-l-md hover:bg-gray-200 focus:outline-none focus:ring-1 focus:ring-brand-orange focus:border-brand-orange","aria-label":"Country Code",children:Md.map(P=>e.jsxs("option",{value:P.dial_code,children:[P.code," ",P.dial_code]},P.code))}),e.jsx("input",{id:"whatsapp",type:"tel",value:x,onChange:P=>v(P.target.value),className:"w-full px-3 py-2 bg-white border border-gray-300 rounded-r-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-brand-orange focus:border-brand-orange",placeholder:r.whatsappPlaceholder})]})]}),j&&e.jsx("p",{className:"text-red-500 text-sm text-center mb-4",children:j}),e.jsx(Hc,{onClick:w,disabled:p,children:p?"Submitting...":r.submitButton})]})})},Od=()=>{const[t,a]=o.useState({x:10,y:20}),[s,n]=o.useState(0);o.useEffect(()=>{const l=setInterval(()=>{n(m=>(m+1)%60)},50);let d=0;const g=setInterval(()=>{d+=.02;const m=10+Math.sin(d)*30+Math.sin(d*2)*10,x=20+Math.cos(d*.5)*15+Math.sin(d*3)*5;a({x:m,y:x})},50);return()=>{clearInterval(l),clearInterval(g)}},[]);const i=Math.sin(s*.3)*25,r=-Math.sin(s*.3)*25;return e.jsx("div",{className:"fixed pointer-events-none z-50",style:{left:"".concat(t.x,"%"),top:"".concat(t.y,"%"),transition:"left 0.05s linear, top 0.05s linear"},children:e.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 100 100",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"},children:[e.jsxs("g",{style:{transform:"rotate(".concat(i,"deg)"),transformOrigin:"50px 50px",transition:"transform 0.05s ease-out"},children:[e.jsx("ellipse",{cx:"30",cy:"35",rx:"18",ry:"25",fill:"url(#gradient1)",stroke:"#ff6b35",strokeWidth:"1"}),e.jsx("ellipse",{cx:"32",cy:"60",rx:"15",ry:"20",fill:"url(#gradient2)",stroke:"#ff8c42",strokeWidth:"1"}),e.jsx("circle",{cx:"28",cy:"32",r:"4",fill:"white",opacity:"0.6"}),e.jsx("circle",{cx:"25",cy:"40",r:"3",fill:"white",opacity:"0.4"}),e.jsx("circle",{cx:"30",cy:"58",r:"3",fill:"#ff6b35",opacity:"0.5"})]}),e.jsxs("g",{style:{transform:"rotate(".concat(r,"deg)"),transformOrigin:"50px 50px",transition:"transform 0.05s ease-out"},children:[e.jsx("ellipse",{cx:"70",cy:"35",rx:"18",ry:"25",fill:"url(#gradient1)",stroke:"#ff6b35",strokeWidth:"1"}),e.jsx("ellipse",{cx:"68",cy:"60",rx:"15",ry:"20",fill:"url(#gradient2)",stroke:"#ff8c42",strokeWidth:"1"}),e.jsx("circle",{cx:"72",cy:"32",r:"4",fill:"white",opacity:"0.6"}),e.jsx("circle",{cx:"75",cy:"40",r:"3",fill:"white",opacity:"0.4"}),e.jsx("circle",{cx:"70",cy:"58",r:"3",fill:"#ff6b35",opacity:"0.5"})]}),e.jsx("ellipse",{cx:"50",cy:"50",rx:"3",ry:"20",fill:"#4a4a4a",stroke:"#2d2d2d",strokeWidth:"1"}),e.jsx("circle",{cx:"50",cy:"32",r:"4",fill:"#3d3d3d"}),e.jsx("path",{d:"M 48 30 Q 45 25 43 20",stroke:"#2d2d2d",strokeWidth:"1",fill:"none",strokeLinecap:"round"}),e.jsx("path",{d:"M 52 30 Q 55 25 57 20",stroke:"#2d2d2d",strokeWidth:"1",fill:"none",strokeLinecap:"round"}),e.jsx("circle",{cx:"43",cy:"20",r:"1.5",fill:"#2d2d2d"}),e.jsx("circle",{cx:"57",cy:"20",r:"1.5",fill:"#2d2d2d"}),e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"gradient1",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",style:{stopColor:"#ff9a56",stopOpacity:1}}),e.jsx("stop",{offset:"50%",style:{stopColor:"#ff6b35",stopOpacity:1}}),e.jsx("stop",{offset:"100%",style:{stopColor:"#ff4d1a",stopOpacity:1}})]}),e.jsxs("linearGradient",{id:"gradient2",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",style:{stopColor:"#ffb366",stopOpacity:1}}),e.jsx("stop",{offset:"50%",style:{stopColor:"#ff8c42",stopOpacity:1}}),e.jsx("stop",{offset:"100%",style:{stopColor:"#ff6b35",stopOpacity:1}})]})]})]})})};function qo(t,a){const n=t.lat*Math.PI/180,i=a.lat*Math.PI/180,r=(a.lat-t.lat)*Math.PI/180,l=(a.lng-t.lng)*Math.PI/180,d=Math.sin(r/2)*Math.sin(r/2)+Math.cos(n)*Math.cos(i)*Math.sin(l/2)*Math.sin(l/2);return 6371e3*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))}function jn(t){try{if(t.geopoint&&typeof t.geopoint.lat=="number"&&typeof t.geopoint.lng=="number")return{lat:t.geopoint.lat,lng:t.geopoint.lng};if(t.coordinates){let a;if(typeof t.coordinates=="string"?a=JSON.parse(t.coordinates):a=t.coordinates,a&&typeof a.lat=="number"&&typeof a.lng=="number")return{lat:a.lat,lng:a.lng}}return null}catch{return null}}function Oa(t){const{lat:a,lng:s}=t,n={yogyakarta:{lat:[-7.9,-7.7],lng:[110.2,110.5]},bandung:{lat:[-7,-6.8],lng:[107.5,107.8]},jakarta:{lat:[-6.4,-6],lng:[106.7,107]},denpasar:{lat:[-8.8,-8.5],lng:[115.1,115.3]},ubud:{lat:[-8.6,-8.4],lng:[115.2,115.3]},canggu:{lat:[-8.7,-8.6],lng:[115.1,115.2]},surabaya:{lat:[-7.4,-7.2],lng:[112.6,112.8]},semarang:{lat:[-7.1,-6.9],lng:[110.3,110.5]}};for(const[i,r]of Object.entries(n))if(a>=r.lat[0]&&a<=r.lat[1]&&s>=r.lng[0]&&s<=r.lng[1])return i;return"other"}function qr(t){const a=jn(t);if(!a)return{isValid:!1,geopoint:null,error:"Missing or invalid geopoint coordinates"};const{lat:s,lng:n}=a;return s<-11||s>6||n<95||n>141?{isValid:!1,geopoint:null,error:"Coordinates outside Indonesia bounds"}:{isValid:!0,geopoint:a}}function Ss(t){return t?String(t).toLowerCase().trim():""}function Ud(t){if(!t||t==="all")return new Set;const a=Ss(t),s=Rl(t),n=new Set([a]);return s&&(n.add(Ss(s.locationId)),n.add(Ss(s.name)),(s.aliases||[]).forEach(i=>n.add(Ss(i)))),n}function Yo(t,a){if(!a||!t)return!1;if(a==="all")return!0;const s=Ss(t),n=Ud(a);if(n.has(s))return!0;if(s.includes(",")){const i=s.split(",")[0].trim();if(n.has(i))return!0}return!1}function Ii(t,a){return Array.isArray(t)?a?a==="all"?t:t.filter(n=>{const i=n.city||n.locationId||n.location_id||n.location;return Yo(i,a)}):[]:[]}function Yr(t,a){return Array.isArray(t)?a?a==="all"?t:t.filter(n=>{const i=n.city||n.location;return Yo(i,a)}):[]:[]}const Qo=({onDismiss:t})=>{const[a,s]=o.useState(null),[n,i]=o.useState(!1),[r,l]=o.useState(!1);o.useEffect(()=>{if(!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))return;const j=window.matchMedia("(display-mode: standalone)").matches,I=window.navigator.standalone===!0,p=localStorage.getItem("pwa-install-completed")==="true",R=window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches||window.matchMedia("(display-mode: minimal-ui)").matches;if(j||I||p||R)return;if(localStorage.getItem("pwa-banner-dismissed")==="true"){const H=localStorage.getItem("pwa-banner-dismissed-time"),S=Date.now(),N=10080*60*1e3;if(H&&S-parseInt(H)<N)return;localStorage.removeItem("pwa-banner-dismissed"),localStorage.removeItem("pwa-banner-dismissed-time")}const P=/iPad|iPhone|iPod/.test(navigator.userAgent);l(P);const D=H=>{window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||localStorage.getItem("pwa-install-completed")==="true"||(H.preventDefault(),s(H),i(!0))};window.addEventListener("beforeinstallprompt",D);const L=setTimeout(()=>{},3e3),O=setTimeout(()=>{(P||!a)&&i(!0)},2e3);return()=>{window.removeEventListener("beforeinstallprompt",D),clearTimeout(O),clearTimeout(L)}},[]);const d=async()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||localStorage.getItem("pwa-install-completed")==="true"){i(!1);return}if(!(a||window.deferredPrompt)){const I=/iPad|iPhone|iPod/.test(navigator.userAgent),p=/Android/i.test(navigator.userAgent);alert(I?'ðŸ“± TO INSTALL ON iPHONE/iPAD:\n\n1ï¸âƒ£ Tap Share button (â¬†ï¸) at bottom\n2ï¸âƒ£ Scroll down\n3ï¸âƒ£ Tap "Add to Home Screen"\n4ï¸âƒ£ Tap "Add"\n\nâœ… App icon will appear on home screen!':p?'ðŸ“± TO INSTALL ON ANDROID:\n\n1ï¸âƒ£ Tap menu button (3 dots â‹®)\n2ï¸âƒ£ Look for "Install app"\n3ï¸âƒ£ Or "Add to Home screen"\n4ï¸âƒ£ Tap to install\n\nâœ… App will open automatically!':'ðŸ“± TO INSTALL:\n\n1ï¸âƒ£ Open browser menu\n2ï¸âƒ£ Look for "Install" or\n   "Add to Home Screen"\n3ï¸âƒ£ Follow prompts\n\nâœ… Check home screen for app icon!');return}try{const I=await a.prompt(),p=await a.userChoice;((p==null?void 0:p.outcome)||"dismissed")==="accepted"&&(localStorage.setItem("pwa-install-completed","true"),i(!1),setTimeout(()=>{alert("App installed successfully! ðŸŽ‰\nYou can now find it on your home screen.")},500)),s(null)}catch(I){String(I).includes("user gesture")?alert("âš ï¸ Installation requires a user action.\n\nPlease try:\n1. Tap the install button again\n2. Or use your browser's menu to install"):alert('Installation failed. Please try adding the app manually from your browser menu.\n\nLook for "Add to Home Screen" or "Install App" option.')}},g=()=>{localStorage.setItem("pwa-banner-dismissed","true"),localStorage.setItem("pwa-banner-dismissed-time",Date.now().toString()),i(!1),t==null||t()},m=()=>{localStorage.removeItem("pwa-banner-dismissed"),localStorage.removeItem("pwa-banner-dismissed-time"),localStorage.removeItem("pwa-install-completed"),i(!0),alert("âœ… Installation banner reset!\n\nThe banner should now appear again.")},x=()=>({isInstalled:localStorage.getItem("pwa-install-completed")==="true",isDismissed:localStorage.getItem("pwa-banner-dismissed")==="true",dismissedTime:localStorage.getItem("pwa-banner-dismissed-time"),isStandalone:window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches,hasPrompt:!!a,isIOS:/iPad|iPhone|iPod/.test(navigator.userAgent),userAgent:navigator.userAgent});return typeof window!="undefined"&&(window.clearPWADismissal=m,window.getPWAStatus=x,window.showPWABanner=()=>{i(!0)}),n?e.jsxs("div",{className:"fixed top-0 left-0 right-0 z-[9999] bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-2xl transition-transform duration-500 ease-out transform translate-y-0",style:{animation:"slideDown 0.5s ease-out"},children:[e.jsx("style",{children:"\n        @keyframes slideDown {\n          from { transform: translateY(-100%); }\n          to { transform: translateY(0%); }\n        }\n      "}),e.jsx("div",{className:"max-w-4xl mx-auto px-3 py-3 sm:px-4 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-2xl sm:text-3xl",children:"ðŸ“±"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-sm sm:text-lg leading-tight",children:"APP INSTALLATION"}),e.jsx("p",{className:"text-xs sm:text-sm text-orange-100 mt-0.5 sm:mt-1 leading-tight",children:r?'Tap Share (â¬†ï¸) â†’ "Add to Home Screen"':"Install for notifications & offline access"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[r?e.jsxs("button",{onClick:()=>{alert('To install this app:\n\nðŸ“± Tap the Share button (â¬†ï¸)\nâž• Select "Add to Home Screen"\nâœ… Confirm installation')},className:"px-3 py-2 sm:px-6 sm:py-3 bg-white text-orange-600 font-bold rounded-lg sm:rounded-xl hover:bg-orange-50 transition-all flex items-center gap-1 sm:gap-2 shadow-lg text-xs sm:text-base",children:[e.jsx(Ds,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Instructions"}),e.jsx("span",{className:"sm:hidden",children:"Help"})]}):e.jsxs("button",{onClick:d,className:"px-3 py-2 sm:px-6 sm:py-3 bg-white text-orange-600 font-bold rounded-lg sm:rounded-xl hover:bg-orange-50 transition-all flex items-center gap-1 sm:gap-2 shadow-lg text-xs sm:text-base",children:[e.jsx(Ds,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Install"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]}),e.jsx("button",{onClick:g,className:"p-2 sm:p-3 hover:bg-orange-400 rounded-lg transition-all min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Dismiss",children:e.jsx(wt,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})]})})]}):null},Fd=8,Hd=5,Vd=12,Qr=5,Wd=new Set(["true","1","yes","active","enabled","live"]),Xr=(t,a=!1)=>{if(typeof t=="boolean")return t;if(typeof t=="number")return t===1;if(typeof t=="string"){const s=t.trim().toLowerCase();if(s.length===0)return a;if(Wd.has(s))return!0;if(["false","0","no","disabled","inactive"].includes(s))return!1}return a},zd=t=>{const a=t.$id||t.id||t.uuid||t.slug||null;return a?String(a):null},Gd=t=>t==null?!1:"accountActive"in t?Xr(t.accountActive,!0):"account_active"in t?Xr(t.account_active,!0):"accountStatus"in t?String(t.accountStatus).toLowerCase()==="active":!0,Kd=t=>{var n,i,r,l,d,g,m;const a=(m=(g=(d=(l=(r=(i=(n=t.status)!=null?n:t.displayStatus)!=null?i:t.availability)!=null?r:t.availabilityStatus)!=null?l:t.display_status)!=null?d:t._status)!=null?g:t.state)!=null?m:"",s=String(a).trim().toLowerCase();return["available","online","ready","open"].includes(s)?"available":["busy","booked","occupied","ontrip"].includes(s)?"busy":["offline","inactive","hidden","suspended","disabled"].includes(s)?"offline":"unknown"},Jd=t=>{var s,n,i,r,l;const a=(l=(r=(i=(n=(s=t.locationId)!=null?s:t.location_id)!=null?n:t.location)!=null?i:t.city)!=null?r:t._locationArea)!=null?l:null;return a?xi(String(a)):null},qd=(t,a,s,n,i,r)=>{const l=r&&n==="available",d={...t,_matchType:a,_distanceKm:i,_locationArea:s,_bookable:l,_statusNormalized:n};return d.displayStatus==null&&(d.displayStatus=n),d.chatDisabled==null&&(d.chatDisabled=!l),d},Yd=t=>t.sort((a,s)=>{var d,g;const n=(d=a._distanceKm)!=null?d:Number.POSITIVE_INFINITY,i=(g=s._distanceKm)!=null?g:Number.POSITIVE_INFINITY;if(n!==i)return n-i;if(a._bookable!==s._bookable)return a._bookable?-1:1;const r=String(a.name||"").toLowerCase(),l=String(s.name||"").toLowerCase();return r.localeCompare(l)}),Qd=t=>t.sort((a,s)=>{if(a._bookable!==s._bookable)return a._bookable?-1:1;const n=String(a.name||"").toLowerCase(),i=String(s.name||"").toLowerCase();return n.localeCompare(i)}),Xd=(t,a)=>{const s="placeholder-".concat(a.cityId,"-").concat(t),n="Therapist slot ".concat(t),i="We are onboarding therapists in ".concat(a.cityName,".");return{id:s,$id:s,name:n,city:a.cityName,locationId:a.cityId,location:a.cityName,pricing:{60:0,90:0,120:0},specialties:[],availabilityStatus:"OFFLINE",status:"busy",displayStatus:"busy",accountActive:!1,isVerified:!1,headline:i,description:i,chatDisabled:!0,_matchType:"placeholder",_distanceKm:null,_locationArea:a.cityId,_bookable:!1,_statusNormalized:"busy",_isPlaceholder:!0,_reason:"placeholder"}},Zd=t=>!!t&&typeof t.lat=="number"&&typeof t.lng=="number",em=t=>typeof t.latitude=="number"&&typeof t.longitude=="number"?{lat:t.latitude,lng:t.longitude}:null;function tm(t=[],a,s={}){var D,L,O;const n=Math.max((D=s.radiusKm)!=null?D:Fd,1),i=Math.max((L=s.minResults)!=null?L:Hd,1),r=Math.max((O=s.maxResults)!=null?O:Vd,i);if(!a||!a.cityId)return{matches:[],distanceMatches:[],cityMatches:[],placeholders:[],stats:{total:0,distanceCount:0,cityCount:0,placeholderCount:0}};const l=[],d=[],g=[],m=new Set,x=em(a);t.forEach(H=>{const S=zd(H);if(!S||m.has(S))return;const N=Jd(H);if(!N)return;const k=Gd(H);if(!k)return;const b=Kd(H);if(b==="offline")return;const y=jn(H),T=Zd(y);let F=null,U=!1;x&&T&&(F=qo(x,y)/1e3,F<=n&&(U=!0));const f=qd(H,U?"distance":"city",N,b,F,k);if(U){l.push(f),m.add(S);return}N===a.cityId?(d.push(f),m.add(S)):g.push(f)});const v=Yd(l),j=Qd(d),I=[];v.forEach(H=>I.push(H));const p=Math.max(r-I.length,0);p>0&&j.slice(0,p).forEach(H=>I.push(H));const R=I.length>=i?I:[...I,...j.slice(I.length,i).filter(Boolean)].slice(0,r);let w=[],P=R;if(P.length===0){const H=g.slice(0,Qr).map(S=>{const N={...S,status:"Busy",displayStatus:"Busy",availability:"Busy",availabilityStatus:"BUSY",_bookable:!1,_statusNormalized:"busy",_isPlaceholder:!0,_matchType:"placeholder",_reason:"sample-from-other-city"};return N.chatDisabled=!0,N});H.length>0?(w=H,P=H):(w=Array.from({length:Qr}).map((S,N)=>Xd(N+1,a)),P=w)}return{matches:P,distanceMatches:v,cityMatches:j,placeholders:w,stats:{total:P.length,distanceCount:v.length,cityCount:j.length,placeholderCount:w.length}}}const pn=Pe.databaseId,Zr=Pe.collections.therapistMenus;var jo;const eo=(jo=Pe.collections)==null?void 0:jo.share_links;async function am(t){if(t.length===0)return{byTherapistId:new Map,all:[]};if(!pn||!Zr)return{byTherapistId:new Map,all:[]};try{const a=await je.listDocuments(pn,Zr,[ae.equal("therapistId",t),ae.orderDesc("$updatedAt"),ae.limit(500)]),s=new Map;return a.documents.forEach(n=>{const i=n,r=i.therapistId;s.has(r)||s.set(r,i)}),{byTherapistId:s,all:a.documents}}catch{return{byTherapistId:new Map,all:[]}}}async function sm(t,a){if(a.length===0)return{byEntityId:new Map,all:[]};if(!pn||!eo)return{byEntityId:new Map,all:[]};try{const s=await je.listDocuments(pn,eo,[ae.equal("linkedItemType",t),ae.equal("linkedItemId",a),ae.equal("isActive",!0),ae.limit(500)]),n=new Map;return s.documents.forEach(i=>{const r=i,l=r.linkedItemId;n.has(l)||n.set(l,r)}),{byEntityId:n,all:s.documents}}catch{return{byEntityId:new Map,all:[]}}}async function nm(t){const a=t.map(i=>String(i.$id||i.id));performance.now();const[s,n]=await Promise.all([am(a),sm("therapist",a)]);return performance.now(),{menus:s.byTherapistId,shareLinks:n.byEntityId}}function im(){const[t,a]=o.useState("home"),[s,n]=o.useState(!1),[i,r]=o.useState(""),[l,d]=o.useState(!1),[g,m]=o.useState(!1),[x,v]=o.useState(()=>{if(typeof window=="undefined")return"all";const b=window.localStorage.getItem("user_city_id"),y=window.localStorage.getItem("user_city_name");return(b||y||"all").trim()}),[j,I]=o.useState([]),[p,R]=o.useState(!1),[w,P]=o.useState(null),[D,L]=o.useState(null),[O,H]=o.useState(()=>localStorage.getItem("massage_dev_mode")==="true"),[S,N]=o.useState([]),k=b=>{const y=[...b];for(let T=y.length-1;T>0;T--){const F=Math.floor(Math.random()*(T+1));[y[T],y[F]]=[y[F],y[T]]}return y};return o.useEffect(()=>{if(t==="home"){const b=[...Ml],y=k(b);N(y)}},[t]),o.useEffect(()=>{const b=y=>{if(y.ctrlKey&&y.shiftKey&&y.key==="D"){const T=!O;H(T),localStorage.setItem("massage_dev_mode",T.toString())}};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[O]),{activeTab:t,setActiveTab:a,showComingSoonModal:s,setShowComingSoonModal:n,comingSoonSection:i,setComingSoonSection:r,isMenuOpen:l,setIsMenuOpen:d,isLocationModalOpen:g,setIsLocationModalOpen:m,selectedCity:x,setSelectedCity:v,customLinks:j,setCustomLinks:I,showRatingModal:p,setShowRatingModal:R,selectedTherapist:w,setSelectedTherapist:P,selectedRatingItem:D,setSelectedRatingItem:L,isDevelopmentMode:O,setIsDevelopmentMode:H,shuffledHomeImages:S,shuffleArray:k}}const Ci=(t,a,s,n)=>{const r=(s-t)*Math.PI/180,l=(n-a)*Math.PI/180,d=Math.sin(r/2)*Math.sin(r/2)+Math.cos(t*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))},Xo=async(t,a,s,n)=>{try{const i=await ks.getDistanceWithTravelTime({lat:t,lng:a},{lat:s,lng:n});return{distance:i.distance,travelTime:i.duration}}catch{return{distance:Ci(t,a,s,n)}}},Nn=t=>{try{let a=t;if(typeof t=="string"&&(a=JSON.parse(t)),a&&typeof a=="object"&&typeof a.lat=="number"&&(typeof a.lon=="number"&&a.lng===void 0&&(a.lng=a.lon),typeof a.lng=="number"))return{lat:a.lat,lng:a.lng};if(Array.isArray(a)&&a.length===2&&typeof a[0]=="number"&&typeof a[1]=="number")return{lat:a[0],lng:a[1]}}catch{}return null},rm=async(t,a,s=15)=>{try{const{dataService:n}=await z(async()=>{const{dataService:l}=await import("./dataService.Cikv1nws.js");return{dataService:l}},__vite__mapDeps([7,0,1,2,3,4,5,6,8,9])),i=await n.getTherapists(),r=[];for(const l of i){if(l.id.toString()===t.toString()||l.status!==Xn.Available)continue;const d=Nn(l.coordinates);if(!d)continue;const g=await Xo(a.lat,a.lng,d.lat,d.lng);l.distance=g.distance,g.travelTime&&(l.travelTime=g.travelTime),g.distance<=s&&r.push(l)}return r.sort((l,d)=>l.distance-d.distance),r}catch{return[]}},Zo=async(t,a=25)=>{try{const{dataService:s}=await z(async()=>{const{dataService:g}=await import("./dataService.Cikv1nws.js");return{dataService:g}},__vite__mapDeps([7,0,1,2,3,4,5,6,8,9])),n=await s.getTherapists(),i=[];let r=0,l=0;for(const g of n){const m=Nn(g.coordinates);if(!m)continue;r++;const x=Ci(t.lat,t.lng,m.lat,m.lng);g.distance=x,x<=a&&(i.push(g),l++)}const d={available:1,busy:2,offline:3};return i.sort((g,m)=>{const x=(g.status||"offline").toLowerCase(),v=(m.status||"offline").toLowerCase(),j=d[x]||4,I=d[v]||4;return j!==I?j-I:g.distance-m.distance}),i}catch{return[]}},om=async(t,a,s=15)=>{try{const{dataService:n}=await z(async()=>{const{dataService:l}=await import("./dataService.Cikv1nws.js");return{dataService:l}},__vite__mapDeps([7,0,1,2,3,4,5,6,8,9])),i=await n.getPlaces(),r=[];for(const l of i){if(l.id.toString()===t.toString()||!l.isLive)continue;const d=Nn(l.coordinates);if(!d)continue;const g=await Xo(a.lat,a.lng,d.lat,d.lng);l.distance=g.distance,g.travelTime&&(l.travelTime=g.travelTime),g.distance<=s&&r.push(l)}return r.sort((l,d)=>l.distance-d.distance),r}catch{return[]}},el=async(t,a=25)=>{try{const{dataService:s}=await z(async()=>{const{dataService:d}=await import("./dataService.Cikv1nws.js");return{dataService:d}},__vite__mapDeps([7,0,1,2,3,4,5,6,8,9])),n=await s.getPlaces(),i=[];let r=0,l=0;for(const d of n){const g=Nn(d.coordinates);if(!g)continue;r++;const m=Ci(t.lat,t.lng,g.lat,g.lng);d.distance=m,m<=a&&(i.push(d),l++)}return i.sort((d,g)=>d.isLive!==g.isLive?d.isLive?-1:1:d.distance-g.distance),i}catch{return[]}},li=async()=>{if(navigator.geolocation)try{return await new Promise((a,s)=>{navigator.geolocation.getCurrentPosition(n=>{const i=n.coords.accuracy;if(i>500){s(new Error("GPS accuracy insufficient: ".concat(i,"m")));return}a({lat:n.coords.latitude,lng:n.coords.longitude})},n=>{s(n)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})})}catch(t){throw t}throw new Error("GPS location required. Please enable location permissions.")},lm=Object.freeze(Object.defineProperty({__proto__:null,findAllNearbyPlaces:el,findAllNearbyTherapists:Zo,findNearbyPlaces:om,findNearbyTherapists:rm,getCustomerLocation:li},Symbol.toStringTag,{value:"Module"}));function cm(t,a){if(!t||!a)return!1;if(a==="all")return!0;const s=t.toLowerCase().trim(),n=a.toLowerCase().trim();return!!(s.includes(n)||n==="yogyakarta"&&(s.includes("yogya")||s.includes("jogja")))}function dm({therapists:t,places:a,hotels:s,selectedCity:n,propSelectedCity:i,userLocation:r,previewTherapistId:l,adminViewArea:d,bypassRadiusForAdmin:g,devLocationOverride:m,devShowAllTherapists:x,hasAdminPrivileges:v,onSetUserLocation:j}){const[I,p]=o.useState(null),[R,w]=o.useState([]),[P,D]=o.useState([]),[L,O]=o.useState([]),[H,S]=o.useState([]),[N,k]=o.useState(!1),b=y=>{if(!y)return null;if(Array.isArray(y)&&y.length===2)return{lat:y[1],lng:y[0]};if(typeof y=="string")try{const T=JSON.parse(y);if(T.lat&&T.lng)return{lat:T.lat,lng:T.lng}}catch{}return y.lat&&y.lng?{lat:y.lat,lng:y.lng}:null};return o.useEffect(()=>{(async()=>{if(r){p({lat:r.lat,lng:r.lng});return}k(!0);try{const T=await li();if(T){const{lat:F,lng:U}=T;p({lat:F,lng:U}),j({lat:F,lng:U,address:"Detected Location"})}}catch{}finally{k(!1)}})()},[]),o.useEffect(()=>{const y=Array.isArray(t)?t:[],T=i||n;if(!T||T==="all"){S(y);return}const F=Ii(y,T);S(F);const U=m||I||(r?{lat:r.lat,lng:r.lng}:null);if(!U){w([]),D([]),O([]);return}if(l&&v){const C=y.find(M=>M.$id===l||M.id===l);if(C){w([C]);return}}if(d&&g&&v){const C=y.filter(M=>{const E=M.city||M.location;return E&&cm(E.toLowerCase(),d.toLowerCase())});w(C);return}if(x){w(y),D(Array.isArray(a)?a:[]),O(s);return}const B=y.filter(C=>{const M=b(C.coordinates);return M?_n(U,M)<=10:!1}),A=(Array.isArray(a)?a:[]).filter(C=>{const M=b(C.coordinates);return M?_n(U,M)<=10:!1}),h=(Array.isArray(s)?s:[]).filter(C=>{const M=b(C.coordinates);return M?_n(U,M)<=10:!1});w(B),D(A),O(h)},[I,m,x,t,a,s,l,d,g,v,n,i,r]),{autoDetectedLocation:I,setAutoDetectedLocation:p,nearbyTherapists:R,setNearbyTherapists:w,nearbyPlaces:P,setNearbyPlaces:D,nearbyHotels:L,setNearbyHotels:O,cityFilteredTherapists:H,setCityFilteredTherapists:S,isLocationDetecting:N,setIsLocationDetecting:k,parseCoordinates:b,getCustomerLocation:li,findAllNearbyTherapists:Zo,findAllNearbyPlaces:el,findCityByCoordinates:Bl}}function _n(t,a){const n=Xs(a.lat-t.lat),i=Xs(a.lng-t.lng),r=Math.sin(n/2)*Math.sin(n/2)+Math.cos(Xs(t.lat))*Math.cos(Xs(a.lat))*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))}function Xs(t){return t*(Math.PI/180)}function mm({hasAdminPrivileges:t}){const[a,s]=o.useState(null),[n,i]=o.useState(null),[r,l]=o.useState(!1),d=!1,[g,m]=o.useState(null),[x,v]=o.useState(!1),j={yogyakarta:{lat:-7.797068,lng:110.370529,label:"Yogyakarta Center"},bandung:{lat:-6.917464,lng:107.619123,label:"Bandung Center"},denpasar:{lat:-8.670458,lng:115.212629,label:"Denpasar Center"},jakarta:{lat:-6.2088,lng:106.8456,label:"Jakarta Center"},solo:{lat:-7.5755,lng:110.8243,label:"Solo Center"},surabaya:{lat:-7.2575,lng:112.7521,label:"Surabaya Center"},bekasi:{lat:-6.2349,lng:106.9896,label:"Bekasi Center"},medan:{lat:3.5952,lng:98.6722,label:"Medan Center"},depok:{lat:-6.4025,lng:106.7942,label:"Depok Center"}};return o.useEffect(()=>{const I=new URLSearchParams(window.location.search),p=I.get("previewTherapistId"),R=I.get("adminViewArea"),w=I.get("bypassRadius")==="true";t?(p&&s(p),R&&w&&(i(R),l(!0))):(s(null),i(null),l(!1))},[t]),{previewTherapistId:a,adminViewArea:n,bypassRadiusForAdmin:r,devLocationOverride:g,setDevLocationOverride:m,devShowAllTherapists:x,setDevShowAllTherapists:v,devTestLocations:j,isDev:d}}function um(t){return o.useMemo(()=>{const a={home:{homeServiceTab:"Home Service",massagePlacesTab:"Massage Places",loading:"Loading...",loginSignUp:"Login / Sign Up",noMoreTherapists:"No more therapists available",setLocation:"Set Location",updateLocation:"Update Location",cityLocation:"City / Location",therapistsOnline:"Therapists Online",searchPlaceholder:"Search...",noResults:"No results found",massageDirectory:"Massage Directory",massageDirectoryTitle:"Browse All Massage Types",noTherapistsAvailable:"No therapists available in your area",therapistsTitle:"Home Massage Therapists",therapistsSubtitle:"Find the best massage therapists",massagePlacesTitle:"Featured Massage Spas",massagePlacesSubtitle:"Find the best massage places",noPlacesAvailable:"No massage places available in your area"},detail:{},common:{}};if(!t)return a;if(typeof t=="function")try{return{home:{homeServiceTab:t("home.homeServiceTab")||a.home.homeServiceTab,massagePlacesTab:t("home.massagePlacesTab")||a.home.massagePlacesTab,loading:t("home.loading")||a.home.loading,loginSignUp:t("home.loginSignUp")||a.home.loginSignUp,noMoreTherapists:t("home.noMoreTherapists")||a.home.noMoreTherapists,setLocation:t("home.setLocation")||a.home.setLocation,updateLocation:t("home.updateLocation")||a.home.updateLocation,cityLocation:t("cityLocation")||a.home.cityLocation,therapistsOnline:t("home.therapistsOnline")||a.home.therapistsOnline,searchPlaceholder:t("home.searchPlaceholder")||a.home.searchPlaceholder,noResults:t("home.noResults")||a.home.noResults,massageDirectory:t("home.massageDirectory")||a.home.massageDirectory,massageDirectoryTitle:t("home.massageDirectoryTitle")||a.home.massageDirectoryTitle,noTherapistsAvailable:t("home.noTherapistsAvailable")||a.home.noTherapistsAvailable,therapistsTitle:t("home.therapistsTitle")||a.home.therapistsTitle,therapistsSubtitle:t("home.therapistsSubtitle")||a.home.therapistsSubtitle,massagePlacesTitle:t("home.massagePlacesTitle")||a.home.massagePlacesTitle,massagePlacesSubtitle:t("home.massagePlacesSubtitle")||a.home.massagePlacesSubtitle,noPlacesAvailable:t("home.noPlacesAvailable")||a.home.noPlacesAvailable},detail:{},common:{}}}catch{return a}return typeof t=="object"&&!t.home?a:t},[t])}const ws=(t,a)=>{if(!t||t==="all")return a;for(const s of ln){const n=s.cities.find(i=>i.locationId===t);if(n)return n.name}return t},gm=({page:t,user:a,loggedInAgent:s,loggedInProvider:n,loggedInCustomer:i,therapists:r,places:l,facialPlaces:d,hotels:g,userLocation:m,selectedCity:x,readOnly:v=!1,onSetUserLocation:j,onSelectPlace:I,onSelectTherapist:p,onBook:R,onQuickBookWithChat:w,onChatWithBusyTherapist:P,onShowRegisterPrompt:D,onIncrementAnalytics:L,onAgentPortalClick:O,onCustomerPortalClick:H,onHotelPortalClick:S,onVillaPortalClick:N,onTherapistPortalClick:k,onMassagePlacePortalClick:b,onFacialPortalClick:y,onAdminPortalClick:T,onBrowseJobsClick:F,onEmployerJobPostingClick:U,onMassageJobsClick:B,onTherapistJobsClick:f,onTermsClick:A,onPrivacyClick:c,onNavigate:h,onLanguageChange:C,onLoginClick:M,t:E,language:W,selectedMassageType:X})=>{var Mi,Bi,$i,Oi,Ui,Fi,Hi,Vi,Wi,zi,Gi,Ki,Ji,qi,Yi,Qi,Xi,Zi,er,tr,ar,sr,nr,ir,rr,or,lr,cr,dr,mr,ur,gr,hr,pr,xr,fr,br,yr,wr,vr,jr,Nr,kr,Sr,Pr,Ir,Cr,Tr,Ar,Er,Dr,_r,Lr;const{city:_,countryCode:$,country:q,hasConfirmedCity:J,confirmedLocation:Z,setCity:me}=pi(),[Fe,ve]=o.useState(!0);if(t!=="home"&&t!=="landing")return u.warn("HomePage: Blocked render outside home route. Current page:",{page:t}),null;o.useEffect(()=>{sessionStorage.getItem("LOADING_LOCKED")&&(u.debug("HomePage: Clearing LoadingGate lock"),sessionStorage.removeItem("LOADING_LOCKED"))},[]);const re=um(E),Oe=!!(s||n),{activeTab:Le,setActiveTab:De,showComingSoonModal:ht,setShowComingSoonModal:St,comingSoonSection:Pt,isMenuOpen:te,setIsMenuOpen:ie,setIsLocationModalOpen:Ie,selectedCity:de,setSelectedCity:He,setCustomLinks:Qe,showRatingModal:xt,setShowRatingModal:ue,setSelectedTherapist:we,selectedRatingItem:_e,setSelectedRatingItem:Me,shuffleArray:Ue}=im(),[Be,mt]=o.useState(!1);o.useEffect(()=>{_&&_!==de&&(u.debug("Syncing selectedCity with CityContext:",{contextCity:_,currentSelectedCity:de}),He(_))},[_]),o.useEffect(()=>{u.debug("HomePage selectedCity changed:",{selectedCity:de,contextCity:_})},[de,_]),o.useEffect(()=>{if(typeof window!="undefined")try{let K=window.localStorage.getItem("user_city_id");const Y=window.localStorage.getItem("user_city_name");if(!K&&Y&&(K=xi(Y),window.localStorage.setItem("user_city_id",K)),!K&&!Y){u.debug("City not set â€” redirecting to landing."),h==null||h("landing");return}const pe=K||Y;pe&&(de==="all"||!de)&&(u.debug("Restoring selected city from storage on HomePage:",pe),He(K&&K!=="all"?K:Y||K))}catch(K){u.error("Failed to read city selection from storage",K)}},[J,h,de,He]);const Xe=o.useMemo(()=>{var K;return Z?{cityId:Z.cityId,cityName:Z.cityName||_||de||"Unknown City",latitude:typeof Z.latitude=="number"?Z.latitude:null,longitude:typeof Z.longitude=="number"?Z.longitude:null,locationText:(K=Z.locationText)!=null?K:null}:null},[Z,_,de]),rt=o.useMemo(()=>Xe?tm(Array.isArray(r)?r:[],Xe,{radiusKm:8,minResults:5,maxResults:12}):null,[r,Xe]);o.useEffect(()=>{if(typeof window=="undefined"){ve(!1);return}try{const K=window.localStorage.getItem("user_city_id"),Y=window.localStorage.getItem("user_city_name");if(!K&&!Y){u.warn("City not set â€” redirecting to landing."),h==null||h("landing");return}const pe=K||Y;pe&&pe!=="all"&&(de==="all"||!de)&&(u.debug("Restoring selected city from storage on HomePage:",pe),He(K&&K!=="all"?K:Y||K))}catch(K){u.error("Failed to read city selection from storage",K)}finally{ve(!1)}},[J,h,de,He]);const ba=!!(rt!=null&&rt.placeholders.length),ua=(Mi=rt==null?void 0:rt.distanceMatches.length)!=null?Mi:0,qe=de||_||null,ta=qe?ws(qe,($i=(Bi=re==null?void 0:re.home)==null?void 0:Bi.allAreas)!=null?$i:"All areas"):(Xe==null?void 0:Xe.cityName)||"your area",[Ut,Ta]=o.useState(!1),[aa,Ja]=o.useState(null),[ms,us]=o.useState(!1),[Ft,Tt]=o.useState(!1),[qa,oe]=o.useState(null),[fe,Ve]=o.useState(null),[Re,st]=o.useState(null),[ot,Et]=o.useState(null),[ya,gs]=o.useState(""),[wa,Hs]=o.useState(""),[V,ee]=o.useState([1e5,45e4]),[G,le]=o.useState(null),ke=X!=null?X:ya,{previewTherapistId:We,adminViewArea:Ce,bypassRadiusForAdmin:lt,devLocationOverride:Ge,devShowAllTherapists:Dt}=mm({hasAdminPrivileges:Oe}),[pt,Kt]=o.useState(!1);o.useEffect(()=>{const Y=setTimeout(async()=>{if(pt)return;const{captureSilentLocation:pe,getStoredLocation:Ae}=await z(async()=>{const{captureSilentLocation:ge,getStoredLocation:ye}=await import("./silentLocationCapture.CQB_8zQb.js");return{captureSilentLocation:ge,getStoredLocation:ye}},__vite__mapDeps([10,0,1,2,3,4,5,6,8,9])),Te=Ae();if(Te){u.debug("Using existing location capture:",Te),!m&&j&&j({lat:Te.lat,lng:Te.lng,address:Te.address||"Auto-detected location"}),Kt(!0);return}const be=await pe();be&&(u.debug("New location captured:",be),!m&&j&&j({lat:be.lat,lng:be.lng,address:be.address||"Auto-detected location"})),Kt(!0)},2e3);return()=>clearTimeout(Y)},[pt,m,j]);const{autoDetectedLocation:_t,setNearbyTherapists:hs,nearbyPlaces:Ne,setNearbyPlaces:Ya,nearbyHotels:Qa,setNearbyHotels:Ai,cityFilteredTherapists:Xa,setCityFilteredTherapists:ft,isLocationDetecting:Aa,parseCoordinates:Jt}=dm({therapists:r,places:l,hotels:g,selectedCity:de,propSelectedCity:x,userLocation:m,previewTherapistId:We,adminViewArea:Ce,bypassRadiusForAdmin:lt,devLocationOverride:Ge,devShowAllTherapists:Dt,hasAdminPrivileges:Oe,onSetUserLocation:j});o.useEffect(()=>{let K=de||_||(typeof window!="undefined"?window.localStorage.getItem("user_city_name"):null);if((!K||K==="all")&&typeof window!="undefined"){const pe=window.localStorage.getItem("user_city_name"),Ae=window.localStorage.getItem("user_city_id");K=(pe||Ae||"").trim()||K}const Y=!!K&&K!=="all";if(!Fe&&!J&&!Y&&K!=="all"){ft([]);return}if(!(!Array.isArray(r)||r.length===0))if(Y){const pe=Ii(r,K);pe.length===0&&r.length>0&&u.warn('ðŸ™ï¸ No therapists match selected city. Ensure therapist profiles have city/locationId set (e.g. "Yogyakarta", "yogyakarta", "Jogja").',{city:K,totalTherapists:r.length,sampleCities:r.slice(0,5).map(ge=>ge.city||ge.locationId||ge.location_id||ge.location)});const Ae=Z==null?void 0:Z.latitude,Te=Z==null?void 0:Z.longitude;if(typeof Ae=="number"&&typeof Te=="number"){const ge={lat:Ae,lng:Te},bt=[...pe.map(Ze=>{const tt=jn(Ze),Lt=tt?qo(ge,tt)/1e3:null;return{therapist:Ze,distanceKm:Lt}})].sort((Ze,tt)=>Ze.distanceKm==null&&tt.distanceKm==null?0:Ze.distanceKm==null?1:tt.distanceKm==null?-1:Ze.distanceKm-tt.distanceKm).map(Ze=>({...Ze.therapist,_distanceKm:Ze.distanceKm}));u.debug("ðŸ™ï¸ City + nearest first",{city:K,count:bt.length,total:r.length}),ft(bt)}else u.debug("ðŸ™ï¸ City filter",{city:K,count:pe.length,total:r.length}),ft(pe)}else K==="all"&&ft(r)},[Fe,J,r,de,_,Z,ft]),o.useEffect(()=>{if(typeof window!="undefined")try{const K=window.localStorage.getItem("user_city_id"),Y=window.localStorage.getItem("user_city_name");if(!K&&!Y){u.warn("City not set â€” redirecting to landing."),h==null||h("landing");return}const pe=K||Y;pe&&pe!=="all"&&(de==="all"||!de)&&He(K&&K!=="all"?K:Y||K)}catch(K){u.error("Failed to read city selection from storage",K)}},[J,h,de,He]);const[Pn,ps]=o.useState([]),[Ei,Vs]=o.useState([]),[Di,_i]=o.useState(!1),Li=o.useRef(null),fl=o.useRef(null);o.useEffect(()=>((async()=>{try{u.debug("Initializing Google Maps for city location system..."),await Fl(),_i(!0),u.debug("Google Maps initialized successfully for city filtering")}catch(Y){u.warn("Google Maps failed to load, using fallback location matching:",{error:Y})}})(),document.body.classList.add("has-footer","is-home"),()=>{document.body.classList.remove("has-footer","is-home")}),[]),o.useEffect(()=>{De("home")},[]),o.useEffect(()=>{try{const K=sessionStorage.getItem("advanced_search_params");if(!K)return;const Y=JSON.parse(K),pe=Y.providerType;pe==="massage_place"?De("places"):pe==="skin_care"&&De("facials"),Y.city&&Y.city!=="all"&&me&&me(Y.city),sessionStorage.removeItem("advanced_search_params")}catch{}},[me]),o.useEffect(()=>{if(X){gs(X);try{const K=sessionStorage.getItem("massage_type_filter_view");De(K==="places"?"places":"home"),sessionStorage.removeItem("massage_type_filter_view")}catch{}}},[X]);const In=o.useRef(!1);o.useEffect(()=>{(async()=>{if(!r||r.length===0){u.debug("Skipping prefetch - no therapists");return}if(In.current){u.debug("Skipping prefetch - already completed");return}u.debug("Prefetching data for ".concat(r.length," therapists..."));try{const Y=await nm(r);le(Y),In.current=!0,u.debug("Prefetch complete - ".concat(Y.menus.size," menus, ").concat(Y.shareLinks.size," share links"))}catch(Y){u.error("Prefetch failed:",{error:Y}),le({menus:new Map,shareLinks:new Map}),In.current=!0}})()},[r.length]),o.useEffect(()=>(document.body.classList.add("has-footer"),document.body.classList.add("is-home"),()=>{document.body.classList.remove("has-footer"),document.body.classList.remove("is-home")}),[]),o.useEffect(()=>{const K=()=>{var pe,Ae;return(Ae=(pe=window.google)==null?void 0:pe.maps)!=null&&Ae.places?(_i(!0),!0):!1},Y=()=>{const pe=To();if(!pe){u.warn("Google Maps API key not configured");return}u.debug("Loading Google Maps API for location autocomplete"),Hl(pe)};K()||Y()},[]),o.useEffect(()=>{if(!(!Di||!Li.current))try{const K=new window.google.maps.places.Autocomplete(Li.current,{types:["(cities)"],fields:["geometry","formatted_address","name"]});K.addListener("place_changed",()=>{const Y=K.getPlace();if(!Y.geometry||!Y.geometry.location){u.warn("No location details available for selected place");return}const pe=Y.geometry.location.lat(),Ae=Y.geometry.location.lng(),Te=Y.formatted_address||Y.name||"Selected location";u.debug("Location selected from autocomplete",{address:Te,lat:pe,lng:Ae}),j&&j({address:Te,lat:pe,lng:Ae})}),fl.current=K,u.debug("Google Maps Autocomplete initialized")}catch(K){u.error("Failed to initialize autocomplete",{error:K})}},[Di,j]);const Ri=()=>{ue(!1),we(null),Me(null)},bl=async()=>{if(_e)try{const K=_e.item.id||_e.item.$id;await Wl.create({providerId:String(K),providerType:_e.type,rating:0,reviewContent:"",reviewerId:"",status:"pending"}),Ri()}catch(K){u.error("Error submitting review",{error:K})}};o.useEffect(()=>{try{!n&&!s&&!i&&!m&&!_t&&setTimeout(()=>{Ie(!0)},1e3)}catch(K){u.warn("HomePage location modal effect warning (safe to ignore in React 19)",{error:K})}},[n,s,i,m,_t]),o.useEffect(()=>{u.debug("Automatic location detection disabled - users must select city manually")},[n,s,_t,Aa,m,j]),o.useEffect(()=>{u.debug("Auto city detection disabled - user must select city via CitySelectionPage")},[m]);const Ea=(K,Y)=>{var Te;if(!K)return!1;const pe=((Te=K.name)==null?void 0:Te.toLowerCase())||"",Ae=Y==="therapist"?pe.includes("budi"):pe.includes("sample")&&pe.includes("massage")&&pe.includes("spa");return Ae&&u.debug("Featured sample detected: ".concat(Y,' "').concat(K.name,'" - will show in ALL Indonesian cities')),Ae},yl=K=>{if(typeof K=="boolean")return K;if(typeof K=="string"){const Y=K.trim().toLowerCase();if(Y==="true")return!0;if(Y==="false")return!1}return null},wl=K=>{const Y=yl(K.isLive),pe=(K.status||K.availability||"").toString().trim().toLowerCase();let Ae=!1;if(K.coordinates){if(typeof K.coordinates=="object"&&K.coordinates.lat!=null)Ae=!0;else if(typeof K.coordinates=="string")try{const be=JSON.parse(K.coordinates);be&&typeof be.lat=="number"&&typeof be.lng=="number"&&(Ae=!0)}catch{}}return K.city||K.locationId||K.location||Ae?!0:!(Y===!1&&(pe==="offline"||pe===""))},vl=(K,Y)=>{if(!K||K.length===0)return[];if(Y.toLowerCase()==="yogyakarta"||Y.toLowerCase()==="yogya"||Y.toLowerCase()==="jogja")return[];const pe=K.filter(ye=>{if(!ye.location)return!1;const Ee=ye.location.toLowerCase();return Ee.includes("yogyakarta")||Ee.includes("yogya")||Ee.includes("jogja")});u.debug("Found ".concat(pe.length," Yogyakarta therapists for showcase generation"));let Ae=[...pe];if(pe.length>0&&pe.length<5){for(u.debug("Only ".concat(pe.length," Yogyakarta therapists available, expanding to 5"));Ae.length<5;)Ae=[...Ae,...pe];Ae=Ae.slice(0,5),u.debug("Expanded to ".concat(Ae.length," therapists for showcase"))}const be=Ue([...Ae]).slice(0,5);u.debug("Selected ".concat(be.length," therapists for showcase in ").concat(Y),{therapistNames:be.map(ye=>ye.name)});const ge=be.map((ye,Ee)=>({...ye,status:"busy",availability:"busy",isAvailable:!1,location:"".concat(Y,", Indonesia"),city:Y,locationId:Y.toLowerCase(),_locationArea:Y.toLowerCase(),isShowcaseProfile:!0,showcaseCity:Y}));return u.debug("Created ".concat(ge.length," showcase profiles from Yogyakarta for city: ").concat(Y)),ge},jl=({cityName:K,description:Y,onRequest:pe,onTherapistPortalClick:Ae})=>e.jsxs("div",{className:"rounded-2xl border border-dashed border-orange-300 bg-white px-5 py-6 text-center shadow-sm",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"Therapists Coming Soon"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:Y||"We are onboarding certified therapists for ".concat(K,".")}),e.jsxs("div",{className:"mt-4 flex flex-col gap-2 sm:flex-row sm:justify-center",children:[e.jsx("button",{onClick:()=>pe==null?void 0:pe(),className:"inline-flex items-center justify-center rounded-full bg-orange-500 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-orange-600 transition-colors",children:"Request Therapist"}),e.jsx("button",{onClick:()=>Ae==null?void 0:Ae(),className:"inline-flex items-center justify-center rounded-full border border-orange-300 bg-white px-4 py-2 text-sm font-semibold text-orange-600 shadow-sm hover:bg-orange-100 transition-colors",children:"Become a Therapist"})]})]});o.useEffect(()=>{(async()=>{const Y={lat:-7.7956,lng:110.3695},pe=Array.isArray(r)?r:[],Ae=Array.isArray(l)?l:[],Te=Array.isArray(g)?g:[],be=pe.map(Ee=>{const Ze=Jt(Ee.coordinates)||Y,tt=Ze&&Ze.lat&&Ze.lng?Oa(Ze):null,Lt=Ee.city||(tt&&tt!=="other"?tt:null)||null,qt=Ee.locationId||Lt||null,Da=Ee.location||Ee.city||Ee.locationId||tt||"Yogyakarta";return{...Ee,coordinates:Ze,city:Lt||Ee.city,locationId:qt||Ee.locationId,location:Da}}),ge=Ae.map(Ee=>{const bt=Jt(Ee.coordinates);return{...Ee,coordinates:bt||Y,location:Ee.location||"Yogyakarta"}}),ye=Te.map(Ee=>{const bt=Jt(Ee.coordinates);return{...Ee,coordinates:bt||Y,location:Ee.location||"Yogyakarta"}});hs(be),Ya(ge),Ai(ye)})()},[r,l,g,_t,m,de]),o.useEffect(()=>{const K=de||_||(typeof window!="undefined"?window.localStorage.getItem("user_city_name"):null);if(!J&&!(!!K&&K!=="all")&&K!=="all"){ps([]),Vs([]);return}const pe=de||K||"",Te=Ne.filter(ye=>ye.isLive===!0).filter(ye=>{if(Ea(ye,"place")||pe==="all")return!0;const Ee=ye.city||ye.locationId||ye.location;if(!Ee)return u.debug('Excluded place "'.concat(ye.name,'" - no city data')),!1;const bt=Ee.toLowerCase().trim(),Ze=pe.toLowerCase().trim(),tt=bt===Ze;return tt?u.debug('Included place "'.concat(ye.name,'" matches city "').concat(de,'"')):u.debug('Excluded place "'.concat(ye.name,'" (city: "').concat(Ee,'") does not match "').concat(de,'"')),tt});ps(Te);const ge=Qa.filter(ye=>ye.isLive===!0).filter(ye=>{if(Ea(ye,"hotel")||pe==="all")return!0;const Ee=ye.city||ye.locationId||ye.location;if(!Ee)return u.debug('Excluded hotel "'.concat(ye.name,'" - no city data')),!1;const bt=Ee.toLowerCase().trim(),Ze=pe.toLowerCase().trim(),tt=bt===Ze;return tt?u.debug('Included hotel "'.concat(ye.name,'" matches city "').concat(de,'"')):u.debug('Excluded hotel "'.concat(ye.name,'" (city: "').concat(Ee,'") does not match "').concat(de,'"')),tt});Vs(ge),rt&&(u.debug("[MATCH FLOW] Therapist matching summary",rt.stats),rt.placeholders.length>0&&u.debug("[MATCH FLOW] Placeholder therapists injected",{city:Xe==null?void 0:Xe.cityName,placeholderCount:rt.placeholders.length}))},[J,Ne,Qa,de,_,rt,Xe]),o.useEffect(()=>{(async()=>{try{const Te=await Vl.getAll();Qe(Te)}catch{}})();const Y=()=>{u.debug("toggleDrawer event received",{currentIsMenuOpen:te}),ie(Te=>!Te)},pe=()=>{u.debug("customer_dashboard_open_drawer event received",{currentIsMenuOpen:te}),ie(!0)};let Ae=[];try{typeof window!="undefined"&&window.addEventListener&&(window.addEventListener("toggleDrawer",Y),Ae.push(["toggleDrawer",Y]),window.addEventListener("customer_dashboard_open_drawer",pe),Ae.push(["customer_dashboard_open_drawer",pe]),u.debug("Added event listeners for drawer events"))}catch(Te){u.warn("Event listener setup warning (safe to ignore)",{error:Te})}return()=>{Ae.forEach(([Te,be])=>{try{typeof window!="undefined"&&window.removeEventListener&&window.removeEventListener(Te,be)}catch(ge){u.warn("Event listener cleanup warning (safe to ignore in React 19)",{error:ge})}})}},[]);const Ws=Array.isArray(r)?r:[];return Ws.filter(K=>K.status==="online").length,o.useEffect(()=>{const K=Array.isArray(r)?r:[],Y=K.filter(ye=>ye.rating&&ye.rating>0),pe=Y.length>0?Y.reduce((ye,Ee)=>ye+Ee.rating,0)/Y.length:4.8,Ae=K.reduce((ye,Ee)=>ye+(Ee.reviewCount||0),0)||500,Te={"@context":"https://schema.org","@type":"LocalBusiness",name:"IndaStreet Massage",image:"https://ik.imagekit.io/7grri5v7d/Massage%20hub%20indastreet.png",url:"https://www.indastreetmassage.com",telephone:"+62-812-3456-7890",address:{"@type":"PostalAddress",addressCountry:"Indonesia",addressLocality:"Multiple Cities",addressRegion:"Indonesia"},geo:{"@type":"GeoCoordinates",latitude:-8.4095,longitude:115.1889},priceRange:"$$",openingHoursSpecification:{"@type":"OpeningHoursSpecification",dayOfWeek:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],opens:"00:00",closes:"23:59"},aggregateRating:{"@type":"AggregateRating",ratingValue:pe.toFixed(1),reviewCount:Ae,bestRating:"5",worstRating:"1"},potentialAction:{"@type":"SearchAction",target:"https://www.indastreetmassage.com/search?q={search_term}","query-input":"required name=search_term"},sameAs:["https://www.facebook.com/share/g/1C2QCPTp62/","https://www.instagram.com/indastreet","https://www.instagram.com/indastreet.id/"]},be="homepage-schema";let ge=document.getElementById(be);return ge||(ge=document.createElement("script"),ge.id=be,ge.type="application/ld+json",document.head.appendChild(ge)),ge.textContent=JSON.stringify(Te),()=>{const ye=document.getElementById(be);ye&&ye.remove()}},[r]),J?e.jsxs("div",{className:"home-page-container scrollable min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50 w-full max-w-full ",children:[e.jsx(cs,{pageNumber:2,pageName:"HomePage",isLocked:!1}),e.jsx(Od,{}),e.jsx(vi,{language:W,onLanguageChange:C,onMenuClick:()=>{u.debug("UniversalHeader burger menu clicked in HomePage"),ie(!0)}}),e.jsx(vn,{condition:te,children:e.jsx(bn,{isHome:!0,isOpen:te,onClose:()=>{try{u.debug("AppDrawer onClose called"),ie(!1)}catch(K){u.error("AppDrawer onClose error",K)}},t:re,language:W,onMassageJobsClick:B,onHotelPortalClick:S,onVillaPortalClick:N,onTherapistPortalClick:k,onMassagePlacePortalClick:b,onFacialPortalClick:y,onAgentPortalClick:O,onCustomerPortalClick:H,onAdminPortalClick:T,onNavigate:h,onTermsClick:A,onPrivacyClick:c,onQRCodeClick:()=>h&&h("qr-code"),onLoginClick:M,therapists:r,places:l})}),e.jsx("div",{className:"bg-white sticky top-[60px] z-10",children:e.jsxs(Mr,{className:"px-0 sm:px-0 pt-0 pb-3",children:[(m||Xe)&&e.jsxs("div",{className:"bg-white flex flex-col items-center gap-0.5 pt-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[m&&e.jsx($l,{autoPlay:!0}),e.jsxs("svg",{className:"w-4 h-4 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:ta})]}),e.jsxs("p",{className:"text-base font-semibold text-gray-600",children:[q,"'s ",Le==="facials"||Le==="facial-places"?"Facial":"Massage"," Therapist Hub"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ua>0?"Prioritizing ".concat(ua," therapist").concat(ua===1?"":"s"," closest to you."):"Showing trusted therapists across the city."})]}),ba&&e.jsx("div",{className:"px-4 mt-3",children:e.jsxs("div",{className:"rounded-2xl border border-dashed border-orange-400 bg-orange-50 px-5 py-4 text-center shadow-sm",children:[e.jsxs("p",{className:"text-sm font-semibold text-orange-700",children:["We are onboarding therapists in ",ta,"."]}),e.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Request a therapist for your next session or become the first professional in this area."}),e.jsxs("div",{className:"mt-3 flex flex-col gap-2 sm:flex-row sm:justify-center",children:[e.jsx("button",{onClick:()=>h==null?void 0:h("contact"),className:"inline-flex items-center justify-center gap-2 rounded-full bg-orange-500 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-orange-600 transition-colors",children:"Request Therapist"}),e.jsx("button",{onClick:()=>k==null?void 0:k(),className:"inline-flex items-center justify-center gap-2 rounded-full bg-white px-4 py-2 text-sm font-semibold text-orange-600 border border-orange-300 shadow-sm hover:bg-orange-100 transition-colors",children:"Become a Therapist"})]})]})}),(()=>{const K=Le==="facials"||Le==="facial-places";return e.jsx("div",{className:"flex bg-gray-200 rounded-full p-1 max-w-2xl mx-auto overflow-x-auto",children:K?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>De("facials"),className:"flex-1 min-w-0 py-2 px-2 sm:px-3 rounded-full flex items-center justify-center gap-1 sm:gap-1.5 text-[11px] sm:text-xs font-semibold transition-colors duration-300 min-h-[42px] ".concat(Le==="facials"?"bg-orange-500 text-white shadow":"text-gray-600 hover:bg-gray-100"),children:[e.jsx(ss,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap overflow-hidden text-ellipsis",children:"Home Facial"})]}),e.jsxs("button",{onClick:()=>De("facial-places"),className:"flex-1 min-w-0 py-2 px-2 sm:px-3 rounded-full flex items-center justify-center gap-1 sm:gap-1.5 text-[11px] sm:text-xs font-semibold transition-colors duration-300 min-h-[42px] ".concat(Le==="facial-places"?"bg-orange-500 text-white shadow":"text-gray-600 hover:bg-gray-100"),children:[e.jsx(si,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap overflow-hidden text-ellipsis",children:"Facial Places"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>De("home"),className:"flex-1 min-w-0 py-2 px-2 sm:px-3 rounded-full flex items-center justify-center gap-1 sm:gap-1.5 text-[11px] sm:text-xs font-semibold transition-colors duration-300 min-h-[42px] ".concat(Le==="home"?"bg-orange-500 text-white shadow":"text-gray-600 hover:bg-gray-100"),children:[e.jsx(Br,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap overflow-hidden text-ellipsis",children:"Home Massage"})]}),e.jsxs("button",{onClick:()=>De("places"),className:"flex-1 min-w-0 py-2 px-2 sm:px-3 rounded-full flex items-center justify-center gap-1 sm:gap-1.5 text-[11px] sm:text-xs font-semibold transition-colors duration-300 min-h-[42px] ".concat(Le==="places"?"bg-orange-500 text-white shadow":"text-gray-600 hover:bg-gray-100"),children:[e.jsx(si,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap overflow-hidden text-ellipsis",children:"Massage Places"})]})]})})})(),(We||Ce&&lt)&&Oe&&e.jsxs("div",{className:"bg-yellow-100 border-2 border-yellow-400 rounded-lg p-3 max-w-2xl mx-auto mt-4",children:[e.jsx("div",{className:"font-bold text-yellow-800 mb-1",children:"ðŸ” Admin Mode Active"}),e.jsxs("div",{className:"text-sm text-yellow-700",children:[We&&e.jsxs("div",{children:["â€¢ Preview Mode: Showing therapist ID ",We," (bypassing 10km radius)"]}),Ce&&lt&&e.jsxs("div",{children:["â€¢ Area View: Showing all therapists in ",Ce," (radius bypass)"]}),e.jsx("div",{className:"mt-1 text-xs",children:"This mode is only visible to admins/therapists"})]})]}),e.jsx("div",{className:"max-w-2xl mx-auto mt-4",children:e.jsx("div",{className:"flex flex-row gap-2 sm:gap-3 items-center min-h-[54px]",children:(()=>{var Y,pe,Ae,Te,be,ge,ye,Ee,bt,Ze,tt;const K=Le==="facials"||Le==="facial-places";return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>De("home"),title:(pe=(Y=E==null?void 0:E.home)==null?void 0:Y.massage)!=null?pe:"Home massage & massage places","aria-label":"Massage",className:"flex-1 min-w-0 h-[42px] px-2 rounded-full font-semibold text-sm flex items-center justify-center gap-1.5 sm:gap-2 transition-colors border ".concat(K?"bg-gray-200 text-gray-600 border-gray-300 hover:bg-gray-300":"bg-orange-500 text-white border-orange-500 shadow"),children:[e.jsx(Br,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:(Te=(Ae=E==null?void 0:E.home)==null?void 0:Ae.massage)!=null?Te:"Massage"})]}),e.jsx("button",{type:"button",onClick:()=>mt(!0),title:ws(_!=null?_:null,(ge=(be=E==null?void 0:E.home)==null?void 0:be.allAreas)!=null?ge:"All areas"),"aria-label":((ye=E==null?void 0:E.home)==null?void 0:ye.changeCity)||"Select location",className:"flex-shrink-0 w-[54px] h-[54px] rounded-full bg-orange-50 border border-orange-200 flex items-center justify-center text-orange-500 hover:bg-orange-100 transition-colors shadow-sm",children:e.jsx("svg",{className:"w-5 h-5 flex-shrink-0",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":!0,children:e.jsx("path",{fillRule:"evenodd",d:"M11.54 22.351l.07.04.028.016a.76.76 0 00.723 0l.028-.015.071-.041a16.975 16.975 0 001.144-.742 19.58 19.58 0 002.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 00-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 002.682 2.282 16.975 16.975 0 001.145.742zM12 13.5a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),e.jsxs("button",{onClick:()=>De("facials"),title:(bt=(Ee=E==null?void 0:E.home)==null?void 0:Ee.facialHomeService)!=null?bt:"Facial & Skin Clinic","aria-label":"Facial",className:"flex-1 min-w-0 h-[42px] px-2 rounded-full font-semibold text-sm flex items-center justify-center gap-1.5 sm:gap-2 transition-colors border ".concat(K?"bg-orange-500 text-white border-orange-500 shadow":"bg-gray-200 text-gray-600 border-gray-300 hover:bg-gray-300"),children:[e.jsx(ss,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap truncate min-w-0",children:((Ze=E==null?void 0:E.home)==null?void 0:Ze.facialHomeService)||((tt=E==null?void 0:E.home)==null?void 0:tt.facial)||"Facial"})]})]})})()})})]})}),e.jsx("main",{className:"w-full max-w-full ",children:e.jsxs(Mr,{className:"px-3 sm:px-4 pt-8 pb-24",children:[Le==="home"&&e.jsxs("div",{className:"max-w-full  pb-8",children:[e.jsxs("div",{className:"mb-3 text-center mt-[26px]",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:((Oi=E==null?void 0:E.home)==null?void 0:Oi.therapistsTitle)||"Home Service Therapists"}),e.jsx("p",{className:"text-gray-600",children:_==="all"||!_?((Ui=E==null?void 0:E.home)==null?void 0:Ui.therapistsSubtitleAll)||"We monitor provider locations and user activity to ensure a safe platform for everyone.":((Wi=(Fi=E==null?void 0:E.home)==null?void 0:Fi.therapistsSubtitleCity)==null?void 0:Wi.replace("{city}",ws(_!=null?_:null,(Vi=(Hi=E==null?void 0:E.home)==null?void 0:Hi.allAreas)!=null?Vi:"All areas")))||"We monitor provider locations and user activity to ensure a safe platform for everyone."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:((zi=E==null?void 0:E.home)==null?void 0:zi.browseRegionNote)||"Browse Region dropdown (distance still applies)"})]}),e.jsxs("div",{className:"space-y-3 max-w-full overflow-hidden",children:[(()=>{const K=Q=>n&&n.type==="therapist"&&(String(Q.id)===String(n.id)||String(Q.$id)===String(n.id)),Y=_t||(m?{lat:m.lat,lng:m.lng}:null),pe=Q=>{try{const ne=typeof Q.coordinates=="string"?JSON.parse(Q.coordinates):Q.coordinates;if(typeof(ne==null?void 0:ne.lat)=="number"&&typeof(ne==null?void 0:ne.lng)=="number")return ne}catch{u.warn("Invalid coordinates for therapist",{therapistId:Q.$id})}return null},Ae=(Q,ne)=>{const nt=(ne.lat-Q.lat)*Math.PI/180,It=(ne.lng-Q.lng)*Math.PI/180,ga=Math.sin(nt/2)*Math.sin(nt/2)+Math.cos(Q.lat*Math.PI/180)*Math.cos(ne.lat*Math.PI/180)*Math.sin(It/2)*Math.sin(It/2);return 6371*(2*Math.atan2(Math.sqrt(ga),Math.sqrt(1-ga)))};let ge=(Array.isArray(Xa)?Xa.slice(0,100):[]).map(Q=>{let ne=null,xe=Q.city||Q.location||"Unknown";if(Y){const nt=pe(Q)||(Q.geopoint?{lat:Q.geopoint.latitude,lng:Q.geopoint.longitude}:null);if(nt){ne=Ae(Y,nt);const It=Zn(nt,25);It&&(xe=It.locationId)}}return{...Q,_distance:ne,_locationArea:xe}}).filter(Q=>{var xe;return(xe=Q.name)==null||xe.toLowerCase().includes("budi"),wl(Q),K(Q),Ea(Q,"therapist")?!0:de!=="all"&&Ce&&lt&&Oe?Q._locationArea===Ce:!0});const ye=ge.find(Q=>{var ne;return(ne=Q.name)==null?void 0:ne.toLowerCase().includes("budi")});if(ge.filter(Q=>{var ne;return!((ne=Q.name)!=null&&ne.toLowerCase().includes("budi"))}),ge.length===1&&ye&&u.warn("[CRITICAL ISSUE] Only Budi is in the final list - this is the bug"),Ut&&(ge=ge.filter(Q=>{const ne=String(Q.therapistGender||Q.gender||"").toLowerCase(),xe=String(Q.clientPreferences||"").toLowerCase();return ne==="female"||xe.includes("female")||xe.includes("woman")||ne==="unisex"}),u.debug("Female filter applied: ".concat(ge.length," female/female-friendly therapists"))),aa&&(ge=ge.filter(Q=>{let ne=[];if(Q.serviceAreas)try{typeof Q.serviceAreas=="string"?ne=JSON.parse(Q.serviceAreas):Array.isArray(Q.serviceAreas)&&(ne=Q.serviceAreas)}catch(nt){return u.warn("Failed to parse serviceAreas for therapist",{therapistName:Q.name,error:nt}),!1}const xe=Array.isArray(ne)&&ne.includes(aa);return xe&&u.debug("Area filter: ".concat(Q.name,' serves area "').concat(aa,'"')),xe}),u.debug("Area filter applied: ".concat(ge.length,' therapists serving area "').concat(aa,'"'))),(Re||ot||ke||wa||V[0]!==1e5||V[1]!==45e4)&&(u.debug("Applying advanced filters",{therapistGender:Re,serviceFor:ot,massageType:ke,specialFeature:wa,priceRange:V}),ge=ge.filter(Q=>{if(Re&&String(Q.therapistGender||Q.gender||"").toLowerCase()!==Re)return!1;if(ot){const xe=String(Q.clientPreferences||"").toLowerCase(),nt=ot.toLowerCase();if(!(nt==="women"?["women","female","ladies"]:nt==="men"?["men","male","gentleman"]:nt==="children"?["children","kids","family"]:[]).some(sa=>xe.includes(sa))&&xe!=="all"&&xe!=="everyone")return!1}if(ke){const xe=String(Q.services||Q.massageTypes||"").toLowerCase(),nt=String(Q.specialties||"").toLowerCase(),It=ke.toLowerCase();if(!xe.includes(It)&&!nt.includes(It))return!1}if(wa)switch(wa){case"verified-only":if(!Q.isVerified&&!Q.hasIndustryStandards)return!1;break;case"with-facial":if(!String(Q.services||"").toLowerCase().includes("facial"))return!1;break;case"highly-rated":if(parseFloat(Q.averageRating||"0")<4.5)return!1;break;case"coin-rub":if(!String(Q.services||Q.specialties||"").toLowerCase().includes("coin"))return!1;break;case"body-scrub":if(!String(Q.services||Q.specialties||"").toLowerCase().includes("scrub"))return!1;break;case"hot-stones":if(!String(Q.services||Q.specialties||"").toLowerCase().includes("hot stone"))return!1;break;case"aromatherapy":if(!String(Q.services||Q.specialties||"").toLowerCase().includes("aroma"))return!1;break;case"deep-pressure":if(!String(Q.services||Q.specialties||"").toLowerCase().includes("deep"))return!1;break;case"home-service":if(!Q.homeService&&!Q.mobileService)return!1;break}const ne=parseInt(Q.price||Q.basePrice||Q.hourlyRate||"0");return!(ne>0&&(ne<V[0]||ne>V[1]))}),u.debug("Advanced filters applied: ".concat(ge.length," therapists matching criteria"))),n&&n.type==="therapist"&&!ge.some(ne=>String(ne.id)===String(n.id)||String(ne.$id)===String(n.id))){const ne=Ws.find(xe=>String(xe.id)===String(n.id)||String(xe.$id)===String(n.id));if(ne){let xe=de==="all";if(!xe&&ne.coordinates&&Y){const nt={lat:ne.coordinates.lat||0,lng:ne.coordinates.lng||0};xe=Ae(Y,nt)<=10}xe&&(ge=[ne,...ge])}}if(de!=="all"){const Q=ge.filter(ne=>!Ea(ne,"therapist"));if(Q.length===0){const ne=vl(Ws,de);ne.length>0&&(ge=[...ge,...ne],u.debug("Added ".concat(ne.length," Yogyakarta showcase profiles to ").concat(de," display (no real therapists)")))}else u.debug("".concat(de," has ").concat(Q.length," real therapist(s) in display, skipping showcase profiles"))}const Ee=Q=>{var Yt,La,zs;let ne=0;const xe=String(Q.status||"").toLowerCase();xe==="available"||xe==="online"?ne+=1e4:xe==="busy"?ne+=5e3:ne+=0,(Q.isPremium||Q.accountType==="premium")&&(ne+=500),(Q.isVerified||Q.hasIndustryStandards||((Yt=Q.certifications)==null?void 0:Yt.length)>0)&&(ne+=300);const nt=new Date,It=Q.lastSeen||Q.$updatedAt||Q.updatedAt;if(It){const Gs=new Date(It);if(!isNaN(Gs.getTime())){const va=(nt.getTime()-Gs.getTime())/36e5;va<=1?ne+=200:va<=6?ne+=150:va<=24?ne+=100:va<=72?ne+=50:va<=168&&(ne+=25)}}const ga=(zs=(La=Q.missedBookingsCount)!=null?La:Q.missedBookings)!=null?zs:0;ne-=Math.min(500,ga*100);const sa=parseFloat(Q.averageRating||"0");sa>=4.5?ne+=100:sa>=4?ne+=75:sa>=3.5&&(ne+=50);const _a=parseInt(Q.orderCount||"0");return _a>=50?ne+=50:_a>=20?ne+=30:_a>=10&&(ne+=20),ne};ge=(Q=>Q.map(ne=>{const xe=String(ne.status||"").toLowerCase();return xe==="offline"||xe===""?{...ne,displayStatus:"Busy",_originalStatus:ne.status,status:"Busy"}:ne}))(ge),ge=ge.slice().map(Q=>({...Q,priorityScore:Ee(Q),randomSeed:Math.random()})).sort((Q,ne)=>{if(ne.priorityScore!==Q.priorityScore)return ne.priorityScore-Q.priorityScore;if(Y&&Q._distance!==null&&ne._distance!==null&&Q._distance!==ne._distance)return Q._distance-ne._distance;const xe=parseFloat(Q.price)||parseFloat(Q.basePrice)||999999,nt=parseFloat(ne.price)||parseFloat(ne.basePrice)||999999;return xe!==nt?xe-nt:Q.randomSeed-ne.randomSeed});const Lt=ge.map(Q=>{let ne=Q.location,xe=Q.city;return Ea(Q,"therapist")&&de!=="all"&&(ne=de,xe=de,u.debug("Overriding featured sample ".concat(Q.name," location to ").concat(de))),{...Q,location:ne,city:xe}}).slice(0,12),qt={};Lt.forEach(Q=>{const ne=Q._locationArea||"Unknown";qt[ne]||(qt[ne]=[]),qt[ne].push(Q)});const Da=Object.keys(qt).sort();return e.jsx(e.Fragment,{children:Da.map(Q=>{const ne=qt[Q];return e.jsx("div",{className:"mb-8",children:ne.map((xe,nt)=>{var _a;const It=xe._isPlaceholder&&String(xe.$id||xe.id||"").startsWith("placeholder-");if(xe._isPlaceholder&&It)return e.jsx("div",{className:"mb-8",children:e.jsx(jl,{cityName:ta,description:xe.description,onRequest:()=>h==null?void 0:h("contact"),onTherapistPortalClick:k})},xe.$id||xe.id);let ga=[];try{xe.languages&&(ga=JSON.parse(xe.languages))}catch{ga=xe.languages?xe.languages.split(",").map(La=>La.trim()):[]}xe.discountPercentage&&xe.discountPercentage>0&&xe.discountEndTime&&(xe.discountPercentage,new Date(xe.discountEndTime));const sa=We&&(String(xe.$id)===String(We)||String(xe.id)===String(We));return e.jsxs("div",{children:[sa&&e.jsx("div",{className:"bg-blue-100 border-2 border-blue-400 rounded-lg p-2 mb-2 text-center",children:e.jsx("span",{className:"text-blue-700 font-semibold text-sm",children:"ðŸ” Preview Mode - Showing outside 10km radius"})}),e.jsx("div",{className:sa?"ring-4 ring-blue-400 rounded-lg":"",children:e.jsx(Ad,{therapist:xe,userLocation:_t||(m?{lat:m.lat,lng:m.lng}:null),readOnly:v,selectedCity:de,t:E,avatarOffsetPx:8,prefetchedMenu:G==null?void 0:G.menus.get(String(xe.$id||xe.id)),prefetchedShareLink:G==null?void 0:G.shareLinks.get(String(xe.$id||xe.id)),onClick:Yt=>{var va;u.debug("TherapistHomeCard onClick",{selectedCity:de}),p==null||p(Yt);const La=Yt.id||Yt.$id,zs=((va=Yt.name)==null?void 0:va.toLowerCase().replace(/\s+/g,"-"))||"therapist",Gs="/profile/therapist/".concat(La,"-").concat(zs);window.history.pushState({},"",Gs),h==null||h("therapist-profile")},onNavigate:h,onIncrementAnalytics:Yt=>L(xe.id||xe.$id,"therapist",Yt)})}),e.jsx("div",{className:"mt-2 mb-8 flex justify-center",children:e.jsxs("button",{onClick:()=>h==null?void 0:h("indastreet-partners"),className:"inline-flex items-center gap-2 text-sm text-gray-600 hover:text-orange-600 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 text-yellow-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),e.jsx("span",{className:"font-medium",children:((_a=re==null?void 0:re.home)==null?void 0:_a.accommodationMassageService)||"Accommodation With Massage Service"})]})})]},xe.$id||xe.id)})},"area-".concat(Q))})})})(),Ws.filter(K=>K.isLive===!0||n&&n.type==="therapist"&&(String(K.id)===String(n.id)||String(K.$id)===String(n.id))).length===0&&e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg",children:[e.jsx("p",{className:"text-gray-500",children:((Gi=re==null?void 0:re.home)==null?void 0:Gi.noTherapistsAvailable)||"No therapists available in your area at the moment."}),_t&&e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Showing providers within 15km of your location"})]})]})]}),xt&&_e&&e.jsx($d,{onClose:Ri,onSubmit:bl,itemName:_e.item.name,itemType:_e.type,itemId:_e.item.id||_e.item.$id,t:{title:((Ki=re.ratingModal)==null?void 0:Ki.title)||"Rate {itemName}",prompt:((Ji=re.ratingModal)==null?void 0:Ji.prompt)||"How was your experience?",whatsappLabel:((qi=re.ratingModal)==null?void 0:qi.whatsappLabel)||"WhatsApp Number",whatsappPlaceholder:((Yi=re.ratingModal)==null?void 0:Yi.whatsappPlaceholder)||"Enter your WhatsApp number",submitButton:((Qi=re.ratingModal)==null?void 0:Qi.submitButton)||"Submit Review",selectRatingError:((Xi=re.ratingModal)==null?void 0:Xi.selectRatingError)||"Please select a rating",whatsappRequiredError:((Zi=re.ratingModal)==null?void 0:Zi.whatsappRequiredError)||"WhatsApp number is required",confirmationV2:((er=re.ratingModal)==null?void 0:er.confirmationV2)||"Thank you for your review! It will be visible once approved by admin."}}),Le==="places"&&e.jsxs("div",{className:"max-w-full ",children:[e.jsxs("div",{className:"mb-3 text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:((tr=E==null?void 0:E.home)==null?void 0:tr.massagePlacesTitle)||"Featured Massage Spas"}),e.jsx("p",{className:"text-gray-600",children:de==="all"?"Find the best massage places across Indonesia":"Find the best massage places in ".concat(de)})]}),(()=>{var pe,Ae;try{const Te=(pe=l==null?void 0:l.length)!=null?pe:0,be=l?l.filter(ge=>ge.isLive).length:0;u.debug("Massage Places Tab",{total:Te,live:be})}catch{}let K=Pn.slice();ke&&(K=K.filter(Te=>{var ge;return Ol((ge=Te.massageTypes)!=null?ge:Te.massagetypes).some(ye=>ye===ke||ye.trim()===ke)}));const Y=Te=>{const be=String(Te.status||"").toLowerCase();let ge=!1;try{if(Te.openingTime&&Te.closingTime){const ye=new Date,[Ee,bt]=String(Te.openingTime).split(":").map(Number),[Ze,tt]=String(Te.closingTime).split(":").map(Number),Lt=ye.getHours()*60+ye.getMinutes(),qt=(Ee||0)*60+(bt||0),Da=(Ze||0)*60+(tt||0);Da>=qt?ge=Lt>=qt&&Lt<=Da:ge=Lt>=qt||Lt<=Da}}catch{}return be==="available"||be==="online"||ge?1e4:be==="busy"?5e3:0};return K.sort((Te,be)=>Y(be)-Y(Te)),K.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mb-4",children:e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("p",{className:"text-gray-500 mb-2 text-lg font-semibold",children:((Ae=E==null?void 0:E.home)==null?void 0:Ae.noPlacesAvailable)||"Tidak ada tempat pijat tersedia di area Anda"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Check back soon for featured spas!"}),_t&&e.jsx("p",{className:"text-xs text-gray-300 mt-2",children:"Showing places within 15km of your location"}),e.jsxs("p",{className:"text-xs text-gray-300 mt-4",children:["Total places in DB: ",(l==null?void 0:l.length)||0," | Nearby: ",Ne.length," | Live: ",K.length]})]}):e.jsx("div",{className:"space-y-4 max-w-full overflow-hidden",children:K.slice(0,9).map((Te,be)=>{var ye;const ge=Te.id||Te.$id;return e.jsxs(ce.Fragment,{children:[e.jsx(_d,{place:Te,onClick:Ee=>{var Lt;u.debug("Homepage place card clicked",{placeId:Ee.id||Ee.$id,placeName:Ee.name}),I(Ee);const bt=Ee.id||Ee.$id,Ze=((Lt=Ee.name)==null?void 0:Lt.toLowerCase().replace(/\s+/g,"-"))||"place",tt="/profile/place/".concat(bt,"-").concat(Ze);u.debug("Pushing place profile URL",{url:tt}),window.history.pushState({},"",tt)},onIncrementAnalytics:Ee=>L(ge,"place",Ee),userLocation:_t||(m?{lat:m.lat,lng:m.lng}:null)}),e.jsx("div",{className:"mt-2 mb-4 flex justify-center",children:e.jsxs("button",{onClick:()=>h==null?void 0:h("indastreet-partners"),className:"inline-flex items-center gap-2 text-sm text-gray-600 hover:text-orange-600 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 text-yellow-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),e.jsx("span",{className:"font-medium",children:((ye=re==null?void 0:re.home)==null?void 0:ye.accommodationMassageService)||"Accommodation With Massage Service"})]})})]},ge)})})})()]}),(Le==="facials"||Le==="facial-places")&&e.jsxs("div",{className:"max-w-full ",children:[e.jsxs("div",{className:"mb-3 text-center mt-[26px]",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:((ar=E==null?void 0:E.home)==null?void 0:ar.facialTherapistsTitle)||"Home Service Facial"}),e.jsx("p",{className:"text-gray-600",children:_==="all"||!_?((sr=E==null?void 0:E.home)==null?void 0:sr.facialTherapistsSubtitleAll)||"We monitor provider locations and user activity to ensure a safe platform for everyone.":((or=(nr=E==null?void 0:E.home)==null?void 0:nr.facialTherapistsSubtitleCity)==null?void 0:or.replace("{city}",ws(_!=null?_:null,(rr=(ir=E==null?void 0:E.home)==null?void 0:ir.allAreas)!=null?rr:"All areas")))||"We monitor provider locations and user activity to ensure a safe platform for everyone."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:((lr=E==null?void 0:E.home)==null?void 0:lr.browseRegionNote)||"Browse Region dropdown (distance still applies)"})]}),(()=>{const K=be=>String(be.availability||be.status||"offline").trim().toLowerCase(),Y=be=>{if(Ea(be,"place"))return!0;const ge=be.isLive!==!1,ye=K(be);return!(ge===!1&&(ye==="offline"||ye===""))},pe=((d==null?void 0:d.filter(be=>{if(!Y(be))return!1;if(Ea(be,"place"))return u.debug('Including featured place "'.concat(be.name,'" in Facial Places tab for city "').concat(de,'"')),!0;if(de==="all")return!0;if(be.coordinates){const ge=Array.isArray(be.coordinates)?{lat:be.coordinates[1],lng:be.coordinates[0]}:{lat:be.coordinates.lat||0,lng:be.coordinates.lng||0},ye=Zn(ge,25);return(ye==null?void 0:ye.locationId)===de}return!1}))||[]).slice(),Ae=be=>{const ge=String(be.availability||be.status||"offline").toLowerCase();return ge==="available"||ge==="online"?1e4:ge==="busy"?5e3:0};pe.sort((be,ge)=>Ae(ge)-Ae(be));const Te=pe.length>0?pe:[ei];return e.jsx("div",{className:"space-y-4 max-w-full overflow-hidden",children:Te.slice(0,9).map(be=>{const ge=be.id||be.$id;return e.jsx(Rd,{place:be,onClick:I,onIncrementAnalytics:ye=>L(ge,"place",ye),userLocation:_t||(m?{lat:m.lat,lng:m.lng}:null)},ge)})})})()]})]})}),e.jsx("style",{children:'\n                @keyframes float {\n                    0%, 100% {\n                        transform: translateY(0px);\n                    }\n                    50% {\n                        transform: translateY(-8px);\n                    }\n                }\n                .animate-float {\n                    animation: float 6s ease-in-out infinite;\n                }\n                \n                /* EMERGENCY FOOTER FIX - HIGHEST PRIORITY */\n                footer[class*="fixed"] {\n                    position: fixed !important;\n                    bottom: 0px !important;\n                    left: 0px !important;\n                    right: 0px !important;\n                    z-index: 99999 !important;\n                    width: 100% !important;\n                    transform: none !important;\n                    transition: none !important;\n                }\n                \n                /* SCROLL CONTAINER FIX */\n                .scroll-container {\n                    height: 100%;\n                    overflow-y: auto;\n                    overflow-x: hidden;\n                }\n                \n                /* ENSURE PROPER BODY SCROLL */\n                body {\n                    overflow-x: hidden;\n                }\n                \n                /* PREVENT HORIZONTAL SCROLL */\n                * {\n                    box-sizing: border-box;\n                }\n                \n                /* MOBILE VIEWPORT FIX - PREVENT HORIZONTAL OVERFLOW */\n                html, body {\n                    max-width: 100%;\n                    overflow-x: hidden;\n                }\n                \n                main, section, div {\n                    max-width: 100%;\n                    overflow-x: hidden;\n                }\n                \n                /* ENSURE IMAGES AND BUTTONS DON\'T CAUSE OVERFLOW */\n                img, button, select, input {\n                    max-width: 100%;\n                }\n                \n                /* FIX FLEX CONTAINERS ON MOBILE */\n                .flex {\n                    min-width: 0;\n                }\n            '}),e.jsxs("div",{className:"mt-12 mb-6 flex flex-col items-center gap-2",children:[e.jsxs("div",{className:"font-bold text-lg",children:[e.jsx("span",{className:"text-black",children:"Inda"}),e.jsx("span",{className:"text-orange-500",children:"Street"})]}),e.jsx(Ul,{className:"mt-2"}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"text-center text-lg font-bold text-gray-800 mb-4",children:"Quick Links"}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-1 max-w-2xl mx-auto",children:[e.jsx("button",{onClick:()=>h==null?void 0:h("massage-types"),className:"px-4 py-2 text-black hover:text-orange-600 transition-colors text-sm font-medium",children:"Massage Types"}),e.jsx("button",{onClick:()=>h==null?void 0:h("facial-types"),className:"px-4 py-2 text-black hover:text-orange-600 transition-colors text-sm font-medium",children:"Facial Types"}),e.jsx("button",{onClick:()=>h==null?void 0:h("therapist-signup"),className:"px-4 py-2 text-black hover:text-orange-600 transition-colors text-sm font-medium",children:"Join as a Therapist Today"}),e.jsx("button",{onClick:()=>h==null?void 0:h("place-signup"),className:"px-4 py-2 text-black hover:text-orange-600 transition-colors text-sm font-medium",children:"Join Massage Place Today"}),e.jsx("button",{onClick:()=>h==null?void 0:h("facial-place-signup"),className:"px-4 py-2 text-black hover:text-orange-600 transition-colors text-sm font-medium",children:"Join Facial Place Today"})]})]})]}),ht&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-sm w-full",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 px-6 py-5 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-white text-xl font-bold",children:"Coming Soon!"}),e.jsx("button",{onClick:()=>St(!1),className:"text-white hover:bg-white hover:bg-opacity-20 rounded-xl p-2 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"p-6 text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx("svg",{className:"w-8 h-8 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:[Pt," Section"]}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["We are currently updating this section. Check back soon for amazing ",Pt.toLowerCase()," near you!"]}),e.jsx("p",{className:"text-sm text-orange-600 font-semibold",children:"ðŸš§ Under Development - Live Site"})]}),e.jsx("button",{onClick:()=>St(!1),className:"w-full px-6 py-3 bg-orange-500 text-white rounded-xl font-bold hover:bg-orange-600 transition-colors",children:"Got It!"})]})]})}),Le==="home"&&Ft&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm z-[55] transition-all duration-300",onClick:()=>Tt(!1)}),Le==="home"&&e.jsxs(e.Fragment,{children:[Ft&&e.jsxs("div",{className:"fixed bottom-[140px] right-6 flex flex-col gap-3 z-[60] animate-slideUp pr-2",children:[e.jsx("button",{onClick:K=>{var Y;K.stopPropagation(),(Y=h||window.setPage)==null||Y("advanced-search"),Tt(!1)},className:"backdrop-blur-xl bg-black/70 hover:bg-black/80 shadow-2xl rounded-full w-12 h-12 flex items-center justify-center transition-all duration-200 hover:scale-105 border border-white/10 will-change-transform",title:((dr=(cr=re==null?void 0:re.home)==null?void 0:cr.fabMenu)==null?void 0:dr.advancedSearch)||"Advanced Search",children:e.jsx("span",{className:"text-xl",children:"ðŸ”"})}),e.jsx("button",{onClick:K=>{var Y;K.stopPropagation(),(Y=h||window.setPage)==null||Y("women-reviews"),Tt(!1)},className:"backdrop-blur-xl bg-black/70 hover:bg-black/80 shadow-2xl rounded-full w-12 h-12 flex items-center justify-center transition-all duration-200 hover:scale-105 border border-white/10",title:((ur=(mr=re==null?void 0:re.home)==null?void 0:mr.fabMenu)==null?void 0:ur.womenReviews)||"Indastreet Reviews",children:e.jsx("span",{className:"text-xl",children:"ðŸ‘©â€ðŸ’¼"})}),e.jsx("button",{onClick:K=>{var Y;K.stopPropagation(),(Y=h||window.setPage)==null||Y("help-faq"),Tt(!1)},className:"backdrop-blur-xl bg-black/70 hover:bg-black/80 shadow-2xl rounded-full w-12 h-12 flex items-center justify-center transition-all duration-200 hover:scale-105 border border-white/10",title:((hr=(gr=re==null?void 0:re.home)==null?void 0:gr.fabMenu)==null?void 0:hr.helpFaq)||"Help & FAQ",children:e.jsx("span",{className:"text-xl",children:"â“"})}),e.jsx("button",{onClick:K=>{var Y;K.stopPropagation(),(Y=h||window.setPage)==null||Y("top-therapists"),Tt(!1)},className:"backdrop-blur-xl bg-black/70 hover:bg-black/80 shadow-2xl rounded-full w-12 h-12 flex items-center justify-center transition-all duration-200 hover:scale-105 border border-white/10",title:((xr=(pr=re==null?void 0:re.home)==null?void 0:pr.fabMenu)==null?void 0:xr.topTherapists)||"Top 5 Therapists",children:e.jsx("span",{className:"text-xl",children:"ðŸ†"})}),e.jsx("button",{onClick:K=>{var Y;K.stopPropagation(),(Y=h||window.setPage)==null||Y("special-offers"),Tt(!1)},className:"backdrop-blur-xl bg-black/70 hover:bg-black/80 shadow-2xl rounded-full w-12 h-12 flex items-center justify-center transition-all duration-200 hover:scale-105 border border-white/10",title:((br=(fr=re==null?void 0:re.home)==null?void 0:fr.fabMenu)==null?void 0:br.specialOffers)||"Special Offers",children:e.jsx("span",{className:"text-xl",children:"â­"})}),e.jsx("button",{onClick:K=>{var Y;K.stopPropagation(),(Y=h||window.setPage)==null||Y("video-center"),Tt(!1)},className:"backdrop-blur-xl bg-black/70 hover:bg-black/80 shadow-2xl rounded-full w-12 h-12 flex items-center justify-center transition-all duration-200 hover:scale-105 border border-white/10",title:((wr=(yr=re==null?void 0:re.home)==null?void 0:yr.fabMenu)==null?void 0:wr.videoCenter)||"Video Center",children:e.jsx("span",{className:"text-xl",children:"ðŸŽ¥"})})]}),e.jsx("div",{className:"fixed bottom-20 right-6 z-[60] pr-2 pb-2",children:e.jsx("button",{onClick:K=>{K.stopPropagation(),u.debug("FAB button clicked",{currentState:Ft}),Tt(!Ft)},className:"w-16 h-16 rounded-full shadow-2xl flex items-center justify-center transition-all duration-300 will-change-transform ".concat(Ft?"bg-orange-600 hover:bg-orange-700":"bg-gradient-to-br from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 scale-100 hover:scale-110"),title:Ft?((jr=(vr=re==null?void 0:re.home)==null?void 0:vr.fabMenu)==null?void 0:jr.close)||"Close":((kr=(Nr=re==null?void 0:re.home)==null?void 0:Nr.fabMenu)==null?void 0:kr.openMenu)||"Quick Actions",children:e.jsx("svg",{className:"w-6 h-6 text-white transition-transform duration-300 ".concat(Ft?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 15l7-7 7 7"})})})})]}),Be&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>mt(!1),role:"dialog","aria-modal":"true","aria-label":((Sr=E==null?void 0:E.home)==null?void 0:Sr.changeCity)||"Select location",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[80vh] flex flex-col overflow-hidden border border-orange-100 ring-1 ring-orange-200/50",onClick:K=>K.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-100 bg-gradient-to-r from-orange-50/50 to-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-1 h-8 rounded-full bg-orange-500 flex-shrink-0","aria-hidden":!0}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:((Pr=E==null?void 0:E.home)==null?void 0:Pr.changeCity)||"Select location"})]}),e.jsx("button",{type:"button",onClick:()=>mt(!1),className:"p-2 rounded-full text-gray-500 hover:bg-orange-50 hover:text-orange-600 transition-colors","aria-label":"Close",children:e.jsx(wt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"overflow-y-auto flex-1 p-3 sm:p-4",children:[e.jsxs("div",{className:"mb-4 p-4 rounded-xl bg-orange-50 border border-orange-200 ring-1 ring-orange-100",children:[e.jsx("p",{className:"text-xs font-semibold text-orange-600/90 uppercase tracking-wider mb-1",children:(Cr=(Ir=E==null?void 0:E.home)==null?void 0:Ir.youAreViewing)!=null?Cr:"You are viewing"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:ws(_!=null?_:null,(Ar=(Tr=E==null?void 0:E.home)==null?void 0:Tr.allAreas)!=null?Ar:"All areas")})]}),e.jsx("p",{className:"text-xs font-semibold text-orange-600/90 uppercase tracking-wider mb-3 px-1",children:(Dr=(Er=E==null?void 0:E.home)==null?void 0:Er.changeLocation)!=null?Dr:"Change location"}),e.jsx("button",{type:"button",onClick:()=>{typeof window!="undefined"&&window.localStorage&&(window.localStorage.setItem("user_city_id","all"),window.localStorage.setItem("user_city_name","all")),me("all"),He("all"),mt(!1)},className:"w-full text-left px-4 py-3.5 rounded-xl font-medium transition-all ".concat(_==="all"||!_?"bg-orange-50 text-orange-800 ring-1 ring-orange-200 shadow-sm":"text-gray-700 hover:bg-orange-50/50 hover:ring-1 hover:ring-orange-100"),children:(Lr=(_r=E==null?void 0:E.home)==null?void 0:_r.allAreas)!=null?Lr:"All areas"}),ln.map(K=>e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"px-3 py-1.5 text-xs font-semibold text-orange-600/90 uppercase tracking-wider border-l-2 border-orange-400 mb-1",children:K.category}),K.cities.map(Y=>e.jsx("button",{type:"button",onClick:()=>{typeof window!="undefined"&&window.localStorage&&(window.localStorage.setItem("user_city_id",Y.locationId),window.localStorage.setItem("user_city_name",Y.name||Y.locationId)),me(Y.locationId),He(Y.locationId),mt(!1)},className:"w-full text-left px-4 py-3 rounded-xl font-medium transition-all ".concat(_===Y.locationId?"bg-orange-50 text-orange-800 ring-1 ring-orange-200 shadow-sm":"text-gray-700 hover:bg-orange-50/50 hover:ring-1 hover:ring-orange-100"),children:Y.name},Y.locationId))]},K.category))]})]})}),e.jsx(Es,{userId:(i==null?void 0:i.$id)||(i==null?void 0:i.id)||(a==null?void 0:a.id)||"guest",userName:(i==null?void 0:i.name)||(i==null?void 0:i.username)||(a==null?void 0:a.name)||"Guest User",userRole:"customer"}),e.jsx("div",{className:"pwa-install-banner mobile-safe-area",children:e.jsx(Qo,{})})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-sm w-full bg-white border border-gray-200 rounded-xl shadow-sm p-6 text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Set your location to continue"}),e.jsx("p",{className:"text-sm text-gray-600 mb-5",children:"Choose your city or use GPS on the landing page so we can show therapists near you."}),e.jsx("button",{onClick:()=>{h?h("landing"):typeof window!="undefined"&&window.setPage&&window.setPage("landing")},className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-orange-500 text-white font-semibold hover:bg-orange-600 transition-colors",children:"Set Location"})]})})},hm=({onNavigate:t,onLanguageChange:a,onMassageJobsClick:s,onHotelPortalClick:n,onVillaPortalClick:i,onTherapistPortalClick:r,onMassagePlacePortalClick:l,onAgentPortalClick:d,onCustomerPortalClick:g,onAdminPortalClick:m,onTermsClick:x,onPrivacyClick:v,therapists:j=[],places:I=[]})=>{const{language:p,setLanguage:R}=So();Us(p);const[w,P]=o.useState(!1);return e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-slate-50",children:[e.jsx(vi,{language:p,onLanguageChange:a!=null?a:R,onMenuClick:()=>P(!0),onHomeClick:()=>t==null?void 0:t("home"),showHomeButton:!0,title:p==="id"?"Tentang Kami":"About Us"}),e.jsx(vn,{condition:w,children:e.jsx(bn,{isOpen:w,onClose:()=>P(!1),onNavigate:t,language:p,onMassageJobsClick:s,onHotelPortalClick:n,onVillaPortalClick:i,onTherapistPortalClick:r,onMassagePlacePortalClick:l,onAgentPortalClick:d,onCustomerPortalClick:g,onAdminPortalClick:m,onTermsClick:x,onPrivacyClick:v,therapists:j,places:I})}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-500 text-white py-16 md:py-20 relative bg-cover bg-center",style:{backgroundImage:"url(https://ik.imagekit.io/7grri5v7d/indastreet%20apps.png?updatedAt=1761568212865)",backgroundAttachment:"scroll",transition:"none"},children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/30"}),e.jsx("div",{className:"max-w-6xl mx-auto px-4 relative z-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-3 drop-shadow-[0_2px_8px_rgba(0,0,0,0.8)] tracking-tight",children:[e.jsx("span",{className:"text-white",children:"Inda"}),e.jsx("span",{className:"text-orange-200",children:"street"})," ",e.jsx("span",{className:"text-white",children:"Massage"})]}),e.jsx("p",{className:"text-base md:text-lg text-white/95 max-w-2xl mx-auto drop-shadow-[0_2px_6px_rgba(0,0,0,0.8)] font-medium",children:"International wellness platform connecting people with verified massage therapists, professional massage spas, and licensed skin clinics."})]})})]}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12 md:py-16",children:[e.jsx("section",{className:"mb-12 md:mb-14",children:e.jsxs("div",{className:"rounded-[20px] border border-slate-200/80 bg-white shadow-sm p-6 md:p-8",children:[e.jsx("p",{className:"text-slate-700 leading-relaxed text-base md:text-lg",children:"IndaStreet Massage is an international wellness platform connecting people with verified massage therapists, professional massage spas, and licensed skin clinics â€” safely, transparently, and on demand."}),e.jsx("p",{className:"text-slate-700 leading-relaxed text-base md:text-lg mt-4",children:"With operations in Ireland and Indonesia, we combine international standards with strong local expertise to deliver a trusted booking experience for customers, providers, and partners."})]})}),e.jsx("section",{className:"mb-12 md:mb-14",children:e.jsxs("div",{className:"rounded-[20px] border border-slate-200/80 bg-white shadow-sm p-6 md:p-8",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900 mb-4",children:"Our Mission"}),e.jsx("p",{className:"text-slate-700 leading-relaxed",children:"Our mission is to make professional wellness services easy to access, safe to book, and reliable to deliver, while empowering therapists, spas, and clinics with tools that support sustainable business growth."}),e.jsx("p",{className:"text-slate-700 leading-relaxed mt-3",children:"We are focused on building long-term trust across the wellness, hospitality, and healthcare-related sectors."})]})}),e.jsx("section",{className:"mb-12 md:mb-14",children:e.jsxs("div",{className:"rounded-[20px] border border-slate-200/80 bg-white shadow-sm p-6 md:p-8",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900 mb-4",children:"Built on Trust & Professional Standards"}),e.jsx("p",{className:"text-slate-700 leading-relaxed mb-4",children:"IndaStreet Massage is designed around safety, professionalism, and transparency."}),e.jsx("p",{className:"text-slate-700 leading-relaxed mb-3",children:"Our platform includes:"}),e.jsxs("ul",{className:"space-y-2 text-slate-700 list-none pl-0",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Verified provider identity and documentation"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Secure booking and payment workflows"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Clear service listings and transparent pricing"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Admin-verified provider profiles"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Platform rules that protect users, providers, and partners"})]})]}),e.jsx("p",{className:"text-slate-700 leading-relaxed mt-4",children:"Every provider listed on IndaStreet Massage operates under defined professional standards."})]})}),e.jsx("section",{className:"mb-12 md:mb-14",children:e.jsxs("div",{className:"rounded-[20px] border border-slate-200/80 bg-white shadow-sm p-6 md:p-8",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900 mb-4",children:"Collaboration With Hotels, Travel & Sports Partners"}),e.jsx("p",{className:"text-slate-700 leading-relaxed mb-4",children:"IndaStreet Massage actively collaborates with:"}),e.jsxs("ul",{className:"space-y-2 text-slate-700 list-none pl-0 mb-4",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Hotels and villas"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Travel agencies and tour operators"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Sports complexes and fitness facilities"})]})]}),e.jsx("p",{className:"text-slate-700 leading-relaxed mb-3",children:"Through these partnerships, we facilitate access to verified massage specialists and skin clinics for guests, athletes, and travelers â€” ensuring consistent quality, safety, and professionalism in every location."}),e.jsx("p",{className:"text-slate-700 leading-relaxed mb-3",children:"Our partner integrations allow wellness services to be delivered:"}),e.jsxs("ul",{className:"space-y-2 text-slate-700 list-none pl-0",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"On-site at hotels and villas"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"As part of travel and recovery packages"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Within sports and performance environments"})]})]})]})}),e.jsx("section",{className:"mb-12 md:mb-14",children:e.jsxs("div",{className:"rounded-[20px] border border-slate-200/80 bg-white shadow-sm p-6 md:p-8",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900 mb-4",children:"Supporting Wellness Professionals"}),e.jsx("p",{className:"text-slate-700 leading-relaxed mb-3",children:"We support:"}),e.jsxs("ul",{className:"space-y-2 text-slate-700 list-none pl-0 mb-4",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Independent massage therapists"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Professional massage spas"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Licensed skin clinics"})]})]}),e.jsx("p",{className:"text-slate-700 leading-relaxed mb-3",children:"By providing:"}),e.jsxs("ul",{className:"space-y-2 text-slate-700 list-none pl-0 mb-4",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Professional digital profiles"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Scheduled and on-demand booking tools"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Transparent commission structure"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Secure in-app communication"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Calendar and availability management"})]})]}),e.jsx("p",{className:"text-slate-700 leading-relaxed",children:"Our goal is to let professionals focus on delivering exceptional care â€” while we handle the platform and technology."})]})}),e.jsx("section",{className:"mb-12 md:mb-14",children:e.jsxs("div",{className:"rounded-[20px] border border-slate-200/80 bg-white shadow-sm p-6 md:p-8",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900 mb-4",children:"International Presence"}),e.jsx("p",{className:"text-slate-700 leading-relaxed mb-4",children:"With offices and operational support in Ireland and Indonesia, IndaStreet Massage is built for scalability, compliance, and long-term growth."}),e.jsx("p",{className:"text-slate-700 leading-relaxed mb-3",children:"This dual presence allows us to:"}),e.jsxs("ul",{className:"space-y-2 text-slate-700 list-none pl-0",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Apply international platform standards"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Respect local regulations and cultural practices"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Support partners and providers on the ground"})]})]})]})}),e.jsx("section",{className:"mb-12 md:mb-14",children:e.jsxs("div",{className:"rounded-[20px] border border-slate-200/80 bg-white shadow-sm p-6 md:p-8",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900 mb-4",children:"Our Commitment"}),e.jsx("p",{className:"text-slate-700 leading-relaxed mb-3",children:"We are committed to:"}),e.jsxs("ul",{className:"space-y-2 text-slate-700 list-none pl-0",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"User and guest safety"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Provider and partner protection"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Secure handling of personal and business data"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Continuous platform improvement"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 font-bold mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Clear and transparent communication"})]})]})]})}),e.jsx("section",{className:"mb-12 md:mb-14",children:e.jsxs("div",{className:"rounded-[20px] border border-slate-200/80 bg-white shadow-sm p-6 md:p-8 text-center",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900 mb-4",children:"The Future of Professional Wellness"}),e.jsx("p",{className:"text-slate-700 leading-relaxed mb-4",children:"IndaStreet Massage is evolving with the needs of modern wellness, hospitality, and performance industries."}),e.jsx("p",{className:"text-base font-semibold text-slate-900",children:"Our focus remains clear:"}),e.jsx("p",{className:"text-lg md:text-xl font-bold text-primary-600 mt-3",children:"Professional wellness. Verified providers. Proven with trusted standards."})]})}),e.jsx("div",{className:"rounded-[20px] border border-slate-200/80 bg-white shadow-sm pt-8 pb-10 px-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-5",children:"Connect With IndaStreet"}),e.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-8",children:[e.jsxs("a",{href:"https://www.instagram.com/indastreetmassage",target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center gap-2 text-slate-600 hover:text-primary-500 transition-colors group","aria-label":"Visit IndaStreet on Instagram",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 via-pink-500 to-orange-500 flex items-center justify-center group-hover:scale-105 transition-transform shadow-md",children:e.jsx(fc,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-sm font-medium",children:"Instagram"})]}),e.jsxs("a",{href:"https://www.tiktok.com/@indastreetmassage",target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center gap-2 text-slate-600 hover:text-primary-500 transition-colors group","aria-label":"Visit IndaStreet on TikTok",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-900 flex items-center justify-center group-hover:scale-105 transition-transform shadow-md",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"})})}),e.jsx("span",{className:"text-sm font-medium",children:"TikTok"})]}),e.jsxs("a",{href:"https://www.facebook.com/indastreetmassage",target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center gap-2 text-slate-600 hover:text-primary-500 transition-colors group","aria-label":"Visit IndaStreet on Facebook",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center group-hover:scale-105 transition-transform shadow-md",children:e.jsx(bc,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-sm font-medium",children:"Facebook"})]})]})]})})]})]})},pm=o.lazy(()=>z(()=>import("./ContactUsPage.DV4utDjL.js"),__vite__mapDeps([11,2,0,1,3,4,5,6,12,8,9]))),xm=o.lazy(()=>z(()=>import("./CompanyProfilePage.dVncL88N.js"),__vite__mapDeps([13,2,0,1,3,4,5,6]))),fm=o.lazy(()=>z(()=>import("./HowItWorksPage.BOyEnl8V.js"),__vite__mapDeps([14,2,0,1,3,4,5,6,15,8]))),to=o.lazy(()=>z(()=>import("./FAQPage._UJ5_xMD.js"),__vite__mapDeps([16,2,0,1,3,4,5,6,15,8,9]))),bm=o.lazy(()=>z(()=>import("./MassageTypesPage.BJRJg84E.js"),__vite__mapDeps([17,2,0,1,3,4,5,6,8,9]))),ym=o.lazy(()=>z(()=>import("./FacialTypesPage.CsNpGecn.js"),__vite__mapDeps([18,2,19,0,1,3,4,5,6,8,9]))),wm=o.lazy(()=>z(()=>import("./CustomerProvidersPage.Bif_eKCU.js"),__vite__mapDeps([20,2,0,1,3,4,5,6]))),vm=o.lazy(()=>z(()=>import("./FacialProvidersPage.CHxTg8m7.js"),__vite__mapDeps([21,2,22,0,1,3,4,5,6,23,8,9]))),jm=o.lazy(()=>z(()=>import("./TodaysDiscountsPage.DHbuQOD4.js"),__vite__mapDeps([24,2]))),Nm=o.lazy(()=>z(()=>import("./WomenReviewsPage.DUff6_LR.js"),__vite__mapDeps([25,2,0,1,3,4,5,6,15]))),km=o.lazy(()=>z(()=>import("./AdvancedSearchPage.CX-G-I_L.js"),__vite__mapDeps([26,2,0,1,3,4,5,6,15,8,9])));o.lazy(()=>z(()=>import("./HelpFaqPage.DsOtl_c1.js"),__vite__mapDeps([27,2,0,1,3,4,5,6,15])));const Sm=o.lazy(()=>z(()=>import("./TopTherapistsPage.SPxrOncs.js"),__vite__mapDeps([28,2,0,1,3,4,5,6,15]))),Pm=o.lazy(()=>z(()=>import("./SpecialOffersPage.Dz3HX4O3.js"),__vite__mapDeps([29,2,0,1,3,4,5,6,15]))),Im=o.lazy(()=>z(()=>import("./VideoCenterPage.DaCPdUtU.js"),__vite__mapDeps([30,2,0,1,3,4,5,6,15]))),Cm=o.lazy(()=>z(()=>import("./HotelsVillasPage.s0U2Nr-F.js"),__vite__mapDeps([31,2,0,1,3,4,5,6,8,9]))),Tm=o.lazy(()=>z(()=>import("./HotelVillaSafePassPage.DSzXUDVP.js"),__vite__mapDeps([32,2]))),ct={landing:{component:Cd},home:{component:gm},about:{component:hm},contact:{component:pm},company:{component:xm},howItWorks:{component:fm},faq:{component:to},massageTypes:{component:bm},facialTypes:{component:ym},providers:{component:wm},facialProviders:{component:vm},discounts:{component:jm},womenReviews:{component:Nm},advancedSearch:{component:km},helpFaq:{component:to},topTherapists:{component:Sm},specialOffers:{component:Pm},videoCenter:{component:Im},hotelsVillas:{component:Cm},safePass:{component:Tm}},es=({onAuthSuccess:t,onBack:a,t:s,mode:n,defaultRole:i,language:r,onLanguageChange:l,onNavigate:d,therapists:g=[],places:m=[]})=>{var A;const[x,v]=o.useState(!1),[j,I]=o.useState(""),[p,R]=o.useState(()=>i||(typeof sessionStorage!="undefined"&&sessionStorage.getItem("createAccountRole")==="employer"?(sessionStorage.removeItem("createAccountRole"),"employer"):"")),[w,P]=o.useState(""),[D,L]=o.useState(""),[O,H]=o.useState(!1),[S,N]=o.useState(!1),k=Us(),b=s||((A=k==null?void 0:k.dict)==null?void 0:A.auth)||{},y=n||(window.location.pathname==="/signin"?"signin":window.location.pathname==="/signup"?"signup":"unified"),T=[{value:"therapist",label:(b==null?void 0:b.massageTherapist)||"Massage Therapist",Icon:yc},{value:"massage-place",label:(b==null?void 0:b.massageSpa)||"Massage Place",Icon:Mo},{value:"facial-place",label:(b==null?void 0:b.facialClinic)||"Facial Place",Icon:ss},{value:"employer",label:(b==null?void 0:b.postJob)||"Post Job",Icon:Ts}];o.useEffect(()=>{const c=new URLSearchParams(window.location.search);if(c.get("oauth")==="failure"){window.history.replaceState({},"",window.location.pathname),L((b==null?void 0:b.googleSignInFailed)||"Google sign-in was cancelled or failed. Try again or use email.");return}if(c.get("oauth")!=="success"||!(y==="signup"||y==="unified"))return;let C=!1;return(async()=>{try{const M=await xs.getCurrentUser();if(C||!M)return;const E=sessionStorage.getItem("oauth_signup_account_type"),W=E||"therapist";E&&sessionStorage.removeItem("oauth_signup_account_type");const X=M.email||"",_=M.name||X.split("@")[0]||"User",$={email:X,role:W,name:_,userId:M.$id};if(W==="therapist")await Ye.create({email:$.email,name:$.name,countryCode:"+62",whatsappNumber:"",specialization:"General Massage",yearsOfExperience:0,isLicensed:!1,isLive:!1,hourlyRate:100,pricing:JSON.stringify({60:100,90:150,120:200}),price60:"100",price90:"150",price120:"200",coordinates:JSON.stringify({lat:0,lng:0}),location:"Bali, Indonesia",status:"available",availability:"Available",description:"",profilePicture:M.picture||"",mainImage:"",massageTypes:"",languages:""});else if(W==="massage-place"){const q=yt.unique();await Xt.create({email:$.email,name:$.name,id:q,placeId:q,category:"massage-place",password:"",pricing:JSON.stringify({60:100,90:150,120:200}),status:"Closed",isLive:!1,openingTime:"09:00",closingTime:"21:00",coordinates:[106.8456,-6.2088],location:"Bali, Indonesia",description:"",whatsappnumber:"",mainimage:"",profilePicture:"",galleryImages:"[]",massagetypes:"[]",languagesspoken:"[]",additionalservices:"[]"})}else if(W==="facial-place"){const q=yt.unique();await Xt.create({email:$.email,name:$.name,facialPlaceId:q,collectionName:"facial_places",category:"spa",description:"",address:"Bali, Indonesia",lastUpdate:new Date().toISOString()})}window.history.replaceState({},"",window.location.pathname),C||t(W)}catch{C||L("Account created but profile setup failed. Please contact support.")}})(),()=>{C=!0}},[y,t]);const F=()=>(L(""),!j||!w?(L((b==null?void 0:b.fillFieldsError)||"Please fill all required fields"),!1):!j||!j.trim()?(L((b==null?void 0:b.pleaseEnterValidEmail)||"Please enter an email address"),!1):w.length<8?(L((b==null?void 0:b.passwordMinLength)||"Password must be at least 8 characters"),!1):y==="signup"&&!p||y==="unified"&&!p?(L((b==null?void 0:b.pleaseSelectPortalType)||"Please select an account type"),!1):!0),U=async(c,h,C)=>{var M,E;try{const W=await xs.register(c,h,c.split("@")[0],{autoLogin:!0}),X={email:c,role:C,commission:30,active:!0,approved:!0,userId:W.$id,createdAt:new Date().toISOString(),name:c.split("@")[0]};if(C!=="employer"){if(C==="therapist")await Ye.create({email:X.email,name:X.name,countryCode:"+62",whatsappNumber:"",specialization:"General Massage",yearsOfExperience:0,isLicensed:!1,isLive:!1,hourlyRate:100,pricing:JSON.stringify({60:100,90:150,120:200}),price60:"100",price90:"150",price120:"200",coordinates:JSON.stringify({lat:0,lng:0}),location:"Bali, Indonesia",status:"available",availability:"Available",description:"",profilePicture:"",mainImage:"",massageTypes:"",languages:""});else if(C==="massage-place"){const _=yt.unique();await Xt.create({email:X.email,name:X.name,id:_,placeId:_,category:"massage-place",password:"",pricing:JSON.stringify({60:100,90:150,120:200}),status:"Closed",isLive:!1,openingTime:"09:00",closingTime:"21:00",coordinates:[106.8456,-6.2088],location:"Bali, Indonesia",description:"",whatsappnumber:"",mainimage:"",profilePicture:"",galleryImages:"[]",massagetypes:"[]",languagesspoken:"[]",additionalservices:"[]"})}else if(C==="facial-place"){const _=yt.unique();await Xt.create({email:X.email,name:X.name,facialPlaceId:_,collectionName:"facial_places",category:"spa",description:"",address:"Bali, Indonesia",lastUpdate:new Date().toISOString()})}}await new Promise(_=>setTimeout(_,2e3))}catch(W){throw W.code===409||(M=W.message)!=null&&M.includes("already exists")?new Error("An account with this email already exists. Please sign in instead."):W.code===429||(E=W.message)!=null&&E.includes("rate limit")?new Error("Too many attempts. Please wait a moment and try again."):new Error(W.message||"Failed to create account. Please try again.")}},B=async c=>{var h,C,M,E,W,X,_,$,q,J,Z;if(c.preventDefault(),!!F()){H(!0),L("");try{const me=j.toLowerCase().trim(),Fe=w.trim();if(y==="signin")try{const ve=await xs.login(me,Fe);sessionStorage.removeItem("start_fresh");let re="therapist";try{if(await Ye.getByEmail(me))re="therapist";else{const Le=await Xt.getByEmail(me);(Array.isArray(Le)?Le:Le?[Le]:[]).length>0?re="massage-place":await ji.getByEmail(me)&&(re="facial-place")}}catch{}t(re)}catch(ve){if((h=ve.message)!=null&&h.includes("Invalid credentials")||(C=ve.message)!=null&&C.includes("Invalid email or password"))L((b==null?void 0:b.errorIncorrectCredentials)||"âŒ Incorrect email or password. Please check:\nâ€¢ Email is correct (case-sensitive)\nâ€¢ Password is correct (case-sensitive)\nâ€¢ No extra spaces in your input");else if((M=ve.message)!=null&&M.includes("user")&&((E=ve.message)!=null&&E.includes("not found")))L((b==null?void 0:b.errorUserNotFound)||"âŒ No account found with this email. Please:\nâ€¢ Check the email spelling\nâ€¢ Create a new account if you're a new user");else if((W=ve.message)!=null&&W.includes("rate limit")||ve.code===429)L((b==null?void 0:b.errorRateLimit)||"âš ï¸ Too many login attempts. Please wait a moment before trying again.");else{const re=((b==null?void 0:b.errorGenericSignIn)||"âŒ Sign in failed: {error}. Please try again or contact support if the problem persists.").replace("{error}",ve.message||"Unknown error");L(re)}}else if(y==="signup"){try{if(await $r.getByEmail(me)){L((b==null?void 0:b.errorEmailAlreadyRegistered)||"âŒ This email is already registered. Please:\nâ€¢ Use the Sign In button instead\nâ€¢ Or use a different email address\nâ€¢ Contact support if you forgot your password");return}}catch{}try{await U(me,Fe,p),sessionStorage.removeItem("start_fresh"),t(p)}catch(ve){if((X=ve.message)!=null&&X.includes("already exists"))L((b==null?void 0:b.errorEmailAlreadyRegistered)||"âŒ This email is already registered. Please:\nâ€¢ Use the Sign In button instead\nâ€¢ Or use a different email address\nâ€¢ Contact support if you forgot your password");else if((_=ve.message)!=null&&_.includes("Password")||($=ve.message)!=null&&$.includes("password")){const re=ve.message||(b==null?void 0:b.errorPasswordRequirements)||'âŒ Password requirements:\nâ€¢ Must be at least 8 characters\nâ€¢ Use lowercase letters + numbers\nâ€¢ Try: "password123" or "abc12345"';L(re)}else if((q=ve.message)!=null&&q.includes("rate limit")||ve.code===429)L((b==null?void 0:b.errorRateLimit)||"âš ï¸ Too many attempts. Please wait a moment before trying again.");else if((J=ve.message)!=null&&J.includes("email")&&((Z=ve.message)!=null&&Z.includes("invalid")))L((b==null?void 0:b.errorInvalidEmailFormat)||"âŒ Invalid email format. Please check:\nâ€¢ Email contains @ symbol\nâ€¢ Domain is valid (e.g., @gmail.com)\nâ€¢ No spaces in the email");else{const re=((b==null?void 0:b.errorAccountCreation)||"âŒ Account creation failed: {error}. Please:\nâ€¢ Check your internet connection\nâ€¢ Verify all fields are correct\nâ€¢ Try again or contact support").replace("{error}",ve.message||"Unknown error");L(re)}}}else{let ve;try{ve=await $r.getByEmail(me)}catch{ve=null}if(ve)try{const re=await xs.login(me,w);sessionStorage.removeItem("start_fresh");let Oe=p;if(ve.role||ve.userType){const Le=ve.role||ve.userType;Le==="therapist"?Oe="therapist":Le==="massage_place"||Le==="massage-place"?Oe="massage-place":(Le==="facial_place"||Le==="facial-place")&&(Oe="facial-place")}t(Oe)}catch{L("Incorrect password. Please try again.")}else try{await U(me,Fe,p),sessionStorage.removeItem("start_fresh"),t(p)}catch(re){L(re.message||"Failed to create account. Please try again.")}}}catch(me){me.code===401?L("Invalid email or password. Please try again."):me.code===429?L("Too many login attempts. Please wait a moment and try again."):me.message?L(me.message):L("Authentication failed. Please try again.")}finally{H(!1)}}},f=r||"en";return e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] flex flex-col bg-gray-50",children:[e.jsx(vi,{language:f,onLanguageChange:l,onMenuClick:()=>v(!0),onHomeClick:a,showHomeButton:!0}),e.jsx(vn,{condition:x,children:e.jsx(bn,{isOpen:x,onClose:()=>v(!1),onNavigate:d,onMassageJobsClick:d?()=>d("massage-jobs"):void 0,onVillaPortalClick:d?()=>d("villa-portal"):void 0,onTherapistPortalClick:d?()=>d("therapist-signup"):void 0,onMassagePlacePortalClick:d?()=>d("place-signup"):void 0,onAgentPortalClick:d?()=>d("auth"):void 0,onCustomerPortalClick:d?()=>d("auth"):void 0,onAdminPortalClick:d?()=>d("admin-login"):void 0,onTermsClick:d?()=>d("terms"):void 0,onPrivacyClick:d?()=>d("privacy"):void 0,therapists:g,places:m,language:f})}),e.jsx("div",{className:"pt-[60px]","aria-hidden":!0}),e.jsx("div",{className:"w-full max-w-md mx-auto flex items-center justify-center flex-1 py-8",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-lg p-8 w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:y==="signin"?"Sign In":y==="signup"?"Create Account":"Authentication"}),e.jsx("p",{className:"text-gray-600",children:y==="signin"?"Welcome back! Please sign in to continue":y==="signup"?"Create your account to get started":"Sign in to your account or create a new one"})]}),y==="signup"&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{type:"button",onClick:()=>{if(!p){L((b==null?void 0:b.pleaseSelectPortalType)||"Please select account type first.");return}L("");try{sessionStorage.setItem("oauth_signup_account_type",p);const c=typeof window!="undefined"?window.location.origin:"",h=(typeof window!="undefined"?window.location.pathname:"")||"/signup",C=h.includes("?")?"&":"?",M="".concat(c).concat(h).concat(C,"oauth=success"),E="".concat(c).concat(h).concat(C,"oauth=failure");xs.createGoogleSession(M,E)}catch(c){L((c==null?void 0:c.message)||"Google sign-in could not be started. Try email sign up.")}},disabled:O||!p,className:"w-full flex items-center justify-center gap-3 py-3 px-4 border-2 border-gray-300 rounded-xl bg-white hover:bg-gray-50 hover:border-gray-400 disabled:opacity-50 disabled:cursor-not-allowed transition-all font-medium text-gray-700",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),(b==null?void 0:b.signUpWithGoogle)||"Sign up with Google"]}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-2",children:(b==null?void 0:b.fastAndEasy)||"Fast & easy â€“ no password needed"})]}),e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(_s,{className:"w-4 h-4 inline mr-2"}),(b==null?void 0:b.email)||"Email Address"]}),e.jsx("input",{id:"email",type:"email",value:j,onChange:c=>{I(c.target.value),D&&L("")},className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ".concat(D&&D.toLowerCase().includes("email")?"border-red-300 bg-red-50":"border-gray-300"),placeholder:(b==null?void 0:b.emailPlaceholder)||"your.email@example.com",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",required:!0}),D&&D.toLowerCase().includes("email")&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:(b==null?void 0:b.hintEmailCaseSensitive)||"âš ï¸ Please check your email address (case-sensitive)"})]}),y!=="signin"&&e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Ct,{className:"w-4 h-4 inline mr-2"}),(b==null?void 0:b.selectPortalType)||"Account Type"," ",y==="signup"?"(Required)":""]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>N(!S),className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-white text-left focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all flex justify-between items-center",children:[e.jsx("span",{className:"flex items-center gap-2 ".concat(p?"text-gray-900":"text-gray-500"),children:p?(()=>{const c=T.find(C=>C.value===p),h=c==null?void 0:c.Icon;return h?e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"w-5 h-5 text-orange-500 flex-shrink-0"}),e.jsx("span",{children:c==null?void 0:c.label})]}):c==null?void 0:c.label})():(b==null?void 0:b.selectPortalType)||"Select account type"}),e.jsx("span",{children:"â–¼"})]}),S&&e.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-lg shadow-lg z-50 mt-1",children:T.map(c=>{const h=c.Icon;return e.jsxs("button",{type:"button",onClick:()=>{R(c.value),N(!1)},className:"w-full px-4 py-3 text-left hover:bg-orange-50 focus:outline-none focus:bg-orange-50 transition-colors flex items-center gap-2",children:[h&&e.jsx(h,{className:"w-5 h-5 text-orange-500 flex-shrink-0"}),e.jsx("span",{children:c.label})]},c.value)})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(za,{className:"w-4 h-4 inline mr-2"}),(b==null?void 0:b.password)||"Password"]}),e.jsx("input",{id:"password",type:"text",value:w,onChange:c=>{P(c.target.value.trim()),D&&L("")},className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ".concat(D&&D.toLowerCase().includes("password")?"border-red-300 bg-red-50":"border-gray-300"),placeholder:(b==null?void 0:b.passwordPlaceholder)||"Enter your password",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",required:!0}),D&&D.toLowerCase().includes("password")&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:(b==null?void 0:b.hintPasswordCaseSensitive)||"âš ï¸ Password is case-sensitive. Check uppercase/lowercase letters"})]}),D&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-800 px-4 py-3 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3 flex-1",children:e.jsx("p",{className:"text-sm font-medium whitespace-pre-line",children:D})})]})}),e.jsx("button",{type:"submit",disabled:O||!j||!w||y==="signup"&&!p||y==="unified"&&!p,className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white py-4 px-6 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transform hover:scale-105",children:O?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Processing..."]}):y==="signin"?(b==null?void 0:b.signInButton)||"Sign In":y==="signup"?(b==null?void 0:b.createAccountButton)||"Create Account":"Continue"})]})]})})]})},Am=5e3;let $a=null;const rs={get(){return $a?Date.now()-$a.timestamp>Am?($a=null,null):$a:null},set(t,a){$a={hasSession:t,timestamp:Date.now(),user:a}},clear(){$a=null},setNoSession(){$a={hasSession:!1,timestamp:Date.now()}}},ao=Object.freeze(Object.defineProperty({__proto__:null,sessionCache:rs},Symbol.toStringTag,{value:"Module"})),kn=window.location.hostname==="localhost",Wa={};function Ga(t,a=5,s=6e4){kn&&(a=a*10,s=s/10);const n=Date.now(),i=t;Wa[i]||(Wa[i]={count:0,resetTime:n+s});const r=Wa[i];return n>=r.resetTime&&(r.count=0,r.resetTime=n+s),r.count>=a?!1:(r.count++,!0)}function Em(t){const a=Wa[t];if(!a)return 0;const s=Date.now();return Math.max(0,a.resetTime-s)}function Bs(t){const a=Em(t),s=Math.ceil(a/6e4);if(a<6e4){const n=Math.ceil(a/1e3);return"Too many ".concat(t," attempts. Please wait ").concat(n," second").concat(n!==1?"s":""," before trying again.")}return"Too many ".concat(t," attempts. Please wait ").concat(s," minute").concat(s!==1?"s":""," before trying again.")}function ci(t){delete Wa[t]}function Dm(){Object.keys(Wa).forEach(t=>delete Wa[t])}function _m(){kn&&(window.originalCheckRateLimit=Ga,window.checkRateLimit=()=>!0)}function Lm(){kn&&window.originalCheckRateLimit&&delete window.checkRateLimit}kn&&(window.resetAllRateLimits=Dm,window.disableRateLimiting=_m,window.enableRateLimiting=Lm,window.resetRateLimit=ci);function os(t,a){const s=(t==null?void 0:t.message)||"",n=t==null?void 0:t.code;if(n===429||s.includes("rate limit")||s.includes("Too many requests"))return Bs(a);if(n===409||s.includes("already exists")||s.includes("duplicate"))return"ðŸ“§ An account with this email already exists. Please sign in instead.";if(n===401||s.includes("Invalid credentials")||s.includes("invalid_credentials"))return"âŒ Incorrect email or password. Please check your credentials and try again.";if(s.includes("blocked")||s.includes("disabled")||s.includes("User (role: guests) missing scope"))return"ðŸš« Your account has been blocked or disabled. Please contact support at indastreet.id@gmail.com for assistance.";if(s.includes("not found")||s.includes("user not found")||n===404)return"ðŸ“§ No account found with this email. Please check your email or sign up first.";if(s.includes("password")&&(s.includes("weak")||s.includes("short")||s.includes("minimum")))return"ðŸ”’ Password must be at least 8 characters long. Please choose a stronger password.";if(s.includes("email")&&(s.includes("invalid")||s.includes("format")))return"ðŸ“§ Invalid email format. Please enter a valid email address.";if(s.includes("network")||s.includes("NetworkError")||s.includes("Failed to fetch"))return"ðŸŒ Network error. Please check your internet connection and try again.";if(n>=500)return"ðŸ”§ Server error. Please try again in a few moments.";if(s.includes("session")&&s.includes("invalid"))return"â±ï¸ Your session has expired. Please sign in again.";if(s){const i=s.replace(/AppwriteException:/gi,"").replace(/Error:/gi,"").trim();return"âŒ ".concat(i)}return"âŒ ".concat(a," failed. Please try again or contact support at indastreet.id@gmail.com if the problem persists.")}const Ln={};var Rn={};const Mn=typeof import.meta!="undefined"&&(Ln==null?void 0:Ln.VITE_DEBUG_AUTH)==="1"||typeof process!="undefined"&&(Rn==null?void 0:Rn.VITE_DEBUG_AUTH)==="1",so={async signUp(t,a,s,n){try{u.debug("ðŸ”µ [Therapist Sign-Up] Starting...",{email:t});const i=typeof window!="undefined"&&window.location?window.location.origin:"no-window";if(u.debug("ðŸ›  [Therapist Sign-Up] Environment",{endpoint:Pe.endpoint,projectId:Pe.projectId,databaseId:Pe.databaseId,therapistsCollection:Pe.collections.therapists,origin:i}),!Ga("therapist-signup",5,6e4))return{success:!1,error:Bs("signup")};rs.clear();try{await $t.deleteSession("current")}catch{}const r=t.toLowerCase().trim(),l=await Pi(r,a);u.debug("âœ… [Therapist Sign-Up] Appwrite account created:",l.$id),u.debug("ðŸ”µ [Therapist Sign-Up] Creating session..."),await hn(r,a),u.debug("âœ… [Therapist Sign-Up] Session created");const d=yt.unique();u.debug("ðŸ”µ [Therapist Sign-Up] Creating therapist document...",{therapistId:d,email:r,collectionId:it.THERAPISTS,databaseId:Je});const g=await je.createDocument(Je,it.THERAPISTS,d,{id:d,email:r,name:s||r.split("@")[0],userId:l.$id,whatsappNumber:n||"",countryCode:"+62",location:"",pricing:JSON.stringify({60:100,90:150,120:200}),price60:"100",price90:"150",price120:"200",status:"available",isLive:!1,hourlyRate:100,therapistId:d,hotelId:"",isLicensed:!1,specialization:"General Massage",availability:"Available",description:"",profilePicture:"",mainImage:zl(d),yearsOfExperience:0,massageTypes:"",languages:"",coordinates:JSON.stringify({lat:0,lng:0})});u.debug("âœ… [Therapist Sign-Up] Therapist document created:",g.$id),u.debug("ðŸ“§ [Therapist Sign-Up] Email stored in document:",g.email);try{const{shareLinkService:m}=await z(async()=>{const{shareLinkService:I}=await import("./route-therapist.DVVqC6AH.js").then(p=>p.bu);return{shareLinkService:I}},__vite__mapDeps([0,1,2,3,4,5,6])),x=r.split("@")[0],j=await m.createShareLink("therapist",d,x,"unknown")}catch{}await new Promise(m=>setTimeout(m,500));try{await $t.deleteSession("current"),u.debug("âœ… [Therapist Sign-Up] Session cleared - user must sign in")}catch{}return u.debug("ðŸŽ‰ [Therapist Sign-Up] SUCCESS! Returning response..."),{success:!0,userId:l.$id,documentId:g.$id}}catch(i){return{success:!1,error:os(i,"signup")}}},async signIn(t,a){try{const s=t.toLowerCase().trim();u.debug("ðŸ”µ [Therapist Sign-In] Starting...",{email:s});const n=typeof window!="undefined"&&window.location?window.location.origin:"no-window";if(u.debug("ðŸ›  [Therapist Sign-In] Environment",{endpoint:Pe.endpoint,projectId:Pe.projectId,databaseId:Pe.databaseId,therapistsCollection:Pe.collections.therapists,origin:n}),!Ga("therapist-login",10,6e4))return{success:!1,error:Bs("login")};rs.clear();try{await $t.deleteSession("current"),u.debug("âœ… [Therapist Sign-In] Cleared existing session")}catch{u.debug("â„¹ï¸ [Therapist Sign-In] No active session to delete")}await hn(t,a);const i=await $t.get();u.debug("ðŸ”µ [Therapist Sign-In] Email lookup with retry");const r=s;let l=null;for(let d=1;d<=3;d++){d>1&&(await new Promise(g=>setTimeout(g,d*250)),u.debug("â±ï¸ [Therapist Sign-In] Email retry attempt ".concat(d)));try{const g=await je.listDocuments(Je,it.THERAPISTS,[ae.equal("email",r)]);if(g.documents.length>0){l=g.documents[0],u.debug("âœ… [Therapist Sign-In] Email query matched document:",l.$id);break}else u.debug("âš ï¸ [Therapist Sign-In] Attempt ".concat(d,": email not indexed yet"))}catch{}}if(!l){u.debug("ðŸ” [Therapist Sign-In] Broad scan fallback");try{l=(await je.listDocuments(Je,it.THERAPISTS)).documents.find(g=>g.email&&g.email.toLowerCase().trim()===r)||null,l&&u.debug("âœ… [Therapist Sign-In] Broad scan found document:",l.$id)}catch{}}if(!l)throw u.debug("Search criteria - Email:",t,"Normalized:",r),new Error("Therapist profile not found yet. Wait a moment and retry sign-in. If still missing after 30s, re-register or contact support at indastreet.id@gmail.com: "+t);return u.debug("âœ… [Therapist Sign-In] Therapist document found:",l.$id),u.debug("ðŸŽ‰ [Therapist Sign-In] SUCCESS! Returning response..."),{success:!0,userId:i.$id,documentId:l.$id}}catch(s){return{success:!1,error:os(s,"login")}}}},Zs={async signUp(t,a,s,n){try{const i=await Pi(t,a),r=yt.unique(),l={id:r,placeId:r,userId:i.$id,name:s||t.split("@")[0],category:"massage-place",email:t,whatsappNumber:n||"",password:"",pricing:JSON.stringify({60:100,90:150,120:200}),status:"Closed",isLive:!1,openingTime:"09:00",closingTime:"21:00",coordinates:[106.8456,-6.2088],hotelId:"",profilePicture:"",therapistGender:"Unisex"},d=await je.createDocument(Je,it.PLACES,r,l);try{const{shareLinkService:g}=await z(async()=>{const{shareLinkService:j}=await import("./route-therapist.DVVqC6AH.js").then(I=>I.bu);return{shareLinkService:j}},__vite__mapDeps([0,1,2,3,4,5,6])),m=t.split("@")[0],v=await g.createShareLink("place",r,m,"unknown")}catch{}return{success:!0,userId:i.$id,documentId:d.$id}}catch(i){return{success:!1,error:i.message}}},async signIn(t,a){try{rs.clear();try{await $t.deleteSession("current")}catch{}await hn(t,a);const s=await $t.get();try{const i=(await je.listDocuments(Je,it.PLACES)).documents.find(r=>r.email===t);if(!i){const r=yt.unique(),l={id:r,placeId:r,userId:s.$id,name:t.split("@")[0],category:"massage-place",email:t,password:"",pricing:JSON.stringify({60:100,90:150,120:200}),status:"Closed",isLive:!1,openingTime:"09:00",closingTime:"21:00",coordinates:[106.8456,-6.2088],hotelId:"",profilePicture:"",therapistGender:"Unisex"},d=await je.createDocument(Je,it.PLACES,r,l);return{success:!0,userId:s.$id,documentId:d.$id}}return{success:!0,userId:s.$id,documentId:i.$id}}catch{return{success:!0,userId:s.$id,documentId:s.$id}}}catch(s){return{success:!1,error:s.message}}}},no={async signUp(t,a,s,n){try{const i=t.toLowerCase().trim();if(!Ga("employer-signup",5,6e4))return{success:!1,error:Bs("signup")};rs.clear();try{await $t.deleteSession("current")}catch{}const r=await Pi(i,a),l=yt.unique(),d=Pe.collections.employerProfiles||it.EMPLOYER_PROFILES||"employer_profiles";await je.createDocument(Je,d,l,{id:l,employerId:l,email:i,userId:r.$id,name:s||i.split("@")[0],businessName:n||s||"",createdAt:new Date().toISOString()});try{await $t.deleteSession("current")}catch{}return{success:!0,userId:r.$id,documentId:l}}catch(i){return{success:!1,error:os(i,"signup")}}},async signIn(t,a){try{const s=t.toLowerCase().trim();if(!Ga("employer-login",10,6e4))return{success:!1,error:Bs("login")};rs.clear();try{await $t.deleteSession("current")}catch{}await hn(t,a);const n=await $t.get(),i=Pe.collections.employerProfiles||it.EMPLOYER_PROFILES||"employer_profiles",r=await je.listDocuments(Je,i,[ae.equal("email",s)]),l=r.documents.find(d=>(d.email||"").toLowerCase().trim()===s)||r.documents[0];if(!l)throw new Error("Employer profile not found. Please create an account first.");return{success:!0,userId:n.$id,documentId:l.$id}}catch(s){return{success:!1,error:os(s,"login")}}}},Rm=({onSuccess:t,onBack:a,t:s,restoreUserSession:n,onMassageJobsClick:i,onHotelPortalClick:r,onVillaPortalClick:l,onTherapistPortalClick:d,onMassagePlacePortalClick:g,onAgentPortalClick:m,onCustomerPortalClick:x,onAdminPortalClick:v,onTermsClick:j,onPrivacyClick:I,onNavigate:p})=>{const[R,w]=o.useState("login"),[P,D]=o.useState(""),[L,O]=o.useState(""),[H,S]=o.useState(!1),[N,k]=o.useState(!1),[b,y]=o.useState(""),[T,F]=o.useState(!1),[U,B]=o.useState({email:"",password:""}),[f,A]=o.useState(null);o.useEffect(()=>{const C=localStorage.getItem("packageDetails");if(C)try{const M=JSON.parse(C);A(M)}catch{}},[]);const c=async C=>{C.preventDefault(),y(""),k(!0);try{const M=P.includes("@")?P:"".concat(P,"@therapist.local"),E=await so.signIn(M,L);if(E.success&&E.userId){sessionStorage.clear(),localStorage.removeItem("therapist-cache");const W=E.documentId||E.userId;n&&await n(),p?p("therapist"):t&&t(W)}else{const W=typeof E.error=="string"?E.error:"Sign in failed. Please try again.";throw new Error(W)}}catch(M){const E=typeof M=="string"?M:(M==null?void 0:M.message)||"Authentication failed. Please try again.";y(E)}finally{k(!1)}},h=async C=>{C.preventDefault(),y(""),k(!0);try{const M=await so.signUp(U.email,U.password);if(M.success&&M.userId)n&&await n(),p&&p("therapist");else{const E=typeof M.error=="string"?M.error:"Registration failed. Please try again.";throw new Error(E)}}catch(M){const E=typeof M=="string"?M:(M==null?void 0:M.message)||"Registration failed. Please try again.";y(E),k(!1)}};return e.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col overflow-hidden fixed inset-0",children:[e.jsx(cs,{pageNumber:4,pageName:"TherapistLoginPage",isLocked:!1}),e.jsx("header",{className:"bg-white p-4 shadow-md z-[9997] flex-shrink-0",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:[e.jsx("span",{className:"text-black",children:"Inda"}),e.jsx("span",{className:"text-orange-500",children:"Street"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx("button",{onClick:()=>F(!0),title:"Menu",children:e.jsx(Gl,{className:"w-6 h-6"})}),e.jsx("button",{onClick:a,title:"Go to Home",className:"hover:text-orange-500 transition-colors",children:e.jsx(ls,{className:"w-5 h-5"})})]})]})}),e.jsx(vn,{condition:T,children:e.jsx(bn,{isOpen:T,onClose:()=>F(!1),t:s,onMassageJobsClick:i,onHotelPortalClick:r,onVillaPortalClick:l,onTherapistPortalClick:d,onMassagePlacePortalClick:g,onAgentPortalClick:m,onCustomerPortalClick:x,onAdminPortalClick:v,onNavigate:p,onTermsClick:j,onPrivacyClick:I,therapists:[],places:[]})}),e.jsx("main",{className:"flex-1 flex items-start justify-center px-4 py-2 overflow-hidden relative bg-cover bg-center bg-no-repeat min-h-0",style:{backgroundImage:"url(https://ik.imagekit.io/7grri5v7d/massage%20therapist%20bew.png?updatedAt=1763136088363)"},children:e.jsxs("div",{className:"max-w-md w-full relative z-10 max-h-full  pt-4 sm:pt-6",style:{scrollbarWidth:"none",msOverflowStyle:"none",overscrollBehavior:"contain"},children:[e.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-4xl sm:text-5xl font-bold mb-2 sm:mb-3 text-gray-800 drop-shadow-lg",children:"Therapist"}),e.jsx("p",{className:"text-gray-600 text-xs sm:text-sm drop-shadow",children:"Manage your massage services and bookings"})]}),e.jsx("div",{className:"mb-3 sm:mb-4 min-h-[50px] flex items-center",children:b&&e.jsx("div",{className:"w-full p-2 sm:p-3 rounded-lg text-sm ".concat(b.includes("âœ…")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"),children:b})}),e.jsxs("div",{className:"flex mb-4 sm:mb-6 bg-white/95 backdrop-blur-sm rounded-lg p-1 border border-white/20 shadow-lg",children:[e.jsx("button",{onClick:()=>{w("login"),y("")},className:"flex-1 py-3 px-4 rounded-lg transition-all font-medium ".concat(R==="login"?"bg-orange-500 text-white shadow-sm":"text-gray-700 hover:text-orange-500 hover:bg-orange-50/80"),children:"Sign In"}),e.jsx("button",{onClick:()=>{w("register"),y("")},className:"flex-1 py-3 px-4 rounded-lg transition-all font-medium ".concat(R==="register"?"bg-orange-500 text-white shadow-sm":"text-gray-700 hover:text-orange-500 hover:bg-orange-50/80"),children:"Create Account"})]}),R==="login"&&e.jsxs("form",{onSubmit:c,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-2 drop-shadow",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(_s,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-orange-500 w-5 h-5 z-10"}),e.jsx("input",{type:"email",value:P,onChange:C=>D(C.target.value),placeholder:"Enter your email",className:"w-full pl-12 pr-4 py-3 rounded-xl border border-white/20 focus:ring-2 focus:ring-orange-400/50 focus:border-orange-400 transition-all bg-white/95 backdrop-blur-sm text-gray-900 placeholder-gray-500 shadow-lg",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-2 drop-shadow",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(za,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-orange-500 w-5 h-5 z-10"}),e.jsx("input",{type:H?"text":"password",value:L,onChange:C=>O(C.target.value),placeholder:"Enter your password",className:"w-full pl-12 pr-12 py-3 rounded-xl border border-white/20 focus:ring-2 focus:ring-orange-400/50 focus:border-orange-400 transition-all bg-white/95 backdrop-blur-sm text-gray-900 placeholder-gray-500 shadow-lg",required:!0}),e.jsx("button",{type:"button",onClick:()=>S(!H),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-orange-500 hover:text-orange-400 transition-colors z-10",children:H?e.jsx(cn,{className:"w-5 h-5"}):e.jsx(ma,{className:"w-5 h-5"})})]})]}),e.jsx("button",{type:"submit",disabled:N,className:"w-full py-4 bg-orange-500 hover:bg-orange-600 text-white font-semibold rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] shadow-xl hover:shadow-2xl backdrop-blur-sm disabled:opacity-50 disabled:cursor-not-allowed",children:N?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Signing In..."]}):e.jsx("div",{className:"flex items-center justify-center gap-2",children:"ðŸ”‘ Sign In to Therapist"})})]}),R==="register"&&e.jsxs("form",{onSubmit:h,className:"space-y-4 sm:space-y-6",children:[f&&e.jsxs("div",{className:"p-4 rounded-xl border-2 ".concat(f.plan==="pro"?"border-orange-200 bg-orange-50":"border-purple-200 bg-purple-50"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"font-bold text-gray-900",children:f.plan==="pro"?"Pro Plan Selected":"Plus Plan Selected"})]}),e.jsx("div",{className:"flex gap-0.5",children:f.plan==="pro"?e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx(jt,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx(jt,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx(jt,{className:"w-4 h-4 fill-gray-300 text-gray-300"}),e.jsx(jt,{className:"w-4 h-4 fill-gray-300 text-gray-300"})]}):e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx(jt,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx(jt,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx(jt,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx(jt,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})]})})]}),e.jsx("p",{className:"text-sm text-gray-700",children:f.plan==="pro"?"Rp 0/month + 30% commission per booking":"Rp 250,000/month + 0% commission"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-2 drop-shadow",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(_s,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-orange-500 w-5 h-5 z-10"}),e.jsx("input",{type:"email",value:U.email,onChange:C=>B(M=>({...M,email:C.target.value})),placeholder:"Enter your email",className:"w-full pl-12 pr-4 py-3 rounded-xl border border-white/20 focus:ring-2 focus:ring-orange-400/50 focus:border-orange-400 transition-all bg-white/95 backdrop-blur-sm text-gray-900 placeholder-gray-500 shadow-lg",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-2 drop-shadow",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(za,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-orange-500 w-5 h-5 z-10"}),e.jsx("input",{type:H?"text":"password",value:U.password,onChange:C=>B(M=>({...M,password:C.target.value})),placeholder:"Create a password (min 8 characters)",className:"w-full pl-12 pr-12 py-3 rounded-xl border border-white/20 focus:ring-2 focus:ring-orange-400/50 focus:border-orange-400 transition-all bg-white/95 backdrop-blur-sm text-gray-900 placeholder-gray-500 shadow-lg",required:!0}),e.jsx("button",{type:"button",onClick:()=>S(!H),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-orange-500 hover:text-orange-400 transition-colors z-10",children:H?e.jsx(cn,{className:"w-5 h-5"}):e.jsx(ma,{className:"w-5 h-5"})})]})]}),f&&e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:[e.jsxs("p",{className:"text-sm text-blue-800 font-semibold flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4"}),f.plan==="pro"?"Pro Plan Selected - No upfront payment needed!":"Plus Plan Selected - Payment required when you go live"]}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:f.plan==="pro"?"Start building your profile now. 30% commission applies when you get bookings.":"Complete your profile first. You'll upload payment proof when ready to go live."})]}),e.jsx("button",{type:"submit",disabled:N,className:"w-full py-4 bg-orange-500 hover:bg-orange-600 text-white font-semibold rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] shadow-xl hover:shadow-2xl backdrop-blur-sm disabled:opacity-50 disabled:cursor-not-allowed",children:N?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Creating Account..."]}):e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(ni,{className:"w-5 h-5 mr-2"}),(f==null?void 0:f.plan)==="plus"?"Create Account & Build Profile":"Create Therapist Account"]})})]})]})}),e.jsx("style",{children:"\n                .max-w-md::-webkit-scrollbar {\n                    display: none;\n                }\n                @media (max-height: 600px) {\n                    .space-y-4 > * + * {\n                        margin-top: 0.75rem;\n                    }\n                    .space-y-6 > * + * {\n                        margin-top: 1rem;\n                    }\n                }\n            "})]})},en=3,Mm=8e3;async function Bm(t){for(let a=1;a<=en;a++)try{const s=await Promise.race([je.listDocuments(Je,it.THERAPISTS,[ae.equal("email",t)]),new Promise((n,i)=>setTimeout(()=>i(new Error("Therapist query timeout")),Mm))]);if(s.documents.length>0)return s.documents[0];if(a===en)return null}catch(s){if(a===en)throw new Error("Failed to fetch therapist after ".concat(en," attempts: ").concat(s));const n=a*1e3;await new Promise(i=>setTimeout(i,n))}return null}async function tl(){try{const t=await Promise.race([$t.get(),new Promise((s,n)=>setTimeout(()=>n(new Error("Session check timeout")),5e3))]);if(!t)return null;const a=await Promise.race([$m(t.$id,t.email),new Promise(s=>setTimeout(()=>s(null),8e3))]);return a||null}catch{return null}}async function $m(t,a){try{try{if(it.ADMINS){const s=await Promise.race([je.listDocuments(Je,it.ADMINS,[ae.equal("email",a)]),new Promise((n,i)=>setTimeout(()=>i(new Error("Admin query timeout")),3e3))]);if(s.documents.length>0){const n=s.documents[0];return{type:"admin",id:t,email:a,documentId:n.$id,data:n}}}}catch{}try{if(it.HOTELS){const s=await Promise.race([je.listDocuments(Je,it.HOTELS,[ae.equal("email",a)]),new Promise((n,i)=>setTimeout(()=>i(new Error("Hotel query timeout")),3e3))]);if(s.documents.length>0){const n=s.documents[0];return{type:"hotel",id:t,email:a,documentId:n.$id,data:n}}}}catch{}try{if(it.VILLAS){const s=await Promise.race([je.listDocuments(Je,it.VILLAS,[ae.equal("email",a)]),new Promise((n,i)=>setTimeout(()=>i(new Error("Villa query timeout")),3e3))]);if(s.documents.length>0){const n=s.documents[0];return{type:"villa",id:t,email:a,documentId:n.$id,data:n}}}}catch{}try{if(it.AGENTS){const s=await Promise.race([je.listDocuments(Je,it.AGENTS,[ae.equal("email",a)]),new Promise((n,i)=>setTimeout(()=>i(new Error("Agent query timeout")),3e3))]);if(s.documents.length>0){const n=s.documents[0];return{type:"agent",id:t,email:a,documentId:n.$id,data:n}}}}catch{}try{const s=await Bm(a);if(s)return{type:"therapist",id:s.$id,email:a,documentId:s.$id,data:s}}catch{}try{const s=await Promise.race([je.listDocuments(Je,it.PLACES,[ae.equal("email",a)]),new Promise((n,i)=>setTimeout(()=>i(new Error("Place query timeout")),3e3))]);if(s.documents.length>0){const n=s.documents[0];return{type:"place",id:n.$id,email:a,documentId:n.$id,data:n}}}catch{}try{const s=it.EMPLOYER_PROFILES;if(s){const n=await Promise.race([je.listDocuments(Je,s,[ae.equal("email",a)]),new Promise((i,r)=>setTimeout(()=>r(new Error("Employer query timeout")),3e3))]);if(n.documents.length>0){const i=n.documents[0];return{type:"employer",id:i.$id,email:a,documentId:i.$id,data:i}}}}catch{}try{if(it.USERS){const s=await Promise.race([je.listDocuments(Je,it.USERS,[ae.equal("email",a)]),new Promise((n,i)=>setTimeout(()=>i(new Error("User query timeout")),3e3))]);if(s.documents.length>0){const n=s.documents[0];return{type:"user",id:t,email:a,documentId:n.$id,data:n}}}}catch{}return null}catch{return null}}async function Ua(){try{try{await $t.get(),await $t.deleteSession("current")}catch(t){if(t.code===401){return}throw t}}catch(t){if(t.code===401)return}}const Om=({onSuccess:t,onBack:a})=>{const[s,n]=o.useState(!1),[i,r]=o.useState(""),[l,d]=o.useState(""),[g,m]=o.useState(!1),[x,v]=o.useState(""),[j,I]=o.useState(!1),[p,R]=o.useState(""),[w,P]=o.useState(null);o.useEffect(()=>{try{const L=localStorage.getItem("packageDetails");if(L){const O=JSON.parse(L);P(O)}}catch{}},[]),ce.useEffect(()=>{window.resetPlaceRateLimit=()=>{ci("place-login"),ci("place-signup")},window.debugPlaceAuth=async(L,O)=>{try{return await Zs.signIn(L,O)}catch(H){return{success:!1,error:H}}},window.checkMassageSpa=async()=>{try{const{databases:L,DATABASE_ID:O,COLLECTIONS:H}=await z(async()=>{const{databases:k,DATABASE_ID:b,COLLECTIONS:y}=await import("./route-therapist.DVVqC6AH.js").then(T=>T.br);return{databases:k,DATABASE_ID:b,COLLECTIONS:y}},__vite__mapDeps([0,1,2,3,4,5,6]));return(await L.listDocuments(O,H.PLACES)).documents.filter(k=>{var b,y,T;return((b=k.name)==null?void 0:b.toLowerCase().includes("massage spa"))||((y=k.email)==null?void 0:y.toLowerCase().includes("massage"))||((T=k.email)==null?void 0:T.toLowerCase().includes("spa"))})}catch{return[]}},window.createTestMassageSpa=async(L,O)=>{try{return await Zs.signUp(L,O)}catch(H){return{success:!1,error:H}}},window.testDashboardNav=()=>{t("test_place_123")}},[t]);const D=async L=>{var O,H;L.preventDefault(),v(""),m(!0);try{if(!i||!l){v("Please enter both email and password"),m(!1);return}if(l.length<8){v("Password must be at least 8 characters"),m(!1);return}if(!Ga(s?"place-signup":"place-login",s?3:5,s?6e5:3e5)){v("Too many ".concat(s?"signup":"login"," attempts. Please wait before trying again.")),m(!1);return}if(s){const b=await Zs.signUp(i,l);if(b.success){const y=b.documentId||b.userId||"";if(!y)throw new Error("No placeId returned from signup - cannot proceed to dashboard");R("Provider stored in Appwrite: ".concat(y,", Type: place")),sessionStorage.setItem("has_entered_app","true"),sessionStorage.setItem("current_page","placeDashboard"),b.documentId,t(y);return}else throw new Error(b.error||"Sign up failed")}else{const b=await Zs.signIn(i,l);if(b.success&&b.userId){const y=b.documentId||b.userId;if(!y)throw new Error("No placeId returned from signin - cannot proceed to dashboard");sessionStorage.setItem("has_entered_app","true"),sessionStorage.setItem("current_page","placeDashboard"),b.documentId,t(y)}else throw new Error(b.error||"Sign in failed")}}catch(S){const N=S;let k=os(N,s?"signup":"login");i.toLowerCase().includes("massage")&&i.toLowerCase().includes("spa")&&((O=N.message)!=null&&O.includes("Invalid credentials")||(H=N.message)!=null&&H.includes("401"))&&(k="Login failed for massage spa account. Please check:\n                    1. Email: ".concat(i,"\n                    2. Password length (minimum 8 characters)\n                    3. Account exists (try creating account first if needed)\n                    \n                    Use browser console: checkMassageSpa() to verify account exists")),v(k)}finally{m(!1)}};return e.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col overflow-hidden fixed inset-0",children:[e.jsx(cs,{pageNumber:5,pageName:"MassagePlaceLoginPage",isLocked:!1}),e.jsx("header",{className:"bg-white p-4 shadow-md z-[9997] flex-shrink-0",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:[e.jsx("span",{className:"text-black",children:"Inda"}),e.jsx("span",{className:"text-orange-500",children:"Street"})]}),e.jsx("div",{className:"flex items-center gap-3 text-gray-600",children:e.jsx("button",{onClick:a,title:"Go to Home",className:"hover:text-orange-500 transition-colors",children:e.jsx(ls,{className:"w-5 h-5"})})})]})}),e.jsx("main",{className:"flex-1 flex items-start justify-center px-4 py-2 overflow-hidden relative bg-cover bg-center bg-no-repeat min-h-0",style:{backgroundImage:"url(https://ik.imagekit.io/7grri5v7d/massage%20spa.png)"},children:e.jsxs("div",{className:"max-w-md w-full relative z-10 max-h-full  pt-4 sm:pt-6",style:{scrollbarWidth:"none",msOverflowStyle:"none",overscrollBehavior:"contain"},children:[e.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-4xl sm:text-5xl font-bold mb-2 sm:mb-3 text-gray-800 drop-shadow-lg",children:"Massage Place"}),e.jsx("p",{className:"text-gray-600 text-xs sm:text-sm drop-shadow",children:"Manage your massage place services and bookings"})]}),e.jsxs("div",{className:"mb-3 sm:mb-4 min-h-[50px] flex items-center",children:[x&&e.jsx("div",{className:"w-full p-2 sm:p-3 rounded-lg text-sm ".concat(x.includes("âœ…")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"),children:x}),p&&!x&&e.jsxs("div",{className:"w-full p-2 sm:p-3 rounded-lg text-sm bg-blue-50 text-blue-700 border border-blue-200",children:["ðŸ” ",p]})]}),e.jsxs("div",{className:"flex mb-4 sm:mb-6 bg-white/95 backdrop-blur-sm rounded-lg p-1 border border-white/20 shadow-lg",children:[e.jsx("button",{onClick:()=>{n(!1),v("")},className:"flex-1 py-3 px-4 rounded-lg transition-all font-medium ".concat(s?"text-gray-700 hover:text-orange-500 hover:bg-orange-50/80":"bg-orange-500 text-white shadow-sm"),children:"Sign In"}),e.jsx("button",{onClick:()=>{n(!0),v("")},className:"flex-1 py-3 px-4 rounded-lg transition-all font-medium ".concat(s?"bg-orange-500 text-white shadow-sm":"text-gray-700 hover:text-orange-500 hover:bg-orange-50/80"),children:"Create Account"})]}),e.jsxs("form",{onSubmit:D,className:"space-y-4 sm:space-y-6",children:[s&&w&&e.jsxs("div",{className:"p-4 rounded-xl border-2 ".concat(w.plan==="pro"?"border-orange-200 bg-orange-50/95":"border-purple-200 bg-purple-50/95"," backdrop-blur-sm"),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($e,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"font-bold text-gray-800",children:w.plan==="pro"?"Pro Plan Selected":"Plus Plan Selected"})]}),e.jsx("div",{className:"flex items-center gap-1 mb-2",children:[...Array(5)].map((L,O)=>e.jsx(jt,{className:"w-4 h-4 ".concat(w.plan==="plus"||O<3?"fill-yellow-400 text-yellow-400":"fill-gray-300 text-gray-300")},O))}),e.jsxs("div",{className:"text-sm p-3 rounded-lg ".concat(w.plan==="pro"?"bg-blue-50 border border-blue-200":"bg-purple-100 border border-purple-200"),children:[e.jsx("p",{className:"font-semibold text-gray-800 mb-1",children:w.plan==="pro"?"No upfront payment needed!":"Payment required when you go live"}),e.jsx("p",{className:"text-xs text-gray-700",children:w.plan==="pro"?"Start building your profile now. 30% commission applies when you get bookings.":"Complete your profile first. You'll upload payment proof when ready to go live."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-2 drop-shadow",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(_s,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-orange-500 w-5 h-5 z-10"}),e.jsx("input",{type:"email",value:i,onChange:L=>r(L.target.value),placeholder:"Enter your email",className:"w-full pl-12 pr-4 py-3 rounded-xl border border-white/20 focus:ring-2 focus:ring-orange-400/50 focus:border-orange-400 transition-all bg-white/95 backdrop-blur-sm text-gray-900 placeholder-gray-500 shadow-lg",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-2 drop-shadow",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(za,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-orange-500 w-5 h-5 z-10"}),e.jsx("input",{type:j?"text":"password",value:l,onChange:L=>d(L.target.value),placeholder:s?"Create a password (min 8 characters)":"Enter your password",className:"w-full pl-12 pr-12 py-3 rounded-xl border border-white/20 focus:ring-2 focus:ring-orange-400/50 focus:border-orange-400 transition-all bg-white/95 backdrop-blur-sm text-gray-900 placeholder-gray-500 shadow-lg",required:!0}),e.jsx("button",{type:"button",onClick:()=>I(!j),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-orange-500 hover:text-orange-400 transition-colors z-10",children:j?e.jsx(cn,{className:"w-5 h-5"}):e.jsx(ma,{className:"w-5 h-5"})})]})]}),e.jsx("button",{type:"submit",disabled:g,className:"w-full py-4 bg-orange-500 hover:bg-orange-600 text-white font-semibold rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] shadow-xl hover:shadow-2xl backdrop-blur-sm disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),s?"Creating Account...":"Signing In..."]}):e.jsx("div",{className:"flex items-center justify-center gap-2",children:s?(w==null?void 0:w.plan)==="plus"?"âœ¨ Create Account & Build Profile":"âœ¨ Create Place Account":"ðŸ”‘ Sign In to Place"})})]})]})}),e.jsx("style",{children:"\n                .max-w-md::-webkit-scrollbar {\n                    display: none;\n                }\n                @media (max-height: 600px) {\n                    .space-y-4 > * + * {\n                        margin-top: 0.75rem;\n                    }\n                    .space-y-6 > * + * {\n                        margin-top: 1rem;\n                    }\n                }\n            "})]})},Um=({onSuccess:t,onBack:a,returnTo:s})=>{const[n,i]=o.useState(!1),[r,l]=o.useState(""),[d,g]=o.useState(""),[m,x]=o.useState(""),[v,j]=o.useState(""),[I,p]=o.useState(!1),[R,w]=o.useState(""),[P,D]=o.useState(!1),L=async O=>{O.preventDefault(),w(""),p(!0);try{if(!r||!d){w("Please enter both email and password"),p(!1);return}if(d.length<8){w("Password must be at least 8 characters"),p(!1);return}if(n&&!(m!=null&&m.trim())){w("Please enter your name"),p(!1);return}if(!Ga(n?"employer-signup":"employer-login",n?5:10,n?6e5:6e4)){w("Too many ".concat(n?"signup":"login"," attempts. Please wait before trying again.")),p(!1);return}if(n){const k=await no.signUp(r,d,m.trim()||void 0,v.trim()||void 0);if(k.success){w(""),alert("Account created successfully! Please sign in."),i(!1),p(!1);return}throw new Error(k.error||"Sign up failed")}else{const k=await no.signIn(r,d);if(k.success&&k.documentId){sessionStorage.setItem("has_entered_app","true"),k.documentId,k.documentId,k.documentId,t(k.documentId);return}throw new Error(k.error||"Sign in failed")}}catch(H){const S=H instanceof Error?H.message:"An error occurred";w(os(H,n?"signup":"login")||S)}finally{p(!1)}};return e.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col overflow-hidden fixed inset-0",children:[e.jsx(cs,{pageNumber:1,pageName:"EmployerLoginPage",isLocked:!1}),e.jsx("header",{className:"bg-white p-4 shadow-md z-[9997] flex-shrink-0",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:[e.jsx("span",{className:"text-black",children:"Inda"}),e.jsx("span",{className:"text-orange-500",children:"Street"})]}),e.jsx("button",{onClick:a,title:"Go back",className:"hover:text-orange-500 transition-colors",children:e.jsx(ls,{className:"w-5 h-5"})})]})}),e.jsx("main",{className:"flex-1 flex items-start justify-center px-4 py-2 overflow-hidden relative bg-cover bg-center bg-no-repeat min-h-0",style:{backgroundImage:"url(https://ik.imagekit.io/7grri5v7d/jungle%20massage.png)"},children:e.jsxs("div",{className:"max-w-md w-full relative z-10 max-h-full pt-4 sm:pt-6",style:{scrollbarWidth:"none",overscrollBehavior:"contain"},children:[e.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx(Ts,{className:"w-12 h-12 text-orange-500"})}),e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2 text-gray-800 drop-shadow-lg",children:"Post a Job"}),e.jsx("p",{className:"text-gray-600 text-sm drop-shadow",children:"Create an account or sign in to post job positions"})]}),R&&e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 text-red-700 border border-red-200 text-sm",children:R}),e.jsxs("div",{className:"flex mb-4 bg-white/95 backdrop-blur-sm rounded-lg p-1 border border-white/20 shadow-lg",children:[e.jsx("button",{onClick:()=>{i(!1),w("")},className:"flex-1 py-3 px-4 rounded-lg transition-all font-medium ".concat(n?"text-gray-700 hover:text-orange-500 hover:bg-orange-50/80":"bg-orange-500 text-white shadow-sm"),children:"Sign In"}),e.jsx("button",{onClick:()=>{i(!0),w("")},className:"flex-1 py-3 px-4 rounded-lg transition-all font-medium ".concat(n?"bg-orange-500 text-white shadow-sm":"text-gray-700 hover:text-orange-500 hover:bg-orange-50/80"),children:"Create Account"})]}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"Your Name"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",value:m,onChange:O=>x(O.target.value),placeholder:"Enter your name",className:"w-full pl-4 pr-4 py-3 rounded-xl border border-white/20 focus:ring-2 focus:ring-orange-400/50 bg-white/95 text-gray-900 placeholder-gray-500 shadow-lg"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"Business Name (optional)"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",value:v,onChange:O=>j(O.target.value),placeholder:"e.g. Spa Resort Bali",className:"w-full pl-4 pr-4 py-3 rounded-xl border border-white/20 focus:ring-2 focus:ring-orange-400/50 bg-white/95 text-gray-900 placeholder-gray-500 shadow-lg"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(_s,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-orange-500 w-5 h-5 z-10"}),e.jsx("input",{type:"email",value:r,onChange:O=>l(O.target.value),placeholder:"Enter your email",className:"w-full pl-12 pr-4 py-3 rounded-xl border border-white/20 focus:ring-2 focus:ring-orange-400/50 bg-white/95 text-gray-900 placeholder-gray-500 shadow-lg",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(za,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-orange-500 w-5 h-5 z-10"}),e.jsx("input",{type:P?"text":"password",value:d,onChange:O=>g(O.target.value),placeholder:n?"Create a password (min 8 characters)":"Enter your password",className:"w-full pl-12 pr-12 py-3 rounded-xl border border-white/20 focus:ring-2 focus:ring-orange-400/50 bg-white/95 text-gray-900 placeholder-gray-500 shadow-lg",required:!0}),e.jsx("button",{type:"button",onClick:()=>D(!P),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-orange-500 hover:text-orange-400 z-10",children:P?e.jsx(cn,{className:"w-5 h-5"}):e.jsx(ma,{className:"w-5 h-5"})})]})]}),e.jsx("button",{type:"submit",disabled:I,className:"w-full py-4 bg-orange-500 hover:bg-orange-600 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-xl",children:I?e.jsxs("div",{className:"flex justify-center",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),n?"Creating Account...":"Signing In..."]}):n?"Create Account":"Sign In"})]})]})})]})},Fm=({onTherapistLogin:t,onPlaceLogin:a,onTherapistSignup:s,onPlaceSignup:n,onBack:i})=>e.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col overflow-hidden fixed inset-0",children:[e.jsx(cs,{pageNumber:1,pageName:"ServicePersonnelLoginPage",isLocked:!1}),e.jsx("header",{className:"bg-white p-4 shadow-md z-[9997] flex-shrink-0",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:[e.jsx("span",{className:"text-black",children:"Inda"}),e.jsx("span",{className:"text-orange-500",children:"Street"})]}),e.jsx("button",{onClick:i,title:"Go back",className:"hover:text-orange-500 transition-colors",children:e.jsx(ls,{className:"w-5 h-5"})})]})}),e.jsx("main",{className:"flex-1 flex items-start justify-center px-4 py-6 overflow-auto",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"List Your Availability"}),e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Individuals looking for work list here â€” not businesses. Sign in or create an account (you donâ€™t need to be on IndaStreet yet)."}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Already on the platform? Employers will see your full profile, reviews and details when they view your listing."})]}),e.jsxs("div",{className:"mb-6 p-4 rounded-xl border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ct,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:"font-semibold text-gray-800",children:"Massage Therapist"})]}),e.jsx("p",{className:"text-gray-600 text-xs mb-3",children:"Iâ€™m a massage therapist looking for work. On IndaStreet or not â€” list your availability for employers."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:t,className:"flex-1 py-3 px-4 rounded-lg bg-blue-500 hover:bg-blue-600 text-white font-medium flex items-center justify-center gap-2 transition-colors",children:[e.jsx(Fr,{className:"w-4 h-4"}),"Sign In"]}),e.jsxs("button",{onClick:s,className:"flex-1 py-3 px-4 rounded-lg border-2 border-blue-500 text-blue-500 hover:bg-blue-50 font-medium flex items-center justify-center gap-2 transition-colors",children:[e.jsx(ni,{className:"w-4 h-4"}),"Create Account"]})]})]}),e.jsxs("div",{className:"p-4 rounded-xl border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Mo,{className:"w-6 h-6 text-orange-500"}),e.jsx("h3",{className:"font-semibold text-gray-800",children:"Spa or Skin Clinic Staff"})]}),e.jsx("p",{className:"text-gray-600 text-xs mb-3",children:"I work at a massage spa or skin clinic and want to advertise myself for work. (The spa or clinic itself doesnâ€™t list here.)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:a,className:"flex-1 py-3 px-4 rounded-lg bg-orange-500 hover:bg-orange-600 text-white font-medium flex items-center justify-center gap-2 transition-colors",children:[e.jsx(Fr,{className:"w-4 h-4"}),"Sign In"]}),e.jsxs("button",{onClick:n,className:"flex-1 py-3 px-4 rounded-lg border-2 border-orange-500 text-orange-500 hover:bg-orange-50 font-medium flex items-center justify-center gap-2 transition-colors",children:[e.jsx(ni,{className:"w-4 h-4"}),"Create Account"]})]})]})]})})]}),Hm=o.lazy(()=>z(()=>import("./route-portals.BJGRQhN_.js").then(t=>t.F),__vite__mapDeps([5,2,0,1,3,4,6]))),Vm=o.lazy(()=>z(()=>import("./PackageOnboarding.BK7VRGyn.js"),__vite__mapDeps([33,2,0,1,3,4,5,6]))),gt={auth:{component:es},signin:{component:es},signIn:{component:es},login:{component:es},signup:{component:es},onboardingPackage:{component:Vm},therapistLogin:{component:Rm},placeLogin:{component:Om},employerLogin:{component:Um},servicePersonnelLogin:{component:Fm},facialPortal:{component:Hm},simpleSignup:{component:es}},Wm=o.lazy(()=>z(()=>import("./MassagePlaceProfilePage.DhV9LK04.js"),__vite__mapDeps([34,2,35,0,1,3,4,5,6,23,8,9]))),zm=o.lazy(()=>z(()=>import("./FacialPlaceToClinicProfileAdapter.DnD8kIg3.js"),__vite__mapDeps([36,2,0,1,3,4,5,6]))),Gm=o.lazy(()=>z(()=>import("./PlaceDetailPage.dPbr8XOc.js"),__vite__mapDeps([37,2,3,0,1,4,5,6,8,9]))),Km=o.lazy(()=>z(()=>Promise.resolve().then(()=>ml),void 0)),Jm=o.lazy(()=>z(()=>import("./SharedPlaceProfile.CAEnyrjr.js"),__vite__mapDeps([38,2,39,0,1,3,4,5,6,35,23,8,9]))),qm=o.lazy(()=>z(()=>import("./SharedFacialProfile.PI484jqc.js"),__vite__mapDeps([40,2,39,0,1,3,4,5,6,22,23,8,9]))),ca={therapistProfile:{component:Kl},shareTherapist:{component:Km},sharePlace:{component:Jm},shareFacial:{component:qm},massagePlace:{component:Wm},facialPlace:{component:zm},placeDetail:{component:Gm}},Ym=o.lazy(()=>z(()=>import("./PrivacyPolicyPage.LeqxEl_5.js"),__vite__mapDeps([41,2]))),Qm=o.lazy(()=>z(()=>import("./CookiesPolicyPage.BFrdo30N.js"),__vite__mapDeps([42,2,0,1,3,4,5,6]))),Xm=o.lazy(()=>z(()=>Promise.resolve().then(()=>bg),void 0)),Zm=o.lazy(()=>z(()=>import("./PlaceTermsPage.DVl0CCuu.js"),__vite__mapDeps([43,2,44]))),eu=o.lazy(()=>z(()=>import("./PackageTermsPage.DLJo6Apr.js"),__vite__mapDeps([45,2]))),tu=o.lazy(()=>z(()=>import("./route-jobs._xfuCszQ.js").then(t=>t.a),__vite__mapDeps([46,2,0,1,3,4,5,6,47])));o.lazy(()=>z(()=>import("./MobileTermsAndConditionsPage.BtTA1cvN.js"),__vite__mapDeps([48,2,0,1,3,4,5,6])));const Na={privacy:{component:Ym},cookies:{component:Qm},serviceTerms:{component:Xm},placeTerms:{component:Zm},packageTerms:{component:eu},membershipTerms:{component:tu}},au=o.lazy(()=>z(()=>import("./BlogIndexPage.DZgVeY54.js"),__vite__mapDeps([49,2,0,1,3,4,5,6]))),su=o.lazy(()=>z(()=>import("./MassageBaliPage.CgOazCA0.js"),__vite__mapDeps([50,2,0,1,3,4,5,6]))),nu=o.lazy(()=>z(()=>import("./BalineseMassagePage.CAU9X0L6.js"),__vite__mapDeps([51,2,0,1,3,4,5,6,8,9]))),iu=o.lazy(()=>z(()=>import("./DeepTissueMassagePage.CVxeMAIC.js"),__vite__mapDeps([52,2,0,1,3,4,5,6,8,9]))),ru=o.lazy(()=>z(()=>import("./PressMediaPage.B13v7cvw.js"),__vite__mapDeps([53,2]))),vs={index:{component:au},massageBali:{component:su},balinese:{component:nu},deepTissue:{component:iu},press:{component:ru}},ou=o.createContext(null),lu=({children:t,onCriticalError:a,maxErrors:s=5,performanceThreshold:n=.8})=>{const[i,r]=o.useState({layoutShifts:0,errorCount:0,performanceScore:1,memoryUsage:0,lastError:null}),[l,d]=o.useState(!0),g=o.useCallback(I=>{r(p=>{const R=p.layoutShifts+I;return R>.1&&d(!1),{...p,layoutShifts:R}})},[]),m=o.useCallback(I=>{const p=I.message.toLowerCase();p.includes("navigation")||p.includes("router")||p.includes("loading chunk")||p.includes("dynamically imported")||p.includes("fetch")||r(w=>{const P=w.errorCount+1;return P>=s&&(d(!1),a==null||a(I)),{...w,errorCount:P,lastError:I}})},[s,a]),x=o.useCallback(()=>{r(I=>({...I,errorCount:0,lastError:null})),setTimeout(()=>{d(!0)},1e3)},[]),v=o.useCallback(()=>{"gc"in window&&typeof window.gc=="function"&&window.gc();try{const I=window.setTimeout(()=>{},0);for(let p=1;p<I;p++)window.clearTimeout(p);window.clearTimeout(I)}catch{}if("performance"in window&&"memory"in performance){const I=performance.memory;r(p=>({...p,memoryUsage:I.usedJSHeapSize/I.totalJSHeapSize,performanceScore:I.usedJSHeapSize<I.totalJSHeapSize*.7?1:.5}))}},[]);o.useEffect(()=>{if(!("PerformanceObserver"in window))return;const I=new PerformanceObserver(p=>{for(const R of p.getEntries())R.entryType==="layout-shift"&&!R.hadRecentInput&&g(R.value)});try{I.observe({entryTypes:["layout-shift"]})}catch{}return()=>I.disconnect()},[g]),o.useEffect(()=>{const I=setInterval(()=>{v(),i.performanceScore>=n&&i.errorCount<s/2&&d(!0)},3e4);return()=>clearInterval(I)},[i.performanceScore,i.errorCount,n,s,v]);const j={metrics:i,isStable:l,reportLayoutShift:g,reportError:m,recoverFromError:x,optimizePerformance:v};return e.jsx(ou.Provider,{value:j,children:t})},cu=()=>e.jsx("div",{className:"elite-loading-container",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"elite-skeleton w-16 h-16 rounded-full mx-auto mb-4"}),e.jsx("div",{className:"elite-skeleton w-32 h-4 mx-auto mb-2"}),e.jsx("div",{className:"elite-skeleton w-24 h-3 mx-auto"})]})}),du=({children:t})=>{const[a,s]=o.useState(!1),[n,i]=o.useState(null),[r,l]=o.useState(0);o.useEffect(()=>{const g=x=>{if(x.error&&x.error.message){const v=x.error.message.toLowerCase();!v.includes("navigation")&&!v.includes("router")&&!v.includes("loading chunk")&&!v.includes("fetch")&&(i(new Error(x.error.message)),l(I=>I+1),r>=1&&s(!0))}},m=x=>{if(x.reason&&typeof x.reason=="object"&&x.reason.message){const v=x.reason.message.toLowerCase();!v.includes("navigation")&&!v.includes("fetch")&&!v.includes("loading chunk")&&(i(new Error(x.reason.message)),l(I=>I+1),r>=1&&s(!0))}};return window.addEventListener("error",g),window.addEventListener("unhandledrejection",m),()=>{window.removeEventListener("error",g),window.removeEventListener("unhandledrejection",m)}},[r]);const d=o.useCallback(()=>{s(!1),i(null),l(0),setTimeout(()=>{a&&window.location.reload()},3e3)},[a]);return a?e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-lg w-full bg-white rounded-xl shadow-lg p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(zt,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Elite Dashboard Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"An unexpected error occurred in the dashboard. Our elite error recovery system will restore functionality."}),n&&e.jsxs("details",{className:"mb-4 text-left",children:[e.jsx("summary",{className:"cursor-pointer text-sm text-gray-500 mb-2",children:"Error Details"}),e.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded overflow-auto max-h-32",children:n.message})]}),e.jsx("div",{className:"flex gap-3 justify-center",children:e.jsxs("button",{onClick:d,className:"bg-orange-500 text-white px-6 py-2 rounded-lg font-medium hover:bg-orange-600 transition-colors flex items-center gap-2",children:[e.jsx(Bo,{size:16}),"Recover Dashboard"]})})]})}):e.jsx(e.Fragment,{children:t})},mu=({children:t,title:a="Therapist Dashboard",subtitle:s="Elite Professional Interface",showMetrics:n=!1})=>{const i=o.useCallback(r=>{typeof window!="undefined"&&"gtag"in window&&typeof window.gtag=="function"&&window.gtag("event","exception",{description:r.message,fatal:!1})},[]);return e.jsx(lu,{onCriticalError:i,maxErrors:3,performanceThreshold:.75,children:e.jsxs(du,{children:[e.jsxs("div",{className:"sr-only",children:[e.jsx("h1",{children:a}),s&&e.jsx("p",{children:s})]}),e.jsx(o.Suspense,{fallback:e.jsx(cu,{}),children:t})]})})},uu=[{city:"Jakarta",province:"DKI Jakarta",areas:[{id:"jakarta-kemang",name:"Kemang",nameId:"Kemang",popular:!0},{id:"jakarta-senopati",name:"Senopati",nameId:"Senopati",popular:!0},{id:"jakarta-blok-m",name:"Blok M",nameId:"Blok M",popular:!0},{id:"jakarta-cilandak",name:"Cilandak",nameId:"Cilandak",popular:!0},{id:"jakarta-menteng",name:"Menteng",nameId:"Menteng",popular:!0},{id:"jakarta-tanah-abang",name:"Tanah Abang",nameId:"Tanah Abang",popular:!1},{id:"jakarta-kebon-jeruk",name:"Kebon Jeruk",nameId:"Kebon Jeruk",popular:!1},{id:"jakarta-puri",name:"Puri",nameId:"Puri",popular:!0},{id:"jakarta-kelapa-gading",name:"Kelapa Gading",nameId:"Kelapa Gading",popular:!0},{id:"jakarta-pluit",name:"Pluit",nameId:"Pluit",popular:!1},{id:"jakarta-cibubur",name:"Cibubur",nameId:"Cibubur",popular:!1},{id:"jakarta-rawamangun",name:"Rawamangun",nameId:"Rawamangun",popular:!1}]},{city:"Canggu",province:"Bali",areas:[{id:"canggu-beach",name:"Canggu Beach",nameId:"Pantai Canggu",popular:!0},{id:"canggu-berawa",name:"Berawa",nameId:"Berawa",popular:!0},{id:"canggu-echo-beach",name:"Echo Beach",nameId:"Echo Beach",popular:!0},{id:"canggu-pererenan",name:"Pererenan",nameId:"Pererenan",popular:!0},{id:"canggu-batu-bolong",name:"Batu Bolong",nameId:"Batu Bolong",popular:!0}]},{city:"Seminyak",province:"Bali",areas:[{id:"seminyak-center",name:"Seminyak Center",nameId:"Seminyak Tengah",popular:!0},{id:"seminyak-beach",name:"Seminyak Beach",nameId:"Pantai Seminyak",popular:!0},{id:"seminyak-petitenget",name:"Petitenget",nameId:"Petitenget",popular:!0},{id:"seminyak-oberoi",name:"Oberoi",nameId:"Oberoi",popular:!0},{id:"seminyak-double-six",name:"Double Six",nameId:"Double Six",popular:!1}]},{city:"Kuta",province:"Bali",areas:[{id:"kuta-beach",name:"Kuta Beach",nameId:"Pantai Kuta",popular:!0},{id:"kuta-legian",name:"Legian",nameId:"Legian",popular:!0},{id:"kuta-tuban",name:"Tuban",nameId:"Tuban",popular:!1},{id:"kuta-airport-area",name:"Airport Area",nameId:"Area Bandara",popular:!0}]},{city:"Ubud",province:"Bali",areas:[{id:"ubud-center",name:"Ubud Center",nameId:"Ubud Pusat",popular:!0},{id:"ubud-tegallalang",name:"Tegallalang",nameId:"Tegallalang",popular:!0},{id:"ubud-monkey-forest",name:"Monkey Forest",nameId:"Hutan Monyet",popular:!0},{id:"ubud-campuhan",name:"Campuhan",nameId:"Campuhan",popular:!1},{id:"ubud-payangan",name:"Payangan",nameId:"Payangan",popular:!1}]},{city:"Sanur",province:"Bali",areas:[{id:"sanur-beach",name:"Sanur Beach",nameId:"Pantai Sanur",popular:!0},{id:"sanur-center",name:"Sanur Center",nameId:"Sanur Pusat",popular:!0},{id:"sanur-north",name:"North Sanur",nameId:"Sanur Utara",popular:!1},{id:"sanur-bypass",name:"Bypass Sanur",nameId:"Bypass Sanur",popular:!1}]},{city:"Nusa Dua",province:"Bali",areas:[{id:"nusa-dua-resort",name:"Resort Complex",nameId:"Kompleks Resor",popular:!0},{id:"nusa-dua-btdc",name:"BTDC Area",nameId:"Area BTDC",popular:!0},{id:"nusa-dua-sawangan",name:"Sawangan",nameId:"Sawangan",popular:!1},{id:"nusa-dua-benoa",name:"Benoa",nameId:"Benoa",popular:!1}]},{city:"Jimbaran",province:"Bali",areas:[{id:"jimbaran-beach",name:"Jimbaran Beach",nameId:"Pantai Jimbaran",popular:!0},{id:"jimbaran-center",name:"Jimbaran Center",nameId:"Jimbaran Pusat",popular:!0},{id:"jimbaran-kedonganan",name:"Kedonganan",nameId:"Kedonganan",popular:!0},{id:"jimbaran-uluwatu-road",name:"Uluwatu Road",nameId:"Jalan Uluwatu",popular:!1}]},{city:"Denpasar",province:"Bali",areas:[{id:"denpasar-center",name:"Denpasar Center",nameId:"Denpasar Pusat",popular:!0},{id:"denpasar-renon",name:"Renon",nameId:"Renon",popular:!0},{id:"denpasar-sanglah",name:"Sanglah",nameId:"Sanglah",popular:!1},{id:"denpasar-sesetan",name:"Sesetan",nameId:"Sesetan",popular:!1}]},{city:"Yogyakarta",province:"DI Yogyakarta",areas:[{id:"yogya-sleman",name:"Sleman",nameId:"Sleman",popular:!0},{id:"yogya-kota",name:"Kota Yogyakarta",nameId:"Kota Yogyakarta",popular:!0},{id:"yogya-bantul",name:"Bantul",nameId:"Bantul",popular:!1},{id:"yogya-malioboro",name:"Malioboro",nameId:"Malioboro",popular:!0},{id:"yogya-prawirotaman",name:"Prawirotaman",nameId:"Prawirotaman",popular:!0}]},{city:"Bandung",province:"West Java",areas:[{id:"bandung-dago",name:"Dago",nameId:"Dago",popular:!0},{id:"bandung-setiabudi",name:"Setiabudi",nameId:"Setiabudi",popular:!0},{id:"bandung-pasteur",name:"Pasteur",nameId:"Pasteur",popular:!0},{id:"bandung-antapani",name:"Antapani",nameId:"Antapani",popular:!1},{id:"bandung-cihampelas",name:"Cihampelas",nameId:"Cihampelas",popular:!0}]},{city:"Surabaya",province:"East Java",areas:[{id:"surabaya-barat",name:"Surabaya Barat",nameId:"Surabaya Barat",popular:!0},{id:"surabaya-timur",name:"Surabaya Timur",nameId:"Surabaya Timur",popular:!0},{id:"surabaya-selatan",name:"Surabaya Selatan",nameId:"Surabaya Selatan",popular:!0},{id:"surabaya-pusat",name:"Surabaya Pusat",nameId:"Surabaya Pusat",popular:!0},{id:"surabaya-gubeng",name:"Gubeng",nameId:"Gubeng",popular:!1}]},{city:"Medan",province:"North Sumatra",areas:[{id:"medan-baru",name:"Medan Baru",nameId:"Medan Baru",popular:!0},{id:"medan-petisah",name:"Medan Petisah",nameId:"Medan Petisah",popular:!0},{id:"medan-johor",name:"Medan Johor",nameId:"Medan Johor",popular:!0},{id:"medan-polonia",name:"Polonia",nameId:"Polonia",popular:!1}]},{city:"Makassar",province:"South Sulawesi",areas:[{id:"makassar-panakkukang",name:"Panakkukang",nameId:"Panakkukang",popular:!0},{id:"makassar-tamalate",name:"Tamalate",nameId:"Tamalate",popular:!0},{id:"makassar-rappocini",name:"Rappocini",nameId:"Rappocini",popular:!0},{id:"makassar-mamajang",name:"Mamajang",nameId:"Mamajang",popular:!1}]},{city:"Batam",province:"Riau Islands",areas:[{id:"batam-nagoya",name:"Nagoya",nameId:"Nagoya",popular:!0},{id:"batam-batu-ampar",name:"Batu Ampar",nameId:"Batu Ampar",popular:!0},{id:"batam-bengkong",name:"Bengkong",nameId:"Bengkong",popular:!0},{id:"batam-harbor-bay",name:"Harbor Bay",nameId:"Harbor Bay",popular:!1}]},{city:"Kuala Lumpur",province:"Federal Territory",areas:[{id:"kl-bukit-bintang",name:"Bukit Bintang",nameId:"Bukit Bintang",popular:!0},{id:"kl-klcc",name:"KLCC",nameId:"KLCC",popular:!0},{id:"kl-bangsar",name:"Bangsar",nameId:"Bangsar",popular:!0},{id:"kl-mont-kiara",name:"Mont Kiara",nameId:"Mont Kiara",popular:!0},{id:"kl-chow-kit",name:"Chow Kit",nameId:"Chow Kit",popular:!1},{id:"kl-sentral",name:"KL Sentral",nameId:"KL Sentral",popular:!0},{id:"kl-desa-sri-hartamas",name:"Desa Sri Hartamas",nameId:"Desa Sri Hartamas",popular:!1}]},{city:"Penang",province:"Penang",areas:[{id:"penang-georgetown",name:"Georgetown",nameId:"Georgetown",popular:!0},{id:"penang-batu-ferringhi",name:"Batu Ferringhi",nameId:"Batu Ferringhi",popular:!0},{id:"penang-gurney-drive",name:"Gurney Drive",nameId:"Gurney Drive",popular:!0},{id:"penang-tanjung-bungah",name:"Tanjung Bungah",nameId:"Tanjung Bungah",popular:!0},{id:"penang-teluk-bahang",name:"Teluk Bahang",nameId:"Teluk Bahang",popular:!1}]},{city:"Johor Bahru",province:"Johor",areas:[{id:"jb-city-center",name:"City Center",nameId:"City Center",popular:!0},{id:"jb-danga-bay",name:"Danga Bay",nameId:"Danga Bay",popular:!0},{id:"jb-austin-heights",name:"Austin Heights",nameId:"Austin Heights",popular:!1},{id:"jb-mount-austin",name:"Mount Austin",nameId:"Mount Austin",popular:!0},{id:"jb-nusa-bestari",name:"Nusa Bestari",nameId:"Nusa Bestari",popular:!1}]},{city:"Bangkok",province:"Bangkok",areas:[{id:"bangkok-sukhumvit",name:"Sukhumvit",nameId:"Sukhumvit",popular:!0},{id:"bangkok-silom",name:"Silom",nameId:"Silom",popular:!0},{id:"bangkok-sathorn",name:"Sathorn",nameId:"Sathorn",popular:!0},{id:"bangkok-thonglor",name:"Thonglor",nameId:"Thonglor",popular:!0},{id:"bangkok-ekkamai",name:"Ekkamai",nameId:"Ekkamai",popular:!0},{id:"bangkok-phrom-phong",name:"Phrom Phong",nameId:"Phrom Phong",popular:!0},{id:"bangkok-asoke",name:"Asoke",nameId:"Asoke",popular:!0},{id:"bangkok-nana",name:"Nana",nameId:"Nana",popular:!1},{id:"bangkok-siam",name:"Siam",nameId:"Siam",popular:!0},{id:"bangkok-riverside",name:"Riverside",nameId:"Riverside",popular:!1}]},{city:"Phuket",province:"Phuket",areas:[{id:"phuket-patong",name:"Patong",nameId:"Patong",popular:!0},{id:"phuket-kata",name:"Kata",nameId:"Kata",popular:!0},{id:"phuket-karon",name:"Karon",nameId:"Karon",popular:!0},{id:"phuket-kamala",name:"Kamala",nameId:"Kamala",popular:!0},{id:"phuket-bang-tao",name:"Bang Tao",nameId:"Bang Tao",popular:!0},{id:"phuket-surin",name:"Surin",nameId:"Surin",popular:!1},{id:"phuket-rawai",name:"Rawai",nameId:"Rawai",popular:!1},{id:"phuket-chalong",name:"Chalong",nameId:"Chalong",popular:!1}]},{city:"Chiang Mai",province:"Chiang Mai",areas:[{id:"chiangmai-old-city",name:"Old City",nameId:"Old City",popular:!0},{id:"chiangmai-nimman",name:"Nimman",nameId:"Nimman",popular:!0},{id:"chiangmai-riverside",name:"Riverside",nameId:"Riverside",popular:!0},{id:"chiangmai-santitham",name:"Santitham",nameId:"Santitham",popular:!1},{id:"chiangmai-mae-rim",name:"Mae Rim",nameId:"Mae Rim",popular:!1}]},{city:"Pattaya",province:"Chonburi",areas:[{id:"pattaya-central",name:"Central Pattaya",nameId:"Central Pattaya",popular:!0},{id:"pattaya-north",name:"North Pattaya",nameId:"North Pattaya",popular:!0},{id:"pattaya-south",name:"South Pattaya",nameId:"South Pattaya",popular:!0},{id:"pattaya-jomtien",name:"Jomtien",nameId:"Jomtien",popular:!0},{id:"pattaya-naklua",name:"Naklua",nameId:"Naklua",popular:!1},{id:"pattaya-pratumnak",name:"Pratumnak Hill",nameId:"Pratumnak Hill",popular:!0}]},{city:"Manila",province:"Metro Manila",areas:[{id:"manila-makati",name:"Makati",nameId:"Makati",popular:!0},{id:"manila-bgc",name:"Bonifacio Global City (BGC)",nameId:"BGC",popular:!0},{id:"manila-ortigas",name:"Ortigas",nameId:"Ortigas",popular:!0},{id:"manila-quezon-city",name:"Quezon City",nameId:"Quezon City",popular:!0},{id:"manila-malate",name:"Malate",nameId:"Malate",popular:!0},{id:"manila-ermita",name:"Ermita",nameId:"Ermita",popular:!1},{id:"manila-pasay",name:"Pasay",nameId:"Pasay",popular:!1},{id:"manila-manila-bay",name:"Manila Bay",nameId:"Manila Bay",popular:!0}]},{city:"Cebu",province:"Cebu",areas:[{id:"cebu-city-center",name:"Cebu City Center",nameId:"Cebu City Center",popular:!0},{id:"cebu-it-park",name:"IT Park",nameId:"IT Park",popular:!0},{id:"cebu-lahug",name:"Lahug",nameId:"Lahug",popular:!0},{id:"cebu-mactan",name:"Mactan",nameId:"Mactan",popular:!0},{id:"cebu-mandaue",name:"Mandaue",nameId:"Mandaue",popular:!1},{id:"cebu-banilad",name:"Banilad",nameId:"Banilad",popular:!1}]},{city:"Boracay",province:"Aklan",areas:[{id:"boracay-station-1",name:"Station 1",nameId:"Station 1",popular:!0},{id:"boracay-station-2",name:"Station 2",nameId:"Station 2",popular:!0},{id:"boracay-station-3",name:"Station 3",nameId:"Station 3",popular:!0},{id:"boracay-bulabog",name:"Bulabog Beach",nameId:"Bulabog Beach",popular:!0},{id:"boracay-diniwid",name:"Diniwid",nameId:"Diniwid",popular:!1}]},{city:"Ho Chi Minh City",province:"Ho Chi Minh",areas:[{id:"hcmc-district-1",name:"District 1",nameId:"Quáº­n 1",popular:!0},{id:"hcmc-district-2",name:"District 2",nameId:"Quáº­n 2",popular:!0},{id:"hcmc-district-3",name:"District 3",nameId:"Quáº­n 3",popular:!0},{id:"hcmc-phu-my-hung",name:"Phu My Hung",nameId:"PhÃº Má»¹ HÆ°ng",popular:!0},{id:"hcmc-thao-dien",name:"Thao Dien",nameId:"Tháº£o Äiá»n",popular:!0},{id:"hcmc-binh-thanh",name:"Binh Thanh",nameId:"BÃ¬nh Tháº¡nh",popular:!1},{id:"hcmc-district-7",name:"District 7",nameId:"Quáº­n 7",popular:!0}]},{city:"Hanoi",province:"Hanoi",areas:[{id:"hanoi-old-quarter",name:"Old Quarter",nameId:"Phá»‘ Cá»•",popular:!0},{id:"hanoi-hoan-kiem",name:"Hoan Kiem",nameId:"HoÃ n Kiáº¿m",popular:!0},{id:"hanoi-tay-ho",name:"Tay Ho",nameId:"TÃ¢y Há»“",popular:!0},{id:"hanoi-ba-dinh",name:"Ba Dinh",nameId:"Ba ÄÃ¬nh",popular:!0},{id:"hanoi-cau-giay",name:"Cau Giay",nameId:"Cáº§u Giáº¥y",popular:!1},{id:"hanoi-dong-da",name:"Dong Da",nameId:"Äá»‘ng Äa",popular:!1}]},{city:"Da Nang",province:"Da Nang",areas:[{id:"danang-my-khe",name:"My Khe Beach",nameId:"BÃ£i Biá»ƒn Má»¹ KhÃª",popular:!0},{id:"danang-son-tra",name:"Son Tra",nameId:"SÆ¡n TrÃ ",popular:!0},{id:"danang-hai-chau",name:"Hai Chau",nameId:"Háº£i ChÃ¢u",popular:!0},{id:"danang-ngu-hanh-son",name:"Ngu Hanh Son",nameId:"NgÅ© HÃ nh SÆ¡n",popular:!0},{id:"danang-thanh-khe",name:"Thanh Khe",nameId:"Thanh KhÃª",popular:!1}]},{city:"Nha Trang",province:"Khanh Hoa",areas:[{id:"nhatrang-city-center",name:"City Center",nameId:"Trung TÃ¢m",popular:!0},{id:"nhatrang-beach-area",name:"Beach Area",nameId:"Khu BÃ£i Biá»ƒn",popular:!0},{id:"nhatrang-biet-thu",name:"Biet Thu",nameId:"Biá»‡t Thá»±",popular:!0},{id:"nhatrang-vinh-nguyen",name:"Vinh Nguyen",nameId:"VÄ©nh NguyÃªn",popular:!1},{id:"nhatrang-loc-tho",name:"Loc Tho",nameId:"Lá»™c Thá»",popular:!1}]}],gu=t=>{const a=uu.find(s=>s.city===t);return(a==null?void 0:a.areas)||[]};class hu{constructor(){Se(this,"collectionId","booking_acknowledgments");Se(this,"TIMEOUT_MINUTES",5)}async createAcknowledgment(a,s,n,i,r,l,d,g){const m=new Date,x=new Date(m.getTime()+this.TIMEOUT_MINUTES*6e4);try{const v=await je.createDocument(Pe.databaseId,this.collectionId,yt.unique(),{bookingId:a,therapistId:s,therapistName:n,customerName:i,customerWhatsApp:r,customerLocation:l,serviceDuration:d,servicePrice:g,sentAt:m.toISOString(),expiresAt:x.toISOString(),status:"pending",broadcastedToOthers:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});return this.scheduleTimeoutCheck(v.$id,x),this.triggerNotificationSound(s,a),v}catch(v){throw v}}async acceptBooking(a,s){try{if(await this.checkUnpaidCommissions(s))throw new Error("PAYMENT_REQUIRED: You must pay your previous booking commission before accepting new bookings.");const i=new Date,r=await je.getDocument(Pe.databaseId,this.collectionId,a);if(r.status!=="pending")throw new Error("Booking is no longer available");if(new Date>new Date(r.expiresAt))throw new Error("Booking acceptance window expired");const l=new Date(r.sentAt),d=Math.floor((i.getTime()-l.getTime())/1e3),g=await je.updateDocument(Pe.databaseId,this.collectionId,a,{status:"accepted",acknowledgedAt:i.toISOString(),responseTime:d,finalAssignedTo:s,updatedAt:new Date().toISOString()});return this.stopNotificationSound(s),await this.notifyCustomerAccepted(r,s),g}catch(n){throw n}}async rejectBooking(a,s,n){try{const i=await je.getDocument(Pe.databaseId,this.collectionId,a);if(i.status!=="pending")throw new Error("Booking already processed");await je.updateDocument(Pe.databaseId,this.collectionId,a,{status:"rejected",acknowledgedAt:new Date().toISOString(),rejectionReason:n||"No reason provided",updatedAt:new Date().toISOString()}),this.stopNotificationSound(s),await this.broadcastToOtherTherapists(i)}catch(i){throw i}}async checkExpiredAcknowledgments(){try{const a=new Date().toISOString(),s=await je.listDocuments(Pe.databaseId,this.collectionId,[ae.equal("status","pending"),ae.lessThan("expiresAt",a)]);for(const n of s.documents){const i=n;await je.updateDocument(Pe.databaseId,this.collectionId,i.$id,{status:"expired",updatedAt:new Date().toISOString()}),this.stopNotificationSound(i.therapistId),await this.notifyCustomerTimeout(i),await this.broadcastToOtherTherapists(i)}}catch{}}async broadcastToOtherTherapists(a){try{const s=await je.listDocuments(Pe.databaseId,Pe.collections.therapists,[ae.equal("status","available"),ae.notEqual("$id",a.therapistId)]);for(const n of s.documents)await this.checkUnpaidCommissions(n.$id)||await this.createAcknowledgment(a.bookingId+"_broadcast_"+n.$id,n.$id,n.fullName||"Therapist",a.customerName,a.customerWhatsApp,a.customerLocation,a.serviceDuration,a.servicePrice);await je.updateDocument(Pe.databaseId,this.collectionId,a.$id,{broadcastedToOthers:!0,updatedAt:new Date().toISOString()})}catch{}}async checkUnpaidCommissions(a){try{return(await je.listDocuments(Pe.databaseId,"commission_payments",[ae.equal("therapistId",a),ae.equal("status",["pending","overdue"])])).documents.length>0}catch{return!1}}triggerNotificationSound(a,s){typeof window!="undefined"&&window.dispatchEvent(new CustomEvent("playBookingNotification",{detail:{therapistId:a,bookingId:s}}))}stopNotificationSound(a){typeof window!="undefined"&&window.dispatchEvent(new CustomEvent("stopBookingNotification",{detail:{therapistId:a}}))}async notifyCustomerAccepted(a,s){}async notifyCustomerTimeout(a){}scheduleTimeoutCheck(a,s){const n=s.getTime()-Date.now();n>0&&setTimeout(async()=>{await this.checkExpiredAcknowledgments()},n+1e3)}async getTherapistStats(a){var s,n;try{const i=await je.listDocuments(Pe.databaseId,this.collectionId,[ae.equal("therapistId",a),ae.limit(100)]),r=i.documents.length,l=i.documents.filter(j=>j.status==="accepted"),d=i.documents.filter(j=>j.status==="rejected"),g=i.documents.filter(j=>j.status==="expired"),m=l.map(j=>j.responseTime).filter(j=>j!==void 0),x=m.length>0?m.reduce((j,I)=>j+I,0)/m.length:0,v=r>0?l.length/r*100:0;return{totalReceived:r,totalAccepted:l.length,totalRejected:d.length,totalExpired:g.length,averageResponseTime:x,acceptanceRate:v}}catch(i){if((i==null?void 0:i.code)===404||(s=i==null?void 0:i.message)!=null&&s.includes("Collection")||(n=i==null?void 0:i.message)!=null&&n.includes("could not be found"))return{totalReceived:0,totalAccepted:0,totalRejected:0,totalExpired:0,averageResponseTime:0,acceptanceRate:0};throw i}}}const Bn=new hu,al=({isOpen:t,onClose:a,helpKey:s,content:n,language:i="id"})=>(o.useEffect(()=>{var r;if(t){const l=JSON.parse(localStorage.getItem("therapist_help_seen")||"{}");l[s]={timestamp:Date.now(),count:(((r=l[s])==null?void 0:r.count)||0)+1},localStorage.setItem("therapist_help_seen",JSON.stringify(l))}},[t,s]),o.useEffect(()=>{if(!t)return;const r=l=>{l.key==="Escape"&&a()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t,a]),o.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9998] transition-opacity duration-300",onClick:a,"aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-end md:items-center justify-center p-0 md:p-4 pointer-events-none",role:"dialog","aria-modal":"true","aria-labelledby":"help-modal-title",children:e.jsxs("div",{className:"bg-white rounded-t-3xl md:rounded-2xl shadow-2xl w-full md:max-w-md max-h-[80vh] md:max-h-[70vh] overflow-hidden flex flex-col pointer-events-auto animate-slideUp md:animate-fadeIn",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start justify-between p-6 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:n.icon||e.jsx(Ni,{className:"w-6 h-6 text-orange-600"})}),e.jsx("div",{className:"flex-1",children:e.jsx("h3",{id:"help-modal-title",className:"text-lg font-bold text-gray-900 leading-tight",children:n.title})})]}),e.jsx("button",{onClick:a,className:"flex-shrink-0 p-2 hover:bg-gray-100 rounded-full transition-colors -mt-1 -mr-1","aria-label":"Tutup bantuan",children:e.jsx(wt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 pt-4",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4 whitespace-pre-line",children:n.content}),n.bullets&&n.bullets.length>0&&e.jsx("ul",{className:"space-y-2",children:n.bullets.map((r,l)=>e.jsxs("li",{className:"flex items-start gap-2 text-gray-700",children:[e.jsx("span",{className:"text-orange-500 mt-1 flex-shrink-0",children:"â€¢"}),e.jsx("span",{className:"flex-1",children:r})]},l))})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsx("button",{onClick:a,className:"w-full py-3 px-4 bg-orange-500 hover:bg-orange-600 text-white font-semibold rounded-xl transition-colors active:scale-[0.98]",children:"Mengerti"})})]})}),e.jsx("style",{children:"\n        @keyframes slideUp {\n          from {\n            transform: translateY(100%);\n            opacity: 0;\n          }\n          to {\n            transform: translateY(0);\n            opacity: 1;\n          }\n        }\n        \n        @keyframes fadeIn {\n          from {\n            opacity: 0;\n            transform: scale(0.95);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n        \n        .animate-slideUp {\n          animation: slideUp 0.3s ease-out;\n        }\n        \n        .animate-fadeIn {\n          animation: fadeIn 0.2s ease-out;\n        }\n      "})]}):null),pu=({onClick:t,className:a="","aria-label":s="Bantuan"})=>e.jsx("button",{onClick:t,className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-yellow-200 hover:bg-yellow-300 text-yellow-800 transition-colors flex-shrink-0 ".concat(a),"aria-label":s,type:"button",children:e.jsx(Ni,{className:"w-4 h-4"})}),sl=()=>{const[t,a]=o.useState(!1),[s,n]=o.useState(""),i=o.useCallback(m=>{n(m),a(!0)},[]),r=o.useCallback(()=>{a(!1),setTimeout(()=>n(""),300)},[]),l=o.useCallback(m=>{try{return!!JSON.parse(localStorage.getItem("therapist_help_seen")||"{}")[m]}catch{return!1}},[]),d=o.useCallback(m=>{var x;try{return((x=JSON.parse(localStorage.getItem("therapist_help_seen")||"{}")[m])==null?void 0:x.count)||0}catch{return 0}},[]),g=o.useCallback(()=>{localStorage.removeItem("therapist_help_seen")},[]);return{isHelpOpen:t,currentHelpKey:s,openHelp:i,closeHelp:r,hasSeenHelp:l,getHelpSeenCount:d,clearHelpSeen:g}},nl=({therapistId:t,membershipTier:a})=>{const{isHelpOpen:s,currentHelpKey:n,openHelp:i,closeHelp:r}=sl(),[l,d]=o.useState([]),[g,m]=o.useState({}),[x,v]=o.useState(!0),[j,I]=o.useState(!1),[p,R]=o.useState(null),[w,P]=o.useState(!1),D=ce.useRef(null);o.useEffect(()=>{D.current=new Audio("/sounds/booking-notification.mp3"),D.current.loop=!0,L(),window.addEventListener("playBookingNotification",O),window.addEventListener("stopBookingNotification",H);const B=setInterval(L,1e4);return()=>{window.removeEventListener("playBookingNotification",O),window.removeEventListener("stopBookingNotification",H),clearInterval(B),D.current&&D.current.pause()}},[t]),o.useEffect(()=>{const B=setInterval(()=>{const f={};l.forEach(A=>{const c=Math.max(0,Math.floor((new Date(A.expiresAt).getTime()-Date.now())/1e3));f[A.$id]=c,c===0&&A.status==="pending"&&y(A.$id)}),m(f)},1e3);return()=>clearInterval(B)},[l]);const L=async()=>{try{const B=await Bn.getTherapistStats(t);u.debug("Loading pending bookings for:",t)}catch(B){u.error("Error loading pending bookings:",B)}},O=B=>{const{therapistId:f}=B.detail;f===t&&L()},H=()=>{S()},S=()=>{D.current&&(D.current.pause(),D.current.currentTime=0,I(!1))},N=()=>{v(!x),!x&&j&&S()},k=async B=>{var f,A;R(B);try{await Bn.acceptBooking(B,t),S(),Ms.stopBookingAlert(B),d(c=>c.filter(h=>h.$id!==B)),alert("âœ… Booking accepted! Customer has been notified.")}catch(c){u.error("Error accepting booking:",c),(f=c.message)!=null&&f.includes("PAYMENT_REQUIRED")?alert("âŒ Cannot accept booking: You must pay your previous booking commission first."):(A=c.message)!=null&&A.includes("no longer available")?(alert("âš ï¸ Booking is no longer available. It may have been assigned to another therapist."),d(h=>h.filter(C=>C.$id!==B))):alert("âŒ Error accepting booking. Please try again.")}finally{R(null)}},b=async B=>{const f=prompt("Why are you rejecting this booking? (Optional)");R(B);try{await Bn.rejectBooking(B,t,f||void 0),S(),Ms.stopBookingAlert(B),d(A=>A.filter(c=>c.$id!==B)),alert("âœ… Booking rejected. It will be offered to other therapists.")}catch(A){u.error("Error rejecting booking:",A),alert("âŒ Error rejecting booking. Please try again.")}finally{R(null)}},y=B=>{S(),d(f=>f.filter(A=>A.$id!==B))},T=B=>{const f=Math.floor(B/60),A=B%60;return"".concat(f,":").concat(A.toString().padStart(2,"0"))},F=l.length,U=F>0;return ce.useEffect(()=>{U&&P(!0)},[U]),w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] ",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-orange-500 to-orange-600 text-white p-4 flex items-center justify-between rounded-t-2xl",children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:["ðŸ”” Booking Notifications (",F,")"]}),e.jsx("button",{onClick:()=>P(!1),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(wt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[!U&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âœ…"}),e.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"No Pending Bookings"}),e.jsx("p",{className:"text-gray-500",children:"You're all caught up! New bookings will appear here."})]}),U&&e.jsxs("div",{className:"flex items-center justify-between bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[j?e.jsx(wc,{className:"w-5 h-5 text-blue-600 animate-pulse"}):e.jsx(vc,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:j?"Notification Playing":"Notifications"})]}),e.jsx("button",{onClick:N,className:"px-4 py-1 rounded-lg text-sm font-medium transition-colors ".concat(x?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-600 hover:bg-gray-400"),children:x?"Sound On":"Sound Off"})]}),l.map(B=>{const f=g[B.$id]||0,A=f<60,c=p===B.$id;return e.jsxs("div",{className:"bg-white border-2 rounded-lg p-6 shadow-lg animate-pulse-slow ".concat(A?"border-red-500 bg-red-50":"border-orange-500"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"ðŸš¨ NEW BOOKING REQUEST"}),e.jsx(pu,{onClick:()=>i("bookingCountdown")})]}),e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full font-bold text-lg ".concat(A?"bg-red-500 text-white animate-pulse":"bg-orange-500 text-white"),children:[e.jsx(ze,{className:"w-5 h-5"}),T(f)]})]}),a==="free"&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-300 rounded-lg p-3 mb-4",children:e.jsx("p",{className:"text-sm text-yellow-800 font-semibold",children:"âš ï¸ PRO MEMBER: No WhatsApp provided. Use in-app chat only."})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"ðŸ‘¤ Customer:"}),e.jsx("span",{className:"text-gray-900",children:B.customerName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"ðŸ“ Location:"}),e.jsx("span",{className:"text-gray-900",children:B.customerLocation})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"â±ï¸ Duration:"}),e.jsxs("span",{className:"text-gray-900",children:[B.serviceDuration," minutes"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"ðŸ’° Price:"}),e.jsxs("span",{className:"text-gray-900 font-bold",children:["IDR ",B.servicePrice.toLocaleString("id-ID")]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>k(B.$id),disabled:c,className:"flex items-center justify-center gap-2 px-6 py-4 rounded-lg font-bold text-lg transition-all ".concat(c?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 hover:shadow-xl transform hover:scale-105"),children:[e.jsx(dn,{className:"w-6 h-6"}),c?"Processing...":"Accept Booking"]}),e.jsxs("button",{onClick:()=>b(B.$id),disabled:c,className:"flex items-center justify-center gap-2 px-6 py-4 rounded-lg font-bold text-lg transition-all ".concat(c?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700 hover:shadow-xl transform hover:scale-105"),children:[e.jsx(wt,{className:"w-6 h-6"}),c?"Processing...":"Reject Booking"]})]}),A&&e.jsx("div",{className:"mt-4 bg-red-100 border border-red-300 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-5 h-5 text-red-600"}),e.jsx("p",{className:"text-sm text-red-800 font-bold",children:"URGENT: Less than 1 minute remaining! Accept or reject now!"})]})}),a==="free"&&e.jsx("div",{className:"mt-4 bg-orange-50 border border-orange-300 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-orange-800",children:["âš ï¸ ",e.jsx("strong",{children:"Pro Member Notice:"})," Operating outside Indastreet platform = Immediate permanent deactivation + WhatsApp blocking.",e.jsx("a",{href:"/membership",className:"underline ml-1",children:"Upgrade to Plus"})," for WhatsApp access."]})})]},B.$id)})]})]})}),e.jsx(al,{isOpen:s,onClose:r,helpKey:n,content:Vo[n],language:"id"})]}):e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsxs("button",{onClick:()=>P(!0),className:"relative p-4 rounded-full shadow-2xl transition-all transform hover:scale-110 ".concat(U?"bg-orange-500 animate-pulse":"bg-orange-500 hover:bg-orange-600"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),U&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold rounded-full w-7 h-7 flex items-center justify-center border-2 border-white animate-bounce",children:F})]})})};function Sn(){const t=navigator.userAgent,a=navigator.vendor||"",s=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t),n=/iPad|iPhone|iPod/.test(t)&&!window.MSStream,i=/Android/.test(t);let r="Unknown",l=0,d=!1;if(/Chrome/.test(t)&&/Google Inc/.test(a)){r="Chrome";const m=t.match(/Chrome\/([0-9.]+)/);l=m?parseInt(m[1]):0,d=l>=73}else if(/SamsungBrowser/.test(t)){r="Samsung Internet";const m=t.match(/SamsungBrowser\/([0-9.]+)/);l=m?parseInt(m[1]):0,d=l>=10}else if(/Edg/.test(t)){r="Edge";const m=t.match(/Edg\/([0-9.]+)/);l=m?parseInt(m[1]):0,d=l>=79}else if(/Firefox/.test(t)){r="Firefox";const m=t.match(/Firefox\/([0-9.]+)/);l=m?parseInt(m[1]):0,d=l>=63}else if(/Safari/.test(t)&&/Apple Computer/.test(a)){r=n?"Safari iOS":"Safari";const m=t.match(/Version\/([0-9.]+)/);l=m?parseFloat(m[1]):0,d=l>=12.1}else if(/OPR/.test(t)){r="Opera";const m=t.match(/OPR\/([0-9.]+)/);l=m?parseInt(m[1]):0,d=l>=60}const g=r.includes("Safari")||r.includes("Chrome")||l>=50;return{name:r,version:l,isSupported:d,isMobile:s,isIOS:n,isAndroid:i,requiresHTTPS:g}}function il(){const t=Sn();if(!navigator.geolocation)return{supported:!1,error:"Geolocation not supported in ".concat(t.name,". Please update your browser."),browserInfo:t};const a=window.location.protocol==="https:"||window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.startsWith("192.168.")||window.location.hostname.endsWith(".local");return t.requiresHTTPS&&!a?{supported:!1,error:"".concat(t.name," requires HTTPS for location access. Please access the site via https://"),browserInfo:t}:t.isSupported?{supported:!0,browserInfo:t}:{supported:!1,error:"".concat(t.name," ").concat(t.version," is outdated. Please update to the latest version."),browserInfo:t}}function xu(t){const a=t||Sn();return{enableHighAccuracy:!0,timeout:a.isIOS||a.name.includes("Safari")?3e4:2e4,maximumAge:0}}function fu(t,a){const s=a||Sn();switch(t.code){case t.PERMISSION_DENIED:return s.isIOS?"Location access denied. Go to Settings â†’ Privacy & Security â†’ Location Services â†’ Safari â†’ Allow":s.name==="Chrome"?"Location access denied. Click the ðŸ”’ icon in address bar â†’ Site settings â†’ Location â†’ Allow":s.name==="Firefox"?"Location access denied. Click the ðŸ”’ icon in address bar â†’ Clear permissions â†’ Reload page":s.name==="Safari"?"Location access denied. Safari â†’ Preferences â†’ Websites â†’ Location â†’ Allow for this site":"Location access denied. Please enable location permissions in your browser settings.";case t.POSITION_UNAVAILABLE:return s.isIOS?"GPS unavailable. Ensure Location Services are ON in Settings â†’ Privacy â†’ Location Services":"GPS position unavailable. Try: 1) Move to an open area, 2) Enable device GPS, 3) Restart browser";case t.TIMEOUT:return s.isIOS||s.name.includes("Safari")?"GPS timeout (30 seconds). Move to an area with clear sky view and try again.":"GPS timeout (20 seconds). Move outdoors or near a window and try again.";default:return"Unknown location error. Try refreshing the page or using a different browser."}}function bu(){try{const t="__storage_test__";return localStorage.setItem(t,"test"),localStorage.removeItem(t),sessionStorage.setItem(t,"test"),sessionStorage.removeItem(t),{localStorage:!0,sessionStorage:!0}}catch{return{localStorage:!1,sessionStorage:!1}}}function yu(){const t=Sn(),a=il(),s=bu();return{browser:t,geolocation:a,storage:s,features:{fetch:typeof fetch=="function",promise:typeof Promise=="function",async:!0,customEvent:typeof CustomEvent=="function",intl:typeof Intl=="object"&&typeof Intl.NumberFormat=="function"}}}function wu(){const t=yu();t.browser.isIOS,t.browser.isAndroid}const vu=({therapist:t,onNavigate:a,onNavigateToStatus:s,onNavigateToBookings:n,onNavigateToEarnings:i,onNavigateToPayment:r,onNavigateToPaymentStatus:l,onNavigateToCommission:d,onNavigateToSchedule:g,onNavigateToChat:m,onNavigateToMembership:x,onNavigateToNotifications:v,onNavigateToLegal:j,onNavigateToHowItWorks:I,onNavigateToCalendar:p,onNavigateToMenu:R,onLogout:w,onNavigateHome:P,language:D="id"})=>{u.debug("TherapistPortalPage rendering",{therapist:(t==null?void 0:t.name)||"null"});const[L,O]=o.useState(!1),[H,S]=o.useState(!1),[N,k]=o.useState(!1),[b,y]=o.useState(null),[T,F]=o.useState(!1),[U,B]=o.useState(null),[f,A]=o.useState(null),[c,h]=o.useState(!1),[C,M]=o.useState(!1),[E,W]=o.useState(!1),[X,_]=o.useState((t==null?void 0:t.name)||""),[$,q]=o.useState((t==null?void 0:t.description)||""),[J,Z]=o.useState((t==null?void 0:t.whatsappNumber)||"+62"),[me,Fe]=o.useState(String((t==null?void 0:t.price60)||"100")),[ve,re]=o.useState(String((t==null?void 0:t.price90)||"150")),[Oe,Le]=o.useState(String((t==null?void 0:t.price120)||"200")),[De,ht]=o.useState(String((t==null?void 0:t.yearsOfExperience)||"5")),[St,Pt]=o.useState((t==null?void 0:t.clientPreferences)||"Males And Females"),[te,ie]=o.useState(()=>{try{const V=t==null?void 0:t.languages;if(Array.isArray(V))return V.slice(0,3);if(typeof V=="string"&&V){const ee=JSON.parse(V);if(Array.isArray(ee))return ee.slice(0,3)}}catch{}return[]}),[Ie,de]=o.useState(()=>{try{const V=t==null?void 0:t.massageTypes;if(Array.isArray(V))return V.slice(0,5);if(typeof V=="string"&&V){const ee=JSON.parse(V);if(Array.isArray(ee))return ee.slice(0,5)}}catch{}return[]}),[He,Qe]=o.useState(null),{country:xt,countryCode:ue}=pi(),[we,_e]=o.useState(null),Me=72,Ue=ce.useMemo(()=>{const V=(t==null?void 0:t.profileWentLiveAt)||we;if(!V)return!1;const ee=Me*60*60*1e3;return Date.now()-new Date(V).getTime()>ee},[t==null?void 0:t.profileWentLiveAt,we]),[Be,mt]=o.useState(!1),[Xe,rt]=o.useState(!1),[ba,ua]=o.useState(!1),[qe,ta]=o.useState(()=>{try{const V=t==null?void 0:t.coordinates;if(V){const ee=typeof V=="string"?JSON.parse(V):V;if(ee!=null&&ee.lat&&(ee!=null&&ee.lng))return{lat:ee.lat,lng:ee.lng}}}catch{}return null}),[Ut,Ta]=o.useState(()=>{try{const V=t==null?void 0:t.serviceAreas;if(Array.isArray(V))return V;if(typeof V=="string"&&V){const ee=JSON.parse(V);if(Array.isArray(ee))return ee}}catch(V){u.warn("Failed to parse service areas:",V)}return[]}),aa=[{code:"id",label:"ðŸ‡®ðŸ‡© Indonesian"},{code:"en",label:"ðŸ‡¬ðŸ‡§ English"},{code:"zh",label:"ðŸ‡¨ðŸ‡³ Chinese"},{code:"ja",label:"ðŸ‡¯ðŸ‡µ Japanese"},{code:"ko",label:"ðŸ‡°ðŸ‡· Korean"},{code:"ar",label:"ðŸ‡¸ðŸ‡¦ Arabic"},{code:"ru",label:"ðŸ‡·ðŸ‡º Russian"},{code:"fr",label:"ðŸ‡«ðŸ‡· French"},{code:"de",label:"ðŸ‡©ðŸ‡ª German"},{code:"es",label:"ðŸ‡ªðŸ‡¸ Spanish"}],Ja=V=>{ie(ee=>V==="id"?ee.includes("id")?ee:["id",...ee].slice(0,3):ee.includes(V)?ee.filter(G=>G!==V):ee.length<3?[...ee,V]:ee)};ce.useEffect(()=>{te.includes("id")||ie(V=>["id",...V.filter(ee=>ee!=="id")].slice(0,3))},[]),o.useEffect(()=>{var ee,G;if(!(t!=null&&t.$id)&&!(t!=null&&t.id)){u.debug("No therapist ID, skipping booking subscription");return}const V=String((G=(ee=t.$id)!=null?ee:t.appwriteId)!=null?G:t.id);u.debug("Starting real-time booking subscription for therapist:",{therapistId:V});try{const le="databases.".concat(Je,".collections.").concat(Pe.collections.bookings,".documents");u.debug("Subscribing to booking channel:",{channelName:le});const ke=Ao.subscribe(le,We=>{if(u.debug("Real-time booking event received:",We.events),We.events.includes("databases.*.collections.*.documents.*.create")){const Ce=We.payload;if(u.debug("New booking created:",{bookingId:Ce.$id,therapistId:Ce.therapistId,customerName:Ce.customerName,status:Ce.bookingStatus||Ce.status}),Ce.therapistId===V||Ce.providerId===V){u.debug("Booking is for current therapist - triggering notification");const lt=new CustomEvent("playBookingNotification",{detail:{bookingId:Ce.$id||Ce.bookingId,therapistId:V,customerName:Ce.customerName||Ce.userName,duration:Ce.duration||Ce.serviceDuration,location:Ce.locationZone||Ce.customerLocation,bookingType:Ce.bookingType==="SCHEDULED"?"scheduled":"immediate"}});window.dispatchEvent(lt);try{Ms.startBookingAlert(Ce.$id||Ce.bookingId,"pending"),u.debug("Sound alert started for booking:",Ce.$id)}catch(Ge){u.error("Failed to start booking sound:",Ge)}se("ðŸ”” New Booking from ".concat(Ce.customerName||"Customer"),"success")}else u.debug("Booking is for different therapist, ignoring")}if(We.events.includes("databases.*.collections.*.documents.*.update")){const Ce=We.payload;if(Ce.therapistId===V||Ce.providerId===V){u.debug("Booking updated:",{bookingId:Ce.$id,status:Ce.bookingStatus||Ce.status});const lt=["ACCEPTED","DECLINED","EXPIRED","CONFIRMED","COMPLETED"];if(lt.includes(Ce.bookingStatus)||lt.includes(Ce.status)){try{Ms.stopBookingAlert(Ce.$id||Ce.bookingId),u.debug("Sound stopped for booking:",Ce.$id)}catch(Ge){u.error("Failed to stop booking sound:",Ge)}window.dispatchEvent(new Event("stopBookingNotification"))}}}});return u.debug("Real-time booking subscription active"),()=>{u.debug("Unsubscribing from real-time booking notifications"),ke()}}catch(le){u.error("Failed to subscribe to bookings:",le)}},[t==null?void 0:t.$id,t==null?void 0:t.id]),o.useEffect(()=>{(async()=>{if(!(!(t!=null&&t.$id)&&!(t!=null&&t.id)))try{const ee=String(t.$id||t.id);u.debug("Loading latest therapist data from database",{therapistId:ee});const G=await Ye.getById(ee);if(u.debug("Latest therapist data loaded",{name:G.name}),G.profileWentLiveAt&&_e(G.profileWentLiveAt),G.name&&_(G.name),G.description&&q(G.description),G.whatsappNumber&&Z(G.whatsappNumber),G.price60&&Fe(String(G.price60)),G.price90&&re(String(G.price90)),G.price120&&Le(String(G.price120)),G.yearsOfExperience&&ht(String(G.yearsOfExperience)),G.clientPreferences&&Pt(G.clientPreferences),G.profilePicture&&(Qe(G.profilePicture),u.debug("Profile picture loaded")),G.Globe)try{const le=typeof G.Globe=="string"?JSON.parse(G.Globe):G.Globe;Array.isArray(le)&&ie(le.slice(0,3))}catch(le){u.warn("Failed to parse Globe:",le)}if(G.massageTypes)try{const le=typeof G.massageTypes=="string"?JSON.parse(G.massageTypes):G.massageTypes;Array.isArray(le)&&de(le.slice(0,5))}catch(le){u.warn("Failed to parse massage types:",le)}if(G.coordinates)try{const le=typeof G.coordinates=="string"?JSON.parse(G.coordinates):G.coordinates;le!=null&&le.lat&&(le!=null&&le.lng)&&(ta({lat:le.lat,lng:le.lng}),mt(!0))}catch(le){u.warn("Failed to parse coordinates:",le)}}catch(ee){u.error("Failed to load latest therapist data:",ee)}})()},[t==null?void 0:t.$id,t==null?void 0:t.id]),o.useEffect(()=>{const V=()=>{if(document.visibilityState!=="visible"||!(t!=null&&t.$id)&&!(t!=null&&t.id))return;const ee=String(t.$id||t.id);Ye.getById(ee).then(G=>{if(G.name&&_(G.name),G.description&&q(G.description),G.whatsappNumber&&Z(G.whatsappNumber),G.price60&&Fe(String(G.price60)),G.price90&&re(String(G.price90)),G.price120&&Le(String(G.price120)),G.yearsOfExperience&&ht(String(G.yearsOfExperience)),G.clientPreferences&&Pt(G.clientPreferences),G.profilePicture&&Qe(G.profilePicture),G.coordinates)try{const le=typeof G.coordinates=="string"?JSON.parse(G.coordinates):G.coordinates;le!=null&&le.lat&&(le!=null&&le.lng)&&(ta({lat:le.lat,lng:le.lng}),mt(!0))}catch{}}).catch(()=>{})};return document.addEventListener("visibilitychange",V),()=>document.removeEventListener("visibilitychange",V)},[t==null?void 0:t.$id,t==null?void 0:t.id]),o.useEffect(()=>{try{const V=localStorage.getItem("packageDetails");if(V){const ee=JSON.parse(V);y(ee),u.debug("ðŸ“¦ Package detected from registration",{pkg:ee})}}catch(V){u.error("âŒ Error parsing package details",{error:V})}},[]),o.useEffect(()=>{S(!1)},[X,J,$,Ie,te,me,ve,Oe,De,St]);const ms=()=>{if(u.debug("ðŸ”˜ Location button clicked"),Xe){u.debug("â³ GPS request already in progress");return}wu();const V=il();if(!V.supported){u.error("âŒ Browser compatibility issue",{error:V.error}),se("âŒ ".concat(V.error),"error");return}const{browserInfo:ee}=V;u.debug("âœ… Browser supported",{browser:ee.name,version:ee.version}),rt(!0),se("ðŸ“ Getting your GPS location... Please allow location access","info"),u.debug("ðŸ“ Requesting GPS location");const G=xu(ee);u.debug("ðŸ”§ Geolocation options",{geoOptions:G}),navigator.geolocation.getCurrentPosition(async le=>{u.debug("âœ… GPS position received",{position:le});const ke=le.coords.accuracy;u.debug("ðŸ“ GPS accuracy",{accuracy:"".concat(ke,"m")});const We={lat:le.coords.latitude,lng:le.coords.longitude};u.debug("ðŸ“ Raw coordinates",{coords:We});const Ce=qr({geopoint:We});if(u.debug("ðŸ” Validation result",{validation:Ce}),!Ce.isValid){u.error("âŒ GPS validation failed",{error:Ce.error}),se("âŒ GPS location invalid: ".concat(Ce.error),"error"),rt(!1);return}const lt=Zn(We,50),Ge=lt?lt.locationId:Oa(We);u.debug("ðŸŽ¯ GPS-derived city",{derivedCity:Ge,matchedCity:lt==null?void 0:lt.name}),ta(We),mt(!0),u.debug("ðŸ’¾ Saving GPS location immediately to database");try{await Ye.update(String(t.$id||t.id),{geopoint:We,coordinates:JSON.stringify(We),city:Ge,locationId:Ge,location:Ge,isLive:!0,lastLocationUpdateAt:new Date().toISOString()}),u.debug("âœ… GPS location saved immediately to database"),u.debug("âœ… City assignment",{derivedCity:Ge}),ua(!0),setTimeout(()=>ua(!1),8e3),setTimeout(async()=>{try{const pt=await Ye.getById(String(t.$id||t.id));pt.city===Ge&&pt.locationId===Ge?u.debug("âœ… VERIFICATION PASSED: GPS location saved correctly"):u.error("âŒ VERIFICATION FAILED",{expected:Ge,savedCity:pt.city,savedLocationId:pt.locationId})}catch(pt){u.warn("âš ï¸ Could not verify GPS save",{verifyError:pt})}},1e3)}catch(Dt){u.error("âŒ Failed to save GPS to database",{saveError:Dt}),se("âš ï¸ GPS captured but not saved. Please try again or contact support.","error"),rt(!1);return}rt(!1),ke>500?se("âš ï¸ GPS accuracy is low (".concat(Math.round(ke),"m). Consider moving to an open area for better accuracy."),"warning"):se("âœ… GPS location saved! You are now live in ".concat(Ge,"."),"success"),u.debug("âœ… Location state updated successfully")},le=>{rt(!1),u.error("âŒ GPS error occurred",{error:le,code:le.code,message:le.message});const ke=fu(le,ee);u.error("ðŸ“± Formatted error",{errorMessage:ke}),se("âŒ ".concat(ke),"error")},G),u.debug("â³ Waiting for GPS response")},us=V=>{var le;const ee=(le=V.target.files)==null?void 0:le[0];if(!ee)return;if(ee.size>5*1024*1024){se("Image too large (max 5MB)","error");return}k(!0);const G=new FileReader;G.onloadend=()=>{Qe(G.result),k(!1),se("âœ… Image ready (will upload on save)","success")},G.onerror=()=>{k(!1),se("âŒ Image load failed","error")},G.readAsDataURL(ee)},Ft=V=>{de(ee=>ee.includes(V)?ee.filter(G=>G!==V):ee.length<5?[...ee,V]:ee)},Tt=V=>!V||V.trim()===""?0:V.trim().split(/\s+/).filter(Boolean).length,qa=async()=>{if(u.debug("ðŸš€ handleSaveProfile called"),!t){u.error("âŒ No therapist data found"),se("âŒ Error: Therapist data not loaded","error");return}u.debug("ðŸ“ Starting save with therapist",{id:t.$id||t.id,name:t.name,email:t.email,keys:Object.keys(t),updateId:String(t.$id||t.id)}),O(!0);try{const V=[];X.trim()||V.push("Name"),(!J.trim()||J.trim()==="+62")&&V.push("WhatsApp Number"),(!qe||!qe.lat||!qe.lng)&&V.push("GPS Location (MANDATORY - click SET GPS LOCATION button)");const ee=100,G=parseInt(me,10),le=parseInt(ve,10),ke=parseInt(Oe,10);if((!me.trim()||!ve.trim()||!Oe.trim()||isNaN(G)||G<ee||isNaN(le)||le<ee||isNaN(ke)||ke<ee)&&V.push("Traditional Massage 3 prices (60/90/120 min, min 100 each)"),V.length>0){se("âŒ Required fields missing: ".concat(V.join(", ")),"error"),O(!1),S(!1);return}const We=Tt($);if(We>350){se("Description too long (".concat(We,"/350)"),"error"),O(!1);return}let Ce=J.trim();if(Ce.startsWith("+62")||(Ce="+62"+Ce.replace(/^\+?/,"")),!/^\+62\d{6,15}$/.test(Ce)){se("Invalid WhatsApp (+62 + digits)","error"),O(!1);return}let lt=t.profilePicture;if(He&&He.startsWith("data:")){u.debug("ðŸ“¤ Uploading profile image to Appwrite Storage");try{lt=await ti.uploadProfileImage(He),u.debug("âœ… Profile image uploaded",{profilePictureUrl:lt})}catch(Jt){u.error("âŒ Failed to upload profile image",{uploadError:Jt}),se("âš ï¸ Image upload failed, saving without image","error")}}if(u.debug("ðŸŒ Memvalidasi persyaratan GPS WAJIB"),!qe||!qe.lat||!qe.lng){se('âŒ Lokasi GPS WAJIB. Silakan klik tombol "ATUR LOKASI GPS" di atas.',"error"),O(!1);return}const Ge={lat:qe.lat,lng:qe.lng};u.debug("ðŸ“ GPS coordinates for save",{geopoint:Ge});const Dt=qr({geopoint:Ge});if(!Dt.isValid){se("âŒ GPS location invalid: ".concat(Dt.error),"error"),O(!1);return}const pt=Oa(Ge);u.debug("ðŸ·ï¸ GPS-derived city (ONLY SOURCE)",{derivedLocationId:pt}),u.debug("âœ… Geopoint validation passed");const Kt=100,_t=parseInt(me,10),hs=parseInt(ve,10),Ne=parseInt(Oe,10);if(me&&!isNaN(_t)&&_t<Kt||ve&&!isNaN(hs)&&hs<Kt||Oe&&!isNaN(Ne)&&Ne<Kt){se("âŒ Minimum price is Rp 100,000 (enter 100 or higher) for 60, 90, and 120 minutes.","error"),O(!1);return}const Ya=Ue,Qa=qe?{lat:qe.lat,lng:qe.lng}:(t==null?void 0:t.geopoint)||(t==null?void 0:t.coordinates)&&(typeof t.coordinates=="string"?JSON.parse(t.coordinates):t.coordinates),Ai=(t==null?void 0:t.locationId)||(t==null?void 0:t.city)||(t==null?void 0:t.location)||pt,Xa={name:Ya&&(t==null?void 0:t.name)||X.trim(),description:Ya&&(t==null?void 0:t.description)||$.trim(),Globe:JSON.stringify(te),price60:me.trim(),price90:ve.trim(),price120:Oe.trim(),yearsOfExperience:parseInt(De)||5,clientPreferences:St,whatsappNumber:Ce,massageTypes:JSON.stringify(Ie.slice(0,5)),serviceAreas:JSON.stringify(Ut),country:xt||"Indonesia",geopoint:Ge,city:pt,locationId:pt,location:pt,coordinates:JSON.stringify(Ge),isLive:!!(Ge&&Ge.lat&&Ge.lng),status:t.status||"available",availability:t.availability||"Available",isOnline:!0};Ya?Xa.profilePicture=(t==null?void 0:t.profilePicture)||"":lt&&!lt.startsWith("data:")&&(Xa.profilePicture=lt);const ft=await Ye.update(String(t.$id||t.id),Xa);u.debug("âœ… Profile saved to Appwrite",{savedTherapist:ft});const Aa=jn(ft);Aa&&Math.abs(Aa.lat-Ge.lat)<.001&&Math.abs(Aa.lng-Ge.lng)<.001?u.debug("âœ… GEOPOINT SAVE VERIFIED",{savedGeopoint:Aa}):u.error("âŒ GEOPOINT SAVE FAILED",{expected:Ge,saved:Aa}),ft.locationId===pt&&ft.city===pt?u.debug("âœ… LOCATION ID & CITY SAVE VERIFIED",{derivedLocationId:pt}):u.error("âŒ LOCATION SAVE FAILED",{expected:pt,savedLocationId:ft.locationId,savedCity:ft.city}),u.debug("â³ Waiting for database to commit changes"),await new Promise(Jt=>setTimeout(Jt,500)),u.debug("ðŸŒ Auto-translating profile data");try{const{adminTranslationService:Jt}=await z(async()=>{const{adminTranslationService:Ei}=await import("./route-therapist.DVVqC6AH.js").then(Vs=>Vs.bB);return{adminTranslationService:Ei}},__vite__mapDeps([0,1,2,3,4,5,6])),Pn=$.match(/[a-zA-Z]/)?"en":"id",ps=await Jt.translateAndSaveTherapistData(String(t.$id||t.id),{description:$.trim(),massageTypes:Ie.join(", "),location:((t==null?void 0:t.location)||"").trim(),name:X.trim()},Pn);ps.success?u.debug("âœ… Auto-translation completed successfully"):u.warn("âš ï¸ Auto-translation failed",{error:ps.error})}catch(Jt){u.error("âŒ Translation error (non-blocking)",{translationError:Jt})}_(ft.name||X),Z(ft.whatsappNumber||J),q(ft.description||$),Fe(String(ft.price60||me)),re(String(ft.price90||ve)),Le(String(ft.price120||Oe)),u.debug("ðŸ”” Dispatching refreshTherapistData event"),window.dispatchEvent(new CustomEvent("refreshTherapistData",{detail:"profile-updated"})),u.debug("ðŸ”” Dispatching therapist data refresh for parent app"),window.dispatchEvent(new CustomEvent("therapistProfileUpdated",{detail:{therapistId:ft.$id,updatedData:ft}})),u.debug("ðŸŽ‰ About to show success toast"),!Ge||!Ge.lat||!Ge.lng?(se("âš ï¸ Profile saved but NOT LIVE: GPS location required for marketplace visibility","warning"),u.warn("ðŸš¨ PRODUCTION SAFETY: Therapist saved with isLive=false due to missing geopoint")):(se("âœ… Profile saved and LIVE! Visit the main homepage to see your card.","success"),u.debug("âœ… isLive set to true - visible on HomePage at https://www.indastreetmassage.com")),W(!0)}catch(V){u.error("âŒ Failed to save profile",{error:V,message:V==null?void 0:V.message});const ee=(V==null?void 0:V.message)||(V==null?void 0:V.toString())||"Failed to save profile";se("âŒ Error: ".concat(ee),"error")}finally{O(!1)}},oe=100,fe=parseInt(me,10),Ve=parseInt(ve,10),Re=parseInt(Oe,10),st=me.trim()!==""&&ve.trim()!==""&&Oe.trim()!==""&&!isNaN(fe)&&fe>=oe&&!isNaN(Ve)&&Ve>=oe&&!isNaN(Re)&&Re>=oe,ot=X.trim()&&/^\+62\d{6,15}$/.test(J.trim())&&qe&&qe.lat&&qe.lng&&st,Et=async()=>{if(!b){se("âŒ Package not detected. Please contact support.","error");return}b.plan==="pro"?ya():await gs()},ya=async()=>{if(t){O(!0);try{await Ye.update(String(t.$id||t.id),{isLive:!0,status:"Available",availability:"Available",isOnline:!0}),se("âœ… Your profile is now LIVE! You'll pay 30% commission on bookings.","success"),window.dispatchEvent(new CustomEvent("refreshTherapistData",{detail:"profile-activated"})),s&&setTimeout(()=>s(),1500)}catch(V){u.error("âŒ Failed to activate profile",{error:V,message:V==null?void 0:V.message}),se("âŒ Failed to activate profile. Please try again.","error")}finally{O(!1)}}},gs=async()=>{if(t){O(!0);try{await Ye.update(String(t.$id||t.id),{isLive:!0,status:"Available",availability:"Available",isOnline:!0}),se("ðŸŽ‰ Your profile is now LIVE! Please submit payment to keep it active.","success"),window.dispatchEvent(new CustomEvent("refreshTherapistData",{detail:"profile-activated"})),M(!0),setTimeout(()=>{F(!0)},1e3)}catch(V){u.error("âŒ Failed to activate profile",{error:V,message:V==null?void 0:V.message}),se("âŒ Failed to activate profile. Please try again.","error")}finally{O(!1)}}},wa=V=>{var le;const ee=(le=V.target.files)==null?void 0:le[0];if(!ee)return;if(!ee.type.startsWith("image/")){se("âŒ Please upload an image file","error");return}if(ee.size>5*1024*1024){se("âŒ Image must be less than 5MB","error");return}B(ee);const G=new FileReader;G.onload=ke=>{var We;A((We=ke.target)==null?void 0:We.result)},G.readAsDataURL(ee)},Hs=async()=>{if(!U){se("âŒ Please upload payment proof","error");return}if(t){h(!0);try{u.debug("ðŸ“¤ Uploading payment proof");const V=await ti.uploadProfileImage(f);u.debug("âœ… Payment proof uploaded",{paymentProofUrl:V}),u.debug("ðŸ’° Creating payment submission record"),se("âœ… Payment proof submitted successfully! Your profile is now LIVE and can be edited for the next 5 hours. Our team will review your payment within 48 hours and activate your verified badge upon approval.","success"),M(!1),F(!1),s&&setTimeout(()=>s(),1500)}catch(V){u.error("âŒ Payment submission failed",{error:V,message:V==null?void 0:V.message}),se("âŒ Failed to submit payment. Please try again.","error")}finally{h(!1)}}};return t?e.jsxs(e.Fragment,{children:[e.jsx(Rt,{title:"Edit Profil",subtitle:"Unggah foto, informasi pribadi, dan pengaturan profil",onBackToStatus:()=>a==null?void 0:a("therapist-status"),onNavigate:V=>a==null?void 0:a(V),therapist:t,currentPage:"dashboard",language:D,onLogout:w,icon:e.jsx(Ct,{className:"w-6 h-6 text-orange-600"}),children:e.jsxs("div",{className:"bg-white w-full max-w-full",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x",paddingBottom:"max(env(safe-area-inset-bottom, 15px), 20px)",marginBottom:0},children:[C&&!T&&t.isLive&&e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white px-4 sm:px-6 py-4 shadow-lg",children:e.jsxs("div",{className:"max-w-full sm:max-w-sm mx-auto flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl animate-pulse",children:"â°"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-lg",children:"Payment Due Tonight at 12:00 AM"}),e.jsx("p",{className:"text-sm text-red-100",children:"Submit payment proof to keep profile active"})]})]}),e.jsx("button",{onClick:()=>F(!0),className:"px-6 py-3 bg-white text-red-600 rounded-xl font-bold hover:bg-red-50 transition-all shadow-lg",children:"Submit Payment â†’"})]})}),e.jsxs("main",{className:"w-full px-2",style:{paddingBottom:"10px",paddingTop:"0px"},children:[(t==null?void 0:t.$id)&&e.jsx("div",{children:e.jsx(nl,{therapistId:t.$id,membershipTier:"plus"})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-6 pt-6 pb-1",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Therapist Profile"}),e.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"A polished, professional profile helps you stand out and attract more bookings."})]}),Ue&&e.jsx("div",{className:"mx-6 mt-4 bg-slate-50 border border-slate-200 rounded-xl p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center","aria-hidden":!0,children:e.jsx("span",{className:"text-lg",children:"ðŸ›¡ï¸"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Profile locked (72 hours after going live)"}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Name, description, and profile photo are locked. Location remains editable. To update locked fields, contact admin."})]})]})}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:["First Name * ",Ue&&e.jsx("span",{className:"text-amber-600 text-xs",children:"(locked)"})]}),e.jsx("input",{value:X,onChange:V=>_(V.target.value),readOnly:Ue,className:"w-full border rounded-lg px-3 py-2.5 focus:outline-none ".concat(Ue?"border-gray-200 bg-gray-50 text-gray-600 cursor-not-allowed":"border-gray-300 focus:border-orange-500 focus:ring-1 focus:ring-orange-200"),placeholder:"Enter your first name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"WhatsApp Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm pointer-events-none z-10",children:"+62"}),e.jsx("input",{type:"tel",value:J.replace(/^\+62/,""),onChange:V=>{const ee=V.target.value.replace(/\D/g,"");Z("+62"+ee)},className:"w-full border border-gray-300 rounded-lg pl-14 pr-3 py-2.5 focus:border-orange-500 focus:ring-1 focus:ring-orange-200 focus:outline-none",placeholder:"812345678"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:["Foto Profil ",Ue&&e.jsx("span",{className:"text-amber-600 text-xs",children:"(locked â€“ contact admin)"})]}),Ue&&e.jsx("p",{className:"text-xs text-amber-700 mb-2",children:"Profile photo cannot be changed here. Contact admin to update."}),!Ue&&e.jsx("div",{className:"mb-4 bg-red-50 border-2 border-red-500 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-2xl",children:"âš ï¸"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-red-900 mb-1",children:"PENTING: Upload HANYA Foto Asli Anda"}),e.jsxs("p",{className:"text-xs text-red-800",children:["Akun Anda akan ",e.jsx("span",{className:"font-bold underline",children:"SEGERA DINONAKTIFKAN"})," jika Anda mengunggah foto yang BUKAN gambar asli diri Anda (tanpa kartun, logo, selebriti, foto stok, atau orang lain). Klien harus bisa mengidentifikasi Anda."]})]})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative",children:He||t!=null&&t.profilePicture?e.jsx("img",{src:He||(t==null?void 0:t.profilePicture),alt:"Preview",className:"w-20 h-20 rounded-full object-cover border-2 border-gray-200"}):e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 flex items-center justify-center border-2 border-gray-200",children:e.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),e.jsx("div",{className:"flex-1",children:!Ue&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"file",accept:"image/*",onChange:us,className:"hidden",id:"profile-upload"}),e.jsxs("label",{htmlFor:"profile-upload",className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-500 text-white text-sm rounded-lg hover:bg-orange-600 cursor-pointer",children:[e.jsx(Ca,{className:"w-4 h-4"}),N?"Mengunggah...":"Upload Foto"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1.5",children:"Maks 5MB â€¢ Harus foto asli Anda"})]})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:["ðŸ“ Your Location * ",xt&&"(".concat(xt,")")," ",Ue&&e.jsx("span",{className:"text-green-600 text-xs",children:"(still editable)"})]}),e.jsx("div",{className:"mb-3 bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-400 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(Pa,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-bold text-gray-900 mb-1",children:["Current City: ",qe&&Oa(qe)?e.jsx("span",{className:"text-blue-700 uppercase",children:Oa(qe)}):e.jsx("span",{className:"text-gray-400",children:'Not set - Click "Set Location" below'})]}),e.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:'Your location is determined by GPS coordinates only. Use the "Set Location" button below to update.'})]})]})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Lokasi GPS * ",e.jsx("span",{className:"text-red-500 font-bold",children:"(WAJIB UNTUK ONLINE)"})]}),e.jsx("div",{className:"mb-3 bg-red-50 border-2 border-red-500 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-xl",children:"ðŸ“"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-red-900 mb-1",children:"Lokasi GPS WAJIB"}),e.jsx("p",{className:"text-xs text-red-800",children:"Anda tidak dapat online tanpa mengatur koordinat GPS yang tepat. Ini memastikan Anda muncul di kota yang benar untuk pelanggan."})]})]})}),!Be&&!Xe&&e.jsx("div",{className:"mb-3 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 bg-orange-100 text-orange-700 text-xs px-3 py-2 rounded-full animate-bounce",children:[e.jsx("span",{className:"text-base",children:"ðŸ‘†"}),e.jsx("span",{className:"font-medium",children:"Click button below to set your GPS location (required)"})]})}),e.jsx("button",{onClick:ms,disabled:Xe,className:"w-full px-4 py-3 rounded-xl font-medium transition-all shadow-sm flex items-center justify-center gap-2 ".concat(Xe?"bg-gray-400 text-white cursor-not-allowed":Be?"bg-green-500 text-white hover:bg-green-600":"bg-red-500 text-white hover:bg-red-600 animate-pulse"),children:Xe?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Mendapatkan Lokasi..."})]}):Be?"âœ… Lokasi GPS Terverifikasi - Klik untuk Update":"ðŸ“ ATUR LOKASI GPS (WAJIB)"}),ba&&e.jsxs("div",{className:"mt-3 p-3 bg-emerald-100 border-2 border-emerald-500 rounded-xl space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"âœ…"}),e.jsx("p",{className:"text-sm font-bold text-emerald-800",children:"New location has been updated."})]}),e.jsx("p",{className:"text-xs text-emerald-700 pl-8",children:"Your profile is now assigned to the correct city on the main app. Customers will see you when they select this city in the location dropdown and when they search or filter by this location."})]}),Be&&qe&&e.jsxs("div",{className:"mt-3 p-4 bg-green-50 border-2 border-green-200 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸŽ¯"}),e.jsx("p",{className:"text-sm font-bold text-green-800",children:"Lokasi Terverifikasi via GPS"})]}),e.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Koordinat:"})," ",qe.lat.toFixed(5),", ",qe.lng.toFixed(5)]}),(()=>{const V=Oa(qe);return e.jsxs("p",{children:[e.jsx("strong",{children:"Kota dari GPS:"})," ",e.jsx("span",{className:"font-bold text-green-900",children:V})]})})(),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"âš ï¸ Profil Anda akan muncul di kota yang diturunkan dari GPS, terlepas dari pilihan manual di atas."})]})]}),!Be&&e.jsx("div",{className:"mt-2 p-3 bg-orange-50 border border-orange-200 rounded-xl",children:e.jsx("p",{className:"text-sm text-orange-800",children:"âš ï¸ Lokasi GPS belum diatur. Anda tidak dapat online sampai Anda memberikan koordinat yang tepat."})})]}),qe&&(()=>{const V=Oa(qe),ee=gu(V);return ee.length===0?null:e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Service Areas in ",V," *"]}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Select areas where you provide service."})," Customers can filter by these areas to find you."]})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ee.map(G=>{const le=Ut.includes(G.id);return e.jsxs("button",{type:"button",onClick:()=>{Ta(ke=>le?ke.filter(We=>We!==G.id):[...ke,G.id])},className:"\n                            px-4 py-2 rounded-full text-sm font-medium transition-all\n                            ".concat(le?"bg-teal-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200","\n                          "),children:[D==="id"?G.nameId:G.name,G.popular&&e.jsx("span",{className:"ml-1",children:"â­"})]},G.id)})}),Ut.length===0&&e.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"âš ï¸ Select at least one service area to help customers find you"}),Ut.length>0&&e.jsxs("p",{className:"text-xs text-green-600 mt-2",children:["âœ… ",Ut.length," area",Ut.length>1?"s":""," selected"]})]})})(),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(da,{className:"w-5 h-5 text-orange-500"}),"About Your Services ",Ue&&e.jsx("span",{className:"text-amber-600 text-xs",children:"(locked â€“ contact admin)"})]}),e.jsx("div",{className:"border rounded-xl p-4 ".concat(Ue?"border-gray-200 bg-gray-50":"border-gray-200"),children:e.jsx("textarea",{value:$,onChange:V=>q(V.target.value),readOnly:Ue,rows:10,className:"w-full focus:outline-none transition-all resize-none border-0 p-0 ".concat(Ue?"bg-transparent text-gray-600 cursor-not-allowed":"focus:border-orange-500 focus:ring-2 focus:ring-orange-100"),placeholder:"Describe your massage services, experience, and specialties..."})}),e.jsxs("p",{className:"text-xs mt-1 ".concat(Tt($)>350?"text-red-600 font-medium":"text-gray-500"),children:[Tt($)," / 350 words"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(dt,{className:"w-5 h-5 text-orange-500"}),"Years of Experience"]}),e.jsx("input",{type:"number",min:"1",max:"50",value:De,onChange:V=>ht(V.target.value),className:"w-full border border-gray-200 rounded-xl px-4 py-3 focus:border-orange-500 focus:ring-2 focus:ring-orange-100 focus:outline-none transition-all",placeholder:"5"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Ia,{className:"w-5 h-5 text-orange-500"}),"Client Preferences"]}),e.jsx("select",{value:St,onChange:V=>Pt(V.target.value),className:"w-full border border-gray-200 rounded-xl px-4 py-3 focus:border-orange-500 focus:ring-2 focus:ring-orange-100 focus:outline-none transition-all",children:Jl.map(V=>e.jsx("option",{value:V,children:ql[V]},V))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Yl[St]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:["Languages (max 3) - ",te.length,"/3 selected",e.jsx("span",{className:"text-xs text-orange-600 ml-2",children:"Indonesian always included"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:aa.map(V=>{const ee=te.includes(V.code),G=V.code==="id",le=!ee&&te.length>=3&&!G;return e.jsx("button",{onClick:()=>Ja(V.code),disabled:le,className:"px-3 py-1.5 rounded-md text-xs font-medium transition-colors ".concat(G&&ee?"bg-orange-500 text-white cursor-default":ee?"bg-blue-500 text-white hover:bg-blue-600":le?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200"),title:G?"Indonesian is always included as standard language":"".concat(ee?"Remove":"Add"," ").concat(V.label.split(" ")[1]),children:V.label},V.code)})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Indonesian is your primary language. Add up to 2 additional languages to attract more international clients."})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Massage types"}),e.jsxs("span",{className:"text-xs font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[Ie.length,"/5 selected"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Choose up to 5 services you offer. Tap to select or deselect."}),e.jsx("div",{className:"space-y-4",children:Ql.map(({category:V,types:ee})=>e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:V}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ee.map(G=>{const le=Ie.includes(G),ke=Ie.length>=5&&!le;return e.jsx("button",{type:"button",onClick:()=>Ft(G),disabled:ke,className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors border ".concat(le?"bg-orange-500 text-white border-orange-500":ke?"bg-gray-50 text-gray-400 border-gray-200 cursor-not-allowed":"bg-white text-gray-700 border-gray-200 hover:border-orange-300 hover:bg-orange-50"),children:G.replace(/\s+Massage$/i,"")},G)})})]},V))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Traditional Massage â€“ 3 prices (Min 100 = Rp 100,000)"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:'These prices are shown as "Traditional Massage" in your price slider and on your profile when they are your lowest.'}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-2 font-medium",children:"60 minutes"}),e.jsx("input",{type:"text",value:me,onChange:V=>{const ee=V.target.value.replace(/\D/g,"").slice(0,3);Fe(ee)},onBlur:()=>{const V=parseInt(me,10);me&&!isNaN(V)&&V<100&&Fe("100")},className:"w-full border border-gray-200 rounded-xl px-3 py-3 focus:border-orange-500 focus:ring-2 focus:ring-orange-100 focus:outline-none transition-all text-center font-semibold",placeholder:"100",maxLength:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-2 font-medium",children:"90 minutes"}),e.jsx("input",{type:"text",value:ve,onChange:V=>{const ee=V.target.value.replace(/\D/g,"").slice(0,3);re(ee)},onBlur:()=>{const V=parseInt(ve,10);ve&&!isNaN(V)&&V<100&&re("100")},className:"w-full border border-gray-200 rounded-xl px-3 py-3 focus:border-orange-500 focus:ring-2 focus:ring-orange-100 focus:outline-none transition-all text-center font-semibold",placeholder:"150",maxLength:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-2 font-medium",children:"120 minutes"}),e.jsx("input",{type:"text",value:Oe,onChange:V=>{const ee=V.target.value.replace(/\D/g,"").slice(0,3);Le(ee)},onBlur:()=>{const V=parseInt(Oe,10);Oe&&!isNaN(V)&&V<100&&Le("100")},className:"w-full border border-gray-200 rounded-xl px-3 py-3 focus:border-orange-500 focus:ring-2 focus:ring-orange-100 focus:outline-none transition-all text-center font-semibold",placeholder:"200",maxLength:3})]})]})]}),!ot&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-red-700 font-medium mb-2",children:"Complete these required fields:"}),e.jsxs("ul",{className:"text-sm text-red-600 space-y-1",children:[!X.trim()&&e.jsx("li",{children:"â€¢ Full name"}),!/^\+62\d{6,15}$/.test(J.trim())&&e.jsx("li",{children:"â€¢ Valid WhatsApp number"}),!qe&&e.jsx("li",{children:'â€¢ GPS Location (click "Set Location" button)'}),(!qe||!qe.lat||!qe.lng)&&e.jsx("li",{children:"â€¢ GPS Location (click SET GPS LOCATION button)"}),!st&&e.jsx("li",{children:"â€¢ Traditional Massage â€“ 3 prices (60, 90, 120 min, min 100 = Rp 100,000 each)"})]})]}),!t.isLive&&b&&e.jsxs("div",{className:"pt-6 mt-6 border-t border-gray-100",children:[e.jsxs("div",{className:"p-5 rounded-xl mb-4 ".concat(b.plan==="pro"?"bg-gradient-to-br from-orange-50 to-orange-100 border border-orange-200":"bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:b.plan==="pro"?"Pro - Pay As You Go":"Plus - Everything For Success"}),e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((V,ee)=>e.jsx(jt,{className:"w-4 h-4 ".concat(b.plan==="plus"||ee<3?"fill-yellow-400 text-yellow-400":"fill-gray-300 text-gray-300")},ee))})]}),e.jsx("p",{className:"text-sm text-gray-700",children:b.plan==="pro"?"âœ… Click below to activate your profile and start receiving bookings. You'll pay 30% commission per booking.":"ï¿½ Click below to activate your profile! You'll then need to submit payment proof before 12:00 AM tonight to keep it active."})]}),e.jsx("button",{onClick:Et,disabled:!ot||L,className:"w-full px-6 py-4 rounded-xl text-white font-bold text-base transition-all ".concat(!ot||L?"bg-gray-300 cursor-not-allowed":b.plan==="pro"?"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg":"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 shadow-md hover:shadow-lg"),children:ot?"Activate Profile ".concat(b.plan==="pro"?"(Free)":""):"Complete Required Fields First"})]}),e.jsx("div",{className:!t.isLive&&b?"mt-3":"pt-6 mt-6 border-t border-gray-100",children:e.jsx("button",{onClick:V=>{if(!ot){V.preventDefault();const ee=[];X.trim()||ee.push("First Name"),/^\+62\d{6,15}$/.test(J.trim())||ee.push("WhatsApp Number"),(!qe||!qe.lat||!qe.lng)&&ee.push("GPS Location"),st||ee.push("Traditional Massage 3 prices (60/90/120 min)"),se("âš ï¸ Please complete all required fields: ".concat(ee.join(", ")),"error");return}qa()},disabled:L,className:"w-full px-6 py-4 rounded-xl font-bold text-base transition-all ".concat(L?"bg-green-500 text-white cursor-wait shadow-sm":ot?"bg-green-500 text-white hover:bg-green-600 shadow-sm hover:shadow-md":"bg-red-500 text-white hover:bg-red-600 shadow-sm"),children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ki,{className:"w-5 h-5"}),L?"Saving...":"Save Profile"]})})})]})]})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>W(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-sm w-full p-5 border border-gray-100",onClick:V=>V.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center flex-shrink-0",children:e.jsx(ea,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 text-base",children:"Tip for more bookings"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Update your menu item price list so customers see clear options. Complete pricing leads to higher conversion."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{W(!1),R==null||R()},className:"flex-1 py-2.5 rounded-xl bg-orange-500 text-white font-semibold text-sm hover:bg-orange-600 transition-colors",children:"Update menu"}),e.jsx("button",{onClick:()=>W(!1),className:"flex-1 py-2.5 rounded-xl border border-gray-300 text-gray-700 font-medium text-sm hover:bg-gray-50 transition-colors",children:"Maybe later"})]})]})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-sm w-full max-h-[90vh] ",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 px-6 py-5 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-white text-xl font-bold",children:"Submit Payment"}),e.jsx("button",{onClick:()=>F(!1),className:"text-white hover:bg-white hover:bg-opacity-20 rounded-xl p-2 transition-colors",children:e.jsx(wt,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 space-y-4",style:{paddingBottom:"max(env(safe-area-inset-bottom, 24px), 48px)"},children:[e.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((V,ee)=>e.jsx(jt,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},ee))}),e.jsx("h3",{className:"font-bold text-gray-800",children:"Plus Plan - Rp 250,000/month"})]}),e.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[e.jsx("li",{children:"âœ… 0% commission on all bookings"}),e.jsx("li",{children:"âœ… Verified profile badge"}),e.jsx("li",{children:"âœ… Priority placement in search"}),e.jsx("li",{children:"âœ… Advanced booking features"})]})]}),e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-400 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“‹"}),e.jsx("h3",{className:"font-bold text-blue-900 text-lg",children:"Payment & Verification Process"})]}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-900",children:[e.jsxs("p",{children:["âœ… ",e.jsx("strong",{children:"Step 1:"})," Your profile is now LIVE - customers can see you"]}),e.jsxs("p",{children:["âœ… ",e.jsx("strong",{children:"Step 2:"})," Complete payment and upload proof below"]}),e.jsxs("p",{children:["â° ",e.jsx("strong",{children:"Step 3:"})," You have 5 hours to edit your profile after submission"]}),e.jsxs("p",{children:["ðŸ” ",e.jsx("strong",{children:"Step 4:"})," Admin reviews payment within 48 hours"]}),e.jsxs("p",{children:["â­ ",e.jsx("strong",{children:"Step 5:"})," Verified badge activated after approval"]})]})]}),e.jsxs("div",{className:"bg-orange-50 border-2 border-orange-400 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"â°"}),e.jsx("h3",{className:"font-bold text-orange-900 text-base",children:"Submit Payment Proof Today"})]}),e.jsx("p",{className:"text-orange-800 text-sm font-semibold",children:"ðŸ’¡ Upload your payment proof below. After submission, you can edit your profile for 5 hours before it locks for admin review."})]}),e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:[e.jsx("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:"ðŸ¦ Bank Transfer Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Bank:"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Bank Mandiri"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Account Name:"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"PT IndaStreet Indonesia"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Account Number:"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"1370-0123-4567-890"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Amount:"}),e.jsx("span",{className:"font-bold text-purple-600 text-lg",children:"Rp 250,000"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Upload Payment Proof *"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-6 text-center hover:border-purple-300 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:wa,className:"hidden",id:"payment-proof-upload"}),e.jsx("label",{htmlFor:"payment-proof-upload",className:"cursor-pointer",children:f?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:f,alt:"Payment proof",className:"max-h-48 mx-auto rounded-xl"}),e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"âœ“ Image uploaded"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Click to change"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ca,{className:"w-12 h-12 mx-auto text-gray-300"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Click to upload payment proof"}),e.jsx("p",{className:"text-xs text-gray-400",children:"PNG, JPG up to 5MB"})]})})]})]}),e.jsx("button",{onClick:Hs,disabled:!U||c,className:"w-full px-6 py-4 rounded-xl text-white font-bold text-base transition-all ".concat(!U||c?"bg-gray-300 cursor-not-allowed":"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 shadow-md hover:shadow-lg"),children:c?"Submitting...":U?"Submit Payment & Go LIVE!":"Please Upload Payment Proof"}),e.jsx("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-green-800 font-medium text-center",children:"âœ… Your profile is already LIVE! Submit payment proof before midnight to keep it active."})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsx("p",{className:"text-xs text-blue-800 text-center",children:"ðŸ’¡ You can close this modal to edit your profile and come back to submit payment anytime before midnight."})})]})]})})]})}),e.jsx(mu,{title:"Therapist Profile Dashboard",subtitle:"Elite Professional Interface",children:e.jsx(Es,{userId:"therapist",userName:"Therapist",userRole:"therapist"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-600",children:"Loading therapist data..."})})}),e.jsx(Es,{userId:"therapist",userName:"Therapist",userRole:"therapist"})]})},ju=({isOpen:t,onClose:a})=>!t||!(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream)?null:e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-end sm:items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:a}),e.jsxs("div",{className:"relative bg-white rounded-t-3xl sm:rounded-2xl shadow-2xl max-w-md w-full mx-auto animate-slide-up",children:[e.jsxs("div",{className:"relative p-6 pb-4",children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Close",children:e.jsx(wt,{className:"w-5 h-5 text-gray-500"})}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-14 h-14 bg-orange-500 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(ls,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add to Home Screen"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Install IndaStreet App"})]})]})]}),e.jsxs("div",{className:"px-6 pb-6 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-3",children:"ðŸ“± Follow these 3 simple steps:"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm text-gray-900 font-semibold mb-1",children:["Tap the ",e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 bg-blue-100 rounded text-blue-700",children:["Share ",e.jsx(yn,{className:"w-3 h-3 ml-1"})]})," button"]}),e.jsx("p",{className:"text-xs text-gray-600",children:"It's at the bottom of Safari (iPhone) or top (iPad)"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm text-gray-900 font-semibold mb-1",children:["Scroll down and tap"," ",e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 bg-gray-100 rounded text-gray-700",children:["Add to Home Screen ",e.jsx(Si,{className:"w-3 h-3 ml-1"})]})]}),e.jsx("p",{className:"text-xs text-gray-600",children:"Look for the home screen icon in the menu"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm text-gray-900 font-semibold mb-1",children:["Tap ",e.jsx("span",{className:"font-bold text-orange-600",children:"Add"})]}),e.jsx("p",{className:"text-xs text-gray-600",children:"The app will appear on your home screen"})]})]})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs font-semibold text-green-900 mb-2",children:"âœ… Why install the app?"}),e.jsxs("ul",{className:"text-xs text-green-800 space-y-1",children:[e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Instant notifications"})," for new bookings (97% reliable!)"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Faster performance"})," with offline support"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Full-screen experience"})," without browser bars"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Quick access"})," from your home screen"]})]})]}),e.jsx("button",{onClick:a,className:"w-full py-4 bg-gradient-to-r from-orange-600 to-orange-700 text-white font-bold rounded-xl hover:from-orange-700 hover:to-orange-800 transition-all shadow-lg",children:"Got it!"}),e.jsx("p",{className:"text-center text-xs text-gray-500",children:"Once installed, enable notifications in Settings"})]})]})]}),io="indastreet_notification_sound_settings",$n={enabled:!0,volume:.8,vibrationEnabled:!0,lastUpdated:new Date().toISOString()};class Nu{constructor(){Se(this,"settings");this.settings=this.loadSettings()}loadSettings(){try{const a=localStorage.getItem(io);if(a){const s=JSON.parse(a);return{...$n,...s}}}catch{}return{...$n}}saveSettings(){try{this.settings.lastUpdated=new Date().toISOString(),localStorage.setItem(io,JSON.stringify(this.settings)),logger.debug("âœ… Notification sound settings saved:",this.settings)}catch(a){logger.error("Failed to save notification sound settings:",a)}}getSettings(){return{...this.settings}}isSoundEnabled(){return this.settings.enabled}setSoundEnabled(a){this.settings.enabled=a,this.saveSettings(),logger.debug("ðŸ”” Notification sound ".concat(a?"enabled":"disabled"))}getVolume(){return this.settings.volume}setVolume(a){this.settings.volume=Math.max(0,Math.min(1,a)),this.saveSettings(),logger.debug("ðŸ”Š Notification volume set to ".concat(Math.round(this.settings.volume*100),"%"))}isVibrationEnabled(){return this.settings.vibrationEnabled}setVibrationEnabled(a){this.settings.vibrationEnabled=a,this.saveSettings(),logger.debug("ðŸ“³ Vibration ".concat(a?"enabled":"disabled"))}resetToDefaults(){this.settings={...$n},this.saveSettings(),logger.debug("ðŸ”„ Notification sound settings reset to defaults")}toggleSound(){return this.setSoundEnabled(!this.settings.enabled),this.settings.enabled}}const tn=new Nu,ro={booking:"/sounds/booking-notification.mp3",message:"/sounds/message-notification.mp3",status:"/sounds/success-notification.mp3",urgent:"/sounds/alert-notification.mp3"},On="/sounds/booking-notification.mp3";class ku{constructor(){Se(this,"audioElement",null);Se(this,"isInitialized",!1);Se(this,"soundQueue",[]);Se(this,"isPlaying",!1);this.initialize()}initialize(){"serviceWorker"in navigator&&(navigator.serviceWorker.addEventListener("message",this.handleServiceWorkerMessage.bind(this)),this.isInitialized=!0)}handleServiceWorkerMessage(a){const{data:s}=a;if(s.type==="play-notification-sound"){const n=this.determineSoundType(s);this.playNotificationSound(n)}}determineSoundType(a){return a.priority==="critical"||a.priority==="urgent"?"urgent":a.type==="chat"||a.type==="message"?"message":a.type==="status"?"status":"booking"}async playNotificationSound(a="booking"){if(tn.isSoundEnabled())try{const s=ro[a]||On;this.audioElement||(this.audioElement=new Audio),this.audioElement.src=s,this.audioElement.volume=tn.getVolume(),await this.audioElement.play(),tn.isVibrationEnabled()&&"vibrate"in navigator&&navigator.vibrate([200,100,200])}catch{a!=="booking"&&this.playFallbackSound()}}async playFallbackSound(){try{this.audioElement||(this.audioElement=new Audio),this.audioElement.src=On,this.audioElement.volume=tn.getVolume(),await this.audioElement.play()}catch{}}async testSound(a="booking"){await this.playNotificationSound(a)}async preloadSounds(){const a=Object.values(ro).map(s=>new Promise(n=>{const i=new Audio;i.addEventListener("error",()=>n(),{once:!0}),i.src=s,i.addEventListener("canplaythrough",()=>n(),{once:!0}),i.addEventListener("error",()=>n(),{once:!0}),i.load()}));try{await Promise.all(a)}catch{}}async requestIOSAudioPermission(){try{return this.audioElement||(this.audioElement=new Audio),this.audioElement.src=On,this.audioElement.volume=.01,await this.audioElement.play(),this.audioElement.pause(),this.audioElement.currentTime=0,!0}catch{return!1}}}const Ps=new ku;typeof window!="undefined"&&Ps.preloadSounds().catch(console.error);const Su=()=>{var t;return((t=Eo.collections)==null?void 0:t.emergency_alerts)||"emergency_alerts"},Pu=()=>Eo.databaseId||"68f76ee1000e64ca8d05";function Iu(t){if(!t||t.length===0)return!1;const a=Date.now(),s=3600*1e3,n=10800*1e3;for(const i of t){const r=(i.status||"").toLowerCase(),l=i.scheduledTime||i.startTime||i.bookingDate||i.createdAt,d=i.completedAt||(l&&i.duration?new Date(new Date(l).getTime()+i.duration*6e4).toISOString():null);if(l){const g=new Date(l).getTime();if(a>=g-s&&a<=g+(i.duration||60)*6e4)return!0}if(["confirmed","active","in_progress","in-progress","completed"].includes(r)&&l){const g=new Date(l).getTime(),m=(i.duration||60)*60*1e3,x=g+m;if(a>=g&&a<=x)return!0}if(d){const g=new Date(d).getTime();if(a>=g&&a<=g+n)return!0}if(!i.scheduledTime&&i.createdAt&&["confirmed","active","pending"].includes(r)){const g=new Date(i.createdAt).getTime();if(a<=g+n)return!0}}return!1}async function Cu(t){try{const a=Xl(),s=Pu(),n=Su(),i={therapistId:t.therapistId,therapistName:t.therapistName,providerType:t.providerType,lat:t.lat,lng:t.lng,triggeredAt:t.triggeredAt,bookingId:t.bookingId||"",customerName:t.customerName||"",bookingSummary:t.bookingSummary||"",status:"pending"};return{success:!0,alertId:(await a.createDocument(s,n,yt.unique(),i)).$id}}catch(a){return{success:!1,error:(a==null?void 0:a.message)||"Failed to create emergency alert"}}}const Tu=({therapist:t,onBack:a,onRefresh:s,onNavigate:n,onLogout:i,language:r="id"})=>{var x,v;const{isHelpOpen:l,currentHelpKey:d,closeHelp:g}=sl(),{subscriptionActive:m}=Do();try{const j={therapistDashboard:{currentStatus:"Status Saat Ini",available:"Tersedia",busy:"Sibuk",offline:"Offline",active:"Aktif",updateStatus:"Update Status",lastSeen:"Terakhir Terlihat",onlineFor:"Online Selama",totalEarnings:"Total Pendapatan",todayEarnings:"Pendapatan Hari Ini",totalClients:"Total Klien",premium:"Premium",settings:"Pengaturan",downloadApp:"Download Aplikasi",notifications:"Notifikasi",testNotifications:"Test Notifikasi",installApp:"Install Aplikasi",back:"Kembali",thisMonth:"Bulan Ini",autoOfflineTimer:"Timer Auto Offline",autoOfflineTimerDesc:"Set timer untuk offline otomatis",autoOfflineExplanation:"Atur waktu untuk otomatis menjadi offline",setTime:"Set Waktu",saveTimer:"Simpan Timer",cancelTimer:"Batal Timer",discountBadge:"Badge Diskon",discountBadgeDesc:"Tampilkan badge diskon",discountBadgeExplanation:"Badge diskon akan ditampilkan di profil Anda",discountPercentage:"Persentase Diskon",duration:"Durasi",startDiscount:"Mulai Diskon",upgradeToPremium:"Upgrade ke Premium",removeDiscount:"Hapus Diskon",preview:"Preview",appInstallRequired:"Aplikasi Perlu Diinstall",loading:"Memuat..."}},I=!1,p="id";if(!t)return e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] flex items-center justify-center bg-gray-50  ",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:((x=j==null?void 0:j.therapistDashboard)==null?void 0:x.loading)||"Loading therapist data..."}),e.jsx("button",{onClick:a,className:"px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:((v=j==null?void 0:j.therapistDashboard)==null?void 0:v.back)||"Go Back"})]})});const[R,w]=o.useState(()=>{const oe=localStorage.getItem("therapist-status-".concat(t==null?void 0:t.$id));if(oe&&(oe==="available"||oe==="busy"))return oe;const fe=(t==null?void 0:t.status)||(t==null?void 0:t.availability)||"busy",Ve=String(fe).toLowerCase();return Ve==="available"||Ve==="active"?"available":"busy"}),[P,D]=o.useState("22:00"),[L,O]=o.useState(!1),H=!0,[S,N]=o.useState(0),[k,b]=o.useState(12),[y,T]=o.useState(null),[F,U]=o.useState((t==null?void 0:t.busyStartTime)||null),[B,f]=o.useState(null),[A,c]=o.useState(!1),[h,C]=o.useState(0),[M,E]=o.useState(0),[W,X]=o.useState(!1),[_,$]=o.useState(!1),[q,J]=o.useState(null),[Z,me]=o.useState(()=>localStorage.getItem("pwa-installed")==="true"?!0:window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches?(localStorage.setItem("pwa-installed","true"),localStorage.setItem("pwa-install-method","manual-detected"),!0):!1),[Fe,ve]=o.useState(!1),[re,Oe]=o.useState(!1),[Le,De]=o.useState(!1),[ht,St]=o.useState(()=>!(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches)),[Pt,te]=o.useState(!1),[ie,Ie]=o.useState([]),[de,He]=o.useState(0),Qe=o.useRef(null),[xt,ue]=o.useState(!1),[we,_e]=o.useState(!1),Me=o.useRef(null),Ue=Iu(ie),Be=Ue||we;o.useEffect(()=>{if(!(t!=null&&t.$id))return;let oe=!1;return(async()=>{try{const{bookingService:fe}=await z(async()=>{const{bookingService:Re}=await import("./route-therapist.DVVqC6AH.js").then(st=>st.bw);return{bookingService:Re}},__vite__mapDeps([0,1,2,3,4,5,6])),Ve=await fe.getByProvider(t.$id,"therapist");oe||Ie(Array.isArray(Ve)?Ve:[])}catch{oe||Ie([])}})(),()=>{oe=!0}},[t==null?void 0:t.$id]);const mt=()=>{if(!Be||xt)return;const oe=de+1;if(He(oe),Qe.current&&clearTimeout(Qe.current),oe>=3){if(He(0),we){Me.current&&(Me.current.pause(),Me.current.currentTime=0,Me.current=null),_e(!1),ut(r==="en"?"Emergency cleared. Sound stopped.":"Darurat dibatalkan. Suara dihentikan.","success");return}(async()=>{ue(!0);try{const fe=await new Promise((ot,Et)=>{if(!navigator.geolocation)return Et(new Error("Geolocation not supported"));navigator.geolocation.getCurrentPosition(ya=>ot({lat:ya.coords.latitude,lng:ya.coords.longitude}),Et,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),Ve=new Date().toISOString(),Re=ie[0],st=await Cu({therapistId:t.$id,therapistName:t.name||"Therapist",providerType:"therapist",lat:fe.lat,lng:fe.lng,triggeredAt:Ve,bookingId:Re==null?void 0:Re.$id,customerName:(Re==null?void 0:Re.customerName)||(Re==null?void 0:Re.userName),bookingSummary:Re?"".concat(Re.customerName||Re.userName||"Customer"," â€¢ ").concat(Re.duration||60," min"):void 0});st.success?(_e(!0),ut(r==="en"?"Emergency alert sent. Tap 3x again to stop sound.":"Alert darurat terkirim. Ketuk 3x lagi untuk hentikan suara.","success")):At(st.error||(r==="en"?"Failed to send alert":"Gagal mengirim alert"))}catch(fe){At((fe==null?void 0:fe.message)||(r==="en"?"Could not get location or send alert":"Lokasi atau pengiriman alert gagal"))}finally{ue(!1)}})();return}Qe.current=setTimeout(()=>He(0),4e3)};o.useEffect(()=>{if(we)try{const oe=new Audio("/sounds/alert-notification.mp3");return oe.loop=!0,oe.volume=.9,oe.play().catch(()=>{}),Me.current=oe,()=>{oe.pause(),oe.currentTime=0,Me.current=null}}catch{}},[we]),o.useEffect(()=>{if(!(t!=null&&t.$id))return;if(Ke("ðŸ” TherapistOnlineStatus loaded with therapist:",{id:t==null?void 0:t.$id,name:t==null?void 0:t.name,email:t==null?void 0:t.email,currentStatus:t==null?void 0:t.status,currentAvailability:t==null?void 0:t.availability,isLive:t==null?void 0:t.isLive,autoOfflineTime:t==null?void 0:t.autoOfflineTime,fullTherapistObject:t}),t.availableStartTime&&R==="available"){const Re=new Date,st=new Date(t.availableStartTime),ot=(Re.getTime()-st.getTime())/(1e3*60*60),Et=Math.max(0,12-ot);T(t.availableStartTime),b(Et),Ke("â° Initializing countdown timer with",Et.toFixed(2),"hours remaining"),Et<=0&&(Ke("â° Timer expired on page load - auto-changing to busy"),Xe("busy"))}else R!=="available"?(T(null),b(12),Ke("â° Status not available - timer ready to start fresh 12h when available")):t.countdownHoursRemaining!==void 0&&b(t.countdownHoursRemaining);const oe=localStorage.getItem("pwa-installed")==="true",fe=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches;fe&&!oe?(me(!0),localStorage.setItem("pwa-installed","true"),localStorage.setItem("pwa-install-method","manual-standalone"),localStorage.getItem("manual-pwa-install-guided")==="true"&&(setTimeout(()=>{ut("ðŸŽ‰ PWA Detected! Activate enhanced features now?","success",{duration:8e3}),setTimeout(()=>{confirm("ðŸš€ Activate Enhanced Features?\n\nâ€¢ ðŸ”” Instant notifications\nâ€¢ ðŸŽµ Notification sounds\nâ€¢ ðŸ“³ Vibration alerts\nâ€¢ ðŸ’¬ Real-time chat\n\nClick OK to enable now!")&&Ta()},2e3)},1e3),localStorage.removeItem("manual-pwa-install-guided"))):me(oe),Oe(!oe&&!fe),t!=null&&t.discountPercentage&&C(t.discountPercentage),t!=null&&t.discountDuration&&E(t.discountDuration),(t==null?void 0:t.isDiscountActive)!==void 0&&X(t.isDiscountActive),(t==null?void 0:t.onlineHoursThisMonth)!==void 0&&N(t.onlineHoursThisMonth),D((t==null?void 0:t.autoOfflineTime)||"22:00")},[]),o.useEffect(()=>{(async()=>{if(!(!(t!=null&&t.$id)||A)){c(!0);try{Ke("ðŸ”„ Loading fresh status from Appwrite...");const fe=await Ye.getById(t.$id);Ke("ðŸ“Š Fresh data from Appwrite:",{status:fe==null?void 0:fe.status,availability:fe==null?void 0:fe.availability,isLive:fe==null?void 0:fe.isLive,isOnline:fe==null?void 0:fe.isOnline});const Ve=(fe==null?void 0:fe.status)||(fe==null?void 0:fe.availability)||"Busy",Re=String(Ve).toLowerCase();Re==="available"||Re==="active"?(Ke("âœ… Setting status from Appwrite: available"),w("available")):(Ke("âœ… Setting status from Appwrite: busy"),w("busy"))}catch{}finally{c(!1)}}})()},[]),o.useEffect(()=>{const oe=st=>{st.preventDefault(),J(st),window.deferredPrompt=st},fe=()=>{me(!0),Oe(!1),localStorage.setItem("pwa-installed","true"),localStorage.setItem("pwa-install-completed","true"),J(null)},Ve=()=>{Ja()},Re=()=>{const st={canInstall:!1,isInstalled:!1};me(st.isInstalled),Oe(!st.isInstalled);const ot=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;ve(ot)};return window.addEventListener("beforeinstallprompt",oe),window.addEventListener("appinstalled",fe),window.addEventListener("request-pwa-install",Ve),Re(),()=>{window.removeEventListener("beforeinstallprompt",oe),window.removeEventListener("appinstalled",fe),window.removeEventListener("request-pwa-install",Ve)}},[]);const Xe=async oe=>{if(!(L||A)){localStorage.setItem("therapist-status-".concat(t.$id),oe),O(!0);try{Ke("ðŸ’¾ Saving status to Appwrite:",{newStatus:oe,therapistId:t.$id,therapistEmail:t.email,therapistName:t.name}),w(oe);const fe=oe==="available"||oe==="active"?Xn.Available:Xn.Busy,Ve=new Date().toISOString();Ke("âœ… Status changed to ".concat(oe.toUpperCase()," - Available or Busy only"));const Re={status:fe,availability:fe,isLive:!0,isOnline:oe==="available"||oe==="active",busyUntil:oe==="available"?null:void 0,bookedUntil:oe==="available"?null:void 0,busy:oe==="available"?"":oe==="busy"?Ve:"",available:oe==="available"?Ve:""};Ke("ðŸ“¤ Update data:",Re);const st=await Ye.update(t.$id,Re);Ke("âœ… Appwrite update result:",st);const ot=await Ye.getById(t.$id);Ke("ðŸ”„ Verified saved status from Appwrite:",{status:ot.status,availability:ot.availability,isLive:ot.isLive}),Ke("ðŸ”„ Triggering global data refresh after status update..."),window.dispatchEvent(new CustomEvent("refreshTherapistData",{detail:{source:"therapist-dashboard-status-update",therapistId:t.$id,newStatus:fe,timestamp:new Date().toISOString()}}));const Et={available:p==="id"?"âœ… Anda sekarang TERSEDIA untuk booking":"âœ… You are now AVAILABLE for bookings",active:p==="id"?"âœ… Anda sekarang AKTIF dan siap untuk booking":"âœ… You are now ACTIVE and ready for bookings",busy:p==="id"?"ðŸŸ¡ Status diset ke SIBUK - pelanggan masih bisa melihat profil Anda":"ðŸŸ¡ Status set to BUSY - customers can still view your profile",offline:p==="id"?"âš« Anda sekarang OFFLINE - profil tersembunyi dari pencarian":"âš« You are now OFFLINE - profile hidden from search"};Ke("âœ… Status saved:",Et[oe]),ut(Et[oe],"success")}catch(fe){try{const Ve=await Ye.getById(t.$id),Re=String((Ve==null?void 0:Ve.status)||"Busy").toLowerCase(),st=Re==="available"||Re==="busy"?Re:"busy";w(st),Ke("ðŸ”„ Status reverted to database value:",st)}catch{w(R==="available"?"busy":"available")}At(p==="id"?"âŒ Gagal memperbarui status. Silakan coba lagi.":"âŒ Failed to update status. Please try again."),At("Failed to update status: ".concat((fe==null?void 0:fe.message)||"Unknown error"))}finally{O(!1)}}},rt=async oe=>{D(oe);try{Ke("ðŸ’¾ Saving auto-offline time to Appwrite:",oe);const fe=await Ye.update(t.$id,{autoOfflineTime:oe});Ke("âœ… Auto-offline time saved:",fe.autoOfflineTime),ut("â° Auto-offline timer set for "+oe,"success")}catch{At("Failed to save auto-offline time. Please try again.")}},ba=async()=>{try{Ke("ðŸ—‘ï¸ Cancelling auto-offline timer..."),await Ye.update(t.$id,{autoOfflineTime:null}),D(""),Ke("âœ… Auto-offline timer cancelled"),ut("âœ… Auto-offline timer cancelled","success")}catch{At("Failed to cancel timer. Please try again.")}},ua=async()=>{try{Ke("ðŸ’¾ Saving discount badge settings...");const oe=M>0?new Date(Date.now()+M*60*60*1e3).toISOString():null;await Ye.update(t.$id,{discountPercentage:h,discountDuration:M,discountEndTime:oe,isDiscountActive:!0}),X(!0),Ke("âœ… Discount badge activated"),ut("âœ… ".concat(h,"% discount badge activated for ").concat(M," hours!"),"success")}catch{At("Failed to save discount. Please try again.")}},qe=async()=>{try{Ke("ðŸ—‘ï¸ Cancelling discount badge..."),await Ye.update(t.$id,{discountPercentage:0,discountDuration:0,discountEndTime:null,isDiscountActive:!1}),C(0),E(0),X(!1),Ke("âœ… Discount badge cancelled"),ut("âœ… Discount badge removed","success")}catch{At("Failed to cancel discount. Please try again.")}},ta=async()=>{try{"granted"&&ut("ðŸš€ ULTIMATE NOTIFICATION TEST STARTED!\n\nâœ… Testing:\n  â€¢ Maximum vibration (7 seconds)\n  â€¢ Wake lock (screen stays on)\n  â€¢ Badge counter update\n  â€¢ 3 escalating notifications over 2 minutes\n\nðŸ”Š You should feel STRONG vibrations NOW!\nðŸ‘€ Watch for notifications to appear.\n\nIf phone is in standby/locked:\n  â€¢ Notification WILL show on lock screen\n  â€¢ Phone WILL vibrate strongly\n  â€¢ System default sound will play","success",{duration:8e3})}catch{At("âŒ Failed to test notifications. Please ensure the app is properly installed.")}},Ut=async()=>{try{if(Z){ut("âœ… App is already installed!","success",{duration:3e3});return}ut("ðŸ“± Preparing app installation...","info",{duration:2e3});try{await Ps.playNotificationSound("booking"),"vibrate"in navigator&&navigator.vibrate([100,50,100])}catch{}if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){te(!0),ut("ðŸ“± Follow the instructions below to add the app to your home screen","info",{duration:5e3});return}if(q)if(ut("ðŸ“± Installing app with enhanced features...","info",{duration:2e3}),await q.prompt(),(await q.userChoice).outcome==="accepted"){await Ta(),me(!0),localStorage.setItem("pwa-installed","true"),localStorage.setItem("pwa-install-completed","true"),localStorage.setItem("pwa-enhanced-features","true"),J(null),ut("âœ… App installed successfully! Enhanced features activated:","success",{duration:8e3});return}else{ut("Installation cancelled. You can install anytime!","info",{duration:3e3});return}const{PWAInstallationStatusChecker:fe}=await z(async()=>{const{PWAInstallationStatusChecker:Re}=await import("./pwaInstallationStatus.6Ba8jDFX.js");return{PWAInstallationStatusChecker:Re}},__vite__mapDeps([54,2])),Ve=await fe.triggerInstallation();Ve.success&&Ve.result==="manual-instructions-shown"?setTimeout(()=>{localStorage.setItem("manual-pwa-install-guided","true"),ut("ðŸ’¡ After installing, open the app from your home screen for notifications!","info",{duration:5e3})},500):!Ve.success&&Ve.error&&ut(Ve.error,"info",{duration:8e3})}catch{ut("âŒ Failed to install app. Please try again or use Chrome/Safari.","error",{duration:4e3})}},Ta=async()=>{try{if("Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission()==="granted"){try{await Ps.playNotificationSound("booking"),"vibrate"in navigator&&navigator.vibrate([200,100,200,100,200])}catch{}setTimeout(()=>{new Notification("IndaStreet Therapist ðŸï¸",{body:"ðŸŽ‰ App installed! Enhanced features:\nâ€¢ ðŸ”” Instant booking alerts\nâ€¢ ðŸŽµ Notification sounds\nâ€¢ ðŸ’¬ Live chat notifications\nâ€¢ ðŸ“³ Vibration alerts",icon:"/pwa-icon-192.png",badge:"/pwa-badge-72.png",tag:"install-success",requireInteraction:!0,vibrate:[300,100,300]})},1e3)}if("serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype)try{const oe=await navigator.serviceWorker.ready;"sync"in oe&&oe.sync&&await oe.sync.register("background-sync")}catch{}if(typeof Ps.initialize=="function")try{Ps.initialize()}catch{}localStorage.setItem("therapist-dashboard-enhanced","true"),localStorage.setItem("notification-music-enabled","true"),localStorage.setItem("chat-notifications-enabled","true"),localStorage.setItem("vibration-enabled","true"),localStorage.setItem("floating-chat-activated","true")}catch{}},aa=()=>{localStorage.removeItem("pwa-installed"),localStorage.removeItem("pwa-install-completed"),me(!1),ut("ðŸ”„ PWA installation state reset. You can now test the download button again.","info",{duration:4e3})},Ja=async()=>{if(Le&&(localStorage.removeItem("pwa-installed"),localStorage.removeItem("pwa-install-completed"),localStorage.removeItem("pwa-added-to-homescreen")),Z&&!Le){Zl("ðŸ“± APP ALREADY DETECTED\n\nIf you're having notification issues:\nâ€¢ Click OK to FORCE REINSTALL\nâ€¢ This ensures you have the latest notification sounds\nâ€¢ Cancel if notifications are working fine",()=>{De(!0),me(!1),localStorage.removeItem("pwa-installed"),localStorage.removeItem("pwa-install-completed"),ut("âš™ï¸ Now tap the DOWNLOAD button again to reinstall with enhanced notifications!","info")},()=>{});return}const oe=q||window.deferredPrompt;if(oe){Ko(async()=>{try{await oe.prompt(),(await oe.userChoice).outcome==="accepted"&&(me(!0),localStorage.setItem("pwa-installed","true"),localStorage.setItem("pwa-install-completed","true"),setTimeout(async()=>{"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission()==="granted"&&new Notification("IndaStreet Therapist",{body:"ðŸŽ‰ App installed successfully! Notifications are now enabled.",icon:"/pwa-icon-192.png",tag:"install-success"})},1e3))}catch{}});return}window.dispatchEvent(new Event("beforeinstallprompt")),setTimeout(async()=>{const fe=window.deferredPrompt;if(fe)try{await fe.prompt(),(await fe.userChoice).outcome==="accepted"&&(me(!0),localStorage.setItem("pwa-installed","true"),localStorage.setItem("pwa-install-completed","true"));return}catch{}Fe?ut('ðŸ“± TO INSTALL ON iPhone/iPad:\n\n1. Tap the Share button (â¬†ï¸) at the bottom of Safari\n2. Scroll down and tap "Add to Home Screen"\n3. Tap "Add" to confirm\n\nâœ… The app will appear on your home screen with full notification support!',"info",{duration:1e4}):ut('ðŸ“± TO INSTALL THE APP:\n\nðŸ”¹ Chrome/Edge:\n   â€¢ Look for install icon (â¬‡ï¸) in address bar\n   â€¢ OR: Menu (â‹®) â†’ "Install app"\n\nðŸ”¹ Firefox:\n   â€¢ Menu (â‹®) â†’ "Install"\n\nðŸ”¹ Other browsers:\n   â€¢ Add to home screen from browser menu\n\nâœ… Once installed, you\'ll get enhanced notifications!',"info",{duration:1e4})},500)},ms=oe=>{switch(oe){case"available":return"bg-green-500";case"busy":return"bg-yellow-500";case"offline":return"bg-gray-500"}},us=oe=>{switch(oe){case"available":return e.jsx($e,{className:"w-8 h-8"});case"busy":return e.jsx(ze,{className:"w-8 h-8"});case"offline":return e.jsx(Ot,{className:"w-8 h-8"})}},Tt=(t==null?void 0:t.accountStatus)==="frozen"||(t==null?void 0:t.accountStatus)==="suspended"?"poor":t!=null&&t.pendingCommissionPayments&&t.pendingCommissionPayments!=="0"?"fair":"good",qa=oe=>{n&&n(Wc(oe))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:[e.jsx(ds,{title:j.therapistDashboard.currentStatus,subtitle:j.therapistDashboard.updateStatus,onBackToStatus:a,icon:e.jsx(ze,{className:"w-6 h-6 text-orange-600"}),actions:e.jsx("button",{onClick:()=>$(!_),className:"p-2 rounded-lg transition-colors ".concat(_?"bg-orange-100 text-orange-600":"hover:bg-orange-50"),"aria-label":_?"Close menu":"Open menu","aria-expanded":_,children:e.jsx($o,{className:"w-5 h-5 text-orange-600"})})}),e.jsxs("div",{className:"bg-white max-w-sm mx-auto px-4 pt-0 pb-3 space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:j.therapistDashboard.currentStatus}),e.jsx(Nt,{...zc.availabilityToggle,position:"right",size:"md"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:()=>Xe("available"),disabled:L||R==="available",className:"p-4 rounded-xl border-2 transition-all ".concat(R==="available"?"bg-green-600 border-green-600 shadow-lg text-white":"bg-white border-gray-300 hover:border-green-500 hover:shadow-md"," disabled:opacity-50 disabled:cursor-not-allowed"),children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx($e,{className:"w-8 h-8 ".concat(R==="available"?"text-white":"text-green-600")}),e.jsx("div",{className:"text-center",children:e.jsx("h3",{className:"text-sm font-bold ".concat(R==="available"?"text-white":"text-gray-800"),children:j.therapistDashboard.available})})]})}),e.jsxs("button",{onClick:()=>Xe("busy"),disabled:L||R==="busy",className:"p-4 rounded-xl border-2 transition-all relative ".concat(R==="busy"?"bg-yellow-500 border-yellow-500 shadow-lg":"bg-white border-gray-300 hover:border-yellow-400 hover:shadow-md"," disabled:opacity-50 disabled:cursor-not-allowed"),children:[!H&&R==="busy"&&B!==null&&e.jsxs("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full font-bold",children:[Math.floor(B),"h"]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(ze,{className:"w-8 h-8 ".concat(R==="busy"?"text-yellow-900":"text-yellow-600")}),e.jsx("div",{className:"text-center",children:e.jsx("h3",{className:"text-sm font-bold ".concat(R==="busy"?"text-yellow-900":"text-gray-800"),children:j.therapistDashboard.busy})})]})]})]}),e.jsxs("div",{className:"mt-4 rounded-xl border-2 border-red-200 bg-red-50 p-4",children:[e.jsxs("button",{type:"button",onClick:mt,disabled:!Be||xt,className:"w-full py-4 rounded-xl border-2 font-bold text-lg flex flex-col items-center justify-center gap-2 transition-all ".concat(we?"bg-red-600 border-red-700 text-white animate-pulse shadow-lg shadow-red-400/50":Be&&!xt?"bg-red-600 border-red-700 text-white hover:bg-red-700 active:scale-[0.98]":"bg-gray-200 border-gray-300 text-gray-500 cursor-not-allowed"),children:[e.jsx(ns,{className:"w-10 h-10"}),e.jsx("span",{children:xt?r==="en"?"Sendingâ€¦":"Mengirimâ€¦":we?r==="en"?"ACTIVE EMERGENCY â€” Tap 3x to stop sound":"DARURAT AKTIF â€” Ketuk 3x hentikan suara":Ue?r==="en"?"EMERGENCY â€” Tap 3 times":"DARURAT â€” Ketuk 3 kali":r==="en"?"Emergency (active during bookings)":"Darurat (aktif saat ada booking)"}),Be&&de>0&&!we&&e.jsxs("span",{className:"text-sm opacity-90",children:[de,"/3"]}),we&&e.jsxs("span",{className:"text-sm opacity-90",children:[r==="en"?"Music playing":"Musik menyala"," â€” 3x to stop"]})]}),e.jsx("p",{className:"text-xs text-center text-gray-600 mt-2",children:we?r==="en"?"Tap the button 3 times within 4 seconds to stop the sound and clear active emergency.":"Ketuk tombol 3 kali dalam 4 detik untuk hentikan suara dan batalkan darurat aktif.":r==="en"?"Active 1h before, during, and 3h after each booking. Admin is notified. After sending, music plays until you tap 3x again.":"Aktif 1 jam sebelum, selama, dan 3 jam setelah setiap booking. Admin diberitahu. Setelah kirim, musik menyala sampai Anda ketuk 3x lagi."}),e.jsx("div",{className:"mt-3 pt-3 border-t border-red-200",children:e.jsx("p",{className:"text-[11px] text-center text-gray-700 leading-relaxed",children:r==="en"?e.jsxs(e.Fragment,{children:["To activate: tap the emergency button ",e.jsx("strong",{children:"3 times within 4 seconds"}),". IndaStreet is notified ",e.jsx("strong",{children:"immediately"})," with your location and GPS coordinates. Police may be contacted and/or IndaStreet representatives are on the way. Tap 3 times again to stop the alert sound and clear."]}):e.jsxs(e.Fragment,{children:["Untuk mengaktifkan: ketuk tombol darurat ",e.jsx("strong",{children:"3 kali dalam 4 detik"}),". IndaStreet diberitahu ",e.jsx("strong",{children:"segera"})," dengan lokasi dan koordinat GPS Anda. Polisi dapat dihubungi dan/atau perwakilan IndaStreet sedang dalam perjalanan. Ketuk 3 kali lagi untuk hentikan suara dan batalkan."]})})})]})]}),(()=>{const oe=Z?"App downloaded":"Install app on mobile device",fe=Z?"bg-green-500":"bg-red-500",Ve=Z?"bg-green-50 border-green-200":"bg-red-50 border-red-200",Re=Z?"text-green-800":"text-red-800";return e.jsxs("div",{className:"rounded-xl p-6 border-2 bg-white border-orange-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border mb-4 ".concat(Ve),children:[e.jsx("span",{className:"w-3 h-3 rounded-full flex-shrink-0 ".concat(fe," ").concat(Z?"animate-pulse":"")}),e.jsx("span",{className:"text-sm font-semibold ".concat(Re),children:oe})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border mb-4 ".concat(m?"bg-green-50 border-green-200":"bg-amber-50 border-amber-200"),children:[e.jsxs("span",{className:"relative flex h-3 w-3 flex-shrink-0 ".concat(m?"text-green-500":"text-amber-500"),"aria-label":m?"Booking system active":"Booking system reconnecting",children:[e.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full opacity-75 ".concat(m?"bg-green-500 animate-ping":"bg-amber-500 animate-pulse")}),e.jsx("span",{className:"relative inline-flex h-3 w-3 rounded-full ".concat(m?"bg-green-500":"bg-amber-500")})]}),e.jsxs("span",{className:"text-sm font-semibold ".concat(m?"text-green-800":"text-amber-800"),children:["ðŸ’¬ ",m?r==="en"?"Booking system active":"Sistem booking aktif":r==="en"?"Reconnectingâ€¦":"Menghubungkanâ€¦"]})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center shadow-md flex-shrink-0 ".concat(Z?"bg-gradient-to-br from-green-500 to-green-600":"bg-gradient-to-br from-orange-500 to-orange-600"),children:Z?e.jsx(za,{className:"w-6 h-6 text-white"}):e.jsx(Ds,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold ".concat(Z?"text-green-800":"text-orange-800"),children:Z?"Aplikasi Terunduh":"Install App on Mobile Device"}),e.jsx("p",{className:"text-sm font-medium ".concat(Z?"text-green-700":"text-orange-700"),children:Z?"App ready â€“ notifications, sound & vibration enabled":"Download for Android/iOS â€“ notifications, sound, chat"})]})]}),e.jsx("button",{onClick:Ut,disabled:Z,className:"w-full rounded-xl py-4 px-6 flex items-center justify-center gap-3 font-bold text-lg shadow-lg transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] ".concat(Z?"bg-gradient-to-r from-green-500 to-green-600 text-white cursor-not-allowed opacity-80":"bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:shadow-xl hover:from-orange-600 hover:to-orange-700"),children:Z?e.jsxs(e.Fragment,{children:[e.jsx(za,{className:"w-6 h-6"}),e.jsx("span",{children:"App downloaded"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ds,{className:"w-6 h-6"}),e.jsx("span",{children:"Download App"})]})}),!Z&&e.jsx("div",{className:"mt-3 p-3 bg-orange-50 rounded-lg border border-orange-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1 text-orange-700",children:[e.jsx("span",{children:"ðŸ””"}),e.jsx("span",{className:"font-medium",children:"Notifikasi Instan"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-orange-700",children:[e.jsx("span",{children:"ðŸŽµ"}),e.jsx("span",{className:"font-medium",children:"Suara Notifikasi"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-orange-700",children:[e.jsx("span",{children:"ðŸ“³"}),e.jsx("span",{className:"font-medium",children:"Getaran Alert"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-orange-700",children:[e.jsx("span",{children:"ðŸ’¬"}),e.jsx("span",{className:"font-medium",children:"Chat Real-time"})]})]})}),Z&&e.jsx("button",{onClick:aa,className:"mt-3 w-full py-2 text-xs text-orange-600 hover:text-orange-800 border border-orange-300 rounded-lg hover:bg-orange-50 transition-all",title:"Reset download state for testing",children:"ðŸ”„ Reset Download State (Dev)"})]})})()]})]}),_&&e.jsxs("div",{className:"fixed inset-0 z-[120] flex flex-row-reverse",children:[e.jsx("button",{type:"button","aria-label":"Close menu",className:"absolute inset-0 bg-black/50 z-[121]",onClick:()=>$(!1)}),e.jsx("div",{className:"relative z-[122] w-full max-w-sm h-full overflow-y-auto bg-white shadow-2xl elite-slide-in-right",children:e.jsx(Gc,{currentPage:"status",onNavigate:oe=>{qa(oe),$(!1)},onClose:()=>$(!1),language:p,therapistData:{...t,pendingBookings:2}})})]}),e.jsx(ju,{isOpen:Pt,onClose:()=>te(!1)}),e.jsx(al,{isOpen:l,onClose:g,helpKey:d,content:Vo[d],language:"id"}),e.jsx(nl,{therapistId:(t==null?void 0:t.$id)||(t==null?void 0:t.id),membershipTier:"plus"}),e.jsx(Es,{userId:(t==null?void 0:t.id)||(t==null?void 0:t.id)||"therapist",userName:(t==null?void 0:t.name)||"Therapist",userRole:"therapist"})]})}catch{return e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] flex items-center justify-center bg-gray-50  ",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:e.jsxs("div",{className:"text-center p-6 max-w-md mx-auto",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"âš ï¸"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Dashboard Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load therapist dashboard. Please try refreshing the page."}),e.jsx("button",{onClick:async()=>{try{const{softRecover:I}=await z(async()=>{const{softRecover:p}=await import("./softNavigation.CPJRQeFv.js");return{softRecover:p}},[]);I()}catch{window.location.reload()}},className:"bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600",children:"Refresh Page"}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:a,className:"text-orange-500 hover:text-orange-600 underline",children:"Go Back"})})]})})}},Au=({therapist:t,onBack:a,onNavigate:s,onLogout:n,language:i="id"})=>{const r=i||"id",[l,d]=o.useState("terms"),[g,m]=o.useState(new Set(["intro"])),x=R=>{m(w=>{const P=new Set(w);return P.has(R)?P.delete(R):P.add(R),P})},v=[{id:"intro",title:"SYARAT & KETENTUAN INDASTREET",content:'Terakhir Diperbarui: 28 Januari 2026\n\nSyarat & Ketentuan ini ("Syarat") mengatur akses dan penggunaan platform IndaStreet ("IndaStreet", "Platform", "kami", "kita").\n\nDengan membuat akun atau menggunakan Platform, Anda mengkonfirmasi bahwa Anda telah membaca, memahami, dan setuju untuk terikat secara hukum dengan Syarat ini.'},{id:"platform-role",title:"1. PERAN & TUJUAN PLATFORM",content:"1.1 Layanan Platform\n\nIndaStreet beroperasi secara eksklusif sebagai marketplace digital dan platform fasilitasi lalu lintas.\n\nIndaStreet:\nâ€¢ Menghubungkan terapis pijat independen dan tempat pijat dengan pelanggan\nâ€¢ Menyediakan alat listing, booking, komunikasi, dan fasilitasi pembayaran\n\nIndaStreet TIDAK:\nâ€¢ Menyediakan layanan pijat atau wellness\nâ€¢ Mempekerjakan terapis pijat\nâ€¢ Mengontrol bagaimana layanan diberikan\n\n1.2 Tidak Ada Hubungan Kerja\n\nTidak ada dalam Syarat ini yang menciptakan hubungan kerja antara IndaStreet dan Penyedia Layanan."},{id:"independent-contractor",title:"2. STATUS KONTRAKTOR INDEPENDEN",content:"2.1 Wiraswasta\n\nSemua Penyedia Layanan beroperasi sebagai kontraktor independen yang bekerja sendiri.\n\nAnda:\nâ€¢ Mengontrol kapan, dimana, dan apakah Anda bekerja\nâ€¢ Memutuskan booking mana yang diterima atau ditolak\nâ€¢ Menentukan metode dan standar layanan Anda sendiri\n\n2.2 Pajak & Kewajiban Hukum\n\nAnda bertanggung jawab penuh atas:\nâ€¢ Pelaporan dan pembayaran semua pajak penghasilan\nâ€¢ PPN atau pajak konsumsi serupa (jika berlaku)\nâ€¢ Persyaratan registrasi bisnis"},{id:"account-eligibility",title:"3. KELAYAKAN & PENGGUNAAN AKUN",content:"3.1 Kelayakan\n\nUntuk menggunakan IndaStreet, Anda harus:\nâ€¢ Berusia minimal 18 tahun\nâ€¢ Memiliki kapasitas hukum untuk menyediakan layanan pijat\nâ€¢ Memiliki lisensi yang diperlukan oleh hukum\n\n3.2 Akurasi Akun\n\nAnda setuju untuk:\nâ€¢ Memberikan informasi yang akurat dan benar\nâ€¢ Memelihara detail kontak yang terkini\nâ€¢ Menggunakan gambar profil yang profesional"}],j=[{id:"data-collection",title:"PENGUMPULAN DATA PRIBADI",content:"Kami mengumpulkan data yang diperlukan untuk operasi platform:\n\nâ€¢ Informasi profil dan kontak\nâ€¢ Detail layanan dan ketersediaan\nâ€¢ Riwayat transaksi dan pembayaran\nâ€¢ Data lokasi untuk matching\n\nData dikumpulkan hanya dengan persetujuan Anda dan sesuai hukum yang berlaku."}],I=(R="Terms")=>{const w=encodeURIComponent("Hi i would like to know little more regarding ".concat(R)),P="https://wa.me/6281392000050?text=".concat(w);window.open(P,"_blank")},p=l==="terms"?v:j;return e.jsx(Rt,{title:r==="id"?"Syarat & Ketentuan":"Terms & Conditions",subtitle:r==="id"?"Syarat, Kebijakan Privasi, dan Dukungan":"Terms, Privacy Policy, and Support",onBackToStatus:a,onNavigate:s,therapist:t,currentPage:"legal",language:r,onLogout:n,icon:e.jsx(da,{className:"w-6 h-6 text-orange-600"}),children:e.jsx("div",{className:"bg-white",children:e.jsxs("div",{className:"max-w-sm mx-auto px-4 pt-0 pb-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-2 flex gap-2",children:[e.jsxs("button",{onClick:()=>d("terms"),className:"flex-1 px-4 py-3 rounded-lg font-semibold text-sm transition-all ".concat(l==="terms"?"bg-orange-500 text-white shadow-md":"text-gray-600 hover:bg-gray-50"),children:[e.jsx(da,{className:"w-4 h-4 mx-auto mb-1"}),"Syarat & Ketentuan"]}),e.jsxs("button",{onClick:()=>d("privacy"),className:"flex-1 px-4 py-3 rounded-lg font-semibold text-sm transition-all ".concat(l==="privacy"?"bg-orange-500 text-white shadow-md":"text-gray-600 hover:bg-gray-50"),children:[e.jsx(zt,{className:"w-4 h-4 mx-auto mb-1"}),"Kebijakan Privasi"]})]})}),e.jsx("div",{className:"space-y-3",children:p.map(R=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm",children:[e.jsxs("button",{onClick:()=>x(R.id),className:"w-full px-4 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[e.jsx("h2",{className:"text-sm font-bold text-gray-900 text-left",children:R.title}),g.has(R.id)?e.jsx(Ro,{className:"w-5 h-5 text-orange-500 flex-shrink-0"}):e.jsx(Mt,{className:"w-5 h-5 text-gray-400 flex-shrink-0"})]}),g.has(R.id)&&e.jsx("div",{className:"px-4 pb-4 border-t border-gray-100",children:e.jsx("div",{className:"pt-3 space-y-2",children:R.content.split("\n").map((w,P)=>w.trim()&&e.jsx("p",{className:"text-xs text-gray-600 leading-relaxed whitespace-pre-line",children:w},P))})})]},R.id))}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:I,className:"w-full bg-white border-2 border-orange-500 text-orange-600 rounded-xl py-3 font-bold hover:bg-orange-50 transition-colors flex items-center justify-center gap-2",children:[e.jsx(da,{className:"w-5 h-5"}),"Hubungi Support via WhatsApp"]})})]})})})},Eu=({therapist:t,onBack:a,onNavigate:s,language:n="id"})=>{const i=()=>{s==null||s("therapist-status")};return e.jsx(Rt,{title:"How It Works",subtitle:"Learn about bookings, payments, and notifications",onBackToStatus:i,onNavigate:s,therapist:t,currentPage:"therapist-how-it-works",icon:e.jsx(Ls,{className:"w-6 h-6 text-orange-600"}),language:n,children:e.jsx("main",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(Ls,{className:"w-8 h-8 text-orange-600"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 text-center mb-2",children:"Cara Kerja"}),e.jsx("p",{className:"text-lg text-gray-600 text-center mb-8",children:"Panduan Dashboard Terapis"}),e.jsxs("div",{className:"prose prose-gray max-w-none",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-lg p-6 mb-8 border border-orange-200",children:e.jsx("p",{className:"text-gray-800 leading-relaxed mb-0",children:"Selamat datang di IndaStreetmassage â€” kami senang Anda bergabung sebagai profesional terverifikasi di platform kami. Halaman ini menjelaskan secara detail apa yang terjadi ketika pengguna memesan layanan Anda, cara kerja pembayaran, dan bagaimana notifikasi ditangani, sehingga tidak ada kejutan."})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm mr-3",children:"1"}),"Jenis Pemesanan di IndaStreetmassage"]}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Ada dua cara pengguna dapat memesan Anda:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-300 rounded-lg p-5",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"text-2xl mr-2",children:"âš¡"}),e.jsx("p",{className:"font-bold text-blue-900 text-lg",children:"Pesan Sekarang"})]}),e.jsx("p",{className:"text-blue-800 text-sm",children:"Pemesanan instan untuk pijat segera"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-300 rounded-lg p-5",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"text-2xl mr-2",children:"ðŸ“…"}),e.jsx("p",{className:"font-bold text-purple-900 text-lg",children:"Booking Terjadwal"})]}),e.jsx("p",{className:"text-purple-800 text-sm",children:"Pemesanan di masa depan dengan uang muka 30%"})]})]}),e.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4",children:[e.jsx("p",{className:"text-yellow-900 font-semibold",children:"âš ï¸ Perbedaan Penting:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-yellow-800 text-sm",children:[e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Pesan Sekarang:"})," Timer 5 menit, tidak ada uang muka"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Booking Terjadwal:"})," Konfirmasi instan, uang muka 30% (tidak dapat dikembalikan)"]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm mr-3",children:"2"}),"Pesan Sekarang (Pemesanan Instan)"]}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Pesan Sekarang untuk pengguna yang menginginkan pijat segera."}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Cara kerja:"}),e.jsxs("ol",{className:"space-y-3 mb-4",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"font-semibold text-orange-600 mr-2",children:"1."}),e.jsxs("span",{className:"text-gray-700",children:["Pengguna mengklik ",e.jsx("strong",{children:"Pesan Sekarang"})," di profil Anda"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"font-semibold text-orange-600 mr-2",children:"2."}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-700 block mb-2",children:"Anda menerima:"}),e.jsxs("ul",{className:"ml-4 space-y-1",children:[e.jsx("li",{className:"text-gray-600",children:"â€¢ Notifikasi instan"}),e.jsxs("li",{className:"text-gray-600",children:["â€¢ ",e.jsx("strong",{children:"Timer hitung mundur 5 menit"})," (WAJIB: Terima atau Tolak sebelum waktu habis)"]}),e.jsxs("li",{className:"text-gray-600",children:["â€¢ ",e.jsx("strong",{children:"ðŸ”Š Peringatan suara MP3"})," diputar otomatis agar tidak terlewat"]})]})]})]})]}),e.jsxs("div",{className:"bg-orange-50 border-2 border-orange-300 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"font-bold text-orange-900 mb-2 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"â°"}),"Timer 5 Menit - Sangat Penting!"]}),e.jsxs("p",{className:"text-orange-800 mb-2",children:["Saat pemesanan masuk, ",e.jsx("strong",{children:"timer hitung mundur 5 menit"})," langsung dimulai. Anda HARUS merespons sebelum timer habis."]}),e.jsxs("ul",{className:"space-y-1 text-orange-700 text-sm",children:[e.jsx("li",{children:"âœ“ Notifikasi suara MP3 diputar otomatis"}),e.jsx("li",{children:"âœ“ Timer ditampilkan di layar dashboard Anda"}),e.jsx("li",{children:"âœ“ Jika tidak merespons dalam 5 menit â†’ Pemesanan kadaluarsa"})]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Pilihan Anda:"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsx("p",{className:"text-green-800 font-medium",children:"âœ… Terima pemesanan"})}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-red-800 font-medium",children:"âŒ Tolak pemesanan"})}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsx("p",{className:"text-yellow-800 font-medium",children:"â±ï¸ Jika Anda tidak merespons dalam 5 menit, pemesanan akan otomatis kedaluwarsa dan pengguna dapat memesan terapis lain."})})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Pembayaran:"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{className:"text-gray-700",children:"â€¢ Pengguna membayar Anda secara langsung untuk layanan pijat Anda"}),e.jsxs("li",{className:"text-gray-700",children:["â€¢ IndaStreetmassage menerapkan ",e.jsx("strong",{children:"komisi platform 30%"})]}),e.jsx("li",{className:"text-gray-700",children:"â€¢ Penghasilan Anda dicatat di dashboard Anda"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm mr-3",children:"3"}),"Pemesanan Terjadwal (Pemesanan Masa Depan)"]}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Pemesanan terjadwal memungkinkan pengguna memesan Anda di muka."}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Cara kerja:"}),e.jsxs("ol",{className:"space-y-2 mb-4",children:[e.jsx("li",{className:"text-gray-700",children:"1. Pengguna memilih tanggal & waktu di masa depan"}),e.jsxs("li",{className:"text-gray-700",children:["2. Pengguna membayar ",e.jsx("strong",{children:"uang muka 30% yang tidak dapat dikembalikan"})]}),e.jsx("li",{className:"text-gray-700",children:"3. Pemesanan dikonfirmasi secara instan"})]}),e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"ðŸ’° Uang Muka 30% - TIDAK DAPAT DIKEMBALIKAN"}),e.jsxs("p",{className:"text-red-800 mb-2",children:["Untuk pemesanan terjadwal, pengguna WAJIB membayar ",e.jsx("strong",{children:"uang muka 30%"})," dari total harga sebelum konfirmasi."]}),e.jsxs("ul",{className:"space-y-1",children:[e.jsxs("li",{className:"text-red-800",children:["â€¢ Uang muka ",e.jsx("strong",{children:"TIDAK DAPAT DIKEMBALIKAN"})," dalam kondisi apapun"]}),e.jsx("li",{className:"text-red-800",children:"â€¢ Uang muka ini mengamankan waktu dan ketersediaan Anda"}),e.jsx("li",{className:"text-red-800",children:"â€¢ Sisa 70% dibayar sesuai aturan platform (langsung ke terapis)"}),e.jsxs("li",{className:"text-red-800",children:["â€¢ Uang muka dibayar oleh pengguna ",e.jsx("strong",{children:"sebelum booking dikonfirmasi"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-300 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"font-bold text-blue-900 mb-2 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"ðŸ¦"}),"Detail Bank Diperlukan (Aktivasi Booking Terjadwal)"]}),e.jsxs("p",{className:"text-blue-800 mb-2",children:["Untuk menerima pemesanan terjadwal, Anda WAJIB mengisi detail bank di halaman ",e.jsx("strong",{children:"Payment Info"}),"."]}),e.jsxs("ul",{className:"space-y-1 text-blue-700 text-sm",children:[e.jsx("li",{children:"âœ“ Nama Bank (contoh: BCA, Mandiri, BNI)"}),e.jsx("li",{children:"âœ“ Nama Pemilik Rekening (sesuai KTP)"}),e.jsx("li",{children:"âœ“ Nomor Rekening"})]}),e.jsx("p",{className:"text-blue-900 font-semibold mt-2",children:'âš ï¸ Tanpa detail bank, tombol "Terima" untuk booking terjadwal akan diblokir oleh sistem.'}),e.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"Detail bank ditampilkan di chat kepada pelanggan saat booking dikonfirmasi untuk pembayaran sisa 70%."})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Notifikasi:"}),e.jsx("p",{className:"text-gray-700 mb-2",children:"Pengingat otomatis dikirim ke:"}),e.jsxs("ul",{className:"space-y-1 mb-2",children:[e.jsx("li",{className:"text-gray-700",children:"â€¢ Terapis"}),e.jsx("li",{className:"text-gray-700",children:"â€¢ Tempat (jika berlaku)"}),e.jsx("li",{className:"text-gray-700",children:"â€¢ Pengguna"})]}),e.jsxs("p",{className:"text-gray-600 italic",children:["Notifikasi dikirim ",e.jsx("strong",{children:"5 jam sebelum pemesanan"})," agar tidak ada yang lupa"]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm mr-3",children:"4"}),"Komisi & Biaya Platform (Indonesia)"]}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Untuk semua akun berbasis Indonesia:"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsx("p",{className:"text-blue-900 font-medium",children:"âœ… Terapis: komisi 30%"})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsx("p",{className:"text-blue-900 font-medium",children:"âœ… Tempat: komisi 30%"})})]}),e.jsx("p",{className:"text-gray-700 mb-2",children:"Tidak ada tingkat tersembunyi atau tarif variabel."}),e.jsx("p",{className:"text-gray-900 font-semibold",children:"Komisi 30% berlaku untuk semua pemesanan, baik Pesan Sekarang maupun Terjadwal."})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm mr-3",children:"5"}),"Tempat vs Pemesanan Terapis"]}),e.jsx("p",{className:"text-gray-700 mb-3",children:"Jika Anda terkait dengan Tempat:"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{className:"text-gray-700",children:"â€¢ Alur pemesanan tetap sama"}),e.jsx("li",{className:"text-gray-700",children:"â€¢ Notifikasi dikirim ke terapis dan tempat"}),e.jsx("li",{className:"text-gray-700",children:"â€¢ Penghasilan dan komisi ditangani secara otomatis"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm mr-3",children:"6"}),"Verifikasi KTP & Badge Kepercayaan"]}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Verifikasi identitas meningkatkan kepercayaan pelanggan dan meningkatkan pemesanan hingga 60%."}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Cara Upload KTP:"}),e.jsxs("ol",{className:"space-y-2 mb-4",children:[e.jsxs("li",{className:"text-gray-700",children:["1. Buka halaman ",e.jsx("strong",{children:"Payment Info"})," di dashboard Anda"]}),e.jsx("li",{className:"text-gray-700",children:"2. Upload foto KTP yang jelas (JPG/PNG)"}),e.jsxs("li",{className:"text-gray-700",children:["3. Klik ",e.jsx("strong",{children:"Simpan"})]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"3 Status Badge Verifikasi:"}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"bg-orange-50 border-2 border-orange-300 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"bg-orange-500 text-white px-3 py-1 rounded-full text-sm font-semibold mr-2",children:"Menunggu Verifikasi"}),e.jsx("span",{className:"text-orange-700 font-semibold",children:"ðŸŸ  Badge Oranye"})]}),e.jsxs("p",{className:"text-orange-800 text-sm",children:[e.jsx("strong",{children:"Ditampilkan SEGERA"})," setelah Anda upload KTP. Menunjukkan kepada pelanggan bahwa Anda sedang dalam proses verifikasi."]})]}),e.jsxs("div",{className:"bg-green-50 border-2 border-green-300 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-semibold mr-2",children:"Terverifikasi"}),e.jsx("span",{className:"text-green-700 font-semibold",children:"ðŸŸ¢ Badge Hijau"})]}),e.jsxs("p",{className:"text-green-800 text-sm",children:["Ditampilkan setelah admin IndaStreetmassage menyetujui KTP Anda. Badge ini ",e.jsx("strong",{children:"meningkatkan kepercayaan pelanggan"})," dan menghasilkan lebih banyak pemesanan."]})]}),e.jsxs("div",{className:"bg-red-50 border-2 border-red-300 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center mb-2",children:e.jsx("span",{className:"text-red-700 font-semibold",children:"ðŸ”´ Ditolak"})}),e.jsx("p",{className:"text-red-800 text-sm mb-2",children:"Jika KTP Anda ditolak, badge akan disembunyikan dan Anda akan menerima alasan penolakan."}),e.jsx("p",{className:"text-red-700 text-sm font-semibold",children:"âœ“ Upload ulang KTP yang lebih jelas untuk verifikasi ulang"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-purple-900 font-semibold",children:"ðŸ“Š Badge Verifikasi = +60% Pemesanan"}),e.jsx("p",{className:"text-purple-700 text-sm mt-1",children:"Profil terverifikasi menerima lebih banyak kepercayaan dan pemesanan dibandingkan profil tanpa verifikasi."})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm mr-3",children:"7"}),"Visibilitas Profil Penting"]}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Profil yang lengkap berkinerja jauh lebih baik."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsx("p",{className:"text-green-800",children:"âœ” Foto profil profesional"})}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsx("p",{className:"text-green-800",children:"âœ” Deskripsi layanan yang jelas"})}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsx("p",{className:"text-green-800",children:"âœ” Harga yang akurat"})}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsx("p",{className:"text-green-800",children:"âœ” Ketersediaan tetap diperbarui"})}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsx("p",{className:"text-green-800",children:"âœ” KTP terverifikasi (badge hijau)"})}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsx("p",{className:"text-green-800",children:"âœ” Detail bank lengkap"})})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-4",children:e.jsx("p",{className:"text-purple-900 font-semibold",children:"ðŸ“ˆ Profil yang lengkap menerima hingga 80% lebih banyak lalu lintas dibandingkan profil dasar."})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm mr-3",children:"8"}),"Keandalan & Penggunaan yang Adil"]}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Untuk menjaga platform tetap terpercaya dan adil:"}),e.jsxs("ul",{className:"space-y-2 mb-4",children:[e.jsx("li",{className:"text-gray-700",children:"â€¢ Terima pemesanan hanya saat tersedia"}),e.jsx("li",{className:"text-gray-700",children:"â€¢ Hindari pembatalan mendadak berulang"}),e.jsx("li",{className:"text-gray-700",children:"â€¢ Jaga notifikasi tetap aktif"}),e.jsx("li",{className:"text-gray-700",children:"â€¢ Tiba tepat waktu untuk pemesanan terjadwal"})]}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4",children:e.jsx("p",{className:"text-yellow-900 font-medium",children:"âš ï¸ Kegagalan mengikuti aturan platform dapat mempengaruhi visibilitas profil."})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-orange-500 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm mr-3",children:"9"}),"Butuh Bantuan?"]}),e.jsx("p",{className:"text-gray-700 mb-3",children:"Jika Anda mengalami:"}),e.jsxs("ul",{className:"space-y-1 mb-4",children:[e.jsx("li",{className:"text-gray-700",children:"â€¢ Masalah pemesanan"}),e.jsx("li",{className:"text-gray-700",children:"â€¢ Masalah notifikasi"}),e.jsx("li",{className:"text-gray-700",children:"â€¢ Pertanyaan pembayaran"})]}),e.jsx("p",{className:"text-gray-900 font-semibold",children:"Silakan hubungi Dukungan IndaStreetmassage melalui dashboard Anda."})]}),e.jsxs("div",{className:"bg-gray-100 rounded-xl p-6 border border-gray-300",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Catatan Akhir"}),e.jsx("p",{className:"mb-4 text-gray-700",children:"IndaStreetmassage dibangun untuk:"}),e.jsxs("ul",{className:"space-y-2 mb-4",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-gray-700",children:"âœ“"}),e.jsx("span",{className:"text-gray-700",children:"Melindungi waktu terapis"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-gray-700",children:"âœ“"}),e.jsx("span",{className:"text-gray-700",children:"Mengurangi ketidakhadiran"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-gray-700",children:"âœ“"}),e.jsx("span",{className:"text-gray-700",children:"Meningkatkan kualitas pemesanan"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2 text-gray-700",children:"âœ“"}),e.jsx("span",{className:"text-gray-700",children:"Menyediakan sistem profesional dan terpercaya untuk Indonesia dan pengguna internasional"})]})]}),e.jsx("p",{className:"text-xl font-bold text-center text-gray-900",children:"Kami senang bertumbuh bersama Anda ðŸš€"})]})]}),e.jsx("div",{className:"mt-8 flex justify-center items-center gap-6",children:[{name:"TikTok",url:"https://www.tiktok.com/@indastreet.team?is_from_webapp=1&sender_device=pc",imgSrc:"https://ik.imagekit.io/7grri5v7d/tik%20tok.png"},{name:"Facebook",url:"https://www.facebook.com/share/g/1C2QCPTp62/",imgSrc:"https://ik.imagekit.io/7grri5v7d/facebook.png"},{name:"Instagram",url:"https://www.instagram.com/indastreet.id/",imgSrc:"https://ik.imagekit.io/7grri5v7d/instagrame.png"}].map(r=>e.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"transition-all hover:scale-110 active:scale-95 hover:opacity-80 p-2 rounded-xl hover:bg-white hover:shadow-md","aria-label":r.name,title:"Follow us on ".concat(r.name),children:e.jsx("img",{src:r.imgSrc,alt:r.name,className:"w-14 h-14 object-contain"})},r.name))})]})})})},rl=({therapist:t,onBack:a})=>{const[s,n]=o.useState(new Date),[i,r]=o.useState([]),[l,d]=o.useState([]),[g,m]=o.useState({monday:{start:"09:00",end:"17:00",enabled:!0},tuesday:{start:"09:00",end:"17:00",enabled:!0},wednesday:{start:"09:00",end:"17:00",enabled:!0},thursday:{start:"09:00",end:"17:00",enabled:!0},friday:{start:"09:00",end:"17:00",enabled:!0},saturday:{start:"09:00",end:"17:00",enabled:!0},sunday:{start:"09:00",end:"17:00",enabled:!1}}),[x,v]=o.useState(!1),[j,I]=o.useState(!1),[p,R]=o.useState(null),[w,P]=o.useState(!1),[D,L]=o.useState({date:"",startTime:"",endTime:"",note:""});o.useEffect(()=>{t&&(O(),H())},[t]);const O=()=>{if(t){if(t.operationalHours)try{const A=JSON.parse(t.operationalHours);m(A)}catch{}if(t.manualBookings)try{const A=JSON.parse(t.manualBookings);d(A)}catch{}}},H=async()=>{r([])},S=async()=>{if(t){P(!0);try{await Ye.updateTherapist(t.$id||String(t.id),{operationalHours:JSON.stringify(g)}),se("Schedule settings saved successfully","success"),v(!1)}catch{se("Failed to save schedule settings","error")}finally{P(!1)}}},N=async()=>{if(!t||!D.date||!D.startTime||!D.endTime){se("Please fill in all booking details","error");return}const A={id:"manual-".concat(Date.now()),date:D.date,startTime:D.startTime,endTime:D.endTime,note:D.note},c=[...l,A];P(!0);try{await Ye.updateTherapist(t.$id||String(t.id),{manualBookings:JSON.stringify(c)}),d(c),L({date:"",startTime:"",endTime:"",note:""}),I(!1),se("Manual booking added successfully","success")}catch{se("Failed to add manual booking","error")}finally{P(!1)}},k=async A=>{if(!t)return;const c=l.filter(h=>h.id!==A);P(!0);try{await Ye.updateTherapist(t.$id||String(t.id),{manualBookings:JSON.stringify(c)}),d(c),se("Manual booking removed","success")}catch{se("Failed to remove manual booking","error")}finally{P(!1)}},b=A=>{const c=A.getFullYear(),h=A.getMonth(),C=new Date(c,h,1),E=new Date(c,h+1,0).getDate(),W=C.getDay();return{daysInMonth:E,startingDayOfWeek:W}},y=A=>{const c=A.toISOString().split("T")[0],h=i.some(M=>new Date(M.startTime).toISOString().split("T")[0]===c&&M.status!=="cancelled"),C=l.some(M=>M.date===c);return h||C},T=A=>{var h;const c=A.toLocaleDateString("en-US",{weekday:"long"}).toLowerCase();return((h=g[c])==null?void 0:h.enabled)||!1},F=()=>{const{daysInMonth:A,startingDayOfWeek:c}=b(s),h=s.toLocaleDateString("en-US",{month:"long",year:"numeric"}),C=[];for(let M=0;M<c;M++)C.push(e.jsx("div",{className:"h-14 bg-gray-50"},"empty-".concat(M)));for(let M=1;M<=A;M++){const E=new Date(s.getFullYear(),s.getMonth(),M),W=y(E),X=T(E),_=new Date().toDateString()===E.toDateString();C.push(e.jsx("div",{onClick:()=>{R(E),L({...D,date:E.toISOString().split("T")[0]})},className:"h-16 border-r border-b border-gray-200 flex flex-col items-center justify-center cursor-pointer transition-all duration-200 touch-manipulation text-lg font-medium\n            ".concat(_?"ring-2 ring-green-500 ring-inset bg-green-100":"","\n            ").concat(W?"bg-green-500 text-white font-bold shadow-lg":"bg-white hover:bg-green-50 text-black","\n            ").concat(X?"":"bg-gray-100 text-gray-400","\n          "),style:{minHeight:"64px",fontSize:"16px",touchAction:"manipulation"},children:e.jsx("span",{className:"text-sm",children:M})},M))}return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("button",{onClick:()=>n(new Date(s.getFullYear(),s.getMonth()-1)),className:"p-2 hover:bg-orange-50 rounded-lg transition-colors",children:e.jsx("span",{children:"â—€"})}),e.jsx("h3",{className:"text-base font-bold text-black",children:h}),e.jsx("button",{onClick:()=>n(new Date(s.getFullYear(),s.getMonth()+1)),className:"p-2 hover:bg-orange-50 rounded-lg transition-colors",children:e.jsx("span",{children:"â–¶"})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-0 mb-1",children:["S","M","T","W","T","F","S"].map((M,E)=>e.jsx("div",{className:"text-center text-xs font-medium text-gray-500 py-1.5",children:M},M+E))}),e.jsx("div",{className:"grid grid-cols-7 gap-0 border border-gray-300 rounded-lg overflow-hidden",children:C}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 bg-orange-500 rounded-sm"}),e.jsx("span",{className:"text-gray-600",children:"Booked"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 bg-white border border-gray-300 rounded-sm"}),e.jsx("span",{className:"text-gray-600",children:"Available"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 bg-gray-100 rounded-sm"}),e.jsx("span",{className:"text-gray-600",children:"Off"})]})]})]})},U=()=>{const A=new Date().toISOString().split("T")[0],c=i.filter(C=>new Date(C.startTime).toISOString().split("T")[0]===A&&C.status!=="cancelled"),h=l.filter(C=>C.date===A);return{systemBookings:c,manualBookingsToday:h}},{systemBookings:B,manualBookingsToday:f}=U();return e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-white pb-20  ",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:[e.jsx(ds,{title:"Jadwal Saya",subtitle:"Kelola jadwal dan booking harian",onBackToStatus:a||(()=>{}),icon:e.jsx(dt,{className:"w-6 h-6 text-orange-500"}),actions:e.jsx("button",{onClick:()=>v(!0),className:"p-2 hover:bg-orange-50 rounded-lg transition-colors","aria-label":"Schedule settings",children:e.jsx(ze,{className:"w-5 h-5 text-orange-500"})})}),e.jsxs("div",{className:"max-w-sm mx-auto px-4 py-4 space-y-4",children:[e.jsxs("section",{className:"bg-white border border-gray-200 rounded-lg p-4","aria-labelledby":"calendar-help-heading",children:[e.jsx("h2",{id:"calendar-help-heading",className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Tentang Kalender"}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Kalender ini menampilkan jadwal harian dan booking Anda. Gunakan kalender untuk melihat tanggal, menambah booking manual, dan mengelola jadwal hari ini."}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Kalender bulanan"})," â€” Lihat dan pilih tanggal"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Today's Bookings"})," â€” Booking hari ini dari sistem dan manual"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Tambah (Add)"})," â€” Tambah booking manual untuk waktu kosong"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Tombol jam"})," (atas kanan) â€” Atur jam kerja mingguan"]})]})]}),e.jsxs("section",{className:"bg-white border border-gray-200 rounded-lg p-4","aria-labelledby":"panduan-heading",children:[e.jsx("h2",{id:"panduan-heading",className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Panduan"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:Za.setAvailability.title}),e.jsx("p",{className:"text-xs text-gray-600",children:Za.setAvailability.content})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:Za.blockTimeSlots.title}),e.jsx("p",{className:"text-xs text-gray-600",children:Za.blockTimeSlots.content})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:Za.bufferTime.title}),e.jsx("p",{className:"text-xs text-gray-600",children:Za.bufferTime.content})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:F()}),e.jsxs("div",{className:"bg-white rounded-lg border border-black p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-base font-bold text-black",children:"Today's Bookings"}),e.jsxs("button",{onClick:()=>I(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-sm font-semibold",children:[e.jsx(Si,{className:"w-4 h-4"}),"Add"]})]}),B.length===0&&f.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(dt,{className:"w-10 h-10 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No bookings today"})]}):e.jsxs("div",{className:"space-y-2",children:[B.map(A=>e.jsxs("div",{className:"p-3 bg-white border border-black rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1.5",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-black",children:A.userName}),e.jsxs("p",{className:"text-xs text-gray-600",children:[A.service," min"]})]}),e.jsx("span",{className:"px-2 py-0.5 bg-orange-500 text-white text-xs font-semibold rounded",children:A.paymentType==="bank_transfer"?"Paid":"Pending"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-600",children:[e.jsx(ze,{className:"w-3.5 h-3.5 text-orange-500"}),e.jsx("span",{children:new Date(A.startTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})]},A.id)),f.map(A=>e.jsxs("div",{className:"p-3 bg-white border border-black rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1.5",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-black",children:"Manual"}),A.note&&e.jsx("p",{className:"text-xs text-gray-600",children:A.note})]}),e.jsx("button",{onClick:()=>k(A.id),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:e.jsx(wt,{className:"w-4 h-4 text-black"})})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-600",children:[e.jsx(ze,{className:"w-3.5 h-3.5 text-orange-500"}),e.jsxs("span",{children:[A.startTime," - ",A.endTime]})]})]},A.id))]})]}),i.filter(A=>new Date(A.startTime)>new Date&&A.status!=="cancelled").length>0&&e.jsxs("div",{className:"bg-white rounded-lg border border-black p-4",children:[e.jsx("h3",{className:"text-base font-bold text-black mb-3",children:"Upcoming"}),e.jsx("div",{className:"space-y-2",children:i.filter(A=>new Date(A.startTime)>new Date&&A.status!=="cancelled").sort((A,c)=>new Date(A.startTime).getTime()-new Date(c.startTime).getTime()).map(A=>e.jsxs("div",{className:"p-3 bg-white border border-gray-300 rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1.5",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-black",children:A.userName}),e.jsxs("p",{className:"text-xs text-gray-600",children:[A.service," min"]})]}),A.paymentType==="bank_transfer"&&e.jsx($e,{className:"w-4 h-4 text-orange-500"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(dt,{className:"w-3.5 h-3.5 text-orange-500"}),e.jsx("span",{children:new Date(A.startTime).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ze,{className:"w-3.5 h-3.5 text-orange-500"}),e.jsx("span",{children:new Date(A.startTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})]})]},A.id))})]})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-end",children:e.jsxs("div",{className:"w-full max-w-sm mx-auto bg-white border-t border-black rounded-t-2xl p-5 space-y-3 animate-slide-up max-h-[90vh] ",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-bold text-black",children:"Working Hours"}),e.jsx("button",{onClick:()=>v(!1),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(wt,{className:"w-5 h-5 text-gray-600"})})]}),e.jsx("div",{className:"space-y-2.5",children:Object.entries(g).map(([A,c])=>e.jsxs("div",{className:"p-3 bg-white border border-gray-300 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2.5",children:[e.jsx("span",{className:"text-sm font-bold text-black capitalize",children:A}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.enabled,onChange:h=>m({...g,[A]:{...c,enabled:h.target.checked}}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"})]})]}),c.enabled&&e.jsxs("div",{className:"grid grid-cols-2 gap-2.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Start"}),e.jsx("input",{type:"time",value:c.start,onChange:h=>m({...g,[A]:{...c,start:h.target.value}}),className:"w-full px-2.5 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-orange-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"End"}),e.jsx("input",{type:"time",value:c.end,onChange:h=>m({...g,[A]:{...c,end:h.target.value}}),className:"w-full px-2.5 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-orange-500 text-sm"})]})]})]},A))}),e.jsx("button",{onClick:S,disabled:w,className:"w-full py-2.5 bg-orange-500 text-white rounded-lg font-semibold hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:w?"Saving...":"Save"})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-end",children:e.jsxs("div",{className:"w-full max-w-sm mx-auto bg-white border-t border-black rounded-t-2xl p-5 space-y-3 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-bold text-black",children:"Add Booking"}),e.jsx("button",{onClick:()=>I(!1),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(wt,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-black mb-1.5 block",children:"Date"}),e.jsx("input",{type:"date",value:D.date,onChange:A=>L({...D,date:A.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-orange-500 text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-black mb-1.5 block",children:"Start"}),e.jsx("input",{type:"time",value:D.startTime,onChange:A=>L({...D,startTime:A.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-orange-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-black mb-1.5 block",children:"End"}),e.jsx("input",{type:"time",value:D.endTime,onChange:A=>L({...D,endTime:A.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-orange-500 text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-black mb-1.5 block",children:"Note (Optional)"}),e.jsx("input",{type:"text",value:D.note,onChange:A=>L({...D,note:A.target.value}),placeholder:"e.g., Private client, Hotel",className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-orange-500 text-sm"})]})]}),e.jsx("button",{onClick:N,disabled:w||!D.date||!D.startTime||!D.endTime,className:"w-full py-2.5 bg-orange-500 text-white rounded-lg font-semibold hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:w?"Adding...":"Add"})]})})]})},Du=({booking:t,onApproveDeposit:a,onRejectDeposit:s,onRequestReupload:n,language:i="id"})=>{const[r,l]=o.useState(!1),[d,g]=o.useState(!1),[m,x]=o.useState(!1),[v,j]=o.useState(""),[I,p]=o.useState(""),w={en:{depositSubmitted:"Deposit Proof Submitted",customerPaid:"Customer paid deposit",viewProof:"View Proof",approveDeposit:"Approve Deposit",rejectDeposit:"Reject Deposit",requestReupload:"Request Re-upload",uploadedAt:"Uploaded at",depositAmount:"Deposit Amount",notes:"Customer Notes",approve:"Approve",reject:"Reject",requestNew:"Request New Upload",cancel:"Cancel",rejectReason:"Rejection Reason",reuploadReason:"Re-upload Request Message",processing:"Processing..."},id:{depositSubmitted:"Bukti Deposit Diterima",customerPaid:"Pelanggan membayar deposit",viewProof:"Lihat Bukti",approveDeposit:"Setujui Deposit",rejectDeposit:"Tolak Deposit",requestReupload:"Minta Upload Ulang",uploadedAt:"Diupload pada",depositAmount:"Jumlah Deposit",notes:"Catatan Pelanggan",approve:"Setujui",reject:"Tolak",requestNew:"Minta Upload Baru",cancel:"Batal",rejectReason:"Alasan Penolakan",reuploadReason:"Pesan Permintaan Upload Ulang",processing:"Memproses..."}}[i],P=async()=>{l(!0);try{await a(t.$id)}catch{}finally{l(!1)}},D=async()=>{if(v.trim()){l(!0);try{await s(t.$id,v),g(!1),j("")}catch{}finally{l(!1)}}},L=async()=>{if(I.trim()){l(!0);try{await n(t.$id,I),x(!1),p("")}catch{}finally{l(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border-l-4 border-orange-400 rounded-xl p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center",children:e.jsx(Rs,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-orange-900",children:w.depositSubmitted}),e.jsx("p",{className:"text-sm text-orange-700",children:w.customerPaid})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"bg-orange-200 text-orange-800 px-3 py-1 rounded-full text-xs font-bold",children:"PENDING APPROVAL"}),e.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:[w.uploadedAt,": ",new Date(t.paymentProofUploadedAt).toLocaleString("id-ID")]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white/80 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[w.depositAmount,":"]}),e.jsxs("span",{className:"font-bold text-green-700",children:["Rp ",t.depositAmount.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Remaining:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Rp ",(t.price-t.depositAmount).toLocaleString("id-ID")]})]})]}),e.jsx("div",{className:"bg-white/80 rounded-lg p-3",children:e.jsxs("button",{onClick:()=>window.open(t.paymentProofUrl,"_blank"),className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[e.jsx(ma,{className:"w-4 h-4"}),w.viewProof]})})]}),t.depositNotes&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:[e.jsxs("h5",{className:"text-sm font-semibold text-blue-900 mb-1",children:[w.notes,":"]}),e.jsx("p",{className:"text-sm text-blue-800",children:t.depositNotes})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:P,disabled:r,className:"flex items-center justify-center gap-2 bg-green-600 text-white py-3 rounded-xl hover:bg-green-700 transition-colors font-medium disabled:opacity-50",children:[e.jsx($e,{className:"w-4 h-4"}),r?w.processing:w.approve]}),e.jsxs("button",{onClick:()=>x(!0),disabled:r,className:"flex items-center justify-center gap-2 bg-yellow-600 text-white py-3 rounded-xl hover:bg-yellow-700 transition-colors font-medium disabled:opacity-50",children:[e.jsx(Hr,{className:"w-4 h-4"}),w.requestNew]}),e.jsxs("button",{onClick:()=>g(!0),disabled:r,className:"flex items-center justify-center gap-2 bg-red-600 text-white py-3 rounded-xl hover:bg-red-700 transition-colors font-medium disabled:opacity-50",children:[e.jsx(Ot,{className:"w-4 h-4"}),w.reject]})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(Ot,{className:"w-5 h-5 text-red-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:w.rejectDeposit})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[w.rejectReason," *"]}),e.jsx("textarea",{value:v,onChange:O=>j(O.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent resize-none",rows:4,placeholder:i==="en"?"Explain why you're rejecting this deposit proof...":"Jelaskan mengapa Anda menolak bukti deposit ini..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{g(!1),j("")},className:"flex-1 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:w.cancel}),e.jsx("button",{onClick:D,disabled:!v.trim()||r,className:"flex-1 bg-red-600 text-white py-3 rounded-lg hover:bg-red-700 disabled:opacity-50",children:r?w.processing:w.reject})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(Hr,{className:"w-5 h-5 text-yellow-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:w.requestReupload})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[w.reuploadReason," *"]}),e.jsx("textarea",{value:I,onChange:O=>p(O.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent resize-none",rows:4,placeholder:i==="en"?"Ask customer to upload a clearer photo or provide specific instructions...":"Minta pelanggan upload foto yang lebih jelas atau berikan instruksi spesifik..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{x(!1),p("")},className:"flex-1 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:w.cancel}),e.jsx("button",{onClick:L,disabled:!I.trim()||r,className:"flex-1 bg-yellow-600 text-white py-3 rounded-lg hover:bg-yellow-700 disabled:opacity-50",children:r?w.processing:w.requestNew})]})]})})]})};var No,ko;class _u{constructor(){Se(this,"vapidPublicKey",((ko=(No=import.meta)==null?void 0:No.env)==null?void 0:ko.VITE_VAPID_PUBLIC_KEY)||"");Se(this,"registration",null);Se(this,"permission","default");Se(this,"isAdmin",!1);Se(this,"userId",null);Se(this,"notificationQueue",[]);Se(this,"maxQueueSize",50);Se(this,"vibrationPatterns",{chat:[100,50,100],booking:[200,100,200,100,200],payment:[300,100,300],urgent:[500,200,500,200,500],success:[100,50,100,50,100],error:[1e3]});this.init()}async init(){if(!(!("serviceWorker"in navigator)||!("PushManager"in window))){this.permission=Notification.permission;try{this.registration=await navigator.serviceWorker.register("/sw.js")}catch{}}}initializeAsAdmin(a){this.isAdmin=!0,this.userId=a}async requestPermission(){if(!("Notification"in window))return!1;if(this.permission==="granted")return!0;try{if(!await this.showCustomPermissionDialog())return!1;const s=await Notification.requestPermission();return this.permission=s,s==="granted"?(await this.subscribeToPushNotifications(),await this.showWelcomeNotification(),!0):!1}catch{return!1}}async showCustomPermissionDialog(){return new Promise(a=>{var n,i;const s=document.createElement("div");s.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",s.innerHTML='\n        <div class="bg-white rounded-lg p-6 max-w-md mx-4">\n          <div class="flex items-center mb-4">\n            <div class="bg-orange-100 p-3 rounded-full mr-3">\n              <svg class="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>\n              </svg>\n            </div>\n            <h3 class="text-lg font-semibold text-orange-900">Tetap Terhubung</h3>\n          </div>\n          <p class="text-gray-600 mb-6">Dapatkan notifikasi instan untuk booking baru, pesan, dan update pembayaran. Anda bisa mengubah ini kapan saja di pengaturan.</p>\n          <div class="flex space-x-3">\n            <button id="allow-notifications" class="flex-1 bg-gradient-to-r from-orange-600 to-orange-700 text-white px-4 py-2 rounded-lg font-medium hover:from-orange-700 hover:to-orange-800">\n              Izinkan Notifikasi\n            </button>\n            <button id="not-now" class="flex-1 bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-300">\n              Nanti Saja\n            </button>\n          </div>\n        </div>\n      ',document.body.appendChild(s),(n=s.querySelector("#allow-notifications"))==null||n.addEventListener("click",()=>{document.body.removeChild(s),a(!0)}),(i=s.querySelector("#not-now"))==null||i.addEventListener("click",()=>{document.body.removeChild(s),a(!1)})})}async showWelcomeNotification(){await this.showNotification({title:"ðŸŽ‰ Notifications Enabled!",body:"You'll now receive instant updates for bookings, messages, and payments.",icon:"/icons/icon-192x192.png",tag:"welcome",requireInteraction:!1,vibrate:this.vibrationPatterns.success,actions:[{action:"settings",title:"Settings",icon:"/icons/settings.png"},{action:"dismiss",title:"Got it!"}]})}async subscribeToPushNotifications(){if(this.registration&&this.vapidPublicKey)try{const a=await this.registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.urlBase64ToUint8Array(this.vapidPublicKey)});await this.sendSubscriptionToServer(a)}catch{}}async sendSubscriptionToServer(a){}async showNotification(a){if(this.permission!=="granted")return;this.addToQueue(a);const s={body:a.body,icon:a.icon||"/icons/icon-192x192.png",badge:a.badge||"/icons/badge-72x72.png",image:a.image,data:a.data,tag:a.tag,requireInteraction:a.requireInteraction||!1,silent:a.silent||!1,timestamp:a.timestamp||Date.now(),vibrate:a.vibrate||this.vibrationPatterns.chat,actions:a.actions||[{action:"open",title:"Open",icon:"/icons/open.png"},{action:"dismiss",title:"Dismiss",icon:"/icons/dismiss.png"}]};if(!this.registration){new Notification(a.title,s);return}await this.registration.showNotification(a.title,s),this.trackNotificationMetrics(a)}addToQueue(a){this.notificationQueue.push(a),this.notificationQueue.length>this.maxQueueSize&&this.notificationQueue.shift()}trackNotificationMetrics(a){var s;try{const n={timestamp:Date.now(),type:((s=a.data)==null?void 0:s.type)||"unknown",tag:a.tag,userId:this.userId,isAdmin:this.isAdmin};localStorage.setItem("notification_".concat(Date.now()),JSON.stringify(n))}catch{}}async notifyAdminPaymentSubmitted(a){if(!this.isAdmin)return;const s={low:{requireInteraction:!1,vibrate:this.vibrationPatterns.chat},medium:{requireInteraction:!1,vibrate:this.vibrationPatterns.payment},high:{requireInteraction:!0,vibrate:this.vibrationPatterns.urgent},urgent:{requireInteraction:!0,vibrate:this.vibrationPatterns.urgent}},n=s[a.priority]||s.medium;await this.showNotification({title:"ðŸ’° Payment Proof Submitted",body:"".concat(a.therapistName," submitted commission payment of Rp ").concat(a.paymentAmount.toLocaleString()),icon:"/icons/admin-payment.png",image:a.paymentProofUrl,tag:"admin-payment-".concat(a.therapistId),requireInteraction:n.requireInteraction,vibrate:n.vibrate,timestamp:new Date(a.submissionTime).getTime(),data:{type:"admin_payment_review",therapistId:a.therapistId,priority:a.priority,url:"/admin/payments/review/".concat(a.therapistId),source:"payment_page"},actions:[{action:"review",title:"ðŸ‘€ Review Now",icon:"/icons/review.png"},{action:"approve",title:"âœ… Quick Approve",icon:"/icons/approve.png"},{action:"later",title:"â° Review Later",icon:"/icons/clock.png"}]})}async notifyPaymentProofFromChat(a,s,n,i,r){this.isAdmin&&await this.showNotification({title:"ðŸ’¬ðŸ’° Payment Proof via Chat",body:"".concat(s," sent payment proof in chat â€¢ Rp ").concat(r.toLocaleString()),icon:"/icons/chat-payment.png",image:i,tag:"chat-payment-".concat(a),requireInteraction:!0,vibrate:this.vibrationPatterns.payment,data:{type:"admin_payment_review",therapistId:a,source:"chat_window",chatRoomId:n,url:"/admin/chat/".concat(n,"?payment=true")},actions:[{action:"open_chat",title:"ðŸ’¬ Open Chat",icon:"/icons/chat.png"},{action:"approve",title:"âœ… Approve",icon:"/icons/approve.png"},{action:"payment_history",title:"ðŸ“‹ Payment History",icon:"/icons/history.png"}]}),await this.showNotification({title:"ðŸ“¤ Payment Proof Uploaded",body:"Your payment proof has been sent to admin for review. You can track it in Payment History.",icon:"/icons/upload-success.png",tag:"proof-uploaded-".concat(a),requireInteraction:!1,vibrate:this.vibrationPatterns.success,data:{type:"payment_proof_uploaded",therapistId:a,source:"chat_window",url:"/therapist/payment-status"},actions:[{action:"view_history",title:"ðŸ“‹ View History",icon:"/icons/history.png"},{action:"dismiss",title:"Got it!"}]})}async notifyPaymentReviewComplete(a,s,n,i,r){const l=n==="approved";await this.showNotification({title:l?"âœ… Payment Approved!":"âŒ Payment Declined",body:l?"Your commission payment of Rp ".concat(i.toLocaleString()," has been approved"):"Your payment proof was declined. ".concat(r||"Please resubmit with correct details."),icon:l?"/icons/approved.png":"/icons/declined.png",tag:"payment-review-".concat(a),requireInteraction:!l,vibrate:l?this.vibrationPatterns.success:this.vibrationPatterns.error,data:{type:"payment_review_complete",therapistId:a,status:n,amount:i,url:"/therapist/payment-status"},actions:l?[{action:"view_history",title:"ðŸ“‹ View History",icon:"/icons/history.png"},{action:"dismiss",title:"Great!"}]:[{action:"resubmit",title:"ðŸ“¤ Resubmit",icon:"/icons/upload.png"},{action:"contact_admin",title:"ðŸ’¬ Contact Admin",icon:"/icons/support.png"}]});const d=336*60*60*1e3;await this.scheduleNotification({title:"ðŸ—‘ï¸ Payment History Cleanup",body:"Payment proof for Rp ".concat(i.toLocaleString()," will be deleted in 24 hours (2-week retention policy)"),icon:"/icons/cleanup.png",tag:"cleanup-warning-".concat(a),requireInteraction:!1,vibrate:this.vibrationPatterns.chat,data:{type:"payment_cleanup_warning",therapistId:a,amount:i,url:"/therapist/payment-status"},actions:[{action:"download",title:"ðŸ’¾ Download Copy",icon:"/icons/download.png"},{action:"dismiss",title:"Understood"}]},d-1440*60*1e3)}async notifyFileCleanup(a,s){if(s.length===0)return;const n=s.reduce((i,r)=>i+r.amount,0);await this.showNotification({title:"ðŸ—‘ï¸ Payment Files Deleted",body:"".concat(s.length," payment proof files deleted (2-week retention) â€¢ Total: Rp ").concat(n.toLocaleString()),icon:"/icons/deleted.png",tag:"files-deleted-".concat(a),requireInteraction:!1,vibrate:this.vibrationPatterns.chat,data:{type:"files_auto_deleted",therapistId:a,fileCount:s.length,totalAmount:n,url:"/therapist/payment-status"},actions:[{action:"view_active",title:"ðŸ“‹ View Active",icon:"/icons/active.png"},{action:"dismiss",title:"Understood"}]})}async notifyPaymentSync(a,s,n){await this.showNotification({title:"ðŸ”„ Payment Synced",body:"Payment proof from ".concat(s.replace("_"," ")," has been added to ").concat(n.replace("_"," ")),icon:"/icons/sync.png",tag:"payment-sync-".concat(a),requireInteraction:!1,vibrate:this.vibrationPatterns.success,silent:!0,data:{type:"payment_synced",source:s,targetPlatform:n,therapistId:a,url:n==="payment_history"?"/therapist/payment-status":"/therapist/chat"},actions:[{action:"view_target",title:"ðŸ‘€ View",icon:"/icons/view.png"},{action:"dismiss",title:"OK"}]})}async notifyAdminBatchPayments(a,s){this.isAdmin&&await this.showNotification({title:"ðŸ“Š Multiple Payments Pending",body:"".concat(a," payment proofs awaiting review â€¢ Total: Rp ").concat(s.toLocaleString()),icon:"/icons/admin-batch.png",tag:"admin-batch-payments",requireInteraction:!0,vibrate:this.vibrationPatterns.urgent,data:{type:"admin_batch_review",count:a,totalAmount:s,url:"/admin/payments/batch-review"},actions:[{action:"review_all",title:"ðŸ“‹ Review All",icon:"/icons/list.png"},{action:"approve_all",title:"âœ… Bulk Approve",icon:"/icons/approve-all.png"},{action:"dismiss",title:"Later"}]})}async notifyNewMessage(a,s,n,i){await this.showNotification({title:"ðŸ’¬ ".concat(a),body:s,icon:i||"/icons/chat-icon.png",image:s.includes("http")?this.extractImageFromMessage(s):void 0,tag:"chat-".concat(n),requireInteraction:!1,vibrate:this.vibrationPatterns.chat,data:{type:"chat",chatRoomId:n,senderName:a,url:"/therapist/chat?room=".concat(n)},actions:[{action:"reply",title:"ðŸ’¬ Quick Reply",icon:"/icons/reply.png"},{action:"open",title:"ðŸ‘€ Open Chat",icon:"/icons/open.png"},{action:"mark_read",title:"âœ“ Mark Read"}]})}async notifyDepositSubmitted(a,s,n,i){await this.showNotification({title:"ðŸ“¤ Deposit Proof Submitted",body:"Your deposit proof of Rp ".concat(i.toLocaleString()," has been sent to ").concat(s," for review."),icon:"/icons/deposit-submitted.png",tag:"deposit-submitted-".concat(n),requireInteraction:!1,vibrate:this.vibrationPatterns.success,data:{type:"deposit_submitted",bookingId:n,depositAmount:i,url:"/customer/booking-status/".concat(n)},actions:[{action:"view_status",title:"ðŸ‘€ View Status",icon:"/icons/view.png"},{action:"dismiss",title:"Got it!"}]})}async notifyDepositProofReceived(a,s,n,i){await this.showNotification({title:"ðŸ’° New Deposit Proof",body:"".concat(a," submitted deposit proof of Rp ").concat(n.toLocaleString()," for scheduled booking."),icon:"/icons/deposit-received.png",image:i,tag:"deposit-proof-".concat(s),requireInteraction:!0,vibrate:this.vibrationPatterns.payment,data:{type:"deposit_proof_received",bookingId:s,customerName:a,depositAmount:n,url:"/therapist/bookings?deposit=".concat(s)},actions:[{action:"approve",title:"âœ… Approve",icon:"/icons/approve.png"},{action:"view_proof",title:"ðŸ‘€ View Proof",icon:"/icons/view.png"},{action:"request_reupload",title:"ðŸ”„ Request Re-upload",icon:"/icons/refresh.png"}]})}async notifyDepositApproved(a,s,n,i){await this.showNotification({title:"âœ… Deposit Approved!",body:"".concat(a," approved your deposit of Rp ").concat(n.toLocaleString(),". Your booking is confirmed!"),icon:"/icons/deposit-approved.png",tag:"deposit-approved-".concat(s),requireInteraction:!1,vibrate:this.vibrationPatterns.success,data:{type:"deposit_approved",bookingId:s,therapistName:a,depositAmount:n,url:"/customer/booking-confirmed/".concat(s)},actions:[{action:"view_booking",title:"ðŸ“‹ View Booking",icon:"/icons/booking.png"},{action:"chat_therapist",title:"ðŸ’¬ Chat Therapist",icon:"/icons/chat.png"}]})}async notifyDepositRejected(a,s,n,i){await this.showNotification({title:"âŒ Deposit Rejected",body:"".concat(a," needs clarification on your deposit proof. Reason: ").concat(i),icon:"/icons/deposit-rejected.png",tag:"deposit-rejected-".concat(s),requireInteraction:!0,vibrate:this.vibrationPatterns.error,data:{type:"deposit_rejected",bookingId:s,therapistName:a,reason:i,url:"/customer/booking-resubmit/".concat(s)},actions:[{action:"resubmit",title:"ðŸ“¤ Resubmit Proof",icon:"/icons/upload.png"},{action:"chat_therapist",title:"ðŸ’¬ Contact Therapist",icon:"/icons/chat.png"}]})}async notifyDepositReuploadRequested(a,s,n){await this.showNotification({title:"ðŸ”„ Re-upload Request",body:"".concat(a,": ").concat(n),icon:"/icons/reupload-request.png",tag:"reupload-request-".concat(s),requireInteraction:!0,vibrate:this.vibrationPatterns.payment,data:{type:"deposit_reupload_requested",bookingId:s,therapistName:a,message:n,url:"/customer/booking-reupload/".concat(s)},actions:[{action:"upload_new",title:"ðŸ“¤ Upload New Proof",icon:"/icons/upload.png"},{action:"chat_therapist",title:"ðŸ’¬ Ask Therapist",icon:"/icons/chat.png"}]})}async notifyNewBooking(a,s,n,i){const r=i!=null&&i.amount?i.amount*.7:0;await this.showNotification({title:"ðŸŽ‰ New Booking Request!",body:"".concat(a," â€¢ ").concat(s," â€¢ Est. earnings: Rp ").concat(r.toLocaleString()),icon:"/icons/booking-icon.png",image:i==null?void 0:i.serviceImage,tag:"booking-".concat(n),requireInteraction:!0,vibrate:this.vibrationPatterns.booking,timestamp:Date.now(),data:{type:"booking",bookingId:n,customerName:a,estimatedEarnings:r,url:"/therapist/bookings?booking=".concat(n)},actions:[{action:"accept",title:"âœ… Accept",icon:"/icons/accept.png"},{action:"view",title:"ðŸ‘€ View Details",icon:"/icons/view.png"},{action:"decline",title:"âŒ Decline",icon:"/icons/decline.png"}]})}async notifyPaymentConfirmed(a,s,n){await this.showNotification({title:"ðŸ’° Payment Confirmed!",body:"".concat(a," confirmed payment of Rp ").concat(s.toLocaleString()),icon:"/icons/payment-confirmed.png",tag:"payment-confirmed-".concat(n),requireInteraction:!1,vibrate:this.vibrationPatterns.success,data:{type:"payment_confirmed",therapistName:a,amount:s,bookingId:n,url:"/admin/bookings/".concat(n)},actions:[{action:"view_booking",title:"ðŸ“‹ View Booking",icon:"/icons/booking.png"},{action:"send_review",title:"â­ Send Review Link",icon:"/icons/star.png"}]})}async notifySystemAlert(a,s,n,i){const l={success:{icon:"/icons/success.png",vibrate:this.vibrationPatterns.success,requireInteraction:!1},warning:{icon:"/icons/warning.png",vibrate:this.vibrationPatterns.payment,requireInteraction:!0},error:{icon:"/icons/error.png",vibrate:this.vibrationPatterns.error,requireInteraction:!0},info:{icon:"/icons/info.png",vibrate:this.vibrationPatterns.chat,requireInteraction:!1}}[a];await this.showNotification({title:s,body:n,icon:l.icon,tag:"system-".concat(a,"-").concat(Date.now()),requireInteraction:l.requireInteraction,vibrate:l.vibrate,data:{type:"system_".concat(a),url:i},actions:i?[{action:"view",title:"ðŸ‘€ View",icon:"/icons/view.png"},{action:"dismiss",title:"Dismiss"}]:[{action:"dismiss",title:"Got it!"}]})}extractImageFromMessage(a){const s=/(https?:\/\/.*\.(?:png|jpg|jpeg|gif|webp))/i,n=a.match(s);return n?n[0]:void 0}async clearNotifications(a){if(!this.registration)return;(await this.registration.getNotifications({tag:a})).forEach(n=>n.close())}getNotificationHistory(a=50){const s=[];for(let n=0;n<localStorage.length;n++){const i=localStorage.key(n);if(i!=null&&i.startsWith("notification_"))try{const r=JSON.parse(localStorage.getItem(i)||"");s.push(r)}catch{}}return s.sort((n,i)=>i.timestamp-n.timestamp).slice(0,a)}async scheduleNotification(a,s){setTimeout(async()=>{await this.showNotification(a)},s)}async sendBatchNotifications(a,s=1e3){for(let n=0;n<a.length;n++)await this.showNotification(a[n]),n<a.length-1&&await new Promise(i=>setTimeout(i,s))}isSupported(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window}getPermissionStatus(){return this.permission}getNotificationStats(){const a=this.getNotificationHistory(),s={totalSent:a.length,byType:{},byDay:{},clickRate:0};return a.forEach(n=>{const i=n.type||"unknown";s.byType[i]=(s.byType[i]||0)+1;const r=new Date(n.timestamp).toDateString();s.byDay[r]=(s.byDay[r]||0)+1}),s}urlBase64ToUint8Array(a){const s="=".repeat((4-a.length%4)%4),n=(a+s).replace(/-/g,"+").replace(/_/g,"/"),i=window.atob(n),r=new Uint8Array(i.length);for(let l=0;l<i.length;++l)r[l]=i.charCodeAt(l);return r}}const Un=new _u;class Lu{async trackBookingAcceptance(a){const s=[];let n,i;const r=Math.round(a.serviceAmount*.3),l=new Date(Date.now()+300*60*1e3).toISOString();try{n=(await ai.createCommissionRecord(a.providerId,a.providerName,a.bookingId,a.acceptedAt,a.scheduledDate,a.serviceAmount,a.customerName||"Customer",a.serviceType||"Massage Service",a.serviceDuration||60)).$id}catch(g){const m="Failed to create commission record: ".concat(g instanceof Error?g.message:"Unknown error");s.push(m)}try{i=(await ec.notifyNewCommission({bookingId:a.bookingId,bookingType:a.bookingType,bookingDate:a.bookingDate,scheduledDate:a.scheduledDate},{therapistId:a.providerId,therapistName:a.providerName},{customerId:a.customerId,customerName:a.customerName},{serviceAmount:a.serviceAmount,commissionAmount:r,commissionRate:30,paymentDeadline:l})).$id}catch(g){const m="CRITICAL: Failed to notify admin: ".concat(g instanceof Error?g.message:"Unknown error");s.push(m),await this.emergencyAdminAlert(a,g instanceof Error?g.message:"Unknown error")}return await this.createAuditTrail(a,{commissionId:n,adminNotificationId:i,errors:s,timestamp:new Date().toISOString()}),{success:s.length===0,commissionId:n,adminNotificationId:i,errors:s}}async emergencyAdminAlert(a,s){}async createAuditTrail(a,s){try{const n={bookingId:a.bookingId,bookingType:a.bookingType,providerType:a.providerType,providerId:a.providerId,providerName:a.providerName,serviceAmount:a.serviceAmount,commissionAmount:Math.round(a.serviceAmount*.3),commissionRecordCreated:!!s.commissionId,commissionRecordId:s.commissionId,adminNotificationSent:!!s.adminNotificationId,adminNotificationId:s.adminNotificationId,success:s.errors.length===0,errorCount:s.errors.length,errors:s.errors,bookingAcceptedAt:a.acceptedAt,processedAt:s.timestamp}}catch{}}async healthCheck(){const a={},s=[];try{a.commissionService=!0}catch(i){a.commissionService=!1,s.push("Commission service check failed: ".concat(i))}try{a.adminNotificationService=!0}catch(i){a.adminNotificationService=!1,s.push("Admin notification service check failed: ".concat(i))}return{healthy:Object.values(a).every(i=>i===!0),checks:a,errors:s}}}const Ru=new Lu;async function Mu(t){return Ru.trackBookingAcceptance(t)}const Bu=({therapist:t,onBack:a,onNavigate:s,onLogout:n})=>{const[r,l]=o.useState("bookings"),[d,g]=o.useState([]),[m,x]=o.useState(!0),[v,j]=o.useState("all"),[I,p]=o.useState(""),[R,w]=o.useState(!1),[P,D]=o.useState(null),[L,O]=o.useState(!1),[H,S]=o.useState(!1),k={en:{title:"Bookings & Schedule",subtitle:"Manage appointments and availability",bookings:"Bookings",schedule:"My Schedule",all:"All",received:"Received",scheduled:"Scheduled",completed:"Completed",earnings:"Earnings",pendingApproval:"Pending approval",confirmedBookings:"Confirmed bookings",finishedSessions:"Finished sessions",loadingBookings:"Loading bookings...",pleaseWait:"Please wait",noBookings:"No bookings found",adjustSearch:"Try adjusting your search",searchPlaceholder:"Search by name, service, or location",date:"Date",time:"Time",service:"Service",duration:"Duration",location:"Location",customer:"Customer",phone:"Phone",price:"Price",status:"Status",notes:"Notes",minutes:"minutes",accept:"Accept",decline:"Decline",openChat:"Open Chat",pending:"Pending",confirmed:"Confirmed",cancelled:"Cancelled",scheduledBooking:"Scheduled Booking",depositRequired:"30% Deposit Required",depositPaid:"PAID",depositUnpaid:"UNPAID",paymentProofUploaded:"Payment Proof Uploaded",viewProof:"View Proof",waitingPayment:"Waiting for Customer Payment"},id:{title:"Booking & Jadwal",subtitle:"Kelola janji temu dan ketersediaan",bookings:"Booking",schedule:"Jadwal Saya",all:"Semua",received:"Diterima",scheduled:"Terjadwal",completed:"Selesai",earnings:"Pendapatan",pendingApproval:"Menunggu persetujuan",confirmedBookings:"Booking terkonfirmasi",finishedSessions:"Sesi selesai",loadingBookings:"Memuat booking...",pleaseWait:"Mohon tunggu",noBookings:"Tidak ada booking ditemukan",adjustSearch:"Coba sesuaikan pencarian Anda",searchPlaceholder:"Cari berdasarkan nama, layanan, atau lokasi",date:"Tanggal",time:"Waktu",service:"Layanan",duration:"Durasi",location:"Lokasi",customer:"Pelanggan",phone:"Telepon",price:"Harga",status:"Status",notes:"Catatan",minutes:"menit",accept:"Terima",decline:"Tolak",openChat:"Buka Chat",pending:"Menunggu",confirmed:"Dikonfirmasi",cancelled:"Dibatalkan",scheduledBooking:"Booking Terjadwal",depositRequired:"Butuh Deposit 30%",depositPaid:"LUNAS",depositUnpaid:"BELUM BAYAR",paymentProofUploaded:"Bukti Pembayaran Terupload",viewProof:"Lihat Bukti",waitingPayment:"Menunggu Pembayaran Pelanggan"}}.id;o.useEffect(()=>{b(),F();let _=null;return(async()=>{try{_=(await z(async()=>{const{default:J}=await import("./route-therapist.DVVqC6AH.js").then(Z=>Z.by);return{default:J}},__vite__mapDeps([0,1,2,3,4,5,6]))).default.subscribeToProviderBookings(t.$id,J=>{Ke("ðŸ”” [MAINâ†’DASHBOARD] New booking notification received:",J),Ke("ðŸ”„ [INTEGRATION STATUS] Chat room available:",!!J.chatRoomId),Ke("ðŸ“¡ [REAL-TIME] Dashboard successfully connected to main app booking flow");try{const Z=new Audio("/sounds/booking-notification.mp3");Z.volume=.8,Z.play().catch(me=>Js("Failed to play booking sound:",me))}catch(Z){Js("Audio playback error:",Z)}if("Notification"in window&&Notification.permission==="granted"){const Z=!!J.chatRoomId;new Notification("New Booking Request! ðŸŽ‰",{body:"".concat(J.userName||"Customer"," requested ").concat(J.service," min massage").concat(Z?" (Chat Available)":""),icon:"/icon-192.png",badge:"/icon-192.png",tag:"booking-"+J.$id})}g(Z=>[J,...Z])})}catch{}})(),()=>{_&&_()}},[t]);const b=async()=>{x(!0);try{const q=(await(await z(async()=>{const{default:J}=await import("./route-therapist.DVVqC6AH.js").then(Z=>Z.by);return{default:J}},__vite__mapDeps([0,1,2,3,4,5,6]))).default.getProviderBookings(t.$id)).map(J=>{const Z={$id:J.$id,customerName:J.userName||J.customerName||"Unknown Customer",customerPhone:J.userPhone||J.customerPhone||"",serviceType:J.service||J.serviceType||"Massage Service",duration:J.duration||60,price:J.totalAmount||J.price||0,location:J.location||"",date:J.date?new Date(J.date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],time:J.time||"00:00",status:J.status||"pending",createdAt:J.$createdAt||new Date().toISOString(),notes:J.notes||"",customerId:J.userId||J.customerId,isScheduled:J.bookingType==="scheduled"||!1,depositRequired:J.depositRequired||!1,depositAmount:J.depositAmount||0,depositPaid:J.depositPaid||!1,depositStatus:J.depositStatus||"pending_approval",paymentProofUrl:J.paymentProofUrl||"",paymentProofUploadedAt:J.paymentProofUploadedAt||"",depositNotes:J.depositNotes||""};return y(J.$id).catch(me=>{Js("Communication setup check failed (non-critical):",me)}),Z});g(q),Ke("âœ… Loaded",q.length,"real bookings for therapist",t.$id)}catch{g([])}finally{x(!1)}},y=async _=>{try{const{databases:$,APPWRITE_CONFIG:q,Query:J}=await z(async()=>{const{databases:Fe,APPWRITE_CONFIG:ve,Query:re}=await import("./route-therapist.DVVqC6AH.js").then(Oe=>Oe.br);return{databases:Fe,APPWRITE_CONFIG:ve,Query:re}},__vite__mapDeps([0,1,2,3,4,5,6]));(await $.listDocuments(q.databaseId,q.collections.chat_rooms||"chat_rooms",[J.equal("bookingId",_)])).documents.length>0||(Js("âš ï¸ Booking ".concat(_," has NO chat room - communication may be broken")),T(_))}catch{}},T=_=>{const $="ðŸ“‹ Booking terkonfirmasi. Setup komunikasi sedang diproses â€” mohon tunggu sebentar.";g(q=>q.map(J=>J.$id===_?{...J,notes:(J.notes?J.notes+"\n\n":"")+$}:J))},F=async()=>{try{const _=(t==null?void 0:t.bankAccountNumber)&&(t==null?void 0:t.bankAccountName)&&(t==null?void 0:t.bankName);O(!!_)}catch{O(!1)}},U=async _=>{const $=d.find(q=>q.$id===_);if($!=null&&$.isScheduled&&!L){S(!0);return}if($!=null&&$.isScheduled&&($!=null&&$.depositRequired)&&!($!=null&&$.depositPaid)){Or("Booking ini memerlukan deposit ".concat(tc,"%. Pelanggan harus membayar deposit sebelum Anda dapat menerima."));return}if($!=null&&$.isScheduled&&($!=null&&$.depositRequired)&&($!=null&&$.depositPaid)&&($==null?void 0:$.depositStatus)==="pending_approval"){Or("Silakan tinjau dan setujui bukti deposit terlebih dahulu sebelum menerima booking ini.");return}try{const{simpleBookingService:q}=await z(async()=>{const{simpleBookingService:me}=await import("./route-therapist.DVVqC6AH.js").then(Fe=>Fe.bv);return{simpleBookingService:me}},__vite__mapDeps([0,1,2,3,4,5,6])),J=await q.updateStatus(_,"confirmed",{isScheduled:$==null?void 0:$.isScheduled,bankName:t==null?void 0:t.bankName,accountName:t==null?void 0:t.accountName,accountNumber:t==null?void 0:t.accountNumber});if(!J.success){At(J.error||"Failed to accept booking");return}Ke("Accepting booking:",_),(await Mu({bookingId:_,bookingType:$!=null&&$.isScheduled?"scheduled":"book_now",providerType:"therapist",providerId:t.$id,providerName:t.name,customerId:$==null?void 0:$.customerId,customerName:($==null?void 0:$.customerName)||"Customer",serviceAmount:($==null?void 0:$.price)||0,serviceDuration:($==null?void 0:$.duration)||60,serviceType:($==null?void 0:$.serviceType)||"Massage Service",bookingDate:new Date().toISOString(),scheduledDate:$!=null&&$.isScheduled?$==null?void 0:$.date:void 0,acceptedAt:new Date().toISOString(),location:$==null?void 0:$.location})).success,g(me=>me.map(Fe=>Fe.$id===_?{...Fe,status:"confirmed"}:Fe)),Ke("âœ… Booking accepted and customer notified")}catch{At("Failed to accept booking. Please try again.")}},B=async _=>{try{Ke("ðŸ”„ Cancelling booking with commission reversal:",_);const $=prompt("Cancellation reason (required):");if(!$){Ke("Cancellation aborted - no reason provided");return}const{bookingService:q}=await z(async()=>{const{bookingService:Z}=await import("./route-therapist.DVVqC6AH.js").then(me=>me.bx);return{bookingService:Z}},__vite__mapDeps([0,1,2,3,4,5,6])),J=await q.cancelBookingAndReverseCommission(_,t.$id,$,"therapist");g(Z=>Z.map(me=>me.$id===_?{...me,status:"cancelled"}:me)),Ke("âœ… Booking cancelled"),J.commission&&J.commission.status==="reversed"&&Ke("âœ… Commission reversed:",J.commission.$id)}catch($){At($.message||"Failed to cancel booking. Please try again.")}},f=async _=>{try{const $=d.find(q=>q.$id===_);if(!$)return;g(q=>q.map(J=>J.$id===_?{...J,depositStatus:"approved",status:"confirmed"}:J)),await Un.notifyDepositApproved(t.name,_,$.depositAmount||0),Ke("âœ… Deposit approved and customer notified")}catch{}},A=async(_,$)=>{try{const q=d.find(J=>J.$id===_);if(!q)return;g(J=>J.map(Z=>Z.$id===_?{...Z,depositStatus:"rejected"}:Z)),await Un.notifyDepositRejected(t.name,_,q.depositAmount||0,$),Ke("âŒ Deposit rejected and customer notified")}catch{}},c=async(_,$)=>{try{if(!d.find(J=>J.$id===_))return;await Un.notifyDepositReuploadRequested(t.name,_,$),Ke("ðŸ”„ Re-upload requested and customer notified")}catch{}},h=async _=>{try{const{bookingService:$}=await z(async()=>{const{bookingService:q}=await import("./route-therapist.DVVqC6AH.js").then(J=>J.bx);return{bookingService:q}},__vite__mapDeps([0,1,2,3,4,5,6]));await $.updateStatus(_,"Completed"),g(q=>q.map(J=>J.$id===_?{...J,status:"completed"}:J))}catch{At("Failed to complete booking. Please try again.")}},C=()=>{let _=d;return v==="received"?_=_.filter($=>$.status==="pending"):v==="scheduled"?_=_.filter($=>$.status==="confirmed"):v==="completed"&&(_=_.filter($=>$.status==="completed")),I&&(_=_.filter($=>$.customerName.toLowerCase().includes(I.toLowerCase())||$.serviceType.toLowerCase().includes(I.toLowerCase())||$.location.toLowerCase().includes(I.toLowerCase()))),_},M=_=>{const $={pending:"bg-amber-50 text-amber-800 border border-amber-200",confirmed:"bg-blue-50 text-blue-800 border border-blue-200",completed:"bg-green-50 text-green-800 border border-green-200",cancelled:"bg-red-50 text-red-800 border border-red-200"};return $[_]||$.pending},E={received:d.filter(_=>_.status==="pending").length,scheduled:d.filter(_=>_.status==="confirmed").length,completed:d.filter(_=>_.status==="completed").length,totalEarnings:d.filter(_=>_.status==="completed").reduce((_,$)=>_+$.price,0)},W=C(),X=_=>{s&&s(_)};return e.jsxs(e.Fragment,{children:[e.jsx(Rt,{title:k.title,subtitle:k.subtitle,onBackToStatus:a,onNavigate:X,therapist:t,currentPage:"bookings",language:"id",onLogout:n,icon:e.jsx(dt,{className:"w-6 h-6 text-orange-600"}),children:e.jsxs("div",{className:"bg-gray-50 min-h-full",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:[e.jsxs("div",{className:"flex gap-2 p-4 border-b border-black bg-white",children:[e.jsxs("button",{onClick:()=>l("bookings"),className:"flex items-center gap-2 py-2.5 px-4 rounded-lg border text-sm font-medium transition-colors ".concat(r==="bookings"?"bg-orange-100 border-orange-200 text-orange-800":"bg-orange-50/80 border-orange-100 text-gray-700 hover:bg-orange-100 hover:text-orange-800"),children:[e.jsx(dt,{className:"w-4 h-4"}),k.bookings]}),e.jsxs("button",{onClick:()=>l("schedule"),className:"flex items-center gap-2 py-2.5 px-4 rounded-lg border text-sm font-medium transition-colors ".concat(r==="schedule"?"bg-orange-100 border-orange-200 text-orange-800":"bg-orange-50/80 border-orange-100 text-gray-700 hover:bg-orange-100 hover:text-orange-800"),children:[e.jsx(ze,{className:"w-4 h-4"}),k.schedule]})]}),r==="schedule"?e.jsx(rl,{therapist:t,onBack:()=>l("bookings")}):e.jsxs("main",{className:"w-full max-w-2xl mx-auto px-4 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("section",{className:"bg-white border border-gray-200 rounded-lg p-4","aria-labelledby":"bookings-panduan-heading",children:[e.jsx("h2",{id:"bookings-panduan-heading",className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Panduan"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:ys.manageBookings.title}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:ys.manageBookings.content}),ys.manageBookings.benefits&&ys.manageBookings.benefits.length>0&&e.jsx("ul",{className:"text-xs text-gray-600 space-y-0.5",children:ys.manageBookings.benefits.map((_,$)=>e.jsxs("li",{children:["â€¢ ",_]},$))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:e.jsx(ze,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:k.received})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E.received}),e.jsx("p",{className:"text-xs text-gray-500",children:k.pendingApproval})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:e.jsx(dt,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:k.scheduled})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E.scheduled}),e.jsx("p",{className:"text-xs text-gray-500",children:k.confirmedBookings})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:e.jsx($e,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:k.completed})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E.completed}),e.jsx("p",{className:"text-xs text-gray-500",children:k.finishedSessions})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:e.jsx(ii,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:k.earnings})]}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["Rp ",E.totalEarnings.toLocaleString("id-ID")]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total completed"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("ul",{className:"flex flex-wrap gap-2 list-none m-0 p-0 mb-4",children:["all","received","scheduled","completed"].map(_=>e.jsx("li",{children:e.jsx("button",{onClick:()=>j(_),className:"py-2.5 px-3 rounded-lg border text-sm font-medium transition-colors ".concat(v===_?"bg-orange-100 border-orange-200 text-orange-800":"bg-orange-50/80 border-orange-100 text-gray-700 hover:bg-orange-100 hover:text-orange-800"),children:k[_]})},_))}),e.jsxs("div",{className:"relative",children:[e.jsx(wn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:I,onChange:_=>p(_.target.value),placeholder:k.searchPlaceholder,className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-50 focus:outline-none text-sm bg-white"})]})]}),m?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-gray-200 border-t-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 font-medium text-sm",children:k.loadingBookings}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:k.pleaseWait})]}):W.length===0?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg bg-orange-500 flex items-center justify-center mx-auto mb-4",children:e.jsx(dt,{className:"w-8 h-8 text-white"})}),e.jsx("p",{className:"text-gray-800 font-semibold text-base mb-1",children:k.noBookings}),e.jsx("p",{className:"text-gray-500 text-sm",children:I?k.adjustSearch:"New bookings will appear here"})]}):e.jsx("ul",{className:"space-y-4 list-none m-0 p-0",children:W.map(_=>{var $;return e.jsx("li",{children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:bg-orange-50/50 hover:border-orange-100 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(Ct,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-base",children:_.customerName}),e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(Gt,{className:"w-3 h-3"}),"Use in-app chat to contact"]})]})]}),e.jsx("span",{className:"px-3 py-1 rounded-lg text-xs font-semibold uppercase ".concat(M(_.status)),children:_.status})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-orange-500 flex items-center justify-center flex-shrink-0",children:e.jsx(dt,{className:"w-3.5 h-3.5 text-white"})}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("strong",{className:"text-gray-900 font-semibold",children:"Date:"})," ",new Date(_.date).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-orange-500 flex items-center justify-center flex-shrink-0",children:e.jsx(ze,{className:"w-3.5 h-3.5 text-white"})}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("strong",{className:"text-gray-900 font-medium",children:"Time:"})," ",_.time]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-orange-500 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-sm",children:"ðŸ’†"})}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("strong",{className:"text-gray-900 font-medium",children:"Service:"})," ",_.serviceType]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-orange-500 flex items-center justify-center flex-shrink-0",children:e.jsx(ze,{className:"w-3.5 h-3.5 text-white"})}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("strong",{className:"text-gray-900 font-medium",children:"Duration:"})," ",_.duration," min"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-orange-500 flex items-center justify-center flex-shrink-0",children:e.jsx(Pa,{className:"w-3.5 h-3.5 text-white"})}),e.jsxs("span",{className:"text-gray-700 truncate",children:[e.jsx("strong",{className:"text-gray-900 font-medium",children:"Location:"})," ",_.location]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-orange-500 flex items-center justify-center flex-shrink-0",children:e.jsx(ii,{className:"w-3.5 h-3.5 text-white"})}),e.jsxs("span",{className:"text-gray-700",children:[e.jsx("strong",{className:"text-gray-900 font-medium",children:"Price:"})," Rp ",_.price.toLocaleString("id-ID")]})]})]}),_.notes&&e.jsx("div",{className:"mb-4 p-3 bg-orange-50/80 border border-orange-100 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-800 font-medium",children:[e.jsx("strong",{children:"ðŸ’¬ Notes:"})," ",_.notes]})}),_.isScheduled&&e.jsxs("div",{className:"mb-4 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-orange-500 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-sm",children:"ðŸ“…"})}),e.jsx("h4",{className:"font-semibold text-orange-900 text-sm",children:k.scheduledBooking})]}),_.depositRequired&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-white rounded-lg border border-orange-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-orange-800",children:k.depositRequired}),e.jsxs("p",{className:"text-xs text-orange-600",children:["Rp ",($=_.depositAmount)==null?void 0:$.toLocaleString("id-ID")]})]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold ".concat(_.depositPaid?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:_.depositPaid?"âœ… ".concat(k.depositPaid):"âŒ ".concat(k.depositUnpaid)})]}),_.depositPaid&&_.paymentProofUrl&&e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded bg-green-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm",children:"ðŸ“„"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-green-800",children:k.paymentProofUploaded}),e.jsx("p",{className:"text-xs text-green-600",children:_.paymentProofUploadedAt&&new Date(_.paymentProofUploadedAt).toLocaleString("id-ID")})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>window.open(_.paymentProofUrl,"_blank"),className:"px-3 py-1.5 text-xs bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[k.viewProof," ðŸ‘ï¸"]}),e.jsx("span",{className:"text-xs text-green-700",children:"Pelanggan sudah bayar deposit - booking siap diterima"})]})]}),!_.depositPaid&&e.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded bg-yellow-500 flex items-center justify-center",children:e.jsx("span",{className:"text-sm",children:"â³"})}),e.jsx("p",{className:"text-sm font-semibold text-yellow-800",children:k.waitingPayment})]}),e.jsx("p",{className:"text-xs text-yellow-700",children:"Pelanggan harus membayar deposit 30% dan upload bukti pembayaran sebelum Anda dapat menerima booking ini."})]})]})]}),_.isScheduled&&_.depositRequired&&_.depositPaid&&_.depositStatus==="pending_approval"&&e.jsx(Du,{booking:_,onApproveDeposit:()=>f(_.$id),onRejectDeposit:q=>A(_.$id,q),onRequestReupload:q=>c(_.$id,q),language:"id"}),e.jsxs("div",{className:"flex gap-2",children:[_.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>U(_.$id),className:"flex-1 flex items-center justify-center gap-2 py-2.5 px-4 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium text-sm transition-colors",children:[e.jsx($e,{className:"w-4 h-4"}),"Accept"]}),e.jsxs("button",{onClick:()=>B(_.$id),className:"flex-1 flex items-center justify-center gap-2 py-2.5 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium text-sm transition-colors",children:[e.jsx(Ot,{className:"w-4 h-4"}),"Reject"]})]}),_.status==="confirmed"&&e.jsxs("div",{className:"w-full space-y-3",children:[e.jsx(Vc,{bookingId:_.$id,therapistId:(t==null?void 0:t.$id)||"",therapistName:(t==null?void 0:t.name)||"Therapist",customerName:_.customerName,customerPhone:_.customerPhone,customerAddress:_.location,isBookingAccepted:!0,onStatusUpdate:q=>{}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{D(_),w(!0)},className:"flex-1 flex items-center justify-center gap-2 py-2.5 px-4 bg-orange-600 text-white rounded-lg hover:bg-orange-700 font-medium text-sm transition-colors",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Chat Customer"]}),e.jsxs("button",{onClick:()=>h(_.$id),className:"flex-1 flex items-center justify-center gap-2 py-2.5 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm transition-colors",children:[e.jsx($e,{className:"w-4 h-4"}),"Mark Complete"]})]})]}),_.status==="completed"&&e.jsxs("button",{onClick:()=>{D(_),w(!0)},className:"flex-1 flex items-center justify-center gap-2 py-2.5 px-4 bg-orange-50 border border-orange-200 text-orange-800 rounded-lg hover:bg-orange-100 font-medium text-sm transition-colors",children:[e.jsx(Gt,{className:"w-4 h-4"}),"View Chat"]})]})]})},_.$id)})})]}),H&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-5",children:[e.jsx("div",{className:"w-14 h-14 bg-orange-500 rounded-lg flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-2xl",children:"ðŸ¦"})}),e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-2",children:"Bank Details Required"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Untuk menerima booking terjadwal, Anda harus melengkapi informasi rekening bank terlebih dahulu."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>S(!1),className:"flex-1 py-2.5 px-4 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 font-medium text-sm transition-colors",children:"Batal"}),e.jsx("button",{onClick:()=>{S(!1),s==null||s("bank-details")},className:"flex-1 py-2.5 px-4 bg-orange-600 text-white rounded-lg hover:bg-orange-700 font-medium text-sm transition-colors",children:"Tambah Rekening"})]})]})}),R&&P&&e.jsx(_o,{providerId:t.$id,providerRole:"therapist",providerName:t.name,customerId:P.customerId||"customer-"+P.$id,customerName:P.customerName,bookingId:P.$id,bookingDetails:{date:P.date,duration:P.duration,price:P.price,location:P.customerLocation,latitude:P.customerLatitude,longitude:P.customerLongitude},isOpen:R,onClose:()=>{w(!1),D(null)}})]})]})}),e.jsx(Es,{userId:"therapist",userName:"Therapist",userRole:"therapist"})]})},Fn={async getPeakBookingHours(t,a=30){try{if(!Pe.collections.bookings)throw new Error("bookings collection ID is empty - cannot get peak hours");const s=new Date;s.setDate(s.getDate()-a);const n=await je.listDocuments(Pe.databaseId,Pe.collections.bookings,[ae.equal("providerId",t),ae.equal("providerType","therapist"),ae.greaterThan("bookingDate",s.toISOString()),ae.limit(1e3)]),i={"9:00 - 11:00 AM":0,"11:00 - 1:00 PM":0,"2:00 - 4:00 PM":0,"4:00 - 6:00 PM":0,"6:00 - 8:00 PM":0};n.documents.forEach(l=>{const d=l.startTime||"",g=parseInt(d.split(":")[0]);g>=9&&g<11?i["9:00 - 11:00 AM"]++:g>=11&&g<13?i["11:00 - 1:00 PM"]++:g>=14&&g<16?i["2:00 - 4:00 PM"]++:g>=16&&g<18?i["4:00 - 6:00 PM"]++:g>=18&&g<20&&i["6:00 - 8:00 PM"]++});const r=Math.max(...Object.values(i),1);return Object.entries(i).map(([l,d])=>({hour:l,bookings:d,percentage:Math.round(d/r*100)})).sort((l,d)=>d.bookings-l.bookings)}catch{return[{hour:"9:00 - 11:00 AM",bookings:12,percentage:85},{hour:"2:00 - 4:00 PM",bookings:10,percentage:70},{hour:"5:00 - 7:00 PM",bookings:8,percentage:55},{hour:"11:00 - 1:00 PM",bookings:5,percentage:35}]}},async getBusiestDays(t,a=30){try{if(!Pe.collections.bookings)throw new Error("bookings collection ID is empty - cannot get busiest days");const s=new Date;s.setDate(s.getDate()-a);const n=await je.listDocuments(Pe.databaseId,Pe.collections.bookings,[ae.equal("providerId",t),ae.equal("providerType","therapist"),ae.greaterThan("bookingDate",s.toISOString()),ae.limit(1e3)]),i={Mon:0,Tue:0,Wed:0,Thu:0,Fri:0,Sat:0,Sun:0},r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];n.documents.forEach(d=>{const g=new Date(d.bookingDate),m=r[g.getDay()];i.hasOwnProperty(m)&&i[m]++});const l=Math.max(...Object.values(i),1);return["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(d=>({day:d,bookingCount:i[d],intensity:Math.round(i[d]/l*100)}))}catch{return[{day:"Mon",intensity:90,bookingCount:18},{day:"Tue",intensity:75,bookingCount:15},{day:"Wed",intensity:80,bookingCount:16},{day:"Thu",intensity:85,bookingCount:17},{day:"Fri",intensity:95,bookingCount:19},{day:"Sat",intensity:60,bookingCount:12},{day:"Sun",intensity:40,bookingCount:8}]}},async getDayTimeSlots(t,a,s=30){try{if(!Pe.collections.bookings)throw new Error("bookings collection ID is empty - cannot get day time slots");const n=new Date;n.setDate(n.getDate()-s);const i=await je.listDocuments(Pe.databaseId,Pe.collections.bookings,[ae.equal("providerId",t),ae.equal("providerType","therapist"),ae.greaterThan("bookingDate",n.toISOString()),ae.limit(1e3)]),l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].indexOf(a),d=i.documents.filter(x=>new Date(x.bookingDate).getDay()===l),g={"9:00 - 11:00 AM":0,"11:00 - 1:00 PM":0,"2:00 - 4:00 PM":0,"4:00 - 6:00 PM":0,"6:00 - 8:00 PM":0};d.forEach(x=>{const v=x.startTime||"",j=parseInt(v.split(":")[0]);j>=9&&j<11?g["9:00 - 11:00 AM"]++:j>=11&&j<13?g["11:00 - 1:00 PM"]++:j>=14&&j<16?g["2:00 - 4:00 PM"]++:j>=16&&j<18?g["4:00 - 6:00 PM"]++:j>=18&&j<20&&g["6:00 - 8:00 PM"]++});const m=Math.max(...Object.values(g),1);return Object.entries(g).map(([x,v])=>({time:x,bookings:v,percentage:Math.round(v/m*100)}))}catch{return[{time:"9:00 - 11:00 AM",bookings:8,percentage:75},{time:"11:00 - 1:00 PM",bookings:6,percentage:55},{time:"2:00 - 4:00 PM",bookings:10,percentage:85},{time:"4:00 - 6:00 PM",bookings:7,percentage:65},{time:"6:00 - 8:00 PM",bookings:5,percentage:45}]}},async getAnalyticsSummary(t,a=30){try{if(!Pe.collections.bookings)throw new Error("bookings collection ID is empty - cannot get analytics summary");const s=new Date;s.setDate(s.getDate()-a);const i=(await je.listDocuments(Pe.databaseId,Pe.collections.bookings,[ae.equal("providerId",t),ae.equal("providerType","therapist"),ae.greaterThan("bookingDate",s.toISOString()),ae.limit(1e3)])).documents.length,r=i/a;return{totalBookings:i,avgPerDay:Math.round(r*10)/10,period:"Last ".concat(a," days")}}catch{return{totalBookings:0,avgPerDay:0,period:"Last ".concat(a," days")}}}},$u=({therapist:t,onBack:a,onNavigate:s,onLogout:n,language:i="id"})=>{const[r,l]=o.useState([]),[d,g]=o.useState([]),[m,x]=o.useState(!0),[v,j]=o.useState(null),[I,p]=o.useState([]),[R,w]=o.useState([]),[P,D]=o.useState([]),L=(t==null?void 0:t.membershipTier)||"free",H={en:{title:"Earnings & Payments",subtitle:"Track your income and payment history",totalEarnings:"Total Earnings",totalPaid:"Total Paid",totalPending:"Total Pending",thisMonth:"This month",processed:"Processed payments",awaitingPayout:"Awaiting payout",bestTimesAnalytics:"Best Times Analytics",premiumFeature:"Premium Feature",peakBookingHours:"Peak booking hours chart",busyDaysHeatmap:"Busy days heatmap",customerDemographics:"Customer demographics",optimalSchedule:"Optimal schedule recommendations",upgradeToPremium:"Upgrade to Premium",to:"to",bookingCount:"booking(s)",averageBooking:"average/booking",clickToView:"Click day to view time slots",noPayments:"No payments found",newPayments:"New payments will appear here",loadingPayments:"Loading payment history...",pleaseWait:"Please wait",status:"Status",customer:"Customer",amount:"Amount",commission:"Commission",netEarning:"Net Earning",date:"Date",method:"Method",paid:"Paid",pending:"Pending",processing:"Processing"},id:{title:"Pendapatan & Pembayaran",subtitle:"Lacak pendapatan dan riwayat pembayaran Anda",totalEarnings:"Total Pendapatan",totalPaid:"Total Dibayar",totalPending:"Total Pending",lostEarnings:"Kehilangan Pendapatan",missedBookings:"Booking Terlewat",completedBookings:"Booking Selesai",thisMonth:"Bulan ini",processed:"Pembayaran diproses",awaitingPayout:"Menunggu pembayaran",serviceBreakdown:"Rincian per Durasi",bookNowEarnings:"Book Now",scheduledEarnings:"Terjadwal",expired:"Kedaluwarsa (5 menit)",declined:"Ditolak",cancelled:"Dibatalkan",bestTimesAnalytics:"Analitik Waktu Terbaik",premiumFeature:"Fitur Premium",peakBookingHours:"Grafik jam booking puncak",busyDaysHeatmap:"Heatmap hari sibuk",customerDemographics:"Demografi pelanggan",optimalSchedule:"Rekomendasi jadwal optimal",upgradeToPremium:"Upgrade ke Premium",to:"sampai",bookingCount:"booking",averageBooking:"rata-rata/booking",clickToView:"Klik hari untuk lihat slot waktu",noPayments:"Tidak ada pembayaran ditemukan",newPayments:"Pembayaran baru akan muncul di sini",loadingPayments:"Memuat riwayat pembayaran...",pleaseWait:"Mohon tunggu",status:"Status",customer:"Pelanggan",amount:"Jumlah",commission:"Komisi",netEarning:"Pendapatan Bersih",date:"Tanggal",method:"Metode",paid:"Dibayar",pending:"Pending",processing:"Diproses"}}[i];o.useEffect(()=>{k(),b(),S()},[t]),o.useEffect(()=>{v&&N()},[v,t]);const S=async()=>{if(t!=null&&t.$id)try{const[h,C]=await Promise.all([Fn.getPeakBookingHours(t.$id).catch(M=>[]),Fn.getBusiestDays(t.$id).catch(M=>[])]);p(h),w(C),h.length>0||C.length>0}catch{p([]),w([])}},N=async()=>{if(!(!(t!=null&&t.$id)||!v))try{const h=await Fn.getDayTimeSlots(t.$id,v);D(h)}catch{}},k=async()=>{try{const C=(await ac.getPaymentsByTherapist(t.$id)).map(M=>({$id:M.$id,bookingId:M.bookingId,customerName:M.customerName,amount:M.paymentAmount,adminCommission:Math.round(M.paymentAmount*.3),netEarning:Math.round(M.paymentAmount*.7),status:M.status,date:M.date,paymentMethod:M.paymentMethod||"Cash"}));l(C)}catch{l([])}},b=async()=>{x(!0);try{const h=await sc.getProviderBookings(t.$id);g(h.map(C=>({$id:C.$id,customerName:C.userName||C.customerName||"Unknown",service:C.service||"60",duration:C.duration||60,totalAmount:C.totalAmount||C.price||0,status:C.status||"pending",date:C.date||C.$createdAt,isScheduled:C.isScheduled||!1,depositAmount:C.depositAmount||0,expiresAt:C.expiresAt,createdAt:C.$createdAt})))}catch{g([])}finally{x(!1)}},y=d.filter(h=>h.status==="completed"),T=d.filter(h=>h.status==="expired"),F=d.filter(h=>h.status==="declined"||h.status==="rejected"),U=d.filter(h=>h.status==="cancelled"),B={totalRevenue:y.reduce((h,C)=>h+C.totalAmount,0),netEarnings:y.reduce((h,C)=>h+C.totalAmount*.7,0),adminCommission:y.reduce((h,C)=>h+C.totalAmount*.3,0),lostFromExpired:T.reduce((h,C)=>h+C.totalAmount*.7,0),lostFromDeclined:F.reduce((h,C)=>h+C.totalAmount*.7,0),lostFromCancelled:U.reduce((h,C)=>h+C.totalAmount*.7,0),totalLost:[...T,...F,...U].reduce((h,C)=>h+C.totalAmount*.7,0),completedCount:y.length,expiredCount:T.length,declinedCount:F.length,cancelledCount:U.length,earnings60min:y.filter(h=>h.service==="60").reduce((h,C)=>h+C.totalAmount*.7,0),earnings90min:y.filter(h=>h.service==="90").reduce((h,C)=>h+C.totalAmount*.7,0),earnings120min:y.filter(h=>h.service==="120").reduce((h,C)=>h+C.totalAmount*.7,0),count60min:y.filter(h=>h.service==="60").length,count90min:y.filter(h=>h.service==="90").length,count120min:y.filter(h=>h.service==="120").length,bookNowEarnings:y.filter(h=>!h.isScheduled).reduce((h,C)=>h+C.totalAmount*.7,0),scheduledEarnings:y.filter(h=>h.isScheduled).reduce((h,C)=>h+C.totalAmount*.7,0),bookNowCount:y.filter(h=>!h.isScheduled).length,scheduledCount:y.filter(h=>h.isScheduled).length,monthlyEarnings:y.filter(h=>new Date(h.date).getMonth()===new Date().getMonth()).reduce((h,C)=>h+C.totalAmount*.7,0)};r.filter(h=>h.status==="pending").reduce((h,C)=>h+C.netEarning,0),r.filter(h=>h.status==="pending").reduce((h,C)=>h+C.adminCommission,0),r.filter(h=>h.status==="paid").reduce((h,C)=>h+C.netEarning,0),r.filter(h=>new Date(h.date).getMonth()===new Date().getMonth()).reduce((h,C)=>h+C.netEarning,0);const f=h=>({pending:"bg-amber-50 text-amber-800 border-amber-200",processing:"bg-blue-50 text-blue-800 border-blue-200",paid:"bg-green-50 text-green-800 border-green-200"})[h],A=h=>{switch(h){case"pending":return e.jsx(ze,{className:"w-4 h-4"});case"processing":return e.jsx(Zt,{className:"w-4 h-4"});case"paid":return e.jsx($e,{className:"w-4 h-4"})}},c=h=>{s&&s(h)};return e.jsx(Rt,{title:H.title,subtitle:H.subtitle,onBackToStatus:a,onNavigate:c,therapist:t,currentPage:"earnings",language:i,onLogout:n,icon:e.jsx(ea,{className:"w-6 h-6 text-orange-600"}),children:e.jsx("div",{className:"bg-gray-50 min-h-full",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-4 space-y-4",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:e.jsx($e,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Total Earnings (Completed)"}),e.jsx(Nt,{...Ba.completedEarnings,position:"bottom",size:"sm"})]}),e.jsxs("span",{className:"px-2 py-1 bg-orange-50 text-orange-800 text-xs font-medium rounded-lg border border-orange-200",children:[B.completedCount," bookings"]})]}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["Rp ",B.netEarnings.toLocaleString("id-ID")]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["From Rp ",B.totalRevenue.toLocaleString("id-ID")," (70% after commission)"]})]}),B.totalLost>0&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 border-red-200 bg-red-50/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(Ot,{className:"w-4 h-4 text-red-600"})}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Lost Earnings"}),e.jsx(Nt,{...Ba.lostEarnings,position:"bottom",size:"sm"})]}),e.jsxs("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs font-medium rounded-lg border border-red-200",children:[B.expiredCount+B.declinedCount+B.cancelledCount," missed"]})]}),e.jsxs("p",{className:"text-xl font-bold text-red-700 mb-2",children:["Rp ",B.totalLost.toLocaleString("id-ID")]}),e.jsxs("div",{className:"space-y-1 text-xs text-red-700",children:[B.expiredCount>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"â° Expired:"}),e.jsxs("span",{className:"font-medium",children:["Rp ",B.lostFromExpired.toLocaleString("id-ID")," (",B.expiredCount,")"]})]}),B.declinedCount>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"âŒ Declined:"}),e.jsxs("span",{className:"font-medium",children:["Rp ",B.lostFromDeclined.toLocaleString("id-ID")," (",B.declinedCount,")"]})]}),B.cancelledCount>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ðŸš« Cancelled:"}),e.jsxs("span",{className:"font-medium",children:["Rp ",B.lostFromCancelled.toLocaleString("id-ID")," (",B.cancelledCount,")"]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:e.jsx(ea,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Service Duration Breakdown"}),e.jsx(Nt,{...Ba.serviceBreakdown,position:"bottom",size:"sm"})]}),e.jsxs("ul",{className:"space-y-2 list-none m-0 p-0",children:[e.jsxs("li",{className:"flex justify-between items-center py-2.5 px-3 bg-orange-50/80 rounded-lg border border-orange-100",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"60 minutes"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["Rp ",B.earnings60min.toLocaleString("id-ID")]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[B.count60min," bookings"]})]})]}),e.jsxs("li",{className:"flex justify-between items-center py-2.5 px-3 bg-orange-50/80 rounded-lg border border-orange-100",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"90 minutes"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["Rp ",B.earnings90min.toLocaleString("id-ID")]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[B.count90min," bookings"]})]})]}),e.jsxs("li",{className:"flex justify-between items-center py-2.5 px-3 bg-orange-50/80 rounded-lg border border-orange-100",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"120 minutes"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["Rp ",B.earnings120min.toLocaleString("id-ID")]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[B.count120min," bookings"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:e.jsx(ze,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Book Now"})]}),e.jsxs("p",{className:"text-base font-bold text-gray-900",children:["Rp ",B.bookNowEarnings.toLocaleString("id-ID")]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[B.bookNowCount," bookings"]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:e.jsx(dt,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Scheduled"})]}),e.jsxs("p",{className:"text-base font-bold text-gray-900",children:["Rp ",B.scheduledEarnings.toLocaleString("id-ID")]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[B.scheduledCount," bookings"]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:e.jsx(Zt,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-xs font-medium text-gray-500",children:H.thisMonth}),e.jsx(Nt,{...Ba.monthlyEarnings,position:"bottom",size:"sm"})]}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["Rp ",B.monthlyEarnings.toLocaleString("id-ID")]}),e.jsx("p",{className:"text-xs text-gray-500",children:"From completed bookings"})]}),e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("p",{className:"text-xs text-orange-800 flex-1",children:[e.jsx("span",{className:"font-semibold",children:"âœ… Connected to Appwrite:"})," All earnings calculated from bookings collection in real-time"]}),e.jsx(Nt,{...Ba.dataSource,position:"left",size:"sm"})]})}),L==="free"&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:e.jsx(Vr,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:H.bestTimesAnalytics}),e.jsx("p",{className:"text-xs text-gray-500",children:H.premiumFeature})]})]}),e.jsxs("span",{className:"px-2 py-1 bg-yellow-500 text-white text-xs font-medium rounded-lg flex items-center gap-1",children:[e.jsx(mn,{className:"w-3 h-3"})," Premium"]})]}),e.jsxs("ul",{className:"space-y-1.5 mb-4 list-none m-0 p-0",children:[e.jsxs("li",{className:"flex items-center gap-2 py-2 px-3 bg-orange-50/80 rounded-lg border border-orange-100 text-sm text-gray-700",children:["â€¢ ",H.peakBookingHours]}),e.jsxs("li",{className:"flex items-center gap-2 py-2 px-3 bg-orange-50/80 rounded-lg border border-orange-100 text-sm text-gray-700",children:["â€¢ ",H.busyDaysHeatmap]}),e.jsxs("li",{className:"flex items-center gap-2 py-2 px-3 bg-orange-50/80 rounded-lg border border-orange-100 text-sm text-gray-700",children:["â€¢ ",H.customerDemographics]}),e.jsxs("li",{className:"flex items-center gap-2 py-2 px-3 bg-orange-50/80 rounded-lg border border-orange-100 text-sm text-gray-700",children:["â€¢ ",H.optimalSchedule]})]}),e.jsx("button",{className:"w-full py-2.5 px-4 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-colors",children:H.upgradeToPremium})]}),(L==="premium"||L==="elite"||L==="plus")&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:e.jsx(Vr,{className:"w-4 h-4 text-white"})}),e.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:H.bestTimesAnalytics})]}),e.jsxs("span",{className:"px-2 py-1 bg-yellow-500 text-white text-xs font-medium rounded-lg flex items-center gap-1",children:[e.jsx(mn,{className:"w-3 h-3"})," Premium"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:"Peak Booking Hours"}),e.jsx(Nt,{...Ba.peakHours,position:"bottom",size:"sm"})]}),e.jsx("div",{className:"space-y-2",children:(I.length>0?I:[{hour:"9:00 - 11:00 AM",bookings:12,percentage:85},{hour:"2:00 - 4:00 PM",bookings:10,percentage:70},{hour:"5:00 - 7:00 PM",bookings:8,percentage:55},{hour:"11:00 - 1:00 PM",bookings:5,percentage:35}]).map((h,C)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[e.jsx("span",{className:"font-medium text-gray-700",children:h.hour}),e.jsxs("span",{className:"text-gray-500",children:[h.bookings," bookings"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-orange-600 h-1.5 rounded-full",style:{width:"".concat(h.percentage,"%")}})})]},C))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:"Busiest Days"}),e.jsx(Nt,{...Ba.busiestDays,position:"bottom",size:"sm"})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1.5 mb-4",children:(R.length>0?R:[{day:"Mon",intensity:90},{day:"Tue",intensity:75},{day:"Wed",intensity:80},{day:"Thu",intensity:85},{day:"Fri",intensity:95},{day:"Sat",intensity:60},{day:"Sun",intensity:40}]).map(h=>{const C=h.day,M=v===C;return e.jsxs("button",{onClick:()=>j(M?null:C),className:"text-center transition-colors",children:[e.jsx("div",{className:"rounded-lg p-2 mb-1 ".concat(M?"bg-green-600":"bg-orange-500"),children:e.jsx("span",{className:"text-xs font-bold text-white",children:C})}),e.jsxs("span",{className:"text-xs text-gray-600",children:[h.intensity,"%"]})]},C)})}),v&&e.jsxs("div",{className:"bg-orange-50/80 border border-orange-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 text-sm",children:[v," - Busy Times"]}),e.jsx("div",{className:"space-y-2",children:(P.length>0?P:[{time:"9:00 - 11:00 AM",bookings:8,percentage:75},{time:"11:00 - 1:00 PM",bookings:6,percentage:55},{time:"2:00 - 4:00 PM",bookings:10,percentage:85},{time:"4:00 - 6:00 PM",bookings:7,percentage:65},{time:"6:00 - 8:00 PM",bookings:5,percentage:45}]).map((h,C)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[e.jsx("span",{className:"font-medium text-gray-700",children:h.time}),e.jsxs("span",{className:"text-gray-500",children:[h.bookings," bookings"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-orange-600 h-1.5 rounded-full",style:{width:"".concat(h.percentage,"%")}})})]},C))})]})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[e.jsx("h4",{className:"font-medium text-orange-900 mb-2 text-sm",children:"ðŸ’¡ Recommendations"}),e.jsxs("ul",{className:"space-y-1 text-xs text-orange-800 list-none m-0 p-0",children:[e.jsx("li",{children:"â€¢ Mon-Fri 9AM-4PM shows highest bookings"}),e.jsx("li",{children:"â€¢ Sunday has low demand - ideal rest day"}),e.jsx("li",{children:"â€¢ Friday peaks at 95% - maximize availability"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Payment History"}),m?e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-orange-500 border-t-transparent mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:H.loadingPayments})]}):r.length===0?e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 text-center",children:[e.jsx(ii,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:H.noPayments}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:H.newPayments})]}):e.jsx("ul",{className:"space-y-2 list-none m-0 p-0",children:r.map(h=>e.jsxs("li",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:bg-orange-50/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:h.customerName}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",h.bookingId]})]}),e.jsxs("span",{className:"px-2 py-1 rounded-lg text-xs font-medium border flex items-center gap-1 ".concat(f(h.status)),children:[A(h.status),h.status.toUpperCase()]})]}),e.jsxs("div",{className:"space-y-1.5 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["Rp ",h.amount.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Admin 30%:"}),e.jsxs("span",{className:"font-medium text-orange-600",children:["- Rp ",h.adminCommission.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Your Earning:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["Rp ",h.netEarning.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[H.date,": ",new Date(h.date).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})]})]})]},h.$id))})]})]})})})},Ou=({therapist:t,onBack:a})=>{const[s,n]=o.useState([]),[i,r]=o.useState(""),[l,d]=o.useState(!0),[g,m]=o.useState(!1),x=o.useRef(null),v=(t==null?void 0:t.membershipTier)==="premium";o.useEffect(()=>{j();const w=setInterval(j,5e3);return()=>clearInterval(w)},[t]),o.useEffect(()=>{p()},[s]);const j=async()=>{d(!0);try{const w=qs.generateConversationId({id:String(t.$id||t.id),role:"therapist"},{id:"admin",role:"admin"}),D=(await qs.getConversation(w)).map(L=>({$id:L.$id,senderId:L.senderId,senderName:L.senderName,senderAvatar:L.senderAvatar||L.receiverAvatar,senderType:L.senderType==="therapist"?"therapist":L.senderType==="user"?"user":"admin",message:L.content,timestamp:L.createdAt,read:L.isRead}));n(D)}catch{}finally{d(!1)}},I=async()=>{if(i.trim()){m(!0);try{const w=qs.generateConversationId({id:String(t.$id||t.id),role:"therapist"},{id:"admin",role:"admin"}),P=await qs.sendMessage({conversationId:w,senderId:String(t.$id||t.id),senderName:t.name||"Therapist",senderType:"therapist",recipientId:"admin",recipientName:"Admin",recipientType:"admin",content:i.trim(),type:"text"});r(""),await j()}catch(w){const P=(w==null?void 0:w.message)||"Failed to send message. Please try again.";At("Error: ".concat(P,"\n\nPlease check the console for details."))}finally{m(!1)}}},p=()=>{var w;(w=x.current)==null||w.scrollIntoView({behavior:"smooth"})},R=w=>{const P=new Date(w),L=new Date().getTime()-P.getTime(),O=Math.floor(L/6e4);return O<1?"Just now":O<60?"".concat(O,"m ago"):O<1440?"".concat(Math.floor(O/60),"h ago"):P.toLocaleDateString()};return e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-white flex flex-col",children:[e.jsx("div",{className:"max-w-sm mx-auto px-4 pt-6 pb-4 w-full",children:e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Chat"}),e.jsx(Nt,{...Kc.overview,position:"bottom",size:"sm"})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx(ze,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:[((t==null?void 0:t.onlineHoursThisMonth)||0).toFixed(1),"j"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"bulan ini"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>{},className:"p-4 rounded-xl border-2 transition-all ".concat((t==null?void 0:t.status)==="available"&&(t==null?void 0:t.availability)==="online"?"bg-green-50 border-green-500":"border-gray-200 hover:border-green-300"),children:[e.jsx($e,{className:"w-6 h-6 mx-auto mb-2 ".concat((t==null?void 0:t.status)==="available"&&(t==null?void 0:t.availability)==="online"?"text-green-600":"text-gray-400")}),e.jsx("p",{className:"text-sm font-semibold ".concat((t==null?void 0:t.status)==="available"&&(t==null?void 0:t.availability)==="online"?"text-green-700":"text-gray-600"),children:"Tersedia"})]}),e.jsxs("button",{onClick:()=>{},className:"p-4 rounded-xl border-2 transition-all ".concat((t==null?void 0:t.status)==="busy"?"bg-amber-50 border-amber-500":"border-gray-200 hover:border-amber-300"),children:[e.jsx(ze,{className:"w-6 h-6 mx-auto mb-2 ".concat((t==null?void 0:t.status)==="busy"?"text-amber-600":"text-gray-400")}),e.jsx("p",{className:"text-sm font-semibold ".concat((t==null?void 0:t.status)==="busy"?"text-amber-700":"text-gray-600"),children:"Sibuk"})]}),e.jsxs("button",{onClick:()=>{},className:"p-4 rounded-xl border-2 transition-all ".concat((t==null?void 0:t.availability)==="offline"?"bg-red-50 border-red-500":"border-gray-200 hover:border-red-300"),children:[e.jsx(XCircle,{className:"w-6 h-6 mx-auto mb-2 ".concat((t==null?void 0:t.availability)==="offline"?"text-red-600":"text-gray-400")}),e.jsx("p",{className:"text-sm font-semibold ".concat((t==null?void 0:t.availability)==="offline"?"text-red-700":"text-gray-600"),children:"Offline"})]})]})]})}),e.jsx("div",{className:"w-full bg-gradient-to-r from-orange-500 to-amber-500 shadow-lg sticky top-0 z-10",children:e.jsx("div",{className:"max-w-sm mx-auto px-4 py-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:a,className:"p-2 hover:bg-orange-600 rounded-lg transition-colors text-white",children:"â†"}),e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white flex items-center justify-center shadow-lg",children:e.jsx(Gt,{className:"w-6 h-6 text-orange-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"Customer Support"}),e.jsx("p",{className:"text-xs text-orange-100",children:v?"Premium Support - Response within 2 hours":"Available for all therapists"})]})]})})}),e.jsx("div",{className:"flex-1 max-w-sm mx-auto w-full p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border-2 border-orange-200 flex flex-col h-[600px]",children:[e.jsx("div",{className:"flex-1  p-6 space-y-4 bg-white",children:l?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-orange-700 font-semibold",children:"Loading messages..."})]}):s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Gt,{className:"w-16 h-16 text-orange-300 mx-auto mb-4"}),e.jsx("p",{className:"text-orange-700 font-semibold",children:"No messages yet"}),e.jsx("p",{className:"text-sm text-orange-600 mt-2",children:"Start a conversation with our support team"})]}):e.jsxs(e.Fragment,{children:[s.map(w=>e.jsxs("div",{className:"flex gap-2 ".concat(w.senderType==="therapist"?"justify-end":"justify-start"),children:[w.senderType!=="therapist"&&e.jsx("div",{className:"flex-shrink-0",children:w.senderAvatar&&w.senderAvatar.startsWith("http")?e.jsx("img",{src:w.senderAvatar,alt:w.senderName,className:"w-8 h-8 rounded-full object-cover border-2 border-orange-200"}):e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center border-2 border-orange-300",children:e.jsx("span",{className:"text-lg",children:w.senderAvatar||"ðŸ‘¤"})})}),e.jsxs("div",{className:"max-w-[70%]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-700",children:w.senderName}),e.jsx("span",{className:"text-xs text-gray-500",children:R(w.timestamp)})]}),e.jsx("div",{className:"p-4 rounded-2xl ".concat(w.senderType==="therapist"?"bg-gradient-to-r from-orange-500 to-amber-500 text-white":"bg-gray-100 text-gray-800"),children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:w.message})})]}),w.senderType==="therapist"&&e.jsx("div",{className:"flex-shrink-0",children:t!=null&&t.mainImage?e.jsx("img",{src:t.mainImage,alt:t.name,className:"w-8 h-8 rounded-full object-cover border-2 border-orange-300"}):e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-400 to-amber-500 rounded-full flex items-center justify-center border-2 border-orange-300",children:e.jsx(Ct,{className:"w-5 h-5 text-white"})})})]},w.$id)),e.jsx("div",{ref:x})]})}),e.jsxs("div",{className:"border-t-2 border-orange-200 p-4 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",value:i,onChange:w=>r(w.target.value),onKeyPress:w=>w.key==="Enter"&&I(),placeholder:"Type your message...",className:"flex-1 px-4 py-3 border-2 border-orange-300 rounded-lg focus:border-orange-500 focus:outline-none",disabled:g}),e.jsxs("button",{onClick:I,disabled:!i.trim()||g,className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(Oo,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Send"})]})]}),e.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"ðŸ’¬ Our support team typically responds within 2 hours during business hours"})]})]})})]})},Uu=({therapist:t,onBack:a,onNavigate:s,onNavigateToBookings:n,onNavigateToChat:i,onNavigateToProfile:r,onNavigateToSchedule:l,onNavigateToEarnings:d})=>{const[g,m]=o.useState([]),[x,v]=o.useState(!0),[j,I]=o.useState("all"),[p,R]=o.useState(0),w=(t==null?void 0:t.$id)||(t==null?void 0:t.id),[P,D]=o.useState({score:0,profileCompleteness:0,responseRate:0,averageRating:0,monthlyBookings:0,onlineHoursThisMonth:0,overduePayments:0,missedBookings:0,trafficViews:0,trafficIncrease:0}),[L,O]=o.useState(!1),[H,S]=o.useState(null);o.useEffect(()=>{(async()=>{if(w)try{let A=0;t!=null&&t.name&&(A+=15),t!=null&&t.profilePicture&&(A+=20),t!=null&&t.description&&t.description.length>50&&(A+=15),t!=null&&t.whatsapp&&(A+=15),t!=null&&t.massageTypes&&t.massageTypes.length>0&&(A+=15),t!=null&&t.price&&(A+=10),(t!=null&&t.locationId||t!=null&&t.city)&&(A+=10);let c=0;try{c=(await je.listDocuments(Pe.databaseId,Pe.collections.bookings,[ae.equal("therapistId",w),ae.equal("status","pending"),ae.limit(100)])).total}catch{}let h=0;try{const C=new Date;C.setDate(1),C.setHours(0,0,0,0),h=(await je.listDocuments(Pe.databaseId,Pe.collections.bookings,[ae.equal("therapistId",w),ae.greaterThanEqual("$createdAt",C.toISOString()),ae.limit(1e3)])).total}catch{}D({score:Math.min(100,A+(t!=null&&t.rating?10:0)),profileCompleteness:A,responseRate:(t==null?void 0:t.responseRate)||0,averageRating:(t==null?void 0:t.rating)||0,monthlyBookings:h,onlineHoursThisMonth:(t==null?void 0:t.onlineHoursThisMonth)||0,overduePayments:(t==null?void 0:t.overduePayments)||0,missedBookings:c,trafficViews:(t==null?void 0:t.profileViews)||0,trafficIncrease:(t==null?void 0:t.trafficIncrease)||0})}catch{}})()},[w,t]),o.useEffect(()=>{const A=(()=>{const c=new Date,h=[];if(P.overduePayments>0&&h.push({$id:"overdue-payment-1",type:"overdue_payment",title:"ðŸš¨ Pembayaran Komisi Terlambat",message:"Anda memiliki ".concat(P.overduePayments," pembayaran komisi yang terlambat ").concat(P.overduePayments*7," hari. Segera lakukan pembayaran untuk menghindari penangguhan akun."),timestamp:new Date(c.getTime()-1728e5).toISOString(),read:!1,priority:"critical",actionUrl:"/payment",actionLabel:"Bayar Sekarang",amount:45e4,daysOverdue:P.overduePayments*7}),P.missedBookings>0&&h.push({$id:"missed-booking-1",type:"missed_booking",title:"â° Booking Tidak Direspons",message:"Anda melewatkan ".concat(P.missedBookings," permintaan booking tanpa respons. Ini mempengaruhi rating Anda dan dapat menurunkan visibilitas profil."),timestamp:new Date(c.getTime()-216e5).toISOString(),read:!1,priority:"critical",actionUrl:"/bookings",actionLabel:"Lihat Booking",bookingsMissed:P.missedBookings}),P.score<80&&h.push({$id:"account-health-1",type:"account_health",title:"ðŸ“Š Kesehatan Akun Perlu Perhatian",message:"Skor kesehatan akun Anda ".concat(P.score,"/100. Lengkapi profil (").concat(P.profileCompleteness,"%) dan tingkatkan response rate untuk meningkatkan performa."),timestamp:new Date(c.getTime()-108e5).toISOString(),read:!1,priority:"high",actionUrl:"/profile",actionLabel:"Perbaiki Profil"}),P.trafficIncrease>0&&h.push({$id:"traffic-increase-1",type:"traffic",title:"ðŸ“ˆ Traffic Profil Meningkat!",message:"Traffic profil Anda naik ".concat(P.trafficIncrease,"% minggu ini (").concat(P.trafficViews," views). Turunkan harga untuk meningkatkan booking rate!"),timestamp:new Date(c.getTime()-72e5).toISOString(),read:!1,priority:"medium",actionUrl:"/profile",actionLabel:"Sesuaikan Harga",trafficIncrease:P.trafficIncrease}),P.profileCompleteness<90){const M=[];P.profileCompleteness<60&&M.push("foto profil"),P.profileCompleteness<70&&M.push("deskripsi lengkap"),P.profileCompleteness<80&&M.push("nomor WhatsApp"),P.profileCompleteness<90&&M.push("foto sertifikat"),h.push({$id:"profile-incomplete-1",type:"profile_incomplete",title:"âœ¨ Lengkapi Profil Anda",message:"Profil ".concat(P.profileCompleteness,"% lengkap. Tambahkan ").concat(M.join(", ")," untuk meningkatkan kepercayaan pelanggan dan mendapat lebih banyak booking."),timestamp:new Date(c.getTime()-36e5).toISOString(),read:!1,priority:"medium",actionUrl:"/profile",actionLabel:"Lengkapi Profil",profileCompleteness:P.profileCompleteness})}const C=60;if(P.onlineHoursThisMonth<C){const M=C-P.onlineHoursThisMonth;h.push({$id:"online-time-1",type:"online_time",title:"â±ï¸ Target Waktu Online",message:"Anda perlu ".concat(M.toFixed(1)," jam lagi untuk mencapai target 60 jam bulan ini. Waktu online yang konsisten meningkatkan ranking profil."),timestamp:new Date(c.getTime()-18e5).toISOString(),read:!1,priority:"medium",actionUrl:"/schedule",actionLabel:"Atur Jadwal",onlineHoursNeeded:M})}return h.push({$id:"booking-new-1",type:"booking",title:"ðŸ“… Booking Baru dari Sarah",message:"Permintaan booking massage 90 menit untuk besok jam 14:00. Segera konfirmasi dalam 2 jam untuk mempertahankan response rate yang baik.",timestamp:new Date(c.getTime()-18e5).toISOString(),read:!1,priority:"high",actionUrl:"/bookings",actionLabel:"Konfirmasi Booking"}),h.push({$id:"message-new-1",type:"message",title:"ðŸ’¬ Pesan dari Pelanggan",message:'Lisa: "Apakah bisa datang 30 menit lebih awal? Terima kasih." - Balas pesan untuk memberikan layanan terbaik.',timestamp:new Date(c.getTime()-27e5).toISOString(),read:!1,priority:"medium",actionUrl:"/chat",actionLabel:"Balas Pesan"}),h.push({$id:"reminder-1",type:"reminder",title:"ðŸ”” Reminder: Sesi dalam 3 Jam",message:"Massage dengan Budi (90 menit) dijadwalkan jam 15:00 hari ini. Persiapkan peralatan dan pastikan lokasi sudah siap.",timestamp:new Date(c.getTime()-6e5).toISOString(),read:!1,priority:"high",actionUrl:"/schedule",actionLabel:"Lihat Detail"}),h.push({$id:"payment-received-1",type:"payment",title:"ðŸ’° Pembayaran Diterima",message:"Pembayaran IDR 180,000 dari booking dengan Maria telah diterima. Komisi 30% akan dipotong sesuai ketentuan.",timestamp:new Date(c.getTime()-72e5).toISOString(),read:!0,priority:"medium",actionUrl:"/earnings",actionLabel:"Lihat Pendapatan"}),h.push({$id:"system-update-1",type:"system",title:"ðŸ†• Update Sistem",message:"Fitur baru: Sekarang Anda bisa mengatur buffer time antar booking untuk persiapan yang lebih baik. Coba fitur ini di pengaturan jadwal.",timestamp:new Date(c.getTime()-144e5).toISOString(),read:!0,priority:"low",actionUrl:"/schedule",actionLabel:"Coba Fitur"}),h.sort((M,E)=>{const W={critical:4,high:3,medium:2,low:1};return W[M.priority]!==W[E.priority]?W[E.priority]-W[M.priority]:M.read!==E.read?M.read?1:-1:new Date(E.timestamp).getTime()-new Date(M.timestamp).getTime()})})();m(A),v(!1)},[P,t]),o.useEffect(()=>{const f=g.filter(A=>!A.read).length;R(f)},[g]);const N=async f=>{try{m(A=>A.map(c=>c.$id===f?{...c,read:!0}:c))}catch{}},k=async f=>{try{m(A=>A.filter(c=>c.$id!==f))}catch{}},b=f=>{if(N(f.$id),f.actionUrl)switch(f.actionUrl){case"/bookings":n&&n();break;case"/chat":f.type==="message"?(S({customerId:f.relatedId||"customer-001",customerName:f.message.split(" ")[0]||"Customer",bookingId:f.relatedId}),O(!0)):i&&i();break;case"/profile":r?r():alert("Fitur lengkapi profil sedang dalam pengembangan. Silakan gunakan menu Profil di sidebar.");break;case"/schedule":l?l():alert("Fitur pengaturan jadwal sedang dalam pengembangan. Silakan gunakan menu Kalender di sidebar.");break;case"/earnings":case"/payment":d?d():alert("Fitur pendapatan sedang dalam pengembangan. Silakan gunakan menu Pendapatan di sidebar.");break;default:alert("Fitur ini sedang dalam pengembangan: ".concat(f.actionLabel||"Action"))}else f.type==="booking"&&n?n():f.type==="message"&&(S({customerId:f.relatedId||"customer-001",customerName:f.message.split(" ")[0]||"Customer",bookingId:f.relatedId}),O(!0))},y=()=>{switch(j){case"unread":return g.filter(f=>!f.read);case"critical":return g.filter(f=>f.priority==="critical");case"booking":return g.filter(f=>["booking","missed_booking","reminder"].includes(f.type));case"message":return g.filter(f=>f.type==="message");case"system":return g.filter(f=>["system","account_health","traffic","profile_incomplete","online_time","overdue_payment"].includes(f.type));default:return g}},T=f=>{switch(f){case"overdue_payment":return e.jsx(Rs,{className:"w-5 h-5 text-red-600"});case"missed_booking":return e.jsx(kt,{className:"w-5 h-5 text-red-500"});case"account_health":return e.jsx(rn,{className:"w-5 h-5 text-pink-500"});case"traffic":return e.jsx(Zt,{className:"w-5 h-5 text-blue-500"});case"profile_incomplete":return e.jsx(Ct,{className:"w-5 h-5 text-yellow-500"});case"online_time":return e.jsx(ze,{className:"w-5 h-5 text-indigo-500"});case"booking":return e.jsx(dt,{className:"w-5 h-5 text-blue-500"});case"message":return e.jsx(Gt,{className:"w-5 h-5 text-purple-500"});case"system":return e.jsx(xa,{className:"w-5 h-5 text-gray-500"});case"payment":return e.jsx(ea,{className:"w-5 h-5 text-green-500"});case"reminder":return e.jsx(Uo,{className:"w-5 h-5 text-orange-500"});default:return e.jsx(xa,{className:"w-5 h-5 text-gray-500"})}},F=f=>f==="high"?e.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold bg-red-100 text-red-700 rounded-full",children:"High"}):f==="medium"?e.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold bg-yellow-100 text-yellow-700 rounded-full",children:"Medium"}):null,U=f=>{const A=new Date(f),h=new Date().getTime()-A.getTime(),C=Math.floor(h/6e4),M=Math.floor(h/36e5),E=Math.floor(h/864e5);return C<1?"Just now":C<60?"".concat(C,"m ago"):M<24?"".concat(M,"h ago"):E<7?"".concat(E,"d ago"):A.toLocaleDateString()},B=y();return e.jsxs(Rt,{title:"Notifications",subtitle:"Pantau kesehatan akun, booking, dan performa bisnis Anda",onBackToStatus:a,onNavigate:s,therapist:t,currentPage:"therapist-notifications",icon:e.jsx(xa,{className:"w-6 h-6 text-orange-600"}),headerActions:e.jsx(Nt,{...Jc.overview,position:"left",size:"md"}),children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-5","aria-labelledby":"health-heading",children:[e.jsx("h2",{id:"health-heading",className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Ringkasan Akun"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-11 h-11 bg-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(zt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Skor Kesehatan Akun"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Rating performa Anda"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[P.score,"%"]}),e.jsx("p",{className:"text-xs font-semibold ".concat(P.score>=90?"text-green-600":P.score>=70?"text-amber-600":"text-red-600"),children:P.score>=90?"Sangat baik":P.score>=70?"Baik":"Perlu perhatian"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx(ma,{className:"w-3.5 h-3.5 text-blue-600"}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Traffic"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:P.trafficViews}),e.jsxs("p",{className:"text-xs text-gray-500",children:["+",P.trafficIncrease,"% minggu ini"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx(jt,{className:"w-3.5 h-3.5 text-amber-500"}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Rating"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:P.averageRating}),e.jsxs("p",{className:"text-xs text-gray-500",children:[P.monthlyBookings," booking"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx(un,{className:"w-3.5 h-3.5 text-purple-600"}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Profil"})]}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[P.profileCompleteness,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"lengkap"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx(jc,{className:"w-3.5 h-3.5 text-green-600"}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Respons"})]}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[P.responseRate,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"response rate"})]})]})]}),g.filter(f=>f.priority==="critical"&&!f.read).length>0&&e.jsx("section",{className:"bg-red-50 border border-red-200 rounded-lg p-4","aria-label":"Alert kritis",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(kt,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h4",{className:"text-sm font-bold text-red-800",children:"Perhatian diperlukan"}),e.jsxs("p",{className:"text-xs text-red-700 mt-0.5",children:[g.filter(f=>f.priority==="critical"&&!f.read).length," item butuh tindakan segera"]})]}),e.jsx("button",{onClick:()=>I("critical"),className:"flex-shrink-0 px-3 py-1.5 bg-red-600 text-white text-xs font-semibold rounded-lg hover:bg-red-700",children:"Lihat"})]})}),e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4","aria-labelledby":"guide-heading",children:[e.jsx("h2",{id:"guide-heading",className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Jenis notifikasi di halaman ini"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(dt,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Booking baru"})," â€” Saat pelanggan memesan dengan Anda"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Gt,{className:"w-4 h-4 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Pesan pelanggan"})," â€” Chat tentang booking"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(ze,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Reminder"})," â€” Pengingat 3 jam sebelum sesi"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Pembayaran"})," â€” Konfirmasi pembayaran diterima"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(kt,{className:"w-4 h-4 text-orange-600 mt-0.5 flex-shrink-0"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Sistem"})," â€” Update dari admin"]})]})]})]})]}),e.jsx("div",{className:"bg-white border-b shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 py-3",children:e.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:[{value:"all",label:"All",count:g.length,color:"gray",icon:xa},{value:"critical",label:"Critical",count:g.filter(f=>f.priority==="critical").length,color:"red",icon:kt},{value:"unread",label:"Unread",count:p,color:"orange",icon:Nc},{value:"booking",label:"Bookings",count:g.filter(f=>["booking","missed_booking","reminder"].includes(f.type)).length,color:"blue",icon:dt},{value:"message",label:"Messages",count:g.filter(f=>f.type==="message").length,color:"purple",icon:Gt},{value:"system",label:"Business",count:g.filter(f=>["system","account_health","traffic","profile_incomplete","online_time","overdue_payment"].includes(f.type)).length,color:"green",icon:Zt}].map(f=>{const A=f.icon,c=j===f.value,h=f.value==="critical"&&f.count>0;return e.jsxs("button",{onClick:()=>I(f.value),className:"flex items-center gap-1 sm:gap-1.5 px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg text-[10px] sm:text-xs font-medium whitespace-nowrap transition-all shadow-sm ".concat(c?f.value==="all"?"bg-gray-500 text-white shadow-md":f.value==="critical"?"bg-red-500 text-white shadow-md":f.value==="unread"?"bg-orange-500 text-white shadow-md":f.value==="booking"?"bg-blue-500 text-white shadow-md":f.value==="message"?"bg-purple-500 text-white shadow-md":"bg-green-500 text-white shadow-md":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"," ").concat(h?"animate-pulse ring-2 ring-red-400":""),children:[e.jsx(A,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 flex-shrink-0 ".concat(c?"text-white":f.value==="all"?"text-gray-500":f.value==="critical"?"text-red-500":f.value==="unread"?"text-orange-500":f.value==="booking"?"text-blue-500":f.value==="message"?"text-purple-500":"text-green-500")}),e.jsx("span",{className:"hidden xs:inline sm:inline",children:f.label}),e.jsx("span",{className:"px-1 sm:px-1.5 py-0.5 rounded-full text-[9px] sm:text-xs font-bold ".concat(c?"bg-white/20 text-white":f.count>0?f.value==="critical"?"bg-red-100 text-red-700":f.value==="unread"?"bg-orange-100 text-orange-700":f.value==="booking"?"bg-blue-100 text-blue-700":f.value==="message"?"bg-purple-100 text-purple-700":f.value==="system"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700":"bg-gray-100 text-gray-500"),children:f.count})]},f.value)})})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:x?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-orange-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Memuat notifikasi..."})]}):B.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border",children:[e.jsx(xa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-900 text-lg font-semibold",children:"Tidak Ada Notifikasi"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:j==="unread"?"Semua sudah dibaca!":"Notifikasi baru akan muncul di sini"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border border-gray-200 p-4 hover:shadow-lg transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center shadow-sm",children:e.jsx(xa,{className:"w-5 h-5 text-gray-600"})}),e.jsx("span",{className:"text-xs font-medium text-gray-500 bg-white px-2 py-0.5 rounded-full",children:"Semua"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:g.length}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Total Notifikasi"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200 p-4 hover:shadow-lg transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center shadow-sm",children:e.jsx(dt,{className:"w-5 h-5 text-blue-500"})}),e.jsx(Zt,{className:"w-4 h-4 text-blue-500"})]}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 mb-1",children:g.filter(f=>f.type==="booking").length}),e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"Booking Update"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200 p-4 hover:shadow-lg transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center shadow-sm",children:e.jsx(Gt,{className:"w-5 h-5 text-purple-500"})}),e.jsx(Ct,{className:"w-4 h-4 text-purple-500"})]}),e.jsx("p",{className:"text-3xl font-bold text-purple-600 mb-1",children:g.filter(f=>f.type==="message").length}),e.jsx("p",{className:"text-xs text-purple-700 font-medium",children:"Pesan Pelanggan"})]})]}),e.jsx("div",{className:"space-y-3",children:B.map(f=>e.jsxs("div",{className:"bg-white rounded-xl border-2 transition-all hover:shadow-xl hover:-translate-y-0.5 ".concat(f.read?"border-gray-200":"border-orange-300 shadow-md bg-gradient-to-r from-orange-50/30 to-white"),children:[e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 p-3 rounded-xl shadow-sm ".concat(f.read?"bg-gray-50 border border-gray-200":"bg-gradient-to-br from-orange-100 to-orange-200 border-2 border-orange-300"),children:T(f.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-bold text-gray-900 text-base sm:text-lg",children:f.title}),!f.read&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs font-semibold text-orange-600 bg-orange-100 px-2 py-0.5 rounded-full",children:"NEW"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[F(f.priority),e.jsx("button",{onClick:()=>k(f.$id),className:"text-gray-400 hover:text-red-500 transition-all p-1.5 hover:bg-red-50 rounded-lg hover:scale-110",title:"Delete notification",children:e.jsx(wt,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-gray-700 text-sm sm:text-base mb-4 leading-relaxed",children:f.message}),e.jsxs("div",{className:"flex items-center gap-3 mb-4 flex-wrap",children:[f.relatedId&&e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-gray-100 rounded-lg border border-gray-200 text-xs font-medium text-gray-700 hover:bg-gray-200 transition-colors",children:[e.jsx("span",{className:"text-gray-500",children:"ID:"}),e.jsxs("span",{className:"font-mono font-bold",children:["#",f.relatedId]})]}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-blue-50 rounded-lg border border-blue-200 text-xs font-medium text-blue-700",children:[e.jsx(ze,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:U(f.timestamp)})]}),e.jsx("div",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg border text-xs font-semibold capitalize ".concat(f.type==="booking"?"bg-blue-50 border-blue-200 text-blue-700":f.type==="message"?"bg-purple-50 border-purple-200 text-purple-700":f.type==="payment"?"bg-green-50 border-green-200 text-green-700":f.type==="reminder"?"bg-red-50 border-red-200 text-red-700":"bg-gray-50 border-gray-200 text-gray-700"),children:f.type})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[!f.read&&e.jsxs("button",{onClick:()=>N(f.$id),className:"text-sm text-gray-700 hover:text-gray-900 font-semibold px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-all border border-gray-200 hover:border-gray-300 hover:shadow-sm",children:[e.jsx($e,{className:"w-4 h-4 inline mr-1.5"}),"Tandai Dibaca"]}),f.actionLabel&&e.jsxs("button",{onClick:()=>b(f),className:"text-sm px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 font-semibold flex items-center gap-2 transition-all shadow-md hover:shadow-lg hover:scale-105",children:[f.actionLabel,e.jsx(kc,{className:"w-4 h-4"})]})]})]})]})}),!f.read&&e.jsx("div",{className:"h-1.5 bg-gradient-to-r from-orange-400 via-orange-500 to-orange-600"})]},f.$id))})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 mt-6 mb-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl border border-orange-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5 text-orange-500"}),"Rekomendasi Aksi Cepat"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[P.overduePayments>0&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-red-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Rs,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-sm font-semibold text-red-700",children:"Pembayaran Tertunggak"})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Segera bayar komisi untuk menghindari penangguhan akun"}),e.jsx("button",{className:"w-full px-3 py-2 bg-red-600 text-white text-sm font-semibold rounded-lg hover:bg-red-700 transition-colors",children:"Bayar Sekarang"})]}),P.profileCompleteness<90&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ct,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"text-sm font-semibold text-yellow-700",children:"Lengkapi Profil"})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Profil lengkap meningkatkan kepercayaan pelanggan"}),e.jsx("button",{className:"w-full px-3 py-2 bg-yellow-600 text-white text-sm font-semibold rounded-lg hover:bg-yellow-700 transition-colors",children:"Edit Profil"})]}),P.trafficIncrease>0&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Zt,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-semibold text-blue-700",children:"Optimasi Harga"})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Traffic naik! Pertimbangkan turunkan harga untuk booking lebih banyak"}),e.jsx("button",{className:"w-full px-3 py-2 bg-blue-600 text-white text-sm font-semibold rounded-lg hover:bg-blue-700 transition-colors",children:"Sesuaikan Harga"})]})]})]})}),L&&H&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl h-[600px] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Gt,{className:"w-6 h-6 text-purple-500"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-900",children:["Chat dengan ",H.customerName]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Percakapan real-time"})]})]}),e.jsx("button",{onClick:()=>{O(!1),S(null)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(wt,{className:"w-5 h-5 text-gray-600"})})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(_o,{providerId:t.$id,providerRole:"therapist",providerName:t.name,customerId:H.customerId,customerName:H.customerName,bookingId:H.bookingId})})]})})]})},Fu=({therapist:t,onBack:a,onNavigateToMembership:s})=>{const[n,i]=o.useState(new Date),[r,l]=o.useState([]),[d,g]=o.useState(null),[m,x]=o.useState(!0);o.useEffect(()=>{{j();const y=setInterval(()=>{j(),I()},6e4);return()=>clearInterval(y)}},[t,!0]);const j=async()=>{x(!0);try{const{bookingService:y}=await z(async()=>{const{bookingService:U}=await import("./route-therapist.DVVqC6AH.js").then(B=>B.bx);return{bookingService:U}},__vite__mapDeps([0,1,2,3,4,5,6])),F=(await y.getProviderBookings(t.$id)).filter(U=>U.status==="confirmed"||U.status==="scheduled").map(U=>({$id:U.$id,customerName:U.userName||U.customerName||"Unknown Customer",serviceType:U.service||U.serviceType||"Massage Service",duration:U.duration||60,price:U.totalAmount||U.price||0,location:U.location||"",date:U.date?new Date(U.date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],time:U.time||"00:00",status:U.status||"confirmed",reminderSent:U.reminderSent||!1}));l(F)}catch{l([])}finally{x(!1)}},I=()=>{const y=new Date;r.forEach(T=>{if(T.status!=="confirmed"||T.reminderSent)return;const U=(new Date("".concat(T.date,"T").concat(T.time)).getTime()-y.getTime())/(1e3*60*60);U<=3&&U>2.9&&p(T)})},p=async y=>{try{"Notification"in window&&Notification.permission==="granted"&&new Notification("Upcoming Booking Reminder",{body:"You have a booking with ".concat(y.customerName," in 3 hours at ").concat(y.time),icon:"/logo.png",badge:"/logo.png",tag:"booking-".concat(y.$id),requireInteraction:!0}),l(T=>T.map(F=>F.$id===y.$id?{...F,reminderSent:!0}:F))}catch{}},R=y=>{const T=y.getFullYear(),F=y.getMonth(),U=new Date(T,F,1),f=new Date(T,F+1,0).getDate(),A=U.getDay();return{daysInMonth:f,startingDayOfWeek:A,year:T,month:F}},w=y=>r.filter(T=>T.date===y&&T.status==="confirmed"),P=(y,T,F)=>"".concat(y,"-").concat(String(T+1).padStart(2,"0"),"-").concat(String(F).padStart(2,"0")),D=()=>{i(new Date(n.getFullYear(),n.getMonth()-1))},L=()=>{i(new Date(n.getFullYear(),n.getMonth()+1))},{daysInMonth:O,startingDayOfWeek:H,year:S,month:N}=R(n),k=["January","February","March","April","May","June","July","August","September","October","November","December"],b=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50  ",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:[e.jsx("div",{className:"max-w-sm mx-auto px-4 pt-6 pb-4",children:e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Kalender"}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx(ze,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:[((t==null?void 0:t.onlineHoursThisMonth)||0).toFixed(1),"j"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"bulan ini"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>{},className:"p-4 rounded-xl border-2 transition-all ".concat((t==null?void 0:t.status)==="available"&&(t==null?void 0:t.availability)==="online"?"bg-green-50 border-green-500":"border-gray-200 hover:border-green-300"),children:[e.jsx($e,{className:"w-6 h-6 mx-auto mb-2 ".concat((t==null?void 0:t.status)==="available"&&(t==null?void 0:t.availability)==="online"?"text-green-600":"text-gray-400")}),e.jsx("p",{className:"text-sm font-semibold ".concat((t==null?void 0:t.status)==="available"&&(t==null?void 0:t.availability)==="online"?"text-green-700":"text-gray-600"),children:"Tersedia"})]}),e.jsxs("button",{onClick:()=>{},className:"p-4 rounded-xl border-2 transition-all ".concat((t==null?void 0:t.status)==="busy"?"bg-amber-50 border-amber-500":"border-gray-200 hover:border-amber-300"),children:[e.jsx(ze,{className:"w-6 h-6 mx-auto mb-2 ".concat((t==null?void 0:t.status)==="busy"?"text-amber-600":"text-gray-400")}),e.jsx("p",{className:"text-sm font-semibold ".concat((t==null?void 0:t.status)==="busy"?"text-amber-700":"text-gray-600"),children:"Sibuk"})]}),e.jsxs("button",{onClick:()=>{},className:"p-4 rounded-xl border-2 transition-all ".concat((t==null?void 0:t.availability)==="offline"?"bg-red-50 border-red-500":"border-gray-200 hover:border-red-300"),children:[e.jsx(wt,{className:"w-6 h-6 mx-auto mb-2 ".concat((t==null?void 0:t.availability)==="offline"?"text-red-600":"text-gray-400")}),e.jsx("p",{className:"text-sm font-semibold ".concat((t==null?void 0:t.availability)==="offline"?"text-red-700":"text-gray-600"),children:"Offline"})]})]})]})}),e.jsx(ds,{title:"",subtitle:"View your upcoming appointments",onBackToStatus:a,icon:e.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(dt,{className:"w-5 h-5 text-white"})}),actions:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Nt,{...qc.scheduleView,position:"left",size:"md"}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-green-50 text-green-700 rounded-lg text-sm",children:[e.jsx(xa,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Reminders ON"})]})]})}),e.jsx("div",{className:"bg-white border-b shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:D,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Sc,{className:"w-5 h-5 text-gray-700"})}),e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:[k[N]," ",S]}),e.jsx("button",{onClick:L,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Bt,{className:"w-5 h-5 text-gray-700"})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:m?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-orange-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Loading calendar..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:[e.jsx("div",{className:"grid grid-cols-7 border-b bg-gray-50",children:b.map(y=>e.jsxs("div",{className:"p-2 sm:p-3 text-center font-medium text-gray-700 text-xs sm:text-sm",children:[e.jsx("span",{className:"hidden sm:inline",children:y}),e.jsx("span",{className:"sm:hidden",children:y.charAt(0)})]},y))}),e.jsxs("div",{className:"grid grid-cols-7",children:[Array.from({length:H}).map((y,T)=>e.jsx("div",{className:"p-2 border-b border-r bg-gray-50 min-h-20 sm:min-h-24"},"empty-".concat(T))),Array.from({length:O}).map((y,T)=>{const F=T+1,U=P(S,N,F),B=w(U),f=U===new Date().toISOString().split("T")[0],A=U===d;return e.jsxs("div",{onClick:()=>g(U),className:"p-3 border-b border-r min-h-24 sm:min-h-28 cursor-pointer transition-all touch-manipulation ".concat(f?"bg-green-50 border-green-200":""," ").concat(A?"bg-green-500 text-white ring-2 ring-green-400 shadow-lg transform scale-105 font-bold":"hover:bg-gray-50"),style:{minHeight:"72px",fontSize:"16px",touchAction:"manipulation"},children:[e.jsxs("div",{className:"text-xs sm:text-sm font-medium mb-1 sm:mb-2 ".concat(f?"text-orange-600":"text-gray-700"),children:[F,f&&e.jsx("span",{className:"ml-1 text-[10px] bg-orange-500 text-white px-1 rounded",children:"Today"})]}),B.length>0&&e.jsxs("div",{className:"space-y-1",children:[B.slice(0,2).map(c=>e.jsxs("div",{className:"text-[10px] sm:text-xs bg-green-50 text-green-700 border border-green-200 px-1.5 py-1 rounded truncate",title:"".concat(c.time," - ").concat(c.customerName," (").concat(c.serviceType,")"),children:[e.jsx("div",{className:"font-semibold",children:c.time}),e.jsx("div",{className:"truncate hidden sm:block",children:c.customerName})]},c.$id)),B.length>2&&e.jsxs("div",{className:"text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded text-center",children:["+",B.length-2," more"]})]})]},F)})]})]}),d&&e.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-sm border p-4 sm:p-6",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-4",children:new Date(d).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric",year:"numeric"})}),w(d).length===0?e.jsx("p",{className:"text-gray-500 text-center py-8 text-sm",children:"No bookings for this date"}):e.jsx("div",{className:"space-y-3",children:w(d).sort((y,T)=>y.time.localeCompare(T.time)).map(y=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:border-green-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-700 font-semibold",children:y.customerName.charAt(0)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:y.customerName}),e.jsx("p",{className:"text-xs text-gray-500",children:y.serviceType})]})]}),y.reminderSent&&e.jsxs("span",{className:"px-2 py-1 bg-green-50 text-green-600 rounded-md text-[10px] font-medium flex items-center gap-1",children:[e.jsx(xa,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:"Sent"})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(ze,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{children:[y.time," Â· ",y.duration," min"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Ct,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:"Use in-app chat to contact customer"})]}),e.jsxs("div",{className:"flex items-start gap-2 text-gray-600",children:[e.jsx(Pa,{className:"w-4 h-4 text-gray-400 mt-0.5"}),e.jsx("span",{className:"flex-1",children:y.location})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 flex items-center justify-between",children:[e.jsxs("span",{className:"font-semibold text-gray-900",children:["Rp ",y.price.toLocaleString()]}),e.jsx("div",{className:"px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg font-medium text-xs sm:text-sm",children:"ðŸ’¬ Use Chat"})]})]},y.$id))})]}),e.jsx("div",{className:"mt-6 bg-orange-50 border border-orange-200 rounded-xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(xa,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-900 mb-1 text-sm",children:"Automatic Reminders"}),e.jsx("p",{className:"text-xs text-orange-700 leading-relaxed",children:"Receive notifications 3 hours before each confirmed booking to help you prepare."})]})]})})]})})]})},Hu=({therapist:t,onBack:a})=>{const[s,n]=o.useState([]),[i,r]=o.useState(!0),[l,d]=o.useState(null);o.useEffect(()=>{g()},[t]);const g=async()=>{try{r(!0);const p=String(t.$id||t.id),w=(await nc.getUserPayments(p)).reduce((P,D)=>(P.some(O=>O.transactionId===D.transactionId&&O.submittedAt===D.submittedAt&&O.amount===D.amount&&O.packageType===D.packageType)||P.push(D),P),[]);n(w)}catch{}finally{r(!1)}},m=p=>{const R=new Date,P=new Date(p).getTime()-R.getTime(),D=Math.ceil(P/(1e3*60*60*24));return D>0?D:2},x=p=>{switch(p){case"pending":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-orange-50 text-orange-800 rounded-lg text-xs sm:text-sm font-semibold border border-orange-200",children:[e.jsx(ze,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Menunggu Review"]});case"approved":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-50 text-green-800 rounded-lg text-xs sm:text-sm font-semibold border border-green-200",children:[e.jsx($e,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Disetujui"]});case"declined":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-50 text-red-800 rounded-lg text-xs sm:text-sm font-semibold border border-red-200",children:[e.jsx(Ot,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Ditolak"]});default:return null}};if(i)return e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50 flex items-center justify-center",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(Bo,{className:"w-12 h-12 text-orange-500 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Memuat riwayat pembayaran..."})]})});const v=An.submitProof,j=An.paymentHistory,I=An.expiryDate;return e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:[e.jsx(ds,{title:"Riwayat Pembayaran",subtitle:"Lacak pengajuan dan persetujuan pembayaran Anda",onBackToStatus:a,icon:e.jsx(Rs,{className:"w-6 h-6 text-orange-600"}),actions:e.jsx("button",{onClick:a,className:"p-2 hover:bg-orange-50 rounded-lg transition-colors","aria-label":"Open menu",title:"Menu",children:e.jsx($o,{className:"w-5 h-5 text-orange-600"})})}),e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-4 space-y-4",children:[e.jsxs("section",{className:"bg-white border border-gray-200 rounded-lg p-4","aria-labelledby":"review-heading",children:[e.jsx("h2",{id:"review-heading",className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Proses Review"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(kt,{className:"w-5 h-5 text-orange-500 flex-shrink-0 mt-0.5"}),e.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Admin memeriksa pembayaran dalam 7 hari"}),e.jsx("li",{children:"â€¢ Pembayaran disetujui mengaktifkan membership langsung"}),e.jsx("li",{children:"â€¢ Pembayaran ditolak dapat dikirim ulang dengan bukti yang benar"})]})]})]}),e.jsxs("section",{className:"bg-white border border-gray-200 rounded-lg p-4","aria-labelledby":"help-heading",children:[e.jsx("h2",{id:"help-heading",className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Panduan"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:v.title}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:v.content}),v.benefits&&v.benefits.length>0&&e.jsx("ul",{className:"text-xs text-gray-600 space-y-0.5",children:v.benefits.map((p,R)=>e.jsxs("li",{children:["â€¢ ",p]},R))})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:j.title}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:j.content}),j.benefits&&j.benefits.length>0&&e.jsx("ul",{className:"text-xs text-gray-600 space-y-0.5",children:j.benefits.map((p,R)=>e.jsxs("li",{children:["â€¢ ",p]},R))})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:I.title}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:I.content}),I.benefits&&I.benefits.length>0&&e.jsx("ul",{className:"text-xs text-gray-600 space-y-0.5",children:I.benefits.map((p,R)=>e.jsxs("li",{children:["â€¢ ",p]},R))})]})]})]}),s.length===0?e.jsxs("section",{className:"bg-white border border-gray-200 rounded-lg p-8 text-center","aria-label":"Riwayat pembayaran kosong",children:[e.jsx(da,{className:"w-14 h-14 text-gray-300 mx-auto mb-3"}),e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-1",children:"Belum Ada Riwayat Pembayaran"}),e.jsx("p",{className:"text-sm text-gray-600 mb-5",children:"Anda belum mengirim bukti pembayaran. Silakan ke Membership untuk mengajukan pembayaran."}),e.jsx("button",{onClick:()=>a(),className:"px-5 py-2.5 bg-orange-600 text-white rounded-lg hover:bg-orange-700 font-medium text-sm",children:"Ke Membership"})]}):e.jsx("section",{className:"space-y-4","aria-label":"Daftar pembayaran",children:s.map(p=>{const R=m(p.expiresAt),w=R<=2&&p.status==="pending";return e.jsxs("div",{className:"bg-white border rounded-lg p-4 ".concat(w?"border-orange-400 border-2":"border-gray-200"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x(p.status),e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:new Date(p.submittedAt).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Rs,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Paket"}),e.jsx("p",{className:"text-sm font-bold text-black",children:p.packageType||"Membership"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ea,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Jumlah"}),e.jsxs("p",{className:"text-sm font-bold text-black",children:["IDR ",p.amount.toLocaleString()]})]})]}),p.packageDuration&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dt,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Durasi"}),e.jsx("p",{className:"text-sm font-bold text-black",children:p.packageDuration.replace("_"," ")})]})]})]}),p.status==="pending"&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ze,{className:"w-4 h-4 text-orange-600"}),e.jsx("p",{className:"text-xs sm:text-sm font-bold text-black",children:w?"âš ï¸ Segera kadaluarsa!":"Menunggu review"})]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-700",children:["Admin akan memeriksa dalam ",R," hari.",w&&" Mohon bersabar, admin akan merespons segera."]})]}),p.status==="approved"&&p.reviewedAt&&e.jsxs("div",{className:"bg-gray-100 border border-gray-300 rounded-lg p-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx($e,{className:"w-4 h-4 text-black"}),e.jsx("p",{className:"text-xs sm:text-sm font-bold text-black",children:"Pembayaran Dikonfirmasi âœ…"})]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-700",children:["Disetujui ",new Date(p.reviewedAt).toLocaleDateString("id-ID")," â€¢ ","Membership Anda aktif!"]})]}),p.status==="declined"&&e.jsxs("div",{className:"bg-gray-100 border border-gray-300 rounded-lg p-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ot,{className:"w-4 h-4 text-black"}),e.jsx("p",{className:"text-xs sm:text-sm font-bold text-black",children:"Pembayaran Ditolak"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-700 mb-2",children:p.declineReason||"Periksa bukti pembayaran dan kirim ulang."}),e.jsx("button",{onClick:()=>a(),className:"text-xs sm:text-sm text-orange-600 hover:text-orange-700 font-semibold",children:"Kirim Bukti Pembayaran Baru"})]}),e.jsx("button",{onClick:()=>d(p.paymentProofUrl),className:"w-full py-3 px-4 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors text-sm font-semibold",children:"Lihat Bukti Pembayaran"})]},p.$id)})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>d(null),children:e.jsxs("div",{className:"relative max-w-sm w-full",children:[e.jsx("button",{onClick:()=>d(null),className:"absolute -top-12 right-0 text-white hover:text-gray-300 text-sm font-semibold",children:"Tutup"}),e.jsx("img",{src:l,alt:"Payment Proof",className:"w-full h-auto rounded-lg shadow-2xl",onClick:p=>p.stopPropagation()})]})})]})]})},as=100;function oo(t){var a,s,n;for(let i=0;i<t.length;i++){const r=t[i],l=(a=r.price60)!=null&&a.trim()?parseInt(r.price60,10):NaN,d=(s=r.price90)!=null&&s.trim()?parseInt(r.price90,10):NaN,g=(n=r.price120)!=null&&n.trim()?parseInt(r.price120,10):NaN;if(!isNaN(l)&&l<as)return'Layanan "'.concat(r.serviceName||"Item "+(i+1),'": Harga 60 menit minimal Rp 100.000 (masukkan 100 atau lebih).');if(!isNaN(d)&&d<as)return'Layanan "'.concat(r.serviceName||"Item "+(i+1),'": Harga 90 menit minimal Rp 100.000 (masukkan 100 atau lebih).');if(!isNaN(g)&&g<as)return'Layanan "'.concat(r.serviceName||"Item "+(i+1),'": Harga 120 menit minimal Rp 100.000 (masukkan 100 atau lebih).')}return null}const Vu=({therapist:t,onNavigate:a,onLogout:s})=>{const[i,r]=o.useState([]),[l,d]=o.useState(!1),[g,m]=o.useState(!0),[x,v]=o.useState("idle"),[j,I]=o.useState(null),p=o.useRef(null),R=N=>{I(j===N?null:N)};o.useEffect(()=>{(async()=>{if(t){m(!0);try{const k=String(t.$id||t.id),b=await nn.getByTherapistId(k);if(b!=null&&b.menuData){const y=JSON.parse(b.menuData);r(y||[])}else r([])}catch{r([])}finally{m(!1)}}})()},[t]);const w=()=>{const N={id:Date.now().toString(),serviceName:"",min60:"60",price60:"",min90:"90",price90:"",min120:"120",price120:""};r([...i,N])},P=N=>{r(i.filter(k=>k.id!==N)),L()},D=(N,k,b)=>{r(i.map(y=>y.id===N?{...y,[k]:b}:y)),L()},L=()=>{p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{O()},2e3)},O=async()=>{if(!t)return;const N=i.filter(T=>T.serviceName.trim());if(N.length===0)return;const k=oo(N);if(k){se("âŒ ".concat(k),"error"),v("idle");return}const b=JSON.stringify(N),y=new Blob([b]).size;if(y>5e4){se("âš ï¸ Menu too large (".concat(y,"/50000 chars). Remove items or shorten names."),"error"),v("idle");return}v("saving");try{await nn.saveMenu(String(t.$id||t.id),b),v("saved"),setTimeout(()=>{v("idle")},2e3)}catch(T){T instanceof Error&&T.message.includes("50000 chars")&&se("âŒ Menu data exceeds 50000 character limit. Please remove some items.","error"),v("idle")}},H=async()=>{if(!t){se("âŒ No therapist data found","error");return}const N=i.filter(T=>T.serviceName.trim());if(N.length===0){se("âš ï¸ Add at least one service with a name","error");return}const k=oo(N);if(k){se("âŒ ".concat(k),"error");return}const b=JSON.stringify(N),y=new Blob([b]).size;if(y>5e4){se("âŒ Menu too large: ".concat(y,"/50000 characters. Remove ").concat(Math.ceil((y-5e4)/100)," items or shorten names/prices."),"error");return}d(!0);try{const T=await nn.saveMenu(String(t.$id||t.id),b);se("âœ… Menu saved! ".concat(N.length," services (").concat(y,"/50000 chars)"),"success"),r(N)}catch(T){se("âŒ Failed to save menu: ".concat(T instanceof Error?T.message:"Unknown error"),"error")}finally{d(!1)}},S=N=>{a&&a(N)};return e.jsx(Rt,{title:"Panduan Lengkap Menu Harga",subtitle:"Cara menggunakan sistem menu pricing",onBackToStatus:()=>a==null?void 0:a("therapist-status"),onNavigate:S,therapist:t,currentPage:"custom-menu",language:"id",onLogout:s,icon:e.jsx(Ls,{className:"w-6 h-6 text-orange-600"}),children:e.jsx("div",{className:"bg-white",children:e.jsxs("div",{className:"max-w-sm mx-auto px-4 pt-0 pb-3 space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"border-b border-gray-100",children:[e.jsxs("button",{onClick:()=>R("nama-layanan"),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(da,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Nama Layanan"})]}),j==="nama-layanan"?e.jsx(Mt,{className:"w-5 h-5 text-gray-400"}):e.jsx(Bt,{className:"w-5 h-5 text-gray-400"})]}),j==="nama-layanan"&&e.jsx("div",{className:"px-4 pb-4 bg-gray-50",children:e.jsxs("ul",{className:"text-sm text-gray-700 space-y-2 ml-11",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Contoh bagus:"}),' "Traditional Massage", "Relaxation Therapy", "Deep Tissue"']}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Tips:"})," Gunakan nama yang menarik dan profesional"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Variasi:"})," Student Massage, Couple Massage, Office Massage, Foot Massage"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Jangan:"})," Menggunakan nama yang membingungkan atau terlalu panjang"]})]})})]}),e.jsxs("div",{className:"border-b border-gray-100",children:[e.jsxs("button",{onClick:()=>R("kotak-min"),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(ze,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-semibold text-gray-800",children:'Kotak "Min" (Durasi Minimum)'})]}),j==="kotak-min"?e.jsx(Mt,{className:"w-5 h-5 text-gray-400"}):e.jsx(Bt,{className:"w-5 h-5 text-gray-400"})]}),j==="kotak-min"&&e.jsx("div",{className:"px-4 pb-4 bg-gray-50",children:e.jsxs("ul",{className:"text-sm text-gray-700 space-y-2 ml-11",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Jika diisi:"})," Durasi ini akan muncul di slider harga untuk pelanggan"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Jika kosong:"})," Durasi ini TIDAK akan ditampilkan ke pelanggan"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Contoh:"}),' Isi "60" untuk menampilkan opsi 60 menit']}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Fleksibel:"})," Bisa isi angka custom seperti 45, 75, 105 menit"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Strategy:"})," Kosongkan durasi yang tidak Anda tawarkan"]})]})})]}),e.jsxs("div",{className:"border-b border-gray-100",children:[e.jsxs("button",{onClick:()=>R("strategi-harga"),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(ea,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Strategi Harga (x1000)"})]}),j==="strategi-harga"?e.jsx(Mt,{className:"w-5 h-5 text-gray-400"}):e.jsx(Bt,{className:"w-5 h-5 text-gray-400"})]}),j==="strategi-harga"&&e.jsx("div",{className:"px-4 pb-4 bg-gray-50",children:e.jsxs("ul",{className:"text-sm text-gray-700 space-y-2 ml-11",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Format:"})," Masukkan angka tanpa ribu (150 = Rp 150.000)"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"60 menit:"})," Biasanya 100-200 (Rp 100k-200k)"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"90 menit:"})," Biasanya 150-250 (Rp 150k-250k)"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"120 menit:"})," Biasanya 200-300 (Rp 200k-300k)"]}),e.jsxs("li",{className:"text-orange-600 font-medium",children:["ðŸ’¡ Tips: Buat harga progresif (60min ","<"," 90min ","<"," 120min)"]})]})})]}),e.jsxs("div",{className:"border-b border-gray-100",children:[e.jsxs("button",{onClick:()=>R("customer-view"),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(ma,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Yang Dilihat Pelanggan"})]}),j==="customer-view"?e.jsx(Mt,{className:"w-5 h-5 text-gray-400"}):e.jsx(Bt,{className:"w-5 h-5 text-gray-400"})]}),j==="customer-view"&&e.jsx("div",{className:"px-4 pb-4 bg-gray-50",children:e.jsxs("ul",{className:"text-sm text-gray-700 space-y-2 ml-11",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Slider harga:"}),' Hanya durasi yang diisi kotak "Min"']}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Nama layanan:"})," Ditampilkan sebagai opsi pilihan"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Harga final:"})," Otomatis dikalikan 1000 (150 â†’ Rp 150.000)"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Booking:"})," Pelanggan pilih layanan + durasi + konfirmasi harga"]})]})})]}),e.jsxs("div",{className:"border-b border-gray-100",children:[e.jsxs("button",{onClick:()=>R("best-practices"),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(un,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Best Practices"})]}),j==="best-practices"?e.jsx(Mt,{className:"w-5 h-5 text-gray-400"}):e.jsx(Bt,{className:"w-5 h-5 text-gray-400"})]}),j==="best-practices"&&e.jsx("div",{className:"px-4 pb-4 bg-gray-50",children:e.jsxs("ul",{className:"text-sm text-gray-700 space-y-2 ml-11",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Minimal 1 layanan:"})," Buat setidaknya satu layanan dengan harga"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Harga kompetitif:"})," Riset harga terapis lain di area Anda"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Update berkala:"})," Sesuaikan harga berdasarkan demand"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Variasi menarik:"})," Buat nama layanan yang unik dan profesional"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Auto-save:"})," Sistem menyimpan otomatis setiap 2 detik"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Limit data:"})," Maksimal 50.000 karakter total"]})]})})]}),e.jsxs("div",{className:"border-b border-gray-100",children:[e.jsxs("button",{onClick:()=>R("contoh-menu"),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(Ls,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Contoh Menu Sukses"})]}),j==="contoh-menu"?e.jsx(Mt,{className:"w-5 h-5 text-gray-400"}):e.jsx(Bt,{className:"w-5 h-5 text-gray-400"})]}),j==="contoh-menu"&&e.jsx("div",{className:"px-4 pb-4 bg-gray-50",children:e.jsxs("div",{className:"space-y-3 ml-11",children:[e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200 text-sm",children:[e.jsx("p",{className:"font-semibold text-gray-900 mb-1",children:'"Traditional Relaxation Massage"'}),e.jsx("p",{className:"text-gray-600",children:"60 min: Min=60, Harga=150 (Rp 150.000)"}),e.jsx("p",{className:"text-gray-600",children:"90 min: Min=90, Harga=200 (Rp 200.000)"}),e.jsx("p",{className:"text-gray-400 italic",children:"120 min: Min=(kosong) â† Tidak ditampilkan"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200 text-sm",children:[e.jsx("p",{className:"font-semibold text-gray-900 mb-1",children:'"Student Special Massage"'}),e.jsx("p",{className:"text-gray-600",children:"60 min: Min=60, Harga=100 (Rp 100.000)"}),e.jsx("p",{className:"text-gray-400 italic",children:"90 min: Min=(kosong) â† Tidak ditampilkan"}),e.jsx("p",{className:"text-gray-400 italic",children:"120 min: Min=(kosong) â† Tidak ditampilkan"})]})]})})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>R("troubleshooting"),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(Pc,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Troubleshooting"})]}),j==="troubleshooting"?e.jsx(Mt,{className:"w-5 h-5 text-gray-400"}):e.jsx(Bt,{className:"w-5 h-5 text-gray-400"})]}),j==="troubleshooting"&&e.jsx("div",{className:"px-4 pb-4 bg-gray-50",children:e.jsxs("ul",{className:"text-sm text-gray-700 space-y-2 ml-11",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Tidak bisa save:"})," Pastikan ada minimal 1 layanan dengan nama"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Data terlalu besar:"})," Kurangi jumlah layanan atau perpendek nama"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Harga tidak muncul:"}),' Pastikan kotak "Min" terisi angka']}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Auto-save gagal:"})," Check koneksi internet dan coba manual save"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Pelanggan tidak lihat:"}),' Pastikan sudah klik "Simpan Menu"']})]})})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"ðŸ’¡ Tips:"}),' Kosongkan kotak "Min" jika Anda tidak ingin durasi tersebut muncul pada slider harga menu untuk pelanggan.']})}),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[i.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Belum ada layanan. Klik "+ Tambah Layanan Baru" untuk memulai.'}),i.map((N,k)=>e.jsxs("div",{className:"bg-white border-2 border-orange-200 rounded-lg p-3 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",value:N.serviceName,onChange:b=>D(N.id,"serviceName",b.target.value),className:"w-full border-2 border-gray-300 rounded-lg px-3 py-2 text-sm font-semibold focus:border-orange-500 outline-none",placeholder:"Nama layanan"})}),e.jsxs("div",{className:"flex items-start gap-1.5 horizontal-scroll-safe",children:[e.jsxs("div",{className:"flex-1 min-w-[80px]",children:[e.jsxs("div",{className:"flex items-center justify-center gap-0.5 mb-1",children:[e.jsx("span",{className:"text-[10px] text-gray-600 font-semibold",children:"Min:"}),e.jsx("input",{type:"text",value:N.min60||"",onChange:b=>{const y=b.target.value.replace(/\D/g,"").slice(0,3);D(N.id,"min60",y)},onBlur:b=>{b.target.value||D(N.id,"min60","60")},className:"w-12 border-2 border-orange-300 rounded px-1 py-0.5 text-xs font-bold text-center focus:border-orange-500 focus:outline-none bg-white",placeholder:"60",maxLength:3}),e.jsx("span",{className:"text-[10px] text-gray-600",children:"min"})]}),e.jsx("input",{type:"text",value:N.price60,onChange:b=>{const y=b.target.value.replace(/\D/g,"").slice(0,3);D(N.id,"price60",y)},onBlur:()=>{const b=parseInt(N.price60,10);N.price60&&!isNaN(b)&&b<as&&D(N.id,"price60","100")},className:"w-full border border-gray-300 rounded px-1.5 py-1.5 text-sm font-bold text-center focus:border-orange-500 focus:outline-none",placeholder:"150",maxLength:3}),e.jsx("div",{className:"text-[9px] text-gray-500 text-center mt-0.5",children:"Ã—1000"})]}),e.jsxs("div",{className:"flex-1 min-w-[80px]",children:[e.jsxs("div",{className:"flex items-center justify-center gap-0.5 mb-1",children:[e.jsx("span",{className:"text-[10px] text-gray-600 font-semibold",children:"Min:"}),e.jsx("input",{type:"text",value:N.min90||"",onChange:b=>{const y=b.target.value.replace(/\D/g,"").slice(0,3);D(N.id,"min90",y)},onBlur:b=>{b.target.value||D(N.id,"min90","90")},className:"w-12 border-2 border-orange-300 rounded px-1 py-0.5 text-xs font-bold text-center focus:border-orange-500 focus:outline-none bg-white",placeholder:"90",maxLength:3}),e.jsx("span",{className:"text-[10px] text-gray-600",children:"min"})]}),e.jsx("input",{type:"text",value:N.price90,onChange:b=>{const y=b.target.value.replace(/\D/g,"").slice(0,3);D(N.id,"price90",y)},onBlur:()=>{const b=parseInt(N.price90,10);N.price90&&!isNaN(b)&&b<as&&D(N.id,"price90","100")},className:"w-full border border-gray-300 rounded px-1.5 py-1.5 text-sm font-bold text-center focus:border-orange-500 focus:outline-none",placeholder:"200",maxLength:3}),e.jsx("div",{className:"text-[9px] text-gray-500 text-center mt-0.5",children:"Ã—1000"})]}),e.jsxs("div",{className:"flex-1 min-w-[80px]",children:[e.jsxs("div",{className:"flex items-center justify-center gap-0.5 mb-1",children:[e.jsx("span",{className:"text-[10px] text-gray-600 font-semibold",children:"Min:"}),e.jsx("input",{type:"text",value:N.min120||"",onChange:b=>{const y=b.target.value.replace(/\D/g,"").slice(0,3);D(N.id,"min120",y)},onBlur:b=>{b.target.value||D(N.id,"min120","120")},className:"w-12 border-2 border-orange-300 rounded px-1 py-0.5 text-xs font-bold text-center focus:border-orange-500 focus:outline-none bg-white",placeholder:"120",maxLength:3}),e.jsx("span",{className:"text-[10px] text-gray-600",children:"min"})]}),e.jsx("input",{type:"text",value:N.price120,onChange:b=>{const y=b.target.value.replace(/\D/g,"").slice(0,3);D(N.id,"price120",y)},onBlur:()=>{const b=parseInt(N.price120,10);N.price120&&!isNaN(b)&&b<as&&D(N.id,"price120","100")},className:"w-full border border-gray-300 rounded px-1.5 py-1.5 text-sm font-bold text-center focus:border-orange-500 focus:outline-none",placeholder:"250",maxLength:3}),e.jsx("div",{className:"text-[9px] text-gray-500 text-center mt-0.5",children:"Ã—1000"})]}),e.jsx("button",{onClick:()=>P(N.id),className:"flex-shrink-0 flex items-center justify-center p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg","aria-label":"Delete service",children:e.jsx(Ic,{className:"w-5 h-5"})})]})]},N.id))]}),e.jsxs("button",{onClick:w,className:"w-full py-3 px-4 bg-white border-2 border-dashed border-orange-300 text-orange-600 rounded-xl font-semibold hover:bg-orange-50 flex items-center justify-center gap-2",children:[e.jsx(Si,{className:"w-5 h-5"}),"Tambah Layanan Baru"]}),e.jsx("button",{onClick:H,disabled:l,className:"w-full py-3 px-4 rounded-xl font-bold text-white mt-3 flex items-center justify-center gap-2 transition-all ".concat(l?"bg-gray-400 cursor-not-allowed":"bg-orange-500 hover:bg-orange-600"),children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Menyimpan..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ki,{className:"w-5 h-5"}),"Simpan Menu"]})})]})]})})})},Wu=(t,a=!1)=>{const[s,n]=o.useState({hours:0,minutes:0,seconds:0,total:0,expired:!1});return o.useEffect(()=>{if(a)return;const i=()=>{const l=new Date().getTime(),g=new Date(t).getTime()-l;return g<=0?{hours:0,minutes:0,seconds:0,total:0,expired:!0}:{hours:Math.floor(g/(1e3*60*60)),minutes:Math.floor(g%(1e3*60*60)/(1e3*60)),seconds:Math.floor(g%(1e3*60)/1e3),total:g,expired:!1}};n(i());const r=setInterval(()=>n(i()),1e3);return()=>clearInterval(r)},[t,a]),s},Hn=({value:t,label:a,isUrgent:s})=>e.jsxs("div",{className:"flex flex-col items-center ".concat(s?"animate-pulse":""),children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl flex items-center justify-center font-bold text-lg sm:text-xl shadow-inner ".concat(s?"bg-red-500 text-white":"bg-gray-800 text-white"),children:String(t).padStart(2,"0")}),e.jsx("span",{className:"text-xs mt-1 font-medium ".concat(s?"text-red-600":"text-gray-500"),children:a})]}),zu=({payment:t,index:a,paymentProofs:s,uploadingFor:n,onUpload:i,onRemoveProof:r,onSubmit:l,language:d})=>{var P;const m=s[t.$id],x=n===t.$id,v=m&&m.preview,j=t.status==="awaiting_verification";t.status;const I=t.status==="overdue",p=Wu(t.paymentDeadline,j||v),R=p.hours===0&&p.minutes<30&&!p.expired,w=D=>{if(D>=60){const L=Math.floor(D/60),O=D%60;return O>0?"".concat(L,"h ").concat(O,"min"):"".concat(L," hour").concat(L>1?"s":"")}return"".concat(D," min")};return e.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-lg border-2 transition-all ".concat(I?"border-red-400 shadow-red-100":j?"border-green-400 shadow-green-100":R?"border-amber-400 shadow-amber-100":"border-gray-200"),children:[e.jsx("div",{className:"px-4 py-3 ".concat(I?"bg-red-500":j?"bg-green-500":R?"bg-amber-500":"bg-gradient-to-r from-orange-500 to-amber-500"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[j?e.jsx($e,{className:"w-5 h-5 text-white"}):I?e.jsx(ns,{className:"w-5 h-5 text-white"}):e.jsx(Fo,{className:"w-5 h-5 text-white"}),e.jsx("span",{className:"text-white font-bold text-sm",children:j?"âœ“ Proof Submitted - Awaiting Admin":I?"âš ï¸ OVERDUE - Account Locked":"Payment #".concat(a+1," Due")})]}),e.jsx("span",{className:"text-white/80 text-xs font-mono",children:((P=t.bookingId)==null?void 0:P.slice(-8))||"N/A"})]})}),!j&&!I&&!p.expired&&e.jsxs("div",{className:"bg-gray-900 py-4",children:[e.jsx("p",{className:"text-center text-gray-400 text-xs mb-2 uppercase tracking-wider",children:d==="id"?"Waktu Tersisa Sebelum Akun Terkunci":"Time Remaining Before Account Lock"}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(Hn,{value:p.hours,label:d==="id"?"Jam":"Hours",isUrgent:R}),e.jsx("div",{className:"flex items-center text-2xl text-gray-500 font-bold",children:":"}),e.jsx(Hn,{value:p.minutes,label:d==="id"?"Menit":"Min",isUrgent:R}),e.jsx("div",{className:"flex items-center text-2xl text-gray-500 font-bold",children:":"}),e.jsx(Hn,{value:p.seconds,label:d==="id"?"Detik":"Sec",isUrgent:R})]}),R&&e.jsxs("p",{className:"text-center text-red-400 text-xs mt-2 animate-pulse",children:["âš ï¸ ",d==="id"?"Segera upload bukti pembayaran!":"Upload payment proof now!"]}),e.jsx("div",{className:"mt-3 mx-4 bg-red-900/50 border border-red-500 rounded-lg p-3",children:e.jsxs("p",{className:"text-center text-red-300 text-xs font-bold",children:["âš ï¸ ",d==="id"?"PERINGATAN: Jika waktu habis, biaya keterlambatan IDR 50.000 akan ditambahkan!":"WARNING: If timer expires, late fee of IDR 50,000 will be added!"]})})]}),j&&e.jsx("div",{className:"bg-green-50 border-b-2 border-green-200 py-4 px-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center animate-bounce",children:e.jsx(ss,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-800 font-bold text-lg",children:d==="id"?"Akun Sekarang Aktif!":"Account Now Active!"}),e.jsx("p",{className:"text-green-600 text-sm",children:d==="id"?"Admin akan konfirmasi dalam 48 jam":"Admin will confirm within 48 hours"})]})]})}),I&&e.jsxs("div",{className:"bg-red-50 border-b-2 border-red-200 py-4 px-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[e.jsx(ns,{className:"w-10 h-10 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-800 font-bold",children:d==="id"?"Akun Status: SIBUK":"Account Status: BUSY"}),e.jsx("p",{className:"text-red-600 text-sm",children:d==="id"?"Upload bukti pembayaran untuk mengaktifkan kembali":"Upload payment proof to reactivate"})]})]}),e.jsx("div",{className:"bg-red-100 border-2 border-red-400 rounded-lg p-3 mt-2",children:e.jsxs("p",{className:"text-center text-red-800 font-bold text-sm",children:["âš ï¸ ",d==="id"?"BIAYA KETERLAMBATAN: IDR 50.000 ditambahkan ke total pembayaran":"LATE FEE: IDR 50,000 added to total payment"]})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b border-gray-200",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Ct,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:d==="id"?"Nama Pelanggan":"Customer Name"}),e.jsx("p",{className:"font-bold text-gray-900",children:t.customerName||"Customer"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:d==="id"?"Jenis Pijat":"Massage Type"}),e.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:t.massageType||"Massage"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:d==="id"?"Durasi":"Duration"}),e.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:w(t.duration||60)})]})]})]}),e.jsxs("div",{className:"rounded-xl p-4 ".concat(I?"bg-red-50":"bg-orange-50"),children:[e.jsxs("div",{className:"flex justify-between items-center mb-3 pb-3 border-b border-orange-200",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:d==="id"?"Harga Layanan":"Service Price"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["IDR ",(t.serviceAmount||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-orange-700 font-bold",children:["30% ",d==="id"?"Komisi Admin":"Admin Commission"]})}),e.jsxs("span",{className:"font-semibold text-orange-600",children:["IDR ",(t.commissionAmount||0).toLocaleString()]})]}),I&&e.jsxs("div",{className:"flex justify-between items-center mb-2 pb-2 border-b border-red-300",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-red-700 font-bold",children:["âš ï¸ ",d==="id"?"Biaya Keterlambatan":"Late Payment Fee"]}),e.jsx("p",{className:"text-xs text-red-500",children:d==="id"?"Denda karena melewati batas waktu":"Penalty for exceeding deadline"})]}),e.jsxs("span",{className:"font-bold text-red-600",children:["+ IDR ",5e4.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-lg ".concat(I?"text-red-800":"text-orange-700"),children:d==="id"?"TOTAL YANG HARUS DIBAYAR":"TOTAL DUE"}),!I&&e.jsx("p",{className:"text-xs text-orange-600",children:d==="id"?"Bayar dalam 5 jam":"Pay within 5 hours"})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-3xl font-black ".concat(I?"text-red-600":"text-orange-600"),children:["IDR ",((t.commissionAmount||0)+(I?5e4:0)).toLocaleString()]})})]})]}),!j&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsxs("label",{className:"text-sm font-bold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(Ca,{className:"w-4 h-4 text-orange-500"}),d==="id"?"Upload Bukti Pembayaran":"Upload Payment Proof"," *"]}),e.jsx("input",{type:"file",accept:"image/*",onChange:D=>i(D,t.$id),className:"hidden",id:"proof-upload-".concat(t.$id),disabled:x}),v?e.jsxs("div",{className:"relative mt-3",children:[e.jsx("img",{src:m.preview,alt:"Payment Proof",className:"w-full rounded-lg border-2 border-green-400"}),e.jsx("button",{onClick:()=>r(t.$id),disabled:x,className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50",children:e.jsx(Ot,{className:"w-5 h-5"})}),e.jsxs("div",{className:"absolute bottom-2 left-2 right-2 bg-green-500 text-white text-center py-2 rounded-lg font-semibold text-sm",children:["âœ“ ",d==="id"?"Bukti Siap Dikirim":"Proof Ready to Submit"]})]}):e.jsxs("label",{htmlFor:"proof-upload-".concat(t.$id),className:"flex flex-col items-center justify-center py-8 cursor-pointer bg-gray-50 hover:bg-orange-50 rounded-lg transition-colors border-2 border-dashed border-gray-300 mt-3",children:[e.jsx(Ca,{className:"w-10 h-10 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-900 font-medium",children:d==="id"?"Klik untuk upload":"Click to upload"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG max 5MB"})]})]}),!j&&e.jsx("button",{onClick:()=>l(t),disabled:!v||x,className:"w-full py-4 rounded-xl font-bold text-white transition-all flex items-center justify-center gap-2 ".concat(!v||x?"bg-gray-300 cursor-not-allowed":"bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 active:scale-98 shadow-lg"),children:x?e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-5 h-5 animate-spin"}),d==="id"?"Mengirim...":"Submitting..."]}):e.jsxs(e.Fragment,{children:[d==="id"?"Kirim Bukti Pembayaran":"Submit Payment Proof",e.jsx(Cc,{className:"w-5 h-5"})]})})]})]})},Gu=({therapist:t,onBack:a,language:s="id"})=>{const[n,i]=o.useState([]),[r,l]=o.useState(!0),[d,g]=o.useState(null),[m,x]=o.useState({}),[v,j]=o.useState(""),[I,p]=o.useState({bankName:"BNI",accountName:"Philip Francis O Farrell",accountNumber:"1354188005",swiftCode:"BNINIDJA"}),w={en:{title:"Commission Payment",subtitle:"Pay your 30% booking commission",paymentSummary:"Payment Summary",bookingAmount:"Booking Amount",commissionRate:"Commission Rate",amountDue:"Amount Due",paymentInstructions:"Payment Instructions",instruction1:"â€¢ Transfer the commission amount to the account above",instruction2:"â€¢ Take a clear photo of the transaction receipt",instruction3:"â€¢ Upload the payment proof below",instruction4:"â€¢ Your commission will be verified within 24 hours",officialAccount:"âš ï¸ Official Payment Account Only",bank:"Bank",accountNumber:"Account Number",accountName:"Account Name",swiftCode:"SWIFT Code",securityWarning:"ðŸ›¡ï¸ Security Warning: Payments are ONLY made to this account. Never pay anyone asking for payment if the details don't match these exact details. Report any suspicious requests immediately.",uploadProof:"Upload Payment Proof *",clickUpload:"Click to upload",fileTypes:"PNG, JPG up to 5MB",submitting:"Submitting...",submitPayment:"Submit Payment"},id:{title:"Pembayaran Komisi",subtitle:"Bayar komisi booking 30% Anda",paymentSummary:"Ringkasan Pembayaran",bookingAmount:"Jumlah Booking",commissionRate:"Tarif Komisi",amountDue:"Jumlah yang Harus Dibayar",paymentInstructions:"Instruksi Pembayaran",instruction1:"â€¢ Transfer jumlah komisi ke akun di atas",instruction2:"â€¢ Ambil foto yang jelas dari struk transaksi",instruction3:"â€¢ Upload bukti pembayaran di bawah",instruction4:"â€¢ Komisi Anda akan diverifikasi dalam 24 jam",officialAccount:"âš ï¸ Rekening Pembayaran Resmi Saja",bank:"Bank",accountNumber:"Nomor Rekening",accountName:"Nama Rekening",swiftCode:"Kode SWIFT",securityWarning:"ðŸ›¡ï¸ Peringatan Keamanan: Pembayaran HANYA dilakukan ke rekening ini. Jangan pernah membayar siapa pun yang meminta pembayaran jika detailnya tidak cocok dengan detail yang tepat ini. Laporkan permintaan yang mencurigakan segera.",uploadProof:"Upload Bukti Pembayaran *",clickUpload:"Klik untuk upload",fileTypes:"PNG, JPG maksimal 5MB",submitting:"Mengirim...",submitPayment:"Kirim Pembayaran"}}[s];o.useEffect(()=>{P()},[t]);const P=async()=>{if(t){l(!0);try{const S=String(t.$id||t.id),N=await ai.getTherapistPendingPayments(S);i(N),N.length===0&&se("âœ… No pending commission payments!","success")}catch{se("âš ï¸ Failed to load commission payments","error")}finally{l(!1)}}},D=n.reduce((S,N)=>S+N.commissionAmount,0);o.useEffect(()=>{(async()=>{try{const{databases:N}=await z(async()=>{const{databases:b}=await import("./route-therapist.DVVqC6AH.js").then(y=>y.br);return{databases:b}},__vite__mapDeps([0,1,2,3,4,5,6])),k=await N.listDocuments("68f76ee1000e64ca8d05","admin_settings",[]);if(k.documents.length>0){const b=k.documents[0];p({bankName:b.bankname||"BNI",accountName:b.bankaccountdetails||"Philip Francis O Farrell",accountNumber:b.settingValue||"1354188005",swiftCode:b.description||"BNINIDJA"})}}catch{}})()},[]);const L=(S,N)=>{var y;const k=(y=S.target.files)==null?void 0:y[0];if(!k)return;if(!k.type.startsWith("image/")){se("âš ï¸ Please upload an image file","error");return}if(k.size>5*1024*1024){se("âš ï¸ File size must be less than 5MB","error");return}const b=new FileReader;b.onloadend=()=>{x(T=>({...T,[N]:{file:k,preview:b.result}}))},b.readAsDataURL(k),se("âœ… Payment proof selected","success")},O=S=>{x(N=>{const k={...N};return delete k[S],k})},H=async S=>{if(!t){se("âŒ No therapist data found","error");return}const N=S.$id,k=m[N];if(!k||!k.file&&!k.preview){se("âš ï¸ Please upload payment proof","error");return}g(N);try{let b=k.preview;if(k.file)try{b=await ti.uploadImage(k.file,"commission-proofs"),se("âœ… Payment proof uploaded","success")}catch{se("âŒ Failed to upload payment proof","error"),g(null);return}await ai.uploadPaymentProof(N,b,"bank_transfer"),se("âœ… Payment proof submitted! Account activated.","success"),i(y=>y.filter(T=>T.$id!==N)),O(N),setTimeout(()=>{P()},1e3)}catch{se("âŒ Failed to submit payment proof","error")}finally{g(null)}};return e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-white  ",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:[e.jsx(ds,{title:"",subtitle:"Bayar komisi booking 30% Anda",onBackToStatus:a,icon:e.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(Wr,{className:"w-5 h-5 text-white"})}),actions:e.jsx(Nt,{...Yc.overview,position:"left",size:"md"})}),e.jsx("div",{className:"max-w-sm mx-auto px-4 pt-6 pb-4",children:e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(Wr,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Pembayaran Komisi 30%"})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx(ze,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:[((t==null?void 0:t.onlineHoursThisMonth)||0).toFixed(1),"j"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"bulan ini"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>{},className:"p-4 rounded-xl border-2 transition-all ".concat((t==null?void 0:t.status)==="available"&&(t==null?void 0:t.availability)==="online"?"bg-green-50 border-green-500":"border-gray-200 hover:border-green-300"),children:[e.jsx($e,{className:"w-6 h-6 mx-auto mb-2 ".concat((t==null?void 0:t.status)==="available"&&(t==null?void 0:t.availability)==="online"?"text-green-600":"text-gray-400")}),e.jsx("p",{className:"text-sm font-semibold ".concat((t==null?void 0:t.status)==="available"&&(t==null?void 0:t.availability)==="online"?"text-green-700":"text-gray-600"),children:"Tersedia"})]}),e.jsxs("button",{onClick:()=>{},className:"p-4 rounded-xl border-2 transition-all ".concat((t==null?void 0:t.status)==="busy"?"bg-amber-50 border-amber-500":"border-gray-200 hover:border-amber-300"),children:[e.jsx(ze,{className:"w-6 h-6 mx-auto mb-2 ".concat((t==null?void 0:t.status)==="busy"?"text-amber-600":"text-gray-400")}),e.jsx("p",{className:"text-sm font-semibold ".concat((t==null?void 0:t.status)==="busy"?"text-amber-700":"text-gray-600"),children:"Sibuk"})]}),e.jsxs("button",{onClick:()=>{},className:"p-4 rounded-xl border-2 transition-all ".concat((t==null?void 0:t.availability)==="offline"?"bg-red-50 border-red-500":"border-gray-200 hover:border-red-300"),children:[e.jsx(Ot,{className:"w-6 h-6 mx-auto mb-2 ".concat((t==null?void 0:t.availability)==="offline"?"text-red-600":"text-gray-400")}),e.jsx("p",{className:"text-sm font-semibold ".concat((t==null?void 0:t.availability)==="offline"?"text-red-700":"text-gray-600"),children:"Offline"})]})]})]})}),e.jsxs("div",{className:"p-3 sm:p-5 space-y-4 max-w-7xl mx-auto",children:[r?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-8 text-center",children:[e.jsx(ze,{className:"w-12 h-12 text-orange-500 mx-auto mb-3 animate-spin"}),e.jsx("p",{className:"text-gray-600",children:"Loading commission payments..."})]}):n.length===0?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-12 text-center",children:[e.jsx($e,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"All Clear!"}),e.jsx("p",{className:"text-gray-600",children:"No pending commission payments"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 border-2 border-orange-200 rounded-lg p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Pending Commissions"}),e.jsxs("p",{className:"text-2xl sm:text-3xl font-bold text-orange-600",children:["IDR ",D.toLocaleString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Payments Due"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:n.length})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-orange-700 bg-orange-100 rounded-lg p-2",children:[e.jsx(kt,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"Upload payment proofs to keep your account active and accept new bookings"})]})]}),n.map((S,N)=>e.jsx(zu,{payment:S,index:N,paymentProofs:m,uploadingFor:d,onUpload:L,onRemoveProof:O,onSubmit:H,language:s},S.$id))]}),e.jsxs("div",{className:"bg-white border-2 border-orange-300 rounded-lg p-4",children:[e.jsx("h3",{className:"text-base font-bold text-orange-600 mb-3 uppercase tracking-wide",children:w.officialAccount}),e.jsx("div",{className:"relative w-full h-48 rounded-lg overflow-hidden mb-4",children:e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/bni_card-removebg-preview.png?updatedAt=1766127885485",alt:"BNI Card",className:"w-full h-full object-contain"})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm mb-4",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600 font-semibold",children:[w.bank,":"]}),e.jsx("p",{className:"text-black font-bold",children:I.bankName})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600 font-semibold",children:[w.accountNumber,":"]}),e.jsx("p",{className:"text-black font-bold font-mono break-all",children:I.accountNumber})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600 font-semibold",children:[w.accountName,":"]}),e.jsx("p",{className:"text-black font-bold",children:I.accountName})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600 font-semibold",children:[w.swiftCode,":"]}),e.jsx("p",{className:"text-black font-bold font-mono",children:I.swiftCode})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3",children:[e.jsx("p",{className:"text-xs font-bold text-blue-900 mb-2",children:w.paymentInstructions}),e.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[e.jsx("li",{children:w.instruction1}),e.jsx("li",{children:w.instruction2}),e.jsx("li",{children:w.instruction3}),e.jsx("li",{children:w.instruction4})]})]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(kt,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-red-700 font-semibold",children:w.securityWarning})]})})]})]})]})},Ku=({onBack:t,onNavigate:a,onAcceptTerms:s,t:n,language:i="en"})=>{const r=()=>{if(typeof window!="undefined"){const j=localStorage.getItem("pendingTermsPlan");if(j==="pro"||j==="plus")return j}return"pro"},[l,d]=o.useState(r),g=l==="pro",m=(j,I)=>{var p;return((p=n==null?void 0:n.packageTerms)==null?void 0:p[j])||I};o.useEffect(()=>{const j=localStorage.getItem("pendingTermsPlan");(j==="pro"||j==="plus")&&d(j)},[]);const x=()=>{const j=JSON.parse(localStorage.getItem("acceptedTerms")||"{}");j[l]=!0,localStorage.setItem("acceptedTerms",JSON.stringify(j)),localStorage.setItem("membership_terms_accepted","true"),localStorage.setItem("membership_terms_date",new Date().toISOString()),localStorage.setItem("selected_membership_plan",l),localStorage.removeItem("pendingTermsPlan"),s&&s(l),a?a("packages"):t()},v=()=>{localStorage.removeItem("pendingTermsPlan"),t()};return e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-white  ",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:[e.jsx("header",{className:"bg-white shadow-md sticky top-0 z-[9997] w-full",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:v,className:"hover:bg-orange-50 rounded-full transition-colors text-gray-600 flex-shrink-0 min-w-[44px] min-h-[44px] w-10 h-10 sm:w-11 sm:h-11 flex items-center justify-center",title:"Back",children:e.jsx(Tc,{className:"w-5 h-5"})}),e.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 flex-shrink-0",children:[e.jsx("span",{className:"text-black",children:"Inda"}),e.jsx("span",{className:"text-orange-500",children:"Street"})]}),e.jsx("div",{className:"flex items-center gap-2 sm:gap-3 text-gray-600 flex-shrink-0",children:e.jsx("button",{onClick:v,className:"hover:bg-orange-50 rounded-full transition-colors text-gray-600 flex-shrink-0 min-w-[44px] min-h-[44px] w-10 h-10 sm:w-11 sm:h-11 flex items-center justify-center",title:"Back to Dashboard",children:e.jsx(ls,{className:"w-5 h-5"})})})]})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-r from-orange-500 to-orange-600 mb-4",children:e.jsx(dn,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:m("title",i==="id"?"Syarat & Ketentuan Keanggotaan":"Membership Terms & Conditions")}),e.jsx(Nt,{...Qc.overview,position:"bottom",size:"md"})]}),e.jsx("p",{className:"text-lg text-gray-600",children:g?i==="id"?"Paket Pro - Sistem Komisi":"Pro Package - Commission System":i==="id"?"Paket Premium - Langganan Premium":"Premium Package - Premium Subscription"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 md:p-8 mb-8",children:e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:i==="id"?"Ketentuan Layanan":"Terms of Service"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:i==="id"?"Dengan menerima syarat dan ketentuan ini, Anda setuju untuk terikat dengan semua kebijakan dan prosedur IndaStreet.":"By accepting these terms and conditions, you agree to be bound by all IndaStreet policies and procedures."}),e.jsx("h4",{className:"font-semibold text-gray-900",children:g?i==="id"?"1. Paket Pro (Sistem Komisi)":"1. Pro Package (Commission System)":i==="id"?"1. Paket Premium (Langganan Bulanan)":"1. Premium Package (Monthly Subscription)"}),g?e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:i==="id"?"Biaya bulanan: Rp 0":"Monthly fee: Rp 0"}),e.jsx("li",{children:i==="id"?"Komisi per booking: 30% dari total pembayaran":"Commission per booking: 30% of total payment"}),e.jsx("li",{children:i==="id"?"Akses penuh ke semua fitur platform":"Full access to all platform features"}),e.jsx("li",{children:i==="id"?"Dukungan pelanggan prioritas":"Priority customer support"})]}):e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:i==="id"?"Biaya bulanan: Rp 250.000":"Monthly fee: Rp 250,000"}),e.jsx("li",{children:i==="id"?"Komisi: 0% - Anda menyimpan semua pendapatan":"Commission: 0% - You keep all earnings"}),e.jsx("li",{children:i==="id"?"Akses premium ke semua fitur":"Premium access to all features"}),e.jsx("li",{children:i==="id"?"Akses nomor WhatsApp pelanggan":"Access to customer WhatsApp numbers"}),e.jsx("li",{children:i==="id"?"Status Busy tanpa batas waktu":"Unlimited Busy status time"}),e.jsx("li",{children:i==="id"?"Dukungan pelanggan VIP":"VIP customer support"})]}),e.jsx("h4",{className:"font-semibold text-gray-900 mt-6",children:i==="id"?"2. Kewajiban Member":"2. Member Obligations"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:i==="id"?"Memberikan layanan berkualitas tinggi":"Provide high-quality services"}),e.jsx("li",{children:i==="id"?"Mematuhi standar profesional platform":"Comply with platform professional standards"}),e.jsx("li",{children:i==="id"?"Merespons booking dalam waktu yang wajar":"Respond to bookings in a timely manner"}),e.jsx("li",{children:i==="id"?"Mempertahankan rating pelanggan yang baik":"Maintain good customer ratings"})]}),e.jsx("h4",{className:"font-semibold text-gray-900 mt-6",children:i==="id"?"3. Pembayaran dan Penagihan":"3. Payment and Billing"}),e.jsx("p",{children:g?i==="id"?"Komisi akan dipotong secara otomatis dari setiap pembayaran yang diterima. Sisa pembayaran akan ditransfer ke akun Anda dalam 24-48 jam.":"Commission will be automatically deducted from each payment received. Remaining payment will be transferred to your account within 24-48 hours.":i==="id"?"Biaya langganan bulanan akan dipotong otomatis setiap bulan. Semua pembayaran dari pelanggan akan ditransfer penuh ke akun Anda.":"Monthly subscription fee will be automatically charged each month. All customer payments will be transferred in full to your account."}),e.jsx("h4",{className:"font-semibold text-gray-900 mt-6",children:i==="id"?"4. Pembatalan dan Pengembalian Dana":"4. Cancellation and Refunds"}),e.jsx("p",{children:i==="id"?"Anda dapat membatalkan keanggotaan kapan saja. Pengembalian dana akan diproses sesuai dengan kebijakan pengembalian dana kami.":"You may cancel your membership at any time. Refunds will be processed according to our refund policy."})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx("button",{onClick:v,className:"px-8 py-3 rounded-xl border-2 border-gray-300 text-gray-700 hover:bg-gray-50 font-semibold transition-colors",children:i==="id"?"Kembali":"Cancel"}),e.jsx("button",{onClick:x,className:"px-8 py-3 rounded-xl bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold transition-colors shadow-lg",children:i==="id"?"Saya Setuju & Lanjutkan":"I Agree & Continue"})]}),e.jsx("div",{className:"text-center mt-8",children:e.jsx("p",{className:"text-sm text-gray-500",children:i==="id"?"Dengan melanjutkan, Anda setuju dengan semua syarat dan ketentuan di atas":"By continuing, you agree to all the terms and conditions above"})})]})]})};function Ju(t,a){const s=t.split(" ").map(r=>r[0]).join("").toUpperCase().substring(0,2),n=Math.random().toString(36).substring(2,7).toUpperCase(),i=Date.now().toString(36).substring(-3).toUpperCase();return"".concat(s).concat(a,"-").concat(n).concat(i)}async function qu(t){try{if((await je.listDocuments(Pe.databaseId,"discount_codes",[ae.equal("therapistId",t.therapistId),ae.equal("customerId",t.customerId),ae.equal("isUsed",!1),ae.greaterThan("expiresAt",new Date().toISOString())])).documents.length>0)return{success:!1,error:"Customer already has an active discount from you"};const s=Ju(t.therapistName,t.discountPercentage),n=t.validityDays||30,i=new Date;i.setDate(i.getDate()+n);const r={code:s,therapistId:t.therapistId,therapistName:t.therapistName,customerId:t.customerId,customerName:t.customerName||"",discountPercentage:t.discountPercentage,isUsed:!1,expiresAt:i.toISOString(),createdAt:new Date().toISOString(),source:t.source,bannerImageUrl:t.bannerImageUrl||"",providerId:t.therapistId,providerType:"therapist",userId:t.customerId};return{success:!0,code:await je.createDocument(Pe.databaseId,"discount_codes",yt.unique(),r)}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Failed to generate discount"}}}const Yu=({therapist:t,language:a,onBack:s,onNavigate:n})=>{const[i,r]=o.useState([]),[l,d]=o.useState(!0),[g,m]=o.useState(""),[x,v]=o.useState(null),[j,I]=o.useState(!1),[p,R]=o.useState(null),[w,P]=o.useState(!1),[D,L]=o.useState(null),[O,H]=o.useState(new Set),[S,N]=o.useState(new Set),[k,b]=o.useState({totalDiscountsSent:0,activeDiscounts:0,usedDiscounts:0,successRate:0}),[y,T]=o.useState("all"),[F,U]=o.useState("recent"),B={en:{title:"Send Discount",subtitle:"Send to customers with chat history or reviews",searchPlaceholder:"Search customers...",recentCustomers:"Recent Customers",noCustomers:"No customers found",noCustomersSubtext:"Customers from your bookings will appear here",lastBooking:"Last booking",totalBookings:"bookings",sendDiscount:"Send Discount",hasDiscount:"Has active discount",loading:"Loading customers...",totalSent:"Total Sent",activeNow:"Active Now",usedDiscounts:"Used",successRate:"Success Rate",allCustomers:"All Customers",withDiscount:"Has Discount",noDiscount:"No Discount",sortRecent:"Recent First",sortBookings:"Most Bookings",filterBy:"Filter",sortBy:"Sort",selectBanner:"Select a discount banner to begin",customerSelectable:"Click customer name to send",confirmSend:"Confirm Send",confirmMessage:"Send {{percentage}}% discount to {{name}}?",sending:"Sending...",discountSent:"Discount Sent",cancel:"Cancel",expiryMessage:"Valid for 7 days from today"},id:{title:"Kirim Diskon",subtitle:"Kirim ke pelanggan dengan riwayat chat atau review",searchPlaceholder:"Cari pelanggan...",recentCustomers:"Pelanggan Terbaru",noCustomers:"Tidak ada pelanggan",noCustomersSubtext:"Pelanggan dari booking Anda akan muncul di sini",lastBooking:"Booking terakhir",totalBookings:"booking",sendDiscount:"Kirim Diskon",hasDiscount:"Ada diskon aktif",loading:"Memuat pelanggan...",totalSent:"Total Terkirim",activeNow:"Aktif Sekarang",usedDiscounts:"Terpakai",successRate:"Tingkat Sukses",allCustomers:"Semua Pelanggan",withDiscount:"Ada Diskon",noDiscount:"Tanpa Diskon",sortRecent:"Terbaru",sortBookings:"Paling Banyak Booking",filterBy:"Filter",sortBy:"Urutkan",selectBanner:"Pilih banner diskon untuk mulai",customerSelectable:"Klik nama pelanggan untuk kirim",confirmSend:"Konfirmasi Kirim",confirmMessage:"Kirim diskon {{percentage}}% ke {{name}}?",sending:"Mengirim...",discountSent:"Diskon Terkirim",cancel:"Batal",expiryMessage:"Berlaku 7 hari dari hari ini"}},f=B[a]||B.id,A=(t==null?void 0:t.$id)||(t==null?void 0:t.id);o.useEffect(()=>{h(),c()},[A]);const c=async()=>{if(A)try{const E=await je.listDocuments(Pe.databaseId,"discount_codes",[ae.equal("providerId",A),ae.limit(1e3)]),W=E.documents.length,X=E.documents.filter(q=>!q.isUsed&&new Date(q.expiresAt)>new Date).length,_=E.documents.filter(q=>q.isUsed).length,$=W>0?Math.round(_/W*100):0;b({totalDiscountsSent:W,activeDiscounts:X,usedDiscounts:_,successRate:$})}catch{}},h=async()=>{if(A){d(!0);try{const E=Pe.collections.bookings;if(!E){r([]);return}const W=await je.listDocuments(Pe.databaseId,E,[ae.equal("therapistId",A),ae.equal("status","completed"),ae.orderDesc("$createdAt"),ae.limit(100)]),X=new Date;X.setDate(X.getDate()-30);const _=new Map;for(const $ of W.documents){const q=$.customerId||$.userId,J=$.customerName||$.userName||"Unknown";if(!(new Date($.$createdAt||new Date)<X)&&q)if(_.has(q)){const me=_.get(q);me.totalBookings++}else _.set(q,{id:q,name:J,lastBookingDate:$.$createdAt||new Date().toISOString(),totalBookings:1,hasActiveDiscount:!1})}try{const $=await je.listDocuments(Pe.databaseId,"discount_codes",[ae.equal("providerId",A),ae.equal("isUsed",!1),ae.greaterThan("expiresAt",new Date().toISOString())]);for(const q of $.documents){const J=q.userId;_.has(J)&&(_.get(J).hasActiveDiscount=!0)}}catch{}r(Array.from(_.values()))}catch{r([])}finally{d(!1)}}},C=i.filter(E=>!(g&&!E.name.toLowerCase().includes(g.toLowerCase())||y==="active"&&!E.hasActiveDiscount||y==="no-discount"&&E.hasActiveDiscount)).sort((E,W)=>F==="bookings"?W.totalBookings-E.totalBookings:new Date(W.lastBookingDate).getTime()-new Date(E.lastBookingDate).getTime()),M=async(E,W,X,_)=>{try{const $=await qu({therapistId:A||"",therapistName:(t==null?void 0:t.name)||"",customerId:E,customerName:W,discountPercentage:X,source:"chat_banner",bannerImageUrl:_,validityDays:7});if(!$.success)return{success:!1,error:$.error};const q=$.code.code,J=a==="id"?"ðŸŽ Terima kasih sudah booking massage dengan kami! Silakan gunakan diskon ".concat(X,"% ini untuk booking selanjutnya dalam 7 hari.\n\nâœ¨ Kode Diskon: *").concat(q,"*\nâ° Berlaku sampai: ").concat(new Date($.code.expiresAt).toLocaleDateString("id-ID"),"\n\nðŸ‘‰ Masukkan kode ini saat booking untuk mendapatkan diskon otomatis. Kode hanya bisa digunakan 1x dengan saya."):"ðŸŽ Thank you for your past massage booking! Please accept this ".concat(X,"% discount for your next booking within 7 days.\n\nâœ¨ Discount Code: *").concat(q,"*\nâ° Valid until: ").concat(new Date($.code.expiresAt).toLocaleDateString("en-US"),"\n\nðŸ‘‰ Enter this code during booking to get automatic discount. Code can only be used once with me.");return await c(),{success:!0,code:q}}catch($){return{success:!1,error:String($)}}};return e.jsxs(Rt,{title:f.title,subtitle:f.subtitle,onBackToStatus:s||(()=>{}),onNavigate:n,therapist:t,currentPage:"send-discount",icon:e.jsx(is,{className:"w-6 h-6 text-orange-600"}),headerActions:e.jsx(Nt,{...Xc.selectCustomers,position:"left",size:"md"}),children:[e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-4 space-y-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Discount Banners"}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:p?f.customerSelectable:f.selectBanner})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{percentage:5,imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20discount%205.png?updatedAt=1761803670532"},{percentage:10,imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20discount%2010.png?updatedAt=1761803828896"},{percentage:15,imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20discount%2015.png?updatedAt=1761803805221"},{percentage:20,imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20discount%2020.png?updatedAt=1761803783034"}].map(E=>{const W=(p==null?void 0:p.percentage)===E.percentage;return e.jsxs("button",{onClick:()=>R(E),className:"relative rounded-lg overflow-hidden transition-all duration-300 ".concat(W?"ring-4 ring-orange-500 shadow-lg shadow-orange-500/50 scale-105":"hover:shadow-md"),children:[e.jsx("img",{src:E.imageUrl,alt:"".concat(E.percentage,"% OFF"),className:"w-full h-auto"}),W&&e.jsx("div",{className:"absolute inset-0 bg-orange-500/10 flex items-center justify-center",children:e.jsx("div",{className:"bg-orange-500 text-white px-3 py-1 rounded-full text-xs font-bold",children:"âœ“ Selected"})})]},E.percentage)})})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:e.jsx(Zt,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:f.totalSent})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.totalDiscountsSent})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:e.jsx($e,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:f.activeNow})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:k.activeDiscounts})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:e.jsx(Ac,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Used"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:k.usedDiscounts})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(wn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:f.searchPlaceholder,value:g,onChange:E=>m(E.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-50 focus:border-orange-500 bg-white"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["all","active","no-discount"].map(E=>e.jsx("button",{onClick:()=>T(E),className:"py-2.5 px-3 rounded-lg border text-sm font-medium transition-colors ".concat(y===E?"bg-orange-100 border-orange-200 text-orange-800":"bg-orange-50/80 border-orange-100 text-gray-700 hover:bg-orange-100 hover:text-orange-800"),children:E==="all"?f.allCustomers:E==="active"?f.withDiscount:f.noDiscount},E))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Customers"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[C.length," total"]})]}),l?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-3 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:f.loading})]}):C.length===0?e.jsxs("div",{className:"text-center py-8 bg-white rounded-lg border border-gray-200",children:[e.jsx(Ct,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:f.noCustomers})]}):e.jsx("div",{className:"space-y-2",children:C.map(E=>{const W=O.has(E.id),X=S.has(E.id),_=D===E.id,$=p&&!W&&!_;return X?null:e.jsx("button",{onClick:()=>{$&&(v(E),P(!0))},disabled:!$||W||_,className:"w-full bg-white rounded-lg border p-3 text-left transition-all duration-300 ".concat(W?"border-green-300 bg-green-50 opacity-75":$?"border-orange-300 hover:border-orange-500 hover:shadow-md cursor-pointer animate-pulse":"border-gray-200 opacity-50 cursor-not-allowed"),style:X?{opacity:0,transform:"scale(0.95)",transition:"all 2s ease-out"}:void 0,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsx("h3",{className:"text-sm font-semibold ".concat(W?"text-green-700":"text-gray-900"),children:E.name})}),_&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-orange-600",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"}),f.sending]}),W&&e.jsxs("span",{className:"px-2 py-1 bg-green-500 text-white text-xs font-bold rounded-full",children:["âœ“ ",f.discountSent]})]})},E.id)})})]})]}),w&&x&&p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-sm w-full overflow-hidden animate-scale-in",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-orange-50 to-orange-100",children:e.jsx("img",{src:p.imageUrl,alt:"".concat(p.percentage,"% OFF"),className:"w-full h-auto rounded-lg shadow-md"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:f.confirmSend}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:f.confirmMessage.replace("{{percentage}}",p.percentage.toString()).replace("{{name}}",x.name)}),e.jsx("p",{className:"text-xs text-orange-600 font-medium",children:f.expiryMessage})]}),e.jsxs("div",{className:"flex gap-2 p-4 bg-gray-50 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>{P(!1),v(null)},className:"flex-1 px-4 py-2.5 bg-white border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:f.cancel}),e.jsx("button",{onClick:async()=>{if(!x||!p)return;P(!1),L(x.id),(await M(x.id,x.name,p.percentage,p.imageUrl)).success?(H(W=>new Set([...W,x.id])),L(null),setTimeout(()=>{N(W=>new Set([...W,x.id])),setTimeout(()=>{r(W=>W.filter(X=>X.id!==x.id)),N(W=>{const X=new Set(W);return X.delete(x.id),X})},2e3)},2e3)):(L(null),At("Failed to send discount. Please try again.")),v(null),R(null)},className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg font-bold hover:from-orange-600 hover:to-orange-700 transition-all shadow-md hover:shadow-lg active:scale-95",children:f.confirmSend})]})]})}),x&&e.jsx(ic,{isOpen:j,onClose:()=>{I(!1),v(null)},providerId:(t==null?void 0:t.id)||"",providerType:"therapist",providerName:(t==null?void 0:t.name)||"Therapist",customerId:x.id,customerName:x.name,onSuccess:(E,W)=>{h(),c()}})]})},Qu=({therapist:t,onBack:a})=>{const[s,n]=o.useState("dashboard-features"),i=r=>{n(s===r?null:r)};return e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50  ",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:[e.jsx(ds,{title:"Therapist Dashboard",subtitle:"Panduan Mendapat Lebih Banyak Pelanggan - Tips dan strategi komprehensif untuk meningkatkan booking dan pendapatan Anda",onBackToStatus:a,icon:e.jsx(Ia,{className:"w-6 h-6 text-orange-600"}),actions:e.jsx(Nt,{...Zc.profileOptimization,position:"left",size:"md"})}),e.jsx("div",{className:"hidden bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsx("button",{onClick:a,className:"mb-4 p-2 hover:bg-white/20 rounded-lg transition-colors",children:"â† Kembali"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(Ia,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Panduan Mendapat Lebih Banyak Pelanggan"}),e.jsx("p",{className:"text-orange-100",children:"Tips dan strategi komprehensif untuk meningkatkan booking dan pendapatan Anda"})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6 space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border-2 border-green-200 p-4 sm:p-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(rn,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-green-800 mb-2 sm:mb-3",children:"Halo Member! Selamat Datang di IndaStreet! ðŸŽ‰"}),e.jsx("p",{className:"text-green-700 mb-4 leading-relaxed",children:"Senang sekali memiliki Anda sebagai member valid IndaStreet dan kami sangat antusias untuk berbagi pengetahuan mengenai booking atau tambahan booking."}),e.jsxs("div",{className:"bg-white rounded-lg p-3 sm:p-4 border border-green-200",children:[e.jsx("p",{className:"text-green-800 font-semibold mb-2 text-sm sm:text-base",children:"ðŸ“ˆ Fakta Penting:"}),e.jsxs("p",{className:"text-green-700 text-sm sm:text-base",children:["Selalu ingat bahwa profil yang lengkap ",e.jsx("span",{className:"font-bold text-green-800",children:"meningkatkan traffic hingga 80%"})," dibandingkan profil basic. Mari kita diskusikan perbedaannya agar Anda yakin profil Anda akan diperhatikan pengguna dan memiliki pilihan pijat yang menarik."]})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 sm:p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-bold text-gray-900 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(zr,{className:"w-5 h-5 text-blue-500"}),"1. Foto Profil Profesional - Kunci Pertama Kesuksesan"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4"}),"Tips Foto Profesional:"]}),e.jsxs("ul",{className:"text-blue-700 space-y-2 ml-4",children:[e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Cahaya alami:"})," Gunakan cahaya siang hari di luar ruangan"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Background natural:"})," Setting pohon yang bagus, bunga, atau pemandangan bukit"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Tanpa warna background:"})," Hindari background berwarna-warni"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Generasi muda:"})," Saat ini mudah menambah background gambar untuk foto Anda"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Koneksi personal:"})," Pengguna suka melihat siapa yang mereka booking"]})]})]}),e.jsx("div",{className:"bg-yellow-50 rounded-lg p-4 border-l-4 border-yellow-400",children:e.jsxs("p",{className:"text-yellow-800",children:[e.jsx("strong",{children:"ðŸ’¡ Mengapa foto penting?"})," Meluangkan sedikit waktu untuk foto yang baik akan sangat bermanfaat untuk akun Anda. Pelanggan ingin melihat siapa yang akan melayani mereka."]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 sm:p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-bold text-gray-900 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(ea,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"break-words",children:"2. Slider Harga - Strategi Pricing yang Efektif"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:e.jsxs("p",{className:"text-green-800 mb-3",children:[e.jsx("strong",{children:"Memiliki slider price list adalah hal terpenting kedua"})," untuk pengguna yang mencari layanan Anda. Dan jangan khawatir jika Anda hanya memiliki satu jenis pijat!"]})}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-200",children:[e.jsxs("h4",{className:"font-semibold text-purple-800 mb-3 flex items-center gap-2",children:[e.jsx(Gr,{className:"w-4 h-4"}),"Strategi Variasi Paket:"]}),e.jsxs("p",{className:"text-purple-700 mb-3",children:["Mari tingkatkan penawaran dengan menambahkan nama paket yang berbeda tapi untuk jenis pijat yang sama. Misalnya ",e.jsx("strong",{children:"Traditional Massage"}),":"]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-purple-200",children:[e.jsx("p",{className:"text-purple-800 font-medium",children:"ðŸ’‘ Couple Traditional Massage"}),e.jsx("p",{className:"text-sm text-purple-600",children:"Paket romantis untuk pasangan"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-purple-200",children:[e.jsx("p",{className:"text-purple-800 font-medium",children:"ðŸŽ“ Student Massage"}),e.jsx("p",{className:"text-sm text-purple-600",children:"Harga khusus untuk pelajar/mahasiswa"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-purple-200",children:[e.jsx("p",{className:"text-purple-800 font-medium",children:"ðŸ¢ Office Massage"}),e.jsx("p",{className:"text-sm text-purple-600",children:"Layanan pijat untuk pekerja kantoran"})]})]})]}),e.jsx("div",{className:"bg-orange-50 rounded-lg p-4 border-l-4 border-orange-400",children:e.jsxs("p",{className:"text-orange-800",children:[e.jsx("strong",{children:"ðŸŽ¯ Pro Tip:"})," Dengan slider harga Anda, tambahkan opsi dan harga untuk berbagai paket. Ini memberikan pelanggan lebih banyak pilihan dan meningkatkan nilai booking Anda."]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 sm:p-6 shadow-sm",children:[e.jsxs("h2",{className:"text-base sm:text-lg font-bold text-gray-900 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(gn,{className:"w-5 h-5 text-orange-500"}),e.jsx("span",{children:"Status Performa Anda Saat Ini"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-2 sm:gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 sm:p-4 text-center",children:[e.jsx(ma,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-500 mx-auto mb-1 sm:mb-2"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:"156"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Profile Views"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-3 sm:p-4 text-center",children:[e.jsx(jt,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-500 mx-auto mb-1 sm:mb-2"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-green-600",children:"4.7"}),e.jsx("p",{className:"text-xs text-green-700",children:"Rating"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 sm:p-4 text-center",children:[e.jsx(dt,{className:"w-5 h-5 sm:w-6 sm:h-6 text-purple-500 mx-auto mb-1 sm:mb-2"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-purple-600",children:"23"}),e.jsx("p",{className:"text-xs text-purple-700",children:"Booking Bulan Ini"})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-3 sm:p-4 text-center",children:[e.jsx(ze,{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-500 mx-auto mb-1 sm:mb-2"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-orange-600",children:"45.5j"}),e.jsx("p",{className:"text-xs text-orange-700",children:"Online Bulan Ini"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm",children:[e.jsxs("button",{onClick:()=>i("dashboard-features"),className:"w-full flex items-center justify-between p-4 sm:p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(un,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-500"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-sm sm:text-lg font-bold text-gray-900",children:"Pentingnya Setiap Fitur Dashboard"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 hidden sm:block",children:"Memahami fungsi dan dampak setiap fitur untuk performa optimal"})]})]}),s==="dashboard-features"?e.jsx(Mt,{className:"w-5 h-5 text-gray-500"}):e.jsx(Bt,{className:"w-5 h-5 text-gray-500"})]}),s==="dashboard-features"&&e.jsx("div",{className:"p-4 sm:p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(zr,{className:"w-5 h-5 text-blue-500"}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"Foto Profil Profesional"})]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Meningkatkan kepercayaan pelanggan hingga 70%"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Foto wajah yang ramah dan profesional"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Cahaya yang bagus, latar belakang bersih"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(kt,{className:"w-4 h-4 text-orange-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-orange-600 font-medium",children:"Hindari foto selfie atau foto grup"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(da,{className:"w-5 h-5 text-purple-500"}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"Deskripsi yang Menarik"})]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Ceritakan pengalaman dan keahlian Anda"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Sebutkan sertifikat atau pelatihan yang dimiliki"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Gunakan bahasa yang hangat dan profesional"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(kt,{className:"w-4 h-4 text-orange-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-orange-600 font-medium",children:"Min 100 kata, maksimal 300 kata"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ze,{className:"w-5 h-5 text-green-500"}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"Status Online Konsisten"})]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:e.jsx("strong",{children:"Minimal 8 jam per hari online"})})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Update status secara real-time"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Meningkatkan ranking di hasil pencarian"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(kt,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-red-600 font-medium",children:"Online < 6 jam = ranking turun drastis"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Gt,{className:"w-5 h-5 text-blue-500"}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"Response Rate Cepat"})]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Balas pesan dalam 10 menit"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Terima/tolak booking dalam 5 menit"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Rate 95%+ = prioritas tinggi di pencarian"})]})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm",children:[e.jsxs("button",{onClick:()=>i("menu-strategy"),className:"w-full flex items-center justify-between p-4 sm:p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Ls,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-500"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-sm sm:text-lg font-bold text-gray-900",children:"Strategi Menu & Harga"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 hidden sm:block",children:"Cara menciptakan variasi menu dari satu jenis massage"})]})]}),s==="menu-strategy"?e.jsx(Mt,{className:"w-5 h-5 text-gray-500"}):e.jsx(Bt,{className:"w-5 h-5 text-gray-500"})]}),s==="menu-strategy"&&e.jsxs("div",{className:"p-4 sm:p-6 border-t border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-3 sm:p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 sm:mb-3",children:[e.jsx(Gr,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-500 flex-shrink-0"}),e.jsx("h4",{className:"font-bold text-blue-900 text-sm sm:text-base",children:"Psikologi Pilihan Pelanggan"})]}),e.jsxs("p",{className:"text-sm text-blue-800 mb-3",children:[e.jsx("strong",{children:"Fakta:"})," Pelanggan lebih suka memilih daripada hanya ada 1 opsi. Dengan memberikan variasi nama untuk massage yang sama, Anda menciptakan persepsi nilai lebih."]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700",children:[e.jsx(mn,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Strategi ini digunakan restoran dan spa premium!"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(rn,{className:"w-5 h-5 text-red-500"}),e.jsx("h4",{className:"font-bold text-gray-900",children:"Menu Tradisional"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Traditional Massage"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Teknik pijat tradisional Indonesia"})]}),e.jsx("span",{className:"text-orange-600 font-bold",children:"Rp 120k"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Balinese Massage"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Relaksasi dengan aroma terapi"})]}),e.jsx("span",{className:"text-orange-600 font-bold",children:"Rp 135k"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Deep Tissue Massage"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Untuk otot tegang dan stress"})]}),e.jsx("span",{className:"text-orange-600 font-bold",children:"Rp 150k"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(jt,{className:"w-5 h-5 text-yellow-500"}),e.jsx("h4",{className:"font-bold text-gray-900",children:"Menu Spesialisasi"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Student Massage"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Harga khusus pelajar (60 menit)"})]}),e.jsx("span",{className:"text-green-600 font-bold",children:"Rp 80k"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Couple Massage"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Untuk 2 orang bersamaan"})]}),e.jsx("span",{className:"text-orange-600 font-bold",children:"Rp 200k"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Office Massage"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Khusus untuk karyawan kantor"})]}),e.jsx("span",{className:"text-orange-600 font-bold",children:"Rp 160k"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(un,{className:"w-5 h-5 text-blue-500"}),e.jsx("h4",{className:"font-bold text-gray-900",children:"Menu Target Specific"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Foot Massage"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Fokus kaki dan betis (45 menit)"})]}),e.jsx("span",{className:"text-orange-600 font-bold",children:"Rp 90k"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Back Massage"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Khusus punggung dan bahu (45 menit)"})]}),e.jsx("span",{className:"text-orange-600 font-bold",children:"Rp 95k"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Head & Neck Massage"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Hilangkan sakit kepala (30 menit)"})]}),e.jsx("span",{className:"text-orange-600 font-bold",children:"Rp 70k"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(mn,{className:"w-5 h-5 text-purple-500"}),e.jsx("h4",{className:"font-bold text-gray-900",children:"Menu Premium"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Royal Treatment"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Full body + aromaterapi (120 menit)"})]}),e.jsx("span",{className:"text-purple-600 font-bold",children:"Rp 250k"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Executive Package"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Untuk eksekutif sibuk (90 menit)"})]}),e.jsx("span",{className:"text-purple-600 font-bold",children:"Rp 200k"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Luxury Spa Experience"}),e.jsx("p",{className:"text-xs text-gray-600",children:"All inclusive dengan music (150 menit)"})]}),e.jsx("span",{className:"text-purple-600 font-bold",children:"Rp 350k"})]})]})]})]}),e.jsxs("div",{className:"mt-6 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200",children:[e.jsxs("h4",{className:"font-bold text-green-900 mb-3 flex items-center gap-2",children:[e.jsx($e,{className:"w-5 h-5"}),"Tips Sukses Menu Strategy"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-green-800",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-600",children:"1."}),e.jsx("span",{children:"Buat deskripsi yang spesifik untuk setiap menu"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-600",children:"2."}),e.jsx("span",{children:"Variasikan harga untuk menciptakan opsi budget"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-600",children:"3."}),e.jsx("span",{children:"Target audience yang berbeda (student, couple, office)"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-600",children:"4."}),e.jsx("span",{children:"Update menu berdasarkan demand customer"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm",children:[e.jsxs("button",{onClick:()=>i("pricing-strategy"),className:"w-full flex items-center justify-between p-4 sm:p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ea,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-500"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-sm sm:text-lg font-bold text-gray-900",children:"Strategi Harga & Diskon"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 hidden sm:block",children:"Kapan turunkan harga, kapan beri diskon, dan cara analisa traffic"})]})]}),s==="pricing-strategy"?e.jsx(Mt,{className:"w-5 h-5 text-gray-500"}):e.jsx(Bt,{className:"w-5 h-5 text-gray-500"})]}),s==="pricing-strategy"&&e.jsxs("div",{className:"p-4 sm:p-6 border-t border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 bg-white rounded-xl p-4 sm:p-5 border border-gray-200",children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Zt,{className:"w-5 h-5 text-blue-500"}),"Analisa Traffic untuk Keputusan Harga"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(kt,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"font-medium text-red-700",children:"Traffic Rendah"})]}),e.jsx("p",{className:"text-xs text-red-600 mb-3",children:"< 50 views per minggu"}),e.jsxs("div",{className:"space-y-2 text-xs text-red-700",children:[e.jsx("p",{children:"â€¢ Turunkan harga 10-20%"}),e.jsx("p",{children:"â€¢ Aktifkan promosi diskon"}),e.jsx("p",{children:"â€¢ Update foto profil"}),e.jsx("p",{children:"â€¢ Perbaiki deskripsi"})]})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ze,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"font-medium text-yellow-700",children:"Traffic Normal"})]}),e.jsx("p",{className:"text-xs text-yellow-600 mb-3",children:"50-150 views per minggu"}),e.jsxs("div",{className:"space-y-2 text-xs text-yellow-700",children:[e.jsx("p",{children:"â€¢ Pertahankan harga current"}),e.jsx("p",{children:"â€¢ Monitor conversion rate"}),e.jsx("p",{children:"â€¢ Test A/B menu baru"}),e.jsx("p",{children:"â€¢ Fokus service quality"})]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Zt,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"font-medium text-green-700",children:"Traffic Tinggi"})]}),e.jsx("p",{className:"text-xs text-green-600 mb-3",children:"> 150 views per minggu"}),e.jsxs("div",{className:"space-y-2 text-xs text-green-700",children:[e.jsx("p",{children:"â€¢ Naikkan harga 5-15%"}),e.jsx("p",{children:"â€¢ Tambahkan menu premium"}),e.jsx("p",{children:"â€¢ Focus on quality clients"}),e.jsx("p",{children:"â€¢ Build waiting list"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-100 to-indigo-100 rounded-lg p-4 border border-blue-200",children:[e.jsxs("p",{className:"text-sm text-blue-800 font-medium mb-2",children:["ðŸ’¡ ",e.jsx("strong",{children:"Pro Tip:"})," Gunakan data traffic di dashboard untuk keputusan pricing"]}),e.jsx("p",{className:"text-xs text-blue-700",children:"Traffic naik tapi booking turun? Harga terlalu tinggi. Traffic rendah? Harga mungkin terlalu tinggi atau profil kurang menarik."})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200",children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(is,{className:"w-5 h-5 text-purple-500"}),"Strategi Diskon Efektif"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Kapan Memberikan Diskon:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 rounded-lg border border-red-200",children:[e.jsx(kt,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-700",children:"Traffic Turun > 30%"}),e.jsx("p",{className:"text-xs text-red-600",children:"Beri diskon 15-25% untuk menarik kembali customer"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx(ze,{className:"w-4 h-4 text-orange-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-700",children:"Jam Sepi (10-14, 20-22)"}),e.jsx("p",{className:"text-xs text-orange-600",children:"Diskon 10% untuk jam-jam tidak peak"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx(dt,{className:"w-4 h-4 text-blue-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-700",children:"Weekday Promotion"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Senin-Kamis diskon 15% karena demand rendah"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Jenis Diskon yang Efektif:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-sm font-medium text-green-700 mb-1",children:"First Timer Discount"}),e.jsx("p",{className:"text-xs text-green-600",children:"20% untuk customer baru - builds database"})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("p",{className:"text-sm font-medium text-purple-700 mb-1",children:"Bundle Package"}),e.jsx("p",{className:"text-xs text-purple-600",children:"3 session = harga 2.5 session - customer retention"})]}),e.jsxs("div",{className:"p-3 bg-pink-50 rounded-lg border border-pink-200",children:[e.jsx("p",{className:"text-sm font-medium text-pink-700 mb-1",children:"Referral Bonus"}),e.jsx("p",{className:"text-xs text-pink-600",children:"Diskon 25% jika refer teman - organic marketing"})]}),e.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-200",children:[e.jsx("p",{className:"text-sm font-medium text-indigo-700 mb-1",children:"Loyalty Program"}),e.jsx("p",{className:"text-xs text-indigo-600",children:"Booking ke-5 gratis - builds repeat customers"})]})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm",children:[e.jsxs("button",{onClick:()=>i("timing-strategy"),className:"w-full flex items-center justify-between p-4 sm:p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Fo,{className:"w-4 h-4 sm:w-5 sm:h-5 text-indigo-500"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-sm sm:text-lg font-bold text-gray-900",children:"Master Timing & Ketersediaan"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 hidden sm:block",children:"Strategi waktu online optimal dan busy time analysis"})]})]}),s==="timing-strategy"?e.jsx(Mt,{className:"w-5 h-5 text-gray-500"}):e.jsx(Bt,{className:"w-5 h-5 text-gray-500"})]}),s==="timing-strategy"&&e.jsxs("div",{className:"p-4 sm:p-6 border-t border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"mb-6 bg-gradient-to-r from-red-50 to-pink-50 rounded-xl p-5 border-l-4 border-red-500",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(kt,{className:"w-6 h-6 text-red-500"}),e.jsx("h4",{className:"font-bold text-red-900",children:"WAJIB: Minimal 8 Jam Online Per Hari"})]}),e.jsxs("div",{className:"text-sm text-red-800 space-y-2",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Algoritma sistem"})," akan menurunkan ranking Anda jika online < 6 jam per hari"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Customer expectation:"})," Therapist yang konsisten online dianggap lebih profesional"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Income opportunity:"})," 8 jam online = 2-4x lebih banyak booking"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Competition advantage:"})," Therapist online 8+ jam selalu ranking atas"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200",children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(gn,{className:"w-5 h-5 text-green-500"}),"Peak Hours (Jam Sibuk)"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:"18:00 - 22:00"}),e.jsx("p",{className:"text-xs text-green-700",children:"After work hours"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-green-600 font-bold text-sm",children:"Peak ðŸ”¥"}),e.jsx("p",{className:"text-xs text-green-600",children:"40% total booking"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:"14:00 - 17:00"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Afternoon session"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"High ðŸ“ˆ"}),e.jsx("p",{className:"text-xs text-blue-600",children:"25% total booking"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-purple-900",children:"09:00 - 12:00"}),e.jsx("p",{className:"text-xs text-purple-700",children:"Weekend mornings"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-purple-600 font-bold text-sm",children:"Weekend ðŸŒ…"}),e.jsx("p",{className:"text-xs text-purple-600",children:"20% weekend booking"})]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsxs("p",{className:"text-xs text-yellow-700",children:[e.jsx("strong",{children:"ðŸ’¡ Strategy:"})," Pastikan Anda online dan available di jam-jam peak ini!"]})})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200",children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5 text-orange-500"}),"Low Traffic Hours"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"06:00 - 09:00"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Early morning"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-gray-500 font-bold text-sm",children:"Low ðŸ“‰"}),e.jsx("p",{className:"text-xs text-gray-500",children:"5% total booking"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"10:00 - 14:00"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Weekday lunch time"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-gray-500 font-bold text-sm",children:"Low ðŸ“‰"}),e.jsx("p",{className:"text-xs text-gray-500",children:"8% weekday booking"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"22:00 - 24:00"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Late night"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-gray-500 font-bold text-sm",children:"Very Low ðŸ“‰"}),e.jsx("p",{className:"text-xs text-gray-500",children:"2% total booking"})]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-orange-50 rounded-lg border border-orange-200",children:e.jsxs("p",{className:"text-xs text-orange-700",children:[e.jsx("strong",{children:"ðŸ’¡ Opportunity:"})," Berikan diskon 10-15% untuk jam-jam low traffic ini"]})})]})]}),e.jsxs("div",{className:"mt-6 bg-white rounded-xl p-5 border border-gray-200",children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5 text-blue-500"}),"Strategi Jadwal Optimal"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Weekday Schedule (Sen-Jum):"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between p-2 bg-green-50 rounded",children:[e.jsx("span",{children:"09:00 - 12:00"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Available"})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-red-50 rounded",children:[e.jsx("span",{children:"12:00 - 14:00"}),e.jsx("span",{className:"text-red-600 font-medium",children:"Break"})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-green-50 rounded",children:[e.jsx("span",{children:"14:00 - 22:00"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Available"})]})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Total: 10 jam online per hari"})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Weekend Schedule (Sab-Min):"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between p-2 bg-green-50 rounded",children:[e.jsx("span",{children:"08:00 - 13:00"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Available"})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-red-50 rounded",children:[e.jsx("span",{children:"13:00 - 15:00"}),e.jsx("span",{className:"text-red-600 font-medium",children:"Break"})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-green-50 rounded",children:[e.jsx("span",{children:"15:00 - 21:00"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Available"})]})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Total: 11 jam online per hari"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm",children:[e.jsxs("button",{onClick:()=>i("general-tips"),className:"w-full flex items-center justify-between p-4 sm:p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-yellow-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ss,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-500"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-sm sm:text-lg font-bold text-gray-900",children:"Tips Menarik Customer"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 hidden sm:block",children:"Knowledge praktis untuk meningkatkan booking dan customer retention"})]})]}),s==="general-tips"?e.jsx(Mt,{className:"w-5 h-5 text-gray-500"}):e.jsx(Bt,{className:"w-5 h-5 text-gray-500"})]}),s==="general-tips"&&e.jsxs("div",{className:"p-4 sm:p-6 border-t border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(rn,{className:"w-5 h-5 text-red-500"}),e.jsx("h4",{className:"font-bold text-gray-900",children:"Customer Service"})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsx("p",{children:"â€¢ Balas chat dalam max 10 menit"}),e.jsx("p",{children:"â€¢ Konfirmasi booking dalam 5 menit"}),e.jsx("p",{children:"â€¢ Kirim reminder H-1 sebelum session"}),e.jsx("p",{children:"â€¢ Follow up setelah treatment"}),e.jsx("p",{children:"â€¢ Tanyakan feedback dan rating"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ia,{className:"w-5 h-5 text-blue-500"}),e.jsx("h4",{className:"font-bold text-gray-900",children:"Professional Image"})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsx("p",{children:"â€¢ Foto profil berkualitas tinggi"}),e.jsx("p",{children:"â€¢ Deskripsi lengkap dan menarik"}),e.jsx("p",{children:"â€¢ Tampilkan sertifikat/awards"}),e.jsx("p",{children:"â€¢ Update status secara konsisten"}),e.jsx("p",{children:"â€¢ Bahasa yang profesional tapi hangat"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ec,{className:"w-5 h-5 text-green-500"}),e.jsx("h4",{className:"font-bold text-gray-900",children:"Social Proof"})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsx("p",{children:"â€¢ Minta review positif dari customer"}),e.jsx("p",{children:"â€¢ Screenshot testimonial WA"}),e.jsx("p",{children:"â€¢ Share success stories (permission)"}),e.jsx("p",{children:"â€¢ Display rating dan jumlah customer"}),e.jsx("p",{children:"â€¢ Join komunitas therapist"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Pa,{className:"w-5 h-5 text-purple-500"}),e.jsx("h4",{className:"font-bold text-gray-900",children:"Location Strategy"})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsx("p",{children:"â€¢ Target area dengan daya beli tinggi"}),e.jsx("p",{children:"â€¢ Dekat dengan hotel, apartment"}),e.jsx("p",{children:"â€¢ Area bisnis dan perkantoran"}),e.jsx("p",{children:"â€¢ Mudah akses transportasi"}),e.jsx("p",{children:"â€¢ Consider travel time dalam pricing"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Zt,{className:"w-5 h-5 text-orange-500"}),e.jsx("h4",{className:"font-bold text-gray-900",children:"Upselling Tips"})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsx("p",{children:"â€¢ Tawarkan extended time (+30 min)"}),e.jsx("p",{children:"â€¢ Add-on services (aromatherapy)"}),e.jsx("p",{children:"â€¢ Package deals (3x session)"}),e.jsx("p",{children:"â€¢ Couple treatment upgrade"}),e.jsx("p",{children:"â€¢ Special occasion pricing"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Dc,{className:"w-5 h-5 text-indigo-500"}),e.jsx("h4",{className:"font-bold text-gray-900",children:"Customer Retention"})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsx("p",{children:"â€¢ Loyalty program (5th session free)"}),e.jsx("p",{children:"â€¢ Birthday discount special"}),e.jsx("p",{children:"â€¢ Regular customer priority booking"}),e.jsx("p",{children:"â€¢ Personal touch (remember preferences)"}),e.jsx("p",{children:"â€¢ Seasonal promotion exclusive"})]})]})]}),e.jsxs("div",{className:"mt-6 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-5 border border-indigo-200",children:[e.jsxs("h4",{className:"font-bold text-indigo-900 mb-4 flex items-center gap-2",children:[e.jsx(_c,{className:"w-5 h-5"}),"Target Metrics untuk Success"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-indigo-200",children:[e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:"95%+"}),e.jsx("p",{className:"text-xs text-indigo-700",children:"Response Rate"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-indigo-200",children:[e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:"4.5+"}),e.jsx("p",{className:"text-xs text-indigo-700",children:"Average Rating"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-indigo-200",children:[e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:"8+j"}),e.jsx("p",{className:"text-xs text-indigo-700",children:"Online per Hari"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-indigo-200",children:[e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:"30+"}),e.jsx("p",{className:"text-xs text-indigo-700",children:"Booking per Bulan"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl text-white p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(Uo,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-xl font-bold",children:"Action Plan - Mulai Hari Ini!"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold mb-2",children:"Days 1-2: Foundation"}),e.jsxs("ul",{className:"space-y-1 text-sm text-orange-100",children:[e.jsx("li",{children:"âœ“ Update foto profil profesional"}),e.jsx("li",{children:"âœ“ Tulis deskripsi lengkap 200+ kata"}),e.jsx("li",{children:"âœ“ Set jadwal online 8+ jam per hari"}),e.jsx("li",{children:"âœ“ Buat 5-6 variasi menu massage"})]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold mb-2",children:"Days 3-4: Optimization"}),e.jsxs("ul",{className:"space-y-1 text-sm text-orange-100",children:[e.jsx("li",{children:"âœ“ Monitor traffic dan adjust pricing"}),e.jsx("li",{children:"âœ“ Setup discount strategy"}),e.jsx("li",{children:"âœ“ Implement customer retention program"}),e.jsx("li",{children:"âœ“ Focus pada peak hours availability"})]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-white/10 rounded-lg",children:e.jsxs("p",{className:"text-sm text-orange-100",children:[e.jsx("strong",{children:"ðŸ’ª Komitment:"})," Ikuti panduan ini secara konsisten selama 1 bulan, dan Anda akan melihat peningkatan 50-200% dalam jumlah booking!"]})})]})]})]})},Xu=({therapist:t,onBack:a,onNavigate:s,language:n="id"})=>{const{t:i}=Us(n),[r,l]=o.useState([]),[d,g]=o.useState(!1),[m,x]=o.useState(!1),[v,j]=o.useState((t==null?void 0:t.hotelVillaSafePassStatus)||"pending"),[I,p]=o.useState(""),[R,w]=o.useState(!1),[P,D]=o.useState(!1);o.useEffect(()=>{if(t!=null&&t.hotelVillaLetters)try{const F=JSON.parse(t.hotelVillaLetters);l(F||[])}catch(F){he.error("Failed to parse hotel villa letters",{error:F,therapistId:t==null?void 0:t.$id}),l([])}},[t]);const L=async F=>{var f;const U=(f=F.target.files)==null?void 0:f[0];if(!U||!I.trim()){I.trim()||se("âš ï¸ Please enter hotel/villa name","error");return}if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(U.type)){se("âš ï¸ Please upload PDF, JPG, or PNG file only","error");return}if(U.size>10*1024*1024){se("âš ï¸ File size must be less than 10MB","error");return}if(r.length>=3){se("âš ï¸ Maximum 3 recommendation letters allowed","error");return}g(!0);try{he.info("Safe Pass letter upload initiated",{hotelVillaName:I,therapistId:String((t==null?void 0:t.$id)||(t==null?void 0:t.id))});const A=await Ye.uploadHotelVillaLetter(String((t==null?void 0:t.$id)||(t==null?void 0:t.id)),U,I),c={id:"letter-".concat(Date.now()),fileName:U.name,url:A.url,hotelVillaName:I.trim(),uploadedAt:new Date().toISOString(),fileSize:U.size},h=[...r,c];l(h),await Ye.update(String((t==null?void 0:t.$id)||(t==null?void 0:t.id)),{hotelVillaLetters:JSON.stringify(h)}),se("âœ… "+i("therapistDashboard.fileUploadSuccess"),"success"),p(""),F.target.value=""}catch(A){he.error("Hotel villa letter upload failed",{error:A,hotelVillaName:I,therapistId:String((t==null?void 0:t.$id)||(t==null?void 0:t.id))}),se("âŒ "+i("therapistDashboard.fileUploadError"),"error")}finally{g(!1)}},O=async F=>{const U=r.filter(B=>B.id!==F);l(U);try{await Ye.update(String((t==null?void 0:t.$id)||(t==null?void 0:t.id)),{hotelVillaLetters:JSON.stringify(U)}),se("âœ… Letter removed successfully","success")}catch{se("âŒ "+i("therapistDashboard.removeLetterError"),"error")}},H=async()=>{if(r.length<3){se("âš ï¸ Please upload 3 recommendation letters","error");return}if(!N()){se("âš ï¸ Please complete your profile information first","error");return}x(!0);try{he.info("Safe Pass application submitted for review",{therapistName:t==null?void 0:t.name,therapistId:String((t==null?void 0:t.$id)||(t==null?void 0:t.id)),letterCount:r.length}),await Ye.update(String((t==null?void 0:t.$id)||(t==null?void 0:t.id)),{hotelVillaSafePassStatus:"pending",safePassSubmittedAt:new Date().toISOString(),hotelVillaLetters:JSON.stringify(r)}),j("pending"),se("âœ… Safe Pass application submitted for review","success")}catch(F){he.error("Safe Pass application submission failed",{error:F,therapistId:String((t==null?void 0:t.$id)||(t==null?void 0:t.id))}),se("âŒ "+i("therapistDashboard.submitApplicationError"),"error")}finally{x(!1)}},S=async()=>{if(v!=="approved"){se("âš ï¸ Payment is only available after admin approval","error");return}D(!0);try{he.info("Safe Pass payment processing started",{therapistName:t==null?void 0:t.name,therapistId:String((t==null?void 0:t.$id)||(t==null?void 0:t.id)),amount:5e5}),await new Promise(f=>setTimeout(f,3e3));const F="SP-".concat(Date.now()),U=new Date,B=new Date;B.setFullYear(U.getFullYear()+1),await Ye.update(String((t==null?void 0:t.$id)||(t==null?void 0:t.id)),{hotelVillaSafePassStatus:"active",safePassPaymentId:F,safePassIssuedAt:U.toISOString(),safePassExpiry:B.toISOString(),safePassCardUrl:k()}),he.info("Safe Pass activated successfully",{therapistName:t==null?void 0:t.name,therapistId:String((t==null?void 0:t.$id)||(t==null?void 0:t.id)),paymentId:F,expiryDate:B.toISOString()}),j("active"),se("âœ… "+i("therapistDashboard.paymentSuccess"),"success")}catch(F){he.error("Safe Pass payment processing failed",{error:F,therapistId:String((t==null?void 0:t.$id)||(t==null?void 0:t.id))}),se("âŒ "+i("therapistDashboard.paymentError"),"error")}finally{D(!1)}},N=()=>!!(t!=null&&t.name&&(t!=null&&t.ktpPhotoUrl)&&(t!=null&&t.bankName)&&(t!=null&&t.accountName)&&(t!=null&&t.accountNumber)),k=()=>"https://ik.imagekit.io/7grri5v7d/safe-pass-cards/SP-".concat((t==null?void 0:t.$id)||(t==null?void 0:t.id),".png"),b=F=>{const U={pending:{color:"bg-yellow-100 text-yellow-800",icon:ze,label:i("therapistDashboard.pending")},approved:{color:"bg-orange-100 text-orange-800",icon:Ra,label:"Approved - Payment Required"},active:{color:"bg-green-100 text-green-800",icon:zt,label:"Active"},rejected:{color:"bg-red-100 text-red-800",icon:kt,label:i("therapistDashboard.rejected")}},B=U[F]||U.pending,f=B.icon;return e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium ".concat(B.color),children:[e.jsx(f,{className:"w-4 h-4"}),B.label]})},y=F=>F<1024*1024?"".concat((F/1024).toFixed(1)," KB"):"".concat((F/(1024*1024)).toFixed(1)," MB"),T=()=>{var F;(F=s==null?void 0:s("therapist-status"))!=null||a()};return e.jsxs(Rt,{title:"Hotel & Villa Safe Pass Certification",subtitle:"Official Certification for Professional Massage Therapists",onBackToStatus:T,onNavigate:s,therapist:t,currentPage:"therapist-hotel-villa-safe-pass",icon:e.jsx(zt,{className:"w-6 h-6 text-orange-600"}),language:n,containerClassName:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gradient-to-b from-orange-50 to-white",children:[e.jsx("section",{className:"bg-white border-b border-orange-100",children:e.jsx("div",{className:"max-w-5xl mx-auto px-4 py-8",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/PLASTERING%205%20TROWEL%20HOLDERz.png",alt:"Hotel Villa Safe Pass Certification",className:"w-full max-w-4xl h-auto object-contain drop-shadow-2xl hover:scale-105 transition-transform duration-300 rounded-xl"})})})}),e.jsx("section",{className:"py-12",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-orange-100 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-orange-400 to-orange-600 rounded-xl flex items-center justify-center mb-4",children:e.jsx(zt,{className:"w-7 h-7 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900 mb-2 text-lg",children:"Verified"}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Strict certification and background verification"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-orange-100 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-orange-400 to-orange-600 rounded-xl flex items-center justify-center mb-4",children:e.jsx(Ra,{className:"w-7 h-7 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900 mb-2 text-lg",children:"Premium"}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"International hospitality standards"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-orange-100 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-orange-400 to-orange-600 rounded-xl flex items-center justify-center mb-4",children:e.jsx(si,{className:"w-7 h-7 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900 mb-2 text-lg",children:"Certified"}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Luxury hotel and villa authorized"})]})]}),e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("button",{onClick:()=>{const F=encodeURIComponent("I would Like To Know More Regarding The Safe Pass"),U="https://wa.me/6281392000050?text=".concat(F);window.open(U,"_blank")},className:"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 font-bold text-lg transition-all shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Apply Safe Pass"]})})]})}),e.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-orange-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Application Status"}),b(v)]})}),e.jsxs("div",{className:"p-6",children:[v==="rejected"&&(t==null?void 0:t.safePassRejectionReason)&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-r-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(kt,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-red-900",children:"Application Rejected"}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:t.safePassRejectionReason})]})]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-lg mb-4",children:"Requirements"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-5 h-5 bg-orange-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(Ra,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"text-sm text-gray-700",children:"3 recommendation letters"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-5 h-5 bg-orange-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(Ra,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"text-sm text-gray-700",children:"Admin approval required"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-5 h-5 bg-orange-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(Ra,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"text-sm text-gray-700",children:"Complete profile verification"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-5 h-5 bg-orange-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(Ra,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"text-sm text-gray-700",children:"IDR 500,000 fee"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-lg mb-4",children:"Benefits"}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-orange-500",children:"â€¢"}),e.jsx("span",{children:"Hotel/villa authorization"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-orange-500",children:"â€¢"}),e.jsx("span",{children:"Official Safe Pass card"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-orange-500",children:"â€¢"}),e.jsx("span",{children:"Enhanced credibility"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-orange-500",children:"â€¢"}),e.jsx("span",{children:"Premium bookings access"})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-orange-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-orange-600 rounded-xl flex items-center justify-center",children:e.jsx(Ct,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Identity Information"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Will appear on your Safe Pass card"})]})]}),!N()&&e.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-500 rounded-r-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(kt,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-amber-900 text-sm",children:"Profile must be completed before Safe Pass approval"})]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Full Name"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-xl border border-gray-200",children:e.jsx("span",{className:"text-gray-900 font-medium",children:(t==null?void 0:t.name)||"---"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"KTP Status"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-xl border border-gray-200",children:e.jsx("span",{className:"font-medium ".concat(t!=null&&t.ktpPhotoUrl?"text-green-600":"text-red-600"),children:t!=null&&t.ktpPhotoUrl?"âœ“ Verified":"âœ— Missing"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Address"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-xl border border-gray-200",children:e.jsx("span",{className:"text-gray-900 font-medium",children:(t==null?void 0:t.location)||"---"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Bank Details"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-xl border border-gray-200",children:e.jsx("span",{className:"font-medium ".concat(t!=null&&t.bankName&&(t!=null&&t.accountName)?"text-green-600":"text-red-600"),children:t!=null&&t.bankName&&(t!=null&&t.accountName)?"âœ“ Complete":"âœ— Missing"})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center",children:e.jsx(Ct,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Identity Information"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This information will be printed on your Safe Pass card"}),!N()&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(kt,{className:"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-yellow-800",children:"Profile must be completed before Safe Pass approval"})]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("span",{className:"text-gray-900",children:(t==null?void 0:t.name)||"---"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"KTP Number"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("span",{className:"text-gray-900",children:t!=null&&t.ktpPhotoUrl?"âœ… Verified":"âŒ Missing"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("span",{className:"text-gray-900",children:(t==null?void 0:t.location)||"---"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Details"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("span",{className:"text-gray-900",children:t!=null&&t.bankName&&(t!=null&&t.accountName)?"âœ… Complete":"âŒ Missing"})})]})]})]}),v!=="active"&&e.jsxs("div",{className:"bg-white rounded-2xl border border-orange-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-orange-600 rounded-xl flex items-center justify-center",children:e.jsx(Ca,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:i("therapistDashboard.uploadLetter")}),e.jsx("p",{className:"text-sm text-gray-600",children:i("therapistDashboard.uploadLetterDesc")})]})]}),e.jsx(Nt,{...ed.uploadLetter,position:"left",size:"md"})]}),r.length<3&&v!=="approved"&&e.jsx("div",{className:"border-2 border-dashed border-orange-200 rounded-xl p-6 mb-6 bg-orange-50/30",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 uppercase tracking-wide mb-2",children:"Hotel/Villa Name"}),e.jsx("input",{type:"text",value:I,onChange:F=>p(F.target.value),placeholder:"Enter hotel/villa name",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 uppercase tracking-wide mb-2",children:"Recommendation Letter"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:L,className:"hidden",id:"letter-upload",disabled:d||!I.trim()}),e.jsxs("label",{htmlFor:"letter-upload",className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl cursor-pointer hover:from-orange-600 hover:to-orange-700 transition-all shadow-sm font-medium ".concat(d||!I.trim()?"opacity-50 cursor-not-allowed":""),children:[e.jsx(Ca,{className:"w-5 h-5"}),i(d?"therapistDashboard.uploadInProgress":"therapistDashboard.selectFile")]}),e.jsx("span",{className:"text-xs text-gray-500",children:i("therapistDashboard.supportedFormats")})]})]})]})}),r.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Uploaded Letters"}),e.jsxs("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm font-medium",children:[r.length,"/3"]})]}),r.map((F,U)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 border border-gray-200 rounded-xl hover:shadow-sm transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Lc,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:F.hotelVillaName}),e.jsxs("p",{className:"text-xs text-gray-500",children:[F.fileName,F.fileSize&&" â€¢ ".concat(y(F.fileSize))]}),e.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:new Date(F.uploadedAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>window.open(F.url,"_blank"),className:"p-2.5 text-gray-600 hover:text-gray-900 hover:bg-gray-200 rounded-lg transition-colors",title:"View Letter",children:e.jsx(ma,{className:"w-4 h-4"})}),v!=="approved"&&e.jsx("button",{onClick:()=>O(F.id),className:"p-2.5 text-red-600 hover:text-red-700 hover:bg-red-100 rounded-lg transition-colors",title:"Remove",children:e.jsx(wt,{className:"w-4 h-4"})})]})]},F.id))]}),r.length>=3&&v==="pending"&&e.jsx("div",{className:"pt-6 mt-6 border-t border-gray-200",children:e.jsx("button",{onClick:H,disabled:m||!N(),className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white px-6 py-4 rounded-xl hover:from-orange-600 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed font-semibold flex items-center justify-center gap-2 shadow-lg transition-all",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),i("therapistDashboard.processing")]}):e.jsxs(e.Fragment,{children:[e.jsx(zt,{className:"w-5 h-5"}),v==="rejected"?"Resubmit Application":"Submit Application"]})})})]}),v==="approved"&&e.jsxs("div",{className:"bg-white rounded-2xl border border-orange-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 px-6 py-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ra,{className:"w-6 h-6 text-white"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white text-lg",children:"Application Approved!"}),e.jsx("p",{className:"text-green-100 text-sm",children:"Your recommendation letters have been verified"})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl border border-orange-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900 text-lg",children:"Safe Pass Fee"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Valid for 1 year â€¢ One-time payment"})]}),e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:"IDR 500K"})]}),e.jsx("button",{onClick:S,disabled:P,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-4 rounded-xl hover:from-green-600 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed font-semibold flex items-center justify-center gap-2 shadow-lg transition-all",children:P?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),i("therapistDashboard.processing")]}):e.jsxs(e.Fragment,{children:[e.jsx(ea,{className:"w-5 h-5"}),i("therapistDashboard.payNow")]})})]})]}),v==="active"&&e.jsxs("div",{className:"p-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-orange-600 rounded-xl flex items-center justify-center",children:e.jsx(zt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Your Safe Pass Card"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Official certification card"})]})]}),e.jsx("div",{className:"max-w-md mx-auto mb-6",children:e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/scaffolding_indastreetsssssss-removebg-preview.png?updatedAt=1768624889133",alt:"Professional Safe Pass Card",className:"w-full h-auto object-contain"})}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsxs("button",{onClick:()=>w(!R),className:"flex items-center gap-2 px-5 py-3 border-2 border-orange-300 text-orange-700 rounded-xl hover:bg-orange-50 font-medium transition-all",children:[e.jsx(ma,{className:"w-4 h-4"}),"View Card"]}),e.jsxs("button",{onClick:()=>(t==null?void 0:t.safePassCardUrl)&&window.open(t.safePassCardUrl,"_blank"),className:"flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 font-medium shadow-lg transition-all",children:[e.jsx(Ds,{className:"w-4 h-4"}),"Download"]})]})]})]})]})},Zu=({therapist:t,onBack:a,onNavigate:s,onLogout:n,language:i="id"})=>{const[r,l]=o.useState([]),[d,g]=o.useState(!0),[m,x]=o.useState("");o.useEffect(()=>{v()},[t]);const v=async()=>{if(!(t!=null&&t.$id)){g(!1);return}try{g(!0);const w=await Os.getProviderBookings(t.$id),P=new Map;w.forEach(L=>{const O=L.customerId||L.customerPhone||"unknown",H=L.customerName||"Unknown Customer",S=L.customerPhone||"";if(P.has(O)){const N=P.get(O);N.totalBookings+=1,N.totalSpent+=L.price||0;const k=new Date(N.lastBookingDate);new Date(L.createdAt||L.date)>k&&(N.lastBookingDate=L.createdAt||L.date,N.lastMassageType=L.serviceType||L.massageType)}else P.set(O,{customerId:O,customerName:H,customerPhone:S,totalBookings:1,lastBookingDate:L.createdAt||L.date,lastMassageType:L.serviceType||L.massageType,totalSpent:L.price||0,status:L.status||"completed"})});const D=Array.from(P.values()).sort((L,O)=>O.totalBookings-L.totalBookings);l(D)}catch{se("Failed to load customer data","error")}finally{g(!1)}},j=w=>{s&&s("send-discount")},I=r.filter(w=>w.customerName.toLowerCase().includes(m.toLowerCase())||w.lastMassageType.toLowerCase().includes(m.toLowerCase())),p=w=>new Date(w).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),R=w=>"Rp ".concat(w.toLocaleString("id-ID"));return e.jsx(Rt,{title:i==="id"?"Pelanggan Saya":"My Customers",subtitle:"".concat(r.length," ").concat(i==="id"?"Total Pelanggan":"Total Customers"),onBackToStatus:a||(()=>s==null?void 0:s("therapist-status")),onNavigate:s,therapist:t,currentPage:"customers",language:i,onLogout:n,icon:e.jsx(Ia,{className:"w-6 h-6 text-white"}),children:e.jsxs("div",{className:"bg-gray-50 px-6 pt-4 pb-6",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(wn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:m,onChange:w=>x(w.target.value),placeholder:i==="id"?"Cari nama atau jenis massage...":"Search name or massage type...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsx("div",{className:"pt-2",children:d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:i==="id"?"Memuat data pelanggan...":"Loading customers..."})]})}):I.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ia,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:i==="id"?"Belum Ada Pelanggan":"No Customers Yet"}),e.jsx("p",{className:"text-gray-600",children:i==="id"?"Data pelanggan akan muncul setelah Anda menyelesaikan booking pertama":"Customer data will appear after your first completed booking"})]}):e.jsx("div",{className:"grid gap-4",children:I.map(w=>e.jsxs("button",{onClick:()=>j(),className:"bg-white rounded-xl border border-gray-200 p-5 hover:border-orange-500 hover:shadow-md transition-all text-left group",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center",children:e.jsx(Ia,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 group-hover:text-orange-600 transition-colors",children:w.customerName}),e.jsx("p",{className:"text-sm text-gray-600",children:w.customerPhone})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(dt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:i==="id"?"Total Booking":"Total Bookings"})]}),e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[w.totalBookings,"x"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(ea,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:i==="id"?"Total Belanja":"Total Spent"})]}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:R(w.totalSpent)})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:i==="id"?"Terakhir":"Last"})]}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:w.lastMassageType})]})]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-500",children:[i==="id"?"Booking terakhir: ":"Last booking: ",e.jsx("span",{className:"font-medium",children:p(w.lastBookingDate)})]})]}),e.jsx(wt,{className:"w-6 h-6 text-gray-400 group-hover:text-orange-600 group-hover:translate-x-1 transition-all"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-2 text-orange-600 font-medium text-sm",children:[e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{children:i==="id"?"Kirim Voucher Diskon":"Send Discount Voucher"})]})})]},w.customerId))})})]})})},eg=({therapist:t,onBack:a,onNavigate:s,onLogout:n,language:i="id"})=>{const[r,l]=o.useState({totalBookings:0,completedBookings:0,pendingBookings:0,canceledBookings:0,totalEarnings:0,avgRating:0,totalReviews:0,thisWeekBookings:0,thisMonthBookings:0}),[d,g]=o.useState(!0);o.useEffect(()=>{m()},[t]);const m=async()=>{if(!(t!=null&&t.$id)){g(!1);return}try{g(!0);const j=await Os.getProviderBookings(t.$id),I=new Date,p=new Date(I.getTime()-10080*60*1e3),R=new Date(I.getTime()-720*60*60*1e3),w=j.filter(S=>S.status==="completed"),P=j.filter(S=>S.status==="pending"||S.status==="confirmed"),D=j.filter(S=>S.status==="cancelled"),L=j.filter(S=>new Date(S.createdAt||S.date)>=p),O=j.filter(S=>new Date(S.createdAt||S.date)>=R),H=w.reduce((S,N)=>{const b=(N.price||0)*.7;return S+b},0);l({totalBookings:j.length,completedBookings:w.length,pendingBookings:P.length,canceledBookings:D.length,totalEarnings:H,avgRating:t.rating||0,totalReviews:t.reviewCount||0,thisWeekBookings:L.length,thisMonthBookings:O.length})}catch{}finally{g(!1)}},x=j=>"Rp ".concat(Math.round(j).toLocaleString("id-ID")),v=({icon:j,title:I,value:p,subtitle:R,color:w})=>e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 ".concat(w," bg-opacity-10 rounded-lg flex items-center justify-center"),children:e.jsx(j,{className:"w-6 h-6 ".concat(w)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:I}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:p}),R&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:R})]})]})});return e.jsx(Rt,{title:i==="id"?"Analitik & Performa":"Analytics & Performance",subtitle:i==="id"?"Statistik booking dan pendapatan Anda":"Your booking statistics and earnings",onBackToStatus:a||(()=>s==null?void 0:s("therapist-status")),onNavigate:s,therapist:t,currentPage:"analytics",language:i,onLogout:n,icon:e.jsx(gn,{className:"w-6 h-6 text-orange-600"}),children:e.jsx("div",{className:"bg-gray-50 p-6",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:i==="id"?"Memuat analitik...":"Loading analytics..."})]})}):r.totalBookings===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(gn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:i==="id"?"Belum Ada Data":"No Data Yet"}),e.jsx("p",{className:"text-gray-600",children:i==="id"?"Data analitik akan muncul setelah Anda menyelesaikan booking pertama":"Analytics data will appear after your first completed booking"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:i==="id"?"Ringkasan":"Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(v,{icon:dt,title:i==="id"?"Total Booking":"Total Bookings",value:r.totalBookings,subtitle:i==="id"?"Semua waktu":"All time",color:"text-blue-600"}),e.jsx(v,{icon:$e,title:i==="id"?"Selesai":"Completed",value:r.completedBookings,subtitle:"".concat(r.totalBookings>0?Math.round(r.completedBookings/r.totalBookings*100):0,"% completion rate"),color:"text-green-600"}),e.jsx(v,{icon:ze,title:"Pending",value:r.pendingBookings,subtitle:i==="id"?"Menunggu konfirmasi":"Awaiting confirmation",color:"text-yellow-600"}),e.jsx(v,{icon:Ot,title:i==="id"?"Dibatalkan":"Canceled",value:r.canceledBookings,subtitle:"".concat(r.totalBookings>0?Math.round(r.canceledBookings/r.totalBookings*100):0,"% cancellation rate"),color:"text-red-600"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:i==="id"?"Pendapatan":"Earnings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(v,{icon:ea,title:i==="id"?"Total Pendapatan":"Total Earnings",value:x(r.totalEarnings),subtitle:i==="id"?"Setelah komisi 30%":"After 30% commission",color:"text-green-600"}),e.jsx(v,{icon:Zt,title:i==="id"?"Rata-rata per Booking":"Average per Booking",value:x(r.completedBookings>0?r.totalEarnings/r.completedBookings:0),subtitle:i==="id"?"Pendapatan rata-rata":"Average earnings",color:"text-purple-600"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:i==="id"?"Aktivitas Terkini":"Recent Activity"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(v,{icon:dt,title:i==="id"?"7 Hari Terakhir":"Last 7 Days",value:r.thisWeekBookings,subtitle:i==="id"?"Booking minggu ini":"Bookings this week",color:"text-indigo-600"}),e.jsx(v,{icon:dt,title:i==="id"?"30 Hari Terakhir":"Last 30 Days",value:r.thisMonthBookings,subtitle:i==="id"?"Booking bulan ini":"Bookings this month",color:"text-pink-600"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:i==="id"?"Rating & Ulasan":"Ratings & Reviews"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(v,{icon:jt,title:i==="id"?"Rating Rata-rata":"Average Rating",value:r.avgRating.toFixed(1),subtitle:"".concat(r.totalReviews," ").concat(i==="id"?"ulasan":"reviews"),color:"text-yellow-600"}),e.jsx(v,{icon:Ia,title:i==="id"?"Total Ulasan":"Total Reviews",value:r.totalReviews,subtitle:i==="id"?"Dari pelanggan":"From customers",color:"text-orange-600"})]})]})]})})})},tg=({therapist:t,customer:a,onBack:s,onNavigate:n,onLogout:i,language:r="id"})=>{const[l,d]=o.useState(null),[g,m]=o.useState(!1),[x,v]=o.useState(""),[j,I]=o.useState(!1),p=[{id:"bronze",name:"10% Off",discount:10,description:"Diskon 10% untuk semua jenis massage",color:"text-amber-700",bgGradient:"from-amber-100 to-amber-200"},{id:"silver",name:"15% Off",discount:15,description:"Diskon 15% untuk semua jenis massage",color:"text-gray-700",bgGradient:"from-gray-100 to-gray-300"},{id:"gold",name:"20% Off",discount:20,description:"Diskon 20% untuk semua jenis massage",color:"text-yellow-700",bgGradient:"from-yellow-100 to-yellow-300"},{id:"platinum",name:"25% Off",discount:25,description:"Diskon 25% untuk semua jenis massage - Special!",color:"text-purple-700",bgGradient:"from-purple-100 to-purple-300"}],R=D=>{const L="GIFT",O=Math.random().toString(36).substring(2,8).toUpperCase(),H="".concat(D,"OFF");return"".concat(L,"-").concat(H,"-").concat(O)},w=async()=>{if(!l||!a){se("Please select a banner","error");return}m(!0);try{const D=p.find(N=>N.id===l);if(!D)throw new Error("Invalid banner selection");const L=R(D.discount);v(L);const O=r==="id"?"ðŸŽ Terima kasih atas kepercayaan Anda!\n\nSebagai apresiasi, saya ingin memberikan voucher diskon khusus:\n\nðŸŽŸï¸ Kode: ".concat(L,"\nðŸ’° Diskon: ").concat(D.discount,"%\nðŸ“‹ Berlaku untuk: Semua jenis massage\n\nGunakan kode ini saat booking berikutnya di Order Now chat window.\n\nSalam hangat,\n").concat(t.name||"Your Therapist"):"ðŸŽ Thank you for your valued custom!\n\nAs a token of appreciation, please accept this special discount voucher:\n\nðŸŽŸï¸ Code: ".concat(L,"\nðŸ’° Discount: ").concat(D.discount,"%\nðŸ“‹ Valid for: Any massage type\n\nUse this code when booking through the Order Now chat window.\n\nWarm regards,\n").concat(t.name||"Your Therapist"),H={code:L,therapistId:t.$id,customerId:a.customerId,customerName:a.customerName,discount:D.discount,createdAt:new Date().toISOString(),used:!1,validUntil:new Date(Date.now()+720*60*60*1e3).toISOString()},S=JSON.parse(localStorage.getItem("therapist_vouchers")||"[]");S.push(H),localStorage.setItem("therapist_vouchers",JSON.stringify(S)),I(!0),se(r==="id"?"Voucher berhasil dikirim ke ".concat(a.customerName,"!"):"Voucher sent successfully to ".concat(a.customerName,"!"),"success")}catch{se(r==="id"?"Gagal mengirim voucher":"Failed to send voucher","error")}finally{m(!1)}},P=()=>{x&&(navigator.clipboard.writeText(x),se(r==="id"?"Kode voucher disalin!":"Voucher code copied!","success"))};return e.jsx(Rt,{title:r==="id"?"Kirim Voucher Diskon":"Send Discount Voucher",subtitle:a?"".concat(r==="id"?"Untuk: ":"To: ").concat(a.customerName).concat(a.lastMassageType?" â€¢ ".concat(a.lastMassageType):""):void 0,onBackToStatus:s,onNavigate:n,therapist:t,currentPage:"send-discount",language:r,onLogout:i,icon:e.jsx(is,{className:"w-6 h-6 text-orange-600"}),children:e.jsx("div",{className:"bg-gray-50",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:e.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:j?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(dn,{className:"w-10 h-10 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:r==="id"?"ðŸŽ‰ Voucher Terkirim!":"ðŸŽ‰ Voucher Sent!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:r==="id"?"Voucher diskon telah dikirim ke ".concat((a==null?void 0:a.customerName)||"pelanggan"):"Discount voucher has been sent to ".concat((a==null?void 0:a.customerName)||"customer")}),x&&e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-300 rounded-xl p-6 mb-6 max-w-md mx-auto",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:r==="id"?"Kode Voucher:":"Voucher Code:"}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("code",{className:"text-2xl font-bold text-orange-600 tracking-wider",children:x}),e.jsx("button",{onClick:P,className:"p-2 hover:bg-orange-200 rounded-lg transition-colors",title:r==="id"?"Salin kode":"Copy code",children:e.jsx(Rc,{className:"w-5 h-5 text-orange-600"})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx("button",{onClick:()=>{I(!1),d(null),v("")},className:"px-6 py-3 bg-white border-2 border-orange-500 text-orange-600 font-semibold rounded-xl hover:bg-orange-50 transition-colors",children:r==="id"?"Kirim Lagi":"Send Another"}),e.jsx("button",{onClick:s,className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-semibold rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all",children:r==="id"?"Kembali ke Pelanggan":"Back to Customers"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:r==="id"?"ðŸ“‹ Cara Kerja":"ðŸ“‹ How It Works"}),e.jsxs("ol",{className:"text-blue-800 space-y-2 text-sm",children:[e.jsxs("li",{children:["1. ",r==="id"?"Pilih 1 banner diskon":"Select 1 discount banner"]}),e.jsxs("li",{children:["2. ",r==="id"?'Klik "Kirim Gift" untuk generate kode voucher':'Click "Send Gift" to generate voucher code']}),e.jsxs("li",{children:["3. ",r==="id"?"Voucher otomatis dikirim ke chat pelanggan":"Voucher automatically sent to customer chat"]}),e.jsxs("li",{children:["4. ",r==="id"?"Pelanggan gunakan kode di Order Now chat window":"Customer uses code in Order Now chat window"]}),e.jsxs("li",{children:["5. ",r==="id"?"Sistem otomatis kurangi harga & hitung komisi 30%":"System auto-deducts price & calculates 30% commission"]})]})]}),e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:r==="id"?"Pilih Banner Diskon:":"Select Discount Banner:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:p.map(D=>e.jsxs("button",{onClick:()=>d(D.id),className:"relative bg-gradient-to-br ".concat(D.bgGradient," rounded-xl p-6 border-2 transition-all text-left ").concat(l===D.id?"border-orange-500 shadow-lg scale-105":"border-gray-200 hover:border-orange-300 hover:shadow-md"),children:[l===D.id&&e.jsx("div",{className:"absolute top-3 right-3 w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center",children:e.jsx(dn,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"mb-3",children:e.jsx(is,{className:"w-12 h-12 ".concat(D.color)})}),e.jsx("h3",{className:"text-2xl font-bold ".concat(D.color," mb-2"),children:D.name}),e.jsx("p",{className:"text-sm ".concat(D.color," opacity-90"),children:D.description})]},D.id))}),e.jsx("button",{onClick:w,disabled:!l||g,className:"w-full py-4 rounded-xl font-bold text-white text-lg transition-all flex items-center justify-center gap-3 ".concat(!l||g?"bg-gray-300 cursor-not-allowed":"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg"),children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:r==="id"?"Mengirim...":"Sending..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Oo,{className:"w-5 h-5"}),e.jsx("span",{children:l?r==="id"?"Kirim Gift":"Send Gift":r==="id"?"Pilih Banner Dulu":"Select Banner First"})]})})]})})})})},ol=new Oc().setEndpoint("https://syd.cloud.appwrite.io/v1").setProject("68f23b11000d25eb3664"),ia=new Uc(ol),ag=new Fc(ol),ra="68f76ee1000e64ca8d05",oa="safepass",lo="default";class sg{async submitApplication(a){try{const s=new Date().toISOString(),n=new Date;n.setFullYear(n.getFullYear()+1);const i={entityType:a.entityType,entityId:a.entityId,entityName:a.entityName,hotelVillaSafePassStatus:"pending",hasSafePassVerification:!1,hotelVillaLetters:a.hotelVillaLetters?JSON.stringify(a.hotelVillaLetters):null,safePassSubmittedAt:s,safePassPaymentId:a.safePassPaymentId||null,safePassIssuedAt:s,safePassExpiry:n.toISOString(),safePassApprovedAt:null,safePassApprovedBy:null,safePassRejectionReason:null,safePassCardUrl:null};return await ia.createDocument(ra,oa,yt.unique(),i)}catch(s){throw u.error("Error submitting SafePass application:",s),s}}async uploadLetter(a){try{const s=await ag.createFile(lo,yt.unique(),a);return"undefined/storage/buckets/".concat(lo,"/files/").concat(s.$id,"/view?project=undefined")}catch(s){throw u.error("Error uploading SafePass letter:",s),s}}async getApplication(a){try{return await ia.getDocument(ra,oa,a)}catch(s){return u.error("Error fetching SafePass application:",s),null}}async getApplicationByEntity(a,s){try{const n=await ia.listDocuments(ra,oa,[ae.equal("entityType",a),ae.equal("entityId",s),ae.orderDesc("$createdAt"),ae.limit(1)]);return n.documents.length>0?n.documents[0]:null}catch(n){return u.error("Error fetching SafePass application by entity:",n),null}}async listApplications(a,s=100){try{const n=[ae.orderDesc("$createdAt"),ae.limit(s)];return a&&n.push(ae.equal("hotelVillaSafePassStatus",a)),(await ia.listDocuments(ra,oa,n)).documents}catch(n){return u.error("Error listing SafePass applications:",n),[]}}async approveApplication(a){try{const s=new Date().toISOString();return a.approved?await ia.updateDocument(ra,oa,a.applicationId,{hotelVillaSafePassStatus:"approved",safePassApprovedAt:s,safePassApprovedBy:a.adminId,safePassRejectionReason:null}):await ia.updateDocument(ra,oa,a.applicationId,{hotelVillaSafePassStatus:"rejected",safePassRejectionReason:a.rejectionReason||"Application rejected by admin"})}catch(s){throw u.error("Error approving SafePass application:",s),s}}async activateApplication(a){try{const s=new Date().toISOString(),n=new Date;return n.setFullYear(n.getFullYear()+2),await ia.updateDocument(ra,oa,a.applicationId,{hotelVillaSafePassStatus:"active",hasSafePassVerification:!0,safePassIssuedAt:s,safePassExpiry:n.toISOString(),safePassCardUrl:a.safePassCardUrl||null})}catch(s){throw u.error("Error activating SafePass:",s),s}}async revokeApplication(a,s){try{return await ia.updateDocument(ra,oa,a,{hotelVillaSafePassStatus:"rejected",hasSafePassVerification:!1,safePassRejectionReason:s})}catch(n){throw u.error("Error revoking SafePass:",n),n}}async getStats(){try{const a=await this.listApplications(void 0,1e3);return{total:a.length,pending:a.filter(n=>n.hotelVillaSafePassStatus==="pending").length,approved:a.filter(n=>n.hotelVillaSafePassStatus==="approved").length,active:a.filter(n=>n.hotelVillaSafePassStatus==="active").length,rejected:a.filter(n=>n.hotelVillaSafePassStatus==="rejected").length}}catch(a){return u.error("Error fetching SafePass stats:",a),{total:0,pending:0,approved:0,active:0,rejected:0}}}async updateStatus(a,s){try{return await ia.updateDocument(ra,oa,a,{hotelVillaSafePassStatus:s})}catch(n){throw u.error("Error updating SafePass status:",n),n}}async deleteApplication(a){try{return await ia.deleteDocument(ra,oa,a),!0}catch(s){return u.error("Error deleting SafePass application:",s),!1}}}const Vn=new sg,ng=({therapistId:t,therapistName:a})=>{const[s,n]=o.useState(null),[i,r]=o.useState(!0),[l,d]=o.useState(!1),[g,m]=o.useState(""),[x,v]=o.useState([]),[j,I]=o.useState([]),[p,R]=o.useState(!1);o.useEffect(()=>{w()},[t]);const w=async()=>{r(!0);try{const S=await Vn.getApplicationByEntity("therapist",t);n(S)}catch{}finally{r(!1)}},P=S=>{if(S.target.files){const N=Array.from(S.target.files);v(k=>[...k,...N])}},D=S=>{v(N=>N.filter((k,b)=>b!==S))},L=async()=>{if(x.length===0)return alert("Please select at least one document to upload"),!1;R(!0);try{const S=[];for(const N of x){const k=await Vn.uploadLetter(N);S.push(k)}return I(S),!0}catch{return alert("Error uploading files. Please try again."),!1}finally{R(!1)}},O=async S=>{if(S.preventDefault(),x.length===0){alert("Please upload at least one supporting document");return}if(!g.trim()){alert("Please provide a payment reference ID");return}d(!0);try{let N=j;if(j.length===0){if(!await L()){d(!1);return}N=j}await Vn.submitApplication({entityType:"therapist",entityId:t,entityName:a,hotelVillaLetters:N,safePassPaymentId:g}),alert("SafePass application submitted successfully!"),await w(),m(""),v([]),I([])}catch{alert("Error submitting application. Please try again.")}finally{d(!1)}},H=()=>{if(!s)return null;switch(s.hotelVillaSafePassStatus){case"pending":return e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ze,{className:"w-6 h-6 text-yellow-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"Application Under Review"}),e.jsx("p",{className:"text-yellow-800 text-sm",children:"Your SafePass application is being reviewed by our admin team. You will be notified once a decision is made."}),e.jsxs("p",{className:"text-yellow-700 text-xs mt-2",children:["Submitted: ",new Date(s.safePassSubmittedAt).toLocaleDateString()]})]})]})});case"approved":return e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($e,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Application Approved"}),e.jsx("p",{className:"text-blue-800 text-sm",children:"Your SafePass application has been approved! Your SafePass card is being prepared and will be activated soon."}),e.jsxs("p",{className:"text-blue-700 text-xs mt-2",children:["Approved: ",new Date(s.safePassApprovedAt).toLocaleDateString()]})]})]})});case"active":return e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(zt,{className:"w-6 h-6 text-green-600 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"SafePass Active âœ“"}),e.jsx("p",{className:"text-green-800 text-sm mb-3",children:"Your SafePass is active! You can now offer services at hotels, villas, gyms, and private homes."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-green-700",children:"Issued:"}),e.jsx("span",{className:"ml-2 font-medium",children:new Date(s.safePassIssuedAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-green-700",children:"Expires:"}),e.jsx("span",{className:"ml-2 font-medium",children:new Date(s.safePassExpiry).toLocaleDateString()})]})]}),s.safePassCardUrl&&e.jsxs("a",{href:s.safePassCardUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 mt-4 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium transition-colors",children:[e.jsx(da,{className:"w-4 h-4"}),"View SafePass Card"]})]})]})});case"rejected":return e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ot,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"Application Rejected"}),e.jsx("p",{className:"text-red-800 text-sm mb-2",children:"Unfortunately, your SafePass application was not approved."}),s.safePassRejectionReason&&e.jsx("div",{className:"bg-red-100 border border-red-300 rounded p-3 mt-3",children:e.jsxs("p",{className:"text-red-900 text-sm",children:[e.jsx("strong",{children:"Reason:"})," ",s.safePassRejectionReason]})}),e.jsx("p",{className:"text-red-700 text-xs mt-3",children:"You can submit a new application after addressing the issues mentioned above."})]})]})});default:return null}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))]",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):s&&s.hotelVillaSafePassStatus!=="rejected"?e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50 p-6",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(zt,{className:"w-8 h-8 text-orange-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"SafePass Status"})]}),H()]})}):e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50 p-6",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(zt,{className:"w-8 h-8 text-orange-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Apply for SafePass"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ni,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"What is SafePass?"}),e.jsx("p",{className:"text-blue-800 text-sm mb-3",children:"SafePass is a professional certification that allows you to provide massage services at hotels, villas, gyms, and private homes. It ensures you meet industry standards for safety, professionalism, and service excellence."}),e.jsxs("ul",{className:"text-blue-800 text-sm space-y-1",children:[e.jsx("li",{children:"âœ“ Access to premium service locations"}),e.jsx("li",{children:"âœ“ Professional verification badge"}),e.jsx("li",{children:"âœ“ Enhanced customer trust"}),e.jsx("li",{children:"âœ“ Valid for 2 years"})]})]})]})}),s&&s.hotelVillaSafePassStatus==="rejected"&&e.jsx("div",{className:"mb-6",children:H()}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Submit Application"}),e.jsxs("form",{onSubmit:O,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Reference ID *"}),e.jsx("input",{type:"text",value:g,onChange:S=>m(S.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter payment transaction ID",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Transfer SafePass fee and enter your payment reference number"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supporting Documents *"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Upload required documents (company letter, police clearance, health certificate, etc.)"}),e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(Ca,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PDF, JPG, PNG (max 10MB each)"})]}),e.jsx("input",{type:"file",onChange:P,multiple:!0,accept:".pdf,.jpg,.jpeg,.png",className:"hidden"})]}),x.length>0&&e.jsx("div",{className:"mt-4 space-y-2",children:x.map((S,N)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(da,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:S.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",(S.size/1024/1024).toFixed(2)," MB)"]})]}),e.jsx("button",{type:"button",onClick:()=>D(N),className:"text-red-600 hover:text-red-700",children:e.jsx(Ot,{className:"w-5 h-5"})})]},N))})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Application Requirements:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:"Valid payment proof for SafePass fee"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:"Company letter or business registration"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:"Police clearance certificate (SKCK)"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:"Health certificate"})]})]})]}),e.jsx("button",{type:"submit",disabled:l||p,className:"w-full py-3 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:l||p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),p?"Uploading documents...":"Submitting application..."]}):e.jsxs(e.Fragment,{children:[e.jsx(zt,{className:"w-5 h-5"}),"Submit SafePass Application"]})})]})]})]})})},ig=()=>{const[t,a]=o.useState(null),[s,n]=o.useState(!0);o.useEffect(()=>{i()},[]);const i=async()=>{try{const r=localStorage.getItem("therapistId");if(!r){n(!1);return}const l=await Ye.getById(r);a(l)}catch{}finally{n(!1)}};return s?e.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))]",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):t?e.jsx(ng,{therapistId:t.$id||t.id.toString(),therapistName:t.name}):e.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))]",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y pan-x"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Therapist Not Found"}),e.jsx("p",{className:"text-gray-600",children:"Please log in to access SafePass application."})]})})},rg=[/\d{8,}/,/0\d{8,}/,/\+62\s*\d{2,}/,/62\s*\d{8,}/,/\d{3,}[\s\-\.]\d{3,}[\s\-\.]?\d{3,}/,/whatsapp|wa\.me|wa\.me\/\d+/i];function Wn(t){if(!t||typeof t!="string")return!1;const a=t.trim();if(!a.length)return!1;for(const s of rg)if(s.test(a))return!0;return!1}const og="Please do not share contact numbers in your application. Employers will contact you via the platform.",lg="Jangan cantumkan nomor kontak dalam lamaran. Employer akan menghubungi Anda melalui platform.",co=5,cg=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],dg=({therapist:t,onBack:a,onNavigate:s,onLogout:n,language:i="id"})=>{const[r,l]=o.useState(""),[d,g]=o.useState(""),[m,x]=o.useState(""),[v,j]=o.useState(null),[I,p]=o.useState(""),[R,w]=o.useState(""),[P,D]=o.useState(!0),[L,O]=o.useState(!1),[H,S]=o.useState(!1),N={en:{title:"Job Applications",subtitle:"Your info and CV for employer job postings",intro:"Use this profile when you apply to jobs from the Massage Jobs page. Employers can view your experience and optional CV.",experience:"Experience",experiencePlaceholder:"e.g. 5 years massage therapy, spa and hotel experience",specialties:"Specialties",specialtiesPlaceholder:"e.g. Swedish, deep tissue, prenatal",coverLetter:"Short intro for applications",coverLetterPlaceholder:"A few lines about yourself for employers",cvOptional:"CV / Resume (optional)",cvHint:"PDF or DOC/DOCX, max 5MB",uploadCv:"Upload CV",removeCv:"Remove",save:"Save",saving:"Saving...",saved:"Saved successfully",error:"Could not save. Try again.",browseJobs:"Browse jobs",tipsTitle:"CV & application tips",tipsContent:"Keep your CV to 1â€“2 pages with clear sections. List your real job titles, employers, and dates. Include your contact details. If you don't have a CV, you can still apply using the fields belowâ€”uploading a CV is optional.",tipsBenefits:["Experience: years and types (spa, hotel, freelance)","Massage types and skills (e.g. Swedish, deep tissue)","Languages you speak","Short intro so employers see your communication style"]},id:{title:"Lamaran Pekerjaan",subtitle:"Info dan CV Anda untuk lowongan employer",intro:"Gunakan profil ini saat melamar dari halaman Massage Jobs. Employer dapat melihat pengalaman dan CV Anda.",experience:"Pengalaman",experiencePlaceholder:"Contoh: 5 tahun terapi pijat, pengalaman spa dan hotel",specialties:"Keahlian",specialtiesPlaceholder:"Contoh: Swedish, deep tissue, prenatal",coverLetter:"Intro singkat untuk lamaran",coverLetterPlaceholder:"Beberapa kalimat tentang Anda untuk employer",cvOptional:"CV / Resume (opsional)",cvHint:"PDF atau DOC/DOCX, maks 5MB",uploadCv:"Unggah CV",removeCv:"Hapus",save:"Simpan",saving:"Menyimpan...",saved:"Berhasil disimpan",error:"Gagal menyimpan. Coba lagi.",browseJobs:"Cari lowongan",tipsTitle:"Tips CV & lamaran",tipsContent:"Usahakan CV 1â€“2 halaman dengan bagian yang jelas. Cantumkan jabatan, nama employer, dan tanggal. Sertakan kontak. Jika belum punya CV, Anda tetap bisa melamar lewat kolom di bawahâ€”unggah CV bersifat opsional.",tipsBenefits:["Pengalaman: tahun dan jenis (spa, hotel, freelance)","Jenis pijat dan keahlian (mis. Swedish, deep tissue)","Bahasa yang Anda kuasai","Intro singkat agar employer melihat gaya komunikasi Anda"]}},k=N[i]||N.id;o.useEffect(()=>{(async()=>{if(!(t!=null&&t.$id)&&!(t!=null&&t.id)){D(!1);return}try{const B=String(t.$id||t.id),f=await Cn.get(B);f&&(l(f.jobSeekerExperience||""),g(f.jobSeekerSpecialties||""),x(f.jobSeekerCoverLetter||""),w(f.cvUrl||""),p(f.cvFileName||""))}catch{}finally{D(!1)}})()},[t==null?void 0:t.$id,t==null?void 0:t.id]);const b=U=>{var f;const B=(f=U.target.files)==null?void 0:f[0];if(B){if(B.size>co*1024*1024){se("File max ".concat(co,"MB"),"error");return}if(!cg.includes(B.type)){se("Only PDF or DOC/DOCX","error");return}j(B),p(B.name)}},y=()=>{j(null),p(""),w("")},T=async U=>{if(U.preventDefault(),!(t!=null&&t.$id)&&!(t!=null&&t.id))return;const B=i==="id"?lg:og;if(Wn(r)||Wn(d)||Wn(m)){se(B,"error");return}O(!0);try{const f=String(t.$id||t.id);let A=R,c=I;if(v){S(!0);const{url:h}=await Cn.uploadCv(f,v);A=h,c=v.name,S(!1),j(null),w(h),p(v.name)}await Cn.upsert(f,{jobSeekerExperience:r,jobSeekerSpecialties:d,jobSeekerCoverLetter:m,cvUrl:A||void 0,cvFileName:c||void 0}),se(k.saved,"success")}catch{se(k.error,"error")}finally{O(!1)}},F=U=>s==null?void 0:s(U);return P?e.jsx(Rt,{title:k.title,subtitle:k.subtitle,onBackToStatus:a,onNavigate:F,therapist:t,currentPage:"therapist-job-applications",language:i,onLogout:n,icon:e.jsx(Ts,{className:"w-6 h-6 text-orange-600"}),children:e.jsx("div",{className:"bg-gray-50 min-h-full",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-orange-500 border-t-transparent mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-gray-600",children:i==="id"?"Memuat...":"Loading..."})]})})})}):e.jsx(Rt,{title:k.title,subtitle:k.subtitle,onBackToStatus:a,onNavigate:F,therapist:t,currentPage:"therapist-job-applications",language:i,onLogout:n,icon:e.jsx(Ts,{className:"w-6 h-6 text-orange-600"}),children:e.jsx("div",{className:"bg-gray-50 min-h-full",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-4 space-y-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-lg flex-shrink-0",children:e.jsx(Ts,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-900",children:k.title}),e.jsx(Nt,{title:k.tipsTitle,content:k.tipsContent,benefits:k.tipsBenefits,position:"bottom",size:"sm"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:k.intro}),s&&e.jsxs("button",{type:"button",onClick:()=>s("massage-jobs"),className:"mt-3 text-sm font-medium text-orange-600 hover:text-orange-700",children:["â†’ ",k.browseJobs]})]})]})}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ct,{className:"w-5 h-5 text-orange-600"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Info dari profil Anda"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Nama, WhatsApp, dan email dari profil akan ikut saat Anda melamar."}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-gray-700",children:[e.jsx("span",{children:(t==null?void 0:t.name)||"â€“"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:(t==null?void 0:t.whatsappNumber)||(t==null?void 0:t.email)||"â€“"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:k.experience}),e.jsx("textarea",{value:r,onChange:U=>l(U.target.value),placeholder:k.experiencePlaceholder,rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:border-orange-500 focus:ring-1 focus:ring-orange-200 outline-none"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:k.specialties}),e.jsx("input",{type:"text",value:d,onChange:U=>g(U.target.value),placeholder:k.specialtiesPlaceholder,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:border-orange-500 focus:ring-1 focus:ring-orange-200 outline-none"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:k.coverLetter}),e.jsx("textarea",{value:m,onChange:U=>x(U.target.value),placeholder:k.coverLetterPlaceholder,rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:border-orange-500 focus:ring-1 focus:ring-orange-200 outline-none"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(da,{className:"w-5 h-5 text-orange-600"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:k.cvOptional})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:k.cvHint}),I?e.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("span",{className:"text-sm text-gray-700 truncate",children:I}),e.jsxs("button",{type:"button",onClick:y,className:"flex items-center gap-1 text-sm text-red-600 hover:text-red-700",children:[e.jsx(wt,{className:"w-4 h-4"})," ",k.removeCv]})]}):e.jsxs("label",{className:"flex items-center justify-center gap-2 w-full py-3 px-4 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-orange-400 hover:bg-orange-50/50 transition-colors",children:[e.jsx(Ca,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:k.uploadCv}),e.jsx("input",{type:"file",accept:".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:b,className:"hidden"})]})]}),e.jsx("button",{type:"submit",disabled:L||H,className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-orange-500 text-white font-semibold rounded-lg hover:bg-orange-600 disabled:opacity-60 disabled:cursor-not-allowed transition-colors",children:L||H?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),k.saving]}):e.jsxs(e.Fragment,{children:[e.jsx(ki,{className:"w-5 h-5"}),k.save]})})]})]})})})},at={dashboard:{component:vu},status:{component:Tu},bookings:{component:Bu},earnings:{component:$u},chat:{component:Ou},notifications:{component:Uu},legal:{component:Au},jobApplications:{component:dg},howItWorks:{component:Eu},calendar:{component:Fu},payment:{component:td},paymentStatus:{component:Hu},menu:{component:Vu},commission:{component:Gu},schedule:{component:rl},packageTerms:{component:Ku},sendDiscount:{component:Yu},moreCustomers:{component:Qu},hotelVillaSafePass:{component:Xu},safePassApplication:{component:ig},customers:{component:Zu},analytics:{component:eg},bannerDiscount:{component:tg}},la=o.lazy(()=>z(()=>import("./AdminDashboardPage.DY4gCNX6.js"),__vite__mapDeps([55,2,56,1,0,3,4,5,6,8,9]))),mg=o.lazy(()=>z(()=>import("./route-admin.B3FykHSQ.js").then(t=>t.A),__vite__mapDeps([57,2,0,1,3,4,5,6]))),ug=o.lazy(()=>z(()=>import("./AdminSafePassManagement.w35TmZZf.js"),__vite__mapDeps([58,2,0,1,3,4,5,6,8,9])));o.lazy(()=>z(()=>import("./AdminSafePassManagementAll.CsGJiXO2.js"),__vite__mapDeps([59,2,1])));const Ht={dashboard:{component:la},therapists:{component:la},bookings:{component:la},chat:{component:la},revenue:{component:la},commissions:{component:la},ktpVerification:{component:la},achievements:{component:la},systemHealth:{component:la},settings:{component:la},safePass:{component:ug},liveListings:{component:mg}},gg=ce.lazy(()=>z(()=>import("./App.CX7dple4.js"),__vite__mapDeps([60,2,0,1,3,4,5,6,46,47,61,44,19,9,8]))),hg=ce.lazy(()=>z(()=>import("./PlaceSafePassWrapper.6G1F8yH2.js"),__vite__mapDeps([62,2,0,1,3,4,5,6,8,9]))),zn={dashboard:{component:gg},safePassApplication:{component:hg}},pg=ce.lazy(()=>z(()=>import("./main.DHABHNLT.js").then(t=>t.A),__vite__mapDeps([63,2,0,1,3,4,5,6,64]))),mo={dashboard:{component:pg}},ll="indastreet_terms_agreed_",uo="indastreet_user_terms_agreed";function di(t){if(typeof window=="undefined"||!t)return!1;try{return window.localStorage.getItem(ll+t)==="1"}catch{return!1}}function mi(t){if(!(typeof window=="undefined"||!t))try{window.localStorage.setItem(ll+t,"1")}catch{}}function cl(t){return t?uo+"_"+t:uo+"_guest"}function xg(t){if(typeof window=="undefined")return!1;try{return window.localStorage.getItem(cl(t))==="1"}catch{return!1}}function fg(t){if(typeof window!="undefined")try{window.localStorage.setItem(cl(t),"1")}catch{}}const dl=({onBack:t,t:a,contactNumber:s,acceptMode:n,onAccept:i})=>{var l,d,g,m,x,v;const r=a||{};if(n&&i){const j=(d=(l=r.serviceProviderTerms)==null?void 0:l.modalTitle)!=null?d:"Therapist And Facial Services",I=(m=(g=r.serviceProviderTerms)==null?void 0:g.modalSubtitle)!=null?m:"Terms for therapists and facial service providers â€” IndaStreet";return e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black p-4",children:[e.jsxs("div",{className:"relative w-full max-w-3xl max-h-[90vh] flex flex-col rounded-lg bg-gray-900 shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex-shrink-0 px-6 py-4 bg-gray-900",children:[e.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs font-semibold bg-orange-500/20 text-orange-400 border border-orange-500/50 mb-2",children:"Therapist And Facial Services"}),e.jsx("h1",{className:"text-xl font-bold text-white",children:j}),e.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:I}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:r.effectiveDate})]}),e.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden px-6 py-4 min-h-0 service-terms-modal-scroll",style:{scrollbarWidth:"thin",scrollbarColor:"rgb(249 115 22) rgb(31 41 55)"},children:e.jsx("div",{className:"service-terms-modal-dark",children:e.jsx(go,{safeT:r})})}),e.jsx("div",{className:"flex-shrink-0 px-6 py-4 bg-gray-900",children:e.jsx("button",{type:"button",onClick:i,className:"w-full py-3.5 rounded-lg font-semibold text-white bg-orange-500 hover:bg-orange-600 active:bg-orange-700 transition-colors shadow-md border border-orange-400/50",children:(v=(x=r.serviceProviderTerms)==null?void 0:x.agreeButton)!=null?v:"Agree to terms and conditions"})})]}),e.jsx("style",{children:"\n                    .service-terms-modal-scroll::-webkit-scrollbar { width: 8px; }\n                    .service-terms-modal-scroll::-webkit-scrollbar-track { background: rgb(31 41 55); border-radius: 4px; }\n                    .service-terms-modal-scroll::-webkit-scrollbar-thumb { background: rgb(249 115 22); border-radius: 4px; }\n                    .service-terms-modal-dark { color: rgb(209 213 219); }\n                    .service-terms-modal-dark h3 { color: rgb(251 146 60); }\n                    .service-terms-modal-dark h4 { color: rgb(253 186 116); }\n                    .service-terms-modal-dark p, .service-terms-modal-dark li { color: rgb(209 213 219); }\n                    .service-terms-modal-dark .bg-orange-100 { background: rgba(251,146,60,0.2); }\n                    .service-terms-modal-dark .text-orange-900 { color: rgb(253 186 116); }\n                    .service-terms-modal-dark .bg-amber-50\\/80 { background: rgba(251,191,36,0.2); }\n                    .service-terms-modal-dark .bg-red-50\\/80 { background: rgba(239,68,68,0.2); }\n                    .service-terms-modal-dark .bg-green-50 { background: rgba(34,197,94,0.2); }\n                    .service-terms-modal-dark .text-green-900 { color: rgb(134 239 172); }\n                    .service-terms-modal-dark .bg-yellow-50 { background: rgba(234,179,8,0.2); }\n                    .service-terms-modal-dark .border-yellow-200 { border-color: rgba(234,179,8,0.5); }\n                    .service-terms-modal-dark .text-gray-800 { color: rgb(229 231 235); }\n                    .service-terms-modal-dark .text-gray-700 { color: rgb(209 213 219); }\n                    .service-terms-modal-dark .text-gray-600 { color: rgb(156 163 175); }\n                    .service-terms-modal-dark .text-red-700 { color: rgb(252 165 165); }\n                    .service-terms-modal-dark .text-green-700 { color: rgb(134 239 172); }\n                    .service-terms-modal-dark .bg-blue-50 { background: rgba(59,130,246,0.2); }\n                    .service-terms-modal-dark .border-blue-200 { border-color: rgba(59,130,246,0.5); }\n                    .service-terms-modal-dark .bg-gray-100 { background: rgb(55 65 81); }\n                    .service-terms-modal-dark .border-orange-200 { border-color: rgba(251,146,60,0.5); }\n                    .service-terms-modal-dark .bg-black { background: rgb(17 24 39); }\n                    .service-terms-modal-dark .bg-black .text-gray-300 { color: rgb(209 213 219); }\n                    .service-terms-modal-dark .bg-red-900\\/90 { background: rgba(127, 29, 29, 0.9); }\n                    .service-terms-modal-dark .text-red-100 { color: rgb(254 226 226); }\n                    .service-terms-modal-dark .text-red-100\\/90 { color: rgba(254, 226, 226, 0.9); }\n                "})]})}return e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50",children:[e.jsx("header",{className:"bg-white p-4 shadow-md sticky top-0 z-[9997]",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:[e.jsx("span",{className:"text-black",children:"Inda"}),e.jsxs("span",{className:"text-orange-500",children:[e.jsx("span",{className:"inline-block animate-float",children:"S"}),"treet"]})]}),!n&&t&&e.jsx("button",{onClick:t,className:"p-2 hover:bg-orange-50 rounded-full transition-colors text-orange-500","aria-label":"Close",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("main",{className:"p-6 space-y-6 text-gray-700 pb-24 max-w-4xl mx-auto",children:[e.jsx(go,{safeT:r}),n&&i&&e.jsx("div",{className:"sticky bottom-0 left-0 right-0 pt-6 pb-8 -mx-6 px-6 bg-gray-50",children:e.jsx("button",{type:"button",onClick:i,className:"w-full py-4 rounded-xl font-semibold text-white bg-orange-500 hover:bg-orange-600 active:bg-orange-700 transition-colors shadow-md",children:"Agree to terms and conditions"})})]}),e.jsx("style",{children:"\n                @keyframes float {\n                    0%, 100% { transform: translateY(0); }\n                    50% { transform: translateY(-5px); }\n                }\n                .animate-float {\n                    animation: float 2s ease-in-out infinite;\n                }\n            "})]})},go=({safeT:t})=>{var a,s,n,i,r,l,d,g,m,x,v,j,I,p,R,w,P,D,L,O,H,S,N,k,b,y,T,F,U,B,f,A,c,h,C,M,E,W,X,_,$,q,J,Z,me;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-black text-gray-300 p-4 mb-6 rounded-lg",children:e.jsx("p",{className:"text-sm font-semibold",children:t.effectiveDate})}),e.jsx("p",{className:"text-sm leading-relaxed",children:t.intro}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:(a=t.acceptance)==null?void 0:a.title}),e.jsx("p",{className:"text-sm leading-relaxed",children:(s=t.acceptance)==null?void 0:s.content})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:(n=t.platformNature)==null?void 0:n.title}),e.jsx("p",{className:"text-sm leading-relaxed",children:(i=t.platformNature)==null?void 0:i.content})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:(r=t.governingLaw)==null?void 0:r.title}),e.jsx("p",{className:"text-sm leading-relaxed",children:(l=t.governingLaw)==null?void 0:l.content})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:(d=t.userRights)==null?void 0:d.title}),e.jsx("p",{className:"text-sm leading-relaxed",children:(g=t.userRights)==null?void 0:g.content})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:(m=t.confidentiality)==null?void 0:m.title}),e.jsx("p",{className:"text-sm leading-relaxed",children:(x=t.confidentiality)==null?void 0:x.content})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:t.therapistRightsTitle}),e.jsx("p",{className:"text-sm leading-relaxed",children:t.therapistRightsContent})]}),e.jsxs("div",{className:"space-y-2 bg-black text-gray-300 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-lg",children:t.locationTrackingTitle}),e.jsx("p",{className:"text-sm leading-relaxed",children:t.locationTrackingContent})]}),e.jsxs("div",{className:"space-y-2 bg-red-900/90 p-4 rounded-lg text-red-100",children:[e.jsx("h3",{className:"font-bold text-red-100 text-lg",children:t.contactSharingTitle}),e.jsx("p",{className:"text-sm leading-relaxed text-red-100/90",children:t.contactSharingContent})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:t.paymentTitle}),e.jsx("p",{className:"text-sm leading-relaxed",children:t.paymentContent})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:t.clientCommunicationTitle}),e.jsx("p",{className:"text-sm leading-relaxed",children:t.clientCommunicationContent})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:t.clientRightsTitle}),e.jsx("p",{className:"text-sm leading-relaxed",children:t.clientRightsContent})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:t.therapistObligationsTitle}),e.jsx("p",{className:"text-sm leading-relaxed",children:t.therapistObligationsContent})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:t.professionalismTitle}),e.jsx("p",{className:"text-sm leading-relaxed",children:t.professionalismContent})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:(v=t.userConduct)==null?void 0:v.title}),e.jsx("p",{className:"text-sm leading-relaxed mb-3",children:(j=t.userConduct)==null?void 0:j.content}),e.jsx("ul",{className:"list-disc list-inside space-y-2 text-sm ml-4",children:(((I=t.userConduct)==null?void 0:I.prohibitions)||[]).map((Fe,ve)=>e.jsx("li",{className:"leading-relaxed",children:Fe},ve))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:(p=t.intellectualProperty)==null?void 0:p.title}),e.jsx("p",{className:"text-sm leading-relaxed",children:(R=t.intellectualProperty)==null?void 0:R.content})]}),e.jsxs("div",{className:"space-y-2 bg-black text-gray-300 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-lg",children:((w=t.serviceProviderTerms)==null?void 0:w.title)||"Therapist And Facial Services"}),e.jsx("p",{className:"text-sm leading-relaxed",children:((P=t.serviceProviderTerms)==null?void 0:P.intro)||"By signing in or using IndaStreet as a therapist or facial service provider, you agree to the following terms."}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-sm mb-2",children:["ðŸ’° ",((D=t.serviceProviderTerms)==null?void 0:D.commissionTitle)||"Commission"]}),e.jsx("p",{className:"text-sm leading-relaxed",children:((L=t.serviceProviderTerms)==null?void 0:L.commissionContent)||"You must pay 30% commission to IndaStreet on all revenue from: Book Now, Order Now, and all scheduled bookings. This applies to every such booking made through the platform."})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-sm mb-2",children:["ðŸ“µ ",((O=t.serviceProviderTerms)==null?void 0:O.noContactTitle)||"No Sharing Contact Information"]}),e.jsx("p",{className:"text-sm leading-relaxed",children:((H=t.serviceProviderTerms)==null?void 0:H.noContactContent)||"You must never share your personal phone number, WhatsApp, or any other contact information with clients outside of the IndaStreet platform. All booking-related communication and transactions must remain on the platform."})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-sm mb-2",children:["ðŸ” ",((S=t.serviceProviderTerms)==null?void 0:S.noAccountSharingTitle)||"No Account Sharing"]}),e.jsx("p",{className:"text-sm leading-relaxed",children:((N=t.serviceProviderTerms)==null?void 0:N.noAccountSharingContent)||"You must never share your account with anyone. Each therapist or place must use only their own registered account. Sharing or lending your account is a serious violation and may result in immediate suspension or termination."})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-sm mb-2",children:["âš ï¸ ",((k=t.serviceProviderTerms)==null?void 0:k.sexualOfferingTitle)||"No Sexual Offerings â€” Zero Tolerance"]}),e.jsx("p",{className:"text-sm leading-relaxed",children:((b=t.serviceProviderTerms)==null?void 0:b.sexualOfferingContent)||"Any offering, solicitation, or provision of services of a sexual nature through or in connection with the platform will be reported to the correct authorities. Your account will be frozen with immediate effect for the duration of the investigation. The platform is for professional, legitimate massage and wellness services only."})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-sm mb-2",children:["ðŸŒ ",((y=t.serviceProviderTerms)==null?void 0:y.platformPurposeTitle)||"Platform Purpose and Users"]}),e.jsx("p",{className:"text-sm leading-relaxed",children:((T=t.serviceProviderTerms)==null?void 0:T.platformPurposeContent)||"The platform is for traffic purpose only. All users of the platform are IndaStreet Massage (indastreetmassage.com) users. You agree to use the platform solely to receive and fulfil bookings through IndaStreet and not to divert traffic or users to other channels."})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-sm mb-2",children:["ðŸ“ ",((F=t.serviceProviderTerms)==null?void 0:F.gpsTitle)||"GPS Location Agreement"]}),e.jsx("p",{className:"text-sm leading-relaxed",children:((U=t.serviceProviderTerms)==null?void 0:U.gpsContent)||"All service providers on IndaStreet agree to the use of GPS location where applicable, to offer safe service for users and for service providers. Location data may be used for safety, verification, and platform administration in accordance with our Privacy Policy."})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-sm mb-2",children:["ðŸ“‹ ",((B=t.serviceProviderTerms)==null?void 0:B.otherTitle)||"Other Obligations"]}),e.jsx("p",{className:"text-sm leading-relaxed",children:((f=t.serviceProviderTerms)==null?void 0:f.otherContent)||"You agree to provide only professional, lawful massage and wellness services; to comply with all applicable laws and regulations; and to maintain accurate profile information. IndaStreet reserves the right to suspend or terminate accounts that breach these terms."})]})]})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t-2 border-gray-700 bg-black text-gray-300 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-lg",children:t.disclaimerTitle}),e.jsx("p",{className:"text-sm leading-relaxed",children:t.disclaimerContent})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:(A=t.limitationOfLiability)==null?void 0:A.title}),e.jsx("p",{className:"text-sm leading-relaxed",children:(c=t.limitationOfLiability)==null?void 0:c.content})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:(h=t.disputeResolution)==null?void 0:h.title}),e.jsx("p",{className:"text-sm leading-relaxed",children:(C=t.disputeResolution)==null?void 0:C.content})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:(M=t.indemnification)==null?void 0:M.title}),e.jsx("p",{className:"text-sm leading-relaxed",children:(E=t.indemnification)==null?void 0:E.content})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:(W=t.modifications)==null?void 0:W.title}),e.jsx("p",{className:"text-sm leading-relaxed",children:(X=t.modifications)==null?void 0:X.content})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:(_=t.severability)==null?void 0:_.title}),e.jsx("p",{className:"text-sm leading-relaxed",children:($=t.severability)==null?void 0:$.content})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:(q=t.entireAgreement)==null?void 0:q.title}),e.jsx("p",{className:"text-sm leading-relaxed",children:(J=t.entireAgreement)==null?void 0:J.content})]}),e.jsxs("div",{className:"space-y-2 bg-gray-100 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:(Z=t.contactInformation)==null?void 0:Z.title}),e.jsx("p",{className:"text-sm leading-relaxed",children:(me=t.contactInformation)==null?void 0:me.content})]})]})},bg=Object.freeze(Object.defineProperty({__proto__:null,default:dl},Symbol.toStringTag,{value:"Module"})),ho=({userId:t,t:a,ChildComponent:s,childProps:n,onAgreedAfter:i})=>{const[r,l]=o.useState(()=>di(t));if(!t)return e.jsx(s,{...n});if(r)return e.jsx(s,{...n});const d=()=>{mi(t),l(!0),i==null||i()};return e.jsx(dl,{t:a,acceptMode:!0,onAccept:d})},vt=({title:t,content:a})=>e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsx("h3",{className:"text-base font-semibold text-orange-400",children:t}),typeof a=="string"?e.jsx("p",{className:"text-sm text-gray-300 leading-relaxed",children:a}):e.jsx("div",{className:"text-sm text-gray-300 leading-relaxed",children:a})]}),yg=({t,onAccept:a})=>{var l,d,g,m,x,v,j,I,p,R,w,P,D,L,O,H,S,N,k;const s=(t==null?void 0:t.userTerms)||{},n=(t==null?void 0:t.privacyPolicy)||{},i=b=>Array.isArray(b)?b:[],r={modalBadge:s.modalBadge||"For clients",modalTitle:s.modalTitle||"IndaStreet Massage â€” Terms for users",title:s.title||"Terms & Conditions for Users",effectiveDate:s.effectiveDate||"Effective for use of indastreetmassage.com and IndaStreet services.",intro:s.intro||"By using IndaStreet to browse, book, or receive services, you agree to these Terms & Conditions.",acceptance:s.acceptance||"By clicking below, you confirm that you have read and agree to these terms, including the section on location and safety.",locationTrackingTitle:s.locationTrackingTitle||"Location and safety (services only on indastreetmassage.com)",locationTrackingContent:s.locationTrackingContent||"We use location to give you a better experience and to help match you with the right provider. When you use IndaStreet services, we may use location-related information only in connection with providing and securing those services. By agreeing, you consent to this use of location for services and safety on IndaStreet.",agreeButton:s.agreeButton||"Accept Terms and Conditions"};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black p-4",children:e.jsxs("div",{className:"relative w-full max-w-3xl max-h-[90vh] flex flex-col rounded-lg border-2 border-orange-500 bg-gray-900 shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex-shrink-0 px-6 py-4 border-b border-orange-500/50 bg-gray-900",children:[e.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs font-semibold bg-orange-500/20 text-orange-400 border border-orange-500/50 mb-2",children:r.modalBadge}),e.jsx("h1",{className:"text-xl font-bold text-white",children:r.modalTitle}),e.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:r.effectiveDate})]}),e.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden px-6 py-4 min-h-0",style:{scrollbarWidth:"thin",scrollbarColor:"rgb(249 115 22) rgb(31 41 55)"},children:e.jsxs("div",{className:"pr-2 user-terms-modal-scroll-content",children:[e.jsx("h2",{className:"text-lg font-bold text-orange-400 mb-4 pt-2 border-t border-gray-700 first:border-t-0 first:pt-0",children:r.title}),e.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-4",children:r.intro}),e.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-4",children:r.acceptance}),e.jsx(vt,{title:r.locationTrackingTitle,content:r.locationTrackingContent}),e.jsx("h2",{className:"text-lg font-bold text-orange-400 mb-4 pt-4 border-t border-gray-700",children:n.title||"Privacy Policy"}),n.lastUpdated&&e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:n.lastUpdated}),((l=n.introduction)==null?void 0:l.title)&&e.jsx(vt,{title:n.introduction.title,content:n.introduction.content||""}),((d=n.dataCollection)==null?void 0:d.title)&&e.jsx(vt,{title:n.dataCollection.title,content:e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-300",children:[n.dataCollection.personal&&e.jsx("li",{children:n.dataCollection.personal}),n.dataCollection.usage&&e.jsx("li",{children:n.dataCollection.usage}),n.dataCollection.location&&e.jsx("li",{children:n.dataCollection.location}),n.dataCollection.photos&&e.jsx("li",{children:n.dataCollection.photos}),n.dataCollection.communications&&e.jsx("li",{children:n.dataCollection.communications})]})}),((g=n.dataUsage)==null?void 0:g.title)&&e.jsx(vt,{title:n.dataUsage.title,content:e.jsxs(e.Fragment,{children:[n.dataUsage.content&&e.jsx("p",{className:"mb-2",children:n.dataUsage.content}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:i((m=n.dataUsage)==null?void 0:m.points).map((b,y)=>e.jsx("li",{children:b},y))})]})}),((x=n.dataSharing)==null?void 0:x.title)&&e.jsx(vt,{title:n.dataSharing.title,content:e.jsxs(e.Fragment,{children:[n.dataSharing.content&&e.jsx("p",{className:"mb-2",children:n.dataSharing.content}),e.jsx("ul",{className:"list-disc list-inside space-y-1 mb-2",children:i((v=n.dataSharing)==null?void 0:v.points).map((b,y)=>e.jsx("li",{children:b},y))}),n.dataSharing.note&&e.jsx("p",{className:"text-gray-400 italic text-xs",children:n.dataSharing.note})]})}),((j=n.legalBasis)==null?void 0:j.title)&&e.jsx(vt,{title:n.legalBasis.title,content:e.jsxs(e.Fragment,{children:[n.legalBasis.content&&e.jsx("p",{className:"mb-2",children:n.legalBasis.content}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:i((I=n.legalBasis)==null?void 0:I.points).map((b,y)=>e.jsx("li",{children:b},y))})]})}),((p=n.dataRetention)==null?void 0:p.title)&&e.jsx(vt,{title:n.dataRetention.title,content:n.dataRetention.content||""}),((R=n.security)==null?void 0:R.title)&&e.jsx(vt,{title:n.security.title,content:n.security.content||""}),((w=n.yourRights)==null?void 0:w.title)&&e.jsx(vt,{title:n.yourRights.title,content:n.yourRights.content||""}),((P=n.cookies)==null?void 0:P.title)&&e.jsx(vt,{title:n.cookies.title,content:n.cookies.content||""}),((D=n.thirdPartyServices)==null?void 0:D.title)&&e.jsx(vt,{title:n.thirdPartyServices.title,content:n.thirdPartyServices.content||""}),((L=n.childrenPrivacy)==null?void 0:L.title)&&e.jsx(vt,{title:n.childrenPrivacy.title,content:n.childrenPrivacy.content||""}),((O=n.dataTransfer)==null?void 0:O.title)&&e.jsx(vt,{title:n.dataTransfer.title,content:n.dataTransfer.content||""}),((H=n.policyChanges)==null?void 0:H.title)&&e.jsx(vt,{title:n.policyChanges.title,content:n.policyChanges.content||""}),((S=n.governing)==null?void 0:S.title)&&e.jsx(vt,{title:n.governing.title,content:n.governing.content||""}),((N=n.disclaimer)==null?void 0:N.title)&&e.jsx(vt,{title:n.disclaimer.title,content:n.disclaimer.content||""}),((k=n.contact)==null?void 0:k.title)&&e.jsx(vt,{title:n.contact.title,content:n.contact.content||""}),e.jsx("div",{className:"pt-4 pb-6 border-t border-gray-700",children:e.jsx("p",{className:"text-xs text-gray-500",children:"By accepting, you also acknowledge our use of cookies and tracking technologies as described above, and any other policies referred to on our platform (e.g. Cookie Policy, Community Guidelines) where applicable."})})]})}),e.jsx("div",{className:"flex-shrink-0 px-6 py-4 border-t border-orange-500/50 bg-gray-900",children:e.jsx("button",{type:"button",onClick:a,className:"w-full py-3.5 rounded-lg font-semibold text-white bg-orange-500 hover:bg-orange-600 active:bg-orange-700 transition-colors shadow-md border border-orange-400/50",children:r.agreeButton})})]})}),e.jsx("style",{children:"\n        .user-terms-modal-scroll-content::-webkit-scrollbar {\n          width: 8px;\n        }\n        .user-terms-modal-scroll-content::-webkit-scrollbar-track {\n          background: rgb(31 41 55);\n          border-radius: 4px;\n        }\n        .user-terms-modal-scroll-content::-webkit-scrollbar-thumb {\n          background: rgb(249 115 22);\n          border-radius: 4px;\n        }\n        .user-terms-modal-scroll-content::-webkit-scrollbar-thumb:hover {\n          background: rgb(234 88 12);\n        }\n      "})]})},wg=({userId:t,t:a,children:s})=>{const[n,i]=o.useState(()=>xg(t));if(n)return e.jsx(e.Fragment,{children:s});const r=()=>{fg(t),i(!0)};return e.jsx(yg,{t:a,onAccept:r})};function vg(){return e.jsxs("div",{"data-loading-gate":!0,style:{position:"fixed",inset:0,overflow:"hidden",zIndex:9999,backgroundColor:"#FF7A00",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"22px",fontWeight:600},children:[e.jsxs("div",{style:{marginBottom:"32px",textAlign:"center",zIndex:10,position:"relative"},children:[e.jsxs("h1",{style:{fontSize:"48px",fontWeight:"bold",marginBottom:"8px",color:"#ffffff",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[e.jsx("span",{style:{color:"#ffffff"},children:"Inda"}),e.jsx("span",{style:{color:"#ffffff"},children:"Street"})]}),e.jsx("p",{style:{color:"#ffffff",fontSize:"18px",fontWeight:"500",opacity:1,textShadow:"0 1px 2px rgba(0,0,0,0.1)"},children:"Professional Massage Services"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",backgroundColor:"#fff",borderRadius:"50%",animation:"bounce 1s infinite"}}),e.jsx("div",{style:{width:"8px",height:"8px",backgroundColor:"#fff",borderRadius:"50%",animation:"bounce 1s infinite 0.15s"}}),e.jsx("div",{style:{width:"8px",height:"8px",backgroundColor:"#fff",borderRadius:"50%",animation:"bounce 1s infinite 0.3s"}})]}),e.jsx("style",{dangerouslySetInnerHTML:{__html:"\n        @keyframes bounce {\n          0%, 80%, 100% { transform: translateY(0); }\n          40% { transform: translateY(-10px); }\n        }\n      "}})]})}const Ka="https://www.indastreetmassage.com";function jg(t){var n,i;const a=(i=(n=t.$id)!=null?n:t.id)!=null?i:"";if(!a)return"".concat(Ka,"/share/unknown");const s=a.replace(/^showcase-([a-z0-9]+)-.+$/,"$1");return"".concat(Ka,"/share/").concat(s)}function Bp(t){var s,n;const a=(n=(s=t.$id)!=null?s:t.id)!=null?n:"";return a?"".concat(Ka,"/share/").concat(a):"".concat(Ka,"/share/unknown")}function $p(t){var s,n;const a=(n=(s=t.$id)!=null?s:t.id)!=null?n:"";return a?"".concat(Ka,"/share/").concat(a):"".concat(Ka,"/share/unknown")}function Op(t){const s=new URL(t,Ka).pathname,n=s.match(/^\/share\/([a-z0-9]+)$/);if(n)return{type:"therapist",id:n[1]};const i=s.match(/\/share\/([^\/]+)\/([^\/]+)/);if(i){const g=i[1],m=i[2];return g==="therapist"?{type:"therapist",id:m}:g==="place"?{type:"place",id:m}:g==="facial"?{type:"facial",id:m}:{type:"therapist",id:m}}const r=s.match(/\/therapist-profile\/([^\/]+)/);if(r)return{type:"therapist",id:r[1].split("-")[0]};const l=s.match(/\/place-profile\/([^\/]+)/);if(l)return{type:"place",id:l[1].split("-")[0]};const d=s.match(/\/facial-profile\/([^\/]+)/);return d?{type:"facial",id:d[1].split("-")[0]}:{id:"",type:null}}function Up(t,a,s){const n=a==="therapist"?"Terapis Pijat":a==="facial"?"Tempat Facial":"Tempat Pijat",i=s?" di ".concat(s):"";return"ðŸŒŸ Check out ".concat(t," - ").concat(n," terbaik").concat(i,"! Book sekarang via IndaStreet:")}const Vt={THERAPISTS:Pe.collections.therapists,PLACES:Pe.collections.places,USERS:Pe.collections.users,bookings:Pe.collections.bookings,REVIEWS:Pe.collections.reviews,ANALYTICS:Pe.collections.analytics,ANALYTICS_EVENTS:Pe.collections.analyticsEvents,EVENTS_COLLECTION:Pe.collections.analyticsEvents};var $s=(t=>(t.PROFILE_VIEW="profile_view",t.PROFILE_IMPRESSION="profile_impression",t.WHATSAPP_CLICK="whatsapp_click",t.SHARE_CLICK="share_click",t.QR_SCAN="qr_scan",t.BOOKING_INITIATED="booking_initiated",t.BOOKING_COMPLETED="booking_completed",t.BOOKING_CANCELLED="booking_cancelled",t.SEARCH_PERFORMED="search_performed",t.FILTER_APPLIED="filter_applied",t.USER_SIGNUP="user_signup",t.USER_LOGIN="user_login",t.PROVIDER_REGISTRATION="provider_registration",t.PROVIDER_GOES_LIVE="provider_goes_live",t.PROVIDER_STATUS_CHANGE="provider_status_change",t.HOTEL_MENU_VIEW="hotel_menu_view",t.VILLA_MENU_VIEW="villa_menu_view",t.GUEST_FEEDBACK_SUBMITTED="guest_feedback_submitted",t.COMMISSION_PAYMENT_UPLOADED="commission_payment_uploaded",t.COMMISSION_PAYMENT_VERIFIED="commission_payment_verified",t.REVENUE_GENERATED="revenue_generated",t.COMMISSION_EARNED="commission_earned",t))($s||{});class Ng{constructor(){Se(this,"EVENTS_COLLECTION","analytics_events")}async runWithTimeout(a,s=2e3){return new Promise(n=>{const i=setTimeout(()=>n(),s);a.then(()=>{clearTimeout(i),n()}).catch(()=>{clearTimeout(i),n()})})}async trackEvent(a){try{const s={...a,timestamp:new Date().toISOString(),sessionId:a.sessionId||this.generateSessionId(),metadata:JSON.stringify(a.metadata||{})};await je.createDocument(Je,this.EVENTS_COLLECTION,yt.unique(),s),he.info("ðŸ“Š Event tracked: ".concat(a.eventType))}catch(s){he.error("Error tracking event:",s)}}async trackProfileView(a,s,n){await this.trackEvent({eventType:"profile_view",...s==="therapist"?{therapistId:a}:{placeId:a},userId:n,metadata:{providerType:s}})}async trackSharedLinkView(a,s,n){await this.runWithTimeout(this.trackEvent({eventType:"profile_view",therapistId:a,metadata:{source:"shared_link",...n||{}},sessionId:s}))}async trackSharedLinkShare(a,s,n){await this.runWithTimeout(this.trackEvent({eventType:"share_click",therapistId:a,metadata:{source:"shared_link",...n||{}},sessionId:s}))}async trackWhatsAppClick(a,s,n){await this.trackEvent({eventType:"whatsapp_click",...s==="therapist"?{therapistId:a}:{placeId:a},userId:n,metadata:{providerType:s}})}async trackQRScan(a,s){await this.trackEvent({eventType:"qr_scan",...s==="hotel"?{hotelId:a}:{villaId:a},metadata:{type:s}})}async trackBookingCompleted(a,s,n,i,r){await this.trackEvent({eventType:"booking_completed",bookingId:a,...n==="therapist"?{therapistId:s}:{placeId:s},userId:r,amount:i,currency:"IDR",metadata:{providerType:n}})}async trackRevenue(a,s,n,i){await this.trackEvent({eventType:"revenue_generated",...s==="therapist"?{therapistId:a}:{placeId:a},bookingId:i,amount:n,currency:"IDR",metadata:{providerType:s}})}async trackCommissionEarned(a,s,n,i){await this.trackEvent({eventType:"commission_earned",...s==="hotel"?{hotelId:a}:{villaId:a},bookingId:i,amount:n,currency:"IDR",metadata:{type:s}})}async getTherapistAnalytics(a,s,n){try{const i=await this.getTherapistData(a),r=[ae.equal("therapistId",a.toString()),ae.greaterThanEqual("timestamp",s),ae.lessThanEqual("timestamp",n)],l=await je.listDocuments(Je,this.EVENTS_COLLECTION,r),d=l.documents.filter(P=>P.eventType==="profile_impression").length,g=l.documents.filter(P=>P.eventType==="profile_view").length,m=l.documents.filter(P=>P.eventType==="whatsapp_click").length,x=l.documents.filter(P=>P.eventType==="booking_completed").length,v=l.documents.filter(P=>P.eventType==="booking_completed"||P.eventType==="booking_cancelled").length,j=l.documents.filter(P=>P.eventType==="booking_cancelled").length,p=l.documents.filter(P=>P.eventType==="revenue_generated").reduce((P,D)=>P+(D.amount||0),0),R=x>0?p/x:0,w=g>0?x/g*100:0;return{therapistId:a,therapistName:(i==null?void 0:i.name)||"Unknown",totalImpressions:d,totalProfileViews:g,totalWhatsappClicks:m,totalBookings:v,completedBookings:x,cancelledBookings:j,totalRevenue:p,averageBookingValue:R,conversionRate:w,rating:(i==null?void 0:i.rating)||0,reviewCount:(i==null?void 0:i.reviewCount)||0,peakHours:this.calculatePeakHours(l.documents),periodStart:s,periodEnd:n}}catch(i){throw he.error("Error getting therapist analytics:",i),i}}async getPlaceAnalytics(a,s,n){try{const i=await this.getPlaceData(a),r=[ae.equal("placeId",a.toString()),ae.greaterThanEqual("timestamp",s),ae.lessThanEqual("timestamp",n)],l=await je.listDocuments(Je,this.EVENTS_COLLECTION,r),d=l.documents.filter(P=>P.eventType==="profile_impression").length,g=l.documents.filter(P=>P.eventType==="profile_view").length,m=l.documents.filter(P=>P.eventType==="whatsapp_click").length,x=l.documents.filter(P=>P.eventType==="booking_completed").length,v=l.documents.filter(P=>P.eventType==="booking_completed"||P.eventType==="booking_cancelled").length,j=l.documents.filter(P=>P.eventType==="booking_cancelled").length,p=l.documents.filter(P=>P.eventType==="revenue_generated").reduce((P,D)=>P+(D.amount||0),0),R=x>0?p/x:0,w=g>0?x/g*100:0;return{placeId:a,placeName:(i==null?void 0:i.name)||"Unknown",totalImpressions:d,totalProfileViews:g,totalWhatsappClicks:m,totalBookings:v,completedBookings:x,cancelledBookings:j,totalRevenue:p,averageBookingValue:R,conversionRate:w,rating:(i==null?void 0:i.rating)||0,reviewCount:(i==null?void 0:i.reviewCount)||0,periodStart:s,periodEnd:n}}catch(i){throw he.error("Error getting place analytics:",i),i}}async getHotelVillaAnalytics(a,s,n,i){try{const r=[ae.equal(s==="hotel"?"hotelId":"villaId",a.toString()),ae.greaterThanEqual("timestamp",n),ae.lessThanEqual("timestamp",i)],l=await je.listDocuments(Je,this.EVENTS_COLLECTION,r),d=l.documents.filter(j=>j.eventType==="qr_scan").length,g=l.documents.filter(j=>j.eventType==="hotel_menu_view"||j.eventType==="villa_menu_view").length,m=l.documents.filter(j=>j.eventType==="booking_completed").length,v=l.documents.filter(j=>j.eventType==="commission_earned").reduce((j,I)=>j+(I.amount||0),0);return{hotelVillaId:a,name:"Hotel/Villa Name",type:s,totalQRScans:d,uniqueGuestViews:d,menuViews:g,totalBookings:m,completedBookings:m,uniqueProvidersViewed:0,topProviders:[],totalCommissionEarned:v,pendingCommissions:0,verifiedCommissions:v,averageGuestRating:0,totalFeedbacks:0,peakHours:this.calculatePeakHours(l.documents),periodStart:n,periodEnd:i}}catch(r){throw he.error("Error getting hotel/villa analytics:",r),r}}async getPlatformAnalytics(a,s){try{if(!Vt.THERAPISTS)throw new Error("THERAPISTS collection ID is empty");if(!Vt.USERS)throw new Error("USERS collection ID is empty");if(!Vt.bookings)throw new Error("bookings collection ID is empty");const n=await je.listDocuments(Je,Vt.THERAPISTS),i=await je.listDocuments(Je,Vt.USERS);let r={documents:[]};if(Vt.PLACES)try{r=await je.listDocuments(Je,Vt.PLACES)}catch(p){p.code===404?he.info("Places collection not found - feature disabled"):he.debug("Places collection unavailable:",p)}const l=await je.listDocuments(Je,Vt.bookings,[ae.greaterThanEqual("createdAt",a),ae.lessThanEqual("createdAt",s)]),d=n.documents.filter(p=>p.isLive).length,g=r.documents.filter(p=>p.isLive).length;if(!this.EVENTS_COLLECTION)throw new Error("EVENTS_COLLECTION is empty");const x=(await je.listDocuments(Je,this.EVENTS_COLLECTION,[ae.equal("eventType","revenue_generated"),ae.greaterThanEqual("timestamp",a),ae.lessThanEqual("timestamp",s)])).documents.reduce((p,R)=>p+(R.amount||0),0),v=l.documents.filter(p=>p.status==="Completed").length,j=l.documents.filter(p=>p.status==="Cancelled").length,I=l.documents.length>0?v/l.documents.length*100:0;return{totalUsers:i.documents.length,activeUsers:i.documents.length,newUsersThisPeriod:0,totalTherapists:n.documents.length,liveTherapists:d,totalPlaces:r.documents.length,livePlaces:g,newProvidersThisPeriod:0,totalHotels:0,totalVillas:0,activeHotelVillas:0,totalBookings:l.documents.length,completedBookings:v,cancelledBookings:j,bookingCompletionRate:I,totalRevenue:x,totalCommissions:0,averageBookingValue:v>0?x/v:0,userGrowthRate:0,providerGrowthRate:0,revenueGrowthRate:0,averageBookingsPerUser:i.documents.length>0?l.documents.length/i.documents.length:0,averageBookingsPerProvider:n.documents.length+r.documents.length>0?l.documents.length/(n.documents.length+r.documents.length):0,platformConversionRate:0,topTherapists:[],topPlaces:[],topHotels:[],periodStart:a,periodEnd:s,lastUpdated:new Date().toISOString()}}catch(n){throw he.error("Error getting platform analytics:",n),n}}generateSessionId(){return"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(7))}calculatePeakHours(a){const s={};return a.forEach(n=>{const i=new Date(n.timestamp).getHours(),r="".concat(i,":00");s[r]=(s[r]||0)+1}),Object.entries(s).sort((n,i)=>i[1]-n[1]).slice(0,3).map(([n])=>n)}async getTherapistData(a){try{if(!Vt.THERAPISTS)throw new Error("THERAPISTS collection ID is empty - cannot fetch therapist data");return(await je.listDocuments(Je,Vt.THERAPISTS,[ae.equal("$id",a.toString())])).documents[0]}catch(s){throw he.error("Error fetching therapist:",s),s}}async getPlaceData(a){try{return Vt.PLACES?(await je.listDocuments(Je,Vt.PLACES,[ae.equal("$id",a.toString())])).documents[0]:(he.debug("Places collection not configured - returning null"),null)}catch(s){return s.code===404?he.debug("Places collection not found - optional feature disabled"):he.error("Error fetching place:",s),null}}}const fa=new Ng,ui=Object.freeze(Object.defineProperty({__proto__:null,AnalyticsEventType:$s,analyticsService:fa,default:fa},Symbol.toStringTag,{value:"Module"})),ka="profile_share_tracking";class kg{async trackProfileShare(a){var s;try{const n=await this.getLocationData(),i={memberId:a.memberId,memberName:a.memberName,memberType:a.memberType,eventType:"profile_shared",platform:a.platform,timestamp:new Date().toISOString(),sessionId:a.sessionId||this.generateSessionId(),userAgent:typeof navigator!="undefined"?navigator.userAgent:void 0,referrer:typeof document!="undefined"?document.referrer:void 0,location:n,metadata:a.metadata};try{await je.createDocument(Je,ka,yt.unique(),i)}catch(r){(r==null?void 0:r.code)===404||(s=r==null?void 0:r.message)!=null&&s.includes("not found")}await fa.trackEvent({eventType:$s.PROFILE_VIEW,...a.memberType==="therapist"?{therapistId:a.memberId}:{placeId:a.memberId},sessionId:i.sessionId,metadata:{action:"profile_shared",platform:a.platform,memberType:a.memberType,...a.metadata}}),he.info("ðŸ“¤ Profile shared tracked: ".concat(a.memberName," via ").concat(a.platform))}catch(n){he.error("Error tracking profile share:",n)}}async getProfileShareCount(a){var s;try{return(s=(await je.listDocuments(Je,ka,[ae.equal("memberId",a),ae.equal("eventType","profile_shared"),ae.limit(1)])).total)!=null?s:0}catch{return 0}}async trackSharedProfileView(a){var s;try{const n=await this.getLocationData(),i={memberId:a.memberId,memberName:a.memberName,memberType:a.memberType,eventType:"profile_viewed_from_share",platform:a.platform||"direct",timestamp:new Date().toISOString(),sessionId:a.sessionId||this.generateSessionId(),userAgent:typeof navigator!="undefined"?navigator.userAgent:void 0,referrer:typeof document!="undefined"?document.referrer:void 0,location:n,metadata:a.metadata};try{await je.createDocument(Je,ka,yt.unique(),i)}catch(r){(r==null?void 0:r.code)===404||(s=r==null?void 0:r.message)!=null&&s.includes("not found")}await fa.trackProfileView(a.memberId,a.memberType==="therapist"?"therapist":"place"),he.info("ðŸ‘ï¸ Shared profile view tracked: ".concat(a.memberName," from ").concat(a.platform||"direct"))}catch(n){he.error("Error tracking shared profile view:",n)}}async getMemberShareAnalytics(a,s,n,i){var r;try{const l=[ae.equal("memberId",a),ae.greaterThanEqual("timestamp",n),ae.lessThanEqual("timestamp",i),ae.limit(1e3)];let d=[];try{d=(await je.listDocuments(Je,ka,l)).documents}catch(w){if((w==null?void 0:w.code)===404||(r=w==null?void 0:w.message)!=null&&r.includes("not found"))return this.getEmptyAnalytics();throw w}const g=d.filter(w=>w.eventType==="profile_shared"),m=d.filter(w=>w.eventType==="profile_viewed_from_share"),x={},v={};g.forEach(w=>{x[w.platform]=(x[w.platform]||0)+1}),m.forEach(w=>{v[w.platform]=(v[w.platform]||0)+1});const j=d.sort((w,P)=>new Date(P.timestamp).getTime()-new Date(w.timestamp).getTime()).slice(0,50).map(w=>{var P,D;return{timestamp:w.timestamp,platform:w.platform,action:w.eventType==="profile_shared"?"shared":"viewed",location:((P=w.location)==null?void 0:P.city)||((D=w.location)==null?void 0:D.country),userAgent:w.userAgent}}),I=await this.calculateConversionRate(a,s,m),p=g.length>0?m.length/g.length:0,R=Object.keys(x).map(w=>({platform:w,shares:x[w]||0,views:v[w]||0,conversionRate:0})).sort((w,P)=>P.shares+P.views-(w.shares+w.views)).slice(0,5);return{totalShares:g.length,totalViews:m.length,platformBreakdown:x,recentActivity:j,conversionRate:I,shareToViewRatio:p,topPerformingPlatforms:R}}catch(l){return he.error("Error getting member share analytics:",l),this.getEmptyAnalytics()}}async getAllMembersShareAnalytics(a,s){try{const i=(await je.listDocuments(Je,ka,[ae.greaterThanEqual("timestamp",a),ae.lessThanEqual("timestamp",s),ae.limit(1e4)])).documents,r={};return i.forEach(d=>{r[d.memberId]||(r[d.memberId]=[]),r[d.memberId].push(d)}),(await Promise.all(Object.entries(r).map(async([d,g])=>{const m=g[0],x=await this.processMemberEvents(g);return{memberId:d,memberName:m.memberName,memberType:m.memberType,analytics:x}}))).sort((d,g)=>g.analytics.totalShares-d.analytics.totalShares)}catch(n){return he.error("Error getting all members share analytics:",n),[]}}async processMemberEvents(a){const s=a.filter(l=>l.eventType==="profile_shared"),n=a.filter(l=>l.eventType==="profile_viewed_from_share"),i={};s.forEach(l=>{i[l.platform]=(i[l.platform]||0)+1});const r=a.sort((l,d)=>new Date(d.timestamp).getTime()-new Date(l.timestamp).getTime()).slice(0,20).map(l=>{var d,g;return{timestamp:l.timestamp,platform:l.platform,action:l.eventType==="profile_shared"?"shared":"viewed",location:((d=l.location)==null?void 0:d.city)||((g=l.location)==null?void 0:g.country),userAgent:l.userAgent}});return{totalShares:s.length,totalViews:n.length,platformBreakdown:i,recentActivity:r,conversionRate:Math.random()*15+5,shareToViewRatio:s.length>0?n.length/s.length:0,topPerformingPlatforms:[]}}generateTrackableUrl(a,s,n,i,r){const l="https://www.indastreetmassage.com",d="/share/".concat(s),g="sh_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2)),m={originalSharerUserId:(r==null?void 0:r.originalSharerUserId)||i,shareDepth:((r==null?void 0:r.shareDepth)||0)+1,parentShareId:r==null?void 0:r.shareId,chainPath:[...(r==null?void 0:r.chainPath)||[],g]},x="".concat(l).concat(d,"?si=").concat(g,"&sd=").concat(m.shareDepth,"&sp=").concat(n),v=[];return m.originalSharerUserId&&v.push("os=".concat(m.originalSharerUserId)),m.parentShareId&&v.push("ps=".concat(m.parentShareId)),m.chainPath.length>1&&v.push("cp=".concat(m.chainPath.join(","))),v.length>0?"".concat(x,"&").concat(v.join("&")):x}parseShareChainFromUrl(a){try{const s=a||(typeof window!="undefined"?window.location.href:"");if(!s)return null;const n=new URL(s),i=n.searchParams.get("si");if(!i)return null;const r=parseInt(n.searchParams.get("sd")||"0"),l=n.searchParams.get("os")||void 0,d=n.searchParams.get("ps")||void 0,g=n.searchParams.get("cp"),m=g?g.split(","):[i];return{shareId:i,shareDepth:r,originalSharerUserId:l,parentShareId:d,chainPath:m}}catch(s){return he.error("Error parsing share chain from URL:",s),null}}async trackProfileShareWithChain(a){var s,n,i,r;try{const l="sh_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2)),d={shareId:l,originalSharerUserId:((s=a.parentShareChain)==null?void 0:s.originalSharerUserId)||a.sharerUserId,shareDepth:(((n=a.parentShareChain)==null?void 0:n.shareDepth)||0)+1,parentShareId:(i=a.parentShareChain)==null?void 0:i.shareId,chainPath:[...((r=a.parentShareChain)==null?void 0:r.chainPath)||[],l]},g=await this.getLocationData(),m={memberId:a.memberId,memberName:a.memberName,memberType:a.memberType,eventType:"profile_shared",platform:a.platform,timestamp:new Date().toISOString(),sessionId:a.sessionId||this.generateSessionId(),userAgent:typeof navigator!="undefined"?navigator.userAgent:void 0,referrer:typeof document!="undefined"?document.referrer:void 0,location:g,metadata:a.metadata,shareChain:d};return await je.createDocument(Je,ka,yt.unique(),m),await fa.trackEvent({eventType:$s.PROFILE_VIEW,...a.memberType==="therapist"?{therapistId:a.memberId}:{placeId:a.memberId},sessionId:m.sessionId,metadata:{action:"profile_shared_chain",platform:a.platform,memberType:a.memberType,shareDepth:d.shareDepth,originalSharer:d.originalSharerUserId,...a.metadata}}),he.info("ðŸ“¤ Profile shared with chain tracking: ".concat(a.memberName," via ").concat(a.platform," (depth: ").concat(d.shareDepth,")")),l}catch(l){return he.error("Error tracking profile share with chain:",l),""}}async trackSharedProfileViewWithChain(a){var s;try{const n=await this.getLocationData(),i=a.shareChain&&typeof window!="undefined"&&new URL(window.location.href).searchParams.get("sp")||"direct",r={memberId:a.memberId,memberName:a.memberName,memberType:a.memberType,eventType:"profile_viewed_from_share",platform:i,timestamp:new Date().toISOString(),sessionId:a.sessionId||this.generateSessionId(),userAgent:typeof navigator!="undefined"?navigator.userAgent:void 0,referrer:typeof document!="undefined"?document.referrer:void 0,location:n,metadata:a.metadata,shareChain:a.shareChain};await je.createDocument(Je,ka,yt.unique(),r),await fa.trackProfileView(a.memberId,a.memberType==="therapist"?"therapist":(a.memberType==="facial","place")),he.info("ðŸ‘ï¸ Shared profile viewed with chain: ".concat(a.memberName," (depth: ").concat(((s=a.shareChain)==null?void 0:s.shareDepth)||0,")"))}catch(n){he.error("Error tracking shared profile view with chain:",n)}}async getSharingChainAnalytics(a,s){try{const n=[];a&&n.push(ae.equal("memberType",a)),s&&n.push(ae.equal("memberId",s));const l=(await je.listDocuments(Je,ka,n)).documents.filter(g=>g.shareChain),d=new Map;return l.forEach(g=>{if(!g.shareChain)return;const m=g.shareChain.chainPath[0];d.has(m)||d.set(m,{originalSharer:g.shareChain.originalSharerUserId,maxDepth:0,totalViews:0,totalShares:0,platforms:{},timeline:[],viralityScore:0});const x=d.get(m);x.maxDepth=Math.max(x.maxDepth,g.shareChain.shareDepth),x.platforms[g.platform]=(x.platforms[g.platform]||0)+1,x.timeline.push({depth:g.shareChain.shareDepth,timestamp:g.timestamp,type:g.eventType==="profile_shared"?"share":"view"}),g.eventType==="profile_viewed_from_share"?x.totalViews++:x.totalShares++,x.viralityScore=x.maxDepth*(x.totalViews+x.totalShares)}),Array.from(d.entries()).map(([g,m])=>({shareId:g,...m,timeline:m.timeline.sort((x,v)=>new Date(x.timestamp).getTime()-new Date(v.timestamp).getTime())})).sort((g,m)=>m.viralityScore-g.viralityScore)}catch(n){return he.error("Error getting sharing chain analytics:",n),[]}}async calculateConversionRate(a,s,n){try{const i=s==="therapist"?12:8,r=(Math.random()-.5)*10;return Math.max(0,Math.min(100,i+r))}catch(i){return he.error("Error calculating conversion rate:",i),0}}async getLocationData(){try{return{country:"Indonesia",city:["Jakarta","Bandung","Surabaya","Medan","Bali"][Math.floor(Math.random()*5)],ip:"192.168.1.1"}}catch{return}}generateSessionId(){return"share_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}getEmptyAnalytics(){return{totalShares:0,totalViews:0,platformBreakdown:{},recentActivity:[],conversionRate:0,shareToViewRatio:0,topPerformingPlatforms:[]}}async initializeShareTracking(){try{he.info("ðŸ”„ Initializing share tracking system..."),he.info("ðŸ“Š Share tracking service ready"),he.info("ðŸ“ˆ Integration with analytics service: ACTIVE")}catch(a){he.error("Error initializing share tracking:",a)}}}const Gn=new kg,Sg=()=>{let t=window.location.pathname;const a=window.location.hash;a.startsWith("#/")&&(t=a.substring(1));let s=t.match(/\/(share\/therapist|shared\/therapist|therapist-profile)\/([^\/]+)/);if(!s&&(t==="/shared/therapist"||t.startsWith("/shared/therapist"))){const r=new URLSearchParams(window.location.search),l=r.get("id")||r.get("therapistId");if(l)return l;const d=window.location.hash.replace("#","");return d&&d.length>10?d:"default"}return s?(s[1],s[2].split("-")[0]):null},gi=({selectedTherapist:t,userLocation:a,loggedInCustomer:s,handleQuickBookWithChat:n,onNavigate:i,language:r="en"})=>{const{openBookingChat:l}=Po(),d="https://ik.imagekit.io/7grri5v7d/indastreet%20massage%20logo.png?updatedAt=1764533351258",g="https://ik.imagekit.io/7grri5v7d/garden%20forest.png?updatedAt=1761334454082",m=S=>{const N=S.heroImageUrl,k=!N||N===""||String(N).startsWith("data:image/svg+xml"),b=F=>F&&typeof F=="string"&&!F.startsWith("data:")&&/^https?:\/\//.test(F),T=(b(S.mainImage)?S.mainImage:b(S.mainimage)?S.mainimage:b(S.profileImageUrl)?S.profileImageUrl:b(S.heroImageUrl)?S.heroImageUrl:null)||g;return{...S,mainImage:T,heroImageUrl:k?d:N}},[x,v]=o.useState(t||null),[j,I]=o.useState(!t),[p,R]=o.useState(null),[w,P]=o.useState(null),[D,L]=o.useState(void 0);o.useEffect(()=>{if(!(x!=null&&x.$id))return;let S=!1;return Gn.getProfileShareCount(x.$id).then(N=>{S||L(N)}).catch(()=>{S||L(0)}),()=>{S=!0}},[x==null?void 0:x.$id]),ce.useEffect(()=>()=>{},[]),o.useEffect(()=>{(async()=>{var k,b;let N=Sg()||sessionStorage.getItem("direct_therapist_id");if(N){const y=(k=window.__THERAPISTS_CACHE)==null?void 0:k.find(T=>(T.id||T.$id||"").toString()===N);if(y){v(m(y)),I(!1),sessionStorage.removeItem("direct_therapist_id");return}}if(t){v(m(t)),I(!1);return}if(!N){const y=sessionStorage.getItem("direct_therapist_id");y&&(N=y,sessionStorage.removeItem("direct_therapist_id"))}if(!N&&window.location.pathname.startsWith("/share/"))try{const y=window.location.pathname.split("/").filter(Boolean);if(y.length>=3)N=y[y.length-1].split("-")[0];else if(y.length===2){const T=y[1].replace("#",""),F=await fn.getByShortIdOrSlug(T);F&&F.entityType==="therapist"&&(N=F.entityId)}}catch{}if(!N){R("Invalid profile URL - missing therapist ID"),I(!1);return}if(N==="default"){R("Please select a therapist to view their profile"),I(!1);return}P(N);try{I(!0),R(null);const y=await je.getDocument(Lo,it.THERAPISTS,N);if(!y)throw new Error("Therapist not found");v(m(y));try{const T=Gn.parseShareChainFromUrl();(T||document.referrer.includes("wa.me")||document.referrer.includes("facebook.com")||document.referrer.includes("t.me")||document.referrer.includes("twitter.com")||window.location.pathname.includes("/share/")||window.location.hash.includes("shared=true")||window.location.search.includes("si=")||window.location.search.includes("shared=1"))&&await Gn.trackSharedProfileViewWithChain({memberId:y.$id,memberName:y.name||"Unknown Therapist",memberType:"therapist",shareChain:T||void 0,metadata:{referrer:document.referrer,url:window.location.href,timestamp:new Date().toISOString(),chainDepth:(T==null?void 0:T.shareDepth)||0,originalSharer:T==null?void 0:T.originalSharerUserId}})}catch{}try{const T=typeof window!="undefined"&&window.crypto&&window.crypto.randomUUID?window.crypto.randomUUID():null,F=sessionStorage.getItem("shared_link_session_id")||T||"session_".concat(Date.now());sessionStorage.setItem("shared_link_session_id",F);try{const{analyticsService:U}=await z(async()=>{const{analyticsService:B}=await Promise.resolve().then(()=>ui);return{analyticsService:B}},void 0);await U.trackSharedLinkView(Number(N),F)}catch{}}catch{}}catch(y){try{const T=y;(b=T==null?void 0:T.constructor)!=null&&b.name,T!=null&&T.message,T==null||T.code,T==null||T.code,oc,T==null||T.stack}catch{}P(N),R(lc(y,"Failed to load therapist profile. Please try again."))}finally{I(!1)}})()},[t]),o.useEffect(()=>{var C,M,E,W;if(!x)return;const S=(x.location||"Bali").split(" ")[0],N=ts(x.name),k="".concat(N," - Professional Massage Therapist - House - Hotel - Villa"),b="âœ¨ Book ".concat(N," for professional massage therapy in ").concat(S,". â­ Verified therapist â€¢ ðŸ’¬ Instant chat â€¢ ðŸ”’ Secure booking"),y=jg(x),T=Io(x);document.title=k,[{name:"description",content:b},{name:"keywords",content:"pijat panggilan ".concat(S,", terapis pijat ").concat(S,", massage ").concat(S,", spa panggilan, home service massage, ").concat(N)},{name:"author",content:N},{name:"robots",content:"index, follow, max-image-preview:large, max-snippet:-1"},{name:"image",content:T},{name:"thumbnail",content:T},{itemprop:"image",content:T},{itemprop:"thumbnailUrl",content:T},{itemprop:"name",content:"".concat(N," - Massage Therapist ").concat(S)},{itemprop:"description",content:"Professional massage therapy by ".concat(N," in ").concat(S,". Book certified therapist for traditional Indonesian massage, reflexology, and spa services.")},{property:"og:title",content:k},{property:"og:description",content:b},{property:"og:url",content:y},{property:"og:type",content:"profile"},{property:"og:image",content:T},{property:"og:image:secure_url",content:T},{property:"og:image:width",content:"1200"},{property:"og:image:height",content:"630"},{property:"og:image:alt",content:"".concat(N," - Professional Massage Therapist in ").concat(S,", Indonesia | Traditional Indonesian Massage, Spa Services, Home Service")},{property:"og:image:type",content:"image/png"},{property:"og:site_name",content:"IndaStreet Massage"},{property:"og:locale",content:"id_ID"},{property:"og:locale:alternate",content:"en_US"},{property:"profile:first_name",content:N},{property:"profile:last_name",content:""},{property:"profile:username",content:x.name.toLowerCase().replace(/[^a-z0-9]/g,"")},{property:"business:contact_data:street_address",content:S},{property:"business:contact_data:locality",content:S},{property:"business:contact_data:country_name",content:"Indonesia"},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:k},{name:"twitter:description",content:b},{name:"twitter:image",content:T},{name:"twitter:image:alt",content:"".concat(N," - Professional Massage Therapist ").concat(S," | Book Traditional Indonesian Massage, Reflexology, Spa Services")},{name:"twitter:site",content:"@indastreetmassage"},{name:"twitter:creator",content:"@indastreetmassage"},{name:"theme-color",content:"#f97316"},{name:"msapplication-TileColor",content:"#f97316"},{name:"geo.region",content:"ID"},{name:"geo.placename",content:S},{name:"geo.position",content:x.coordinates?"".concat((C=x.coordinates)==null?void 0:C.latitude,";").concat((M=x.coordinates)==null?void 0:M.longitude):""},{name:"ICBM",content:x.coordinates?"".concat((E=x.coordinates)==null?void 0:E.latitude,", ").concat((W=x.coordinates)==null?void 0:W.longitude):""}].forEach(({name:X,property:_,itemprop:$,content:q})=>{if(!q)return;const J=X?'meta[name="'.concat(X,'"]'):_?'meta[property="'.concat(_,'"]'):$?'meta[itemprop="'.concat($,'"]'):null;if(!J)return;let Z=document.querySelector(J);Z||(Z=document.createElement("meta"),X&&Z.setAttribute("name",X),_&&Z.setAttribute("property",_),$&&Z.setAttribute("itemprop",$),document.head.appendChild(Z)),Z.setAttribute("content",q)});const U={"@context":"https://schema.org","@type":"Person",name:N,jobTitle:"Massage Therapist",description:b,url:y,image:T,address:{"@type":"PostalAddress",addressLocality:S,addressCountry:"ID"},offers:{"@type":"Offer",description:"Professional massage therapy services",availability:"https://schema.org/InStock"},sameAs:[y,"https://www.indastreetmassage.com/therapist/".concat(x.$id)]},B=document.querySelector('script[type="application/ld+json"]');B&&B.remove();const f=document.createElement("script");f.type="application/ld+json",f.textContent=JSON.stringify(U),document.head.appendChild(f);let A=document.querySelector('link[rel="canonical"]');A||(A=document.createElement("link"),A.setAttribute("rel","canonical"),document.head.appendChild(A)),A.setAttribute("href",y);const c={"@context":"https://schema.org","@type":"Person",name:N,jobTitle:"Professional Massage Therapist",description:"".concat(N," provides professional massage therapy services in ").concat(S,". Specialized in traditional Indonesian massage, Swedish massage, and therapeutic treatments."),url:y,image:T,address:{"@type":"PostalAddress",addressLocality:S,addressCountry:"ID"},offers:{"@type":"Offer",name:"Professional Massage Service",category:"Health & Wellness",areaServed:{"@type":"City",name:S},availableChannel:{"@type":"ServiceChannel",serviceUrl:y,serviceType:"In-home massage service"}},aggregateRating:x.reviewCount&&x.reviewCount>0?{"@type":"AggregateRating",ratingValue:x.rating||4.8,reviewCount:x.reviewCount,bestRating:5,worstRating:1}:void 0};let h=document.querySelector('script[type="application/ld+json"]');h||(h=document.createElement("script"),h.setAttribute("type","application/ld+json"),document.head.appendChild(h)),h.textContent=JSON.stringify(c)},[x]);const O=async()=>{if(x){if(n){n(x,"therapist");return}l(x,"share")}};if(j)return e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("svg",{className:"w-12 h-12 mx-auto text-orange-500 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Loading profile..."}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Fetching therapist data"})]})});if(p||!x){const S=p||"Therapist profile not found";if(S.includes("select a therapist")||window.location.pathname==="/shared/therapist")return e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gradient-to-b from-orange-50 to-white",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"mb-4 text-6xl",children:"ðŸŽ­"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Choose Your Therapist"}),e.jsx("p",{className:"text-gray-600",children:"Select a therapist to view their profile and book a massage"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"ðŸ’†â€â™€ï¸ Available Therapists"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Click on any therapist below to view their profile and services"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"p-4 border rounded-lg hover:border-orange-300 hover:shadow-md transition-all cursor-pointer",onClick:()=>window.location.href="/share/therapist/sample-id-1",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ‘©â€âš•ï¸"}),e.jsx("h3",{className:"font-semibold text-gray-800",children:"Sample Therapist 1"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Traditional Massage"})]}),e.jsxs("div",{className:"p-4 border rounded-lg hover:border-orange-300 hover:shadow-md transition-all cursor-pointer",onClick:()=>window.location.href="/share/therapist/sample-id-2",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ‘¨â€âš•ï¸"}),e.jsx("h3",{className:"font-semibold text-gray-800",children:"Sample Therapist 2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Sports Massage"})]}),e.jsxs("div",{className:"p-4 border rounded-lg hover:border-orange-300 hover:shadow-md transition-all cursor-pointer",onClick:()=>window.location.href="/share/therapist/sample-id-3",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ‘©â€âš•ï¸"}),e.jsx("h3",{className:"font-semibold text-gray-800",children:"Sample Therapist 3"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Reflexology"})]})]}),e.jsxs("div",{className:"mt-8 p-4 bg-orange-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-orange-800 mb-2",children:"ðŸ”— Share Link Format"}),e.jsxs("p",{className:"text-sm text-orange-700",children:["To share a specific therapist, use:",e.jsx("br",{}),e.jsxs("code",{className:"bg-white px-2 py-1 rounded",children:["/share/therapist/","{therapist-id}"]})]})]})]})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>window.location.href="/",className:"px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-semibold",children:"ðŸ  Go to Homepage"})})]})]})});const N=window.location.pathname+(window.location.hash||""),k=w&&/^therapist_\d+$/i.test(w);return e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center max-w-md bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("div",{className:"mb-4 text-6xl",children:"ðŸ˜”"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Profile Not Found"}),e.jsx("p",{className:"text-sm text-red-600 mb-4 font-mono bg-red-50 p-2 rounded break-all",children:S}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"This therapist profile could not be loaded. The link may be invalid or the therapist is no longer available."}),k&&e.jsxs("p",{className:"text-sm text-amber-700 mb-4 p-3 bg-amber-50 rounded-lg border border-amber-200",children:["The ID ",e.jsx("strong",{children:w})," looks like a sample or demo link. Real therapist profiles use a different ID format. Try browsing from the homepage to find a therapist."]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-4 p-3 bg-gray-100 rounded",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Debug Info:"}),e.jsxs("div",{children:["URL: ",N||window.location.pathname||"/"]}),w&&e.jsxs("div",{children:["Attempted ID: ",w]}),e.jsxs("div",{children:["Error: ",S]}),e.jsx("div",{children:"Check console for detailed logs"})]}),e.jsx("button",{onClick:()=>window.location.href="/",className:"px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-semibold",children:"Return to Home"})]})})}const H=async S=>{try{const{analyticsService:N}=await z(async()=>{const{analyticsService:k}=await Promise.resolve().then(()=>ui);return{analyticsService:k}},void 0);await N.trackEvent({eventType:S,therapistId:x.$id,metadata:{therapistName:ts(x.name),location:x.location,source:"shared_profile"}})}catch{}};return e.jsxs(e.Fragment,{children:[e.jsx(rc,{therapist:x,mode:"shared",userLocation:a,showSEOFooter:!0,isCustomerLoggedIn:!!s,onQuickBookWithChat:O,onIncrementAnalytics:H,onNavigate:i,language:r,customVerifiedBadge:As,shareCount:D}),e.jsx(Qo,{})]})},ml=Object.freeze(Object.defineProperty({__proto__:null,SharedTherapistProfile:gi,default:gi},Symbol.toStringTag,{value:"Module"}));class Pg extends ce.Component{constructor(a){super(a),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,s){u.error("[LazyLoadErrorBoundary] ERROR CAUGHT"),u.error("Error Message:",a==null?void 0:a.message),u.error("Error Name:",a==null?void 0:a.name),u.error("Error Stack:",a==null?void 0:a.stack),u.error("Component Stack:",s==null?void 0:s.componentStack),u.error("Full Error Object:",a),u.error("Full ErrorInfo Object:",s),u.error("[LAZY LOAD ERROR]",a,s),typeof window!="undefined"&&(window.__lazyErrorMessage=(a==null?void 0:a.message)||"Unknown error",window.__lazyErrorStack=(a==null?void 0:a.stack)||"")}render(){return this.state.hasError?this.props.fallback:this.props.children}}ce.lazy(()=>z(()=>import("./CreateAccountPage.BHwtkvB3.js"),__vite__mapDeps([65,2,0,1,3,4,5,6,8,9])));const Ig=ce.lazy(()=>z(()=>import("./ConfirmTherapistsPage.BN_51BUl.js"),__vite__mapDeps([66,2,3,0,1,4,5,6,61]))),Cg=ce.lazy(()=>z(()=>import("./route-jobs._xfuCszQ.js").then(t=>t.E),__vite__mapDeps([46,2,0,1,3,4,5,6,47]))),Tg=ce.lazy(()=>z(()=>import("./IndastreetPartnersPage.CURrGxlc.js"),__vite__mapDeps([67,2,0,1,3,4,5,6,8,9]))),Ag=ce.lazy(()=>z(()=>import("./IndastreetNewsPage.r2sbe-j4.js"),__vite__mapDeps([68,2,0,1,3,4,5,6]))),Eg=ce.lazy(()=>z(()=>import("./WebsiteManagementPage.Bs1ZJ2dg.js"),__vite__mapDeps([69,2]))),Dg=ce.lazy(()=>z(()=>import("./GuestProfilePage.D2flX5hd.js"),__vite__mapDeps([70,2,0,1,3,4,5,6]))),_g=ce.lazy(()=>z(()=>import("./QRCodePage.BG8LmvgP.js"),__vite__mapDeps([71,2,4]))),Lg=ce.lazy(()=>z(()=>import("./NotificationsPage.Bz-GNX2d.js"),__vite__mapDeps([72,2,0,1,3,4,5,6]))),po=ce.lazy(()=>z(()=>import("./route-booking.yuk30L8G.js").then(t=>t.c),__vite__mapDeps([3,2,0,1,4,5,6]))),Rg=ce.lazy(()=>z(()=>import("./route-jobs._xfuCszQ.js").then(t=>t.b),__vite__mapDeps([46,2,0,1,3,4,5,6,47]))),Mg=ce.lazy(()=>z(()=>import("./route-booking.yuk30L8G.js").then(t=>t.A),__vite__mapDeps([3,2,0,1,4,5,6]))),Bg=ce.lazy(()=>z(()=>import("./route-booking.yuk30L8G.js").then(t=>t.D),__vite__mapDeps([3,2,0,1,4,5,6]))),$g=ce.lazy(()=>z(()=>import("./LeadAcceptPage.B7tjraNP.js"),__vite__mapDeps([73,2,0,1,3,4,5,6]))),Og=ce.lazy(()=>z(()=>import("./LeadDeclinePage.C6Msy2lp.js"),__vite__mapDeps([74,2,0,1,3,4,5,6]))),Ug=ce.lazy(()=>z(()=>import("./route-payment.T2FKxZVj.js").then(t=>t.J),__vite__mapDeps([9,2,0,1,3,4,5,6]))),Fg=ce.lazy(()=>z(()=>import("./ApplyForJobPage.COulnbYM.js"),__vite__mapDeps([75,2,0,1,3,4,5,6,8,9]))),Hg=ce.lazy(()=>z(()=>import("./route-jobs._xfuCszQ.js").then(t=>t.B),__vite__mapDeps([46,2,0,1,3,4,5,6,47]))),Vg=ce.lazy(()=>z(()=>import("./route-jobs._xfuCszQ.js").then(t=>t.c),__vite__mapDeps([46,2,0,1,3,4,5,6,47]))),Wg=ce.lazy(()=>z(()=>import("./PartnershipApplicationPage.w3QFSpMV.js"),__vite__mapDeps([76,2,0,1,3,4,5,6,8,9]))),zg=ce.lazy(()=>z(()=>import("./PartnerContactPage.CCvziKeT.js"),__vite__mapDeps([77,2,0,1,3,4,5,6,12]))),Gg=ce.lazy(()=>z(()=>import("./route-therapist.DVVqC6AH.js").then(t=>t.bD),__vite__mapDeps([0,1,2,3,4,5,6]))),Kg=ce.lazy(()=>z(()=>import("./ReviewsPage.CcvVb7_o.js"),__vite__mapDeps([78,2,0,1,3,4,5,6]))),Jg=ce.lazy(()=>z(()=>import("./JobUnlockPaymentPage.vqpERglx.js"),__vite__mapDeps([79,2,0,1,3,4,5,6]))),qg=ce.lazy(()=>z(()=>import("./route-therapist.DVVqC6AH.js").then(t=>t.bE),__vite__mapDeps([0,1,2,3,4,5,6]))),Yg=ce.lazy(()=>z(()=>import("./AppwriteDiagnostic.C-Lj8BOP.js"),__vite__mapDeps([80,0,1,2,3,4,5,6])).then(t=>({default:t.AppwriteDiagnostic}))),Qg=ce.lazy(()=>z(()=>import("./DiagnosticPage.DUqZhWxz.js"),__vite__mapDeps([81,2,0,1,3,4,5,6])).then(t=>({default:t.DiagnosticPage}))),Xg=ce.lazy(()=>z(()=>import("./route-therapist.DVVqC6AH.js").then(t=>t.bF),__vite__mapDeps([0,1,2,3,4,5,6]))),Zg=ce.lazy(()=>z(()=>import("./CustomerReviewsPage.lBY3T6yz.js"),__vite__mapDeps([82,2,0,1,3,4,5,6]))),xo=ce.lazy(()=>z(()=>import("./RoleSelectionPage.JSyjk5BG.js"),__vite__mapDeps([83,2,0,1,3,4,5,6]))),an=ce.lazy(()=>z(()=>import("./CustomerSupportPage.OHkOu_Nv.js"),__vite__mapDeps([84,2,5,0,1,3,4,6]))),eh=ce.lazy(()=>z(()=>import("./PlaceDiscountBadgePage.DGCi52xw.js"),__vite__mapDeps([85,2,44]))),th=ce.lazy(()=>z(()=>import("./VerifiedProBadgePage.Bzjb17Rz.js"),__vite__mapDeps([86,2,0,1,3,4,5,6]))),ah=ce.lazy(()=>z(()=>import("./MobileTherapistStandardsPage.CRkrd3EX.js"),__vite__mapDeps([87,2,0,1,3,4,5,6]))),sh=ce.lazy(()=>z(()=>import("./GuestAlertsPage.c8XVnnKA.js"),__vite__mapDeps([88,2]))),nh=ce.lazy(()=>z(()=>import("./PartnerSettingsPage.FMgODVdw.js"),__vite__mapDeps([89,2,0,1,3,4,5,6]))),ih=ce.lazy(()=>z(()=>import("./route-admin.B3FykHSQ.js").then(t=>t.a),__vite__mapDeps([57,2,0,1,3,4,5,6]))),rh=ce.lazy(()=>z(()=>import("./CareerOpportunitiesPage.CHQp8xn-.js"),__vite__mapDeps([90,2,0,1,3,4,5,6]))),oh=ce.lazy(()=>z(()=>import("./route-therapist.DVVqC6AH.js").then(t=>t.bG),__vite__mapDeps([0,1,2,3,4,5,6]))),lh=ce.lazy(()=>z(()=>import("./route-jobs._xfuCszQ.js").then(t=>t.d),__vite__mapDeps([46,2,0,1,3,4,5,6,47]))),ch=ce.lazy(()=>z(()=>import("./route-payment.T2FKxZVj.js").then(t=>t.q),__vite__mapDeps([9,2,0,1,3,4,5,6]))),dh=ce.lazy(()=>z(()=>import("./MobileTermsAndConditionsPage.BtTA1cvN.js"),__vite__mapDeps([48,2,0,1,3,4,5,6]))),mh=ce.lazy(()=>z(()=>import("./route-therapist.DVVqC6AH.js").then(t=>t.bH),__vite__mapDeps([0,1,2,3,4,5,6]))),uh=ce.lazy(()=>z(()=>import("./BaliSpaIndustryTrends2025Page.pG6IK71U.js"),__vite__mapDeps([91,2,92,93,0,1,3,4,5,6]))),gh=ce.lazy(()=>z(()=>import("./Top10MassageTechniquesPage.BSQsCN0S.js"),__vite__mapDeps([94,2,92]))),hh=ce.lazy(()=>z(()=>import("./MassageCareerIndonesiaPage.DWwuGLVp.js"),__vite__mapDeps([95,2,92,0,1,3,4,5,6]))),ph=ce.lazy(()=>z(()=>import("./BenefitsRegularMassageTherapyPage.CP7c0N_o.js"),__vite__mapDeps([96,2,92]))),xh=ce.lazy(()=>z(()=>import("./HiringMassageTherapistsGuidePage.CGhpJ2Cj.js"),__vite__mapDeps([97,2,92]))),fh=ce.lazy(()=>z(()=>import("./TraditionalBalineseMassagePage.uSqQEOsp.js"),__vite__mapDeps([98,2,92]))),bh=ce.lazy(()=>z(()=>import("./SpaTourismIndonesiaPage.BpPC7-jD.js"),__vite__mapDeps([99,2,92]))),yh=ce.lazy(()=>z(()=>import("./AromatherapyMassageOilsPage.8KHuG_cd.js"),__vite__mapDeps([100,2,92]))),wh=ce.lazy(()=>z(()=>import("./PricingGuideMassageTherapistsPage.C4GZODqR.js"),__vite__mapDeps([101,2,92]))),vh=ce.lazy(()=>z(()=>import("./DeepTissueVsSwedishMassagePage.DqSqxHfT.js"),__vite__mapDeps([102,2,92]))),jh=ce.lazy(()=>z(()=>import("./OnlinePresenceMassageTherapistPage.BEdSpHjG.js"),__vite__mapDeps([103,2,92]))),Nh=ce.lazy(()=>z(()=>import("./WellnessTourismUbudPage.BVlkRotV.js"),__vite__mapDeps([104,2,92]))),kh=ce.lazy(()=>z(()=>import("./WellnessSoutheastAsiaPage.C9HfVX4s.js"),__vite__mapDeps([105,2,92,93,0,1,3,4,5,6]))),Sh=ce.lazy(()=>z(()=>import("./MassageSpaStandardsAsiaEuropePage.CKbAgNU9.js"),__vite__mapDeps([106,2,92,93,0,1,3,4,5,6]))),Ph=ce.lazy(()=>z(()=>import("./SkinClinicTrendsInternationalPage.DmpAQGtY.js"),__vite__mapDeps([107,2,92,93,0,1,3,4,5,6]))),Ih=ce.lazy(()=>z(()=>import("./BuildingWellnessBusinessInternationalPage.D7YMtVrc.js"),__vite__mapDeps([108,2,92,93,0,1,3,4,5,6])));ce.lazy(()=>z(()=>Promise.resolve().then(()=>ml),void 0));const Ch=({therapistId:t,...a})=>{const[s,n]=ce.useState(null),[i,r]=ce.useState(null),l=t||null,d=l&&/^therapist_\d+$/i.test(l),{isLoading:g,setLoading:m}=xd("therapist-profile-".concat(t)),x="https://ik.imagekit.io/7grri5v7d/indastreet%20massage%20logo.png?updatedAt=1764533351258",v="https://ik.imagekit.io/7grri5v7d/garden%20forest.png?updatedAt=1761334454082";if(ce.useEffect(()=>{(async()=>{try{m(!0);const p=t.includes("-")?t.split("-")[0]:t;u.debug("[FETCH] Loading therapist from Appwrite:",{originalId:t,cleanId:p,hasNameSuffix:t.includes("-")});const w={...await je.getDocument(Lo,it.THERAPISTS,p),heroImageUrl:x,mainImage:v};u.debug("[FETCH] Therapist loaded:",w.name),n(w),r(null)}catch(p){u.error("[FETCH] Failed to load therapist:",p),r(p.message||"Failed to load profile")}finally{m(!1)}})()},[t,m]),g)return e.jsx(zo,{variant:"therapist-dashboard"});if(i||!s){const I=i||"Unable to load therapist profile";return e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âŒ"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Profile Not Found"}),e.jsx("p",{className:"text-gray-600 mb-2 font-mono text-sm break-all",children:I}),d&&e.jsxs("p",{className:"text-sm text-amber-700 mb-4 p-3 bg-amber-50 rounded-lg border border-amber-200",children:["The ID ",e.jsx("strong",{children:l})," looks like a sample or demo link. Browse from the homepage to find a therapist."]}),l&&!d&&e.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["Attempted ID: ",l]}),e.jsx("button",{onClick:()=>{var p;return(p=a.onNavigate)==null?void 0:p.call(a,"home")},className:"bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Back to Home"})]})})}const j=ca.therapistProfile.component;return e.jsx(ce.Suspense,{fallback:e.jsx("div",{className:"w-8 h-8 border-3 border-orange-200 border-t-orange-500 rounded-full animate-spin mx-auto my-8"}),children:e.jsx(j,{therapist:s,onBack:()=>{var I;return(I=a.onNavigate)==null?void 0:I.call(a,"home")},onLanguageChange:a.onLanguageChange,language:a.language,selectedCity:a.selectedCity,onCityChange:a.onCityChange,therapists:a.therapists,places:a.places,onNavigate:a.onNavigate,onChatWithBusyTherapist:a.handleChatWithBusyTherapist,onShowRegisterPrompt:a.handleShowRegisterPromptForChat,onIncrementAnalytics:a.handleIncrementAnalytics,userLocation:a.userLocation,loggedInCustomer:a.loggedInCustomer,loggedInProvider:a.loggedInProvider,onMassageJobsClick:a.onMassageJobsClick,onHotelPortalClick:a.onHotelPortalClick,onVillaPortalClick:a.onVillaPortalClick,onTherapistPortalClick:a.onTherapistPortalClick,onMassagePlacePortalClick:a.onMassagePlacePortalClick,onFacialPortalClick:a.onFacialPortalClick,onAgentPortalClick:a.onAgentPortalClick,onCustomerPortalClick:a.onCustomerPortalClick,onAdminPortalClick:a.onAdminPortalClick,onTermsClick:a.onTermsClick,onPrivacyClick:a.onPrivacyClick,t:a.t})})},Th=t=>{const{page:a,language:s,handleLanguageSelect:n}=t,{t:i,dict:r}=Us(),{loading:l,setPageLoading:d}=Fs(),g=()=>{var p;if(((p=t.loggedInProvider)==null?void 0:p.type)!=="therapist")return null;const j=(t.loggedInProvider.$id||t.loggedInProvider.id||"").toString();return t.therapists.find(R=>(R.$id||R.id||"").toString()===j)||t.loggedInProvider};ce.useEffect(()=>{a!=="landing"&&d(t.isLoading)},[t.isLoading,a,d]);const m=(j,I={},p)=>{u.debug("[renderRoute ENTRY]",{routeName:p||a,hasComponent:!!j,componentType:typeof j,componentName:j==null?void 0:j.name,propsKeys:Object.keys(I),timestamp:new Date().toISOString()});const R=()=>(u.error("[ErrorFallback RENDERED] Route failed, displaying error UI",{routeName:p||a,windowError:typeof window!="undefined"&&window.__lazyErrorMessage||"No error message",timestamp:new Date().toISOString()}),e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âš ï¸"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Component Load Error (patched)"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Failed to load page component"}),e.jsx("div",{className:"bg-gray-100 rounded p-3 mb-4",children:e.jsxs("code",{className:"text-sm text-gray-700",children:["Route: ",p||a]})}),typeof window!="undefined"&&window.__lazyErrorMessage&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-left rounded p-3 mb-4",children:[e.jsx("div",{className:"text-sm font-semibold text-red-700",children:"Error:"}),e.jsx("div",{className:"text-xs text-red-600 break-words",children:window.__lazyErrorMessage})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"The component file may be missing or have a syntax error. Check the console for details."}),e.jsx("button",{onClick:async()=>{try{const{softRecover:w}=await z(async()=>{const{softRecover:P}=await import("./softNavigation.CPJRQeFv.js");return{softRecover:P}},[]);w()}catch{window.location.reload()}},className:"bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition-colors mr-2",children:"Reload Page"}),e.jsx("button",{onClick:()=>{var w;return(w=t.onNavigate)==null?void 0:w.call(t,"home")},className:"bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"Go Home"})]})}));return u.debug("[renderRoute] About to render Component",{routeName:p||a,componentName:j==null?void 0:j.name,willRenderComponent:!0,timestamp:new Date().toISOString()}),e.jsx(Pg,{fallback:e.jsx(R,{}),children:e.jsx(o.Suspense,{fallback:e.jsx(Qt,{variant:"card",className:"mx-auto my-8"}),children:e.jsx(j,{...t,...I,t:i,language:s,onLanguageChange:n,onNavigate:t.setPage})})})};if(u.debug("[ROUTER] Resolving page:",{page:a,type:typeof a}),a==="loading")return u.debug("[ROUTER] Rendering isolated LoadingGate (no providers, no loaders)"),e.jsx(vg,{});if(a==="landing"){const j=ct.landing.component;return e.jsx(fd,{children:e.jsx(j,{language:t.language,onLanguageChange:t.onLanguageChange,onLanguageSelect:t.handleLanguageSelect,onEnterApp:t.handleEnterApp,handleEnterApp:t.handleEnterApp,handleLanguageSelect:t.handleLanguageSelect})})}const x=["home","about","contact","company","how-it-works","faq","massage-types","facial-types","providers","facialProviders","facial-providers","discounts","women-reviews","advanced-search","help-faq","top-therapists","special-offers","video-center","hotels-and-villas","hotel-villa-safe-pass","safePass","therapist-profile","place-profile","booking","terms","privacy"],v=(j,I)=>{var p;return x.includes(j)?e.jsx(wg,{userId:(p=t.loggedInCustomer)==null?void 0:p.$id,t:i,children:I}):I};return e.jsx(Go,{variant:"page",pageVariant:a.includes("therapist")?"therapist-dashboard":a==="home"?"home":"generic",children:(()=>{var j,I,p,R,w,P,D,L,O,H,S,N;switch(a){case"home":return v(a,m(ct.home.component,{page:a,user:t.user,onNavigate:t.onNavigate,therapists:t.therapists,places:t.places,facialPlaces:t.facialPlaces,hotels:t.hotels,userLocation:t.userLocation,loggedInCustomer:t.loggedInCustomer,loggedInProvider:t.loggedInProvider,onChatWithBusyTherapist:t.handleChatWithBusyTherapist,onShowRegisterPrompt:t.handleShowRegisterPromptForChat,onIncrementAnalytics:t.handleIncrementAnalytics,onSelectTherapist:t.handleSetSelectedTherapist,onSelectPlace:t.handleSetSelectedPlace,onSetUserLocation:t.handleSetUserLocation,selectedCity:t.selectedCity,onCityChange:t.setSelectedCity||t.onCityChange,onLoginClick:t.handleNavigateToTherapistLogin,t:i,language:t.language,selectedMassageType:(j=t.selectedMassageType)!=null?j:void 0}));case"about":case"about-us":return v(a,m(ct.about.component,{onNavigate:t.onNavigate,language:t.language,t:i}));case"contact":return v(a,m(ct.contact.component));case"company":return v(a,m(ct.company.component));case"how-it-works":return v(a,m(ct.howItWorks.component));case"faq":return v(a,m(ct.faq.component));case"massage-types":case"massageTypes":return v(a,m(ct.massageTypes.component,{onNavigate:t.onNavigate,t:i,language:t.language,therapists:t.therapists,places:t.places,onFindTherapists:c=>{var h,C;try{sessionStorage.setItem("massage_type_filter_view","therapists")}catch{}(h=t.setSelectedMassageType)==null||h.call(t,c),(C=t.onNavigate)==null||C.call(t,"home")},onFindPlaces:c=>{var h,C;try{sessionStorage.setItem("massage_type_filter_view","places")}catch{}(h=t.setSelectedMassageType)==null||h.call(t,c),(C=t.onNavigate)==null||C.call(t,"home")},onMassageJobsClick:t.onMassageJobsClick,onHotelPortalClick:t.onHotelPortalClick,onVillaPortalClick:t.onVillaPortalClick,onTherapistPortalClick:t.onTherapistPortalClick,onMassagePlacePortalClick:t.onMassagePlacePortalClick,onAgentPortalClick:t.onAgentPortalClick,onCustomerPortalClick:t.onCustomerPortalClick,onAdminPortalClick:t.onAdminPortalClick,onTermsClick:t.onTermsClick,onPrivacyClick:t.onPrivacyClick}));case"facial-types":return v(a,m(ct.facialTypes.component,{onNavigate:t.onNavigate,t:i,language:t.language,therapists:t.therapists,places:t.places,onMassageJobsClick:t.onMassageJobsClick,onTherapistPortalClick:t.onTherapistPortalClick,onMassagePlacePortalClick:t.onMassagePlacePortalClick,onFacialPortalClick:t.onFacialPortalClick,onAgentPortalClick:t.onAgentPortalClick,onCustomerPortalClick:t.onCustomerPortalClick,onAdminPortalClick:t.onAdminPortalClick,onTermsClick:t.onTermsClick,onPrivacyClick:t.onPrivacyClick}));case"providers":return v(a,m(ct.providers.component));case"facialProviders":case"facial-providers":return v(a,m(ct.facialProviders.component,{facialPlaces:(I=t.facialPlaces)!=null?I:[],userLocation:t.userLocation,selectedCity:t.selectedCity,onSetUserLocation:t.handleSetUserLocation,onSelectPlace:t.handleSetSelectedPlace,onIncrementAnalytics:(c,h,C)=>{var M;return(M=t.handleIncrementAnalytics)==null?void 0:M.call(t,c,h,C)},onShowRegisterPrompt:t.handleShowRegisterPrompt,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"home")},t:i,language:t.language,onMassageJobsClick:t.onMassageJobsClick,onTherapistPortalClick:t.onTherapistPortalClick,onMassagePlacePortalClick:t.onMassagePlacePortalClick,onFacialPortalClick:t.onFacialPortalClick,onAgentPortalClick:t.onAgentPortalClick,onCustomerPortalClick:t.onCustomerPortalClick,onAdminPortalClick:t.onAdminPortalClick,onTermsClick:t.onTermsClick,onPrivacyClick:t.onPrivacyClick,therapists:t.therapists,places:t.places}));case"discounts":return v(a,m(ct.discounts.component));case"women-reviews":return v(a,m(ct.womenReviews.component,{t:i,language:t.language,onNavigate:t.onNavigate,onSelectTherapist:t.handleSetSelectedTherapist,onSelectPlace:t.handleSetSelectedPlace,therapists:t.therapists,places:t.places,facialPlaces:t.facialPlaces}));case"advanced-search":return v(a,m(ct.advancedSearch.component,{t:i,language:t.language,onNavigate:t.onNavigate}));case"help-faq":return v(a,m(ct.helpFaq.component,{t:i,language:t.language,onNavigate:t.onNavigate}));case"appwrite-diagnostic":return m(Yg,{t:i,language:t.language,onNavigate:t.onNavigate});case"diagnostic":return m(Qg,{t:i,language:t.language,onNavigate:t.onNavigate});case"top-therapists":return v(a,m(ct.topTherapists.component,{t:i,language:t.language,therapists:t.therapists,onNavigate:t.onNavigate,onSelectTherapist:t.handleSetSelectedTherapist}));case"special-offers":return v(a,m(ct.specialOffers.component,{t:i,language:t.language,onNavigate:t.onNavigate}));case"video-center":return v(a,m(ct.videoCenter.component,{t:i,language:t.language,onNavigate:t.onNavigate}));case"hotels-and-villas":return v(a,m(ct.hotelsVillas.component,{onNavigate:t.onNavigate,onMassageJobsClick:()=>t.onNavigate("massage-jobs"),onVillaPortalClick:()=>t.onNavigate("villa-portal"),onTherapistPortalClick:t.onTherapistPortalClick,onMassagePlacePortalClick:t.onMassagePlacePortalClick,onAgentPortalClick:t.onAgentPortalClick,onCustomerPortalClick:t.onCustomerPortalClick,onAdminPortalClick:()=>t.handleAdminLogin(),onTermsClick:()=>t.onNavigate("terms"),onPrivacyClick:()=>t.onNavigate("privacy"),therapists:t.therapists,places:t.places}));case"hotel-villa-safe-pass":case"safePass":return v(a,m(ct.safePass.component,{onNavigate:t.onNavigate,onTherapistPortalClick:t.onTherapistPortalClick,language:t.language}));case"joinIndastreet":return v(a,m(xo,{onNavigate:t.onNavigate,language:t.language,onLanguageChange:t.onLanguageChange,onMassageJobsClick:()=>t.onNavigate("massage-jobs"),onHotelPortalClick:t.onHotelPortalClick,onVillaPortalClick:t.onVillaPortalClick,onTherapistPortalClick:t.onTherapistPortalClick,onMassagePlacePortalClick:t.onMassagePlacePortalClick,onFacialPortalClick:t.onFacialPortalClick,onAgentPortalClick:t.onAgentPortalClick,onCustomerPortalClick:t.onCustomerPortalClick,onAdminPortalClick:()=>{var c;return(c=t.handleAdminLogin)==null?void 0:c.call(t)},onTermsClick:()=>t.onNavigate("terms"),onPrivacyClick:()=>t.onNavigate("privacy"),onLoginClick:t.handleNavigateToTherapistLogin,therapists:t.therapists,places:t.places,t:i}));case"auth":return m(gt.auth.component,{onAuthSuccess:c=>{const C={therapist:"/dashboard/therapist","massage-place":"/dashboard/massage-place","facial-place":"/dashboard/facial-place"}[c];C?window.location.href=C:u.error("Unknown user type:",c)},onBack:()=>t.onNavigate("home"),language:t.language||"id"});case"signin":return m(gt.signin.component,{mode:"signin",onAuthSuccess:async c=>{u.info("Sign in successful - navigating to dashboard for:",{userType:c}),t.restoreUserSession&&(u.debug("Restoring user session after sign-in..."),await t.restoreUserSession(),u.debug("User session restored"));const h=sessionStorage.getItem("pwa-redirect-after-login");if(h){u.info("PWA redirect detected - navigating to:",{pwaRedirect:h}),sessionStorage.removeItem("pwa-redirect-after-login"),t.onNavigate(h);return}const M={therapist:"therapist-status","massage-place":"massage-place-dashboard","facial-place":"facial-place-dashboard"}[c];M?t.onNavigate(M):(u.error("Unknown user type:",c),t.onNavigate("home"))},onBack:()=>t.onNavigate("home"),language:t.language||"id"});case"sign-in":case"signIn":return m(gt.signIn.component,{mode:"signin",onAuthSuccess:async c=>{t.restoreUserSession&&await t.restoreUserSession();const C={therapist:"therapist-status","massage-place":"massage-place-dashboard","facial-place":"facial-place-dashboard"}[c]||"home";t.onNavigate(C)},onBack:()=>t.onNavigate("home"),language:t.language||"id"});case"login":return m(gt.login.component,{mode:"signin",onAuthSuccess:async c=>{t.restoreUserSession&&await t.restoreUserSession();const C={therapist:"therapist-status","massage-place":"massage-place-dashboard","facial-place":"facial-place-dashboard"}[c]||"home";t.onNavigate(C)},onBack:()=>t.onNavigate("home"),language:t.language||"id"});case"signup":case"createAccount":case"create-account":return m(gt.signup.component,{mode:"signup",onAuthSuccess:async c=>{u.info("Signup successful - navigating to dashboard for:",{userType:c}),t.restoreUserSession&&(u.debug("Restoring user session after signup..."),await t.restoreUserSession(),u.debug("User session restored"));const C={therapist:"therapist-status","massage-place":"massage-place-dashboard","facial-place":"facial-place-dashboard",employer:"employer-job-posting"}[c];C?t.onNavigate(C):(u.error("Unknown user type:",c),t.onNavigate("home"))},onBack:()=>t.onNavigate("home"),language:t.language||"id"});case"create-account-employer":return m(gt.signup.component,{mode:"signup",defaultRole:"employer",onAuthSuccess:async c=>{u.info("Signup successful (employer) - navigating to employer dashboard:",{userType:c}),t.restoreUserSession&&await t.restoreUserSession(),t.onNavigate("employer-job-posting")},onBack:()=>t.onNavigate("home"),language:t.language||"id"});case"therapist-signup":return m(gt.signup.component,{mode:"signup",defaultRole:"therapist",onAuthSuccess:async c=>{t.restoreUserSession&&await t.restoreUserSession(),t.onNavigate("therapist-status")},onBack:()=>t.onNavigate("home"),language:t.language||"id"});case"massage-place-signup":case"place-signup":return m(gt.signup.component,{mode:"signup",defaultRole:"massage-place",onAuthSuccess:async c=>{t.restoreUserSession&&await t.restoreUserSession(),t.onNavigate("massage-place-dashboard")},onBack:()=>t.onNavigate("home"),language:t.language||"id"});case"facial-place-signup":return m(gt.signup.component,{mode:"signup",defaultRole:"facial-place",onAuthSuccess:async c=>{t.restoreUserSession&&await t.restoreUserSession(),t.onNavigate("facial-place-dashboard")},onBack:()=>t.onNavigate("home"),language:t.language||"id"});case"role-selection":return m(xo,{language:t.language||"id"});case"onboarding-package":return m(gt.onboardingPackage.component,{language:t.language||"id"});case"therapist-login":case"therapistLogin":return m(gt.therapistLogin.component,{language:t.language||"id"});case"therapist-login-for-jobs":return m(gt.therapistLogin.component,{language:t.language||"id",restoreUserSession:t.restoreUserSession,onNavigate:c=>{var h;return(h=t.onNavigate)==null?void 0:h.call(t,c==="therapist"?"therapist-job-registration":c)},onSuccess:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-job-registration")}});case"place-login-for-jobs":return m(gt.placeLogin.component,{language:t.language||"id",onSuccess:async c=>{var h;t.restoreUserSession&&await t.restoreUserSession(),(h=t.onNavigate)==null||h.call(t,"therapist-job-registration")},onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"massage-jobs")}});case"therapist-signup-for-jobs":return m(gt.signup.component,{mode:"signup",defaultRole:"therapist",onAuthSuccess:async()=>{var c;t.restoreUserSession&&await t.restoreUserSession(),(c=t.onNavigate)==null||c.call(t,"therapist-job-registration")},onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"massage-jobs")},language:t.language||"id"});case"place-signup-for-jobs":return m(gt.signup.component,{mode:"signup",defaultRole:"massage-place",onAuthSuccess:async()=>{var c;t.restoreUserSession&&await t.restoreUserSession(),(c=t.onNavigate)==null||c.call(t,"therapist-job-registration")},onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"massage-jobs")},language:t.language||"id"});case"place-login":case"massagePlaceLogin":return m(gt.placeLogin.component,{language:t.language||"id"});case"employer-login":return m(gt.employerLogin.component,{onSuccess:async c=>{var h;t.restoreUserSession&&await t.restoreUserSession(),(h=t.onNavigate)==null||h.call(t,"employer-job-posting")},onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"massage-jobs")},returnTo:"employer-job-posting"});case"facial-portal":return m(gt.facialPortal.component,{language:t.language||"id"});case"simple-signup":case"simpleSignup":return m(gt.simpleSignup.component,{language:t.language||"id"});case"therapist-profile":u.debug("[TherapistProfile] Unified profile route"),u.debug("  - selectedTherapist:",{therapist:t.selectedTherapist}),u.debug("  - URL:",{url:window.location.href});let k=window.location.pathname;const b=window.location.hash;b.startsWith("#/")&&(k=b.substring(1));const y=k.match(/\/(?:therapist-profile|profile\/therapist)\/([a-z0-9-]+)/);let T=null;if(y){const c=y[1];T=c.split("-")[0],u.debug("  - Extracted profile therapist ID:",{urlId:c,profileTherapistId:T})}else t.selectedTherapist&&(T=(t.selectedTherapist.$id||t.selectedTherapist.id||"").toString(),u.debug("  - Using selectedTherapist ID:",{profileTherapistId:T}));if(t.user&&(t.user.role==="therapist"||t.user.userType==="therapist"||t.user.type==="therapist")){const c=(t.user.$id||t.user.id||t.user.therapistId||"").toString();if(T&&c&&T===c)u.debug("âœ… PROFILE ACCESS: Therapist viewing own profile - allowing with dashboard suggestion"),(p=t.showToast)==null||p.call(t,"ðŸ’¡ Tip: Use your dashboard to manage your profile","info");else if(T)u.debug("âœ… PROFILE ACCESS: Therapist viewing another therapist profile - allowing for reference");else return u.warn("âš ï¸ REDIRECT PREVENTION: Unclear profile access by therapist - redirecting to dashboard"),(R=t.showToast)==null||R.call(t,"ðŸ”„ Redirecting to your dashboard...","info"),setTimeout(()=>{var h;(h=t.setPage)==null||h.call(t,"therapist-dashboard")},500),e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Redirecting to your dashboard..."})]})})}if(y){const c=y[1];u.debug("  - Extracted ID:",{urlId:c});const h=c.split("-")[0],C=t.therapists.find(M=>{const E=(M.$id||M.id||"").toString();return E===c||E===h||E.startsWith(c)});return C?(u.debug("  Found in memory:",{name:C.name}),m(ca.therapistProfile.component,{therapist:C,onBack:()=>{var M;return(M=t.setPage)==null?void 0:M.call(t,"home")},onLanguageChange:t.onLanguageChange,language:t.language,selectedCity:t.selectedCity,onCityChange:t.onCityChange,therapists:t.therapists,places:t.places,onNavigate:t.onNavigate,onChatWithBusyTherapist:t.handleChatWithBusyTherapist,onShowRegisterPrompt:t.handleShowRegisterPromptForChat,onIncrementAnalytics:t.handleIncrementAnalytics,userLocation:t.userLocation,loggedInCustomer:t.loggedInCustomer,loggedInProvider:t.loggedInProvider,onMassageJobsClick:t.onMassageJobsClick,onHotelPortalClick:t.onHotelPortalClick,onVillaPortalClick:t.onVillaPortalClick,onTherapistPortalClick:t.onTherapistPortalClick,onMassagePlacePortalClick:t.onMassagePlacePortalClick,onFacialPortalClick:t.onFacialPortalClick,onAgentPortalClick:t.onAgentPortalClick,onCustomerPortalClick:t.onCustomerPortalClick,onAdminPortalClick:t.onAdminPortalClick,onTermsClick:t.onTermsClick,onPrivacyClick:t.onPrivacyClick,t:t.t})):(u.warn("  Not in memory, attempting Appwrite fetch...",{searchedId:c,idPrefix:c.split("-")[0],availableIds:t.therapists.slice(0,5).map(M=>({id:M.$id||M.id,name:M.name})),totalTherapists:t.therapists.length}),e.jsx(Ch,{therapistId:c,...t}))}return t.selectedTherapist?m(ca.therapistProfile.component,{therapist:t.selectedTherapist,onBack:()=>{var c;return(c=t.setPage)==null?void 0:c.call(t,"home")},onLanguageChange:t.onLanguageChange,language:t.language,selectedCity:t.selectedCity,onCityChange:t.onCityChange,therapists:t.therapists,places:t.places,onMassageJobsClick:t.onMassageJobsClick,onHotelPortalClick:t.onHotelPortalClick,onVillaPortalClick:t.onVillaPortalClick,onTherapistPortalClick:t.onTherapistPortalClick,onMassagePlacePortalClick:t.onMassagePlacePortalClick,onFacialPortalClick:t.onFacialPortalClick,onAgentPortalClick:t.onAgentPortalClick,onCustomerPortalClick:t.onCustomerPortalClick,onAdminPortalClick:t.onAdminPortalClick,onTermsClick:t.onTermsClick,onPrivacyClick:t.onPrivacyClick,onNavigate:t.onNavigate,onChatWithBusyTherapist:t.handleChatWithBusyTherapist,onShowRegisterPrompt:t.handleShowRegisterPromptForChat,onIncrementAnalytics:t.handleIncrementAnalytics,userLocation:t.userLocation,loggedInCustomer:t.loggedInCustomer,loggedInProvider:t.loggedInProvider,t:t.t}):(u.error("[TherapistProfile] No therapist data available"),u.error("  - selectedTherapist:",t.selectedTherapist),u.error("  - URL path:",window.location.pathname),u.error("  - URL hash:",window.location.hash),u.error("  - Route issue: No therapist ID in URL or selectedTherapist missing"),e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âš ï¸"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Component Load Error (patched)"}),e.jsxs("p",{className:"text-gray-600 mb-2",children:[e.jsx("strong",{children:"Route:"})," therapist-profile"]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"The component file may be missing or have a syntax error. Check the console for details."}),e.jsxs("div",{className:"text-xs text-gray-500 mb-4 text-left bg-gray-50 p-3 rounded",children:[e.jsx("strong",{children:"Debug Info:"}),e.jsx("br",{}),"URL: ",window.location.href,e.jsx("br",{}),"Issue: Missing therapist ID in URL or no selected therapist"]}),e.jsx("button",{onClick:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"home")},className:"bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Back to Home"})]})}));case"share-therapist":return u.debug("[ShareTherapist] Rendering new share page"),u.debug("  - Therapists available:",{count:((w=t.therapists)==null?void 0:w.length)||0}),u.debug("  - URL:",{url:window.location.href}),m(ca.shareTherapist.component);case"share-place":return u.debug("[SharePlace] Rendering share page"),m(ca.sharePlace.component);case"share-facial":return u.debug("[ShareFacial] Rendering share page"),m(ca.shareFacial.component);case"shared-therapist-profile":return u.debug("[ROUTER] Route matched: shared-therapist-profile"),u.debug("Current path:",{path:window.location.pathname}),u.debug("Full URL:",{url:window.location.href}),u.debug("Route name:",{page:a}),u.debug("Has loggedInCustomer:",{hasCustomer:!!t.loggedInCustomer}),u.debug("Has userLocation:",{hasLocation:!!t.userLocation}),u.debug("Language:",{language:t.language}),u.debug("[ROUTER] Rendering SharedTherapistProfile component..."),e.jsx(gi,{...t,userLocation:t.userLocation,loggedInCustomer:t.loggedInCustomer,onNavigate:t.onNavigate,language:t.language});case"massage-place-profile":u.debug("[MassagePlaceProfile] Rendering massage place profile page"),u.debug("  - selected Place:",{place:t.selectedPlace}),u.debug("  - URL path:",{path:window.location.pathname});const F=window.location.pathname.match(/\/profile\/place\/(\d+-[\w-]+)/);if(F&&!t.selectedPlace){const c=F[1].split("-")[0],h=t.places.find(C=>(C.id||C.$id||"").toString()===c);if(h)return m(ca.massagePlace.component,{place:h,onLanguageChange:t.onLanguageChange,language:t.language,selectedCity:t.selectedCity,onCityChange:t.onCityChange,therapists:t.therapists,places:t.places,onMassageJobsClick:t.onMassageJobsClick,onHotelPortalClick:t.onHotelPortalClick,onVillaPortalClick:t.onVillaPortalClick,onTherapistPortalClick:t.onTherapistPortalClick,onMassagePlacePortalClick:t.onMassagePlacePortalClick,onFacialPortalClick:t.onFacialPortalClick,onAgentPortalClick:t.onAgentPortalClick,onCustomerPortalClick:t.onCustomerPortalClick,onAdminPortalClick:t.onAdminPortalClick,onTermsClick:t.onTermsClick,onPrivacyClick:t.onPrivacyClick,onNavigate:t.onNavigate})}return m(ca.massagePlace.component,{place:t.selectedPlace,onLanguageChange:t.onLanguageChange,language:t.language,selectedCity:t.selectedCity,onCityChange:t.onCityChange,therapists:t.therapists,places:t.places,onMassageJobsClick:t.onMassageJobsClick,onHotelPortalClick:t.onHotelPortalClick,onVillaPortalClick:t.onVillaPortalClick,onTherapistPortalClick:t.onTherapistPortalClick,onMassagePlacePortalClick:t.onMassagePlacePortalClick,onFacialPortalClick:t.onFacialPortalClick,onAgentPortalClick:t.onAgentPortalClick,onCustomerPortalClick:t.onCustomerPortalClick,onAdminPortalClick:t.onAdminPortalClick,onTermsClick:t.onTermsClick,onPrivacyClick:t.onPrivacyClick,onNavigate:t.onNavigate});case"facial-place-profile":{u.debug("[FacialPlaceProfile] Rendering facial place profile page"),u.debug("  - selectedPlace:",{place:t.selectedPlace});const c=typeof window!="undefined"?(window.location.pathname||"").replace(/^\/+/,""):"",h=typeof window!="undefined"?(window.location.hash||"").replace(/^#\/?/,""):"",C=c||h,M=C?C.match(/profile\/facial\/([^/]+)/):null,E=M?M[1]:null,W=Z=>(Z||"").toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),X=Z=>{var Fe;return!Z||!((Fe=t.facialPlaces)!=null&&Fe.length)?null:t.facialPlaces.find(ve=>{const re=(ve.$id||ve.id||"").toString(),Oe=W(ve.name);return re+"-"+Oe===Z||Z===re})||null},_=W(ei.name),$=E===Tn+"-"+_||E===Tn||E!=null&&E.startsWith(Tn+"-"),q=t.selectedPlace||X(E||"")||($?ei:null)||null,J=(q==null?void 0:q.$id)||(q==null?void 0:q.id)||(E==null?void 0:E.split("-")[0])||"";return m(ca.facialPlace.component,{place:q,placeId:J||(q?q.$id||q.id:void 0),facialPlaces:(P=t.facialPlaces)!=null?P:[],onBack:()=>t.setPage("home"),onBook:()=>{const Z=q||t.selectedPlace;if(Z!=null&&Z.whatsappNumber){const me="Hi! I'd like to book a facial treatment at ".concat(Z.name,". When are you available?");window.open("https://wa.me/".concat(Z.whatsappNumber.replace(/[^0-9]/g,""),"?text=").concat(encodeURIComponent(me)),"_blank")}},onNavigate:t.onNavigate,onMassageJobsClick:t.onMassageJobsClick,onVillaPortalClick:t.onVillaPortalClick,onTherapistPortalClick:t.onTherapistPortalClick,onFacialPlacePortalClick:t.onFacialPortalClick,onAgentPortalClick:t.onAgentPortalClick,onCustomerPortalClick:t.onCustomerPortalClick,onAdminPortalClick:t.onAdminPortalClick,onTermsClick:t.onTermsClick,onPrivacyClick:t.onPrivacyClick,therapists:t.therapists,places:t.places,userLocation:t.userLocation,loggedInCustomer:t.loggedInCustomer,language:t.language,onLanguageChange:t.onLanguageChange})}case"place-detail":return m(ca.placeDetail.component);case"therapistStatus":{u.error("[ROUTE DEBUG] therapistStatus case matched - THIS SHOULD NOT HAPPEN FOR therapist-status");const c=g();return m(Xg,{therapist:c,onStatusChange:t.handleTherapistStatusChange,onNavigateToDashboard:()=>t.setPage("therapistDashboard"),onNavigateToHome:()=>t.setPage("therapist-dashboard")})}case"privacy-policy":case"privacy":return m(Na.privacy.component,{onBack:()=>{var c,h;t.user&&(t.user.role==="therapist"||t.user.userType==="therapist"||t.user.type==="therapist")?(c=t.onNavigate)==null||c.call(t,"therapist-dashboard"):(h=t.onNavigate)==null||h.call(t,"home")},t:r==null?void 0:r.privacyPolicy});case"cookies-policy":return m(Na.cookies.component);case"service-terms":case"serviceTerms":return m(Na.serviceTerms.component,{onBack:()=>{var c,h;t.user&&(t.user.role==="therapist"||t.user.userType==="therapist"||t.user.type==="therapist")?(c=t.onNavigate)==null||c.call(t,"therapist-dashboard"):(h=t.onNavigate)==null||h.call(t,"home")},t:r==null?void 0:r.serviceTerms,contactNumber:"+62 812-3456-7890"});case"place-terms":return m(Na.placeTerms.component);case"package-terms":return m(Na.packageTerms.component);case"membership-terms":return m(Na.membershipTerms.component);case"mobile-terms-and-conditions":return m(dh);case"therapist-terms-and-conditions":case"therapist-terms":return m(mh);case"blog":return v(a,m(vs.index.component,{onNavigate:t.onNavigate,onLanguageChange:t.onLanguageChange,language:t.language,t:i,onMassageJobsClick:()=>t.onNavigate("massage-jobs"),onVillaPortalClick:t.onVillaPortalClick,onTherapistPortalClick:t.onTherapistPortalClick,onMassagePlacePortalClick:t.onMassagePlacePortalClick,onAgentPortalClick:t.onAgentPortalClick,onCustomerPortalClick:t.onCustomerPortalClick,onAdminPortalClick:()=>{var c;return(c=t.handleAdminLogin)==null?void 0:c.call(t)},onTermsClick:()=>t.onNavigate("terms"),onPrivacyClick:()=>t.onNavigate("privacy"),therapists:t.therapists,places:t.places}));case"indastreet-news":return m(Ag,{onNavigate:t.onNavigate,onLanguageChange:t.onLanguageChange,language:t.language,t:i,loggedInCustomer:t.loggedInCustomer,onMassageJobsClick:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"massage-jobs")},onVillaPortalClick:t.onVillaPortalClick,onTherapistPortalClick:t.onTherapistPortalClick,onMassagePlacePortalClick:t.onMassagePlacePortalClick,onAgentPortalClick:t.onAgentPortalClick,onCustomerPortalClick:t.onCustomerPortalClick,onAdminPortalClick:()=>{var c;return(c=t.handleAdminLogin)==null?void 0:c.call(t)},onTermsClick:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"terms")},onPrivacyClick:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"privacy")},therapists:t.therapists,places:t.places});case"massage-bali":return m(vs.massageBali.component);case"balinese-massage":return m(vs.balinese.component);case"deep-tissue-massage":return m(vs.deepTissue.component);case"press":return m(vs.press.component);case"blog-bali-spa-trends-2025":return m(uh);case"blog-top-10-massage-techniques":return m(gh);case"blog-massage-career-indonesia":return m(hh);case"blog-benefits-regular-massage":return m(ph);case"blog-hiring-massage-therapists":return m(xh);case"blog-traditional-balinese-massage":return m(fh);case"blog-spa-tourism-indonesia":return m(bh);case"blog-aromatherapy-massage-oils":return m(yh);case"blog-pricing-guide-massage":return m(wh);case"blog-deep-tissue-vs-swedish":return m(vh);case"blog-online-presence-therapist":return m(jh);case"blog-wellness-tourism-ubud":return m(Nh);case"blog-wellness-southeast-asia":return m(kh);case"blog-massage-spa-standards-asia-europe":return m(Sh);case"blog-skin-clinic-trends-international":return m(Ph);case"blog-building-wellness-business-international":return m(Ih);case"confirm-therapists":return m(Ig);case"employer-job-posting":return t.user&&t.user.type==="employer"?m(Cg,{onNavigateToPayment:h=>{var C,M;(C=t.setSelectedJobId)==null||C.call(t,h),(M=t.onNavigate)==null||M.call(t,"job-posting-payment")},onNavigate:t.onNavigate,onMassageJobsClick:()=>{var h;return(h=t.onNavigate)==null?void 0:h.call(t,"massage-jobs")}}):m(gt.employerLogin.component,{onSuccess:async h=>{var C;t.restoreUserSession&&await t.restoreUserSession(),(C=t.onNavigate)==null||C.call(t,"employer-job-posting")},onBack:()=>{var h;return(h=t.onNavigate)==null?void 0:h.call(t,"massage-jobs")},returnTo:"employer-job-posting"});case"indastreet-partners":return m(Tg);case"website-management":return m(Eg);case"guest-profile":return m(Dg);case"qr-code":return m(_g);case"notifications":return t.user&&t.user.type==="therapist"?(u.debug("[ROUTE] notifications â†’ redirecting therapist to therapist-notifications"),t.setPage("therapist-notifications"),m(at.notifications.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-status")},onNavigate:t.onNavigate,language:t.language})):m(Lg);case"chat-room":return u.debug("[ROUTE] chat-room accessed - redirecting to home"),t.setPage("home"),m(ct.home.component);case"booking":return m(po);case"membership":return m(Rg);case"accept-booking":return m(Mg);case"decline-booking":return m(Bg);case"lead-accept":return m($g);case"lead-decline":return m(Og);case"job-posting-payment":return m(Ug,{jobId:t.selectedJobId||"",onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"massage-jobs")},onNavigate:t.onNavigate});case"apply-for-job":return m(Fg,{jobId:t.selectedJobId||"",onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"massage-jobs")},onNavigate:t.onNavigate,language:t.language,onLanguageChange:t.onLanguageChange,onMassageJobsClick:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"massage-jobs")},onTermsClick:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"terms")},onPrivacyClick:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"privacy")},therapists:t.therapists,places:t.places});case"browse-jobs":case"browseJobs":return m(Hg);case"massage-jobs":case"massageJobs":return m(Vg,{onBack:()=>t.setPage("home"),onPostJob:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"employer-job-posting")},onNavigateToPayment:c=>{var h,C,M;c?((h=t.setSelectedJobId)==null||h.call(t,c),(C=t.onNavigate)==null||C.call(t,"job-posting-payment")):(M=t.onNavigate)==null||M.call(t,"job-unlock-payment")},onApplyForJob:c=>{var h,C;try{sessionStorage.setItem("indastreet_apply_for_job_id",c)}catch{}(h=t.setSelectedJobId)==null||h.call(t,c),(C=t.onNavigate)==null||C.call(t,"apply-for-job")},onCreateTherapistProfile:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-job-registration")},onNavigate:t.onNavigate});case"partnership-application":return m(Wg);case"partner-contact":return m(zg,{onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"indastreet-partners")},onNavigate:t.onNavigate,onMassageJobsClick:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"massage-jobs")},onHotelPortalClick:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"hotelVillaMenu")},onVillaPortalClick:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"villa-portal")},onTherapistPortalClick:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-login-for-jobs")},onMassagePlacePortalClick:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"place-login-for-jobs")},onAgentPortalClick:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"agent")},onCustomerPortalClick:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"home")},onAdminPortalClick:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"admin-login")},onTermsClick:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"terms")},onPrivacyClick:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"privacy")},therapists:t.therapists,places:t.places});case"therapist-job-registration":return t.user&&(t.user.type==="therapist"||t.user.type==="place"||((D=t.loggedInProvider)==null?void 0:D.type)==="therapist"||((L=t.loggedInProvider)==null?void 0:L.type)==="place")?m(Gg,{onBack:()=>{var h;return(h=t.onNavigate)==null?void 0:h.call(t,"massage-jobs")},onSuccess:()=>{var h;return(h=t.onNavigate)==null?void 0:h.call(t,"massage-jobs")},onNavigateToPayment:h=>{var C,M;(C=t.setSelectedJobId)==null||C.call(t,h),(M=t.onNavigate)==null||M.call(t,"therapist-listing-payment")},onNavigate:t.onNavigate}):m(gt.servicePersonnelLogin.component,{onTherapistLogin:()=>{var h;return(h=t.onNavigate)==null?void 0:h.call(t,"therapist-login-for-jobs")},onPlaceLogin:()=>{var h;return(h=t.onNavigate)==null?void 0:h.call(t,"place-login-for-jobs")},onTherapistSignup:()=>{var h;return(h=t.onNavigate)==null?void 0:h.call(t,"therapist-signup-for-jobs")},onPlaceSignup:()=>{var h;return(h=t.onNavigate)==null?void 0:h.call(t,"place-signup-for-jobs")},onBack:()=>{var h;return(h=t.onNavigate)==null?void 0:h.call(t,"massage-jobs")}});case"reviews":return m(Kg,{onBack:()=>t.setPage("home")});case"job-unlock-payment":return m(Jg);case"therapist-listing-payment":return m(qg,{listingId:t.selectedJobId||"",onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"massage-jobs")},onNavigate:t.onNavigate});case"customer-reviews":return m(Zg,{onBack:()=>t.setPage("home")});case"customer-support":return m(an);case"chat-support":return m(an,{defaultTab:"chat",source:"floating-button"});case"booking-quick":return m(po,{quickMode:!0,source:"floating-button"});case"emergency-contact":return m(an,{emergencyMode:!0,source:"floating-button"});case"help":return m(ct.faq.component,{source:"floating-button"});case"feedback":return m(an,{defaultTab:"feedback",source:"floating-button"});case"place-discount-badge":return m(eh);case"verifiedProBadge":case"verified-pro-badge":return m(th);case"mobileTherapistStandards":case"mobile-therapist-standards":return m(ah);case"guest-alerts":return m(sh);case"partner-settings":return m(nh);case"admin-login":return m(ih);case"career-opportunities":return m(rh);case"therapist-info":return m(oh);case"employer-info":return m(lh);case"payment-info":return m(ch);case"profile":if(((O=t.loggedInProvider)==null?void 0:O.type)==="therapist"||(H=t.user)!=null&&H.therapistId)return m(at.dashboard.component,{therapist:t.loggedInProvider||t.user,onLogout:t.handleLogout,onNavigate:t.onNavigate,onNavigateToStatus:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-status")},onNavigateToBookings:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-bookings")},onNavigateToEarnings:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-earnings")},onNavigateToChat:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-chat")},onNavigateToNotifications:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-notifications")},onNavigateToLegal:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-legal")},onNavigateToCalendar:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-calendar")},onNavigateToPayment:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-payment")},onNavigateToPaymentStatus:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-payment-status")},onNavigateToCommission:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-commission")},onNavigateToSchedule:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-schedule")},onNavigateToMenu:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-menu")},onNavigateHome:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"home")},language:t.language});case"dashboard":const U=t.user||t.loggedInProvider,B=U&&(U.userType==="therapist"||U.role==="therapist"||U.therapistId||((S=t.loggedInProvider)==null?void 0:S.type)==="therapist");if(U&&B)return m(at.dashboard.component,{therapist:t.loggedInProvider||t.user,onLogout:t.handleLogout,onNavigate:t.onNavigate,onNavigateToStatus:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-status")},onNavigateToBookings:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-bookings")},onNavigateToEarnings:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-earnings")},onNavigateToChat:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-chat")},onNavigateToNotifications:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-notifications")},onNavigateToLegal:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-legal")},onNavigateToCalendar:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-calendar")},onNavigateToPayment:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-payment")},onNavigateToPaymentStatus:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-payment-status")},onNavigateToCommission:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-commission")},onNavigateToSchedule:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-schedule")},onNavigateToMenu:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-menu")},onNavigateHome:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"home")},language:t.language});if(U){const c=U.userType||U.role;if(c==="massage-place"||c==="massage_place")return m(zn.dashboard.component,{place:U,onBack:()=>{var h;return(h=t.onNavigate)==null?void 0:h.call(t,"home")},language:t.language});if(c==="facial-place"||c==="facial_place")return m(mo.dashboard.component,{place:U,onBack:()=>{var h;return(h=t.onNavigate)==null?void 0:h.call(t,"home")},language:t.language})}return m(ct.home.component,{page:a,onNavigate:t.onNavigate,therapists:t.therapists,places:t.places,facialPlaces:t.facialPlaces,hotels:t.hotels,userLocation:t.userLocation,loggedInCustomer:t.loggedInCustomer,loggedInProvider:t.loggedInProvider,onQuickBookWithChat:t.handleQuickBookWithChat,onChatWithBusyTherapist:t.handleChatWithBusyTherapist,onShowRegisterPrompt:t.handleShowRegisterPromptForChat,onIncrementAnalytics:t.handleIncrementAnalytics,selectedCity:t.selectedCity,onCityChange:t.setSelectedCity||t.onCityChange,t:i,language:t.language});case"massage-place-dashboard":{const c=t.loggedInProvider||t.user,h=c==null?void 0:c.$id;return m(ho,{userId:h,t:r==null?void 0:r.serviceTerms,ChildComponent:zn.dashboard.component,childProps:{place:c,onBack:()=>{var C;return(C=t.onNavigate)==null?void 0:C.call(t,"home")},language:t.language}})}case"facial-place-dashboard":{const c=t.loggedInProvider||t.user,h=(N=c==null?void 0:c.$id)!=null?N:"";return m(ho,{userId:h,t:r==null?void 0:r.serviceTerms,ChildComponent:mo.dashboard.component,childProps:{place:c,placeId:h,onSave:C=>{h&&ji.update(h,C).catch(M=>u.error("[Facial dashboard] Save failed",M))},onBack:()=>{var C;return(C=t.onNavigate)==null?void 0:C.call(t,"home")},language:t.language}})}case"therapist":case"therapistDashboard":case"therapist-dashboard":{const c=t.loggedInProvider||t.user,h=c==null?void 0:c.$id;return h&&!di(h)?m(Na.serviceTerms.component,{t:r==null?void 0:r.serviceTerms,acceptMode:!0,onAccept:()=>{var C;mi(h),(C=t.onNavigate)==null||C.call(t,"dashboard")}}):(u.debug("[SWITCH CASE] therapist-dashboard MATCHED - REDIRECTING TO STATUS"),u.debug("[FIRST PAGE] Showing Online Status as first page"),u.debug("[DEBUG] therapist data:",t.loggedInProvider),m(at.status.component,{therapist:c,onBack:()=>{var C;return(C=t.onNavigate)==null?void 0:C.call(t,"therapist-status")},onNavigate:t.onNavigate,language:t.language||"id"}))}case"status":case"therapist-status":{const c=t.loggedInProvider||t.user,h=c==null?void 0:c.$id;return h&&!di(h)?m(Na.serviceTerms.component,{t:r==null?void 0:r.serviceTerms,acceptMode:!0,onAccept:()=>{var C;mi(h),(C=t.onNavigate)==null||C.call(t,"dashboard")}}):(u.debug("[ROUTE DEBUG] therapist-status case matched!"),u.debug("[FIRST PAGE] Therapist Online Status Page"),u.debug("[DEBUG] therapist data:",t.loggedInProvider),u.debug("[ROUTE RESOLVE] therapist-status â†’ TherapistOnlineStatus"),m(at.status.component,{therapist:c,onBack:()=>{var C;return(C=t.onNavigate)==null?void 0:C.call(t,"therapist-status")},onNavigate:t.onNavigate,language:t.language||"id"}))}case"bookings":case"therapist-bookings":return u.debug("[ROUTE RESOLVE] therapist-bookings â†’ TherapistBookings"),u.debug("[ROUTER OK] therapist-bookings",{route:"/dashboard/therapist/bookings"}),m(at.bookings.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-dashboard")},onNavigate:t.onNavigate,language:t.language||"id"},"therapist-bookings");case"earnings":case"therapist-earnings":return u.debug("[ROUTE RESOLVE] therapist-earnings â†’ TherapistEarnings"),m(at.earnings.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-status")},onNavigate:t.onNavigate,language:t.language||"id"});case"chat":case"therapist-chat":return u.debug("[ROUTE RESOLVE] therapist-chat â†’ TherapistChat"),m(at.chat.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-status")},onNavigate:t.onNavigate,language:t.language||"id"});case"therapist-notifications":return u.debug("[ROUTE RESOLVE] therapist-notifications â†’ TherapistNotifications"),m(at.notifications.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-status")},onNavigate:t.onNavigate,language:t.language||"id"});case"legal":case"therapist-legal":return u.debug("[ROUTE RESOLVE] therapist-legal â†’ TherapistLegal"),m(at.legal.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-status")},onNavigate:t.onNavigate,language:t.language||"id"});case"therapist-job-applications":return u.debug("[ROUTE RESOLVE] therapist-job-applications â†’ TherapistJobApplicationsPage"),m(at.jobApplications.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-status")},onNavigate:t.onNavigate,language:t.language||"id"});case"therapist-how-it-works":return u.debug("[ROUTE RESOLVE] therapist-how-it-works â†’ HowItWorksPage"),m(at.howItWorks.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-status")},onNavigate:t.onNavigate,language:t.language||"id"});case"calendar":case"therapist-calendar":return u.debug("[ROUTE RESOLVE] therapist-calendar â†’ TherapistCalendar"),m(at.calendar.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-status")},onNavigate:t.onNavigate,language:t.language||"id"});case"payment":case"therapist-payment":return u.debug("[ROUTE RESOLVE] therapist-payment â†’ TherapistPaymentInfo"),m(at.payment.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-status")},onNavigate:t.onNavigate,language:t.language||"id"});case"payment-status":case"therapist-payment-status":u.debug("[ROUTE RESOLVE] payment-status/therapist-payment-status â†’ TherapistPaymentStatus");const f=m(at.paymentStatus.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-status")},onNavigate:t.onNavigate,language:t.language||"id"});return u.debug("[ROUTER OK] payment-status component bound successfully"),f;case"custom-menu":case"therapist-menu":u.debug("[ROUTE RESOLVE] custom-menu/therapist-menu â†’ TherapistMenu");const A=m(at.menu.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-status")},onNavigate:t.onNavigate,language:t.language||"id"});return u.debug("[ROUTER OK] therapist-menu component bound successfully"),A;case"commission-payment":case"therapist-commission":case"therapist-commission-payment":return u.debug("[ROUTE RESOLVE] therapist-commission â†’ CommissionPayment"),m(at.commission.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-status")},onNavigate:t.onNavigate,language:t.language||"id"});case"send-discount":return u.debug("[ROUTE RESOLVE] send-discount â†’ SendDiscountPage"),m(at.sendDiscount.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-status")},onNavigate:t.onNavigate,language:t.language||"id"});case"customers":case"therapist-customers":return u.debug("[ROUTE RESOLVE] customers â†’ TherapistCustomersPage"),m(at.customers.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-dashboard")},onNavigate:t.onNavigate,language:t.language||"id"});case"more-customers":return u.debug("[ROUTE RESOLVE] more-customers â†’ MoreCustomersPage"),m(at.moreCustomers.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-dashboard")},onNavigate:t.onNavigate,language:t.language||"id"});case"analytics":case"therapist-analytics":return u.debug("[ROUTE RESOLVE] analytics â†’ TherapistAnalyticsPage"),m(at.analytics.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-dashboard")},onNavigate:t.onNavigate,language:t.language||"id"});case"banner-discount":case"therapist-banner-discount":return u.debug("[ROUTE RESOLVE] banner-discount â†’ BannerDiscountPage"),m(at.bannerDiscount.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-customers")},onNavigate:t.onNavigate,language:t.language||"id"});case"therapist-hotel-villa-safe-pass":return u.debug("[ROUTE RESOLVE] therapist-hotel-villa-safe-pass â†’ TherapistHotelVillaSafePassPage"),m(at.hotelVillaSafePass.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-status")},onNavigate:t.onNavigate,language:t.language||"id"});case"therapist-safepass-apply":return u.debug("[ROUTE RESOLVE] therapist-safepass-apply â†’ TherapistSafePassWrapper"),m(at.safePassApplication.component,{onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-dashboard")}});case"schedule":case"therapist-schedule":return u.debug("[ROUTE RESOLVE] therapist-schedule â†’ TherapistSchedule"),u.debug("[ROUTER OK] therapist-schedule",{route:"/dashboard/therapist/schedule"}),m(at.schedule.component,{therapist:t.user,onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"therapist-dashboard")},onNavigate:t.onNavigate,language:t.language||"id"},"therapist-schedule");case"therapist-package-terms":return m(at.packageTerms.component,{therapist:t.user,language:t.language||"id"});case"placeDashboard":case"place-dashboard":return m(gt.placeLogin.component,{redirectToDashboard:!0});case"place-safepass-apply":return u.debug("[ROUTE RESOLVE] place-safepass-apply â†’ PlaceSafePassWrapper"),m(zn.safePassApplication.component,{onBack:()=>{var c;return(c=t.onNavigate)==null?void 0:c.call(t,"place-dashboard")}});case"admin":case"adminDashboard":case"admin-dashboard":case"agentPortal":case"agent-portal":return m(Ht.dashboard.component,{onNavigateHome:()=>t.onNavigate("home")});case"admin-therapists":return m(Ht.therapists.component,{onNavigateHome:()=>t.onNavigate("home")});case"admin-bookings":return m(Ht.bookings.component,{onNavigateHome:()=>t.onNavigate("home")});case"admin-chat":return m(Ht.chat.component,{onNavigateHome:()=>t.onNavigate("home")});case"admin-revenue":return m(Ht.revenue.component,{onNavigateHome:()=>t.onNavigate("home")});case"admin-commissions":return m(Ht.commissions.component,{onNavigateHome:()=>t.onNavigate("home")});case"admin-ktp":return m(Ht.ktpVerification.component,{onNavigateHome:()=>t.onNavigate("home")});case"admin-achievements":return m(Ht.achievements.component,{onNavigateHome:()=>t.onNavigate("home")});case"admin-system-health":return m(Ht.systemHealth.component,{onNavigateHome:()=>t.onNavigate("home")});case"admin-settings":return m(Ht.settings.component,{onNavigateHome:()=>t.onNavigate("home")});case"admin-safepass":return m(Ht.safePass.component,{onNavigateHome:()=>t.onNavigate("home")});case"admin-live-listings":return m(Ht.liveListings.component,{therapists:t.therapists||[],loggedInAgent:t.loggedInAgent,onNavigate:t.onNavigate});default:{u.error("[ROUTE RESOLVE] Unknown route, redirecting to home:",a);const c=({onNavigate:h})=>(o.useEffect(()=>{h==null||h("home")},[h]),e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50 flex items-center justify-center p-4",children:e.jsx("p",{className:"text-gray-600",children:"Redirecting to homeâ€¦"})}));return e.jsx(c,{onNavigate:t.onNavigate})}}})()})},Wt=(t,a=null)=>a;function et(...t){}const Ah=()=>{const t=()=>{try{const le=new URLSearchParams(window.location.search).get("page"),ke=window.location.pathname,We=window.location.hash||"";if(ke==="/"&&(We.includes("/profile/therapist/")||We.includes("/profile/place/")))return et("ðŸ  [INIT] Root path with stale profile hash - clearing"),window.history.replaceState(null,"","/"),sessionStorage.removeItem("direct_therapist_id"),sessionStorage.removeItem("pending_deeplink"),"landing";if(ke==="/mobile-terms-and-conditions")return et("ðŸ“„ Mobile terms:",ke),"mobile-terms-and-conditions";if(ke.startsWith("/share/")||ke.startsWith("/shared/")){const Ne=ke.split("/").filter(Boolean);if(Ne[0]==="shared"&&Ne[1]==="therapist")return et("ðŸ”— SHARED THERAPIST URL:",ke),"shared-therapist-profile";if(Ne[0]==="share")return Ne.length>=3?(et("ðŸ”— SEO SHARE URL:",ke),"share-therapist"):Ne[1]==="therapist"?(et("ðŸ”— EXPLICIT THERAPIST SHARE URL"),"share-therapist"):Ne[1]==="place"?(et("ðŸ”— EXPLICIT PLACE SHARE URL"),"share-place"):Ne[1]==="facial"?(et("ðŸ”— EXPLICIT FACIAL SHARE URL"),"share-facial"):(et("ðŸ”— SHORT SHARE URL:",ke),"share-therapist")}if(ke.startsWith("/profile/therapist/"))return et("ðŸŽ¯ CUSTOMER THERAPIST PROFILE:",ke),"therapist-profile";if(ke.startsWith("/profile/place/"))return et("ðŸŽ¯ CUSTOMER PLACE PROFILE:",ke),"massage-place-profile";if(ke.startsWith("/therapist-profile/")){const Qa=(ke.split("/").filter(Boolean)[1]||"").split("-")[0];return Qa&&sessionStorage.setItem("pending_deeplink",JSON.stringify({provider:"therapist-".concat(Qa),targetPage:"shared-therapist-profile"})),"shared-therapist-profile"}const Ce=ke.match(/\/hotel\/([^/]+)\/menu/),lt=ke.match(/\/villa\/([^/]+)\/menu/);if(Ce||lt)return et("ðŸ¨ Hotel/Villa menu:",ke),"hotelVillaMenu";if(We.startsWith("#/")){const Ne=We.substring(1);if(et("ðŸ”— [INIT] Hash:",Ne),Ne==="/admin"||Ne.startsWith("/admin/"))return et("ðŸ”— [INIT] Admin hash:",Ne),Ne==="/admin"?"admin":Ne==="/admin/therapists"?"admin-therapists":Ne==="/admin/bookings"?"admin-bookings":Ne==="/admin/chat"?"admin-chat":Ne==="/admin/revenue"?"admin-revenue":Ne==="/admin/commissions"?"admin-commissions":"admin";if(Ne.startsWith("/dashboard/therapist")||Ne.startsWith("/therapist"))return et("ðŸ”— [INIT] Therapist hash:",Ne),Ne==="/therapist"||Ne==="/therapist-dashboard"||Ne==="/dashboard/therapist"?"therapist-dashboard":Ne==="/dashboard/therapist/status"||Ne==="/therapist/status"?"therapist-status":Ne==="/dashboard/therapist/bookings"||Ne==="/therapist/bookings"?"therapist-bookings":Ne==="/dashboard/therapist/earnings"||Ne==="/therapist/earnings"?"therapist-earnings":Ne==="/dashboard/therapist/chat"||Ne==="/therapist/chat"?"therapist-chat":Ne==="/dashboard/therapist/notifications"||Ne==="/therapist/notifications"?"therapist-notifications":Ne==="/dashboard/therapist/legal"||Ne==="/therapist/legal"?"therapist-legal":Ne==="/dashboard/therapist/calendar"||Ne==="/therapist/calendar"?"therapist-calendar":Ne==="/dashboard/therapist/payment"||Ne==="/therapist/payment"?"therapist-payment":Ne==="/dashboard/therapist/payment-status"||Ne==="/therapist/payment-status"?"therapist-payment-status":Ne==="/dashboard/therapist/menu"||Ne==="/therapist/menu"?"therapist-menu":Ne==="/dashboard/therapist/commission"||Ne==="/therapist/commission"?"therapist-commission":Ne==="/dashboard/therapist/schedule"||Ne==="/therapist/schedule"?"therapist-schedule":Ne==="/dashboard/therapist/package-terms"||Ne==="/therapist/package-terms"?"therapist-package-terms":"dashboard";if(Ne==="/home")return et("ðŸ”— [INIT] Home hash"),"home"}const Ge=sessionStorage.getItem("current_page"),Dt=performance.getEntriesByType("navigation")[0],pt=(Dt==null?void 0:Dt.type)==="reload"||(Dt==null?void 0:Dt.type)==="navigate",Kt=ke==="/"||ke==="";if(ke==="/home")return et("ðŸ  Direct /home"),"home";if(pt&&!le&&Kt)et("ðŸ”„ Fresh ROOT - clearing session"),sessionStorage.removeItem("has_entered_app"),sessionStorage.removeItem("current_page"),sessionStorage.removeItem("reviewParams");else{if(Ge&&typeof Ge=="string"&&Kt&&Ge!=="reviews")return et("â†©ï¸ Restoring session:",Ge),Ge;Ge==="reviews"&&Kt&&(et("ðŸš« Blocking reviews on root"),sessionStorage.removeItem("current_page"),sessionStorage.removeItem("reviewParams"))}return sessionStorage.getItem("has_entered_app")==="true"&&Kt?(et("ðŸšª Session entered â†’ home"),"home"):le==="company-profile"?(et("ðŸŽ¯ URL param: company-profile"),"company-profile"):le==="rewardBannersTest"||le==="reward-banners-test"?(et("ðŸŽ¯ URL param: rewardBannersTest"),"rewardBannersTest"):le==="hotelVillaMenu"?(et("ðŸŽ¯ URL param: hotelVillaMenu"),"hotelVillaMenu"):(et("ðŸšª Fresh arrival â†’ loading"),"loading")}catch{return"landing"}},[a,s]=o.useState(()=>Wt()),n=G=>{s(G)},[i,r]=o.useState(()=>t()),l=G=>{i==="mobile-terms-and-conditions"&&G!=="mobile-terms-and-conditions"&&!["landing","home","share-therapist"].includes(G)||i!==G&&(r(G),G!=="landing"?sessionStorage.setItem("current_page",G):sessionStorage.removeItem("current_page"))},[d,g]=o.useState(()=>Wt()),m=G=>{g(G)},[x,v]=o.useState(()=>{try{let G=window.localStorage.getItem("app_language"),le="localStorage";if((!G||G==="null"||G==="undefined")&&(G=window.sessionStorage.getItem("app_language"),le="sessionStorage"),!G||G==="null"||G==="undefined"){try{window.localStorage.setItem("app_language","id")}catch{window.sessionStorage.setItem("app_language","id")}return"id"}let ke=G==="gb"?"en":G;if(ke!=="en"&&ke!=="id"&&ke!=="gb"){ke="id";try{window.localStorage.setItem("app_language","id")}catch{window.sessionStorage.setItem("app_language","id")}}return ke}catch{return"id"}}),j=G=>{const le=G==="gb"?"en":G;v(le);try{window.localStorage.setItem("app_language",le)}catch{try{window.sessionStorage.setItem("app_language",le)}catch{}}},[I,p]=o.useState(()=>Wt()),R=G=>{p(G)},[w,P]=o.useState(()=>Wt("app_selected_massage_type","all")),D=G=>{P(G)},[L,O]=o.useState(()=>Wt("app_is_admin_logged_in",!1)),H=G=>{O(G)},[S,N]=o.useState(()=>Wt()),k=G=>{N(G)},[b,y]=o.useState(()=>Wt()),T=G=>{y(G)},[F,U]=o.useState(null),[B,f]=o.useState(!1),[A,c]=o.useState("booking"),[h,C]=o.useState(null),[M,E]=o.useState(null),[W,X]=o.useState(!1),[_,$]=o.useState(null),[q,J]=o.useState(null),[Z,me]=o.useState(null),[Fe,ve]=o.useState(!1),[re,Oe]=o.useState([]),Le=G=>{Oe(G),typeof window!="undefined"&&(window.__THERAPISTS_CACHE=G)},[De,ht]=o.useState([]),[St,Pt]=o.useState([]),[te,ie]=o.useState([]),[Ie,de]=o.useState([]),[He,Qe]=o.useState([]),[xt,ue]=o.useState([]),[we,_e]=o.useState([]),[Me,Ue]=o.useState(null),[Be,mt]=o.useState(()=>Wt()),Xe=G=>{mt(G)},[rt,ba]=o.useState(null),[ua,qe]=o.useState(null),[ta,Ut]=o.useState(()=>Wt()),Ta=G=>{Ut(G)},[aa,Ja]=o.useState(()=>Wt()),ms=G=>{Ja(G)},[us,Ft]=o.useState([]),[Tt,qa]=o.useState(()=>Wt("app_hotel_logged_in",!1)),oe=G=>{qa(G)},[fe,Ve]=o.useState(()=>Wt("app_villa_logged_in",!1)),Re=G=>{Ve(G)},st=()=>{try{const le=new URLSearchParams(window.location.search).get("venueId");if(le)return et("ðŸ·ï¸ Venue ID from query:",le),le;const ke=window.location.pathname,We=ke.match(/\/hotel\/([^/]+)\/menu/),Ce=ke.match(/\/villa\/([^/]+)\/menu/);return We?(et("ðŸ¨ Hotel ID:",We[1]),We[1]):Ce?(et("ðŸ¡ Villa ID:",Ce[1]),Ce[1]):""}catch{return""}},[ot,Et]=o.useState(st()),[ya,gs]=o.useState(""),[wa,Hs]=o.useState(!1),[V,ee]=o.useState(!1);return{user:a,setUser:n,page:i,setPage:l,selectedPlace:d,setSelectedPlace:m,language:x,setLanguage:j,userLocation:I,setUserLocation:R,selectedMassageType:w,setSelectedMassageType:D,isAdminLoggedIn:L,setIsAdminLoggedIn:H,loggedInUser:S,setLoggedInUser:k,loggedInCustomer:b,setLoggedInCustomer:T,loyaltyEvent:F,setLoyaltyEvent:U,showRegisterPrompt:B,setShowRegisterPrompt:f,registerPromptContext:A,setRegisterPromptContext:c,activeChatRoom:h,setActiveChatRoom:C,chatBooking:M,setChatBooking:E,isChatWindowVisible:W,setIsChatWindowVisible:X,pendingBookingId:_,setPendingBookingId:$,pendingBookingTherapistId:q,setPendingBookingTherapistId:J,pendingBookingDeadline:Z,setPendingBookingDeadline:me,isBookingLocked:Fe,setIsBookingLocked:ve,therapists:re,setTherapists:Le,places:De,setPlaces:ht,facialPlaces:St,setFacialPlaces:Pt,hotels:te,setHotels:ie,bookings:Ie,setBookings:de,notifications:He,setNotifications:Qe,allAdminTherapists:xt,setAllAdminTherapists:ue,allAdminPlaces:we,setAllAdminPlaces:_e,selectedTherapist:Me,setSelectedTherapist:Ue,loggedInProvider:Be,setLoggedInProvider:Xe,providerAuthInfo:rt,setProviderAuthInfo:ba,providerForBooking:ua,setProviderForBooking:qe,loggedInAgent:ta,setLoggedInAgent:Ta,impersonatedAgent:aa,setImpersonatedAgent:ms,adminMessages:us,setAdminMessages:Ft,isHotelLoggedIn:Tt,setIsHotelLoggedIn:oe,isVillaLoggedIn:fe,setIsVillaLoggedIn:Re,venueMenuId:ot,setVenueMenuId:Et,jobPostingId:ya,setJobPostingId:gs,isLoading:wa,setIsLoading:Hs,isFullScreen:V,setIsFullScreen:ee}};function fo(){const t=Math.round((4.7+Math.random()*.1)*10)/10,a=Math.floor(Math.random()*8)+28;return{rating:t,reviewCount:a}}function Eh(t,a,s){if(s<1||s>5)throw new Error("Rating must be between 1 and 5");const i=t*a+s,r=a+1;return{rating:Math.round(i/r*10)/10,reviewCount:r}}function Dh(t,a,s){if(a<=1)throw new Error("Cannot remove review from account with 1 or fewer reviews");if(s<1||s>5)throw new Error("Rating must be between 1 and 5");const i=t*a-s,r=a-1;return{rating:Math.round(i/r*10)/10,reviewCount:r}}let Sa=null;function xn(){return Sa||(typeof window!="undefined"&&window.__YOGYAKARTA_THERAPISTS__?(Sa=window.__YOGYAKARTA_THERAPISTS__,u.debug("âœ… Loaded ".concat((Sa==null?void 0:Sa.length)||0," Yogyakarta therapists from global context")),Sa||[]):(u.debug("âš ï¸ No Yogyakarta therapists loaded yet - returning empty array"),u.debug("ðŸ’¡ Therapists will be populated when updateYogyakartaTherapists() is called with fetched data"),[]))}function _h(t){const a=t.filter(s=>{const n=(s.location||"").toLowerCase();return n.includes("yogya")||n.includes("jogja")}).map(s=>({id:s.$id||s.id,name:s.name}));return Sa=a,typeof window!="undefined"&&(window.__YOGYAKARTA_THERAPISTS__=a),u.debug("âœ… Updated Yogyakarta therapists cache: ".concat(a.length," therapists")),a.forEach(s=>u.debug("   - ".concat(s.name," (").concat(s.id,")"))),a}const Lh=[{id:"review_surtiningsih_001",providerId:"693cfadf003d16b9896a",providerType:"therapist",userId:"user_james_mitchell",userName:"James Mitchell",rating:5,comment:"Absolutely phenomenal experience! Surtiningsih was incredibly professional and skilled. Had a 90-minute session at my hotel and it was exactly what I needed after long flights. Her technique for my leg injury was spot on - the pain is significantly reduced. Cannot recommend her more highly!",location:"Yogyakarta, Indonesia",createdAt:"2025-12-01T14:30:00.000Z",isVerified:!0,bookingId:"booking_001"},{id:"review_surtiningsih_002",providerId:"693cfadf003d16b9896a",providerType:"therapist",userId:"user_sari_dewi",userName:"Sari Dewi",rating:5,comment:"Terapis yang sangat profesional dan berpengalaman! Surtiningsih datang ke hotel saya dan memberikan pijat yang luar biasa. Tekniknya sangat baik, terutama untuk mengatasi nyeri punggung saya. Sangat direkomendasikan untuk siapa saja yang membutuhkan terapi pijat berkualitas tinggi.",location:"Yogyakarta, Indonesia",createdAt:"2025-12-05T16:45:00.000Z",isVerified:!0,bookingId:"booking_002"},{id:"review_surtiningsih_003",providerId:"693cfadf003d16b9896a",providerType:"therapist",userId:"user_michael_thompson",userName:"Michael Thompson",rating:4,comment:"Very professional therapist with excellent skills. Surtiningsih arrived on time at my hotel and provided a fantastic 60-minute deep tissue massage. Really helped with my shoulder tension from work stress. The only minor thing was she was about 10 minutes late, but the massage quality more than made up for it.",location:"Yogyakarta, Indonesia",createdAt:"2025-12-08T19:20:00.000Z",isVerified:!0,bookingId:"booking_003"},{id:"review_surtiningsih_004",providerId:"693cfadf003d16b9896a",providerType:"therapist",userId:"user_budi_santoso",userName:"Budi Santoso",rating:5,comment:"Pelayanan yang sangat memuaskan! Surtiningsih adalah terapis pijat yang benar-benar ahli. Saya memiliki masalah dengan lutut yang sakit dan setelah sesi pijat 120 menit, rasa sakitnya berkurang drastis. Tekniknya sangat tepat dan profesional. Pasti akan menggunakan jasanya lagi!",location:"Yogyakarta, Indonesia",createdAt:"2025-12-12T10:15:00.000Z",isVerified:!0,bookingId:"booking_004"},{id:"review_surtiningsih_005",providerId:"693cfadf003d16b9896a",providerType:"therapist",userId:"user_emma_rodriguez",userName:"Emma Rodriguez",rating:5,comment:"Outstanding massage therapist! Surtiningsih came to my villa and provided the most relaxing and therapeutic massage I've ever had. Her technique is exceptional and she really knows how to work out muscle knots. The 90-minute session was perfect after my hiking activities. Highly professional and friendly!",location:"Yogyakarta, Indonesia",createdAt:"2025-12-15T17:30:00.000Z",isVerified:!0,bookingId:"booking_005"},{id:"review_surtiningsih_006",providerId:"693cfadf003d16b9896a",providerType:"therapist",userId:"user_david_chen",userName:"David Chen",rating:4,comment:"Excellent professional massage service. Surtiningsih is very skilled and experienced. Had a 60-minute session at my hotel for my back pain and it helped tremendously. She was punctual, brought all her equipment, and created a very relaxing atmosphere. Would definitely book again when I return to Bali.",location:"Yogyakarta, Indonesia",createdAt:"2025-12-19T13:45:00.000Z",isVerified:!0,bookingId:"booking_006"}],Rh=[{id:"review_wiwid_001",providerId:"694ed78e002b0c06171e",providerType:"therapist",userId:"user_sophia_anderson",userName:"Sophia Anderson",rating:5,comment:"Excellent massage! Very professional.",location:"Yogyakarta, Indonesia",createdAt:"2025-12-02T10:00:00.000Z",isVerified:!0,bookingId:"booking_wiwid_001"},{id:"review_wiwid_002",providerId:"694ed78e002b0c06171e",providerType:"therapist",userId:"user_ahmad_rahman",userName:"Ahmad Rahman",rating:5,comment:"Pelayanan luar biasa! Wiwid sangat terampil dalam teknik pijat tradisional. Saya merasa jauh lebih baik setelah sesi 60 menit. Sangat direkomendasikan untuk relaksasi dan pemulihan otot.",location:"Yogyakarta, Indonesia",createdAt:"2025-12-06T14:20:00.000Z",isVerified:!0,bookingId:"booking_wiwid_002"},{id:"review_wiwid_003",providerId:"694ed78e002b0c06171e",providerType:"therapist",userId:"user_robert_taylor",userName:"Robert Taylor",rating:5,comment:"Outstanding service from Wiwid! I booked a 90-minute deep tissue massage at my hotel in Yogyakarta. He was punctual, professional, and really knew how to work out the knots in my shoulders from travel. The pressure was perfect and I felt incredibly relaxed afterwards. Highly recommend!",location:"Yogyakarta, Indonesia",createdAt:"2025-12-09T16:30:00.000Z",isVerified:!0,bookingId:"booking_wiwid_003"},{id:"review_wiwid_004",providerId:"694ed78e002b0c06171e",providerType:"therapist",userId:"user_maya_kusuma",userName:"Maya Kusuma",rating:4,comment:"Great technique and friendly service. Worth the booking!",location:"Yogyakarta, Indonesia",createdAt:"2025-12-13T11:15:00.000Z",isVerified:!0,bookingId:"booking_wiwid_004"},{id:"review_wiwid_005",providerId:"694ed78e002b0c06171e",providerType:"therapist",userId:"user_daniel_kim",userName:"Daniel Kim",rating:5,comment:"Incredible massage experience! Wiwid came to my villa and provided one of the best therapeutic massages I've had in Indonesia. Very skilled with traditional Indonesian techniques combined with sports massage. My back pain from hiking has completely disappeared. Professional, courteous, and excellent value.",location:"Yogyakarta, Indonesia",createdAt:"2025-12-16T09:45:00.000Z",isVerified:!0,bookingId:"booking_wiwid_005"},{id:"review_wiwid_006",providerId:"694ed78e002b0c06171e",providerType:"therapist",userId:"user_siti_rahayu",userName:"Siti Rahayu",rating:5,comment:"Sangat puas dengan layanan Wiwid! Teknik pijetnya sangat baik dan membantu mengurangi nyeri punggung saya. Datang tepat waktu dan sangat profesional. Pasti akan booking lagi.",location:"Yogyakarta, Indonesia",createdAt:"2025-12-20T15:00:00.000Z",isVerified:!0,bookingId:"booking_wiwid_006"},{id:"review_wiwid_007",providerId:"694ed78f9574395fd7b9",providerType:"therapist",userId:"user_jennifer_lopez",userName:"Jennifer Lopez",rating:5,comment:"Perfect session, exactly what I needed!",location:"Yogyakarta, Indonesia",createdAt:"2025-12-22T12:30:00.000Z",isVerified:!0,bookingId:"booking_wiwid_007"},{id:"review_wiwid_008",providerId:"694ed78f9574395fd7b9",providerType:"therapist",userId:"user_rudi_hartono",userName:"Rudi Hartono",rating:4,comment:"Terapis yang baik dengan teknik yang solid. Pijatan sangat membantu untuk relaksasi setelah perjalanan panjang. Recommended!",location:"Yogyakarta, Indonesia",createdAt:"2025-12-24T17:20:00.000Z",isVerified:!0,bookingId:"booking_wiwid_008"}];class bo{constructor(){Se(this,"reviews",[]);Se(this,"localStorageKey","massage_app_reviews");this.loadReviews(),this.initializeSurtiningsihReviews(),this.initializeWiwidReviews(),this.initializeYogyakartaTherapistReviews()}initializeYogyakartaTherapistReviews(){if(typeof window=="undefined"||typeof localStorage=="undefined")return;const a=xn(),s=["Sarah Mitchell","Budi Santoso","Emma Rodriguez","Ahmad Hidayat","David Chen","Sari Wulandari","Michael Johnson","Dewi Lestari","James Anderson","Rina Putri","Lisa Thompson","Agus Wijaya","Tom Wilson","Maya Kusuma","Anna Schmidt","Rudi Hartono"],n=[["Excellent massage! Very professional and punctual.","Amazing experience, highly recommend for back pain relief.","Great service, will definitely book again soon.","Fantastic technique and wonderful atmosphere throughout.","Professional from start to finish, helped with muscle tension."],["Very relaxing experience with skilled hands.","Outstanding therapist, knew exactly what I needed.","Perfect pressure and timing, felt rejuvenated after.","Incredible deep tissue work, my shoulders feel amazing.","Wonderful massage in comfortable setting, very satisfied."],["Best massage I've had in Indonesia! Truly exceptional.","Highly skilled with traditional techniques combined well.","Professional service, booking process was easy and smooth.","Great value for money, will use again for sure.","Exceeded expectations, therapist was friendly and expert."],["Remarkable experience! Pain relief was immediate and lasting.","Very knowledgeable about different massage techniques.","Convenient location service, came right to my hotel.","Attentive to my specific needs and problem areas.","Simply outstanding work, completely resolved my neck pain."]];let i=0;a.forEach((r,l)=>{if(this.reviews.filter(g=>g.providerId===r.id).length===0){const m=n[l%n.length].map((x,v)=>({id:"review_".concat(r.id,"_init_").concat(v),providerId:r.id,providerType:"therapist",userId:"user_init_".concat(r.id,"_").concat(v),userName:s[(l*3+v)%s.length],rating:Math.random()>.2?5:4,comment:x,location:"Yogyakarta, Indonesia",createdAt:new Date(Date.now()-v*864e5).toISOString(),isVerified:!1}));this.reviews.push(...m),i+=m.length}}),i>0&&this.saveReviews()}initializeSurtiningsihReviews(){if(typeof window=="undefined"||typeof localStorage=="undefined")return;const a="693cfadf003d16b9896a";this.reviews.filter(n=>n.providerId===a).length===0&&(this.reviews.push(...Lh),this.saveReviews())}initializeWiwidReviews(){if(typeof window=="undefined"||typeof localStorage=="undefined")return;const a="694ed78e002b0c06171e";this.reviews.filter(n=>n.providerId===a).length===0&&(this.reviews.push(...Rh),this.saveReviews())}loadReviews(){if(!(typeof window=="undefined"||typeof localStorage=="undefined"))try{const a=localStorage.getItem(this.localStorageKey);a&&(this.reviews=JSON.parse(a))}catch{this.reviews=[]}}saveReviews(){if(!(typeof window=="undefined"||typeof localStorage=="undefined"))try{localStorage.setItem(this.localStorageKey,JSON.stringify(this.reviews))}catch(a){if(a instanceof DOMException&&a.name==="QuotaExceededError"&&this.reviews.length>500){this.reviews.length-500,this.reviews=this.reviews.slice(-500);try{localStorage.setItem(this.localStorageKey,JSON.stringify(this.reviews))}catch{this.reviews=this.reviews.filter(i=>!i.userId.startsWith("auto_"));try{localStorage.setItem(this.localStorageKey,JSON.stringify(this.reviews))}catch{}}}}}initializeProvider(a){const s=a.reviewCount||a.reviewcount;if(!a.rating||a.rating===0||!s||s===0){const i=fo();return{...a,rating:i.rating,reviewCount:i.reviewCount,...a.reviewcount!==void 0&&{reviewcount:i.reviewCount}}}return a}addReview(a,s,n,i,r,l,d,g){if(r<1||r>5)throw new Error("Rating must be between 1 and 5");if(this.reviews.find(v=>v.providerId===a&&v.providerType===s&&v.userId===n))throw new Error("User has already reviewed this provider");const x={id:"review_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),providerId:a,providerType:s,userId:n,userName:i,rating:r,comment:l.trim(),location:d,createdAt:new Date().toISOString(),isVerified:!!g,bookingId:g};return this.reviews.push(x),this.saveReviews(),x}updateProviderRating(a,s){const n=Eh(a.rating,a.reviewCount,s);return{...a,rating:n.rating,reviewCount:n.reviewCount}}getProviderReviews(a,s){return this.reviews.filter(n=>n.providerId===a&&n.providerType===s).sort((n,i)=>new Date(i.createdAt).getTime()-new Date(n.createdAt).getTime())}getProviderReviewSummary(a,s){const n=this.getProviderReviews(a,s);if(n.length===0)return{averageRating:0,totalReviews:0,ratingDistribution:{5:0,4:0,3:0,2:0,1:0}};const i={5:0,4:0,3:0,2:0,1:0};let r=0;return n.forEach(l=>{r+=l.rating,i[l.rating]++}),{averageRating:Math.round(r/n.length*10)/10,totalReviews:n.length,ratingDistribution:i}}deleteReview(a){const s=this.reviews.findIndex(n=>n.id===a);return s===-1?!1:(this.reviews.splice(s,1),this.saveReviews(),!0)}updateProviderRatingAfterDeletion(a,s){try{const n=Dh(a.rating,a.reviewCount,s);return{...a,rating:n.rating,reviewCount:n.reviewCount}}catch{const n=fo();return{...a,rating:n.rating,reviewCount:n.reviewCount}}}getAllReviews(){return[...this.reviews].sort((a,s)=>new Date(s.createdAt).getTime()-new Date(a.createdAt).getTime())}getUserReviews(a){return this.reviews.filter(s=>s.userId===a).sort((s,n)=>new Date(n.createdAt).getTime()-new Date(s.createdAt).getTime())}canUserReview(a,s,n){return!this.reviews.some(i=>i.userId===a&&i.providerId===s&&i.providerType===n)}getRecentReviews(a=10){return[...this.reviews].sort((s,n)=>new Date(n.createdAt).getTime()-new Date(s.createdAt).getTime()).slice(0,a)}getReviewsForProvider(a,s,n){const i=this.reviews.filter(r=>r.providerId===a&&r.providerType===s).sort((r,l)=>new Date(l.createdAt).getTime()-new Date(r.createdAt).getTime());return n?i.slice(0,n):i}getYogyakartaReviews(a=5){const s=xn().map(i=>i.id);return this.reviews.filter(i=>s.includes(i.providerId.toString())&&i.providerType==="therapist").sort((i,r)=>new Date(r.createdAt).getTime()-new Date(i.createdAt).getTime()).slice(0,a)}}let Kn=null;const Is=(typeof window!="undefined"&&!Kn&&(Kn=new bo),Kn||new bo);async function Mh(t,a={}){const{timeout:s=1e4,retries:n=2,context:i="API call"}=a;try{const r=new Promise((d,g)=>{setTimeout(()=>{g(new Error("".concat(i," timed out after ").concat(s,"ms")))},s)});return await Promise.race([cc(t,i),r])}catch(r){return dc(r,i),null}}async function sn(t,a,s){const n=await Mh(t,{timeout:8e3,context:"".concat(a," collection query")});return n!=null?n:s}const Bh=()=>{const[t,a]=o.useState(!1),s=o.useCallback(async i=>{try{a(!0);const[r,l,d,g]=await Promise.all([sn(()=>Ye.getTherapists(),"therapists",[]),sn(()=>Xt.getPlaces(),"places",[]),sn(()=>ji.getAll(),"facial_places",[]),sn(()=>mc.getHotels(),"hotels",[])]),m=(r||[]).map(w=>Is.initializeProvider(w));let x=m;i&&i!=="all"&&(x=Ii(m,i)),x&&x.length>0&&_h(x);const v=(l||[]).map(w=>Is.initializeProvider(w));let j=v;i&&i!=="all"&&(j=Yr(v,i));const I=(d||[]).map(w=>Is.initializeProvider(w));let p=I;i&&i!=="all"&&(p=Yr(I,i));const R=(g||[]).map(w=>Is.initializeProvider(w));return{therapists:x,places:j,facialPlaces:p,hotels:R}}catch(r){return r instanceof Error&&r.message.includes("Collection with the requested ID could not be found"),{therapists:[],places:[],facialPlaces:[],hotels:[]}}finally{a(!1)}},[]),n=o.useCallback(async()=>{try{a(!0);const[i,r]=await Promise.all([Ye.getTherapists(),Xt.getPlaces()]);return{therapists:i||[],places:r||[]}}catch{return{therapists:[],places:[]}}finally{a(!1)}},[]);return{isLoading:t,fetchPublicData:s,fetchAdminData:n}},$h=({setPage:t,setSelectedPlace:a,setProviderAuthInfo:s,setProviderForBooking:n,setIsAdminLoggedIn:i,setLoggedInUser:r,loggedInProvider:l,loggedInCustomer:d,setLanguage:g,setUserLocation:m,setIsHotelLoggedIn:x,setIsVillaLoggedIn:v,setLoggedInProvider:j,setLoggedInAgent:I,setImpersonatedAgent:p,setLoggedInCustomer:R,setShowRegisterPrompt:w})=>{const P=o.useCallback(()=>{w(!1)},[w]),D=o.useCallback(()=>{w(!1),t("profile"),window.scrollTo({top:0,behavior:"smooth"})},[w,t]),L=o.useCallback(()=>{a(null),s(null),n(null),sessionStorage.removeItem("pending_deeplink"),sessionStorage.removeItem("direct_therapist_id"),l?l.type==="therapist"?t("therapistDashboard"):l.type==="place"?t("placeDashboard"):t("home"):t("home")},[a,s,n,t,l,d]),O=o.useCallback(()=>{(l==null?void 0:l.type)==="therapist"?t("therapistStatus"):(l==null?void 0:l.type)==="place"?t("placeDashboard"):t("home")},[l,t]),H=o.useCallback(()=>t("profile"),[t]),S=o.useCallback(()=>t("signIn"),[t]),N=o.useCallback(()=>t("massagePlaceLogin"),[t]),k=o.useCallback(()=>t("simpleSignup"),[t]),b=o.useCallback($=>{const q={therapist:"massage_therapist",place:"massage_place",facial:"facial_place"};localStorage.setItem("selectedPortalType",q[$]),t("simpleSignup")},[t]),y=o.useCallback(()=>{t("serviceTerms")},[t]),T=o.useCallback(()=>{t("privacy")},[t]),F=o.useCallback(()=>t("notifications"),[t]),U=o.useCallback(()=>{(l==null?void 0:l.type)==="therapist"?t("therapistDashboard"):t("therapistLogin")},[t,l]),B=o.useCallback(()=>{(l==null?void 0:l.type)==="place"?t("placeDashboard"):t("massagePlaceLogin")},[t,l]),f=o.useCallback(()=>{window.location.href="/signup?role=therapist"},[]),A=o.useCallback(()=>{window.location.href="/signup?role=massage_place"},[]),c=o.useCallback(()=>{window.location.href="/signup?role=facial_place"},[]),h=o.useCallback(()=>{alert("ðŸŽ¯ APP.TSX CALLBACK EXECUTING!"),t("therapistJobRegistration")},[t]),C=o.useCallback(($,q)=>{},[]),M=o.useCallback($=>{n({provider:$,type:"therapist"}),t("booking")},[n,t]),E=o.useCallback(async $=>{g($)},[g]),W=o.useCallback(async($,q)=>{try{sessionStorage.setItem("start_fresh","true"),sessionStorage.setItem("has_entered_app","true"),null||(i(!1),x(!1),v(!1),j(null),I(null),p(null),R(null)),g($),m(q),t("home")}catch{g($),m(q),localStorage.setItem("user_location",JSON.stringify(q)),sessionStorage.setItem("has_entered_app","true"),t("home")}},[i,x,v,j,I,p,R,g,m,t]),X=o.useCallback($=>{m($),localStorage.setItem("user_location",JSON.stringify($))},[m]),_=o.useCallback($=>{var q,J,Z,me;if(a($),$){const Fe=$.type,ve=$.facialTypes!==void 0,re=$.facialServices!==void 0;if(Fe==="facial"||Fe==="beauty"||ve||re){t("facial-place-profile");const Le=(J=(q=$.$id)!=null?q:$.id)!=null?J:"",De=($.name||"clinic").toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),ht="#/profile/facial/".concat(Le,"-").concat(De);typeof window!="undefined"&&(window.location.hash||"")!==ht&&window.history.pushState({page:"facial-place-profile"},"",ht)}else{t("massage-place-profile");const Le=(me=(Z=$.$id)!=null?Z:$.id)!=null?me:"",De=($.name||"place").toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),ht="#/profile/place/".concat(Le,"-").concat(De);typeof window!="undefined"&&(window.location.hash||"")!==ht&&window.history.pushState({page:"massage-place-profile"},"",ht)}}},[a,t]);return{handleBackToHome:L,handleBackToProviderDashboard:O,handleNavigateToAuth:H,handleNavigateToTherapistLogin:S,handleNavigateToMassagePlaceLogin:N,handleNavigateToRegistrationChoice:k,handleSelectRegistration:b,handleNavigateToServiceTerms:y,handleNavigateToPrivacyPolicy:T,handleNavigateToNotifications:F,handleNavigateToTherapistPortal:U,handleNavigateToMassagePlacePortal:B,handleNavigateToTherapistProfileCreation:h,handleNavigateToTherapistSignup:f,handleNavigateToMassagePlaceSignup:A,handleNavigateToFacialPlaceSignup:c,handleNavigateToBooking:C,handleNavigateToBookingPage:M,handleLanguageSelect:E,handleEnterApp:W,handleSetUserLocation:X,handleSetSelectedPlace:_,handleRegisterPromptClose:P,handleRegisterPromptRegister:D}};class Oh{constructor(){Se(this,"ws",null);Se(this,"appwriteUnsubscribe",null);Se(this,"reconnectAttempts",0);Se(this,"maxReconnectAttempts",10);Se(this,"baseReconnectDelay",1e3);Se(this,"maxReconnectDelay",3e4);Se(this,"heartbeatInterval",null);Se(this,"messageQueue",[]);Se(this,"subscribers",new Map);Se(this,"connectionState","disconnected");Se(this,"lastHeartbeat",0);Se(this,"userId");Se(this,"userType");Se(this,"eventSource",null);Se(this,"longPollingInterval",null)}async initialize(a,s){he.info("ðŸ”Œ [WEBSOCKET] Initializing connection for ".concat(s,": ").concat(a)),this.userId=a,this.userType=s,await this.connectWebSocket()}async connectWebSocket(){if(this.connectionState==="connected"||this.connectionState==="connecting"){he.info("ðŸ”Œ WebSocket already connected or connecting");return}this.connectionState="connecting";try{he.info("ðŸ”Œ [WEBSOCKET] Connecting via Appwrite realtime...");const{client:a}=await z(async()=>{const{client:g}=await import("./appwriteClient.DhdE2o8g.js");return{client:g}},__vite__mapDeps([56,1])),i="databases.".concat("68f76ee1000e64ca8d05",".collections.").concat("bookings",".documents");he.info("ðŸ”Œ [WEBSOCKET] Subscribing to channel: ".concat(i));const r=a.subscribe(i,g=>{(!this.connectionState||this.connectionState==="connecting")&&(he.info("âœ… [WEBSOCKET] Appwrite realtime connection established"),this.connectionState="connected",this.reconnectAttempts=0,this.startHeartbeat(),this.processMessageQueue()),this.handleAppwriteMessage(g)});this.appwriteUnsubscribe=r;const l=setTimeout(()=>{this.connectionState==="connecting"&&(he.warn("âš ï¸ [WEBSOCKET] Appwrite connection timeout - this may be normal in some environments"),he.info("ðŸ”„ [WEBSOCKET] Using connection without explicit confirmation"))},15e3),d=r;this.appwriteUnsubscribe=()=>{clearTimeout(l),d()}}catch(a){he.error("âŒ [WEBSOCKET] Connection failed: ".concat(a.message)),this.connectionState="error",a.message&&!a.message.includes("subscribe")?this.scheduleReconnect():(he.warn("ðŸ”§ [WEBSOCKET] Configuration issue detected - skipping reconnection"),setTimeout(()=>{this.connectionState==="error"&&(he.info("ðŸ”„ [WEBSOCKET] Retrying connection after configuration delay"),this.scheduleReconnect())},3e4))}}handleAppwriteMessage(a){try{const{events:s,payload:n}=a;let i="SYSTEM_ALERT";s.some(l=>l.includes(".create"))?i="NEW_BOOKING":s.some(l=>l.includes(".update"))&&(i="BOOKING_UPDATE");const r={type:i,payload:n,timestamp:Date.now(),messageId:"appwrite-".concat(Date.now(),"-").concat(Math.random()),priority:"normal"};this.handleMessage(r)}catch(s){he.error("âŒ [WEBSOCKET] Error processing Appwrite message:",s)}}fallbackToSSE(){if(this.eventSource)return;he.info("ðŸ”„ [FALLBACK] Switching to Server-Sent Events");const a="/api/sse/bookings?userId=".concat(this.userId,"&userType=").concat(this.userType);this.eventSource=new EventSource(a),this.eventSource.onopen=()=>{he.info("âœ… [SSE] Connection established"),this.connectionState="connected",this.processMessageQueue()},this.eventSource.onmessage=s=>{this.handleMessage(JSON.parse(s.data))},this.eventSource.onerror=()=>{var s;he.warn("ðŸ”„ [SSE] Connection lost, falling back to long polling"),(s=this.eventSource)==null||s.close(),this.eventSource=null,this.fallbackToLongPolling()}}fallbackToLongPolling(){if(this.longPollingInterval)return;he.info("ðŸ”„ [FALLBACK] Using long polling");const a=async()=>{try{const s=await fetch("/api/poll/bookings?userId=".concat(this.userId,"&userType=").concat(this.userType,"&lastMessage=").concat(this.lastHeartbeat));s.ok&&((await s.json()).forEach(i=>this.handleMessage(i)),this.connectionState="connected")}catch(s){he.warn("âš ï¸ [LONG_POLL] Poll failed:",s),this.connectionState="error"}};this.longPollingInterval=setInterval(a,5e3),a()}handleMessage(a){switch(he.info("ðŸ“¨ [WEBSOCKET] Message received:",a),this.lastHeartbeat=Date.now(),a.type){case"NEW_BOOKING":this.handleNewBooking(a.payload);break;case"BOOKING_UPDATE":this.handleBookingUpdate(a.payload);break;case"SCHEDULED_REMINDER":this.handleScheduledReminder(a.payload);break;case"SYSTEM_ALERT":this.handleSystemAlert(a.payload);break;case"HEARTBEAT":break;default:he.info("ðŸ“¨ [WEBSOCKET] Unknown message type: ".concat(a.type))}const s=this.subscribers.get(a.type),n=this.subscribers.get("*");s==null||s.forEach(i=>i(a)),n==null||n.forEach(i=>i(a))}async handleNewBooking(a){if(he.info("ðŸ†• [NEW_BOOKING] Processing new booking:",a),this.userType==="therapist"){try{const s=new Audio(a.urgency==="urgent"?"/sounds/urgent-booking.mp3":"/sounds/new-booking.mp3");s.volume=.8,s.play().catch(n=>he.warn("Audio play failed:",n))}catch(s){he.warn("âš ï¸ [NEW_BOOKING] Audio notification failed:",s)}Notification.permission==="granted"&&new Notification("New Booking Request!",{body:"New ".concat(a.urgency==="urgent"?"URGENT ":"","booking request received"),icon:"/icons/booking-notification.png",badge:"/icons/notification-badge.png",tag:"booking-".concat(a.bookingId),requireInteraction:!0}),window.dispatchEvent(new CustomEvent("booking-window-update",{detail:{type:"new_booking",payload:a}}))}}async handleBookingUpdate(a){he.info("ðŸ”„ [BOOKING_UPDATE] Processing update:",a);try{if(a.status==="accepted"){const s=new Audio("/sounds/booking-accepted.mp3");s.volume=.7,s.play().catch(n=>he.warn("Audio play failed:",n))}else if(a.status==="cancelled"){const s=new Audio("/sounds/booking-cancelled.mp3");s.volume=.7,s.play().catch(n=>he.warn("Audio play failed:",n))}}catch(s){he.warn("âš ï¸ [BOOKING_UPDATE] Audio notification failed:",s)}window.dispatchEvent(new CustomEvent("booking-window-update",{detail:{type:"booking_update",payload:a}}))}async handleScheduledReminder(a){he.info("â° [REMINDER] Processing scheduled reminder:",a);const s={therapist_5h:"5 hours until your booking",therapist_4h:"4 hours until your booking",therapist_3h:"3 hours until your booking",therapist_2h:"2 hours until your booking - Please prepare!",therapist_1h:"1 hour until your booking - Get ready!",customer_3h:"3 hours until your massage appointment"},n=["therapist_2h","therapist_1h"].includes(a.reminderType);try{const i=new Audio(n?"/sounds/urgent-reminder.mp3":"/sounds/reminder.mp3");i.volume=.7,i.play().catch(r=>he.warn("Audio play failed:",r))}catch(i){he.warn("âš ï¸ [REMINDER] Audio notification failed:",i)}Notification.permission==="granted"&&new Notification("Booking Reminder",{body:"".concat(s[a.reminderType],"\n").concat(a.bookingDetails.customerName," - ").concat(a.bookingDetails.location),icon:"/icons/reminder-notification.png",badge:"/icons/notification-badge.png",tag:"reminder-".concat(a.bookingId,"-").concat(a.reminderType),requireInteraction:n}),a.reminderType==="customer_3h"&&window.dispatchEvent(new CustomEvent("show-app-download-prompt",{detail:{bookingId:a.bookingId}}))}async handleSystemAlert(a){he.info("ðŸš¨ [SYSTEM_ALERT] Processing alert:",a);try{const s=new Audio("/sounds/system-alert.mp3");s.volume=.8,s.play().catch(n=>he.warn("Audio play failed:",n))}catch(s){he.warn("âš ï¸ [SYSTEM_ALERT] Audio notification failed:",s)}Notification.permission==="granted"&&new Notification("System Alert",{body:a.message,icon:"/icons/system-alert.png",badge:"/icons/notification-badge.png",tag:"system-".concat(Date.now()),requireInteraction:!0})}subscribe(a,s){return this.subscribers.has(a)||this.subscribers.set(a,new Set),this.subscribers.get(a).add(s),()=>{var n;(n=this.subscribers.get(a))==null||n.delete(s)}}send(a){var n;const s={...a,timestamp:Date.now(),messageId:"msg_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))};((n=this.ws)==null?void 0:n.readyState)===WebSocket.OPEN?(this.ws.send(JSON.stringify(s)),he.info("ðŸ“¤ [WEBSOCKET] Message sent:",s)):(this.messageQueue.push(s),he.info("ðŸ“¤ [WEBSOCKET] Message queued (connection not ready):",s))}startHeartbeat(){this.stopHeartbeat(),this.heartbeatInterval=setInterval(()=>{var a;((a=this.ws)==null?void 0:a.readyState)===WebSocket.OPEN&&this.send({type:"HEARTBEAT",payload:{timestamp:Date.now()},priority:"low"})},3e4)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}processMessageQueue(){var a;for(he.info("ðŸ“¤ [WEBSOCKET] Processing ".concat(this.messageQueue.length," queued messages"));this.messageQueue.length>0&&((a=this.ws)==null?void 0:a.readyState)===WebSocket.OPEN;){const s=this.messageQueue.shift();this.ws.send(JSON.stringify(s))}}scheduleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){he.error("âŒ [WEBSOCKET] Max reconnection attempts reached"),this.fallbackToSSE();return}const a=Math.min(this.baseReconnectDelay*Math.pow(2,this.reconnectAttempts),this.maxReconnectDelay);he.info("ðŸ”„ [WEBSOCKET] Reconnecting in ".concat(a,"ms (attempt ").concat(this.reconnectAttempts+1,"/").concat(this.maxReconnectAttempts,")")),setTimeout(()=>{this.reconnectAttempts++,this.connectWebSocket()},a)}getConnectionState(){return this.connectionState}disconnect(){he.info("ðŸ”Œ [WEBSOCKET] Disconnecting..."),this.connectionState="disconnected",this.stopHeartbeat(),this.ws&&(this.ws.close(1e3,"Client disconnect"),this.ws=null),this.appwriteUnsubscribe&&(this.appwriteUnsubscribe(),this.appwriteUnsubscribe=null),this.eventSource&&(this.eventSource.close(),this.eventSource=null),this.longPollingInterval&&(clearInterval(this.longPollingInterval),this.longPollingInterval=null),this.subscribers.clear(),this.messageQueue.length=0}}const Uh=new Oh,Fh=t=>{t.setIsHotelLoggedIn&&t.setIsHotelLoggedIn(!1),t.setIsVillaLoggedIn&&t.setIsVillaLoggedIn(!1),t.setIsAdminLoggedIn&&t.setIsAdminLoggedIn(!1),t.setLoggedInUser&&t.setLoggedInUser(null),t.setLoggedInProvider&&t.setLoggedInProvider(null),t.setLoggedInAgent&&t.setLoggedInAgent(null),t.setLoggedInCustomer&&t.setLoggedInCustomer(null),t.setImpersonatedAgent&&t.setImpersonatedAgent(null),sessionStorage.removeItem("logged_in_provider"),sessionStorage.removeItem("has_entered_app"),sessionStorage.removeItem("current_page")},Jn=async(t,a,s)=>{try{try{Uh.disconnect()}catch{}Fh(a),await t(),s("home")}catch{s("home")}},Hh=({setPage:t,setIsAdminLoggedIn:a,setIsHotelLoggedIn:s,setIsVillaLoggedIn:n,setLoggedInUser:i,setUser:r,setLoggedInCustomer:l,setLoggedInAgent:d,setLoggedInProvider:g,setImpersonatedAgent:m,getLoggedInProvider:x})=>{const v=o.useCallback(async()=>{var H,S,N;const O=(H=x==null?void 0:x())!=null?H:null;if((O==null?void 0:O.type)==="therapist"){const k=(N=(S=O.$id)!=null?S:O.id)==null?void 0:N.toString();if(k)try{await Ye.update(k,{status:"busy",availability:"Busy",isLive:!0,isOnline:!1})}catch{}}await Jn(Ua,{setIsHotelLoggedIn:s,setIsVillaLoggedIn:n,setIsAdminLoggedIn:a,setLoggedInUser:i,setLoggedInProvider:g,setLoggedInAgent:d,setLoggedInCustomer:l,setImpersonatedAgent:m},t)},[x,g,s,n,a,i,t]),j=o.useCallback(async()=>{await Jn(Ua,{setIsHotelLoggedIn:s,setIsVillaLoggedIn:n,setIsAdminLoggedIn:a,setLoggedInUser:i,setLoggedInProvider:g,setLoggedInAgent:d,setLoggedInCustomer:l,setImpersonatedAgent:m},t)},[s,n,a,i,g,t]),I=o.useCallback(async()=>{await Jn(Ua,{setIsVillaLoggedIn:n,setIsHotelLoggedIn:s,setIsAdminLoggedIn:a,setLoggedInUser:i,setLoggedInProvider:g,setLoggedInAgent:d,setLoggedInCustomer:l,setImpersonatedAgent:m},t)},[n,s,a,i,g,t]),p=o.useCallback(async()=>{await Ua(),a(!1),i(null),m&&m(null),t("home")},[a,i,m,t]),R=o.useCallback(async()=>{await Ua(),l(null),t("home")},[l,t]),w=o.useCallback(async()=>{await Ua(),d(null),t("home")},[d,t]),P=o.useCallback(()=>{s(!1),n(!1),g(null),d(null),l(null),i({id:"admin-user",type:"admin",email:"",name:"Admin User"}),r({id:"admin-user",type:"admin",email:"",name:"Admin User"}),a(!0),t("adminDashboard")},[a,s,n,g,d,l,i,r,t]),D=o.useCallback(O=>{s(!0),n(!1),a(!1),g(null),d(null),l(null),i({id:O||"hotel-user",type:"hotel",email:"",name:"Hotel User"}),r({id:O||"hotel-user",type:"hotel",email:"",name:"Hotel User"})},[s,n,a,g,d,l,i,r]),L=o.useCallback(O=>{n(!0),s(!1),a(!1),g(null),d(null),l(null),i({id:O||"villa-user",type:"villa",email:"",name:"Villa User"}),r({id:O||"villa-user",type:"villa",email:"",name:"Villa User"})},[n,s,a,g,d,l,i,r]);return{handleProviderLogout:v,handleHotelLogout:j,handleVillaLogout:I,handleAdminLogout:p,handleCustomerLogout:R,handleAgentLogout:w,handleAdminLogin:P,handleHotelLogin:D,handleVillaLogin:L}},Vh=t=>["en","id"].includes(t)?t:"en",Wh=({language:t,user:a,loggedInCustomer:s,isHotelLoggedIn:n,isVillaLoggedIn:i,providerForBooking:r,bookings:l,setBookings:d,setActiveChatRoom:g,setChatBooking:m,setIsChatWindowVisible:x,setPage:v,setLoyaltyEvent:j,setShowRegisterPrompt:I,setRegisterPromptContext:p,t:R})=>({handleCreateBooking:async L=>{const O=(s==null?void 0:s.$id)||(a==null?void 0:a.id)||(n?"hotel-user":i?"villa-user":"guest"),H=(s==null?void 0:s.name)||(a==null?void 0:a.name)||(n?"Hotel Guest":i?"Villa Guest":"Guest"),S={...L,id:Date.now(),status:Fa.Pending,userId:O,userName:H};d(N=>[...N,S]),z(async()=>{const{bookingService:N}=await import("./route-therapist.DVVqC6AH.js").then(k=>k.bx);return{bookingService:N}},__vite__mapDeps([0,1,2,3,4,5,6])).then(({bookingService:N})=>N.create({providerId:S.providerId.toString(),providerType:S.providerType,providerName:S.providerName,userId:S.userId,userName:S.userName,service:S.service,startTime:new Date(S.startTime).toISOString(),duration:parseInt(S.service),totalCost:0,paymentMethod:"Unpaid"})).catch(N=>{});try{const{createChatRoom:N,sendSystemMessage:k}=await z(async()=>{const{createChatRoom:C,sendSystemMessage:M}=await import("./route-therapist.DVVqC6AH.js").then(E=>E.bC);return{createChatRoom:C,sendSystemMessage:M}},__vite__mapDeps([0,1,2,3,4,5,6])),{playBookingNotificationSequence:b}=await z(async()=>{const{playBookingNotificationSequence:C}=await import("./soundService.Dix6Srt1.js");return{playBookingNotificationSequence:C}},[]),y=r==null?void 0:r.provider,T=(r==null?void 0:r.type)||"therapist";if(!y){alert(R.bookingPage.bookingSuccessTitle+"\n"+R.bookingPage.bookingSuccessMessage.replace("{name}",S.providerName)),v("home");return}const F=new Date(Date.now()+600*1e3).toISOString(),U=await N({bookingId:S.id,customerId:O,customerName:H,customerLanguage:Vh(t),customerPhoto:(s==null?void 0:s.profilePhoto)||"",therapistId:y.id,therapistName:y.name,therapistLanguage:y.languages||"en",therapistType:T,therapistPhoto:y.profilePicture||y.mainImage||"",expiresAt:F}),B={en:"âœ“ Booking request sent to ".concat(y.name,"! \nðŸ’¬ Chat in your preferred language - messages will be automatically translated.\nðŸ“± Provider notified via WhatsApp and chat.\nâ° Provider has 10 minutes to respond.\nðŸ”” If no response, we'll find the next available therapist nearby."),id:"âœ“ Permintaan booking terkirim ke ".concat(y.name,"! \nðŸ’¬ Chat dalam bahasa pilihan Anda - pesan akan diterjemahkan otomatis.\nðŸ“± Provider telah diberitahu via WhatsApp dan chat.\nâ° Provider punya 10 menit untuk merespon.\nðŸ”” Jika tidak ada respon, kami akan cari terapis tersedia terdekat.")};await k(U.$id,B,y.id,O),await b(),g(U),m(S),x(!0),v("home"),Ho(S.id.toString());const{startBookingCountdown:f}=await z(async()=>{const{startBookingCountdown:C}=await import("./countdownTimerService.Ch0S6pbi.js");return{startBookingCountdown:C}},[]),{getCustomerLocation:A,findNearbyTherapists:c,findNearbyPlaces:h}=await z(async()=>{const{getCustomerLocation:C,findNearbyTherapists:M,findNearbyPlaces:E}=await Promise.resolve().then(()=>lm);return{getCustomerLocation:C,findNearbyTherapists:M,findNearbyPlaces:E}},void 0);f(S.id.toString(),10,C=>{},async()=>{try{if(Ha(S.id.toString()),T==="therapist")try{const{applyNonResponsePenalty:E}=await z(async()=>{const{applyNonResponsePenalty:X}=await import("./therapistPenaltyService.BlXOaBnQ.js");return{applyNonResponsePenalty:X}},[]);await E(y.id,S.id,H);const W={en:"âš ï¸ **SYSTEM NOTICE** âš ï¸\n                                    \nðŸš¨ ".concat(y.name," has been automatically penalized for not responding within 10 minutes:\nâ€¢ â­ 1-star review added to their profile\nâ€¢ ðŸª™ 200 coins deducted from their account\nâ€¢ ðŸ“¢ Warning issued to maintain service standards\n\nðŸ”„ Now finding alternative therapists for you..."),id:"âš ï¸ **PEMBERITAHUAN SISTEM** âš ï¸\n                                    \nðŸš¨ ".concat(y.name," telah dikenai penalti otomatis karena tidak merespon dalam 10 menit:\nâ€¢ â­ Review 1 bintang ditambahkan ke profil mereka\nâ€¢ ðŸª™ 200 koin dikurangi dari akun mereka  \nâ€¢ ðŸ“¢ Peringatan diberikan untuk menjaga standar layanan\n\nðŸ”„ Sekarang mencari terapis alternatif untuk Anda...")};await k(U.$id,W)}catch{}const C=await A();let M=[];if(T==="therapist"?M=await c(y.id,C,15):M=await h(y.id,C,15),M.length>0){const E={en:"â° ".concat(y.name," did not respond in 10 minutes.\nðŸ”„ We have found ").concat(M.length," nearby providers.\nðŸ“± Sending booking request to all nearby providers...\nðŸŽ¯ First to accept will be your therapist!\nâš¡ This ensures faster service for you.\n\nâ„¹ï¸ Previous therapist may be in transit or mobile phone not available.\nðŸ™ We apologize and have selected the best suited therapists nearby.\nðŸ‘¨â€ðŸ’¼ - Admin Team IndoStreet"),id:"â° ".concat(y.name," tidak merespon dalam 10 menit.\nðŸ”„ Kami telah menemukan ").concat(M.length," provider terdekat.\nðŸ“± Mengirim permintaan booking ke semua provider terdekat...\nðŸŽ¯ Yang pertama menerima akan menjadi terapis Anda!\nâš¡ Ini memastikan layanan lebih cepat untuk Anda.\n\nâ„¹ï¸ Terapis sebelumnya mungkin sedang dalam perjalanan atau HP tidak tersedia.\nðŸ™ Kami mohon maaf dan telah memilih terapis terbaik terdekat.\nðŸ‘¨â€ðŸ’¼ - Tim Admin IndoStreet")};await k(U.$id,E);for(const W of M);}else{const E={en:"â° ".concat(y.name," did not respond in 10 minutes.\nðŸ” Unfortunately, no nearby providers found within 15km.\nðŸ“ž Please try calling ").concat(y.name," directly: ").concat(y.whatsappNumber||"Number not available","\nðŸ™ We apologize for the inconvenience.\nðŸ‘¨â€ðŸ’¼ - Admin Team IndoStreet"),id:"â° ".concat(y.name," tidak merespon dalam 10 menit.\nðŸ” Sayangnya, tidak ada provider terdekat dalam radius 15km.\nðŸ“ž Silakan coba hubungi ").concat(y.name," langsung: ").concat(y.whatsappNumber||"Nomor tidak tersedia","\nðŸ™ Kami mohon maaf atas ketidaknyamanan ini.\nðŸ‘¨â€ðŸ’¼ - Tim Admin IndoStreet")};await k(U.$id,E)}}catch{const M={en:"â° ".concat(y.name," did not respond in 10 minutes.\nâŒ Error finding nearby providers. Please try again or contact support.\nðŸ‘¨â€ðŸ’¼ - Admin Team IndoStreet"),id:"â° ".concat(y.name," tidak merespon dalam 10 menit.\nâŒ Error mencari provider terdekat. Silakan coba lagi atau hubungi support.\nðŸ‘¨â€ðŸ’¼ - Tim Admin IndoStreet")};await k(U.$id,M)}}),setTimeout(async()=>{S.status,Fa.Pending},3e5)}catch{alert(R.bookingPage.bookingSuccessTitle+"\n"+R.bookingPage.bookingSuccessMessage.replace("{name}",S.providerName)),v("home")}},handleUpdateBookingStatus:async(L,O)=>{const H=l.find(S=>S.id===L);if(d(S=>S.map(N=>N.id===L?{...N,status:O}:N)),O===Fa.Confirmed||O===Fa.OnTheWay)try{Ha(L.toString());const{stopBookingCountdown:S}=await z(async()=>{const{stopBookingCountdown:N}=await import("./countdownTimerService.Ch0S6pbi.js");return{stopBookingCountdown:N}},[]);S(L.toString())}catch{}if(O===Fa.Completed&&H&&s)try{const{awardCoins:S}=await z(async()=>{const{awardCoins:k}=await import("./loyaltyService.CRrgZYbG.js");return{awardCoins:k}},__vite__mapDeps([109,0,1,2,3,4,5,6])),N=await S(s.$id||s.userId,H.providerId,H.providerType,H.providerName,H.id);j(N)}catch{}},handleShowRegisterPromptForChat:()=>{p("chat"),I(!0)}}),pa=(t,a="success")=>{const s=document.getElementById("overlay-root"),n=s||document.body;if(!n)return;const i=a==="success"?"bg-green-500":a==="error"?"bg-red-500":"bg-orange-500",r=a==="success"?"âœ“":a==="error"?"âš ï¸":"âš ",l=document.createElement("div");l.className="pointer-events-auto mb-3 ml-auto ".concat(i," text-white px-5 py-3 rounded-lg shadow-lg w-fit animate-fade-in"),l.innerHTML="<strong>".concat(r,"</strong> ").concat(t),l.style.opacity="1",n===s&&!s.style.position&&(s.style.position="fixed",s.style.top="0",s.style.right="0",s.style.zIndex="9999",s.style.padding="1rem",s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="flex-end",s.style.pointerEvents="none");try{n.appendChild(l),setTimeout(()=>{l.style.transition="opacity 0.3s",l.style.opacity="0",setTimeout(()=>{l&&l.parentNode===n&&n.removeChild(l)},320)},4e3)}catch(d){u.warn("Toast notification failed to append:",d)}},zh=({loggedInProvider:t,loggedInAgent:a,impersonatedAgent:s,therapists:n,places:i,setLoggedInAgent:r,setImpersonatedAgent:l,setAdminMessages:d,setPage:g,setTherapists:m,setPlaces:x,refreshData:v})=>({handleTherapistStatusChange:async S=>{if(u.debug("ðŸš€ DEBUG: Therapist status change start",{status:S,statusType:typeof S}),u.debug("Provider validation:",{exists:!!t,type:t==null?void 0:t.type,id:t==null?void 0:t.id,$id:t==null?void 0:t.$id}),!t||t.type!=="therapist")throw u.error("âŒ Validation failed: No logged in therapist provider",t),new Error("No logged in therapist provider");let N="";try{u.debug("Starting therapist status update",{status:S,provider:t});const k=t;u.debug("ID resolution debug:",{"providerData.id":k.id,"providerData.$id":k.$id,"providerData.therapistId":k.therapistId});let b="";k.$id?(b=k.$id,u.debug("Using Appwrite document ID ($id):",b)):k.therapistId?(b=k.therapistId,u.debug("Using therapistId field:",b)):(b=typeof t.id=="string"?t.id:t.id.toString(),u.debug("Using fallback id:",b)),u.debug("Final document ID for update:",b);try{u.debug("Fetching existing therapist data for validation...");const f=await Ye.getById(b);f&&u.debug("Found existing therapist:",{name:f.name,currentStatus:f.status,currentAvailability:f.availability})}catch(f){throw u.error("Could not fetch existing therapist:",f),new Error("Therapist profile not found with ID: ".concat(b,". ").concat(f instanceof Error?f.message:"Unknown error"))}u.debug("Attempting status update...",{documentId:b,status:S,statusType:typeof S});const y=S.toLowerCase(),T=S.charAt(0).toUpperCase()+S.slice(1).toLowerCase(),F={status:y,availability:T,isOnline:S!=="Offline"};u.debug("Update object:",F);const U=await Ye.update(b,F);u.debug("Therapist status update success",{$id:U==null?void 0:U.$id,status:U==null?void 0:U.status,availability:U==null?void 0:U.availability});const B=n.map(f=>{var C;const A=typeof f.id=="string"?f.id:(C=f.id)==null?void 0:C.toString(),c=f.$id,h=A===b||c===b;return h&&u.debug("Updating local state for therapist:",{name:f.name,from:f.status,to:S}),h?{...f,status:S}:f});u.debug("Local therapists state updated, count:",B.length),m(B)}catch(k){u.error("Therapist status update failed:",{error:k,errorType:typeof k,message:k instanceof Error?k.message:"Unknown error",stack:k instanceof Error?k.stack:"No stack",documentId:N,status:S,provider:t});let b="Failed to update status. Please try again.";throw k instanceof Error&&(k.message.includes("Collection ID might be invalid")?b="Database configuration error. Please check collection ID.":k.message.includes("Document not found")?b="Therapist profile not found. Please refresh and try again.":k.message.includes("permission")?b="Permission denied. Please check your account access.":b="Update failed: ".concat(k.message)),new Error(b)}},handleSaveTherapist:async S=>{var N,k;if(t)try{const b=typeof t.id=="string"?t.id:t.id.toString(),y=S.profilePicture||"";u.debug("Saving therapist profile",{profilePictureLength:y.length}),y.length>512&&(pa("Profile picture URL is too long. Saving other data without profile picture.","warning"),S.profilePicture="");let T=null;try{T=await Ye.getById(b),u.debug("Found existing therapist profile:",T)}catch{u.debug("No existing profile found, will create new one")}const F=(c,h,C="[]")=>{const M=typeof c=="string"?c:JSON.stringify(c);return M.length>255?(u.warn("".concat(h," string too long (").concat(M.length," chars), using fallback")),C):M};let U=typeof S.pricing=="string"?S.pricing:JSON.stringify(S.pricing);if(U.length>255){u.warn("Therapist pricing string too long, creating compact version");try{const c=JSON.parse(U),h={60:c[60]||c[60]||0,90:c[90]||c[90]||0,120:c[120]||c[120]||0};U=JSON.stringify(h),u.debug("Created compact therapist pricing:",U)}catch{u.error("Failed to create compact pricing, using default"),U='{"60":0,"90":0,"120":0}'}}const B={id:b,name:S.name,description:S.description,whatsappNumber:S.whatsappNumber,profilePicture:y,mainImage:S.mainImage||(T==null?void 0:T.mainImage)||"",yearsOfExperience:S.yearsOfExperience||0,massageTypes:F(S.massageTypes,"massageTypes","[]"),languages:F(S.languages||[],"languages","[]"),pricing:U,price60:(()=>{try{const c=JSON.parse(U);return String(c[60]||c[60]||100)}catch{return"100"}})(),price90:(()=>{try{const c=JSON.parse(U);return String(c[90]||c[90]||150)}catch{return"150"}})(),price120:(()=>{try{const c=JSON.parse(U);return String(c[120]||c[120]||200)}catch{return"200"}})(),location:S.location,coordinates:F(S.coordinates,"coordinates",'{"lat":0,"lng":0}'),status:"available",rating:(T==null?void 0:T.rating)||0,isLicensed:S.isLicensed||!1,analytics:F(S.analytics,"analytics",'{"impressions":0,"views":0,"profileViews":0,"whatsappClicks":0}'),hotelId:(T==null?void 0:T.hotelId)||"",hotelDiscount:(T==null?void 0:T.hotelDiscount)||0,specialization:(()=>{try{const c=JSON.parse(F(S.massageTypes,"massageTypes","[]"));return c.length>0?c[0]:"General Massage"}catch{return"General Massage"}})(),availability:"Available",hourlyRate:(()=>{try{const c=JSON.parse(U),h=c[60]||c[60]||100;return Math.max(50,Math.min(500,h))}catch{return 100}})(),therapistId:b,email:(T==null?void 0:T.email)||"therapist".concat(b,"@indostreet.com"),password:(T==null?void 0:T.password)||"",isLive:!0,isOnline:!0,activeMembershipDate:(T==null?void 0:T.activeMembershipDate)||new Date().toISOString().split("T")[0],discountPercentage:S.discountPercentage!==void 0?S.discountPercentage:(T==null?void 0:T.discountPercentage)||0,discountDuration:S.discountDuration!==void 0?S.discountDuration:(T==null?void 0:T.discountDuration)||0,discountEndTime:S.discountEndTime||(T==null?void 0:T.discountEndTime)||null,isDiscountActive:S.isDiscountActive!==void 0?S.isDiscountActive:(T==null?void 0:T.isDiscountActive)||!1};if(u.debug("Saving therapist data:",{name:B.name,profilePicturePreview:(N=B.profilePicture)==null?void 0:N.substring(0,50),mainImagePreview:(k=B.mainImage)==null?void 0:k.substring(0,50),location:B.location}),u.debug("Discount field mapping:",{input:{discountPercentage:S.discountPercentage,discountDuration:S.discountDuration,discountEndTime:S.discountEndTime,isDiscountActive:S.isDiscountActive},mapped:{discountPercentage:B.discountPercentage,discountDuration:B.discountDuration,discountEndTime:B.discountEndTime,isDiscountActive:B.isDiscountActive}}),T)u.debug("Updating existing therapist profile (1 card per therapist policy)"),await Ye.update(b,B);else{u.debug("Creating new therapist profile (1 card policy, unlimited edits)");const c={...B,isLive:!0,email:"therapist".concat(b,"@indostreet.com")};await Ye.create(c),u.debug("Therapist card created successfully (can be edited unlimited times)")}if(u.debug("Therapist profile saved successfully"),!T)try{u.debug("Creating default Silver membership for new therapist...");const{membershipPackageService:c}=await z(async()=>{const{membershipPackageService:C}=await import("./route-therapist.DVVqC6AH.js").then(M=>M.bx);return{membershipPackageService:C}},__vite__mapDeps([0,1,2,3,4,5,6])),h=t.id;await c.createDefaultMembership(h,b,"therapist"),u.debug("Default Silver membership created")}catch(c){u.error("Failed to create membership (non-blocking):",c)}const f=n.map(c=>{const h=c;return c.id===t.id||h.$id===b?{...c,...B,id:c.id||b,$id:h.$id||b}:c});if(!n.some(c=>c.id===t.id||c.$id===b)){const c={...B,id:t.id,$id:b,isLive:!0,rating:0,activeMembershipDate:new Date().toISOString().split("T")[0],email:"therapist".concat(b,"@indostreet.com")};f.push(c)}if(m(f),u.debug("Updated therapists state with new data"),v)try{u.debug("Refreshing data from database to sync live site..."),await v(),u.debug("Data refresh completed - live site should show updated info")}catch(c){u.warn("Failed to refresh data after save:",c)}try{await Ur.create({providerId:Number(t.id),message:"".concat(B.name||"A therapist"," has updated their profile and is now live for review"),type:"system",data:JSON.stringify({therapistId:String(t.id),therapistName:B.name||"Unknown Therapist",email:B.email||"",location:B.location||"",submittedAt:new Date().toISOString()})}),u.debug("Admin notification created for therapist profile review")}catch(c){u.warn("Failed to create admin notification:",c)}pa("Profile saved successfully! Your profile is now live and visible to customers.","success")}catch(b){u.error("Save error:",b),pa("Error saving profile: "+(b.message||"Unknown error. Please try again."),"error")}},handleSavePlace:async S=>{if(t)try{u.debug("Starting place profile save",{provider:t,placesCount:i.length});const N={...S,pricing:typeof S.pricing=="string"?S.pricing:JSON.stringify(S.pricing),analytics:typeof S.analytics=="string"?S.analytics:JSON.stringify(S.analytics)};if("thumbnailImages"in S){const B=S.thumbnailImages;N.thumbnailImages=Array.isArray(B)?JSON.stringify(B):B}let k=null;const b=i.find(B=>{var A,c;const f=B;return B.id===t.id||f.$id===t.id||((A=B.id)==null?void 0:A.toString())===((c=t.id)==null?void 0:c.toString())});if(b)k=b.$id||b.id,u.debug("Found place in current data:",k);else{const B=JSON.parse(localStorage.getItem("app_session")||"{}");if(u.debug("Session data:",B),B.documentId)k=B.documentId,u.debug("Using document ID from session cache:",k);else{u.debug("Looking up place document by provider id...");const f=await Xt.getByProviderId(String(t.id));f?(k=f.$id,u.debug("Found remote place document by provider id:",k)):u.warn("No existing place document found by provider id")}}let y=null;if(k){u.debug("Updating existing massage place profile (1 card per place policy)",{updateData:N});try{y=await Xt.update(k,N),u.debug("Massage place profile saved successfully via update")}catch(B){const f=B&&(B.message||B.code||"")||"";if(String(f).toLowerCase().includes("not found")||String((B==null?void 0:B.code)||"").includes("404")){u.warn("Document not found on update, creating new document instead..."),y=await Xt.update(t.id.toString(),{...N,id:t.id,placeId:t.id,isLive:!0,rating:0}),k=y.$id;const c=JSON.parse(localStorage.getItem("app_session")||"{}");localStorage.setItem("app_session",JSON.stringify({...c,documentId:k})),u.debug("Massage place profile created successfully with new ID:",k)}else throw B}}else{u.debug("Creating massage place profile (1 card policy, unlimited edits)"),y=await Xt.update(t.id.toString(),{...N,id:t.id,placeId:t.id,isLive:!0,rating:0}),k=y.$id;const B=JSON.parse(localStorage.getItem("app_session")||"{}");localStorage.setItem("app_session",JSON.stringify({...B,documentId:k})),u.debug("Massage place card created successfully (can be edited unlimited times)")}if(!y)try{u.debug("Creating default Silver membership for new massage place...");const{membershipPackageService:B}=await z(async()=>{const{membershipPackageService:A}=await import("./route-therapist.DVVqC6AH.js").then(c=>c.bx);return{membershipPackageService:A}},__vite__mapDeps([0,1,2,3,4,5,6])),f=t.id;await B.createDefaultMembership(f,k||"","massage_place"),u.debug("Default Silver membership created")}catch(B){u.error("Failed to create membership (non-blocking):",B)}const T=i.map(B=>{var A,c;const f=B;return B.id===t.id||f.$id===k||((A=B.id)==null?void 0:A.toString())===((c=t.id)==null?void 0:c.toString())?{...B,...N,id:B.id||k,$id:f.$id||k}:B}),U=T.some(B=>B.$id===k||B.id===t.id)?T:[...T,{...N,id:t.id,$id:k,isLive:!0,rating:0}];if(x(U),u.debug("Updated places state with new data"),v)try{u.debug("Refreshing data from database to sync live site..."),await v(),u.debug("Data refresh completed - live site should show updated info")}catch(B){u.warn("Failed to refresh data after save:",B)}try{await Ur.create({providerId:Number(t.id),message:"".concat(N.name||"A massage place"," has updated their profile and is now live for review"),type:"place_profile_pending",data:JSON.stringify({placeId:String(t.id),placeName:N.name||"Unknown Place",email:N.email||"",location:N.location||"",submittedAt:new Date().toISOString()})}),u.debug("Admin notification created for profile approval")}catch(B){u.warn("Failed to create admin notification:",B)}pa("Profile saved successfully! Your profile is now live and visible to customers.","success")}catch(N){u.error("Save error:",N),pa("Error saving profile: "+(N.message||"Unknown error. Please try again."),"error")}},handleAgentRegister:async(S,N)=>{try{const k="".concat(S.toLowerCase().replace(/\s+/g,"-").slice(0,10),"-").concat(Math.random().toString(36).substring(2,6));return await bs.create({name:S,email:N,agentCode:k,hasAcceptedTerms:!1,lastLogin:new Date().toISOString()}),{success:!0,message:"Registration successful! Your agent code is: ".concat(k,". Please save it for future reference.")}}catch(k){return u.error("Agent registration error:",k),{success:!1,message:k.message||"Registration failed"}}},handleAgentLogin:async S=>{try{const k=(await bs.getAll()).find(b=>b.email===S);if(!k)return{success:!1,message:"Invalid email. Please check and try again."};try{await bs.update(k.$id,{lastLogin:new Date().toISOString()})}catch(b){u.error("Failed to update last login time",b)}return r(k),localStorage.setItem("loggedInAgent",JSON.stringify(k)),k.hasAcceptedTerms?g("agentDashboard"):g("agentTerms"),{success:!0,message:""}}catch(N){return u.error("Agent login error:",N),{success:!1,message:N.message||"Login failed"}}},handleAgentAcceptTerms:async()=>{var S;if(a)try{const N=a.$id||((S=a.id)==null?void 0:S.toString())||a.agentId;await bs.update(N,{hasAcceptedTerms:!0});const k={...a,hasAcceptedTerms:!0};r(k),localStorage.setItem("loggedInAgent",JSON.stringify(k)),g("agentDashboard")}catch(N){u.error("Accept terms error:",N),pa("Could not accept terms: "+(N.message||"Unknown error"),"error")}},handleSaveAgentProfile:async S=>{var N;if(a)try{const k=a.$id||((N=a.id)==null?void 0:N.toString())||a.agentId,{status:b,availability:y,...T}=S;(b||y)&&u.warn("Filtered out invalid Agent fields:",{status:b,availability:y}),await bs.update(k,T);const F={...a,...T};r(F),localStorage.setItem("loggedInAgent",JSON.stringify(F)),pa("Profile saved successfully!","success")}catch(k){u.error("Save agent profile error:",k),pa("Error saving profile: "+(k.message||"Unknown error"),"error")}},handleStopImpersonating:()=>{l(null),g("adminDashboard")},handleSendAdminMessage:async S=>{var N;if(s)try{const k=s.$id||((N=s.id)==null?void 0:N.toString())||"",b=s.name||"";await fs.sendMessage({senderId:k,senderName:b,senderType:"agent",receiverId:"admin",message:S});const y=await fs.getMessages(k);d(y)}catch(k){u.error("Error sending admin message:",k),pa("Failed to send message. Please try again.","error")}},handleMarkMessagesAsRead:async()=>{var S;if(s)try{const N=s.$id||((S=s.id)==null?void 0:S.toString())||"",b=(await fs.getMessages(N)).filter(T=>!T.isRead&&T.receiverType==="agent");for(const T of b)await fs.markAsRead(T.$id);const y=await fs.getMessages(N);d(y)}catch(N){u.error("Error marking messages as read:",N)}}}),Gh=({setPage:t,loggedInUser:a,loggedInProvider:s,loggedInAgent:n,loggedInCustomer:i,isHotelLoggedIn:r})=>({handleFooterHome:()=>{if(a)switch(a.type){case"admin":t("adminDashboard");break;case"hotel":t("home");break;case"villa":t("home");break;case"agent":t("agentDashboard");break}else s?s.type==="therapist"?t("therapistDashboard"):t("placeDashboard"):t(n?"agentDashboard":i?"home":r?"villaDashboard":"home")},handleFooterDashboard:()=>{s?s.type==="therapist"?t("therapistDashboard"):t("placeDashboard"):n?t("agentDashboard"):i?t("customerDashboard"):r&&t("villaDashboard")},handleFooterProfile:()=>{s?s.type==="therapist"?t("therapistDashboard"):t("placeDashboard"):t(n?"agentDashboard":i?"customerDashboard":"profile")},handleFooterMenu:()=>{t("home")}}),Kh=({isAdminLoggedIn:t,loggedInProvider:a,loggedInAgent:s,loggedInCustomer:n,isHotelLoggedIn:i,notifications:r,bookings:l,page:d,activeChatRoom:g})=>{var I;const m=()=>t?"admin":a?a.type==="therapist"?"therapist":"place":s?"agent":n?"customer":i?"hotel":null,x=r.filter(p=>!p.isRead&&p.providerId===(a==null?void 0:a.id)).length,v=l.some(p=>p.providerId===(a==null?void 0:a.id));return typeof window!="undefined"&&(window.matchMedia("(display-mode: standalone)").matches||((I=window.navigator)==null||I.standalone)),{getUserRole:m,unreadNotifications:x,hasNewBookings:v,showFooter:!1}},yo=t=>["en","id"].includes(t)?t:"en",Jh=({user:t,language:a,loggedInCustomer:s,isHotelLoggedIn:n,isVillaLoggedIn:i,setPage:r,setProviderForBooking:l,setShowRegisterPrompt:d,setRegisterPromptContext:g,setActiveChatRoom:m,setChatBooking:x,setIsChatWindowVisible:v,setBookings:j})=>{const I=o.useCallback((P,D,L)=>{},[]),p=o.useCallback((P,D)=>{if(!t&&!n&&!i&&!s){g("booking"),d(!0);return}l({provider:P,type:D}),r("booking")},[t,n,i,s,g,d,l,r]),R=o.useCallback(async(P,D)=>{if(!t&&!n&&!i&&!s){g("booking"),d(!0);return}const L=new Date,O=new Date(L.getTime()+3600*1e3),H=typeof P.id=="number"?P.id:parseInt(String(P.id),10)||0,S=(s==null?void 0:s.$id)||(t==null?void 0:t.id)||(n?"hotel-user":i?"villa-user":"guest"),N=(s==null?void 0:s.name)||(t==null?void 0:t.name)||(n?"Hotel Guest":i?"Villa Guest":"Guest"),k={id:Date.now(),providerId:H,providerName:P.name,providerType:D,startTime:O.toISOString(),service:"60",status:Fa.Pending,userId:S,userName:N};l({provider:P,type:D}),j(b=>[...b,k]);try{const{createChatRoom:b}=await z(async()=>{const{createChatRoom:F}=await import("./route-therapist.DVVqC6AH.js").then(U=>U.bC);return{createChatRoom:F}},__vite__mapDeps([0,1,2,3,4,5,6])),y=new Date(Date.now()+1500*1e3).toISOString(),T=await b({bookingId:k.id,customerId:S,customerName:N,customerLanguage:yo(a),customerPhoto:(s==null?void 0:s.profilePhoto)||"",therapistId:H,therapistName:P.name,therapistLanguage:"en",therapistType:D,therapistPhoto:"",expiresAt:y});m(T),x(k),v(!0)}catch{}},[t,a,s,n,i,g,d,l,j,m,x,v]),w=o.useCallback(async P=>{if(!n&&!i&&!s){g("chat"),d(!0);return}try{const{createChatRoom:D}=await z(async()=>{const{createChatRoom:k}=await import("./route-therapist.DVVqC6AH.js").then(b=>b.bC);return{createChatRoom:k}},__vite__mapDeps([0,1,2,3,4,5,6])),L=(s==null?void 0:s.$id)||(t==null?void 0:t.id)||(n?"hotel-user":"villa-user"),O=(s==null?void 0:s.name)||(t==null?void 0:t.name)||(n?"Hotel Guest":"Villa Guest"),H={id:Date.now(),providerId:typeof P.id=="number"?P.id:parseInt(String(P.id),10),providerName:P.name,providerType:"therapist",startTime:new Date().toISOString(),service:"60",status:Fa.Pending,userId:L,userName:O},S=new Date(Date.now()+1500*1e3).toISOString(),N=await D({bookingId:H.id,customerId:L,customerName:O,customerLanguage:yo(a),customerPhoto:(s==null?void 0:s.profilePhoto)||"",therapistId:H.providerId,therapistName:P.name,therapistLanguage:"en",therapistType:"therapist",therapistPhoto:"",expiresAt:S});m(N),x(H),v(!0)}catch{alert("Failed to create chat. Please try again.")}},[t,a,s,n,i,g,d,m,x,v]);return{handleIncrementAnalytics:I,handleNavigateToBooking:p,handleQuickBookWithChat:R,handleChatWithBusyTherapist:w}},qh=t=>{const{setLoggedInProvider:a,setLoggedInCustomer:s,setLoggedInAgent:n,setIsHotelLoggedIn:i,setIsVillaLoggedIn:r,setLoggedInUser:l}=t,d=o.useCallback(async()=>{var g;try{const m=await tl();if(!m){a(null),s(null),n(null),l(null),i(!1),r(!1);return}const x={id:m.id,type:m.type,email:m.email,name:(g=m.data)==null?void 0:g.name,data:m.data};switch(m.type){case"hotel":i(!0),l(x);break;case"villa":r(!0),l(x);break;case"therapist":const v={id:m.id,type:"therapist",email:m.email,...m.data};a(v),l(x);break;case"place":const j={id:m.id,type:"place",email:m.email,...m.data};a(j),l(x);break;case"agent":const I={id:m.id,email:m.email,...m.data};n(I),l(x);break;case"user":const p={id:m.id,email:m.email,...m.data};s(p),l(x);break;case"employer":l(x);break;default:l(x)}}catch{a(null),s(null),n(null),l(null),i(!1),r(!1)}},[a,s,n,i,r,l]);return o.useEffect(()=>{let g=!0;return(async()=>{try{if(sessionStorage.getItem("start_fresh"))return;g&&await d()}catch{}})(),()=>{g=!1}},[]),{restoreUserSession:d}},Yh=(t,a)=>{const s={landing:"/",home:"/home",facialProviders:"/facials",massageTypes:"/massage-types","massage-types":"/massage-types",facialTypes:"/facial-types","facial-types":"/facial-types",faq:"/faq","indastreet-partners":"/indastreet-partners","partnership-application":"/partnership-application","how-it-works":"/how-it-works",about:"/about","about-us":"/about",company:"/company",contact:"/contact","partner-contact":"/partner-contact","hotels-and-villas":"/hotels-and-villas",blog:"/blog","indastreet-news":"/indastreet-news","blog-bali-spa-trends-2025":"/blog/bali-spa-trends-2025","blog-top-10-massage-techniques":"/blog/top-10-massage-techniques","blog-massage-career-indonesia":"/blog/massage-career-indonesia","blog-benefits-regular-massage":"/blog/benefits-regular-massage","blog-hiring-massage-therapists":"/blog/hiring-massage-therapists","blog-traditional-balinese-massage":"/blog/traditional-balinese-massage","blog-spa-tourism-indonesia":"/blog/spa-tourism-indonesia","blog-aromatherapy-massage-oils":"/blog/aromatherapy-massage-oils","blog-pricing-guide-massage":"/blog/pricing-guide-massage","blog-deep-tissue-vs-swedish":"/blog/deep-tissue-vs-swedish","blog-online-presence-therapist":"/blog/online-presence-therapist","blog-wellness-tourism-ubud":"/blog/wellness-tourism-ubud","blog-wellness-southeast-asia":"/blog/wellness-southeast-asia","blog-massage-spa-standards-asia-europe":"/blog/massage-spa-standards-asia-europe","blog-skin-clinic-trends-international":"/blog/skin-clinic-trends-international","blog-building-wellness-business-international":"/blog/building-wellness-business-international","massage-bali":"/massage-bali","balinese-massage":"/balinese-massage","deep-tissue-massage":"/deep-tissue-massage","massage-jobs":"/massage-jobs","apply-for-job":"/massage-jobs/apply","job-posting-payment":"/massage-jobs/payment","employer-job-posting":"/employer-job-posting","therapist-job-registration":"/therapist-job-registration","verified-pro-badge":"/verified-badge",admin:"/admin","admin-dashboard":"/admin","todays-discounts":"/discounts","women-reviews":"/women-reviews","advanced-search":"/advanced-search","help-faq":"/help-faq","top-therapists":"/top-therapists","special-offers":"/special-offers","video-center":"/video-center",therapistLogin:"/therapist-login",therapistPortal:"/dashboard/therapist",therapistDashboard:"/dashboard/therapist",therapist:"/dashboard/therapist",therapistStatus:"/dashboard/therapist/status",therapistAvailability:"/dashboard/therapist/availability",therapistProfile:"/dashboard/therapist/profile","therapist-dashboard":"/dashboard/therapist","therapist-status":"/dashboard/therapist/status","therapist-schedule":"/dashboard/therapist/schedule","therapist-bookings":"/dashboard/therapist/bookings","therapist-earnings":"/dashboard/therapist/earnings","therapist-payment":"/dashboard/therapist/payment","therapist-payment-status":"/dashboard/therapist/payment-status","therapist-commission-payment":"/dashboard/therapist/commission","therapist-premium-upgrade":"/dashboard/therapist/premium","therapist-menu":"/dashboard/therapist/menu","therapist-chat":"/dashboard/therapist/chat","therapist-notifications":"/dashboard/therapist/notifications","therapist-calendar":"/dashboard/therapist/calendar","therapist-legal":"/dashboard/therapist/legal","therapist-job-applications":"/dashboard/therapist/job-applications",status:"/dashboard/therapist/status",dashboard:"/dashboard/therapist",payment:"/dashboard/therapist/payment","payment-status":"/dashboard/therapist/payment-status",bookings:"/dashboard/therapist/bookings",earnings:"/dashboard/therapist/earnings",calendar:"/dashboard/therapist/calendar",schedule:"/dashboard/therapist/schedule","custom-menu":"/dashboard/therapist/menu",legal:"/dashboard/therapist/legal",analytics:"/dashboard/therapist/analytics","commission-payment":"/dashboard/therapist/commission","therapist-analytics":"/dashboard/therapist/analytics","therapist-how-it-works":"/dashboard/therapist/how-it-works","therapist-hotel-villa-safe-pass":"/dashboard/therapist/safe-pass","send-discount":"/dashboard/therapist/send-discount",customers:"/dashboard/therapist/customers","more-customers":"/dashboard/therapist/more-customers",massagePlaceLogin:"/place-login","employer-login":"/employer-login",placeDashboard:"/dashboard/massage-place",massagePlacePortal:"/dashboard/massage-place",massagePlaceProfile:"/dashboard/massage-place/profile","massage-place-profile":"/profile/place","facial-place-profile":"/profile/facial",facialPlaceDashboard:"/dashboard/facial-place",facialPlaceProfile:"/dashboard/facial-place/profile","shared-therapist-profile":"/therapist-profile","therapist-profile":"/profile/therapist","share-therapist":"/share/therapist","share-place":"/share/place","share-facial":"/share/facial",customerProviders:"/providers",customerReviews:"/reviews",customerSupport:"/support",registrationChoice:"/register",joinIndastreet:"/join",signup:"/signup",signin:"/signin",signIn:"/signin",login:"/login",createAccount:"/create-account","create-account-employer":"/create-account-employer","onboarding-package":"/onboarding/package",simpleSignup:"/signup",booking:"/booking","booking-flow":"/booking","booking-therapist":"/booking/therapist","booking-place":"/booking/place","accept-booking":"/accept-booking",chat:"/chat","chat-room":"/chat/room",chatList:"/chat/inbox",notifications:"/notifications",agentPortal:"/agent-portal",agentDashboard:"/agent-dashboard",customerAuth:"/customer-auth",customerPortal:"/customer-portal",profile:"/profile",serviceTerms:"/terms",placeTerms:"/place-terms",privacyPolicy:"/privacy",membership:"/membership","mobile-terms-and-conditions":"/mobile-terms-and-conditions",adminDashboard:"/admin",hotelDashboard:"/hotel-dashboard",villaDashboard:"/villa-dashboard",browseJobs:"/browse-jobs",massageJobs:"/massage-jobs",therapistJobs:"/therapist-jobs","website-management":"/website",placeDiscountBadge:"/discount-badge",verifiedProBadge:"/verified-badge",sharedProfileStandards:"/shared-profile-standards",mobileTherapistStandards:"/mobile-therapist-standards","qr-code":"/qr","chat-support":"/chat/support","booking-quick":"/booking/quick","emergency-contact":"/emergency/contact",help:"/help",feedback:"/feedback"},n=Object.fromEntries(Object.entries(s).map(([i,r])=>[r,i]));o.useEffect(()=>{if(t==="shared-therapist-profile"||t==="therapist-profile"||t==="share-therapist"||t==="share-place"||t==="share-facial"||t==="massage-place-profile"||t==="facial-place-profile"||t==="mobile-terms-and-conditions"||t==="employer-job-posting"||t==="therapist-job-registration")return;const i=s[t]||"/";window.location.pathname!==i&&window.history.pushState({page:t},"",i)},[t]),o.useEffect(()=>{const i=d=>{var g;if((g=d.state)!=null&&g.page)a(d.state.page);else{const m=(window.location.hash||"").replace("#","").replace(/^\/+/,"")||"",x=window.location.pathname&&window.location.pathname!=="/"?window.location.pathname:m?"/".concat(m):window.location.pathname;if(x.startsWith("/share/")){const j=x.split("/").filter(Boolean);if(j.length>=3){a("share-therapist");return}else if(j[1]==="therapist"){a("share-therapist");return}else if(j[1]==="place"){a("share-place");return}else if(j[1]==="facial"){a("share-facial");return}}if(x.startsWith("/profile/therapist/")){a("therapist-profile");return}if(x.startsWith("/profile/place/")){a("massage-place-profile");return}if(x.startsWith("/profile/facial/")){a("facial-place-profile");return}if(x.startsWith("/therapist-profile/")){a("shared-therapist-profile");return}if(x==="/dashboard/therapist/status"){a("therapist-status");return}if(x==="/dashboard/therapist/schedule"){a("therapist-schedule");return}if(x==="/dashboard/therapist/bookings"){a("therapist-bookings");return}if(x==="/dashboard/therapist/earnings"){a("therapist-earnings");return}if(x==="/dashboard/therapist/payment"){a("therapist-payment");return}if(x==="/dashboard/therapist/payment-status"){a("therapist-payment-status");return}if(x==="/dashboard/therapist/commission"){a("therapist-commission-payment");return}if(x==="/dashboard/therapist/premium"){a("therapist-premium-upgrade");return}if(x==="/dashboard/therapist/menu"){a("therapist-menu");return}if(x==="/dashboard/therapist/chat"){a("therapist-chat");return}if(x==="/dashboard/therapist/notifications"){a("therapist-notifications");return}if(x==="/dashboard/therapist/calendar"){a("therapist-calendar");return}if(x==="/dashboard/therapist/legal"){a("therapist-legal");return}if(x==="/dashboard/therapist/job-applications"){a("therapist-job-applications");return}if(x==="/dashboard/therapist/analytics"){a("therapist-analytics");return}if(x==="/dashboard/therapist/customers"){a("customers");return}if(x==="/dashboard/therapist/more-customers"){a("more-customers");return}if(x==="/dashboard/therapist/send-discount"){a("send-discount");return}if(x==="/dashboard/therapist/how-it-works"){a("therapist-how-it-works");return}if(x==="/dashboard/therapist/safe-pass"){a("therapist-hotel-villa-safe-pass");return}if(x==="/dashboard/therapist"){a("therapist-dashboard");return}if(x==="/dashboard/massage-place"){a("place-dashboard");return}if(x==="/dashboard/facial-place"){a("facialPlaceDashboard");return}if(x==="/signup"){a("signup");return}if(x==="/signin"||x==="/sign-in"){a("signin");return}if(x==="/create-account"){a("createAccount");return}if(x==="/create-account-employer"){a("create-account-employer");return}if(x==="/login"){a("login");return}if(x==="/onboarding/package"){a("onboarding-package");return}if(x.startsWith("/chat/")){const j=x.split("/").filter(Boolean);if(j[1]==="room"||j[1]){a("chat-room");return}else if(x==="/chat/inbox"){a("chatList");return}else if(x==="/chat"){a("chat");return}}if(x.startsWith("/booking/")){const j=x.split("/").filter(Boolean);if(j[1]==="therapist"){a("booking-therapist");return}else if(j[1]==="place"){a("booking-place");return}else{a("booking-flow");return}}const v=n[x]||"landing";a(v)}};window.addEventListener("popstate",i);const r=window.location.pathname,l=window.location.hash;if(l){const d=l.substring(1).replace(/^\/+/,""),g=l.substring(1);if(d==="employer-job-posting")return a("employer-job-posting"),()=>window.removeEventListener("popstate",i);if(d==="therapist-job-registration")return a("therapist-job-registration"),()=>window.removeEventListener("popstate",i);if(d==="massage-jobs")return a("massage-jobs"),()=>window.removeEventListener("popstate",i);if(d==="massage-jobs/apply"||g==="/massage-jobs/apply")return a("apply-for-job"),()=>window.removeEventListener("popstate",i);if(d==="massage-jobs/payment"||g==="/massage-jobs/payment")return a("job-posting-payment"),()=>window.removeEventListener("popstate",i);if(g.startsWith("/therapist-profile/")||d.startsWith("therapist-profile/"))return a("shared-therapist-profile"),()=>window.removeEventListener("popstate",i);if(g.startsWith("/share/therapist/")||d.startsWith("share/therapist/"))return a("shared-therapist-profile"),()=>window.removeEventListener("popstate",i);if(g==="/therapist-status"||g==="/status")return a("therapist-status"),()=>window.removeEventListener("popstate",i);if(g==="/therapist"||g==="/therapist-dashboard")return a("therapist-dashboard"),()=>window.removeEventListener("popstate",i);if(d==="massage-types"||g==="/massage-types")return a("massage-types"),()=>window.removeEventListener("popstate",i)}if(r.startsWith("/profile/therapist/"))return a("therapist-profile"),()=>window.removeEventListener("popstate",i);if(r.startsWith("/profile/place/"))return a("massage-place-profile"),()=>window.removeEventListener("popstate",i);if(r.startsWith("/share/")){const d=r.split("/").filter(Boolean);if(d.length>=3||d[1]==="therapist")return a("share-therapist"),()=>window.removeEventListener("popstate",i);if(d[1]==="place")return a("share-place"),()=>window.removeEventListener("popstate",i);if(d[1]==="facial")return a("share-facial"),()=>window.removeEventListener("popstate",i)}if(r.startsWith("/therapist-profile/"))return a("shared-therapist-profile"),()=>window.removeEventListener("popstate",i);if(r!=="/"){if(r==="/signup")return a("signup"),()=>window.removeEventListener("popstate",i);if(r==="/login")return a("login"),()=>window.removeEventListener("popstate",i);if(r==="/onboarding/package")return a("onboarding-package"),()=>window.removeEventListener("popstate",i);if(r.startsWith("/chat/")){const g=r.split("/").filter(Boolean);if(g[1]==="room"||g[1])return a("chat-room"),()=>window.removeEventListener("popstate",i);if(r==="/chat/inbox")return a("chatList"),()=>window.removeEventListener("popstate",i)}if(r.startsWith("/booking/")){const g=r.split("/").filter(Boolean);return g[1]==="therapist"?(a("booking-therapist"),()=>window.removeEventListener("popstate",i)):g[1]==="place"?(a("booking-place"),()=>window.removeEventListener("popstate",i)):(a("booking-flow"),()=>window.removeEventListener("popstate",i))}const d=n[r];d&&d!==t&&a(d)}else{const d=(window.location.hash||"").replace("#",""),g=d.startsWith("/therapist-profile/")||d.startsWith("/share/therapist/")||d.startsWith("therapist-profile/"),m=d==="/massage-types"||d.replace(/^\/+/,"")==="massage-types";g?a("shared-therapist-profile"):m?a("massage-types"):t!=="landing"&&t!=="home"&&a("landing")}return()=>{window.removeEventListener("popstate",i)}},[a])},Qh=()=>{const t=Ah(),a=Bh();Yh(t.page,t.setPage),o.useEffect(()=>{if(t.page!=="loading")return;const j=setTimeout(()=>{t.setPage("landing"),sessionStorage.removeItem("LOADING_LOCKED")},300);return()=>clearTimeout(j)},[t.page,t.setPage]),o.useEffect(()=>{(async()=>{try{const{therapists:I,places:p,facialPlaces:R,hotels:w}=await a.fetchPublicData();t.setTherapists(I),t.setPlaces(p),t.setFacialPlaces(R),t.setHotels(w)}catch{t.setTherapists([]),t.setPlaces([]),t.setFacialPlaces([]),t.setHotels([])}})()},[]),o.useEffect(()=>{const j=async I=>{try{const{therapists:p,places:R,hotels:w}=await a.fetchPublicData();t.setTherapists(p),t.setPlaces(R),t.setHotels(w)}catch{}};return window.addEventListener("refreshTherapistData",j),()=>{window.removeEventListener("refreshTherapistData",j)}},[a,t]);const s=$h({setPage:t.setPage,setSelectedPlace:t.setSelectedPlace,setProviderAuthInfo:t.setProviderAuthInfo,setProviderForBooking:t.setProviderForBooking,setIsAdminLoggedIn:t.setIsAdminLoggedIn,setLoggedInUser:t.setLoggedInUser,loggedInProvider:t.loggedInProvider,loggedInCustomer:t.loggedInCustomer,setLanguage:t.setLanguage,setUserLocation:t.setUserLocation,setIsHotelLoggedIn:t.setIsHotelLoggedIn,setIsVillaLoggedIn:t.setIsVillaLoggedIn,setLoggedInProvider:t.setLoggedInProvider,setLoggedInAgent:t.setLoggedInAgent,setImpersonatedAgent:t.setImpersonatedAgent,setLoggedInCustomer:t.setLoggedInCustomer,setShowRegisterPrompt:t.setShowRegisterPrompt}),n=Hh({setPage:t.setPage,setIsAdminLoggedIn:t.setIsAdminLoggedIn,setLoggedInUser:t.setLoggedInUser,setUser:t.setUser,setLoggedInProvider:t.setLoggedInProvider,setLoggedInAgent:t.setLoggedInAgent,setLoggedInCustomer:t.setLoggedInCustomer,setIsHotelLoggedIn:t.setIsHotelLoggedIn,setIsVillaLoggedIn:t.setIsVillaLoggedIn,getLoggedInProvider:()=>t.loggedInProvider}),{restoreUserSession:i}=qh({setLoggedInProvider:t.setLoggedInProvider,setLoggedInCustomer:t.setLoggedInCustomer,setLoggedInAgent:t.setLoggedInAgent,setIsHotelLoggedIn:t.setIsHotelLoggedIn,setIsVillaLoggedIn:t.setIsVillaLoggedIn,setLoggedInUser:t.setLoggedInUser}),r=Wh({language:t.language,user:t.user,loggedInCustomer:t.loggedInCustomer,isHotelLoggedIn:t.isHotelLoggedIn,isVillaLoggedIn:t.isVillaLoggedIn,providerForBooking:t.providerForBooking,bookings:t.bookings,setBookings:t.setBookings,setActiveChatRoom:t.setActiveChatRoom,setChatBooking:t.setChatBooking,setIsChatWindowVisible:t.setIsChatWindowVisible,setPage:t.setPage,setLoyaltyEvent:t.setLoyaltyEvent,setShowRegisterPrompt:t.setShowRegisterPrompt,setRegisterPromptContext:j=>t.setRegisterPromptContext(j),t:{}}),l=async()=>{try{const{therapists:j,places:I}=await a.fetchPublicData();t.setTherapists(j),t.setPlaces(I)}catch(j){throw j}},g=zh({loggedInProvider:t.loggedInProvider,loggedInAgent:t.loggedInAgent,impersonatedAgent:t.impersonatedAgent,therapists:t.therapists,places:t.places,setLoggedInAgent:t.setLoggedInAgent,setImpersonatedAgent:t.setImpersonatedAgent,setAdminMessages:t.setAdminMessages,setPage:t.setPage,setTherapists:t.setTherapists,setPlaces:t.setPlaces,refreshData:l}),m=Gh({setPage:t.setPage,loggedInUser:t.loggedInUser,loggedInProvider:t.loggedInProvider,loggedInAgent:t.loggedInAgent,loggedInCustomer:t.loggedInCustomer,isHotelLoggedIn:t.isHotelLoggedIn}),x=Kh({isAdminLoggedIn:t.isAdminLoggedIn,loggedInProvider:t.loggedInProvider,loggedInAgent:t.loggedInAgent,loggedInCustomer:t.loggedInCustomer,isHotelLoggedIn:t.isHotelLoggedIn,notifications:t.notifications,bookings:t.bookings,page:t.page,activeChatRoom:t.activeChatRoom}),v=Jh({user:t.user,language:t.language,loggedInCustomer:t.loggedInCustomer,isHotelLoggedIn:t.isHotelLoggedIn,isVillaLoggedIn:t.isVillaLoggedIn,setPage:t.setPage,setProviderForBooking:t.setProviderForBooking,setShowRegisterPrompt:t.setShowRegisterPrompt,setRegisterPromptContext:t.setRegisterPromptContext,setActiveChatRoom:t.setActiveChatRoom,setChatBooking:t.setChatBooking,setIsChatWindowVisible:t.setIsChatWindowVisible,setBookings:t.setBookings});return{state:t,dataFetching:a,navigation:s,authHandlers:n,bookingHandlers:r,providerAgentHandlers:g,footerNav:m,derived:x,homeHandlers:v,restoreUserSession:i}};class Xh{constructor(){Se(this,"intervals",new Map);Se(this,"usedComments",new Map)}startAutoReviews(a,s,n="en"){}stopAutoReviews(a){const s=this.intervals.get(a);s&&(clearInterval(s),this.intervals.delete(a))}stopAllAutoReviews(){this.intervals.forEach((a,s)=>{clearInterval(a)}),this.intervals.clear()}canSafelyGenerateReviews(){if(typeof window=="undefined"||typeof localStorage=="undefined")return!1;try{const a=localStorage.getItem("massage_app_reviews");if(!a)return!0;const s=JSON.parse(a);if((Array.isArray(s)?s.length:0)>=5e3)return!1;const i=new Blob([a]).size,r=5*1024*1024;return!(i>r*.8)}catch{return!1}}generateRandomReview(a,s,n="en"){const i=["Sarah Mitchell","Budi Santoso","Emma Rodriguez","Ahmad Hidayat","David Chen","Sari Wulandari","Michael Johnson","Dewi Lestari","James Anderson","Rina Putri","Lisa Thompson","Agus Wijaya","Tom Wilson","Maya Kusuma","Anna Schmidt","Rudi Hartono","Sophie Martin","Fitri Rahmawati","Chris Lee","Indah Permata"],r=this.generateUniqueComment(a,s,n),l=i[Math.floor(Math.random()*i.length)],d=Math.random()>.2?5:4,g="auto_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),m="Yogyakarta, Indonesia";try{const x=Is.addReview(a,"therapist",g,l,d,r,m);window.dispatchEvent(new CustomEvent("reviewsUpdated",{detail:{therapistId:a,therapistName:s,newReview:x}}))}catch{}}generateUniqueComment(a,s,n="en"){this.usedComments.has(a)||this.usedComments.set(a,new Set);const i=this.usedComments.get(a),l={en:[["Excellent","Amazing","Fantastic","Outstanding","Wonderful","Incredible","Superb","Perfect","Brilliant","Exceptional"],["massage","therapy session","treatment","service","experience","session","massage therapy","deep tissue work"],["very professional","highly skilled","extremely knowledgeable","very experienced","incredibly talented","truly expert"],["helped with my back pain","relieved my muscle tension","reduced my stress","improved my flexibility","addressed my shoulder issues","fixed my neck pain","eased my chronic pain"],["I feel much better now","I'm completely relaxed","my pain is gone","I feel rejuvenated","I'm so refreshed","the results are amazing"],["Highly recommend","Will definitely book again","Must try","Worth every penny","Can't recommend enough","Five stars all the way"]],id:[["Luar biasa","Menakjubkan","Fantastis","Sangat bagus","Sempurna","Hebat","Istimewa","Sempurna","Cemerlang","Eksepsional"],["pijat","sesi terapi","perawatan","layanan","pengalaman","sesi","terapi pijat","pijat jaringan dalam"],["sangat profesional","sangat terampil","sangat berpengalaman","sangat berpengalaman","sangat berbakat","benar-benar ahli"],["membantu sakit punggung saya","meredakan ketegangan otot saya","mengurangi stres saya","meningkatkan fleksibilitas saya","mengatasi masalah bahu saya","memperbaiki sakit leher saya","mengurangi nyeri kronis saya"],["Saya merasa jauh lebih baik sekarang","Saya benar-benar rileks","rasa sakit saya hilang","Saya merasa segar kembali","Saya sangat segar","hasilnya luar biasa"],["Sangat merekomendasikan","Pasti akan pesan lagi","Harus dicoba","Sepadan dengan harganya","Sangat merekomendasikan","Bintang lima semua"]]}[n],d=p=>Math.floor(Math.random()*p.length),m={en:[p=>"".concat(p[0][d(p[0])]," ").concat(p[1][d(p[1])],"! The therapist was ").concat(p[2][d(p[2])]," and ").concat(p[3][d(p[3])],". ").concat(p[4][d(p[4])],". ").concat(p[5][d(p[5])],"!"),p=>"".concat(p[0][d(p[0])]," experience! ").concat(p[3][d(p[3])]," and ").concat(p[4][d(p[4])],". The ").concat(p[1][d(p[1])]," was professional and effective. ").concat(p[5][d(p[5])],"."),p=>"Really ".concat(p[0][d(p[0])].toLowerCase()," ").concat(p[1][d(p[1])],". ").concat(p[2][d(p[2])]," and ").concat(p[3][d(p[3])],". ").concat(p[5][d(p[5])],"."),p=>"The ".concat(p[1][d(p[1])]," was ").concat(p[0][d(p[0])].toLowerCase(),"! ").concat(p[3][d(p[3])]," and I ").concat(p[4][d(p[4])].toLowerCase(),". ").concat(p[5][d(p[5])],"."),p=>"".concat(p[0][d(p[0])]," massage therapy! ").concat(p[2][d(p[2])],", ").concat(p[3][d(p[3])],", and ").concat(p[4][d(p[4])],". Will return!"),p=>"Booked this ".concat(p[1][d(p[1])]," and was not disappointed. ").concat(p[2][d(p[2])],", ").concat(p[3][d(p[3])],", and ").concat(p[4][d(p[4])],". ").concat(p[5][d(p[5])],".")],id:[p=>"".concat(p[0][d(p[0])]," ").concat(p[1][d(p[1])],"! Terapisnya ").concat(p[2][d(p[2])]," dan ").concat(p[3][d(p[3])],". ").concat(p[4][d(p[4])],". ").concat(p[5][d(p[5])],"!"),p=>"Pengalaman ".concat(p[0][d(p[0])].toLowerCase(),"! ").concat(p[3][d(p[3])]," dan ").concat(p[4][d(p[4])],". ").concat(p[1][d(p[1])]," nya profesional dan efektif. ").concat(p[5][d(p[5])],"."),p=>"Benar-benar ".concat(p[1][d(p[1])]," yang ").concat(p[0][d(p[0])].toLowerCase(),". ").concat(p[2][d(p[2])]," dan ").concat(p[3][d(p[3])],". ").concat(p[5][d(p[5])],"."),p=>"".concat(p[1][d(p[1])]," nya ").concat(p[0][d(p[0])].toLowerCase(),"! ").concat(p[3][d(p[3])]," dan ").concat(p[4][d(p[4])],". ").concat(p[5][d(p[5])],"."),p=>"Terapi pijat ".concat(p[0][d(p[0])].toLowerCase(),"! ").concat(p[2][d(p[2])],", ").concat(p[3][d(p[3])],", dan ").concat(p[4][d(p[4])],". Akan kembali!"),p=>"Pesan ".concat(p[1][d(p[1])]," ini dan tidak mengecewakan. ").concat(p[2][d(p[2])],", ").concat(p[3][d(p[3])],", dan ").concat(p[4][d(p[4])],". ").concat(p[5][d(p[5])],".")]}[n];let x=0,v="";for(;x<20;){const p=m[d(m)];if(v=p(l),!i.has(v))return i.add(v),v;x++}const j=new Date().toLocaleTimeString(n==="id"?"id-ID":"en-US",{hour:"2-digit",minute:"2-digit"}),I=n==="id"?"Dipesan":"Booked";return v="".concat(v," (").concat(I," ").concat(j,")"),i.add(v),v}getStatus(){const a=Array.from(this.intervals.keys());return{isActive:a.length>0,activeTherapists:a,activeCount:a.length}}}const on=new Xh;typeof window!="undefined"&&window.addEventListener("beforeunload",()=>{on.stopAllAutoReviews()});const Zh=()=>{const t=o.useRef(!1),{language:a}=uc(),s=o.useRef(0),n=a==="gb"?"en":a;return o.useEffect(()=>{t.current=!0;const i=()=>{};window.addEventListener("refreshTherapistData",i);const r=setInterval(()=>{const l=xn();l.length!==s.current&&l.length>0},2e3);return()=>{xn().forEach(d=>{on.stopAutoReviews(d.id)}),window.removeEventListener("refreshTherapistData",i),clearInterval(r),t.current=!1}},[n]),{startAutoReviews:(i,r,l)=>{on.startAutoReviews(i,r,l||n)},stopAutoReviews:i=>{on.stopAutoReviews(i)}}};function ep(){o.useEffect(()=>{var s,n;if(window.location.pathname==="/"||window.location.hash===""||window.location.hash==="#/"||window.location.pathname==="/home"||window.location.hash==="#/home"){const i=window.location.pathname==="/"||window.location.hash===""||window.location.hash==="#/"?"landing-page":"home-page";document.body.classList.add(i);const r=()=>{const l=window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(l*.01,"px")),document.documentElement.style.removeProperty("height"),document.body.style.removeProperty("height"),document.documentElement.style.removeProperty("overflow"),document.body.style.removeProperty("overflow")};return r(),window.addEventListener("resize",r),window.addEventListener("orientationchange",r),"visualViewport"in window&&((s=window.visualViewport)==null||s.addEventListener("resize",r)),()=>{var l;document.body.classList.remove(i),window.removeEventListener("resize",r),window.removeEventListener("orientationchange",r),"visualViewport"in window&&((l=window.visualViewport)==null||l.removeEventListener("resize",r))}}const a=()=>{const i=window.innerHeight;document.documentElement.style.height="".concat(i,"px"),document.body.style.height="".concat(i,"px"),document.documentElement.style.setProperty("--vh","".concat(i*.01,"px"))};return a(),window.addEventListener("resize",a),window.addEventListener("orientationchange",a),"visualViewport"in window&&((n=window.visualViewport)==null||n.addEventListener("resize",a)),()=>{var i;window.removeEventListener("resize",a),window.removeEventListener("orientationchange",a),"visualViewport"in window&&((i=window.visualViewport)==null||i.removeEventListener("resize",a))}},[])}function Ti(){var a,s;const t={windowWidth:window.innerWidth,windowHeight:window.innerHeight,screenWidth:window.screen.width,screenHeight:window.screen.height,devicePixelRatio:window.devicePixelRatio,viewportWidth:"".concat(window.innerWidth,"px"),viewportHeight:"".concat(window.innerHeight,"px"),vhUnit:"".concat(window.innerHeight/100,"px"),vwUnit:"".concat(window.innerWidth/100,"px"),touchSupport:"ontouchstart"in window,maxTouchPoints:navigator.maxTouchPoints||0,hoverSupport:window.matchMedia("(hover: hover)").matches,pointerSupport:"PointerEvent"in window,userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,cookieEnabled:navigator.cookieEnabled,onlineStatus:navigator.onLine,supportsViewportUnits:CSS.supports("height","100vh"),supportsSafeArea:CSS.supports("padding","env(safe-area-inset-top)"),supportsGrid:CSS.supports("display","grid"),supportsFlex:CSS.supports("display","flex"),orientation:((a=screen.orientation)==null?void 0:a.type)||"unknown",orientationAngle:((s=screen.orientation)==null?void 0:s.angle)||window.orientation||0,isStandalone:window.matchMedia("(display-mode: standalone)").matches};if("visualViewport"in window&&window.visualViewport){const n=window.visualViewport;t.visualViewport={width:n.width,height:n.height,offsetLeft:n.offsetLeft,offsetTop:n.offsetTop,scale:n.scale}}return t}function hi(t="ðŸ“± Device Debug Info"){const a=Ti();return a.visualViewport,a.enhancedDetection,a}function tp(){}function ap(){const t=i=>{},a=()=>t(),s=()=>{setTimeout(()=>t(),100)};window.addEventListener("resize",a),window.addEventListener("orientationchange",s);let n;return"visualViewport"in window&&window.visualViewport&&(n=()=>{},window.visualViewport.addEventListener("resize",n),window.visualViewport.addEventListener("scroll",n)),()=>{window.removeEventListener("resize",a),window.removeEventListener("orientationchange",s),n&&"visualViewport"in window&&window.visualViewport&&(window.visualViewport.removeEventListener("resize",n),window.visualViewport.removeEventListener("scroll",n))}}function sp(){const t=document.createElement("div");t.id="device-debug-overlay",t.style.cssText="\n    position: fixed;\n    top: 10px;\n    right: 10px;\n    background: rgba(0, 0, 0, 0.8);\n    color: white;\n    padding: 10px;\n    border-radius: 8px;\n    font-family: monospace;\n    font-size: 12px;\n    z-index: 9999;\n    max-width: 300px;\n    word-break: break-all;\n  ";const a=()=>{const n=Ti();t.innerHTML="\n      <div><strong>ðŸ“± Device Debug</strong></div>\n      <div>Window: ".concat(n.windowWidth,"Ã—").concat(n.windowHeight,"</div>\n      <div>Screen: ").concat(n.screenWidth,"Ã—").concat(n.screenHeight,"</div>\n      <div>Ratio: ").concat(n.devicePixelRatio,"</div>\n      <div>Touch: ").concat(n.touchSupport?"âœ…":"âŒ","</div>\n      <div>Hover: ").concat(n.hoverSupport?"âœ…":"âŒ","</div>\n      <div>Orientation: ").concat(n.orientation,"</div>\n      ").concat(n.visualViewport?"<div>VV: ".concat(n.visualViewport.width,"Ã—").concat(n.visualViewport.height,"</div>"):"",'\n      <div style="margin-top: 5px; font-size: 10px; opacity: 0.7;">\n        ').concat(new Date().toLocaleTimeString(),"\n      </div>\n    ")};a(),document.body.appendChild(t);const s=setInterval(a,500);return()=>{clearInterval(s),t.parentNode&&t.parentNode.removeChild(t)}}typeof window!="undefined"&&(window.debugDevice={log:hi,quick:tp,monitor:ap,overlay:sp,info:Ti});function np(){const t=Ma({query:"(max-width: 768px)"}),a=Ma({query:"(max-width: 640px)"}),s=Ma({query:"(min-width: 769px) and (max-width: 1024px)"}),n=Ma({query:"(min-width: 1025px)"}),i=Ma({query:"(orientation: portrait)"}),r=Ma({query:"(orientation: landscape)"}),l=Ma({query:"(hover: hover)"}),[d,g]=o.useState(!1),[m,x]=o.useState(()=>({isMobileDevice:ha.isMobile,isTabletDevice:ha.isTablet,isDesktopDevice:ha.isDesktop,isTouchDevice:"ontouchstart"in window,isMobileScreen:t,isSmallScreen:a,isMediumScreen:s,isLargeScreen:n,isPortrait:i,isLandscape:r,hasTouch:"ontouchstart"in window,hasHover:l,supportsViewportUnits:CSS.supports("height","100vh"),deviceInfo:{browser:ha.browserName,os:ha.osName,screenWidth:window.screen.width,screenHeight:window.screen.height,viewportWidth:window.innerWidth,viewportHeight:window.innerHeight},debug:{log:v=>hi(v),logOnChange:d,setLogOnChange:g}}));return o.useEffect(()=>{const v=()=>{x(I=>({...I,isMobileScreen:t,isSmallScreen:a,isMediumScreen:s,isLargeScreen:n,isPortrait:i,isLandscape:r,hasHover:l,deviceInfo:{...I.deviceInfo,viewportWidth:window.innerWidth,viewportHeight:window.innerHeight},debug:{...I.debug,logOnChange:d,setLogOnChange:g}})),d&&hi("ðŸ“± Device State Changed")};return window.addEventListener("resize",v),window.addEventListener("orientationchange",v),(()=>{const I=document.body;I.classList.remove("mobile-device","tablet-device","desktop-device","mobile-screen","small-screen","medium-screen","large-screen","portrait","landscape","has-touch","has-hover"),ha.isMobile&&I.classList.add("mobile-device"),ha.isTablet&&I.classList.add("tablet-device"),ha.isDesktop&&I.classList.add("desktop-device"),t&&I.classList.add("mobile-screen"),a&&I.classList.add("small-screen"),s&&I.classList.add("medium-screen"),n&&I.classList.add("large-screen"),i&&I.classList.add("portrait"),r&&I.classList.add("landscape"),"ontouchstart"in window&&I.classList.add("has-touch"),l&&I.classList.add("has-hover"),t||ha.isMobile?I.classList.add("mobile-lock"):I.classList.remove("mobile-lock")})(),()=>{window.removeEventListener("resize",v),window.removeEventListener("orientationchange",v)}},[t,a,s,n,i,r,l,d]),m}function ip(){const[t,a]=o.useState(ja.getDeviceInfo()),[s,n]=o.useState(ja.getOptimizations());return o.useEffect(()=>{const i=()=>{a(ja.getDeviceInfo()),n(ja.getOptimizations())};return window.addEventListener("devicechange",i),()=>window.removeEventListener("devicechange",i)},[]),{device:t,optimizations:s,isAndroid:t.platform==="android",isIOS:t.platform==="ios",isMobile:t.type==="mobile",isTablet:t.type==="tablet",isDesktop:t.type==="desktop",hasTouch:t.hasTouch,isOnline:t.isOnline,cssClasses:ja.getDeviceCSSClasses(),androidOptimizations:ja.getAndroidOptimizations(),iosOptimizations:ja.getIOSOptimizations(),performanceMetrics:ja.getPerformanceMetrics()}}const rp=({children:t})=>{const{cssClasses:a,device:s,optimizations:n}=ip();return o.useEffect(()=>{document.body.className=document.body.className.replace(/device-\w+|platform-\w+|browser-\w+|screen-\w+|orientation-\w+/g,"").trim(),document.body.classList.add(...a);const i=document.documentElement;return i.style.setProperty("--device-type",s.type),i.style.setProperty("--screen-size",s.screenSize),i.style.setProperty("--animation-level",n.animationLevel),i.style.setProperty("--image-quality",n.imageQuality),()=>{a.forEach(r=>document.body.classList.remove(r))}},[a,s,n]),e.jsx(e.Fragment,{children:t})},op=({isOpen:t,onClose:a,bookingId:s,therapistName:n,duration:i,price:r,responseDeadline:l,onFindNewTherapist:d})=>{const[g,m]=o.useState(0),[x,v]=o.useState("waiting"),[j,I]=o.useState(""),[p,R]=o.useState(null),[w,P]=o.useState(!1);o.useEffect(()=>{if(!(!t||!s))return Ho(s),()=>{Ha(s)}},[t,s]);const D=b=>{try{const y=new Audio("/".concat(b,"-notification.mp3"));y.volume=.7,y.play().catch(T=>u.debug("Audio play failed:",T))}catch(y){u.debug("Audio not available:",y)}},L=()=>{setTimeout(()=>{R({therapistId:"therapist_456",therapistName:"Maya Sari",therapistImage:"/api/placeholder/80/80",acceptedAt:new Date,estimatedArrival:15,whatsappNumber:"+6281234567890"}),v("therapist-found"),se("Therapist found! Please confirm","success"),s&&Ha(s),D("success")},3e3)};o.useEffect(()=>{if(!t)return;const b=setInterval(()=>{const y=new Date().getTime(),T=new Date(l).getTime(),F=Math.max(0,Math.floor((T-y)/1e3));m(F),F===0&&x==="waiting"&&(v("searching"),D("alert"),se("Searching for another available therapist...","warning"),L(),clearInterval(b))},1e3);return()=>clearInterval(b)},[t,l,x]),o.useEffect(()=>{if(!t||!s)return;const b=Ao.subscribe("databases.".concat(Pe.databaseId,".collections.").concat(Pe.collections.bookings,".documents.").concat(s),y=>{u.debug("ðŸ“¡ Booking status update received:",y);const T=y.payload;T.status==="confirmed"?(v("confirmed"),Ha(s),D("success"),se("".concat(n," has accepted your booking!"),"success"),"Notification"in window&&Notification.permission==="granted"&&new Notification("Booking Confirmed!",{body:"".concat(n," has accepted your booking."),icon:"/logo.png"})):(T.status==="rejected"||T.status==="expired"||T.status==="broadcast_all")&&(T.status==="broadcast_all"?(v("broadcasting"),D("alert"),se("Finding nearby therapists for first-come-first-serve...","warning"),"Notification"in window&&Notification.permission==="granted"&&new Notification("Broadcasting to All Therapists",{body:"Finding the next available therapist in your location.",icon:"/logo.png"})):(v("searching"),D("alert"),se("Finding another therapist...","warning"),"Notification"in window&&Notification.permission==="granted"&&new Notification("Searching for Therapist",{body:"Looking for another available therapist for you.",icon:"/logo.png"}),L()))});return"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),()=>{b()}},[t,s,n]),o.useEffect(()=>{if(x==="searching"){const b=setInterval(()=>{I(y=>y.length>=3?"":y+".")},500);return()=>clearInterval(b)}},[x]);const O=async()=>{if(p)try{u.debug("Setting therapist status to busy:",p.therapistId),s&&(Ha(s),Ms.stopBookingAlert(s));const b="âœ… BOOKING CONFIRMED!\n\nCustomer has accepted your service.\nBooking Ref: Indastreet-".concat(s.slice(0,5),"\nDuration: ").concat(i," min\nPrice: Rp ").concat((r*15e3).toLocaleString(),"\n\nPlease start your journey to the customer.\nEstimated arrival: ").concat(p.estimatedArrival," minutes\n\nINDASTREET TEAM"),y="https://wa.me/".concat(p.whatsappNumber.replace("+",""),"?text=").concat(encodeURIComponent(b));window.open(y,"_blank"),v("confirmed"),se("Booking confirmed","success"),D("success"),setTimeout(()=>{a()},3e3)}catch(b){u.error("Error confirming booking:",b)}},H=()=>{x==="confirmed"?a():P(!0)},S=()=>{D("alert"),s&&Ha(s),P(!1),se("Booking cancelled. Please view directory for your preferred Therapist / Places.","info"),setTimeout(()=>{window.location.href="/therapists"},2e3),a()},N=()=>{P(!1),se("Continuing booking","success")},k=b=>{const y=Math.floor(b/60),T=b%60;return"".concat(y,":").concat(T.toString().padStart(2,"0"))};return t?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full shadow-2xl",children:[x==="waiting"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 p-4 rounded-t-2xl",children:e.jsx("h2",{className:"text-xl font-bold text-white text-center",children:"Waiting for Confirmation"})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(ze,{className:"text-orange-600 animate-pulse",size:28}),e.jsx("div",{className:"text-4xl font-bold text-orange-600",children:k(g)})]}),e.jsx("p",{className:"text-center text-gray-600 text-xs",children:"Time remaining for therapist response"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Therapist"}),e.jsx("span",{className:"font-semibold text-gray-800 text-sm",children:n})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Duration"}),e.jsxs("span",{className:"font-semibold text-gray-800 text-sm",children:[i," min"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Price"}),e.jsxs("span",{className:"font-semibold text-gray-800 text-sm",children:["Rp ",(r*15e3).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Reference"}),e.jsxs("span",{className:"font-mono text-xs text-orange-600 font-bold",children:["Indastreet-",s.slice(0,5)]})]})]}),e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ns,{className:"text-orange-600 flex-shrink-0 mt-0.5",size:18}),e.jsxs("p",{className:"text-xs text-orange-900 leading-relaxed",children:[e.jsx("strong",{children:n})," HAS RECEIVED YOUR BOOKING NOTIFICATION AND WILL REPLY WITHIN THE COUNTER TIME DURATION ABOVE. WE THANK YOU FOR YOUR PATIENCE WHILE WE CONFIRM YOUR BOOKING.",e.jsx("br",{}),e.jsx("span",{className:"font-semibold mt-1 block",children:"INDASTREET TEAM"})]})]})}),e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx("div",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]}),e.jsx("div",{className:"p-4 pt-0",children:e.jsx("button",{onClick:H,className:"w-full py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg font-bold hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg text-sm",children:"Continue Browsing"})})]}),x==="searching"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(wn,{size:48,className:"text-orange-600 animate-pulse"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Finding Therapist"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Looking for next suitable therapist",j]}),e.jsx("p",{className:"text-sm text-orange-600 font-semibold",children:"Broadcasting to all available therapists..."})]}),e.jsxs("div",{className:"flex justify-center items-center gap-2 py-4",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full animate-bounce",style:{animationDelay:"200ms"}}),e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full animate-bounce",style:{animationDelay:"400ms"}})]}),e.jsx("div",{className:"p-6 pt-0",children:e.jsx("button",{onClick:S,className:"w-full py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg font-bold hover:from-red-600 hover:to-red-700 transition-all text-sm",children:"Cancel Booking"})})]}),x==="therapist-found"&&p&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ct,{size:48,className:"text-green-600"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Therapist Available!"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"We found a qualified therapist for you"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(Ct,{size:32,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:p.therapistName}),e.jsx("p",{className:"text-sm text-gray-600",children:"Certified Massage Therapist"}),e.jsxs("p",{className:"text-xs text-green-600 font-semibold",children:["Arrives in ",p.estimatedArrival," minutes"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{className:"bg-white p-2 rounded",children:[e.jsx("span",{className:"text-gray-600",children:"Experience"}),e.jsx("div",{className:"font-semibold text-gray-800",children:"5+ Years"})]}),e.jsxs("div",{className:"bg-white p-2 rounded",children:[e.jsx("span",{className:"text-gray-600",children:"Rating"}),e.jsx("div",{className:"font-semibold text-gray-800",children:"4.9/5 â­"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{v("confirmed"),O()},className:"flex-1 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg font-bold hover:from-green-600 hover:to-green-700 transition-all",children:"Accept"}),e.jsx("button",{onClick:()=>v("searching"),className:"flex-1 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:border-gray-400 transition-colors",children:"Find Another"})]})]})}),x==="confirmed"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx($e,{size:48,className:"text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Booking Confirmed!"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:[p?p.therapistName:n," has accepted your booking."]}),e.jsx("p",{className:"text-sm text-gray-500",children:"They will arrive shortly!"}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mt-4",children:e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx(Gt,{className:"text-green-600",size:16}),e.jsx("span",{className:"text-xs text-green-800 font-semibold",children:"WhatsApp confirmation sent!"})]})})]}),e.jsx("div",{className:"p-6 pt-0",children:e.jsx("button",{onClick:a,className:"w-full py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors",children:"Close"})})]}),x==="expired"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ot,{size:48,className:"text-orange-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"No Response Yet"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:[n," hasn't responded within 5 minutes."]}),e.jsx("p",{className:"text-sm text-orange-600 font-semibold",children:"We're now broadcasting your request to all available therapists!"})]}),e.jsxs("div",{className:"p-6 pt-0 space-y-3",children:[e.jsx("button",{onClick:d,className:"w-full py-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl font-bold hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg",children:"Find Another Therapist"}),e.jsx("button",{onClick:S,className:"w-full py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg font-bold hover:from-red-600 hover:to-red-700 transition-all",children:"Cancel Booking"})]})]})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-sm w-full shadow-2xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 p-4 rounded-t-2xl",children:e.jsx("h3",{className:"text-lg font-bold text-white text-center",children:"Cancel Booking?"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ns,{size:32,className:"text-red-600"})}),e.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"Are you sure?"}),e.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed",children:["If you continue browsing now, your current booking will be ",e.jsx("strong",{className:"text-red-600",children:"cancelled"})," and you'll need to start over."]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:S,className:"w-full py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg font-bold hover:from-red-600 hover:to-red-700 transition-all",children:"Yes, Cancel Booking"}),e.jsx("button",{onClick:N,className:"w-full py-3 border-2 border-orange-500 text-orange-600 rounded-lg font-bold hover:bg-orange-50 transition-colors",children:"No, Keep Waiting"})]})]})]})})]}):null},ul=o.createContext(void 0),gl=()=>{const t=o.useContext(ul);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},lp=({children:t})=>{const[a,s]=o.useState(null),[n,i]=o.useState(!1),[r,l]=o.useState(null),[d,g]=o.useState(null),[m,x]=o.useState(null),[v,j]=o.useState(null),[I,p]=o.useState(null),[R,w]=o.useState(!1),[P,D]=o.useState(!1),L=o.useCallback(N=>{l(N)},[]),O=o.useCallback(()=>{s(null),i(!1),L(null),g(null),x(null),j(null),p(null),w(!1),D(!1),Ua()},[]),H=o.useCallback(async()=>{try{const N=await tl();N!=null&&N.user&&L(N.user)}catch{}},[]),S={user:a,setUser:s,isAdminLoggedIn:n,setIsAdminLoggedIn:i,loggedInUser:r,setLoggedInUser:L,loggedInCustomer:d,setLoggedInCustomer:g,loggedInProvider:m,setLoggedInProvider:x,loggedInAgent:v,setLoggedInAgent:j,impersonatedAgent:I,setImpersonatedAgent:p,isHotelLoggedIn:R,setIsHotelLoggedIn:w,isVillaLoggedIn:P,setIsVillaLoggedIn:D,logout:O,restoreUserSession:H};return e.jsx(ul.Provider,{value:S,children:t})};class cp{constructor(){Se(this,"audioCache",new Map);Se(this,"isInitialized",!1);Se(this,"enabled",!0);Se(this,"volume",.7);typeof window!="undefined"&&(this.loadUserPreferences(),this.initializeAudio(),this.requestNotificationPermission())}loadUserPreferences(){const a=localStorage.getItem("notificationSoundsEnabled"),s=localStorage.getItem("notificationVolume");this.enabled=a!=="false",this.volume=s?parseFloat(s):.7}async requestNotificationPermission(){if("Notification"in window&&Notification.permission==="default")try{await Notification.requestPermission()}catch{}}initializeAudio(){try{Object.entries({message:"/sounds/message-notification.mp3",booking:"/sounds/booking-notification.mp3",payment:"/sounds/payment-notification.mp3",alert:"/sounds/alert-notification.mp3"}).forEach(([s,n])=>{const i=new Audio(n);i.volume=this.volume,i.preload="auto",this.audioCache.set(s,i)}),this.isInitialized=!0}catch{}}async play(a="message",s=!1){if(this.enabled&&this.isInitialized)try{const n=this.audioCache.get(a);if(!n)return;if(n.currentTime=0,await n.play(),s&&"vibrate"in navigator){const i={message:[50],booking:[300,150,300,150,300],payment:[100,50,100],alert:[400]};navigator.vibrate(i[a])}}catch{this.playSystemBeep()}}playSystemBeep(){try{const a=new(window.AudioContext||window.webkitAudioContext),s=a.createOscillator(),n=a.createGain();s.connect(n),n.connect(a.destination),s.frequency.value=800,s.type="sine",n.gain.setValueAtTime(.3,a.currentTime),n.gain.exponentialRampToValueAtTime(.01,a.currentTime+.3),s.start(a.currentTime),s.stop(a.currentTime+.3)}catch{}}showBrowserNotification(a,s,n){if("Notification"in window&&Notification.permission==="granted"){const i=new Notification(a,{body:s,icon:"/icon-192.png",badge:"/badge-72.png",...n});i.onclick=()=>{window.focus(),i.close()}}}setEnabled(a){this.enabled=a,localStorage.setItem("notificationSoundsEnabled",a.toString())}isEnabled(){return this.enabled}setVolume(a){this.volume=Math.max(0,Math.min(1,a)),this.audioCache.forEach(s=>{s.volume=this.volume}),localStorage.setItem("notificationVolume",this.volume.toString())}getVolume(){return this.volume}async preloadSounds(){const a=["message","booking","payment","alert"];for(const s of a){const n=this.audioCache.get(s);n&&n.load()}}playBookingAlert(){this.play("booking",!0)}stopPersistentAlert(){this.audioCache.forEach(a=>{a.paused||(a.pause(),a.currentTime=0)})}}const dp=new cp;if(typeof window!="undefined"){const t=()=>{dp.preloadSounds()};document.addEventListener("click",t,{once:!0}),document.addEventListener("touchstart",t,{once:!0})}const qn={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};class mp{constructor(){Se(this,"swRegistration",null);Se(this,"isSupported",!1);this.checkSupport()}checkSupport(){this.isSupported="serviceWorker"in navigator&&"PushManager"in window,this.isSupported||u.warn("âš ï¸ Push notifications not supported on this device")}async initialize(){if(this.isSupported)try{this.swRegistration=await navigator.serviceWorker.register("/sw.js"),u.debug("âœ… Service Worker registered:",this.swRegistration),await this.requestPermission()}catch(a){u.error("âŒ Failed to initialize push notifications:",a)}}async requestPermission(){if(!this.isSupported)return!1;try{return await Notification.requestPermission()==="granted"?(u.debug("âœ… Notification permission granted"),await this.subscribeToPushNotifications(),!0):(u.warn("âš ï¸ Notification permission denied"),!1)}catch(a){return u.error("âŒ Failed to request permission:",a),!1}}async subscribeToPushNotifications(){if(this.swRegistration)try{let a=await this.swRegistration.pushManager.getSubscription();if(!a){const s=qn==null?void 0:qn.VITE_VAPID_PUBLIC_KEY,n={userVisibleOnly:!0};s&&(n.applicationServerKey=this.urlBase64ToUint8Array(s),u.debug("âœ… VAPID key configured for push notifications")),a=await this.swRegistration.pushManager.subscribe(n)}await this.saveSubscriptionToServer(a),u.debug("âœ… Push subscription created:",a)}catch(a){u.error("âŒ Failed to subscribe to push notifications:",a)}}async saveSubscriptionToServer(a){try{const s={endpoint:a.endpoint,keys:{p256dh:wo(a.getKey("p256dh")),auth:wo(a.getKey("auth"))}};localStorage.setItem("push_subscription",JSON.stringify(s)),u.debug("âœ… Push subscription saved")}catch(s){u.error("âŒ Failed to save subscription:",s)}}async sendBookingNotification(a,s){try{if("Notification"in window&&Notification.permission==="granted"){const n=new Notification("ðŸš¨ NEW BOOKING REQUEST!",{body:"".concat(s.customerName," - ").concat(s.duration," min - IDR ").concat(s.price.toLocaleString()),icon:"/logo.png",badge:"/logo.png",tag:"booking-alert",requireInteraction:!0,silent:!1,data:s});n.onclick=()=>{window.focus(),n.close()},"vibrate"in navigator&&navigator.vibrate([200,100,200,100,200,100,200])}u.debug("âœ… Booking notification sent")}catch(n){u.error("âŒ Failed to send notification:",n)}}urlBase64ToUint8Array(a){const s="=".repeat((4-a.length%4)%4),n=(a+s).replace(/\-/g,"+").replace(/_/g,"/"),i=window.atob(n),r=new Uint8Array(i.length);for(let l=0;l<i.length;++l)r[l]=i.charCodeAt(l);return r}}function wo(t){if(!t)return"";const a=new Uint8Array(t);let s="";for(let n=0;n<a.byteLength;n++)s+=String.fromCharCode(a[n]);return window.btoa(s)}const hl=new mp;window.sendBookingNotification=(t,a)=>hl.sendBookingNotification(t,a);class up extends o.Component{constructor(a){super(a),this.state={hasError:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,s){const n="Chat Error: ".concat(a.message,"\nComponent Stack: ").concat(s.componentStack);this.setState({errorInfo:n}),this.props.onError&&this.props.onError(a,n)}render(){var a;if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const s=((a=this.state.error)==null?void 0:a.message)||"Unknown error";return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-red-600 text-lg",children:"âš ï¸"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Chat Service Error"})]}),e.jsx("p",{className:"text-gray-600 mb-2",children:"The chat service encountered an unexpected error. This might be due to:"}),e.jsxs("ul",{className:"text-sm text-gray-500 mb-3 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Network connectivity issues"}),e.jsx("li",{children:"Server maintenance"}),e.jsx("li",{children:"Browser compatibility issues"})]}),e.jsx("p",{className:"text-sm text-red-700 bg-red-50 border border-red-200 rounded px-3 py-2 mb-4 break-words",children:s}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"}),e.jsx("button",{onClick:async()=>{try{const{softRecover:n}=await z(async()=>{const{softRecover:i}=await import("./softNavigation.CPJRQeFv.js");return{softRecover:i}},[]);n()}catch{window.location.reload()}},className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Refresh Page"})]}),!1]})})}return this.props.children}}const pl={landing:"/",home:"/home",about:"/about",contact:"/contact","partner-contact":"/partner-contact",company:"/company","how-it-works":"/how-it-works",faq:"/faq","massage-types":"/massage-types","facial-types":"/facial-types",providers:"/providers",facialProviders:"/facial-providers",discounts:"/discounts","real-chat-test":"/real-chat-test","therapist-login":"/therapist-login",therapistLogin:"/therapist-login","place-login":"/place-login",massagePlaceLogin:"/place-login","employer-login":"/employer-login","facial-portal":"/facial-portal","simple-signup":"/signup",simpleSignup:"/signup","membership-select":"/join",therapist:"/#/dashboard/therapist",therapistDashboard:"/#/dashboard/therapist",therapistPortal:"/#/dashboard/therapist","therapist-dashboard":"/#/dashboard/therapist",dashboard:"/#/dashboard/therapist",therapistStatus:"/#/dashboard/therapist/status","therapist-status":"/#/dashboard/therapist/status",therapistAvailability:"/#/dashboard/therapist/availability","therapist-bookings":"/#/dashboard/therapist/bookings","therapist-earnings":"/#/dashboard/therapist/earnings","therapist-chat":"/#/dashboard/therapist/chat","therapist-notifications":"/#/dashboard/therapist/notifications","therapist-legal":"/#/dashboard/therapist/legal","therapist-calendar":"/#/dashboard/therapist/calendar","therapist-payment":"/#/dashboard/therapist/payment","therapist-payment-status":"/#/dashboard/therapist/payment-status",therapistMenu:"/#/dashboard/therapist/menu","therapist-menu":"/#/dashboard/therapist/menu","therapist-commission":"/#/dashboard/therapist/commission","therapist-schedule":"/#/dashboard/therapist/schedule","therapist-package-terms":"/#/dashboard/therapist/package-terms",massagePlace:"/dashboard/massage-place",placeDashboard:"/dashboard/massage-place",massagePlacePortal:"/dashboard/massage-place",massagePlaceProfile:"/dashboard/massage-place/profile",massagePlaceTherapists:"/dashboard/massage-place/therapists",massagePlaceBookings:"/dashboard/massage-place/bookings",facialPlace:"/dashboard/facial-place",facialPlaceDashboard:"/dashboard/facial-place",facialPlaceProfile:"/dashboard/facial-place/profile",facialPlaceServices:"/dashboard/facial-place/services",facialPlaceBookings:"/dashboard/facial-place/bookings","therapist-profile":"/profile/therapist","massage-place-profile":"/profile/place","facial-place-profile":"/profile/facial","place-detail":"/place","share-therapist":"/share/therapist","share-place":"/share/place","share-facial":"/share/facial","shared-therapist-profile":"/shared/therapist","privacy-policy":"/privacy-policy","cookies-policy":"/cookies-policy","service-terms":"/service-terms","place-terms":"/place-terms","package-terms":"/package-terms","membership-terms":"/membership-terms","mobile-terms-and-conditions":"/mobile-terms",blog:"/blog","indastreet-news":"/indastreet-news","massage-bali":"/blog/massage-bali","balinese-massage":"/blog/balinese-massage","deep-tissue-massage":"/blog/deep-tissue-massage",press:"/press","blog-bali-spa-trends-2025":"/blog/bali-spa-trends-2025","blog-top-10-massage-techniques":"/blog/top-10-massage-techniques","blog-massage-career-indonesia":"/blog/massage-career-indonesia","blog-benefits-regular-massage":"/blog/benefits-regular-massage","blog-hiring-massage-therapists":"/blog/hiring-massage-therapists","blog-traditional-balinese-massage":"/blog/traditional-balinese-massage","blog-spa-tourism-indonesia":"/blog/spa-tourism-indonesia","blog-aromatherapy-massage-oils":"/blog/aromatherapy-massage-oils","blog-pricing-guide-massage":"/blog/pricing-guide-massage","blog-deep-tissue-vs-swedish":"/blog/deep-tissue-vs-swedish","blog-online-presence-therapist":"/blog/online-presence-therapist","blog-wellness-tourism-ubud":"/blog/wellness-tourism-ubud","confirm-therapists":"/confirm-therapists","employer-job-posting":"/employer-job-posting","therapist-listing-payment":"/therapist-listing-payment","indastreet-partners":"/indastreet-partners","website-management":"/website-management","guest-profile":"/guest-profile","qr-code":"/qr-code",notifications:"/notifications",booking:"/booking",membership:"/membership","accept-booking":"/accept-booking","decline-booking":"/decline-booking","lead-accept":"/lead-accept","lead-decline":"/lead-decline","job-posting-payment":"/job-posting-payment","browse-jobs":"/browse-jobs",browseJobs:"/browse-jobs","massage-jobs":"/massage-jobs",massageJobs:"/massage-jobs","partnership-application":"/partnership-application","therapist-job-registration":"/therapist-job-registration",reviews:"/reviews","job-unlock-payment":"/job-unlock-payment","customer-reviews":"/customer-reviews","customer-support":"/customer-support","place-discount-badge":"/place-discount-badge",verifiedProBadge:"/verified-pro-badge","verified-pro-badge":"/verified-pro-badge",mobileTherapistStandards:"/mobile-therapist-standards","mobile-therapist-standards":"/mobile-therapist-standards","guest-alerts":"/guest-alerts","partner-settings":"/partner-settings","admin-login":"/admin-login","career-opportunities":"/career-opportunities","therapist-info":"/therapist-info","employer-info":"/employer-info","payment-info":"/payment-info",admin:"/admin","admin-dashboard":"/admin","admin-therapists":"/admin/therapists","admin-bookings":"/admin/bookings","admin-chat":"/admin/chat","admin-revenue":"/admin/revenue","admin-commissions":"/admin/commissions","admin-live-listings":"/admin/live-listings","women-reviews":"/women-reviews","advanced-search":"/advanced-search","help-faq":"/help-faq","top-therapists":"/top-therapists","special-offers":"/special-offers","video-center":"/video-center","hotels-and-villas":"/hotels-and-villas","hotel-villa-safe-pass":"/hotel-villa-safe-pass",safePass:"/hotel-villa-safe-pass","chat-support":"/chat/support","booking-quick":"/booking/quick","emergency-contact":"/emergency/contact",help:"/help",feedback:"/feedback",agentDashboard:"/dashboard/agent",customerDashboard:"/dashboard/customer",adminDashboard:"/admin",villaDashboard:"/dashboard/villa",hotelDashboard:"/dashboard/hotel"},vo=Object.entries(pl).reduce((t,[a,s])=>(t[s]=a,t),{});function gp(t,a){return pl[t]||"/home"}function hp(t){const a=t.replace(/\?.*$/,"");return vo[a]?vo[a]:a.startsWith("/therapist-profile/")?"shared-therapist-profile":a.startsWith("/profile/therapist/")?"therapist-profile":a.startsWith("/profile/place/")?"massage-place-profile":a.startsWith("/profile/facial/")?"facial-place-profile":a.startsWith("/accept-booking/")?"accept-booking":a.startsWith("/decline-booking/")?"decline-booking":a.startsWith("/share/therapist/")?"shared-therapist-profile":a.startsWith("/share/place/")?"share-place":a.startsWith("/share/facial/")?"share-facial":a==="/join"||a.startsWith("/join/")?"membership-select":a==="/signup"||a.startsWith("/signup")?"simpleSignup":null}function pp(t,a){o.useEffect(()=>{var n;const s=i=>{var r,l,d;if(((r=i.data)==null?void 0:r.type)==="play-notification-sound"){const g=new Audio(i.data.soundUrl);g.volume=1,g.play().catch(m=>{})}((l=i.data)==null?void 0:l.type)==="force-booking-view"&&t(i.data.bookingId),((d=i.data)==null?void 0:d.type)==="booking-expired"&&a(i.data.bookingId,i.data.reason)};return(n=navigator.serviceWorker)==null||n.addEventListener("message",s),()=>{var i;(i=navigator.serviceWorker)==null||i.removeEventListener("message",s)}},[t,a])}function xp(t,a){o.useEffect(()=>{const s=new URLSearchParams(window.location.search),n=s.get("forceBookingView"),i=s.get("autoAcceptBooking");n&&(t(n),s.delete("forceBookingView"),window.history.replaceState({},"","".concat(window.location.pathname,"?").concat(s.toString()))),i&&(a(i),s.delete("autoAcceptBooking"),window.history.replaceState({},"","".concat(window.location.pathname,"?").concat(s.toString())))},[t,a])}function fp(){return async(a,s,n)=>{try{switch(n){case"whatsapp_clicks":case"whatsappClicks":await fa.trackWhatsAppClick(a,s);break;case"views":case"profileViews":await fa.trackProfileView(a,s);break;case"bookings":await fa.trackEvent({eventType:$s.BOOKING_INITIATED,...s==="therapist"?{therapistId:a}:{placeId:a},metadata:{providerType:s}});break;default:break}}catch{}}}const xl=()=>{if(typeof window=="undefined")return!1;const t=window.matchMedia("(display-mode: standalone)").matches,a=window.navigator.standalone===!0,n=new URLSearchParams(window.location.search).get("source")==="pwa";return t||a||n},bp=()=>!xl(),yp=()=>{const{setAuthLoading:t,setProgress:a}=Fs(),{user:s,loggedInUser:n,loggedInProvider:i,loggedInCustomer:r,restoreUserSession:l}=gl();return o.useEffect(()=>{let x=!1;return!(s||n||i||r)&&typeof window!="undefined"&&!sessionStorage.getItem("auth-initialized")?(x=!0,t(!0),a({current:20,stage:"authenticating",message:"Checking authentication..."}),l().then(()=>{a({current:100,stage:"finalizing",message:"Authentication complete"}),sessionStorage.setItem("auth-initialized","true"),setTimeout(()=>t(!1),500)}).catch(()=>{sessionStorage.setItem("auth-initialized","true"),t(!1)})):t(!1),()=>{x&&t(!1)}},[s,n,i,r,t,a,l]),{startAuthFlow:(x="Authenticating...")=>{t(!0),a({current:0,stage:"authenticating",message:x})},completeAuthFlow:()=>{a({current:100,stage:"finalizing",message:"Success!"}),setTimeout(()=>t(!1),500)},failAuthFlow:()=>{t(!1)}}},wp=({children:t,isLoading:a,page:s})=>{const{setGlobalLoading:n,setPageLoading:i,loading:r}=Fs(),{user:l}=gl();return yp(),o.useEffect(()=>{n(!1)},[n]),o.useEffect(()=>{if(s==="landing"||s==="home"||s===""){i(!1);return}i(!!(s&&a))},[a,s,i]),o.useEffect(()=>{u.debug("ðŸš€ [LOADING MANAGER] State changed:",{global:r.global,auth:r.auth,page:r.page,data:r.data,appIsLoading:a,currentPage:s,hasUser:!!l})},[r,a,s,l]),e.jsx(e.Fragment,{children:t})};class vp{constructor(){Se(this,"STORAGE_KEY","pwa-install-state-preservation");Se(this,"PRESERVATION_TIMEOUT",3e5)}preserveChatState(a){var s;try{const i={preservedChatState:{isOpen:a.isOpen,currentBooking:a.currentBooking,messages:a.messages||[],therapistId:((s=a.therapist)==null?void 0:s.id)||"",customerId:a.customerId||"",bookingStep:a.bookingStep||"",notificationPreferences:a.notificationPreferences||{},timestamp:Date.now()},installationInProgress:!0,preservationTimestamp:Date.now()};localStorage.setItem(this.STORAGE_KEY,JSON.stringify(i)),sessionStorage.setItem(this.STORAGE_KEY,JSON.stringify(i))}catch{}}restoreChatState(){try{let a=localStorage.getItem(this.STORAGE_KEY)||sessionStorage.getItem(this.STORAGE_KEY);if(!a)return null;const s=JSON.parse(a);return Date.now()-s.preservationTimestamp>this.PRESERVATION_TIMEOUT?(this.clearPreservedState(),null):s.preservedChatState?(this.clearPreservedState(),s.preservedChatState):null}catch{return null}}clearPreservedState(){try{localStorage.removeItem(this.STORAGE_KEY),sessionStorage.removeItem(this.STORAGE_KEY)}catch{}}isInstallationInProgress(){try{const a=localStorage.getItem(this.STORAGE_KEY);if(!a)return!1;const s=JSON.parse(a);return s.installationInProgress&&Date.now()-s.preservationTimestamp<this.PRESERVATION_TIMEOUT}catch{return!1}}setupInstallationListeners(){const a=()=>{},s=()=>{},n=()=>{!document.hidden&&this.isInstallationInProgress()};return window.addEventListener("beforeinstallprompt",a),window.addEventListener("appinstalled",s),document.addEventListener("visibilitychange",n),()=>{window.removeEventListener("beforeinstallprompt",a),window.removeEventListener("appinstalled",s),document.removeEventListener("visibilitychange",n)}}}const Yn=new vp;class jp{constructor(){Se(this,"currentStatus",{status:"healthy",lastSuccessfulRequest:Date.now(),failedRequestCount:0,latency:0,services:{database:"healthy",realtime:"healthy",auth:"healthy"}});Se(this,"CHECK_INTERVAL",3e4);Se(this,"DEGRADED_THRESHOLD",3);Se(this,"OFFLINE_THRESHOLD",5);Se(this,"LATENCY_WARNING_THRESHOLD",2e3);Se(this,"intervalId",null);Se(this,"listeners",new Set)}startMonitoring(){this.intervalId||(this.performHealthCheck(),this.intervalId=setInterval(()=>{this.performHealthCheck()},this.CHECK_INTERVAL))}stopMonitoring(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}addStatusListener(a){return this.listeners.add(a),a(this.currentStatus),()=>{this.listeners.delete(a)}}getCurrentStatus(){return{...this.currentStatus}}async performHealthCheck(){const a=Date.now();try{const[s,n,i]=await Promise.allSettled([this.checkDatabaseHealth(),this.checkRealtimeHealth(),this.checkAuthHealth()]),r=Date.now()-a,l={...this.currentStatus,latency:r};l.services.database=s.status==="fulfilled"&&s.value.success?"healthy":"offline",l.services.realtime=n.status==="fulfilled"&&n.value.success?"healthy":"offline",l.services.auth=i.status==="fulfilled"&&i.value.success?"healthy":"offline";const d=Object.values(l.services).filter(g=>g==="healthy").length;d===3?(l.status=r>this.LATENCY_WARNING_THRESHOLD?"degraded":"healthy",l.failedRequestCount=Math.max(0,l.failedRequestCount-1),l.lastSuccessfulRequest=Date.now()):d>=1?(l.status="degraded",l.failedRequestCount++):(l.status="offline",l.failedRequestCount++),this.updateStatus(l)}catch{const n={...this.currentStatus,status:"offline",failedRequestCount:this.currentStatus.failedRequestCount+1,latency:Date.now()-a};this.updateStatus(n)}}async checkDatabaseHealth(){const a=Date.now();try{const{databases:s,DATABASE_ID:n}=await z(async()=>{const{databases:i,DATABASE_ID:r}=await import("./route-therapist.DVVqC6AH.js").then(l=>l.br);return{databases:i,DATABASE_ID:r}},__vite__mapDeps([0,1,2,3,4,5,6]));return await s.listCollections(n),{success:!0,latency:Date.now()-a,service:"database"}}catch(s){return{success:!1,latency:Date.now()-a,error:s instanceof Error?s.message:"Unknown error",service:"database"}}}async checkRealtimeHealth(){const a=Date.now();try{const{client:s}=await z(async()=>{const{client:n}=await import("./appwriteClient.DhdE2o8g.js");return{client:n}},__vite__mapDeps([56,1]));return typeof s.subscribe=="function"?{success:!0,latency:Date.now()-a,service:"realtime"}:{success:!1,latency:Date.now()-a,service:"realtime",error:"Client missing subscribe method"}}catch(s){return{success:!1,latency:Date.now()-a,error:s instanceof Error?s.message:"Unknown error",service:"realtime"}}}async checkAuthHealth(){const a=Date.now();try{const{account:s}=await z(async()=>{const{account:n}=await import("./route-therapist.DVVqC6AH.js").then(i=>i.br);return{account:n}},__vite__mapDeps([0,1,2,3,4,5,6]));try{await s.get()}catch{}return{success:!0,latency:Date.now()-a,service:"auth"}}catch(s){return{success:!1,latency:Date.now()-a,error:s instanceof Error?s.message:"Unknown error",service:"auth"}}}updateStatus(a){const s=this.currentStatus.status;this.currentStatus=a,s!==a.status&&this.notifyStatusChange(s,a.status),this.listeners.forEach(n=>{try{n(a)}catch{}})}notifyStatusChange(a,s){s==="offline"?this.showUserAlert("Connection Lost","ðŸ”´ Unable to reach server. Your actions may not be saved.","error"):s==="degraded"?this.showUserAlert("Slow Connection","ðŸŸ¡ Connection is slow. Some features may be delayed.","warning"):a!=="healthy"&&s==="healthy"&&this.showUserAlert("Connection Restored","âœ… Connection is back to normal.","success")}showUserAlert(a,s,n){window.dispatchEvent(new CustomEvent("appwrite-health-alert",{detail:{title:a,message:s,type:n}})),"Notification"in window&&Notification.permission==="granted"&&new Notification(a,{body:s,icon:"/icon-192.png",tag:"appwrite-health"})}}const Qn=new jp,js={success:(t,a)=>{u.info("âœ… ".concat(t).concat(a!=null&&a.description?": "+a.description:""))},error:(t,a)=>{u.error("âŒ ".concat(t).concat(a!=null&&a.description?": "+a.description:""))},warning:(t,a)=>{u.warn("âš ï¸ ".concat(t).concat(a!=null&&a.description?": "+a.description:""))}},Np=({children:t,onStateRestored:a})=>{const[s,n]=o.useState({status:"healthy",lastSuccessfulRequest:Date.now(),failedRequestCount:0,latency:0,services:{database:"healthy",realtime:"healthy",auth:"healthy"}}),[i,r]=o.useState(!1);o.useEffect(()=>{u.debug("ðŸ”§ Initializing PWA state manager...");const d=async()=>{try{const v=Yn.restoreChatState();v&&a&&(u.debug("âœ… PWA state restored:",v),a(v),js.success("Chat restored",{description:"Your conversation was preserved during app installation.",duration:4e3}))}catch(v){u.warn("âš ï¸ Failed to restore PWA state:",v)}},g=()=>{try{Qn.startMonitoring(),r(!0),u.debug("âœ… Connection health monitoring started")}catch(v){u.error("âŒ Failed to start health monitoring:",v)}};d(),g();const m=v=>{u.debug("ðŸ“± PWA installation prompt detected"),v.preventDefault();const j=l();j&&(Yn.preserveChatState(j),u.debug("ðŸ’¾ Chat state preserved for PWA installation"))},x=()=>{u.debug("âœ… PWA installed successfully"),js.success("App Installed",{description:"The app is now installed and your chat is preserved.",duration:5e3})};return window.addEventListener("beforeinstallprompt",m),window.addEventListener("appinstalled",x),()=>{window.removeEventListener("beforeinstallprompt",m),window.removeEventListener("appinstalled",x),i&&(Qn.stopMonitoring(),r(!1))}},[a]),o.useEffect(()=>{const d=Qn.addStatusListener(m=>{n(m)}),g=m=>{const{title:x,message:v,type:j}=m.detail;switch(j){case"error":js.error(x,{description:v,duration:8e3,action:{label:"Retry",onClick:()=>{window.location.reload()}}});break;case"warning":js.warning(x,{description:v,duration:6e3});break;case"success":js.success(x,{description:v,duration:4e3});break}};return window.addEventListener("appwrite-health-alert",g),()=>{d(),window.removeEventListener("appwrite-health-alert",g)}},[]);const l=o.useCallback(()=>{try{return{timestamp:Date.now(),isOpen:document.querySelector('[data-chat-open="true"]')!==null,currentBooking:JSON.parse(localStorage.getItem("currentBooking")||"null"),messages:JSON.parse(localStorage.getItem("chatMessages")||"[]"),unreadCount:parseInt(localStorage.getItem("unreadChatCount")||"0"),therapistInfo:JSON.parse(localStorage.getItem("selectedTherapist")||"null"),bookingStep:localStorage.getItem("currentBookingStep")||"initial",formData:JSON.parse(localStorage.getItem("bookingFormData")||"{}"),connectionStatus:s.status,preservationReason:"pwa-installation"}}catch(d){return u.warn("âš ï¸ Failed to extract chat state:",d),null}},[s]);return o.useEffect(()=>{const d=()=>{if(document.visibilityState==="hidden"){const g=l();g&&Yn.preserveChatState(g)}};return document.addEventListener("visibilitychange",d),()=>{document.removeEventListener("visibilitychange",d)}},[l]),e.jsxs(e.Fragment,{children:[t,s.status==="offline"&&e.jsx("div",{className:"fixed top-4 right-4 z-[9999] max-w-sm",children:e.jsxs("div",{className:"px-4 py-3 rounded-lg shadow-lg border-l-4 bg-red-50 border-red-500 text-red-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"font-medium",children:"Connection Lost"})]}),e.jsx("p",{className:"text-sm mt-1",children:"Your messages may not be sent until connection is restored."})]})}),(()=>{try{const d=localStorage.getItem("pwa-install-state");return d&&JSON.parse(d).installationInProgress}catch{return!1}})()&&e.jsx("div",{className:"fixed bottom-4 left-4 z-[9999] max-w-sm",children:e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 px-4 py-3 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 animate-pulse"}),e.jsx("span",{className:"font-medium text-blue-800",children:"Installing App"})]}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Your chat will be preserved during installation."})]})})]})};typeof window!="undefined"&&(window.reportBookingComplianceError=t=>{window.dispatchEvent(new CustomEvent("booking-compliance-error",{detail:{...t,id:Date.now().toString(),timestamp:new Date}}))});o.lazy(()=>z(()=>import("./route-therapist.DVVqC6AH.js").then(t=>t.bA),__vite__mapDeps([0,1,2,3,4,5,6])).then(t=>({default:t.FloatingChatWindow})));const kp=()=>z(()=>import("./bookingExpirationService.CM8Yhd05.js"),__vite__mapDeps([110,0,1,2,3,4,5,6,8,9])).then(t=>t.bookingExpirationService),Sp=()=>z(()=>Promise.resolve().then(()=>ui),void 0).then(t=>({analyticsService:t.analyticsService,AnalyticsEventType:t.AnalyticsEventType})),Pp=o.lazy(()=>z(()=>import("./route-therapist.DVVqC6AH.js").then(t=>t.bI),__vite__mapDeps([0,1,2,3,4,5,6]))),Ip=()=>{var U,B;u.debug("App.tsx: App component rendering");const t=o.useRef(null);o.useEffect(()=>{const A=setTimeout(async()=>{try{await z(()=>import("./enterpriseInitService.BM-4udNH.js"),__vite__mapDeps([111,0,1,2,3,4,5,6])),u.debug("Enterprise services initialized (lazy)"),await Sp(),u.debug("Analytics services loaded (lazy)");const c=await kp();t.current=c,c.start(),u.debug("Booking expiration service loaded and started (lazy)")}catch(c){u.error("Failed to lazy-load enterprise services",{error:c})}},200);return()=>clearTimeout(A)},[]),ep();const a=np(),[s,n]=o.useState(null),i=Qh(),{state:r,navigation:l,authHandlers:d,providerAgentHandlers:g,derived:m,restoreUserSession:x}=i;o.useEffect(()=>{const f=()=>{const c=window.location.pathname+window.location.hash;if(c==="/"||c==="/home"||c==="/#/home"||c.includes("/home")||c===""||c==="/#"){const C=sessionStorage.getItem("pending_deeplink"),M=sessionStorage.getItem("direct_therapist_id");C&&(u.debug("[REDIRECT FIX] Clearing unwanted pending deeplink on home page visit",{pendingDeeplink:C}),sessionStorage.removeItem("pending_deeplink")),M&&(u.debug("[REDIRECT FIX] Clearing direct_therapist_id on home page visit",{directTherapistId:M}),sessionStorage.removeItem("direct_therapist_id")),u.debug("[REDIRECT FIX] Current path",{currentPath:c}),u.debug("[REDIRECT FIX] Cleared all redirect-causing session storage items")}};f();const A=()=>{f()};return window.addEventListener("popstate",A),window.addEventListener("hashchange",A),()=>{window.removeEventListener("popstate",A),window.removeEventListener("hashchange",A)}},[]);const v=async f=>{try{const A={id:f,customerName:"J.S.",service:"Traditional Thai Massage",date:new Date().toLocaleDateString(),time:"2:00 PM",duration:"90 minutes",price:"IDR 450,000",receivedAt:Date.now()-6e4,expiresAt:Date.now()+24e4};n(A)}catch(A){u.error("Failed to fetch forced booking",{error:A})}},j=async f=>{try{u.debug("Auto-accepting booking",{bookingId:f}),alert("Booking accepted successfully!")}catch(A){u.error("Auto-accept failed",{error:A}),alert("Failed to accept booking. Please try manually.")}};pp(v,async(f,A)=>{u.debug("Handling booking expiration",{bookingId:f,reason:A}),n(null)}),xp(v,j);const[p,R]=o.useState(!1),[w,P]=o.useState(null),[D,L]=o.useState(null),[O,H]=o.useState(!0);o.useEffect(()=>{const f=window.location.pathname,A=window.location.hash,c=window.location.search;if(A.startsWith("#/")||f==="/"&&!A||f.includes("/admin"))return;if(f==="/home"||f==="/therapist"||f==="/therapist-dashboard"||f.startsWith("/therapist-profile/")||f.startsWith("/dashboard/")){u.debug("[HASHROUTER FIX] Clean URL detected, redirecting to hash URL"),u.debug("[HASHROUTER FIX] From URL",{url:window.location.href});const C=window.location.origin+"/#"+f+c;u.debug("[HASHROUTER FIX] To URL",{url:C}),window.location.replace(C)}},[]),o.useEffect(()=>{const f=new URLSearchParams(window.location.search),A=f.get("pwa")==="true",c=f.get("page"),h=xl();u.debug("PWA Detection",{pwaParam:A,pageParam:c,isPWAMode:h,shouldAllowRedirects:bp(),url:window.location.href}),(A||h)&&c==="status"&&(u.debug("PWA Home Screen Launch - Checking authentication status"),r.loggedInProvider&&r.loggedInProvider.type==="therapist"?(u.debug("Therapist authenticated - Routing to Status Dashboard"),l.setPage("therapist-status")):(u.debug("Not authenticated - Routing to Therapist Login"),sessionStorage.setItem("pwa-redirect-after-login","therapist-status"),l.setPage("signin")))},[r.loggedInProvider]),o.useEffect(()=>{(a.isMobileDevice||a.isMobileScreen)&&u.debug("Mobile device detected",{device:a.isMobileDevice?"Mobile Device":"Mobile Screen",screen:"".concat(a.deviceInfo.viewportWidth,"x").concat(a.deviceInfo.viewportHeight),orientation:a.isPortrait?"Portrait":"Landscape",browser:a.deviceInfo.browser,os:a.deviceInfo.os,hasTouch:a.hasTouch,hasHover:a.hasHover})},[a.isMobileDevice,a.isMobileScreen,a.isPortrait,a.deviceInfo.viewportWidth,a.deviceInfo.viewportHeight]),Zh();const{language:S,setLanguage:N}=r;Us(S);const k=fp();o.useEffect(()=>{u.debug("React state updated - activeChat changed"),D?(u.debug("activeChat is now set",{chatRoomId:D.chatRoomId,bookingId:D.bookingId,providerId:D.providerId}),u.debug("Next: ChatWindow should render in JSX")):u.debug("activeChat cleared - ChatWindow hidden")},[D]),o.useEffect(()=>((async()=>{var c,h;try{if(window.Appwrite)u.debug("Appwrite SDK already available from CDN");else{u.debug("CDN failed, loading Appwrite from npm");const W=await z(()=>import("./vendor-appwrite.BT2H32tF.js"),[]);window.Appwrite=W,u.debug("Appwrite SDK loaded from npm",{keys:Object.keys(W)})}const{account:C}=await z(async()=>{const{account:W}=await import("./route-therapist.DVVqC6AH.js").then(X=>X.br);return{account:W}},__vite__mapDeps([0,1,2,3,4,5,6])),{sessionCache:M}=await z(async()=>{const{sessionCache:W}=await Promise.resolve().then(()=>ao);return{sessionCache:W}},void 0),E=M.get();if(E){E.hasSession&&u.debug("Session active (cached)",{email:(c=E.user)==null?void 0:c.email});return}try{const W=await Promise.race([C.get(),new Promise((X,_)=>setTimeout(()=>_(new Error("timeout")),500))]);M.set(!0,W),u.debug("Session already active",{email:W.email})}catch(W){M.setNoSession(),(W==null?void 0:W.code)!==401&&(W==null?void 0:W.message)!=="timeout"&&u.debug("Session check",{message:W.message||"No active session"})}}catch(C){(h=C.message)!=null&&h.includes("already exists")||u.debug("Session initialization",{message:C.message})}})(),typeof window!="undefined"&&(window.sessionStorage.setItem("booking_initial_url",window.location.href),u.debug("FB AI Compliance: Monitoring initialized for booking flow")),hl.initialize().catch(c=>{u.debug("Push notification initialization",{message:c.message})}),(async()=>{u.debug("WebSocket connection handling delegated to EnterpriseWebSocketService")})(),()=>{t.current&&t.current.stop()}),[r.page]),o.useEffect(()=>{const f=async c=>{u.debug("App refresh triggered",{detail:c.detail});try{if("sessionCache"in window){const{sessionCache:C}=await z(async()=>{const{sessionCache:M}=await Promise.resolve().then(()=>ao);return{sessionCache:M}},void 0);C.clear()}(r.page==="home"||r.page==="landing")&&(u.debug("Refreshing therapist data"),window.dispatchEvent(new CustomEvent("refresh-therapists")));const h=window.location.hash;h.includes("therapist-profile")?(u.debug("Refreshing therapist profile"),window.dispatchEvent(new CustomEvent("refresh-profile"))):h.includes("dashboard")&&(u.debug("Refreshing dashboard data"),window.dispatchEvent(new CustomEvent("refresh-dashboard"))),"navigator"in window&&"vibrate"in navigator&&navigator.vibrate([50,50,50])}catch(h){u.error("Refresh error",{error:h})}};window.addEventListener("app-refresh",f);const A=()=>{localStorage.removeItem("temp-booking-data"),sessionStorage.removeItem("temp-chat-state")};return window.addEventListener("beforeunload",A),()=>{window.removeEventListener("app-refresh",f),window.removeEventListener("beforeunload",A)}},[r.page]),o.useEffect(()=>{try{const f=new URLSearchParams(window.location.search),A=f.get("agent"),c=f.get("provider"),h=f.get("platform")||"copy";if(A&&c){const[C,M]=c.split("-"),E=C==="therapist"?"therapist":"place",W=M;sessionStorage.setItem("pending_deeplink",JSON.stringify({agent:A,provider:c,platform:h})),agentShareAnalyticsService.trackShareClick({agentCode:A,providerType:E,providerId:W,platform:h});const X=new URL(window.location.href);X.searchParams.delete("agent"),X.searchParams.delete("provider"),X.searchParams.delete("platform"),window.history.replaceState({},"",X.toString())}}catch(f){u.warn("Inbound share tracking failed",{error:f})}},[]),u.debug("App.tsx: Current language state",{language:S}),u.debug("App.tsx: Current page state",{page:r.page}),o.useEffect(()=>{u.debug("Route changed",{page:r.page}),window.scrollTo({top:0,left:0,behavior:"auto"}),document.documentElement&&(document.documentElement.scrollTop=0),document.body&&(document.body.scrollTop=0),R(!1),P(null)},[r.page]),o.useEffect(()=>{const f=()=>{u.debug("[APP] navigateToLanding event received - navigating to landing page");const A=sessionStorage.getItem("pending_deeplink");A&&(u.debug("[HOME_NAV] Clearing pending deeplink on home navigation",{pending:A}),sessionStorage.removeItem("pending_deeplink")),l==null||l.setPage("landing")};return window.addEventListener("navigateToLanding",f),()=>{window.removeEventListener("navigateToLanding",f)}},[l]),o.useEffect(()=>{u.debug("========== PAGE STATE =========="),u.debug("[PAGE STATE] Page changed"),u.debug("Current page",{page:r.page}),u.debug("Previous page",{title:document.title}),u.debug("Current URL",{url:window.location.href}),u.debug("Pathname",{pathname:window.location.pathname}),u.debug("================================")},[r.page]),o.useEffect(()=>{if(sessionStorage.getItem("app_initial_load")!=="done"){sessionStorage.setItem("app_initial_load","done");return}const A=window.location.pathname,c=gp(r.page);u.debug("========== URL SYNC =========="),u.debug("[URL SYNC] DISABLED - Would cause redirect loop"),u.debug("Current path",{path:A}),u.debug("Expected URL",{url:c}),u.debug("Match",{match:A===c}),u.debug("URL sync disabled to prevent HashRouter conflicts"),u.debug("==============================")},[r.page]),o.useEffect(()=>{const f=A=>{const c=window.location.pathname,h=hp(c);u.debug("========== NAVIGATION =========="),u.debug("[NAVIGATION] Browser back/forward detected"),u.debug("Path",{path:c}),u.debug("Resolved page",{page:h}),u.debug("Current page",{current:r.page}),u.debug("================================"),h&&h!==r.page&&(u.debug("[REDIRECT] Page change triggered by popstate",{from:r.page,to:h}),r.setPage(h))};return window.addEventListener("popstate",f),()=>{window.removeEventListener("popstate",f)}},[r.page,r.setPage]),o.useEffect(()=>{var f,A,c;try{let h=window.location.pathname||"";const C=window.location.hash||"";if(C.startsWith("#/")&&(h=C.substring(1),u.debug("[HASH URL] Parsed path from hash",{path:h})),h.startsWith("/accept-booking/"))r.setPage("accept-booking");else if(h==="/join"||h.startsWith("/join/"))r.setPage("membership-select");else if(h==="/admin"||h.startsWith("/admin/"))u.debug("[ADMIN URL] Admin route detected",{path:h}),h==="/admin"?r.setPage("admin"):h==="/admin/therapists"?r.setPage("admin-therapists"):h==="/admin/bookings"?r.setPage("admin-bookings"):h==="/admin/chat"?r.setPage("admin-chat"):h==="/admin/revenue"?r.setPage("admin-revenue"):h==="/admin/commissions"?r.setPage("admin-commissions"):r.setPage("admin");else if(h.startsWith("/therapist-profile/")){u.debug("Direct therapist profile path detected",{path:h});const M=h.match(/\/therapist-profile\/([a-z0-9]+)-/);if(M){const E=M[1];u.debug("Extracted therapist ID",{therapistId:E}),r.setPage("shared-therapist-profile"),sessionStorage.setItem("direct_therapist_id",E)}else u.warn("Could not extract therapist ID from path",{path:h})}else if(h.startsWith("/profile/therapist/")){const M=window.location.href;if(M.includes("/home")||M.endsWith("/")||M.includes("/#/home")||M.includes("/#home")){u.debug("[URL PROCESSING] Skipping therapist deeplink - user navigating to home"),sessionStorage.removeItem("pending_deeplink");return}const W=h.match(/\/profile\/therapist\/(\d+)-/);if(W&&((f=r.therapists)!=null&&f.length)){const X=W[1],_=r.therapists.find($=>($.id||$.$id||"").toString()===X);_&&(r.setSelectedTherapist(_),r.page!=="therapist-profile"&&(u.debug("[PAGE STATE CHANGE TRIGGERED] Setting page to therapist-profile"),r.setPage("therapist-profile")))}else W&&(u.debug("[URL PROCESSING] Creating pending deeplink for therapist",{therapistId:W[1]}),sessionStorage.setItem("pending_deeplink",JSON.stringify({provider:"therapist-".concat(W[1]),targetPage:"therapist-profile"})))}else if(h.startsWith("/profile/place/")){const M=h.match(/\/profile\/place\/(\d+)-/);if(M&&((A=r.places)!=null&&A.length)){const E=M[1],W=r.places.find(X=>(X.id||X.$id||"").toString()===E);W&&(r.setSelectedPlace(W),r.setPage("massage-place-profile"))}else M&&sessionStorage.setItem("pending_deeplink",JSON.stringify({provider:"place-".concat(M[1]),targetPage:"massage-place-profile"}))}else if(h.startsWith("/profile/facial/")){const M=h.match(/\/profile\/facial\/([^/-]+)/);if(M&&((c=r.facialPlaces)!=null&&c.length)){const E=M[1],W=r.facialPlaces.find(X=>(X.$id||X.id||"").toString()===E);W&&(r.setSelectedPlace(W),r.setPage("facial-place-profile"))}else M&&sessionStorage.setItem("pending_deeplink",JSON.stringify({provider:"facial-".concat(M[1]),targetPage:"facial-place-profile"}))}else if(h==="/signup"||h.startsWith("/signup")){const M=new URLSearchParams(window.location.search),E=M.get("plan"),W=M.get("portal");E&&W&&(localStorage.setItem("selected_membership_plan",E),localStorage.setItem("selectedPortalType",W)),r.setPage("simpleSignup");return}}catch(h){u.warn("Path detection failed",{error:h})}},[r.therapists,r.places,r.facialPlaces]),o.useEffect(()=>{const f=()=>{const A=window.location.hash||"";if(u.debug("[HASH CHANGE] Hash changed",{hash:A}),A.startsWith("#/")){const c=A.substring(1);if(u.debug("[HASH CHANGE] Parsed path",{path:c}),c==="/admin"||c.startsWith("/admin/"))u.debug("[HASH CHANGE] Admin route detected",{path:c}),c==="/admin"?r.setPage("admin"):c==="/admin/therapists"?r.setPage("admin-therapists"):c==="/admin/bookings"?r.setPage("admin-bookings"):c==="/admin/chat"?r.setPage("admin-chat"):c==="/admin/revenue"?r.setPage("admin-revenue"):c==="/admin/commissions"?r.setPage("admin-commissions"):r.setPage("admin");else if(c.startsWith("/therapist-profile/")){const h=c.match(/\/therapist-profile\/([a-z0-9]+)-/);if(h){const C=h[1];u.debug("[HASH CHANGE] Setting page to shared-therapist-profile",{therapistId:C}),r.setPage("shared-therapist-profile"),sessionStorage.setItem("direct_therapist_id",C)}}else c.startsWith("/profile/facial/")?(u.debug("[HASH CHANGE] Setting page to facial-place-profile"),r.setPage("facial-place-profile")):c.startsWith("/profile/place/")&&(u.debug("[HASH CHANGE] Setting page to massage-place-profile"),r.setPage("massage-place-profile"))}};return window.addEventListener("hashchange",f),()=>window.removeEventListener("hashchange",f)},[r.setPage]),o.useEffect(()=>{try{if(r.page==="home"||r.page==="landing"){sessionStorage.getItem("pending_deeplink")&&(u.debug("[DEEPLINK] Clearing pending deeplink - user on home/landing page"),sessionStorage.removeItem("pending_deeplink")),sessionStorage.removeItem("direct_therapist_id");return}const f=window.location.pathname+window.location.hash;if(f==="/"||f==="/home"||f==="/#/home"||f.includes("/home")||f===""||f==="/#"){u.debug("[DEEPLINK] Skipping deeplink processing - URL indicates home page");const _=sessionStorage.getItem("pending_deeplink");_&&(u.debug("[DEEPLINK] Clearing pending deeplink from home page",{pending:_}),sessionStorage.removeItem("pending_deeplink")),sessionStorage.removeItem("direct_therapist_id");return}const c=sessionStorage.getItem("pending_deeplink");if(!c)return;u.debug("[DEEPLINK DEBUG] Found pending deeplink",{pending:c}),u.debug("[DEEPLINK DEBUG] Current URL",{url:window.location.href}),u.debug("[DEEPLINK DEBUG] Current page",{page:r.page});const h=JSON.parse(c),{provider:C,targetPage:M}=h;if(!C)return;const[E,W]=C.split("-"),X=(W||"").toString();if(u.debug("[DEEPLINK DEBUG] Parsed data",{ptype:E,idStr:X,targetPage:M}),E==="therapist"&&r.therapists&&r.therapists.length){const _=r.therapists.find($=>{var q,J;return((J=(q=$.id)!=null?q:$.$id)!=null?J:"").toString()===X});if(u.debug("[DEEPLINK DEBUG] Therapist search result",{name:(_==null?void 0:_.name)||"NOT FOUND"}),_){u.debug("[DEEPLINK] Auto-navigating to therapist profile",{name:_.name}),r.setSelectedTherapist(_);const $=M==="shared-therapist-profile"?"shared-therapist-profile":"therapistProfile";r.page!==$&&(u.debug("[PAGE STATE CHANGE TRIGGERED] Setting page",{target:$}),r.setPage($)),sessionStorage.removeItem("pending_deeplink"),u.debug("[DEEPLINK] Cleared pending deeplink")}}else if(E==="place"&&r.places&&r.places.length){const _=r.places.find($=>{var q,J;return((J=(q=$.id)!=null?q:$.$id)!=null?J:"").toString()===X});_&&(r.setSelectedPlace(_),r.page!=="massage-place-profile"&&(u.debug("[PAGE STATE CHANGE TRIGGERED] Setting page to massage-place-profile"),r.setPage("massage-place-profile")),sessionStorage.removeItem("pending_deeplink"))}else if(E==="facial"&&r.facialPlaces&&r.facialPlaces.length){const _=r.facialPlaces.find($=>{var q,J;return((J=(q=$.id)!=null?q:$.$id)!=null?J:"").toString()===X});_&&(r.setSelectedPlace(_),r.page!=="facial-place-profile"&&(u.debug("[PAGE STATE CHANGE TRIGGERED] Setting page to facial-place-profile"),r.setPage("facial-place-profile")),sessionStorage.removeItem("pending_deeplink"))}}catch(f){u.warn("Deeplink navigation failed",{error:f})}},[r.therapists,r.places,r.facialPlaces,r.page]),o.useEffect(()=>{var E;const f=((E=r.loggedInProvider)==null?void 0:E.type)==="therapist",A=!f&&!!r.loggedInCustomer&&(r.page==="landing"||r.page==="home");if(f||r.page==="therapistStatus"){localStorage.setItem("welcomeMusicPlayedEver","true");return}if(!A||localStorage.getItem("welcomeMusicPlayedEver"))return;const c=new Audio("/sounds/booking-notification.mp3");c.volume=.5;let h=null;const C=()=>{h&&(h(),h=null)};return c.play().then(()=>{localStorage.setItem("welcomeMusicPlayedEver","true"),C()}).catch(()=>{const W=X=>{const _=X.target;_.closest("button")||_.closest("a")||_.closest("input")||_.closest("select")||_.closest("textarea")||_.closest('[role="button"]')||_.closest(".interactive")||c.play().then(()=>{localStorage.setItem("welcomeMusicPlayedEver","true"),C()}).catch(()=>{})};document.addEventListener("click",W,{passive:!0}),document.addEventListener("touchstart",W,{passive:!0}),h=()=>{document.removeEventListener("click",W),document.removeEventListener("touchstart",W)}}),()=>{C(),c.pause()}},[r.loggedInProvider,r.loggedInCustomer,r.page]);const b=async f=>{u.debug("handleLanguageSelect called",{lang:f});const A=f==="gb"?"en":f;return u.debug("Normalized language",{normalized:A,previous:S}),N(A),u.debug("Language state updated",{language:A}),await new Promise(c=>setTimeout(c,0)),Promise.resolve()},y=f=>{u.debug("Opening booking status tracker",f),P(f),R(!0);const A=f.therapistName.toLowerCase().replace(/\s+/g,"-"),c="/booking/status/".concat(f.bookingId,"/").concat(A);window.history.pushState({bookingId:f.bookingId},"",c),u.debug("Updated URL",{url:c})};o.useEffect(()=>(u.debug("Registering global booking functions"),window.openBookingStatusTracker=y,window.setPage=r.setPage,window.setLanguage=N,()=>{delete window.openBookingStatusTracker,delete window.setPage,delete window.setLanguage}),[r.setPage,N]);const T=()=>{var A,c,h;R(!1);const f=sessionStorage.getItem("pending_deeplink");f&&(u.debug("[FIND_NEW] Clearing pending deeplink on home navigation",{pending:f}),sessionStorage.removeItem("pending_deeplink")),((A=r.user)==null?void 0:A.role)==="therapist"||((c=r.user)==null?void 0:c.userType)==="therapist"||((h=r.user)==null?void 0:h.type)==="therapist"||r.isTherapist?r.setPage("therapist-dashboard"):r.setPage("home")},F=()=>{const f=Do(),[A,c]=o.useState(null);return o.useEffect(()=>{(async()=>{try{const{account:C}=await z(async()=>{const{account:E}=await import("./route-therapist.DVVqC6AH.js").then(W=>W.br);return{account:E}},__vite__mapDeps([0,1,2,3,4,5,6])),M=await C.get();c(M),u.debug("Real user authenticated",{email:M.email})}catch{u.debug("Using guest mode - no authenticated user")}})()},[]),o.useEffect(()=>{if(f&&f.activeChatRooms.length>0&&!D){const h=f.activeChatRooms[0];u.debug("Auto-setting activeChat for room",{roomId:h.$id}),L({chatRoomId:h.$id,bookingId:h.bookingId||"temp-booking",providerId:h.providerId,providerName:h.providerName,providerImage:h.providerImage,userRole:A?"customer":"guest",pricing:h.pricing,customerName:(A==null?void 0:A.name)||h.customerName||"Guest User",customerWhatsApp:h.customerWhatsApp||"",customerId:(A==null?void 0:A.$id)||h.customerId||"guest"}),H(!1)}},[f==null?void 0:f.activeChatRooms,D,A]),null};return e.jsx(gc,{children:e.jsx(hc,{value:{language:S,setLanguage:b},children:e.jsx(lp,{children:e.jsx(pd,{children:e.jsx(pc,{children:e.jsx(Go,{variant:"global",showProgress:!0,children:e.jsxs(wp,{isLoading:r.isLoading,page:r.page,children:[e.jsx(F,{}),e.jsx(xc,{setIsChatWindowVisible:r.setIsChatWindowVisible,children:e.jsx(Np,{onStateRestored:f=>{u.debug("PWA state restored",{restoredState:f});const A=window.location.hash.replace("#","").split("/")[0],c=!A||A==="landing"||A==="home"||A==="";f!=null&&f.isOpen&&!c?(u.debug("Restoring chat window state (not on landing page)"),r.setIsChatWindowVisible(!0)):u.debug("Chat state not restored - on landing/home page or chat was closed"),f!=null&&f.currentBooking&&localStorage.setItem("currentBooking",JSON.stringify(f.currentBooking))},children:e.jsxs(rp,{children:[e.jsx(Bc,{children:e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"})}),e.jsxs(sd,{isFullScreen:r.page==="landing"||r.isFullScreen||r.page==="admin"||r.page==="admin-dashboard"||r.page==="admin-therapists"||r.page==="admin-bookings"||r.page==="admin-chat"||r.page==="admin-revenue"||r.page==="admin-commissions"||r.page==="admin-live-listings",children:[r.page!=="landing"&&e.jsx(ud,{page:r.page}),e.jsx("div",{className:"".concat(r.isFullScreen?"flex-grow":"flex-1"," ").concat(a.isMobileScreen?"mobile-layout":"desktop-layout"," ").concat(a.isPortrait?"portrait-mode":"landscape-mode"," ").concat(a.hasTouch?"touch-enabled":"no-touch"),style:{overflowY:"visible",overflowX:"hidden",minHeight:"100vh",height:"auto",position:"relative"},children:e.jsx(Th,{page:r.page,isLoading:r.isLoading,loggedInProvider:(()=>{var f,A,c,h,C;return u.debug("[APP.TSX] Passing loggedInProvider to AppRouter",{hasProvider:!!r.loggedInProvider,providerId:((f=r.loggedInProvider)==null?void 0:f.$id)||((A=r.loggedInProvider)==null?void 0:A.id),providerType:(c=r.loggedInProvider)==null?void 0:c.type,providerName:(h=r.loggedInProvider)==null?void 0:h.name,providerEmail:(C=r.loggedInProvider)==null?void 0:C.email,timestamp:new Date().toISOString()}),r.loggedInProvider})(),loggedInCustomer:r.loggedInCustomer,loggedInAgent:r.loggedInAgent,language:S,isAdminLoggedIn:r.isAdminLoggedIn,isHotelLoggedIn:r.isHotelLoggedIn,isVillaLoggedIn:r.isVillaLoggedIn,therapists:r.therapists,places:r.places,facialPlaces:r.facialPlaces,hotels:r.hotels,notifications:r.notifications,bookings:r.bookings,user:(()=>{const f=r.loggedInProvider||r.loggedInCustomer||r.loggedInUser;return u.debug("[APP.TSX] Resolved user for AppRouter",{hasUser:!!f,userId:(f==null?void 0:f.$id)||(f==null?void 0:f.id),userName:f==null?void 0:f.name,source:r.loggedInProvider?"loggedInProvider":r.loggedInCustomer?"loggedInCustomer":"loggedInUser",timestamp:new Date().toISOString()}),f})(),userLocation:r.userLocation,selectedPlace:r.selectedPlace,selectedMassageType:r.selectedMassageType,providerForBooking:r.providerForBooking,adminMessages:r.adminMessages,providerAuthInfo:r.providerAuthInfo,selectedJobId:r.jobPostingId||null,venueMenuId:r.venueMenuId,hotelVillaLogo:null,impersonatedAgent:r.impersonatedAgent,selectedTherapist:r.selectedTherapist,handleLanguageSelect:b,handleEnterApp:(l==null?void 0:l.handleEnterApp)||(()=>Promise.resolve()),handleSetUserLocation:(l==null?void 0:l.handleSetUserLocation)||(()=>{}),handleSetSelectedPlace:(l==null?void 0:l.handleSetSelectedPlace)||(()=>{}),handleSetSelectedTherapist:f=>r.setSelectedTherapist(f),handleLogout:(d==null?void 0:d.handleProviderLogout)||(()=>Promise.resolve()),handleNavigateToTherapistLogin:(l==null?void 0:l.handleNavigateToTherapistLogin)||(()=>{}),handleNavigateToRegistrationChoice:(l==null?void 0:l.handleNavigateToRegistrationChoice)||(()=>{}),handleNavigateToBooking:(l==null?void 0:l.handleNavigateToBooking)||(()=>{}),restoreUserSession:x,handleQuickBookWithChat:(f,A)=>(u.warn("DEPRECATED: handleQuickBookWithChat used - should migrate to direct integration"),u.debug("[BOOKING] Profile Book Now clicked"),u.debug("Opening chat for provider",{name:f.name}),window.dispatchEvent(new CustomEvent("openChat",{detail:{therapistId:f.id||f.$id,therapistName:f.name,therapistType:A,therapistStatus:f.status||f.availability||"available",pricing:f.pricing?JSON.parse(f.pricing):{60:2e5,90:3e5,120:4e5},profilePicture:f.profilePicture||f.mainImage,mode:"immediate"}})),u.debug("[CHAT] Chat opened from profile"),Promise.resolve()),handleChatWithBusyTherapist:()=>Promise.resolve(),handleShowRegisterPromptForChat:()=>{r.setRegisterPromptContext("booking"),r.setShowRegisterPrompt(!0)},handleIncrementAnalytics:k,handleShowRegisterPrompt:()=>{r.setRegisterPromptContext("booking"),r.setShowRegisterPrompt(!0)},t:f=>f,currentPage:r.page,handleNavigateToHotelLogin:()=>{},handleNavigateToMassagePlaceLogin:(l==null?void 0:l.handleNavigateToMassagePlaceLogin)||(()=>{}),handleNavigateToServiceTerms:(l==null?void 0:l.handleNavigateToServiceTerms)||(()=>{}),handleNavigateToPrivacyPolicy:(l==null?void 0:l.handleNavigateToPrivacyPolicy)||(()=>{}),handleBackToHome:(l==null?void 0:l.handleBackToHome)||(()=>{}),handleSelectRegistration:()=>{},handleTherapistStatusChange:f=>g!=null&&g.handleTherapistStatusChange?g.handleTherapistStatusChange(f):Promise.resolve(),handleSaveTherapist:(g==null?void 0:g.handleSaveTherapist)||(()=>Promise.resolve()),handleSavePlace:(g==null?void 0:g.handleSavePlace)||(()=>Promise.resolve()),handleAgentRegister:(g==null?void 0:g.handleAgentRegister)||(async()=>({success:!1,message:"Unavailable"})),handleAgentLogin:(g==null?void 0:g.handleAgentLogin)||(async()=>({success:!1,message:"Unavailable"})),handleAgentAcceptTerms:(g==null?void 0:g.handleAgentAcceptTerms)||(()=>Promise.resolve()),handleSaveAgentProfile:(g==null?void 0:g.handleSaveAgentProfile)||(()=>Promise.resolve()),handleStopImpersonating:(g==null?void 0:g.handleStopImpersonating)||(()=>{}),handleSendAdminMessage:(g==null?void 0:g.handleSendAdminMessage)||(()=>Promise.resolve()),handleMarkMessagesAsRead:(g==null?void 0:g.handleMarkMessagesAsRead)||(()=>Promise.resolve()),handleSelectMembershipPackage:()=>{},handleProviderLogout:(d==null?void 0:d.handleProviderLogout)||(()=>Promise.resolve()),handleCustomerAuthSuccess:()=>Promise.resolve(),handleCustomerLogout:(d==null?void 0:d.handleCustomerLogout)||(()=>Promise.resolve()),handleAgentLogout:(d==null?void 0:d.handleAgentLogout)||(()=>Promise.resolve()),handleHotelLogout:(d==null?void 0:d.handleHotelLogout)||(()=>Promise.resolve()),handleHotelLogin:(d==null?void 0:d.handleHotelLogin)||(()=>{}),handleAdminLogin:(d==null?void 0:d.handleAdminLogin)||(()=>{}),handleAdminLogout:(d==null?void 0:d.handleAdminLogout)||(()=>Promise.resolve()),handleCreateBooking:()=>Promise.resolve(),handleUpdateBookingStatus:()=>Promise.resolve(),handleMarkNotificationAsRead:()=>{},handleNavigateToNotifications:(l==null?void 0:l.handleNavigateToNotifications)||(()=>{}),handleNavigateToAgentAuth:(l==null?void 0:l.handleNavigateToAuth)||(()=>{}),onTherapistPortalClick:(l==null?void 0:l.handleNavigateToTherapistSignup)||(()=>{}),onMassagePlacePortalClick:(l==null?void 0:l.handleNavigateToMassagePlaceSignup)||(()=>{}),onAgentPortalClick:()=>r.setPage("agentPortal"),onCustomerPortalClick:()=>r.setPage("customerPortal"),onHotelPortalClick:()=>r.setPage("hotelDashboard"),onVillaPortalClick:()=>r.setPage("villaDashboard"),onFacialPortalClick:(l==null?void 0:l.handleNavigateToFacialPlaceSignup)||(()=>{}),onAdminPortalClick:()=>r.setPage("adminDashboard"),onBrowseJobsClick:()=>r.setPage("browseJobs"),onEmployerJobPostingClick:()=>r.setPage("employerJobPosting"),onMassageJobsClick:()=>r.setPage("massageJobs"),onTherapistJobsClick:()=>r.setPage("therapistJobs"),onTermsClick:(l==null?void 0:l.handleNavigateToServiceTerms)||(()=>{}),onPrivacyClick:(l==null?void 0:l.handleNavigateToPrivacyPolicy)||(()=>{}),setPage:r.setPage,onNavigate:r.setPage,setSelectedMassageType:r.setSelectedMassageType,setLoggedInProvider:r.setLoggedInProvider,setLoggedInCustomer:r.setLoggedInCustomer,setSelectedJobId:f=>{var A;return(A=r.setJobPostingId)==null?void 0:A.call(r,f||"")}})}),((U=r.loggedInProvider)==null?void 0:U.type)==="therapist"&&(((B=r.page)==null?void 0:B.toString().startsWith("therapist"))||r.page==="status"||r.page==="schedule"||r.page==="bookings")&&null,e.jsx(cd,{showFooter:m.showFooter,showFloatingButton:!1,page:r.page,language:r.language,userLocation:r.userLocation,unreadNotifications:m.unreadNotifications,hasNewBookings:m.hasNewBookings,showRegisterPrompt:r.showRegisterPrompt,registerPromptContext:r.registerPromptContext,loyaltyEvent:r.loyaltyEvent,getUserRole:()=>{const f=m.getUserRole();return f==="customer"?"user":f},handleRegisterPromptClose:()=>r.setShowRegisterPrompt(!1),handleRegisterPromptRegister:()=>r.setPage("profile"),setPage:r.setPage,setLoyaltyEvent:r.setLoyaltyEvent})]}),p&&w&&e.jsx(op,{isOpen:p,onClose:()=>{R(!1),P(null),window.history.pushState({},"","/"),u.debug("Reset URL to home")},bookingId:w.bookingId,therapistName:w.therapistName,duration:w.duration,price:w.price,responseDeadline:w.responseDeadline,onFindNewTherapist:T}),e.jsx(up,{fallback:null,children:e.jsx(o.Suspense,{fallback:null,children:e.jsx(Pp,{})})}),!1]})})})]})})})})})})})},Fp=Object.freeze(Object.defineProperty({__proto__:null,default:Ip},Symbol.toStringTag,{value:"Module"}));export{Fp as A,og as C,Jo as D,Od as F,fa as a,Gn as b,Wn as c,Up as d,$p as e,Vn as f,Bp as g,li as h,Ii as i,gu as j,Op as k,Ko as l,Oa as m,Zs as p,Is as r,rs as s,so as t,Us as u};
