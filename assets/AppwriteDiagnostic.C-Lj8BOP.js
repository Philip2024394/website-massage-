const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/route-therapist.DVVqC6AH.js","assets/vendor-appwrite.BT2H32tF.js","assets/vendor-react.DJgHGAhw.js","assets/route-booking.yuk30L8G.js","assets/vendor-misc.BCNplu90.js","assets/route-portals.BJGRQhN_.js","assets/route-therapist.ChBoUtyP.css"])))=>i.map(i=>d[i]);
import{_ as n}from"./route-therapist.DVVqC6AH.js";import{a as g,j as t}from"./vendor-react.DJgHGAhw.js";import"./vendor-appwrite.BT2H32tF.js";import"./route-booking.yuk30L8G.js";import"./vendor-misc.BCNplu90.js";import"./route-portals.BJGRQhN_.js";const w=()=>{const[c,l]=g.useState([]),e=r=>{l(o=>[...o,"".concat(new Date().toLocaleTimeString(),": ").concat(r)])},d=async()=>{var r;l([]),e("ðŸ” Starting Appwrite diagnostic...");try{const{client:o}=await n(async()=>{const{client:s}=await import("./route-therapist.DVVqC6AH.js").then(a=>a.br);return{client:s}},__vite__mapDeps([0,1,2,3,4,5,6]));e("âœ… Appwrite client imported successfully");const i=await((r=o.account)==null?void 0:r.get());e(i?"âœ… Appwrite connected - User: ".concat(i.name||"Anonymous"):"âš ï¸ Appwrite connected but no user session")}catch(o){e("âŒ Appwrite connection failed: ".concat(o.message))}try{const{databases:o}=await n(async()=>{const{databases:s}=await import("./route-therapist.DVVqC6AH.js").then(a=>a.br);return{databases:s}},__vite__mapDeps([0,1,2,3,4,5,6])),{APPWRITE_CONFIG:i}=await n(async()=>{const{APPWRITE_CONFIG:s}=await import("./route-therapist.DVVqC6AH.js").then(a=>a.bt);return{APPWRITE_CONFIG:s}},__vite__mapDeps([0,1,2,3,4,5,6]));e("ðŸ” Testing database: ".concat(i.databaseId));try{const s=i.collections.messages;if(e("ðŸ” Messages collection ID: ".concat(s)),!s)e("âŒ CRITICAL: Messages collection is NULL or undefined!");else{const a=await o.listDocuments(i.databaseId,s,[]);e("âœ… Messages collection accessible - Found ".concat(a.documents.length," messages"))}}catch(s){e("âŒ Messages collection error: ".concat(s.message)),e("   Error code: ".concat(s.code||"No code")),e("   Error type: ".concat(s.type||"No type"))}try{const s=i.collections.bookings;if(e("ðŸ” Bookings collection ID: ".concat(s)),!s)e("âŒ CRITICAL: Bookings collection is NULL or undefined!");else{const a=await o.listDocuments(i.databaseId,s,[]);e("âœ… Bookings collection accessible - Found ".concat(a.documents.length," bookings"))}}catch(s){e("âŒ Bookings collection error: ".concat(s.message)),e("   Error code: ".concat(s.code||"No code")),e("   Error type: ".concat(s.type||"No type"))}}catch(o){e("âŒ Database import failed: ".concat(o.message))}try{e("ðŸ” Testing message creation...");const{chatService:o}=await n(async()=>{const{chatService:s}=await import("./route-therapist.DVVqC6AH.js").then(a=>a.bz);return{chatService:s}},__vite__mapDeps([0,1,2,3,4,5,6])),i=await o.sendMessage({conversationId:"diagnostic_test",senderId:"diagnostic_user",senderName:"Diagnostic Test",senderRole:"customer",receiverId:"test_therapist",receiverName:"Test Therapist",receiverRole:"therapist",message:"Diagnostic test message",messageType:"text"});i.success?e("âœ… Test message created successfully: ".concat(i.messageId)):e("âŒ Test message failed: ".concat(i.error))}catch(o){e("âŒ Message service error: ".concat(o.message))}try{e("ðŸ” Testing booking creation...");const{chatService:o}=await n(async()=>{const{chatService:s}=await import("./route-therapist.DVVqC6AH.js").then(a=>a.bz);return{chatService:s}},__vite__mapDeps([0,1,2,3,4,5,6])),i=await o.createBooking({bookingId:"diagnostic_booking_test",customerName:"Diagnostic User",therapistName:"Test Therapist",therapistId:"test_therapist",duration:60,price:100,date:new Date().toISOString().split("T")[0],time:"14:00",location:"Test Location"});i.success?e("âœ… Test booking created successfully: ".concat(i.bookingId)):e("âŒ Test booking failed: ".concat(i.error))}catch(o){e("âŒ Booking service error: ".concat(o.message))}e("ðŸ” Diagnostic complete!")};return t.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-100 p-4",children:t.jsx("div",{className:"max-w-4xl mx-auto",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"ðŸ”§ Appwrite Diagnostic Tool"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"This tool will test your Appwrite setup to identify what's blocking messages and bookings."}),t.jsx("button",{onClick:d,className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg mb-6",children:"ðŸ” Run Diagnostic"}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Diagnostic Results:"}),t.jsx("div",{className:"space-y-2 max-h-96 ",children:c.length===0?t.jsx("p",{className:"text-gray-500 italic",children:'Click "Run Diagnostic" to start testing...'}):c.map((r,o)=>t.jsx("div",{className:"text-sm font-mono",children:r},o))})]}),t.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[t.jsx("h4",{className:"font-semibold text-yellow-800",children:"Common Issues to Check:"}),t.jsxs("ul",{className:"list-disc list-inside text-sm text-yellow-700 mt-2 space-y-1",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Collection IDs:"})," Make sure 'messages' and 'bookings' collections exist in Appwrite Console"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Permissions:"})," Collections need 'Any' role with 'Create' and 'Read' permissions"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Database ID:"})," Check if the database ID in config matches your Appwrite project"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Project ID:"})," Verify the Appwrite project ID is correct"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Network:"})," Ensure you can reach cloud.appwrite.io"]})]})]})]})})})};export{w as AppwriteDiagnostic};
