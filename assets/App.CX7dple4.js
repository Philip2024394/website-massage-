import{a,j as e,u as ue,q as as,y as Fs,a2 as we,L as Hs,H as rs,ak as qs,v as Ys,X as Js,p as _s,N as Ks,M as ns,t as Xs,J as is,E as Zs}from"./vendor-react.DJgHGAhw.js";import{ao as ls,ap as xe,ai as Qs,aq as et,ar as st,u as tt,i as at,as as B,at as os,s as rt,au as cs,av as nt}from"./route-therapist.DVVqC6AH.js";import"./vendor-appwrite.BT2H32tF.js";import{m as ge,l as it}from"./App.1fxTHtx8.js";import{B as ds}from"./route-booking.yuk30L8G.js";import{M as lt}from"./route-jobs._xfuCszQ.js";import{I as Fe}from"./ImageUpload.DqEc8poE.js";import{N as ot}from"./NotificationBell.CyVqwYx2.js";import{M as ct,A as dt}from"./rootConstants.DIeQ-JNW.js";import{P as mt}from"./route-payment.T2FKxZVj.js";import"./vendor-misc.BCNplu90.js";import"./route-portals.BJGRQhN_.js";import"./vendor-ui.D6Y-8hbd.js";const xt=({imageUrl:t,aspect:n=16/9,onConfirm:o,onCancel:l})=>{const d=a.useRef(null),m=a.useRef(null),[x,y]=a.useState({x:0,y:0}),[w,p]=a.useState(!1),[c,C]=a.useState(null),[N,u]=a.useState(0),[L,ae]=a.useState(1200),[W,A]=a.useState(675),[j,k]=a.useState(!0),[J,he]=a.useState("1200"),[U,re]=a.useState("675"),M=L/W;a.useEffect(()=>{y({x:0,y:0}),p(!1),C(null),u(f=>f+1)},[t]);const ne=f=>{p(!0),C({x:f.clientX,y:f.clientY})},ve=f=>{if(!w||!c)return;const E=f.clientX-c.x,z=f.clientY-c.y;C({x:f.clientX,y:f.clientY}),y(V=>({x:V.x+E,y:V.y+z}))},_=()=>{p(!1),C(null)},F=()=>{const f=d.current,E=m.current;if(!f||!E)return;const z=document.createElement("canvas");z.width=L,z.height=W;const V=z.getContext("2d");if(!V)return;const X=f.clientWidth,le=f.clientHeight,I=E.naturalWidth/E.naturalHeight,oe=X/le;let S,O;I>oe?(O=le,S=O*I):(S=X,O=S/I);const H=X/2+x.x,Z=le/2+x.y,Q=H-S/2,ee=Z-O/2,T=L/X,$=W/le;try{V.clearRect(0,0,z.width,z.height),V.drawImage(E,Q*T,ee*$,S*T,O*$);const Ne=z.toDataURL("image/jpeg",.9);o(Ne)}catch{alert("Unable to process this image. Please try uploading it again.")}},[G,K]=a.useState(0);a.useEffect(()=>{const f=()=>{d.current&&K(d.current.clientWidth)};return f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[M]);const ie=G>0?Math.round(G/M):256;return e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Position Banner Image"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",className:"px-3 py-1 rounded-md bg-gray-100 text-gray-800 text-sm",onClick:()=>{y({x:0,y:0}),p(!1),C(null),u(f=>f+1)},children:"Reset Position"}),e.jsx("button",{type:"button",className:"px-3 py-1 rounded-md bg-orange-500 text-white text-sm font-semibold",onClick:F,children:"Save Image"})]})]}),e.jsxs("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("p",{className:"text-xs text-gray-700 mb-1",children:[e.jsx("strong",{children:"Drag to position:"})," Click and drag the image to move it within the frame"]}),e.jsx("p",{className:"text-xs text-gray-600",children:"The image will fill the entire frame width. Drag up/down to adjust what part shows."})]}),e.jsx("div",{ref:d,className:"relative w-full overflow-hidden rounded-lg bg-black/5",style:{height:ie},onMouseDown:ne,onMouseMove:ve,onMouseUp:_,onMouseLeave:_,children:e.jsx("img",{ref:m,src:t,alt:"Position",className:"select-none cursor-move",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%) translate(".concat(x.x,"px, ").concat(x.y,"px)"),transformOrigin:"center center",width:"100%",height:"auto"},crossOrigin:"anonymous",draggable:!1},N)}),l&&e.jsx("div",{className:"mt-2 text-right",children:e.jsx("button",{type:"button",className:"px-3 py-1 rounded-md bg-gray-100 text-gray-800 text-sm",onClick:l,children:"Cancel"})})]})},gt=["id","placeId","name","category","email","password","pricing","location","status","availability","isLive","islive","coordinates","description","openingTime","closingTime","openingtime","closingtime","city","whatsappnumber","ownerWhatsApp","mainimage","profilePicture","galleryImages","massagetypes","languagesspoken","languages","additionalservices","additionalServices","websiteurl","websitetitle","websitedescription","websiteUrl","websiteTitle","websiteDescription","discountPercentage","discountDuration","isDiscountActive","discountEndTime","discountpercentage","discountduration","isdiscountactive","discountendtime","instagramurl","facebookpageurl","instagramposts","facebookposts","therapistGender","yearsEstablished"];function ut(t,n=!0){const o={};for(const d of Object.keys(t))gt.includes(d)&&(o[d]=t[d]);return["name","category","email","pricing","location","status","isLive","openingTime","closingTime","coordinates"].filter(d=>o[d]===void 0||o[d]===""),o}const ht=({message:t,fullScreen:n=!0,progress:o=0,stage:l="loading"})=>{const d=n?"fixed inset-0 flex flex-col items-center justify-center z-50":"flex flex-col items-center justify-center py-12",m={initializing:"Ready",loading:"Ready",authenticating:"Ready",finalizing:"Ready"},x={initializing:"from-blue-500 to-blue-600",loading:"from-orange-500 to-orange-600",authenticating:"from-green-500 to-green-600",finalizing:"from-purple-500 to-purple-600"};return e.jsxs("div",{className:d,id:"react-loading-spinner","data-loading-state":l,style:{background:"#f97316",transition:"none"},children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2 animate-pulse",children:"IndaStreet"}),e.jsx("p",{className:"text-white/90 text-lg font-medium",children:"Professional Massage Services"})]}),e.jsxs("div",{className:"relative w-20 h-20 mb-6",children:[e.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",viewBox:"0 0 80 80",children:[e.jsx("circle",{cx:"40",cy:"40",r:"36",stroke:"rgba(255,255,255,0.2)",strokeWidth:"8",fill:"none"}),e.jsx("circle",{cx:"40",cy:"40",r:"36",stroke:"white",strokeWidth:"8",fill:"none",strokeLinecap:"round",strokeDasharray:"".concat(2*Math.PI*36),strokeDashoffset:"".concat(2*Math.PI*36*(1-o/100)),className:"transition-all duration-300 ease-out"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})})]}),e.jsx("p",{className:"text-white/90 text-base font-medium mb-4 animate-pulse",children:t||m[l]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsxs("div",{className:"mt-8 w-64 max-w-full",children:[e.jsxs("div",{className:"flex justify-between text-white/70 text-xs mb-2",children:[e.jsx("span",{children:"Initializing"}),e.jsx("span",{children:"Loading"}),e.jsx("span",{children:"Ready"})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-1",children:e.jsx("div",{className:"h-1 rounded-full bg-gradient-to-r ".concat(x[l]," transition-all duration-500"),style:{width:"".concat(Math.min(o,100),"%")}})})]})]})},ms=({label:t,checked:n,onChange:o,disabled:l=!1})=>e.jsxs("label",{className:"flex items-center space-x-3 ".concat(l?"cursor-not-allowed":"cursor-pointer"," group"),children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n,onChange:o,disabled:l}),e.jsx("div",{className:"w-6 h-6 rounded-md transition-all duration-200 shadow-sm ".concat(l?"border-2 border-gray-200 bg-gray-50":n?"bg-gradient-to-br from-green-500 to-green-600 border-2 border-green-600 shadow-md":"bg-white border-2 border-gray-300 group-hover:border-green-400")}),e.jsx("svg",{className:"absolute w-4 h-4 text-white top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 transition-all duration-200 ".concat(n&&!l?"opacity-100 scale-100":"opacity-0 scale-0"),viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M3 8L6.5 11.5L13 5",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),e.jsx("span",{className:"text-sm font-medium transition-colors ".concat(l?"text-gray-400":n?"text-gray-900":"text-gray-700 group-hover:text-gray-900"),children:t})]}),pt=({isOpen:t,onClose:n,title:o,missingFields:l,type:d="error"})=>{if(!t)return null;const m=()=>{switch(d){case"error":return{icon:"‚ùå",bgColor:"bg-red-50",borderColor:"border-red-200",titleColor:"text-red-800",buttonColor:"bg-red-600 hover:bg-red-700"};case"warning":return{icon:"‚ö†Ô∏è",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",titleColor:"text-yellow-800",buttonColor:"bg-yellow-600 hover:bg-yellow-700"};default:return{icon:"‚ÑπÔ∏è",bgColor:"bg-blue-50",borderColor:"border-blue-200",titleColor:"text-blue-800",buttonColor:"bg-blue-600 hover:bg-blue-700"}}},{icon:x,bgColor:y,borderColor:w,titleColor:p,buttonColor:c}=m();return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black bg-opacity-50",children:e.jsx("div",{className:"max-w-md w-full ".concat(y," ").concat(w," border-2 rounded-xl shadow-2xl transform transition-all max-h-[90vh] overflow-y-auto"),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-2xl",children:x}),e.jsx("h3",{className:"text-lg font-semibold ".concat(p),children:o})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm ".concat(p," mb-3"),children:"Please complete the following required fields:"}),e.jsx("ul",{className:"text-sm ".concat(p," space-y-1"),children:l.map((C,N)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-500 mt-0.5",children:"‚Ä¢"}),e.jsx("span",{children:C.replace("‚Ä¢ ","")})]},N))})]}),e.jsx("div",{className:"text-xs ".concat(p," mb-4 p-3 bg-white bg-opacity-50 rounded-lg"),children:"‚úÖ All fields are required to create a complete professional profile that customers can trust."}),e.jsx("button",{onClick:n,className:"w-full ".concat(c," text-white font-semibold py-3 px-4 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-opacity-50"),children:"Got it, I'll complete the fields"})]})})})},ft={getSoundPreference(){return!0},setSoundPreference(t){},getVolume(){const t=localStorage.getItem("notification_volume");return t?parseFloat(t):.7},setVolume(t){const n=t>1?t/100:t;localStorage.setItem("notification_volume",n.toString())},async playSound(t){if(!this.getSoundPreference())return;const o={booking:"/sounds/booking-notification.mp3",message:"/sounds/message-notification.mp3",alert:"/sounds/alert-notification.mp3",success:"/sounds/success-notification.mp3"}[t];try{const l=await fetch(o,{cache:"no-store"});if(!l.ok)throw new Error("Sound ".concat(l.status));const d=await l.blob(),m=URL.createObjectURL(d),x=new Audio(m);x.volume=this.getVolume(),await x.play(),URL.revokeObjectURL(m),ls("üîä Played ".concat(t," notification sound"))}catch{try{const d=new Audio(o);d.volume=this.getVolume(),await d.play(),ls("üîä Played ".concat(t," notification sound"))}catch{if("AudioContext"in window){const m=new AudioContext,x=m.createOscillator(),y=m.createGain();x.connect(y),y.connect(m.destination),y.gain.value=this.getVolume()*.3,x.frequency.value=800,x.type="sine",x.start(),setTimeout(()=>x.stop(),200)}}}},async requestPermission(){return"Notification"in window?Notification.permission==="granted"?"granted":Notification.permission==="denied"?"denied":await Notification.requestPermission():"denied"},async showNotification(t,n,o="alert"){if(await this.requestPermission()!=="granted"){await this.playSound(o);return}try{const d={icon:"/icon-192.png",badge:"/icon-192.png",requireInteraction:!0,tag:"indastreet-".concat(o,"-").concat(Date.now()),...n},m=new Notification(t,d);await this.playSound(o),m.onclick=()=>{var x;window.focus(),m.close(),(x=n.data)!=null&&x.url&&(window.location.href=n.data.url)},setTimeout(()=>{m.close()},1e4)}catch{}},async showBookingNotification(t,n,o){await this.showNotification("üîî New Booking Request!",{body:"".concat(t," booked ").concat(n," minutes"),icon:"/icon-192.png",badge:"/icon-192.png",data:{url:"/bookings/".concat(o),type:"booking"}},"booking")},async showMessageNotification(t,n){await this.showNotification("üí¨ New Message from ".concat(t),{body:n,icon:"/icon-192.png",badge:"/icon-192.png",data:{url:"/messages",type:"message"}},"message")},async showWhatsAppContactNotification(){await this.showNotification("üì± New WhatsApp Contact!",{body:'Someone clicked "Chat Now" to contact you on WhatsApp. Check your WhatsApp messages!',icon:"/icon-192.png",badge:"/icon-192.png",tag:"whatsapp-contact",requireInteraction:!0,data:{type:"whatsapp_contact"}},"message")},async showAlertNotification(t,n){await this.showNotification(t,{body:n,icon:"/icon-192.png",badge:"/icon-192.png"},"alert")},getWhatsAppNumber(){return localStorage.getItem("providerWhatsApp")||""},isSupported(){return"Notification"in window}},bt=()=>{const t=[{percentage:5,url:"https://ik.imagekit.io/7grri5v7d/massage%20discount%205.png?updatedAt=1761803670532"},{percentage:10,url:"https://ik.imagekit.io/7grri5v7d/massage%20discount%2010.png?updatedAt=1761803828896"},{percentage:15,url:"https://ik.imagekit.io/7grri5v7d/massage%20discount%2015.png?updatedAt=1761803805221"},{percentage:20,url:"https://ik.imagekit.io/7grri5v7d/massage%20discount%2020.png?updatedAt=1761803783034"}];return e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(ue,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Promotional Tools"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Share discount banners to promote your services"})]})]}),e.jsx("div",{className:"space-y-6",children:t.map(n=>e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"aspect-video bg-white rounded-lg mb-4 overflow-hidden",children:[e.jsx("img",{src:n.url,alt:"".concat(n.percentage,"% Discount Banner"),className:"w-full h-full object-cover",onError:o=>{o.currentTarget.style.display="none";const l=o.currentTarget.nextElementSibling;l&&(l.style.display="flex")}}),e.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-orange-400 to-orange-600 hidden items-center justify-center text-white font-bold text-xl",style:{display:"none"},children:[n.percentage,"% OFF"]})]}),e.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:[n.percentage,"% Discount Banner"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{const o="üåü Special Offer! Get ".concat(n.percentage,"% OFF on massage services! Book now through IndaStreet app. ").concat(n.url),l="https://wa.me/?text=".concat(encodeURIComponent(o));window.open(l,"_blank")},className:"flex-1 bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center gap-2 text-sm",children:[e.jsx(ue,{className:"w-4 h-4"}),"WhatsApp"]}),e.jsxs("button",{onClick:()=>{navigator.share?navigator.share({title:"".concat(n.percentage,"% Discount on Massage Services"),text:"Special offer! Get ".concat(n.percentage,"% OFF on massage services!"),url:n.url}):navigator.clipboard.writeText(n.url)},className:"flex-1 bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center gap-2 text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),"Share"]})]})]},n.percentage))}),e.jsx("div",{className:"mt-6 p-4 bg-orange-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-orange-700",children:["üí° ",e.jsx("strong",{children:"Tip:"})," Share these banners on your social media, WhatsApp status, or send directly to customers to promote your massage services and attract more bookings!"]})})]})})},yt=({upcomingBookings:t,pastBookings:n,onUpdateBookingStatus:o,t:l,BookingCard:d})=>{var m,x,y,w;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(as,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:((m=l==null?void 0:l.bookings)==null?void 0:m.upcoming)||"Upcoming Bookings"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage your upcoming bookings"})]})]}),t.length>0?e.jsx("div",{className:"grid gap-4",children:t.map(p=>e.jsx(d,{booking:p,onUpdateStatus:o,t:(l==null?void 0:l.bookings)||{}},p.id))}):e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:((x=l==null?void 0:l.bookings)==null?void 0:x.noUpcoming)||"No upcoming bookings"})}),e.jsxs("div",{className:"flex items-center gap-3 mt-8",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(as,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:((y=l==null?void 0:l.bookings)==null?void 0:y.past)||"Past Bookings"}),e.jsx("p",{className:"text-xs text-gray-500",children:"View past bookings"})]})]}),n.length>0?e.jsx("div",{className:"grid gap-4",children:n.map(p=>e.jsx(d,{booking:p,onUpdateStatus:o,t:(l==null?void 0:l.bookings)||{}},p.id))}):e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:((w=l==null?void 0:l.bookings)==null?void 0:w.noPast)||"No past bookings"})})]})},jt=({place:t,t:n,AnalyticsCard:o})=>{var d,m,x,y,w,p,c,C,N,u;const l=(()=>{try{return typeof(t==null?void 0:t.analytics)=="string"?JSON.parse(t.analytics):(t==null?void 0:t.analytics)||{impressions:0,profileViews:0,whatsappClicks:0}}catch{return{impressions:0,profileViews:0,whatsappClicks:0}}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(Fs,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:((d=n==null?void 0:n.analytics)==null?void 0:d.title)||"Analytics"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Track your performance metrics"})]})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx(o,{title:((m=n==null?void 0:n.analytics)==null?void 0:m.impressions)||"Impressions",value:(x=l.impressions)!=null?x:0,description:((y=n==null?void 0:n.analytics)==null?void 0:y.impressionsDesc)||"Total profile impressions"}),e.jsx(o,{title:((w=n==null?void 0:n.analytics)==null?void 0:w.profileViews)||"Profile Views",value:(p=l.profileViews)!=null?p:0,description:((c=n==null?void 0:n.analytics)==null?void 0:c.profileViewsDesc)||"Profile view count"}),e.jsx(o,{title:((C=n==null?void 0:n.analytics)==null?void 0:C.whatsappClicks)||"WhatsApp Clicks",value:(N=l.whatsappClicks)!=null?N:0,description:((u=n==null?void 0:n.analytics)==null?void 0:u.whatsappClicksDesc)||"WhatsApp contact clicks"})]})]})},wt=({placeId:t,PushNotificationSettings:n})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(we,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Push Notifications"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Get alerts even when browsing other apps or phone is locked"})]})]}),e.jsx(n,{providerId:typeof t=="string"?parseInt(t):t,providerType:"place"})]}),vt=()=>e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-gray-700 text-base",children:"Promotors Receive 20% commission from their shared links and advertisement."})}),Nt=({title:t,value:n,description:o})=>e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 hover:border-orange-300 transition-all",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:t}),e.jsx("p",{className:"text-4xl font-bold text-orange-600 mt-2",children:n.toLocaleString()}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:o})]}),kt=({booking:t,onUpdateStatus:n,t:o})=>{const l=t.status===B.Pending,d=new Date(t.startTime)>new Date,m={[B.Pending]:"bg-gradient-to-r from-yellow-100 to-amber-100 text-yellow-800 border-yellow-200 shadow-sm animate-pulse",[B.Confirmed]:"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border-green-200 shadow-sm",[B.OnTheWay]:"bg-gradient-to-r from-blue-100 to-sky-100 text-blue-800 border-blue-200 shadow-sm animate-bounce",[B.Cancelled]:"bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border-red-200 shadow-sm",[B.Completed]:"bg-gradient-to-r from-gray-100 to-slate-100 text-gray-800 border-gray-200 shadow-sm",[B.TimedOut]:"bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border-red-200 shadow-sm",[B.Reassigned]:"bg-gradient-to-r from-purple-100 to-violet-100 text-purple-800 border-purple-200 shadow-sm"};return e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 hover:border-orange-300 transition-all",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900 text-lg",children:t.userName}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[(o==null?void 0:o.service)||"Service",": ",t.service," min"]})]}),e.jsx("span",{className:"px-3 py-1 text-xs font-semibold rounded-full border ".concat(m[t.status]),children:t.status})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[(o==null?void 0:o.date)||"Date",": ",new Date(t.startTime).toLocaleString()]}),l&&d&&e.jsxs("div",{className:"flex gap-2 pt-4 mt-4 border-t",children:[e.jsx("button",{onClick:()=>n(t.id,B.Confirmed),className:"flex-1 bg-orange-500 text-white font-semibold py-2.5 px-4 rounded-lg hover:bg-orange-600 transition-all",children:(o==null?void 0:o.confirm)||"Confirm"}),e.jsx("button",{onClick:()=>n(t.id,B.Cancelled),className:"flex-1 bg-white text-gray-700 font-semibold py-2.5 px-4 rounded-lg border-2 border-gray-300 hover:bg-gray-50 transition-all",children:(o==null?void 0:o.cancel)||"Cancel"})]})]})},Ct=()=>{const{language:t,setLanguage:n}=tt();return e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-full p-0.5",children:[e.jsx("button",{onClick:()=>n("id"),className:"flex items-center px-2 py-1 rounded-full text-xs font-medium transition-all duration-200 ".concat(t==="id"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:bg-white/50"),title:"Bahasa Indonesia",children:e.jsx("span",{className:"text-sm",children:"üáÆüá©"})}),e.jsx("button",{onClick:()=>n("en"),className:"flex items-center px-2 py-1 rounded-full text-xs font-medium transition-all duration-200 ".concat(t==="gb"||t==="en"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:bg-white/50"),title:"English",children:e.jsx("span",{className:"text-sm",children:"üá¨üáß"})})]})},St=({onSave:t,onLogout:n,onNavigateToNotifications:o,onNavigate:l,onUpdateBookingStatus:d,placeId:m,place:x,bookings:y,notifications:w,userLocation:p,t:c,onNavigateToChat:C,onNavigateToPayment:N})=>{const[u,L]=a.useState(x||null),[ae,W]=a.useState(!0),A=m,[j,k]=a.useState(""),[J,he]=a.useState(""),[U,re]=a.useState(""),[M,ne]=a.useState(""),[ve,_]=a.useState(!1);a.useEffect(()=>{},[U]);const[F,G]=a.useState([{imageUrl:"",caption:"",description:""},{imageUrl:"",caption:"",description:""},{imageUrl:"",caption:"",description:""},{imageUrl:"",caption:"",description:""},{imageUrl:"",caption:"",description:""},{imageUrl:"",caption:"",description:""}]),[K,ie]=a.useState(""),[f,E]=a.useState({60:0,90:0,120:0}),[z,V]=a.useState({60:0,90:0,120:0}),[X,le]=a.useState(!0),[I,oe]=a.useState(0),[S,O]=a.useState(24),[H,Z]=a.useState(!1),[Q,ee]=a.useState(""),[T,$]=a.useState(""),[Ne,ke]=a.useState(!1),[q,Ce]=a.useState([]),[He,qe]=a.useState(1),[Se,Pe]=a.useState([]),[Ye,Ie]=a.useState([]),[h,ce]=a.useState({lat:0,lng:0}),[pe,Le]=a.useState("09:00"),[fe,Te]=a.useState("21:00"),[se,Ae]=a.useState(null),[Y,Me]=a.useState(!1),[de,Re]=a.useState(!1),[xs,gs]=a.useState("profile"),[It,Lt]=a.useState(!1),[me,Je]=a.useState(!1),[_e,Ee]=a.useState(""),[us,Ke]=a.useState(""),[hs,Xe]=a.useState(""),[ps,$e]=a.useState(!1),[fs,De]=a.useState(""),[bs,Ze]=a.useState(!1),[ys,js]=a.useState([]),[Tt,D]=a.useState(null),[ws,Qe]=a.useState(!1),[be,vs]=a.useState(null),[Be,Ns]=a.useState(null),[Ue,es]=a.useState(!1),[At,ks]=a.useState(!1),ze=a.useRef(null);a.useEffect(()=>{(async()=>{W(!0);try{if(x&&(x.name||x.description||x.mainImage))L(x),Oe(x);else if(m){const r=await xe.getByProviderId(String(m));r?(L(r),Oe(r)):(L({id:m,name:"",description:"",rating:0,isLive:!1}),We())}else We()}catch{We()}W(!1)})()},[m,x]),a.useEffect(()=>{if(!m)return;const s=()=>{document.visibilityState==="visible"&&xe.getByProviderId(String(m)).then(r=>{r&&(L(r),Oe(r))}).catch(()=>{})};return document.addEventListener("visibilitychange",s),()=>document.removeEventListener("visibilitychange",s)},[m]),a.useEffect(()=>{const s=b=>{b.preventDefault(),Ae(b)},r=()=>{Me(!0),localStorage.setItem("pwa-installed","true"),Ae(null)},i=()=>{ss()},g=()=>{const b=localStorage.getItem("pwa-installed")==="true"||window.matchMedia("(display-mode: standalone)").matches;Me(b)};return window.addEventListener("beforeinstallprompt",s),window.addEventListener("appinstalled",r),window.addEventListener("request-pwa-install",i),g(),()=>{window.removeEventListener("beforeinstallprompt",s),window.removeEventListener("appinstalled",r),window.removeEventListener("request-pwa-install",i)}},[]);const Oe=s=>{k(s.name||""),he(s.description||"");const r=s.mainimage||s.mainImage||"";re(r),ne(s.profilePicture||r||"");const i=s.galleryImages||s.galleryimages;if(i){let g=[];if(typeof i=="string")try{g=JSON.parse(i)}catch{g=[]}else Array.isArray(i)&&(g=i);const b=g.map(v=>({imageUrl:v.imageUrl||"",caption:v.caption||"",description:v.description||""}));for(;b.length<6;)b.push({imageUrl:"",caption:"",description:""});G(b.slice(0,6))}ie(s.contactNumber||"");try{E(typeof s.pricing=="string"?JSON.parse(s.pricing):s.pricing||{60:0,90:0,120:0}),oe(s.discountpercentage||0),O(s.discountduration||24),Z(s.isdiscountactive||!1),ee(s.discountendtime||""),ce(typeof s.coordinates=="string"?JSON.parse(s.coordinates):s.coordinates||{lat:0,lng:0});const g=s.massagetypes||s.massageTypes;Ce(typeof g=="string"?JSON.parse(g):g||[]);const b=s.languages||s.languagesspoken;Pe(typeof b=="string"?JSON.parse(b):b||[]);const v=s.additionalServices||s.additionalservices;Ie(typeof v=="string"?JSON.parse(v):v||[]),qe(s.yearsEstablished||s.yearsEstablished||1)}catch{}s.location?$(s.location):p!=null&&p.address?($(p.address),p.lat&&p.lng&&ce({lat:p.lat,lng:p.lng})):$(""),Le(s.openingtime||s.openingTime||"09:00"),Te(s.closingtime||s.closingTime||"21:00"),Ee(s.websiteUrl||s.websiteurl||""),Ke(s.websiteTitle||s.websitetitle||""),Xe(s.websiteDescription||s.websitedescription||"")},We=()=>{k(""),he(""),re(""),ne(""),G(Array(6).fill({imageUrl:"",caption:"",description:""})),ie(""),E({60:0,90:0,120:0}),oe(0),O(24),Z(!1),ee(""),ce({lat:0,lng:0}),Ce([]),Pe([]),Ie([]),$(""),Le("09:00"),Te("21:00"),Ee(""),Ke(""),Xe("")};a.useEffect(()=>{if(!A)return;let s=0;const r=async()=>{try{const b=(await Qs.getUnread(A.toString())||[]).filter(v=>v.type==="whatsapp_contact");b.length>s&&await ft.showWhatsAppContactNotification(),s=b.length}catch{}};r();const i=setInterval(r,1e4);return()=>clearInterval(i)},[A]),a.useEffect(()=>{const s=()=>window.google&&window.google.maps&&window.google.maps.places?(Re(!0),!0):!1,r=()=>{const i=et();i&&st(i,()=>{Re(!0)},()=>{})};if(!s()){r();const i=setInterval(()=>{s()&&clearInterval(i)},500),g=setTimeout(()=>{clearInterval(i)},1e4);return()=>{clearInterval(i),clearTimeout(g)}}},[]),a.useEffect(()=>{if(de&&ze.current){const s=new window.google.maps.places.Autocomplete(ze.current,{types:["establishment","geocode"],componentRestrictions:{country:"id"}});s.addListener("place_changed",()=>{const r=s.getPlace();r.formatted_address&&($(r.formatted_address),ke(!1)),r.geometry&&r.geometry.location&&ce({lat:r.geometry.location.lat(),lng:r.geometry.location.lng()})})}},[de]);const ss=async()=>{se&&it(async()=>{try{await se.prompt(),(await se.userChoice).outcome==="accepted"&&(Me(!0),localStorage.setItem("pwa-installed","true")),Ae(null)}catch{}})},Cs=()=>{const s=[];if((!j||j.trim()==="")&&s.push("‚Ä¢ Business/Place Name"),(!K||K.trim()==="")&&s.push("‚Ä¢ Contact Number"),(!T||T.trim()==="")&&s.push('‚Ä¢ Address (click "Set Location" to use GPS)'),(!J||J.trim()==="")&&s.push("‚Ä¢ Business Description"),(!U||U.trim()==="")&&s.push("‚Ä¢ Main Business Photo"),(!M||M.trim()==="")&&s.push("‚Ä¢ Profile Picture"),(!pe||pe.trim()==="")&&s.push("‚Ä¢ Opening Time"),(!fe||fe.trim()==="")&&s.push("‚Ä¢ Closing Time"),Object.values(f).some(P=>P>0)||s.push("‚Ä¢ At least one service pricing (30, 60, 90, or 120 minutes)"),(!q||q.length===0)&&s.push("‚Ä¢ At least one massage type/service offered"),s.length>0){js(s),Ze(!0);return}const g=(F||[]).filter(P=>P&&P.imageUrl&&P.imageUrl.trim()!==""),b=H&&S>0?new Date(Date.now()+S*60*60*1e3).toISOString():Q||null,v={placeId:A,status:"Open",category:"wellness",password:u==null?void 0:u.password,islive:!0,name:j,email:(u==null?void 0:u.email)||"",description:J,whatsappnumber:K,mainimage:U,profilePicture:M,galleryImages:JSON.stringify(g),pricing:JSON.stringify(f),location:T,coordinates:Array.isArray(h)?h:[h.lng||106.8456,h.lat||-6.2088],city:h&&h.lat&&h.lng?ge({lat:h.lat,lng:h.lng}):null,locationId:h&&h.lat&&h.lng?ge({lat:h.lat,lng:h.lng}):null,openingtime:pe,closingtime:fe,massagetypes:JSON.stringify(q),languages:JSON.stringify(Se),additionalServices:JSON.stringify(Ye),yearsEstablished:Number(He)||1,websiteUrl:_e||"",websiteTitle:us||"",websiteDescription:hs||"",discountpercentage:H?Number(I):0,discountduration:H?Number(S):0,isdiscountactive:!!H,discountendtime:b},je=ut(v);t==null||t(je);const R=document.createElement("div");R.innerHTML='\n            <div class="fixed top-4 left-4 right-4 bg-gradient-to-r from-green-500 to-green-600 text-white p-6 rounded-xl shadow-2xl z-50 max-w-md mx-auto">\n                <div class="flex items-center gap-4">\n                    <div class="w-12 h-12 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center flex-shrink-0">\n                        <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>\n                        </svg>\n                    </div>\n                    <div class="flex-1">\n                        <h3 class="font-bold text-lg mb-1">Profile Updated & Live!</h3>\n                        <p class="text-green-100 text-sm leading-relaxed">\n                            Your profile has been saved and is now <strong>live</strong> on IndaStreet. Customers can see your updates immediately.\n                        </p>\n                        <div class="mt-3 flex items-center gap-2 text-xs text-green-200">\n                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">\n                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>\n                            </svg>\n                            <span>Changes are visible to all users now</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ',document.body.appendChild(R),"vibrate"in navigator&&navigator.vibrate([100,50,100]),setTimeout(()=>{try{R&&R.parentNode&&R.parentNode.contains(R)&&R.parentNode.removeChild(R)}catch{}},5e3);try{localStorage.removeItem("place-dashboard-autosave")}catch{}},Ss=s=>{var g;const r=(g=s.target.files)==null?void 0:g[0];if(!r)return;if(!r.type.startsWith("image/")){alert("‚ùå Please upload an image file");return}if(r.size>5*1024*1024){alert("‚ùå Image must be less than 5MB");return}vs(r);const i=new FileReader;i.onload=b=>{var v;Ns((v=b.target)==null?void 0:v.result)},i.readAsDataURL(r)},Ps=async()=>{if(!be){alert("‚ùå Please upload payment proof");return}if(u){es(!0);try{const s=await at.uploadProfileImage(Be);alert("‚úÖ Payment proof submitted successfully! Your profile is now LIVE and can be edited for the next 5 hours. Our team will review your payment within 48 hours and activate your verified badge upon approval."),ks(!1),Qe(!1),N&&setTimeout(()=>N(),1500)}catch{alert("‚ùå Failed to submit payment. Please try again.")}finally{es(!1)}}},Ge=s=>s===0?"":s>=1e3?Math.floor(s/1e3)+"k":s.toString(),Is=s=>{if(!s)return 0;if(s.toLowerCase().endsWith("k")){const i=s.slice(0,-1),g=parseInt(i,10);return isNaN(g)?0:g*1e3}const r=parseInt(s,10);return isNaN(r)?0:r},Ve=(s,r)=>{const i=Is(r);E(g=>({...g,[s]:i})),X&&V(g=>({...g,[s]:i}))},Ls=(s,r)=>{const i=[...F];i[s]={...i[s],imageUrl:r},G(i)},Ts=(s,r)=>{const i=[...F];i[s]={...i[s],caption:r},G(i)},As=(s,r)=>{const i=[...F];i[s]={...i[s],description:r},G(i)},Ms=s=>{Ce(r=>{const i=r||[];return i.includes(s)?i.filter(g=>g!==s):i.length<5?[...i,s]:i})},Rs=s=>{Pe(r=>{const i=r||[];return i.includes(s)?i.filter(g=>g!==s):[...i,s]})},Es=s=>{Ie(r=>{const i=r||[];return i.includes(s)?i.filter(g=>g!==s):[...i,s]})},[Mt,te]=a.useState(!1),$s=()=>{if(!navigator.geolocation){alert("Geolocation is not supported by this browser.");return}const s=()=>{if(!de||!window.google||!window.google.maps){te(!0);let i=0;const g=3,b=setInterval(()=>{i++,window.google&&window.google.maps?(clearInterval(b),Re(!0),r()):i>=g&&(clearInterval(b),te(!1),alert("Google Maps is still loading. Please try again in a moment."))},1e3);return}r()},r=()=>{te(!0),navigator.geolocation.getCurrentPosition(i=>{try{const g=new window.google.maps.Geocoder,b={lat:i.coords.latitude,lng:i.coords.longitude};ce(b),g.geocode({location:b},(v,je)=>{if(te(!1),je==="OK"&&v[0]){$(v[0].formatted_address),ke(!1);const R=ge(b);A&&xe.update(String(A),{geopoint:b,coordinates:[b.lng,b.lat],city:R,locationId:R,location:v[0].formatted_address,islive:!0}).then(()=>{}).catch(Vs=>{}),"vibrate"in navigator&&navigator.vibrate(200);const P=document.createElement("div");P.innerHTML='\n                                <div class="fixed top-4 left-4 right-4 bg-green-500 text-white p-4 rounded-lg shadow-lg z-50 flex items-center gap-3">\n                                    <div class="w-6 h-6 bg-white rounded-full flex items-center justify-center">\n                                        <svg class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20">\n                                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>\n                                        </svg>\n                                    </div>\n                                    <span class="font-medium">üìç Location set successfully!</span>\n                                </div>\n                            ',document.body.appendChild(P),setTimeout(()=>{try{P&&P.parentNode&&P.parentNode.contains(P)&&P.parentNode.removeChild(P)}catch{}},3e3)}else alert("Geocoding failed: "+je)})}catch{te(!1),alert("Error getting location. Please try again.")}},i=>{te(!1),alert("Unable to retrieve your location. Please check your browser permissions.")})};s()},Ds=s=>{s&&s.trim()!==""&&(De(s),$e(!0))},Bs=()=>{ne(fs),$e(!1),De("")},Us=()=>{$e(!1),De("")},zs=(s,r,i,g,b="text")=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(i,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:b,value:s,onChange:v=>r(v.target.value),placeholder:g,className:"mt-1 block w-full pl-10 pr-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-brand-green focus:border-brand-green text-gray-900"})]}),Os=(w||[]).filter(s=>!s.isRead).length,ts=new Date,ye=(y||[]).filter(s=>new Date(s.startTime)>=ts).sort((s,r)=>new Date(s.startTime).getTime()-new Date(r.startTime).getTime()),Ws=(y||[]).filter(s=>new Date(s.startTime)<ts).sort((s,r)=>new Date(r.startTime).getTime()-new Date(s.startTime).getTime());if(ae)return e.jsx(ht,{message:"Loading dashboard..."});if(!u&&!m)return e.jsx("div",{className:"p-4 text-center text-red-500",children:"Could not load place data. Please try logging in again."});const Gs=()=>{switch(xs){case"promotional":return e.jsx(bt,{});case"discounts":return e.jsx("div",{children:"Discount Share feature temporarily disabled"});case"membership":return e.jsx(lt,{onBack:()=>gs("profile"),userType:"place",currentPlan:"free"});case"terms":return e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsx("div",{children:"Terms page temporarily disabled"})});case"bookings":return e.jsx(yt,{upcomingBookings:ye,pastBookings:Ws,onUpdateBookingStatus:d,t:c,BookingCard:kt});case"analytics":return e.jsx(jt,{place:u,t:c,AnalyticsCard:Nt});case"hotelVilla":return e.jsx(vt,{});case"notifications":return e.jsx(wt,{placeId:A,PushNotificationSettings:null});case"profile":default:return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center gap-3 mb-6",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Massage Spa"})}),e.jsx(Fe,{id:"main-image-upload",label:(c==null?void 0:c.uploadMainImage)||"Upload Main Image",currentImage:U,onImageChange:re}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Recommended: 1200√ó675px (16:9 ratio)"}),U&&e.jsx("button",{type:"button",onClick:()=>_(!0),className:"text-xs text-orange-600 hover:text-orange-700 font-semibold underline",children:"Edit Banner"})]}),ve&&U&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Edit Banner Image"}),e.jsx(xt,{imageUrl:U,aspect:16/9,onConfirm:s=>{re(s),_(!1)},onCancel:()=>_(!1)})]})})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:(c==null?void 0:c.uploadProfilePicture)||"Upload Profile Picture (Circular Logo)"}),ps&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-sm w-full shadow-2xl overflow-hidden max-h-[85vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Logo Requirements"}),e.jsx("p",{className:"text-orange-100 text-xs sm:text-sm",children:"Read before uploading"})]})]})}),e.jsxs("div",{className:"p-3 sm:p-4 space-y-2 sm:space-y-3",children:[e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-2 sm:p-3",children:e.jsxs("p",{className:"font-semibold text-orange-900 text-xs sm:text-sm flex items-center gap-1 sm:gap-2",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Required for Profile"]})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 sm:p-3 space-y-1 sm:space-y-2",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-xs sm:text-sm",children:"‚úì Logo requirements:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsxs("li",{className:"flex items-start gap-1 sm:gap-2 text-xs sm:text-sm text-gray-700",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{children:"Clear, professional business logo"})]}),e.jsxs("li",{className:"flex items-start gap-1 sm:gap-2 text-xs sm:text-sm text-gray-700",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{children:"High quality (min 400x400px)"})]}),e.jsxs("li",{className:"flex items-start gap-1 sm:gap-2 text-xs sm:text-sm text-gray-700",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{children:"Authentic business image"})]})]})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-2 sm:p-3 space-y-1",children:[e.jsxs("p",{className:"font-semibold text-red-900 text-xs sm:text-sm flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})}),"Suspension Policy"]}),e.jsxs("ul",{className:"space-y-0.5 text-xs text-red-800",children:[e.jsxs("li",{className:"flex items-start gap-1",children:[e.jsx("span",{className:"text-red-600",children:"‚Ä¢"}),e.jsx("span",{children:"Fake business info"})]}),e.jsxs("li",{className:"flex items-start gap-1",children:[e.jsx("span",{className:"text-red-600",children:"‚Ä¢"}),e.jsx("span",{children:"Using other's logos"})]}),e.jsxs("li",{className:"flex items-start gap-1",children:[e.jsx("span",{className:"text-red-600",children:"‚Ä¢"}),e.jsx("span",{children:"Inappropriate images"})]})]}),e.jsx("p",{className:"text-xs text-red-900 font-semibold pt-0.5",children:"May cause suspension"})]}),e.jsx("p",{className:"text-xs text-gray-500 italic text-center pt-1",children:"Confirming verifies this is your authentic business logo"})]}),e.jsxs("div",{className:"bg-gray-50 px-3 sm:px-4 py-2 sm:py-3 flex gap-2",children:[e.jsx("button",{onClick:Us,className:"flex-1 px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors min-h-[32px] sm:min-h-[36px]",children:"Cancel"}),e.jsx("button",{onClick:Bs,className:"flex-1 px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm font-semibold text-white bg-gradient-to-r from-green-600 to-green-700 rounded-lg hover:from-green-700 hover:to-green-800 shadow-md transition-all min-h-[32px] sm:min-h-[36px]",children:"Confirm"})]})]})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-orange-200 shadow-lg cursor-pointer hover:border-orange-400 transition-all bg-gray-100 relative",onClick:()=>{const s=document.getElementById("profile-picture-upload");s&&s.click()},children:M?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:M,alt:"Profile",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-8 h-8 text-white mx-auto mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),e.jsx("span",{className:"text-white text-xs font-semibold",children:"Change"})]})})]}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),e.jsx("span",{className:"text-xs mt-1",children:"Upload"})]})}),e.jsx("div",{className:"hidden",children:e.jsx(Fe,{id:"profile-picture-upload",label:"",currentImage:M,onImageChange:Ds})}),M&&e.jsx("div",{className:"absolute -bottom-2 -right-2 w-10 h-10 bg-green-500 rounded-full border-4 border-white shadow-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),e.jsxs("button",{onClick:()=>{const s=document.getElementById("profile-picture-upload");s&&s.click()},className:"inline-flex items-center gap-2 px-4 py-2 mt-4 bg-orange-500 text-white font-medium rounded-lg hover:bg-orange-600 transition-colors shadow-md",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),M?"Change Profile Picture":"Upload Profile Picture"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3 text-center max-w-xs",children:"This will appear as a circular logo overlapping your banner image"})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Gallery Images (with Captions & Descriptions)"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Upload up to 6 images for your gallery. Add a caption (header name) and description (small bio) for each image to describe what it shows."}),e.jsx("div",{className:"grid grid-cols-2 gap-6",children:(F||[]).map((s,r)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(Fe,{id:"gallery-upload-".concat(r),label:"Gallery Image ".concat(r+1),currentImage:s.imageUrl,onImageChange:i=>Ls(r,i),heightClass:"h-40"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Caption for Image ",r+1]}),e.jsx("input",{type:"text",value:s.caption,onChange:i=>Ts(r,i.target.value),placeholder:"e.g., Relaxation Room, Treatment Area",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm",maxLength:50}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(s.caption||"").length,"/50 characters"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Description for Image ",r+1]}),e.jsx("textarea",{value:s.description,onChange:i=>As(r,i.target.value),placeholder:"e.g., Our peaceful relaxation room with ambient lighting and comfortable seating where guests can unwind before and after their massage treatments...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm",maxLength:350,rows:4}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(s.description||"").length,"/350 characters"]})]})]},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900",children:(c==null?void 0:c.nameLabel)||"Name"}),zs(j,k,UserSolidIcon)]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900",children:(c==null?void 0:c.descriptionLabel)||"Description"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-3.5 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(DocumentTextIcon,{className:"h-5 w-5 text-gray-400"})}),e.jsx("textarea",{value:J,onChange:s=>{s.target.value.length<=350&&he(s.target.value)},rows:3,maxLength:350,className:"mt-1 block w-full pl-10 pr-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-brand-green focus:border-brand-green text-gray-900"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[J.length,"/350 characters"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900",children:(c==null?void 0:c.whatsappLabel)||"Contact Number"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(PhoneIcon,{className:"h-5 w-5 text-gray-400"})}),e.jsx("div",{className:"absolute inset-y-0 left-10 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-600 font-medium",children:"+62"})}),e.jsx("input",{type:"text",value:K,onChange:s=>ie(s.target.value),placeholder:"81234567890",className:"mt-1 block w-full pl-20 pr-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-brand-green focus:border-brand-green text-gray-900"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter number without +62 prefix (e.g., 81234567890)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Website URL (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})})}),e.jsx("input",{type:"url",value:_e,onChange:s=>Ee(s.target.value),placeholder:"https://www.yourwebsite.com",className:"mt-1 block w-full pl-10 pr-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-brand-green focus:border-brand-green text-gray-900"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add your business website to show on your profile card"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Business Hours"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-900",children:"Opening Time"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ClockIcon,{className:"h-5 w-5 text-orange-500"})}),e.jsx("input",{type:"time",value:pe,onChange:s=>Le(s.target.value),className:"mt-1 block w-full pl-10 pr-3 py-2 bg-white border-2 border-orange-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-gray-900 font-medium"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-900",children:"Closing Time"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ClockIcon,{className:"h-5 w-5 text-orange-500"})}),e.jsx("input",{type:"time",value:fe,onChange:s=>Te(s.target.value),className:"mt-1 block w-full pl-10 pr-3 py-2 bg-white border-2 border-orange-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-gray-900 font-medium"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Years Established (1-50)"}),e.jsx("input",{type:"number",min:"1",max:"50",value:He,onChange:s=>{const r=parseInt(s.target.value)||1;qe(Math.min(50,Math.max(1,r)))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-gray-900",placeholder:"Enter years (1-50)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How many years has your business been operating?"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-900",children:[(c==null?void 0:c.massageTypesLabel)||"Massage Types",e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(Select up to 5 specialties - ",q.length,"/5 selected)"]})]}),e.jsx("div",{className:"mt-2 p-3 bg-white border border-gray-200 rounded-lg space-y-4",children:(ct||[]).map(s=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:s.category}),e.jsx("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-2",children:(s.types||[]).map(r=>e.jsx(ms,{label:r,checked:q.includes(r),onChange:()=>Ms(r),disabled:!q.includes(r)&&q.length>=5},r))})]},s.category))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Languages Spoken at Your Place"}),e.jsx("div",{className:"mt-2 p-3 bg-white border border-gray-200 rounded-lg",children:e.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:[{code:"en",flag:"üá¨üáß",name:"English"},{code:"id",flag:"üáÆüá©",name:"Indonesian"},{code:"zh",flag:"üá®üá≥",name:"Chinese"},{code:"ja",flag:"üáØüáµ",name:"Japanese"},{code:"ko",flag:"üá∞üá∑",name:"Korean"},{code:"ru",flag:"üá∑üá∫",name:"Russian"},{code:"fr",flag:"üá´üá∑",name:"French"},{code:"de",flag:"üá©üá™",name:"German"},{code:"es",flag:"üá™üá∏",name:"Spanish"}].map(s=>e.jsxs("button",{type:"button",onClick:()=>Rs(s.code),className:"flex items-center gap-2 px-3 py-2 rounded-lg border-2 transition-all ".concat(Se.includes(s.code)?"bg-blue-50 border-blue-500 text-blue-900":"bg-white border-gray-200 text-gray-700 hover:border-gray-300"),children:[e.jsx("span",{className:"text-lg",children:s.flag}),e.jsx("span",{className:"text-sm font-medium",children:s.name}),Se.includes(s.code)&&e.jsx("svg",{className:"w-4 h-4 ml-auto text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},s.code))})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Additional Services"}),e.jsx("div",{className:"mt-2 p-3 bg-white border border-gray-200 rounded-lg",children:e.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:(dt||[]).map(s=>e.jsx(ms,{label:s,checked:Ye.includes(s),onChange:()=>Es(s)},s))})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:(c==null?void 0:c.locationLabel)||"Location"}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"mb-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-400 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(ns,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-bold text-gray-900 mb-1",children:["Current City: ",h&&h.lat&&h.lng&&ge({lat:h.lat,lng:h.lng})?e.jsx("span",{className:"text-blue-700 uppercase",children:ge({lat:h.lat,lng:h.lng})}):e.jsx("span",{className:"text-gray-400",children:'Not set - Click "Set Location" below'})]}),e.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:'Your location is determined by GPS coordinates only. Use the "Set Location" button below to update.'})]})]})}),e.jsxs("div",{className:"relative mb-3",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(MapPinIcon,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{ref:ze,type:"text",value:T,onChange:s=>{$(s.target.value),ke(!0)},placeholder:(c==null?void 0:c.locationPlaceholder)||"Enter your location",className:"block w-full pl-10 pr-3 py-3 bg-gray-50 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-brand-orange text-gray-900 text-sm",readOnly:!de})]}),e.jsxs(ds,{onClick:$s,variant:"secondary",className:"w-full flex items-center justify-center gap-2 py-3 text-white border-0 ".concat(T?"bg-green-500 hover:bg-green-600":"bg-brand-orange hover:bg-orange-600"),children:[e.jsx(ns,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:T?"Location Set ‚úì":"Set Location from Device (optional)"})]}),T&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["üìç ",T.substring(0,50),T.length>50?"...":""]}),h&&h.lat&&h.lng&&h.lat!==0&&h.lng!==0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Location Coordinates:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-2",children:[e.jsxs("div",{className:"bg-white rounded p-2 border",children:[e.jsx("span",{className:"text-gray-500",children:"Lat:"}),e.jsx("span",{className:"font-mono ml-1 text-gray-900",children:Number(h.lat).toFixed(6)})]}),e.jsxs("div",{className:"bg-white rounded p-2 border",children:[e.jsx("span",{className:"text-gray-500",children:"Lng:"}),e.jsx("span",{className:"font-mono ml-1 text-gray-900",children:Number(h.lng).toFixed(6)})]})]}),e.jsxs("div",{className:"bg-white rounded p-2 border",children:[e.jsx("span",{className:"text-gray-500 text-xs",children:"Map ID:"}),e.jsxs("div",{className:"font-mono text-xs text-gray-900 mt-1 break-all",children:[Number(h.lat).toFixed(6),",",Number(h.lng).toFixed(6)]}),e.jsx("button",{onClick:()=>{const s="".concat(Number(h.lat).toFixed(6),",").concat(Number(h.lng).toFixed(6));navigator.clipboard.writeText(s),D({message:"üìã Coordinates copied to clipboard!",type:"success"}),setTimeout(()=>D(null),2e3)},className:"mt-1 mr-3 text-xs text-orange-600 hover:text-orange-700 underline",children:"Copy Coordinates"}),e.jsx("button",{onClick:()=>{const s="https://www.google.com/maps?q=".concat(h.lat,",").concat(h.lng);window.open(s,"_blank")},className:"text-xs text-orange-600 hover:text-orange-700 underline",children:"Open in Google Maps"})]})]})]})]}),!de&&e.jsx("div",{className:"space-y-3"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium text-gray-800",children:(c==null?void 0:c.pricingTitle)||"Pricing"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Set your online massage prices"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-orange-800 text-center mb-1",children:(c==null?void 0:c["60min"])||"60 min"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:e.jsx(CurrencyRpIcon,{className:"h-3 w-3 text-gray-400"})}),e.jsx("input",{type:"text",value:Ge(f[60]),onChange:s=>Ve("60",s.target.value),placeholder:"345k",className:"block w-full pl-7 pr-1 py-1.5 bg-white border border-gray-300 rounded-md shadow-sm text-gray-900 font-mono text-sm"})]}),f[60]>0&&e.jsxs("p",{className:"text-[10px] text-gray-600 mt-0.5 text-center",children:["Rp ",f[60].toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-blue-800 text-center mb-1",children:(c==null?void 0:c["90min"])||"90 min"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:e.jsx(CurrencyRpIcon,{className:"h-3 w-3 text-gray-400"})}),e.jsx("input",{type:"text",value:Ge(f[90]),onChange:s=>Ve("90",s.target.value),placeholder:"450k",className:"block w-full pl-7 pr-1 py-1.5 bg-white border border-gray-300 rounded-md shadow-sm text-gray-900 font-mono text-sm"})]}),f[90]>0&&e.jsxs("p",{className:"text-[10px] text-gray-600 mt-0.5 text-center",children:["Rp ",f[90].toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-green-800 text-center mb-1",children:(c==null?void 0:c["120min"])||"120 min"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:e.jsx(CurrencyRpIcon,{className:"h-3 w-3 text-gray-400"})}),e.jsx("input",{type:"text",value:Ge(f[120]),onChange:s=>Ve("120",s.target.value),placeholder:"600k",className:"block w-full pl-7 pr-1 py-1.5 bg-white border border-gray-300 rounded-md shadow-sm text-gray-900 font-mono text-sm"})]}),f[120]>0&&e.jsxs("p",{className:"text-[10px] text-gray-600 mt-0.5 text-center",children:["Rp ",f[120].toLocaleString("id-ID")]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border-2 border-orange-300 rounded-xl p-6 shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Activate Discount"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Boost bookings with special offers"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Select Discount Percentage"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:[10,15,20,30].map(s=>e.jsxs("button",{type:"button",onClick:()=>oe(s),className:"py-3 rounded-lg font-bold text-lg transition-all ".concat(I===s?"bg-orange-500 text-white shadow-lg scale-105":"bg-white text-gray-700 hover:bg-gray-100 border-2 border-gray-200"),children:[s,"%"]},s))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Select Duration"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{label:"4 Hours",value:4},{label:"8 Hours",value:8},{label:"12 Hours",value:12}].map(s=>e.jsx("button",{type:"button",onClick:()=>O(s.value),className:"py-3 rounded-lg font-bold transition-all ".concat(S===s.value?"bg-orange-500 text-white shadow-lg scale-105":"bg-white text-gray-700 hover:bg-gray-100 border-2 border-gray-200"),children:s.label},s.value))})]}),e.jsx("button",{type:"button",onClick:async()=>{if(!I||!S){D({message:"‚ö†Ô∏è Please select discount percentage and duration",type:"error"}),setTimeout(()=>D(null),3e3);return}try{const s=new Date(Date.now()+S*60*60*1e3).toISOString();await xe.update(String(A),{discountpercentage:I,discountduration:S,isdiscountactive:!0,discountendtime:s}),Z(!0),ee(s),D({message:"‚úÖ ".concat(I,"% discount activated for ").concat(S," hours!"),type:"success"}),setTimeout(()=>D(null),3e3)}catch{D({message:"‚ùå Failed to activate discount",type:"error"}),setTimeout(()=>D(null),3e3)}},disabled:!I||!S,className:"w-full py-4 rounded-lg font-bold text-white transition-all ".concat(I&&S?"bg-gradient-to-r from-orange-500 to-red-500 hover:shadow-lg hover:scale-105":"bg-gray-300 cursor-not-allowed"),children:I&&S?"Activate ".concat(I,"% OFF for ").concat(S,"h"):"Select Options to Activate"}),H&&Q&&new Date(Q)>new Date&&e.jsx("div",{className:"mt-4 p-4 bg-green-50 border-2 border-green-500 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-900 font-bold",children:"üéâ Discount Active!"}),e.jsxs("p",{className:"text-sm text-green-700",children:[I,"% OFF - Expires at ",new Date(Q).toLocaleTimeString()]})]}),e.jsx("button",{type:"button",onClick:async()=>{try{await xe.update(String(A),{isdiscountactive:!1,discountendtime:""}),Z(!1),ee(""),D({message:"‚úÖ Discount deactivated",type:"success"}),setTimeout(()=>D(null),3e3)}catch{}},className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium",children:"End Now"})]})})]}),e.jsx("div",{className:"sticky bottom-0 left-0 right-0 bg-white pt-4 pb-4 border-t border-gray-200 shadow-lg z-50",children:e.jsx(ds,{onClick:Cs,className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3 px-6 rounded-lg transition-all shadow-md",children:"üíæ Save Profile"})})]})}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsx("header",{className:"bg-white shadow-md p-3 sm:p-4 sticky top-0 z-40",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:[e.jsx("span",{className:"text-black",children:"Inda"}),e.jsx("span",{className:"text-orange-500",children:"Street"})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(Ct,{}),C&&e.jsxs("button",{onClick:C,className:"min-w-[44px] min-h-[44px] p-2 flex items-center justify-center text-pink-600 active:text-pink-700 active:bg-pink-50 rounded-full transition-colors touch-manipulation relative",title:"Customer Support Chat","aria-label":"Customer Support Chat",children:[e.jsx(ue,{className:"w-5 h-5 sm:w-6 sm:h-6"}),(u==null?void 0:u.membershipTier)==="premium"&&e.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-green-500 rounded-full"})]}),N&&e.jsx("button",{onClick:N,className:"min-w-[44px] min-h-[44px] p-2 flex items-center justify-center text-blue-600 active:text-blue-700 active:bg-blue-50 rounded-full transition-colors touch-manipulation",title:"Payment Information","aria-label":"Payment Information",children:e.jsx(Hs,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsx(ot,{count:Os,onClick:()=>Je(!me)}),e.jsx("button",{onClick:()=>{me?Je(!1):l&&l("home")},className:"min-w-[44px] min-h-[44px] p-2 flex items-center justify-center text-gray-700 active:text-orange-500 active:bg-orange-50 rounded-full transition-colors touch-manipulation",title:me?"Back to Dashboard":"Go to Home","aria-label":me?"Back to Dashboard":"Go to Home",children:e.jsx(rs,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})]})}),e.jsx("main",{className:"max-w-7xl mx-auto px-2 sm:px-4 py-4 sm:py-6 pb-40",children:me?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Bookings & Notifications"}),e.jsx("button",{onClick:()=>l&&l("home"),className:"min-w-[44px] min-h-[44px] p-2 flex items-center justify-center text-gray-700 hover:text-orange-500 hover:bg-orange-50 rounded-full transition-colors",title:"Go to Home","aria-label":"Go to Home",children:e.jsx(rs,{className:"w-6 h-6"})})]}),ye.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üìÖ"}),"Upcoming Bookings"]}),e.jsx("div",{className:"space-y-3",children:ye.map(s=>e.jsx("div",{className:"p-4 bg-gradient-to-r from-orange-50 to-yellow-50 rounded-lg border-l-4 border-orange-500",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.customerName||"Customer"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.duration," min - ",s.massageType]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(s.bookingDate).toLocaleDateString()," at ",s.bookingTime]})]}),e.jsx("span",{className:"px-3 py-1 bg-orange-500 text-white text-xs font-semibold rounded-full",children:s.status})]})},s.$id))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üîî"}),"Notifications"]}),e.jsx("div",{className:"space-y-3",children:(w||[]).length>0?(w||[]).sort((s,r)=>new Date(r.createdAt).getTime()-new Date(s.createdAt).getTime()).map(s=>e.jsxs("div",{className:"p-4 rounded-lg shadow-sm flex items-start gap-4 ".concat(s.isRead?"bg-white border border-gray-200":"bg-gradient-to-r from-green-50 to-blue-50 border-l-4 border-orange-500"),children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(we,{className:"w-5 h-5 text-orange-600"})})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"text-sm ".concat(s.isRead?"text-gray-600":"text-gray-800 font-semibold"),children:s.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(s.createdAt).toLocaleString()})]}),!s.isRead&&e.jsx("div",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full flex-shrink-0 mt-1 animate-pulse"})]},s.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(we,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No notifications yet"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"New updates and messages will appear here"})]})})]}),ye.length===0&&(w||[]).length===0&&e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üì≠"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"No upcoming bookings or notifications"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Check back later for updates"})]})]}):Gs()}),e.jsx("div",{className:"fixed bottom-4 right-4 z-40",children:e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-lg border border-gray-200 max-w-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(Y?"bg-gray-100":"bg-gradient-to-br from-orange-500 to-amber-500"),children:e.jsx(we,{className:"w-5 h-5 ".concat(Y?"text-gray-400":"text-white")})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-gray-800",children:Y?"App Installed":"Download App"}),e.jsx("p",{className:"text-xs text-gray-600",children:Y?"IndaStreet app ready":"Better notifications"})]})]}),e.jsxs("button",{onClick:ss,disabled:Y||!se,className:"w-full py-2 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ".concat(Y?"bg-gray-200 text-gray-500 cursor-not-allowed":se?"bg-gradient-to-r from-orange-500 to-amber-500 text-white hover:shadow-md":"bg-gray-200 text-gray-500 cursor-not-allowed"),children:[e.jsx(qs,{className:"w-4 h-4"}),Y?"Installed ‚úì":se?"Download":"Available in Browser"]})]})}),e.jsx(pt,{isOpen:bs,onClose:()=>Ze(!1),title:"Complete Your Business Profile",missingFields:ys,type:"error"}),ws&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 px-6 py-4 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ys,{className:"w-6 h-6 text-white"}),e.jsx("h2",{className:"text-white text-lg font-bold",children:"Submit Payment & Go Live"})]}),e.jsx("button",{onClick:()=>Qe(!1),className:"text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-1 transition-colors",title:"Close modal (you can edit profile and come back)",children:e.jsx(Js,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((s,r)=>e.jsx(_s,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},r))}),e.jsx("h3",{className:"font-bold text-gray-800",children:"Plus Plan - Rp 250,000/month"})]}),e.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[e.jsx("li",{children:"‚úÖ 0% commission on all bookings"}),e.jsx("li",{children:"‚úÖ Premium profile badge"}),e.jsx("li",{children:"‚úÖ Priority placement in search"}),e.jsx("li",{children:"‚úÖ Advanced booking features"})]})]}),e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-400 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl",children:"üìã"}),e.jsx("h3",{className:"font-bold text-blue-900 text-lg",children:"Payment & Verification Process"})]}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-900",children:[e.jsxs("p",{children:["‚úÖ ",e.jsx("strong",{children:"Step 1:"})," Your profile is now LIVE - customers can see you"]}),e.jsxs("p",{children:["‚úÖ ",e.jsx("strong",{children:"Step 2:"})," Complete payment and upload proof below"]}),e.jsxs("p",{children:["‚è∞ ",e.jsx("strong",{children:"Step 3:"})," You have 5 hours to edit your profile after submission"]}),e.jsxs("p",{children:["üîç ",e.jsx("strong",{children:"Step 4:"})," Admin reviews payment within 48 hours"]}),e.jsxs("p",{children:["‚≠ê ",e.jsx("strong",{children:"Step 5:"})," Verified badge activated after approval"]})]})]}),e.jsxs("div",{className:"bg-orange-50 border-2 border-orange-400 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"‚è∞"}),e.jsx("h3",{className:"font-bold text-orange-900 text-base",children:"Submit Payment Proof Today"})]}),e.jsx("p",{className:"text-orange-800 text-sm font-semibold",children:"üí° Upload your payment proof below. After submission, you can edit your profile for 5 hours before it locks for admin review."})]}),e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:[e.jsx("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:"üè¶ Bank Transfer Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Bank:"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Bank Mandiri"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Account Name:"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"PT IndaStreet Indonesia"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Account Number:"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"1370-0123-4567-890"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Amount:"}),e.jsx("span",{className:"font-bold text-purple-600 text-lg",children:"Rp 250,000"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"üì∏ Upload Payment Proof *"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-purple-400 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:Ss,className:"hidden",id:"payment-proof-upload"}),e.jsx("label",{htmlFor:"payment-proof-upload",className:"cursor-pointer",children:Be?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:Be,alt:"Payment proof",className:"max-h-48 mx-auto rounded-lg"}),e.jsx("p",{className:"text-sm text-green-600 font-semibold",children:"‚úÖ Image uploaded"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Click to change"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ks,{className:"w-12 h-12 mx-auto text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload payment proof"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG up to 5MB"})]})})]})]}),e.jsx("button",{onClick:Ps,disabled:!be||Ue,className:"w-full px-6 py-4 rounded-xl text-white font-bold text-lg shadow-lg transition-all ".concat(!be||Ue?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 hover:shadow-xl"),children:Ue?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):be?"üöÄ Submit Payment & Go LIVE!":"‚ö†Ô∏è Please Upload Payment Proof"}),e.jsx("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-green-800 font-medium text-center",children:"‚úÖ Your profile is already LIVE! Submit payment proof before midnight to keep it active."})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsx("p",{className:"text-xs text-blue-800 text-center",children:"üí° You can close this modal to edit your profile and come back to submit payment anytime before midnight."})})]})]})})]})},Pt=({place:t,onBack:n})=>{const[o,l]=a.useState([]),[d,m]=a.useState(""),[x,y]=a.useState(!0),[w,p]=a.useState(!1),c=a.useRef(null),C=a.useRef(null),N=t?"place-".concat(t.$id||t.id,"-admin"):"",u=()=>{var j;(j=c.current)==null||j.scrollIntoView({behavior:"smooth"})};a.useEffect(()=>{u()},[o]);const L=async()=>{if(!(!t||!N))try{const j=await os.getConversation(N);l(j.map(k=>({$id:k.$id,conversationId:k.conversationId,senderId:k.senderId,senderType:k.senderType,senderName:k.senderName,message:k.message,timestamp:k.timestamp||k.$createdAt,read:k.read||!1}))),y(!1)}catch{y(!1)}};a.useEffect(()=>{if(t&&N)return L(),C.current=setInterval(L,5e3),()=>{C.current&&clearInterval(C.current)}},[t,N]);const ae=async()=>{if(!(!d.trim()||!t||!N)){p(!0);try{await os.sendMessage({conversationId:N,senderId:String(t.$id||t.id),senderName:t.name||"Place",recipientId:"admin",recipientName:"Admin",recipientType:"admin",content:d.trim(),type:"text"}),m(""),await L()}catch{rt("‚ùå Failed to send message","error")}finally{p(!1)}}},W=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),ae())};return t?t.membershipTier==="premium"?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-amber-50 flex flex-col",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(is,{className:"w-6 h-6 text-gray-700"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"üí¨ Customer Support Chat"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Chat with admin support team"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-green-100 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs font-semibold text-green-700",children:"Premium"})]})]})})}),e.jsx("main",{className:"flex-1 max-w-4xl w-full mx-auto px-4 py-6 overflow-hidden flex flex-col",children:e.jsxs("div",{className:"flex-1 bg-white rounded-2xl shadow-lg overflow-hidden flex flex-col",children:[e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:x?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-orange-500 mx-auto mb-3",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Loading messages..."})]})}):o.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ue,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg font-semibold mb-2",children:"No messages yet"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Start a conversation with the admin team"})]})}):e.jsxs(e.Fragment,{children:[o.map(j=>{const k=j.senderType==="place";return e.jsx("div",{className:"flex ".concat(k?"justify-end":"justify-start"),children:e.jsxs("div",{className:"max-w-[70%] ".concat(k?"order-2":"order-1"),children:[!k&&e.jsx("p",{className:"text-xs text-gray-600 mb-1 ml-3",children:j.senderName}),e.jsx("div",{className:"px-4 py-3 rounded-2xl ".concat(k?"bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-br-sm":"bg-gray-100 text-gray-900 rounded-bl-sm"),children:e.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:j.message})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ".concat(k?"text-right mr-3":"ml-3"),children:new Date(j.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},j.$id)}),e.jsx("div",{ref:c})]})}),e.jsxs("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx("textarea",{value:d,onChange:j=>m(j.target.value),onKeyPress:W,placeholder:"Type your message... (Press Enter to send, Shift+Enter for new line)",className:"flex-1 resize-none border-2 border-gray-300 rounded-xl px-4 py-3 focus:border-orange-500 focus:outline-none transition-colors text-sm min-h-[44px] max-h-32",rows:1,disabled:w}),e.jsx("button",{onClick:ae,disabled:!d.trim()||w,className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl hover:from-orange-600 hover:to-amber-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none flex items-center gap-2",children:w?e.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Zs,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Send"})]})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Admin typically responds within a few hours"})]})]})})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-amber-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(is,{className:"w-6 h-6 text-gray-700"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"üí¨ Customer Support Chat"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Chat with admin support"})]})]})})})}),e.jsx("main",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 rounded-2xl shadow-lg p-12 text-center text-white",children:[e.jsx("div",{className:"bg-white/20 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6",children:e.jsx(ue,{className:"w-10 h-10"})}),e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Premium Feature"}),e.jsx("p",{className:"text-lg mb-6 opacity-90",children:"Customer support chat is available for Premium members only"}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-6 mb-6 text-left max-w-md mx-auto",children:[e.jsx("h3",{className:"font-bold text-xl mb-3",children:"With Premium Chat you get:"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-2xl",children:"‚úÖ"}),e.jsx("span",{children:"Direct support from admin team"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-2xl",children:"‚úÖ"}),e.jsx("span",{children:"Fast response times"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-2xl",children:"‚úÖ"}),e.jsx("span",{children:"Booking assistance"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-2xl",children:"‚úÖ"}),e.jsx("span",{children:"Technical support"})]})]})]}),e.jsx("button",{onClick:n,className:"px-8 py-3 bg-white text-orange-600 font-bold rounded-xl hover:bg-gray-100 transition-colors shadow-lg",children:"Upgrade to Premium"})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-amber-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Xs,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Place data not found"})]})})};function qt(){const[t,n]=a.useState(!1),[o,l]=a.useState(!0),[d,m]=a.useState(null),[x,y]=a.useState("dashboard"),[w,p]=a.useState(()=>{const u=localStorage.getItem("indastreet_language");return u==="en"||u==="id"?u:"id"}),c=u=>{p(u),localStorage.setItem("indastreet_language",u)};a.useEffect(()=>{C()},[]);const C=async()=>{try{const u=await cs.getCurrentUser();u&&(m(u),n(!0))}catch{}finally{l(!1)}},N=async()=>{try{await cs.logout(),n(!1),m(null)}catch{}};if(o)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})});if(!t){const u=window.location.origin.includes("localhost")?"http://localhost:3001":window.location.origin;return window.location.href="".concat(u,"/signin"),e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Redirecting to sign in..."})]})})}return x==="chat"?e.jsx(Pt,{place:(d==null?void 0:d.place)||null,onBack:()=>y("dashboard")}):x==="payment"?e.jsx(mt,{place:(d==null?void 0:d.place)||null,onBack:()=>y("dashboard")}):e.jsx(nt,{value:{language:w,setLanguage:c},children:e.jsx(St,{onLogout:N,onNavigateToChat:()=>y("chat"),onNavigateToPayment:()=>y("payment"),language:w,onLanguageChange:c})})}export{qt as default};
