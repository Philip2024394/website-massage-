import{j as e,a as v}from"./vendor-react.DJgHGAhw.js";import{B as y}from"./route-booking.yuk30L8G.js";import{I as Z}from"./ImageUpload.DqEc8poE.js";import{h as g,y as ee,L as se}from"./route-therapist.DVVqC6AH.js";import"./vendor-appwrite.BT2H32tF.js";import"./vendor-misc.BCNplu90.js";import"./route-portals.BJGRQhN_.js";const W=["Indonesian (Bahasa Indonesia)","English"],ae=[{label:"1 Month",value:"1",months:1},{label:"3 Months",value:"3",months:3},{label:"6 Months",value:"6",months:6},{label:"1 Year",value:"12",months:12}],te=({selectedLanguages:u,onLanguagesChange:f,className:N=""})=>{const T=(a,l)=>{const p=l?[...u,a]:u.filter(j=>j!==a);f(p)},c=a=>{const l=a.split(",").map(p=>p.trim()).filter(p=>p&&!W.includes(p)&&!u.includes(p));return l.length>0?(f([...u,...l]),!0):!1},o=a=>{f(u.filter((l,p)=>p!==a))};return e.jsxs("div",{className:N,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Languages Spoken"}),e.jsx("div",{className:"max-h-48  border border-gray-300 rounded-lg p-3 bg-gray-50",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:W.map(a=>e.jsxs("label",{className:"flex items-center space-x-2 text-sm cursor-pointer hover:bg-white p-2 rounded transition-colors",children:[e.jsx("input",{type:"checkbox",checked:u.includes(a),onChange:l=>T(a,l.target.checked),className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500 focus:ring-2"}),e.jsx("span",{className:"text-gray-700",children:a})]},a))})}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Additional Languages (optional)"}),e.jsx("input",{type:"text",placeholder:"Enter other languages separated by commas",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",onBlur:a=>{c(a.target.value)&&(a.target.value="")}})]}),u.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-2",children:"Selected Languages:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u.map((a,l)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[a,e.jsx("button",{type:"button",onClick:()=>o(l),className:"ml-2 inline-flex items-center justify-center w-4 h-4 rounded-full text-orange-600 hover:bg-orange-200 hover:text-orange-800 focus:outline-none focus:bg-orange-200 focus:text-orange-800",children:e.jsx("svg",{className:"w-2 h-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8",children:e.jsx("path",{strokeLinecap:"round",strokeWidth:"1.5",d:"m1 1 6 6m0-6-6 6"})})})]},l))})]})]})},me=()=>{var E,A,$,L,I,V,O,B,R,F,H,U,J;const[u,f]=v.useState([]),[N,T]=v.useState(!1),[c,o]=v.useState(null),[a,l]=v.useState(null),[p,j]=v.useState(!1);v.useEffect(()=>{(async()=>{x()})()},[]);const x=async()=>{T(!0);try{const s=await g.getAll(),t=s.filter(i=>i.pricing&&i.pricing!=='{"60":0,"90":0,"120":0}').length,r=s.map(i=>({$id:i.$id,name:i.name||"No name",email:i.email||"No email",city:i.city||"",country:i.country||"",whatsappNumber:i.whatsappNumber||i.phoneNumber||"",profilePicture:i.profilePicture||"",status:["pending","active","deactivated"].includes(i.status)?i.status:i.isLive?"active":"pending",membershipPackage:i.membershipPackage,activeMembershipDate:i.activeMembershipDate,isLive:i.isLive||!1,pricing:i.pricing,hotelVillaPricing:i.hotelVillaPricing,description:i.description||"",experience:i.experience||"",specialties:i.specialties||[],languages:i.languages||[],massageTypes:i.massageTypes||[],discountPercentage:i.discountPercentage||0,additionalImages:i.additionalImages||[],hotelDiscount:i.hotelDiscount||20,villaDiscount:i.villaDiscount||20,location:i.location||"",coordinates:i.coordinates||"",yearsOfExperience:i.yearsOfExperience||0,isLicensed:i.isLicensed||!1,licenseNumber:i.licenseNumber||""}));f(r)}catch{}finally{T(!1)}},z=async(s,t)=>{o(s);try{const r=new Date;r.setMonth(r.getMonth()+t);const i=r.toISOString().split("T")[0];let n=null;try{n=await g.getById(s)}catch{}const b={isLive:!0,status:"active",activeMembershipDate:i,...n&&{name:n.name,email:n.email,whatsappNumber:n.whatsappNumber,profilePicture:n.profilePicture,description:n.description,mainImage:n.mainImage,yearsOfExperience:n.yearsOfExperience,massageTypes:n.massageTypes,languages:n.languages,pricing:n.pricing,location:n.location,coordinates:n.coordinates,status:n.status,rating:n.rating,reviewCount:n.reviewCount,isLicensed:n.isLicensed,licenseNumber:n.licenseNumber,analytics:n.analytics,hotelVillaServiceStatus:n.hotelVillaServiceStatus,serviceRadius:n.serviceRadius,password:n.password,createdAt:n.createdAt},...(n==null?void 0:n.hotelDiscount)!==void 0&&{hotelDiscount:n.hotelDiscount},...(n==null?void 0:n.villaDiscount)!==void 0&&{villaDiscount:n.villaDiscount}};await g.update(s,b),await x(),alert("Therapist membership set to ".concat(t," month(s)! All therapist data preserved."))}catch(r){alert("Error activating therapist: "+(r.message||"Unknown error. Please try again."))}finally{o(null)}},K=async s=>{o(s);try{let t=null;try{t=await g.getById(s)}catch{}const r={status:"deactivated",isLive:!1,...t&&{name:t.name,email:t.email,whatsappNumber:t.whatsappNumber,profilePicture:t.profilePicture,description:t.description,mainImage:t.mainImage,yearsOfExperience:t.yearsOfExperience,massageTypes:t.massageTypes,languages:t.languages,pricing:t.pricing,location:t.location,coordinates:t.coordinates,rating:t.rating,reviewCount:t.reviewCount,isLicensed:t.isLicensed,licenseNumber:t.licenseNumber,analytics:t.analytics,hotelVillaServiceStatus:t.hotelVillaServiceStatus,serviceRadius:t.serviceRadius,password:t.password,activeMembershipDate:t.activeMembershipDate,createdAt:t.createdAt},...(t==null?void 0:t.hotelDiscount)!==void 0&&{hotelDiscount:t.hotelDiscount},...(t==null?void 0:t.villaDiscount)!==void 0&&{villaDiscount:t.villaDiscount}};await g.update(s,r),await x(),alert("Therapist deactivated successfully! All therapist data preserved.")}catch(t){alert("Error deactivating therapist: "+(t.message||"Unknown error. Please try again."))}finally{o(null)}},Y=s=>{const r=((b,w,D)=>{if(!b||typeof b!="string")return{home:{"60min":"","90min":"","120min":""},hotelVilla:{"60min":"","90min":"","120min":""}};try{const d=JSON.parse(b),m=((w||20)+(D||20))/2,h={"60min":d[60]?Math.round(d[60]*(1-m/100)).toString():"","90min":d[90]?Math.round(d[90]*(1-m/100)).toString():"","120min":d[120]?Math.round(d[120]*(1-m/100)).toString():""};return{home:{"60min":d[60]?d[60].toString():"","90min":d[90]?d[90].toString():"","120min":d[120]?d[120].toString():""},hotelVilla:h}}catch{return{home:{"60min":"","90min":"","120min":""},hotelVilla:{"60min":"","90min":"","120min":""}}}})(s.pricing,s.hotelDiscount,s.villaDiscount),i={home:r.home,hotelVilla:r.hotelVilla},n={$id:s.$id,name:s.name||"",email:s.email||"",country:s.country||"",whatsappNumber:s.whatsappNumber||"",profilePicture:s.profilePicture||"",description:s.description||"",experience:s.experience||"",specialties:Array.isArray(s.specialties)?s.specialties:[],pricing:i,discountPercentage:s.discountPercentage||0,additionalImages:Array.isArray(s.additionalImages)?s.additionalImages:[],languages:s.languages?typeof s.languages=="string"?se(s.languages):Array.isArray(s.languages)?s.languages:[]:[],massageTypes:s.massageTypes?ee(s.massageTypes):[]};l(n),j(!0)},_=async()=>{if(a){o(a.$id);try{let s=null;try{s=await g.getById(a.$id)}catch{}const r=(m=>{if(!m||typeof m!="object")return'{"60":0,"90":0,"120":0}';const h=m.home||{},S={60:parseInt(h["60min"])||0,90:parseInt(h["90min"])||0,120:parseInt(h["120min"])||0};return JSON.stringify(S)})(a.pricing),i=m=>{if(!m||typeof m!="object")return{hotelDiscount:20,villaDiscount:20};const h=m.home||{},S=m.hotelVilla||{},k=((parseInt(h["60min"])||0)+(parseInt(h["90min"])||0)+(parseInt(h["120min"])||0))/3,q=((parseInt(S["60min"])||0)+(parseInt(S["90min"])||0)+(parseInt(S["120min"])||0))/3;let P=20;return k>0&&q>0&&(P=Math.round((k-q)/k*100),P=Math.max(0,Math.min(50,P))),{hotelDiscount:P,villaDiscount:P}},{hotelDiscount:n,villaDiscount:b}=i(a.pricing);let w=typeof a.languages=="string"?a.languages:JSON.stringify(a.languages);w.length>255&&(w="[]");let D=typeof a.massageTypes=="string"?a.massageTypes:JSON.stringify(a.massageTypes);D.length>255&&(D="[]");const d={name:a.name,email:a.email,whatsappNumber:a.whatsappNumber,profilePicture:a.profilePicture,description:a.description,yearsOfExperience:parseInt(a.experience)||0,pricing:r,languages:w,massageTypes:D,...(s==null?void 0:s.hotelDiscount)!==void 0&&{hotelDiscount:n},...(s==null?void 0:s.villaDiscount)!==void 0&&{villaDiscount:b},...s&&{mainImage:s.mainImage,location:s.location,coordinates:s.coordinates,status:s.status,rating:s.rating,reviewCount:s.reviewCount,isLicensed:s.isLicensed,licenseNumber:s.licenseNumber,analytics:s.analytics,hotelVillaServiceStatus:s.hotelVillaServiceStatus,serviceRadius:s.serviceRadius,password:s.password,isLive:s.isLive,activeMembershipDate:s.activeMembershipDate,createdAt:s.createdAt}};await g.update(a.$id,d),await x(),j(!1),l(null),alert("Therapist updated successfully! All existing therapist data has been preserved while updating the admin-controlled fields.")}catch(s){alert("Error updating therapist: "+(s.message||"Unknown error. Please try again."))}finally{o(null)}}},M=()=>{j(!1),l(null)},G=async(s,t)=>{o(s);try{let r=null;try{r=await g.getById(s)}catch{}const i={hotelDiscount:t,...r&&{name:r.name,email:r.email,whatsappNumber:r.whatsappNumber,profilePicture:r.profilePicture,description:r.description,mainImage:r.mainImage,yearsOfExperience:r.yearsOfExperience,massageTypes:r.massageTypes,languages:r.languages,pricing:r.pricing,location:r.location,coordinates:r.coordinates,status:r.status,isLive:r.isLive,rating:r.rating,reviewCount:r.reviewCount,isLicensed:r.isLicensed,licenseNumber:r.licenseNumber,analytics:r.analytics,hotelVillaServiceStatus:r.hotelVillaServiceStatus,serviceRadius:r.serviceRadius,password:r.password,activeMembershipDate:r.activeMembershipDate,createdAt:r.createdAt},...(r==null?void 0:r.villaDiscount)!==void 0&&{villaDiscount:r.villaDiscount}};await g.update(s,i),await x(),alert("Discount updated to ".concat(t,"%! All other therapist data has been preserved."))}catch(r){alert("Error updating discount: "+(r.message||"Unknown error. Please try again."))}finally{o(null)}},Q=async(s,t)=>{if(!window.confirm('Are you sure you want to permanently DELETE "'.concat(t,'"?\n\nThis action CANNOT be undone and will remove:\n- Profile and all data\n- Reviews and ratings\n- Membership history\n- Profile images\n\nType "DELETE" to confirm.')))return;if(window.prompt('To confirm deletion of "'.concat(t,'", type DELETE in capital letters:'))!=="DELETE"){alert("Deletion cancelled - confirmation text did not match.");return}o(s);try{await g.delete(s),await x(),alert('Therapist "'.concat(t,'" has been permanently deleted.'))}catch(n){alert("Error deleting therapist: "+(n.message||"Unknown error"))}finally{o(null)}},X=s=>{switch(s){case"active":return"bg-green-100 text-green-700";case"deactivated":return"bg-red-100 text-red-700";default:return"bg-yellow-100 text-yellow-700"}},C=s=>s?new Date(s)<new Date:!1;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Manage Live Therapist Profiles"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{try{const s=window.pricingHelper;if(s){const t=await s.addSamplePricingToAllTherapists();alert("âœ… Updated pricing for ".concat(t.updated," therapists!")),x()}else alert("âŒ Pricing helper not loaded. Please refresh the page.")}catch{alert("âŒ Error adding pricing data. Check console for details.")}},className:"px-3 py-1.5 text-sm bg-green-600 text-white rounded hover:bg-green-700",children:"ðŸ·ï¸ Add Sample Pricing"}),e.jsx("button",{onClick:async()=>{(await g.getAll()).forEach((t,r)=>{})},className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"ðŸ” Debug Data"}),e.jsx("button",{onClick:x,className:"px-3 py-1.5 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50",disabled:N,children:N?"Refreshing...":"Refresh"})]})]}),N?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-brand-green"})}):e.jsx("div",{className:"space-y-3",children:u.length===0?e.jsx("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-500",children:"No therapist accounts found."})}):u.map(s=>e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsxs("div",{className:"relative mb-4",children:[s.profilePicture?e.jsx("img",{src:s.profilePicture,alt:s.name,className:"w-24 h-24 rounded-full object-cover border-4 border-green-500"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 border-4 border-red-500 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400 text-3xl",children:"ðŸ‘¤"})}),s.discountPercentage&&s.discountPercentage>0&&e.jsxs("span",{className:"absolute -top-2 -right-2 px-2 py-1 bg-red-500 text-white text-xs font-bold rounded-full shadow-lg border-2 border-white",children:["-",s.discountPercentage,"%"]}),e.jsx("span",{className:"absolute -bottom-1 -right-1 px-2 py-0.5 text-xs rounded-full ".concat(X(s.status)),children:s.status})]}),e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.email}),s.whatsappNumber&&e.jsxs("p",{className:"text-sm text-green-600 font-medium mb-2",children:["ðŸ“± ",s.whatsappNumber]}),(s.city||s.country)&&e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["ðŸ“ ",[s.city,s.country].filter(Boolean).join(", ")]}),s.yearsOfExperience&&e.jsxs("p",{className:"text-xs text-blue-600 mb-2",children:["ðŸŽ¯ ",s.yearsOfExperience," years experience"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Membership"}),s.status==="active"&&s.activeMembershipDate&&e.jsx("span",{className:"px-3 py-1 text-xs rounded-full ".concat(C(s.activeMembershipDate)?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"),children:C(s.activeMembershipDate)?"Expired":"Until ".concat(new Date(s.activeMembershipDate).toLocaleDateString())})]})]}),e.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Massage Types"}),e.jsx("div",{className:"space-y-2",children:s.massageTypes&&typeof s.massageTypes=="string"?(()=>{try{const t=JSON.parse(s.massageTypes);return e.jsx("div",{className:"flex flex-wrap gap-1",children:t.map((r,i)=>e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full",children:r},i))})}catch{return e.jsx("span",{className:"text-xs text-gray-400",children:"No massage types set"})}})():e.jsx("span",{className:"text-xs text-gray-400",children:"No massage types set"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Home Visit Rates"}),e.jsx("div",{className:"space-y-1",children:s.pricing&&typeof s.pricing=="string"?(()=>{try{const t=JSON.parse(s.pricing);return e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-blue-50 p-2 rounded text-center",children:[e.jsx("div",{className:"font-medium",children:"60min"}),e.jsxs("div",{className:"text-blue-600",children:[t[60]||0,"k"]})]}),e.jsxs("div",{className:"bg-blue-50 p-2 rounded text-center",children:[e.jsx("div",{className:"font-medium",children:"90min"}),e.jsxs("div",{className:"text-blue-600",children:[t[90]||0,"k"]})]}),e.jsxs("div",{className:"bg-blue-50 p-2 rounded text-center",children:[e.jsx("div",{className:"font-medium",children:"120min"}),e.jsxs("div",{className:"text-blue-600",children:[t[120]||0,"k"]})]})]})}catch{return e.jsxs("div",{className:"text-xs text-red-500 p-2 bg-red-50 rounded",children:["Invalid pricing data. Use console: pricingHelper.addPricingToTherapist('",s.$id,"', ","{60: 350, 90: 500, 120: 650}",")"]})}})():e.jsx("div",{className:"text-xs text-orange-500 p-2 bg-orange-50 rounded",children:"No pricing set. Use console: pricingHelper.addSamplePricingToAllTherapists()"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Hotel/Villa Rates"}),e.jsx("div",{className:"space-y-1",children:s.pricing&&typeof s.pricing=="string"?(()=>{try{const t=JSON.parse(s.pricing),r=s.hotelDiscount||20,i=s.villaDiscount||20,n=(r+i)/2;return e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-purple-50 p-2 rounded text-center",children:[e.jsx("div",{className:"font-medium",children:"60min"}),e.jsxs("div",{className:"text-purple-600",children:[Math.round((t[60]||0)*(1-n/100)),"k"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["-",n,"%"]})]}),e.jsxs("div",{className:"bg-purple-50 p-2 rounded text-center",children:[e.jsx("div",{className:"font-medium",children:"90min"}),e.jsxs("div",{className:"text-purple-600",children:[Math.round((t[90]||0)*(1-n/100)),"k"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["-",n,"%"]})]}),e.jsxs("div",{className:"bg-purple-50 p-2 rounded text-center",children:[e.jsx("div",{className:"font-medium",children:"120min"}),e.jsxs("div",{className:"text-purple-600",children:[Math.round((t[120]||0)*(1-n/100)),"k"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["-",n,"%"]})]})]})}catch{return e.jsx("span",{className:"text-xs text-gray-400",children:"Same as home visit rates"})}})():e.jsx("span",{className:"text-xs text-gray-400",children:"Same as home visit rates"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Current Discount"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:s.discountPercentage||0,onChange:t=>G(s.$id,parseInt(t.target.value)),disabled:c===s.$id,className:"border border-gray-300 rounded px-2 py-1 text-sm focus:ring-2 focus:ring-brand-green focus:border-transparent",children:[e.jsx("option",{value:0,children:"No Discount"}),e.jsx("option",{value:5,children:"5% Off"}),e.jsx("option",{value:10,children:"10% Off"}),e.jsx("option",{value:15,children:"15% Off"}),e.jsx("option",{value:20,children:"20% Off"})]}),s.discountPercentage&&s.discountPercentage>0&&e.jsxs("span",{className:"px-2 py-1 bg-red-100 text-red-700 text-xs rounded-full font-medium",children:[s.discountPercentage,"% OFF"]})]})]})]}),e.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Account Status"}),s.status==="pending"||s.status==="deactivated"||s.status==="active"&&C(s.activeMembershipDate)?e.jsxs("div",{className:"space-y-3",children:[e.jsx("select",{id:"membership-".concat(s.$id),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:ring-2 focus:ring-brand-green focus:border-transparent",disabled:c===s.$id,children:ae.map(t=>e.jsx("option",{value:t.months,children:t.label},t.value))}),e.jsx(y,{variant:"primary",className:"w-full py-2 text-sm font-medium",disabled:c===s.$id,onClick:()=>{const t=document.getElementById("membership-".concat(s.$id));z(s.$id,parseInt(t.value))},children:c===s.$id?"Setting Membership...":"ðŸ’³ Set Membership Status"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:e.jsx("span",{className:"text-green-700 font-medium",children:"âœ… Account Active"})}),e.jsx(y,{variant:"secondary",className:"w-full py-2 text-sm bg-yellow-600 hover:bg-yellow-700 text-white",disabled:c===s.$id,onClick:()=>K(s.$id),children:c===s.$id?"Deactivating...":"â¸ï¸ Deactivate"}),e.jsx(y,{variant:"secondary",className:"w-full py-2 text-sm ".concat(s.verifiedBadge?"bg-purple-600 hover:bg-purple-700":"bg-gray-600 hover:bg-gray-700"," text-white"),disabled:c===s.$id,onClick:async()=>{o(s.$id);try{await g.update(s.$id,{verifiedBadge:!s.verifiedBadge}),await x(),alert(s.verifiedBadge?"Verified badge removed":"Verified badge added")}catch{alert("Failed to update verified badge")}finally{o(null)}},children:s.verifiedBadge?"âœ… Remove Verified Badge":"â­ Add Verified Badge"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{variant:"secondary",className:"w-full py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white",disabled:c===s.$id,onClick:()=>Y(s),children:"âœï¸ Edit Full Profile"}),e.jsx(y,{variant:"secondary",className:"w-full py-2 text-sm bg-red-600 hover:bg-red-700 text-white",disabled:c===s.$id,onClick:()=>Q(s.$id,s.name),children:"ðŸ—‘ï¸ Delete Account"})]}),s.activeMembershipDate&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("h5",{className:"text-xs font-medium text-gray-700 mb-1",children:"Membership Details"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["ðŸ—“ï¸ Active until: ",new Date(s.activeMembershipDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),s.membershipStartDate&&e.jsxs("p",{className:"text-xs text-gray-600",children:["ðŸ“… Started: ",new Date(s.membershipStartDate).toLocaleDateString()]})]})]})]})},s.$id))}),p&&a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 pb-20",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] ",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Edit Therapist Profile"}),e.jsx("button",{onClick:M,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:"Ã—"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-20",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:a.name,onChange:s=>l({...a,name:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-brand-green focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:a.email,onChange:s=>l({...a,email:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-brand-green focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"WhatsApp Number"}),e.jsx("input",{type:"text",value:a.whatsappNumber,onChange:s=>l({...a,whatsappNumber:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-brand-green focus:border-transparent",placeholder:"+62812345678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),e.jsx("input",{type:"text",value:a.country,onChange:s=>l({...a,country:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-brand-green focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Experience"}),e.jsx("input",{type:"text",value:a.experience,onChange:s=>l({...a,experience:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-brand-green focus:border-transparent",placeholder:"e.g., 5 years"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:s=>l({...a,description:s.target.value}),rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-brand-green focus:border-transparent",placeholder:"Professional description and specializations..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profile Picture"}),e.jsxs("div",{className:"flex items-center gap-4 pb-20",children:[a.profilePicture&&e.jsx("img",{src:a.profilePicture,alt:"Profile",className:"w-20 h-20 rounded-full object-cover border-2 border-gray-300"}),e.jsx(Z,{id:"therapist-profile-picture",label:"Upload Profile Picture",currentImage:a.profilePicture,onImageChange:s=>l({...a,profilePicture:s}),className:"flex-1",variant:"profile"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Note: Main card images are automatically assigned from our curated collection"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pricing (IDR)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-20",children:[e.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 pb-20",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Home Service"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-16 text-sm",children:"60 min:"}),e.jsx("input",{type:"text",value:((A=(E=a.pricing)==null?void 0:E.home)==null?void 0:A["60min"])||"",onChange:s=>{var t;return l({...a,pricing:{...a.pricing,home:{...(t=a.pricing)==null?void 0:t.home,"60min":s.target.value}}})},className:"flex-1 border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"250000"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-16 text-sm",children:"90 min:"}),e.jsx("input",{type:"text",value:((L=($=a.pricing)==null?void 0:$.home)==null?void 0:L["90min"])||"",onChange:s=>{var t;return l({...a,pricing:{...a.pricing,home:{...(t=a.pricing)==null?void 0:t.home,"90min":s.target.value}}})},className:"flex-1 border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"350000"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-16 text-sm",children:"120 min:"}),e.jsx("input",{type:"text",value:((V=(I=a.pricing)==null?void 0:I.home)==null?void 0:V["120min"])||"",onChange:s=>{var t;return l({...a,pricing:{...a.pricing,home:{...(t=a.pricing)==null?void 0:t.home,"120min":s.target.value}}})},className:"flex-1 border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"450000"})]})]})]}),e.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 pb-20",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Hotel/Villa Service"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Special rates for hotel and villa services (minimum 20% discount required)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-16 text-sm",children:"60 min:"}),e.jsx("input",{type:"text",value:((B=(O=a.pricing)==null?void 0:O.hotelVilla)==null?void 0:B["60min"])||"",onChange:s=>{var t;return l({...a,pricing:{...a.pricing,hotelVilla:{...(t=a.pricing)==null?void 0:t.hotelVilla,"60min":s.target.value}}})},className:"flex-1 border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"200000"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-16 text-sm",children:"90 min:"}),e.jsx("input",{type:"text",value:((F=(R=a.pricing)==null?void 0:R.hotelVilla)==null?void 0:F["90min"])||"",onChange:s=>{var t;return l({...a,pricing:{...a.pricing,hotelVilla:{...(t=a.pricing)==null?void 0:t.hotelVilla,"90min":s.target.value}}})},className:"flex-1 border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"300000"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-16 text-sm",children:"120 min:"}),e.jsx("input",{type:"text",value:((U=(H=a.pricing)==null?void 0:H.hotelVilla)==null?void 0:U["120min"])||"",onChange:s=>{var t;return l({...a,pricing:{...a.pricing,hotelVilla:{...(t=a.pricing)==null?void 0:t.hotelVilla,"120min":s.target.value}}})},className:"flex-1 border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"400000"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Promotional Discount"}),e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 pb-20",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Select a discount percentage that will apply to ALL pricing (home and hotel/villa services):"}),e.jsx("div",{className:"grid grid-cols-5 gap-3",children:[0,5,10,15,20].map(s=>e.jsxs("label",{className:"flex flex-col items-center cursor-pointer",children:[e.jsx("input",{type:"radio",name:"discountPercentage",value:s,checked:a.discountPercentage===s,onChange:t=>l({...a,discountPercentage:parseInt(t.target.value)}),className:"w-4 h-4 text-orange-600 border-gray-300 focus:ring-orange-500"}),e.jsx("span",{className:"mt-2 px-3 py-1 rounded-full text-sm font-medium ".concat(a.discountPercentage===s?s===0?"bg-gray-100 text-gray-700":"bg-orange-100 text-orange-700":"bg-gray-50 text-gray-500"),children:s===0?"No Discount":"".concat(s,"% OFF")})]},s))}),a.discountPercentage>0&&e.jsxs("div",{className:"mt-4 p-3 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-orange-800 mb-2",children:"Discount Preview (applies to all prices):"}),e.jsx("div",{className:"grid grid-cols-3 gap-3 text-xs",children:((J=a.pricing)==null?void 0:J.home)&&Object.entries(a.pricing.home).map(([s,t])=>e.jsxs("div",{className:"bg-white p-2 rounded border",children:[e.jsx("div",{className:"font-medium text-gray-700",children:s}),e.jsxs("div",{className:"text-gray-500 line-through",children:["Rp",parseInt(t||"0").toLocaleString()]}),e.jsxs("div",{className:"text-orange-600 font-medium",children:["Rp",Math.round(parseInt(t||"0")*(1-a.discountPercentage/100)).toLocaleString()]})]},s))})]})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Massage Specialties"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-60  border border-gray-200 rounded-lg p-4 pb-20",children:["Swedish Massage","Deep Tissue","Hot Stone","Thai Massage","Aromatherapy","Sports Massage","Reflexology","Shiatsu","Prenatal Massage","Couples Massage","Bamboo Massage","Balinese","Traditional Indonesian","Oil Massage","Dry Massage","Four Hands","Head & Shoulder","Foot Massage","Full Body","Lymphatic Drainage","Trigger Point","Cupping Therapy","Acupressure","Reiki","Craniosacral","Myofascial Release","Stone Therapy","Herbal Compress"].map(s=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer p-2 rounded hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:a.specialties.includes(s),onChange:t=>{t.target.checked?l({...a,specialties:[...a.specialties,s]}):l({...a,specialties:a.specialties.filter(r=>r!==s)})},className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),e.jsx("span",{className:"text-sm ".concat(a.specialties.includes(s)?"font-medium text-green-600":"text-gray-700"),children:s})]},s))}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Add Custom Specialty:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter custom specialty...",className:"flex-1 border border-gray-300 rounded px-2 py-1 text-sm focus:ring-1 focus:ring-green-500 focus:border-transparent",onKeyPress:s=>{if(s.key==="Enter"){const t=s.currentTarget.value.trim();t&&!a.specialties.includes(t)&&(l({...a,specialties:[...a.specialties,t]}),s.currentTarget.value="")}}}),e.jsx("button",{type:"button",onClick:s=>{const t=s.currentTarget.previousElementSibling,r=t.value.trim();r&&!a.specialties.includes(r)&&(l({...a,specialties:[...a.specialties,r]}),t.value="")},className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"Add"})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Selected: ",a.specialties.length," specialties"]}),a.specialties.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:a.specialties.map((s,t)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-600 text-white text-xs rounded-full",children:[s,e.jsx("button",{type:"button",onClick:()=>l({...a,specialties:a.specialties.filter(r=>r!==s)}),className:"ml-1 text-white hover:text-gray-200",children:"Ã—"})]},t))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Massage Types Offered"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-60  border border-gray-200 rounded-lg p-4 pb-20",children:["Traditional","Body Scrub","Facial","Acupressure","Scraping","Cupping","Sprain","Hands","Feet","Relaxation Massage","Therapeutic Massage","Sports Recovery","Stress Relief","Pain Management","Wellness Massage","Beauty Treatment","Detox Massage","Energy Healing","Medical Massage","Prenatal Care","Couples Treatment","Hot Oil Treatment","Cold Stone Therapy","Herbal Treatment","Aromatherapy Session","Full Body Session","Partial Body Session","Head & Neck Focus","Back & Shoulder Focus","Leg & Foot Focus","Hand & Arm Focus","Custom Treatment","Consultation Available"].map(s=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer p-2 rounded hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:a.massageTypes.includes(s),onChange:t=>{t.target.checked?l({...a,massageTypes:[...a.massageTypes,s]}):l({...a,massageTypes:a.massageTypes.filter(r=>r!==s)})},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm ".concat(a.massageTypes.includes(s)?"font-medium text-blue-600":"text-gray-700"),children:s})]},s))}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Add Custom Massage Type:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter custom massage type...",className:"flex-1 border border-gray-300 rounded px-2 py-1 text-sm focus:ring-1 focus:ring-blue-500 focus:border-transparent",onKeyPress:s=>{if(s.key==="Enter"){const t=s.currentTarget.value.trim();t&&!a.massageTypes.includes(t)&&(l({...a,massageTypes:[...a.massageTypes,t]}),s.currentTarget.value="")}}}),e.jsx("button",{type:"button",onClick:s=>{const t=s.currentTarget.previousElementSibling,r=t.value.trim();r&&!a.massageTypes.includes(r)&&(l({...a,massageTypes:[...a.massageTypes,r]}),t.value="")},className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Add"})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Selected: ",a.massageTypes.length," massage types"]}),a.massageTypes.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:a.massageTypes.map((s,t)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-600 text-white text-xs rounded-full",children:[s,e.jsx("button",{type:"button",onClick:()=>l({...a,massageTypes:a.massageTypes.filter(r=>r!==s)}),className:"ml-1 text-white hover:text-gray-200",children:"Ã—"})]},t))})]})]}),e.jsx(te,{selectedLanguages:a.languages,onLanguagesChange:s=>l({...a,languages:s})})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx(y,{variant:"secondary",onClick:M,disabled:c===a.$id,children:"Cancel"}),e.jsx(y,{variant:"primary",onClick:_,disabled:c===a.$id,className:"bg-brand-green hover:bg-green-700",children:c===a.$id?"Saving...":"Save Changes"})]})]})})})]})};export{me as default};
