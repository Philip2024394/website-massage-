const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/authSessionHelper.DPBCHOJc.js","assets/App.1fxTHtx8.js","assets/vendor-react.DJgHGAhw.js","assets/vendor-misc.BCNplu90.js","assets/vendor-ui.D6Y-8hbd.js","assets/vendor-appwrite.BT2H32tF.js","assets/route-portals.BJGRQhN_.js","assets/route-booking.yuk30L8G.js","assets/route-payment.T2FKxZVj.js","assets/silentLocationCapture.CQB_8zQb.js","assets/chatDiagnostics.CLX0e1Et.js"])))=>i.map(i=>d[i]);
var hc=Object.defineProperty;var fc=(a,t,n)=>t in a?hc(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n;var Z=(a,t,n)=>fc(a,typeof t!="symbol"?t+"":t,n);import{Account as bi,Databases as Zt,Client as ct,Query as b,Storage as xi,ID as se,Permission as Nt,Role as St,Functions as ss}from"./vendor-appwrite.BT2H32tF.js";import{j as e,a as u,X as Qe,S as ja,C as Pt,M as Mt,H as zs,U as yc,b as Uo,c as Fo,d as da,e as bc,B as xc,f as kc,P as Ha,h as Ko,I as is,i as vc,k as wc,l as $r,Z as Ur,m as Ut,n as We,o as Wo,p as Ot,q as Ia,T as Et,s as _t,t as xn,u as rs,v as Xt,R as wa,w as en,A as Fr,x as qo,y as Ho,G as Nc,z as Sc,D as Vs,E as Ys,F as jc,J as Go,K as Ic,L as zo,N as Tc,O as Kr,Q as Js,V as Wr,W as qr,Y as Ac,_ as Cc,$ as ys,a0 as Pc,a1 as Dc,a2 as Ec,a3 as Vo}from"./vendor-react.DJgHGAhw.js";import{m as Mc}from"./route-booking.yuk30L8G.js";import{Z as Yo,x as un,y as Hr,z as sa,_ as Gr}from"./vendor-misc.BCNplu90.js";import{c as zr,a as Rc}from"./route-portals.BJGRQhN_.js";const Qs=536870904,Vr="536870904";function ki(a){return a===Qs||a===Vr||typeof a=="string"&&a.trim()===Vr?!0:(typeof a=="number"?a:parseInt(String(a),10))===Qs}const Yn=new Map,Bc=3e4;let Yr=!1;function Lc(){const a=Date.now();for(const[t,n]of Yn.entries())a-n.timestamp>Bc&&Yn.delete(t)}function ba(a,t){var l;Lc();const n="".concat((a==null?void 0:a.code)||"unknown","_").concat(t),s=Yn.get(n);if(s){s.count=(s.count||1)+1,s.timestamp=Date.now();return}let i="",r="error";if(ki(a==null?void 0:a.code))i="Connection or service error. Please try again.",r="warning";else if((a==null?void 0:a.code)===429)i="Server is busy. Please wait a moment and try again.",r="warning";else{if((a==null?void 0:a.code)===401)return ba(a,t),!0;(a==null?void 0:a.code)==="timeout"||(l=a==null?void 0:a.message)!=null&&l.includes("timeout")?(i="Request timed out. Please try again.",r="warning"):(i="Connection issue. Please check your internet and try again.",r="error")}Yn.set(n,{id:n,message:i,type:r,timestamp:Date.now(),count:1}),typeof window!="undefined"&&window.showToast&&window.showToast(i,r)}function pn(a,t="Unknown operation"){var n,s,i,r,l,o,c;return ki(a==null?void 0:a.code)||(a==null?void 0:a.code)===429?(ba(a,t),!0):(a==null?void 0:a.code)===404&&((n=a==null?void 0:a.message)!=null&&n.includes("collection")||(s=a==null?void 0:a.message)!=null&&s.includes("Collection"))?!0:(a==null?void 0:a.code)===401?(ba(a,t),!0):(a==null?void 0:a.code)===403?!0:(i=a==null?void 0:a.message)!=null&&i.includes("timeout")||(r=a==null?void 0:a.message)!=null&&r.includes("Timeout")?(ba({code:"timeout",message:"Request timeout"},t),!0):!(a!=null&&a.code)&&((l=a==null?void 0:a.message)!=null&&l.includes("network")||(o=a==null?void 0:a.message)!=null&&o.includes("fetch")||(c=a==null?void 0:a.message)!=null&&c.includes("connection"))?(ba(a,t),!0):(ba(a,t),!1)}function Jr(a,t){if(typeof t=="string"&&t.includes("536870904"))return!0;if(a!=null&&typeof a=="object"){const n=a.code;if(ki(n))return!0;const s=a.message;if(typeof s=="string"&&s.includes("536870904"))return!0}return!1}function Oc(){typeof window!="undefined"&&(Yr||(Yr=!0,window.addEventListener("error",a=>{const t=a.error,n=a.message||t&&typeof t=="object"&&t.message||"";return Jr(t,n)?(t!=null?pn(t,"window.onerror"):ba({code:Qs,message:n},"window.onerror"),a.preventDefault(),a.stopPropagation(),!0):!1},!0),window.addEventListener("unhandledrejection",a=>{const t=a.reason,n=t&&typeof t=="object"?t.message:String(t!=null?t:"");if(t!=null&&Jr(t,n)){pn(t,"Unhandled Promise Rejection"),a.preventDefault(),a.stopImmediatePropagation();return}t&&typeof t=="object"&&pn(t,"Unhandled Promise Rejection")&&(a.preventDefault(),a.stopPropagation())},!0)))}typeof window!="undefined"&&Oc();const _c="modulepreload",$c=function(a){return"/"+a},Qr={},Ce=function(t,n,s){let i=Promise.resolve();if(n&&n.length>0){let l=function(d){return Promise.all(d.map(m=>Promise.resolve(m).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=l(n.map(d=>{if(d=$c(d),d in Qr)return;Qr[d]=!0;const m=d.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(d,'"]').concat(p)))return;const f=document.createElement("link");if(f.rel=m?"stylesheet":_c,m||(f.as="script"),f.crossOrigin="",f.href=d,c&&f.setAttribute("nonce",c),document.head.appendChild(f),m)return new Promise((y,I)=>{f.addEventListener("load",y),f.addEventListener("error",()=>I(new Error("Unable to preload CSS for ".concat(d))))})}))}function r(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return i.then(l=>{for(const o of l||[])o.status==="rejected"&&r(o.reason);return t().catch(r)})},Yt="68f76ee1000e64ca8d05",Ba="68f76ee1000e64ca8d05",jt={THERAPISTS:"therapists_collection_id",PLACES:"places_collection_id",FACIAL_PLACES:"facial_places_collection",USERS:"",AGENTS:"",BOOKINGS:"bookings_collection_id",REVIEWS:"",ACHIEVEMENTS:"achievements_collection_id",THERAPIST_ACHIEVEMENTS:"therapist_achievements_collection_id",THERAPIST_MATCHES:"therapist_matches",CHAT_SESSIONS:"chat_sessions",CHAT_MESSAGES:"chat_messages",CHAT_FLAGS:"",ANALYTICS:"",ANALYTICS_EVENTS:"",ADMINS:"",HOTELS:"",VILLAS:"",PARTNERS:"indastreet_partners",NOTIFICATIONS:"",MASSAGE_TYPES:"",MEMBERSHIP_PRICING:"",CUSTOM_LINKS:"",IMAGE_ASSETS:"",LOGIN_BACKGROUNDS:"",TRANSLATIONS:"",COMMISSION_RECORDS:"",ATTRIBUTES:"",EMPLOYER_PROFILES:"employer_profiles"},$t=new ct;$t.setEndpoint("https://syd.cloud.appwrite.io/v1").setProject("68f23b11000d25eb3664");const K=new Zt($t),ca=new bi($t),Qt=new xi($t),Jo={PARTNER_IMAGES:"partner_images_bucket",THERAPIST_DOCUMENTS:"697b3ca50023d08ec335"},wn=Object.freeze(Object.defineProperty({__proto__:null,APPWRITE_DATABASE_ID:Ba,COLLECTIONS:jt,DATABASE_ID:Yt,ID:se,Permission:Nt,Query:b,Role:St,STORAGE_BUCKETS:Jo,account:ca,appwriteAccount:ca,appwriteClient:$t,appwriteDatabases:K,appwriteStorage:Qt,client:$t,databases:K,storage:Qt},Symbol.toStringTag,{value:"Module"}));var Qo=(a=>(a[a.DEBUG=0]="DEBUG",a[a.INFO=1]="INFO",a[a.WARN=2]="WARN",a[a.ERROR=3]="ERROR",a[a.CRITICAL=4]="CRITICAL",a))(Qo||{});class Uc{constructor(){Z(this,"minLevel");Z(this,"isDevelopment");Z(this,"isProduction");Z(this,"logQueue",[]);Z(this,"maxQueueSize",100);this.isDevelopment=!1,this.isProduction=!0,this.minLevel=this.isProduction?1:0,this.isProduction&&setInterval(()=>this.flushLogs(),5e3),typeof window!="undefined"&&window.addEventListener("beforeunload",()=>this.flushLogs())}debug(t,n){this.log(0,t,n)}info(t,n){this.log(1,t,n)}warn(t,n){this.log(2,t,n)}error(t,n,s){const i=n instanceof Error?n:new Error(String(n));this.log(3,t,s,i)}critical(t,n,s){const i=n instanceof Error?n:new Error(String(n));this.log(4,t,s,i),this.isProduction&&this.flushLogs()}log(t,n,s,i){if(t<this.minLevel)return;const r={timestamp:new Date().toISOString(),level:t,message:n,context:this.sanitizeContext(s),error:i,stack:i==null?void 0:i.stack,environment:this.isProduction?"production":"development"};this.isDevelopment&&this.logToConsole(r),this.isProduction&&this.queueLog(r)}logToConsole(t){switch("[".concat(Qo[t.level],"]"),t.context&&JSON.stringify(t.context),t.level){case 0:break;case 1:break;case 2:break;case 3:case 4:t.stack;break}}queueLog(t){this.logQueue.push(t),this.logQueue.length>this.maxQueueSize&&this.logQueue.shift(),t.level>=3&&this.flushLogs()}async flushLogs(){if(this.logQueue.length===0)return;const t=[...this.logQueue];this.logQueue=[]}sanitizeContext(t){if(!t)return;const n=["password","token","apiKey","secret","creditCard","ssn","privateKey"],s={};for(const[i,r]of Object.entries(t))n.some(l=>i.toLowerCase().includes(l.toLowerCase()))?s[i]="[REDACTED]":s[i]=r;return s}setMinLevel(t){this.minLevel=t}}const g=new Uc,Fc=({className:a="w-6 h-6"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),Kc={language:"en",setLanguage:()=>{}},Xo=u.createContext(Kc),xf=({value:a,children:t})=>e.jsx(Xo.Provider,{value:a,children:t});function os(){return u.useContext(Xo)}const Pa=a=>({ID:"id",MY:"ms",SG:"en",TH:"th",PH:"tl",VN:"vi"})[a]||"en",Wc=a=>({ID:"üáÆüá©",MY:"üá≤üáæ",SG:"üá∏üá¨",TH:"üáπüá≠",PH:"üáµüá≠",VN:"üáªüá≥",GB:"üá¨üáß",US:"üá∫üá∏"})[a]||"üåê";function Zo(){const{language:a,setLanguage:t}=os();return{language:a,setLanguage:t}}const qc="68f76ee1000e64ca8d05",kf=qc,Hc={THERAPISTS:"therapists_collection_id",PLACES:"places_collection_id",FACIAL_PLACES:"facial_places_collection",USERS:"",AGENTS:"",BOOKINGS:"bookings_collection_id",REVIEWS:"",ACHIEVEMENTS:"achievements_collection_id",THERAPIST_ACHIEVEMENTS:"therapist_achievements_collection_id",THERAPIST_MATCHES:"therapist_matches",CHAT_SESSIONS:"chat_sessions",CHAT_MESSAGES:"chat_messages",CHAT_FLAGS:"",ANALYTICS:"",ANALYTICS_EVENTS:"",ADMINS:"",HOTELS:"",VILLAS:"",PARTNERS:"indastreet_partners",NOTIFICATIONS:"",MASSAGE_TYPES:"",MEMBERSHIP_PRICING:"",CUSTOM_LINKS:"",IMAGE_ASSETS:"",LOGIN_BACKGROUNDS:"",TRANSLATIONS:"",COMMISSION_RECORDS:"",ATTRIBUTES:""};function Gc(a){return/^[0-9a-f]{20,24}$/i.test(a)}function zc(a){return/^[a-z][a-z0-9_-]*$/i.test(a)&&a.length>=3}function Ve(a){const t=Vc(a);if(!t.isValid)throw new Error(t.error||'Invalid collection ID for "'.concat(a,'"'));return t.warning,t.collectionId}function Vc(a){const t=Hc[a];return!t||t===""?{isValid:!0,collectionId:"",warning:'‚ö†Ô∏è Collection "'.concat(a,'" is disabled or not configured')}:Gc(t)?{isValid:!1,collectionId:t,error:['‚ùå BLOCKED: Collection "'.concat(a,'" uses NUMERIC HASH ID: "').concat(t,'"'),"","This ID does NOT exist in Appwrite and will cause 404 errors.","","‚úÖ FIX: Update APPWRITE_MASTER_CONFIG.ts to use TEXT-BASED ID","   Example: bookings: 'bookings_collection_id'"].join("\n")}:zc(t)?{isValid:!0,collectionId:t}:{isValid:!1,collectionId:t,error:'‚ùå Collection "'.concat(a,'" has invalid format: "').concat(t,'". Use snake_case text IDs.')}}const Jt={get bookings(){return"bookings_collection_id"},get therapists(){return Ve("THERAPISTS")},get places(){return Ve("PLACES")},get users(){return Ve("USERS")},get hotels(){return Ve("HOTELS")},get agents(){return Ve("AGENTS")},get reviews(){return Ve("REVIEWS")},get notifications(){return Ve("NOTIFICATIONS")},get chat_rooms(){return"chat_rooms"},get chat_messages(){return"chat_messages"},get admin_messages(){return"admin_messages"},get hotel_bookings(){return Ve("THERAPISTS")},get image_assets(){return Ve("THERAPISTS")},get login_backgrounds(){return Ve("THERAPISTS")},get custom_links(){return Ve("THERAPISTS")},get translations(){return Ve("THERAPISTS")},get attributes(){return Ve("THERAPISTS")},get analytics_events(){return Ve("THERAPISTS")},get commission_records(){return"commission_records"},get bank_details(){return Ve("THERAPISTS")},get payment_transactions(){return Ve("THERAPISTS")},get bankaccounts(){return Ve("THERAPISTS")},get therapist_job_listings(){return Ve("THERAPISTS")},get employer_job_postings(){return Ve("THERAPISTS")},get push_subscriptions(){return Ve("THERAPISTS")},get massage_types(){return Ve("THERAPISTS")},get membership_pricing(){return Ve("THERAPISTS")}};new ct().setEndpoint("https://syd.cloud.appwrite.io/v1").setProject("68f23b11000d25eb3664");Jt.therapists,Jt.places,Jt.users,Jt.reviews,Jt.notifications;const Yc={en:{app:{mapsApiKeyWarning:"Google Maps API Key not configured. Please set it in the Admin Dashboard to enable location features."},header:{welcome:"Welcome Back"},landing:{getStarted:"Get Started",selectLanguage:"Select Language",enter:"Enter",welcomeDescription:"Professional Massage Services",detectingLocation:"Detecting location..."},common:{loading:"Loading...",confirm:"Confirm",cancel:"Cancel",save:"Save",edit:"Edit",delete:"Delete",back:"Back",next:"Next",submit:"Submit",close:"Close"},footer:{agentLink:"Become an Agent",termsLink:"Terms of Service",privacyLink:"Privacy Policy"}},id:{app:{mapsApiKeyWarning:"Kunci API Google Maps belum dikonfigurasi. Silakan atur di Dashboard Admin untuk mengaktifkan fitur lokasi."},header:{welcome:"Selamat Datang Kembali"},landing:{getStarted:"Mulai",selectLanguage:"Pilih Bahasa",enter:"Masuk",welcomeDescription:"Layanan Pijat Profesional",detectingLocation:"Mendeteksi lokasi..."},common:{loading:"Memuat...",confirm:"Konfirmasi",cancel:"Batal",save:"Simpan",edit:"Edit",delete:"Hapus",back:"Kembali",next:"Lanjut",submit:"Kirim",close:"Tutup"},footer:{agentLink:"Menjadi Agen",termsLink:"Syarat Layanan",privacyLink:"Kebijakan Privasi"}}},Jc={en:{auth:{chooseYourPlan:"Choose Your",plan:"Plan",selectYourPlan:"Select your membership plan to get started",createYourAccount:"Create Your",account:"Account",completeDetails:"Complete your details to join IndaStreet",fullName:"Full Name",fullNamePlaceholder:"Enter your full name",email:"Email",emailPlaceholder:"your.email@example.com",password:"Password",passwordPlaceholder:"Minimum 8 characters",iAgreeToThe:"I agree to the",termsAndConditions:"Terms & Conditions",privacyPolicy:"Privacy Policy",and:"and",createAccountButton:"Create Account",alreadyHaveAccount:"Already have an account?",signIn:"Sign In",backToPlanSelection:"‚Üê Back to Plan Selection",proTitle:"Pro",plusTitle:"Plus",payPerLead:"Pay Per Lead",mostPopular:"Most Popular",free:"Free",perMonth:"/month",commission:"commission per booking",commissionFree:"0% commission - keep everything",selectPlan:"Select Plan",selectPortalType:"Select your business type",massageTherapist:"Massage Therapist",massageTherapistDesc:"Offer home service massage",massageSpa:"Massage Spa",massageSpaDesc:"Spa or wellness center",facialClinic:"Facial Clinic",facialClinicDesc:"Beauty and facial clinic",hotelVilla:"Hotel/Villa",hotelVillaDesc:"Hotel or villa with spa",welcomeBack:"Welcome",back:"Back",signInToYourAccount:"Sign in to your IndaStreet account",forgotPassword:"Forgot password?",signInButton:"Sign In",dontHaveAccount:"Don't have an account?",createOne:"Create one",resetYourPassword:"Reset Your",enterEmailForReset:"Enter your email address and we'll send you a link to reset your password",sendResetLink:"Send Reset Link",backToSignIn:"‚Üê Back to Sign In",checkYourEmail:"Check Your Email",resetLinkSent:"We've sent a password reset link to",checkSpam:"Please check your inbox and spam folder",resendLink:"Resend Link",needHelp:"Need help? Contact us at",rememberPassword:"Remember your password?",createNewPassword:"Create New",newPassword:"New Password",confirmPassword:"Confirm Password",newPasswordPlaceholder:"Enter new password",confirmPasswordPlaceholder:"Confirm new password",resetPasswordButton:"Reset Password",passwordResetSuccess:"Password Reset Successful!",redirectingToSignIn:"Redirecting to sign in...",pleaseSelectPortalType:"Please select your account type",pleaseSelectPlan:"Please select a membership plan",pleaseEnterName:"Please enter your full name",pleaseEnterValidEmail:"Please enter a valid email",passwordMinLength:"Password must be at least 8 characters",pleaseAcceptTerms:"Please accept the terms and conditions",emailAlreadyExists:"Email already in use. Please sign in or use another email.",invalidCredentials:"Invalid email or password",accountNotFound:"No account found with this email",passwordsMustMatch:"Passwords must match",errorIncorrectCredentials:"‚ùå Incorrect email or password. Please check:\n‚Ä¢ Email is correct (case-sensitive)\n‚Ä¢ Password is correct (case-sensitive)\n‚Ä¢ No extra spaces in your input",errorUserNotFound:"‚ùå No account found with this email. Please:\n‚Ä¢ Check the email spelling\n‚Ä¢ Create a new account if you're a new user",errorRateLimit:"‚ö†Ô∏è Too many login attempts. Please wait a moment before trying again.",errorGenericSignIn:"‚ùå Sign in failed: {error}. Please try again or contact support if the problem persists.",errorEmailAlreadyRegistered:"‚ùå This email is already registered. Please:\n‚Ä¢ Use the Sign In button instead\n‚Ä¢ Or use a different email address\n‚Ä¢ Contact support if you forgot your password",errorPasswordRequirements:"‚ùå Password requirements not met:\n‚Ä¢ Must be at least 8 characters long\n‚Ä¢ Include letters and numbers\n‚Ä¢ No spaces at start or end",errorInvalidEmailFormat:"‚ùå Invalid email format. Please check:\n‚Ä¢ Email contains @ symbol\n‚Ä¢ Domain is valid (e.g., @gmail.com)\n‚Ä¢ No spaces in the email",errorAccountCreation:"‚ùå Account creation failed: {error}. Please:\n‚Ä¢ Check your internet connection\n‚Ä¢ Verify all fields are correct\n‚Ä¢ Try again or contact support",hintEmailCaseSensitive:"üí° Email is case-sensitive",hintPasswordCaseSensitive:"üí° Password is case-sensitive",createAccount:"Create Account",nameLabel:"Name",namePlaceholder:"Your Name",emailLabel:"Email",passwordLabel:"Password",signUpButton:"Sign Up",activationTitle:"Account Activation",activationPrompt:"Your account is created but inactive. Please enter the activation code provided by an administrator.",activationCodeLabel:"Activation Code",activationCodePlaceholder:"Enter your code",activateButton:"Activate Account",fillFieldsError:"Please fill all fields.",invalidCodeError:"Invalid activation code. Please contact an administrator.",tagline:"Your personal wellness companion."},adminLogin:{title:"Admin Login",prompt:"Password",placeholder:"Enter your password",button:"Sign In",error:"Invalid Password"},agentAuth:{title:"Agent Portal",registerTitle:"Agent Registration",loginTitle:"Agent Login",nameLabel:"Name",namePlaceholder:"Your full name",whatsappLabel:"WhatsApp Number",whatsappPlaceholder:"e.g. 6281234567890",agentCodeLabel:"Agent Code",agentCodePlaceholder:"Enter your agent code",loginButton:"Login",registerButton:"Register",switchToLogin:"Already have an account? Login",switchToRegister:"New agent? Register here",fillFieldsError:"Please fill all fields.",invalidCredentialsError:"Invalid credentials.",agentCodeNotFoundError:"Agent code not found.",registrationSuccessTitle:"Registration Successful!",registrationSuccessMessage:"Your agent account has been created. You can now access the agent dashboard.",genericError:"An error occurred. Please try again.",registerSuccess:"Registration successful! Your agent code is: {agentCode}"},providerAuth:{title:"Provider Portal",email:"Email Address",agentCode:"Agent Code (Optional)",login:"Login",register:"Register",switchMode:"Switch Mode",genericError:"An error occurred. Please try again.",invalidAgentCode:"Invalid agent code provided.",registerSuccess:"Registration successful! Please check your email.",invalidCredentialsError:"Invalid credentials. Please try again.",emailRequired:"Email is required",loginSuccess:"Login successful!"}},id:{auth:{chooseYourPlan:"Pilih",plan:"Paket Anda",selectYourPlan:"Pilih paket keanggotaan Anda untuk memulai",createYourAccount:"Buat",account:"Akun Anda",completeDetails:"Lengkapi detail Anda untuk bergabung dengan IndaStreet",fullName:"Nama Lengkap",fullNamePlaceholder:"Masukkan nama lengkap Anda",email:"Email",emailPlaceholder:"email.anda@contoh.com",password:"Kata Sandi",passwordPlaceholder:"Minimal 8 karakter",iAgreeToThe:"Saya setuju dengan",termsAndConditions:"Syarat & Ketentuan",privacyPolicy:"Kebijakan Privasi",and:"dan",createAccountButton:"Buat Akun",alreadyHaveAccount:"Sudah punya akun?",signIn:"Masuk",backToPlanSelection:"‚Üê Kembali ke Pilihan Paket",proTitle:"Pro",plusTitle:"Plus",payPerLead:"Bayar Per Lead",mostPopular:"Paling Populer",free:"Gratis",perMonth:"/bulan",commission:"komisi per pemesanan",commissionFree:"0% komisi - simpan semuanya",selectPlan:"Pilih Paket",selectPortalType:"Pilih jenis bisnis Anda",massageTherapist:"Terapis Pijat",massageTherapistDesc:"Tawarkan layanan pijat home service",massageSpa:"Spa Pijat",massageSpaDesc:"Spa atau pusat kesehatan",facialClinic:"Klinik Facial",facialClinicDesc:"Klinik kecantikan dan facial",hotelVilla:"Hotel/Vila",hotelVillaDesc:"Hotel atau vila dengan spa",welcomeBack:"Selamat",back:"Datang Kembali",signInToYourAccount:"Masuk ke akun IndaStreet Anda",forgotPassword:"Lupa kata sandi?",signInButton:"Masuk",dontHaveAccount:"Belum punya akun?",createOne:"Buat sekarang",resetYourPassword:"Reset",enterEmailForReset:"Masukkan alamat email Anda dan kami akan mengirimkan link untuk reset kata sandi",sendResetLink:"Kirim Link Reset",backToSignIn:"‚Üê Kembali ke Masuk",checkYourEmail:"Periksa Email Anda",resetLinkSent:"Kami telah mengirim link reset kata sandi ke",checkSpam:"Silakan periksa kotak masuk dan folder spam Anda",resendLink:"Kirim Ulang Link",needHelp:"Butuh bantuan? Hubungi kami di",rememberPassword:"Ingat kata sandi Anda?",createNewPassword:"Buat Kata Sandi",newPassword:"Baru",confirmPassword:"Konfirmasi Kata Sandi",newPasswordPlaceholder:"Masukkan kata sandi baru",confirmPasswordPlaceholder:"Konfirmasi kata sandi baru",resetPasswordButton:"Reset Kata Sandi",passwordResetSuccess:"Reset Kata Sandi Berhasil!",redirectingToSignIn:"Mengalihkan ke halaman masuk...",pleaseSelectPortalType:"Silakan pilih jenis akun Anda",pleaseSelectPlan:"Silakan pilih paket keanggotaan",pleaseEnterName:"Silakan masukkan nama lengkap Anda",pleaseEnterValidEmail:"Silakan masukkan email yang valid",passwordMinLength:"Kata sandi minimal 8 karakter",pleaseAcceptTerms:"Silakan terima syarat dan ketentuan",emailAlreadyExists:"Email sudah digunakan. Silakan masuk atau gunakan email lain.",invalidCredentials:"Email atau kata sandi tidak valid",accountNotFound:"Tidak ada akun dengan email ini",passwordsMustMatch:"Kata sandi harus sama",errorIncorrectCredentials:"‚ùå Email atau kata sandi salah. Mohon periksa:\n‚Ä¢ Email sudah benar (peka huruf besar/kecil)\n‚Ä¢ Kata sandi sudah benar (peka huruf besar/kecil)\n‚Ä¢ Tidak ada spasi berlebih",errorUserNotFound:"‚ùå Tidak ada akun dengan email ini. Mohon:\n‚Ä¢ Periksa ejaan email\n‚Ä¢ Buat akun baru jika Anda pengguna baru",errorRateLimit:"‚ö†Ô∏è Terlalu banyak percobaan login. Mohon tunggu sebentar sebelum mencoba lagi.",errorGenericSignIn:"‚ùå Login gagal: {error}. Mohon coba lagi atau hubungi dukungan jika masalah berlanjut.",errorEmailAlreadyRegistered:"‚ùå Email ini sudah terdaftar. Mohon:\n‚Ä¢ Gunakan tombol Masuk sebagai gantinya\n‚Ä¢ Atau gunakan alamat email berbeda\n‚Ä¢ Hubungi dukungan jika lupa kata sandi",errorPasswordRequirements:"‚ùå Persyaratan kata sandi tidak terpenuhi:\n‚Ä¢ Minimal 8 karakter\n‚Ä¢ Sertakan huruf dan angka\n‚Ä¢ Tidak ada spasi di awal atau akhir",errorInvalidEmailFormat:"‚ùå Format email tidak valid. Mohon periksa:\n‚Ä¢ Email mengandung simbol @\n‚Ä¢ Domain valid (mis. @gmail.com)\n‚Ä¢ Tidak ada spasi dalam email",errorAccountCreation:"‚ùå Pembuatan akun gagal: {error}. Mohon:\n‚Ä¢ Periksa koneksi internet Anda\n‚Ä¢ Verifikasi semua field sudah benar\n‚Ä¢ Coba lagi atau hubungi dukungan",hintEmailCaseSensitive:"üí° Email peka huruf besar/kecil",hintPasswordCaseSensitive:"üí° Kata sandi peka huruf besar/kecil",createAccount:"Buat Akun",nameLabel:"Nama",namePlaceholder:"Nama Anda",emailLabel:"Email",passwordLabel:"Kata Sandi",signUpButton:"Daftar",activationTitle:"Aktivasi Akun",activationPrompt:"Akun Anda telah dibuat namun belum aktif. Silakan masukkan kode aktivasi yang diberikan oleh administrator.",activationCodeLabel:"Kode Aktivasi",activationCodePlaceholder:"Masukkan kode Anda",activateButton:"Aktivasi Akun",fillFieldsError:"Mohon isi semua field.",invalidCodeError:"Kode aktivasi tidak valid. Silakan hubungi administrator.",tagline:"Pendamping wellness pribadi Anda."},adminLogin:{title:"Login Admin",prompt:"Kata Sandi",placeholder:"Masukkan kata sandi Anda",button:"Masuk",error:"Kata Sandi Salah"},agentAuth:{title:"Portal Agen",registerTitle:"Pendaftaran Agen",loginTitle:"Login Agen",nameLabel:"Nama",namePlaceholder:"Nama lengkap Anda",whatsappLabel:"Nomor WhatsApp",whatsappPlaceholder:"cth. 6281234567890",agentCodeLabel:"Kode Agen",agentCodePlaceholder:"Masukkan kode agen Anda",loginButton:"Masuk",registerButton:"Daftar",switchToLogin:"Sudah punya akun? Masuk",switchToRegister:"Agen baru? Daftar di sini",fillFieldsError:"Mohon isi semua field.",invalidCredentialsError:"Kredensial tidak valid.",agentCodeNotFoundError:"Kode agen tidak ditemukan.",registrationSuccessTitle:"Pendaftaran Berhasil!",registrationSuccessMessage:"Akun agen Anda telah dibuat. Anda sekarang dapat mengakses dashboard agen.",genericError:"Terjadi kesalahan. Silakan coba lagi.",registerSuccess:"Pendaftaran berhasil! Kode agen Anda adalah: {agentCode}"},providerAuth:{title:"Portal Penyedia",email:"Alamat Email",agentCode:"Kode Agen (Opsional)",login:"Masuk",register:"Daftar",switchMode:"Ganti Mode",genericError:"Terjadi kesalahan. Silakan coba lagi.",invalidAgentCode:"Kode agen tidak valid.",registerSuccess:"Pendaftaran berhasil! Silakan periksa email Anda.",invalidCredentialsError:"Kredensial tidak valid. Silakan coba lagi.",emailRequired:"Email wajib diisi",loginSuccess:"Login berhasil!"}}},Qc={en:{home:{accommodationMassageService:"Accommodation With Massage Service",homeServiceTab:"Home Service",massagePlacesTab:"Massage Places",therapistsTitle:"Home Service Therapists",therapistsSubtitle:"We monitor provider locations and user activity to ensure a safe platform for everyone.",therapistsSubtitleAll:"We monitor provider locations and user activity to ensure a safe platform for everyone.",therapistsSubtitleCity:"We monitor provider locations and user activity to ensure a safe platform for everyone.",safetyCommitmentTitle:"Your safety matters",safetyCommitmentText:"We monitor provider locations and user activity to ensure a safe platform for everyone.",massagePlacesTitle:"Featured Massage Spas",massagePlacesSubtitle:"Find the best massage places in Bali",noTherapistsAvailable:"No therapists available in your area at the moment.",noPlacesAvailable:"No massage places available in your area",loading:"Loading...",loginSignUp:"Login / Sign Up",noMoreTherapists:"No more therapists to show.",pass:"Pass",like:"Like",therapistsOnline:"{count} of {total} therapists online",massageType:"Massage Type",searchPlaceholder:"Search by name...",noResults:"No results found. Try adjusting your filters.",setLocation:"Set Location",updateLocation:"Update",youAreViewing:"You are viewing",changeLocation:"Change location",allAreas:"All areas",changeCity:"Select location",locationError:"Could not get location. Please enable permissions and try again.",gettingLocation:"Getting location...",browseRegionNote:"Browse Region dropdown (distance still applies)",viewProfile:"View Profile",viewOnly:"View Only",therapistCard:{orderNow:"Estimated Arrival",schedule:"Schedule",massageTypes:"Massage Types",experiencedArea:"Experienced Area",yearsExperience:"Years Experience",genericBio:"Professional massage therapist with experience in various massage techniques."},pressure:"Pressure",readMore:"Read More",readLess:"Read Less",aboutMassage:"About",keyBenefits:"Key Benefits",bestFor:"Best For",findTherapists:"Find Therapists",findMassagePlaces:"Find Massage Places",massageDirectory:"Massage Directory",massageDirectoryTitle:"Explore Massage Types",facial:"Facials",facialHomeService:"Facial & Skin",hotelVillaService:"Hotel & Villa",facialClinics:"Facial & Skin Clinic",facialClinicsSubtitle:"Find the best facial clinics across Indonesia",facialClinicsSubtitleCity:"Premium facial treatments in {city}",noFacialClinicsAvailable:"No facial clinics available",checkBackFacials:"Check back soon for featured facial spas!",fabMenu:{womenReviews:"Women Reviews",advancedSearch:"Advanced Search",helpFaq:"Help & FAQ",topTherapists:"Top 5 Therapists",specialOffers:"Special Offers",close:"Close",openMenu:"Quick Actions"},menu:{title:"Menu",createProfile:"Create Profile",agentLogin:"Agent Portal",agentDashboard:"Agent Dashboard",adminLogin:"Admin Login",customerLogin:"Customer Login",logout:"Logout",sections:{jobPosting:"Job Posting",loginCreateAccount:"Login / Create Account",company:"Company",locations:"Locations",massageServices:"Massage Services",helpSupport:"Help & Support"},joinIndastreet:"Join Indastreet",massageJobs:"Job Positions",massageJobsDesc:"Find opportunities",hotel:"Hotel",hotelDesc:"Hotel partner portal",villa:"Villa",villaDesc:"Villa partner portal",therapists:"Therapists",therapistsDesc:"Therapist portal",massageSpa:"Massage Spa",massageSpaDesc:"Spa partner portal",therapistPortal:"Therapist Portal",massageSpaPortal:"Massage Spa Portal",websitePartnersPortal:"Website Partners Portal",agent:"Agent",agentDesc:"Agent portal",customer:"Guest",customerDesc:"Guest portal",aboutUs:"About Us",aboutUsDesc:"Learn about us",companyProfile:"Company Profile",howItWorks:"How It Works",howItWorksDesc:"Getting started",blog:"Blog",blogDesc:"Read our articles",contact:"Contact Us",contactDesc:"Get in touch",hotelsVillas:"Hotels & Villas",hotelsVillasDesc:"Partner with certified therapists",termsOfService:"Terms of Service",termsDesc:"Legal terms",privacyPolicy:"Privacy Policy",privacyDesc:"Privacy information",accommodationMassageService:"Accommodation With Massage Service",traditionalBalineseMassage:"Traditional Balinese Massage",deepTissueMassage:"Deep Tissue Massage",qrCode:"QR Code",terms:"Terms",privacy:"Privacy",massageInBali:"Massage in Bali",faq:"FAQ"}},dashboard:{analytics:"Analytics",profile:"Profile",menu:"Menu",feedback:"Feedback",discounts:"Discounts",concierge:"Concierge",commissions:"Commissions",notifications:"Notifications",membership:"Membership",chat:"Chat",chatSupport:"Chat Support",services:"Services",servicesSettings:"Services",serviceSettings:"Services",logout:"Logout",onlineStatus:"Online Status",booking:"Booking",hotelVilla:"Hotel/Villa",promotions:"Promotions",jobOpportunities:"Job Opportunities",membershipPlans:"Membership Plans",terms:"Terms",roomBookings:"Room Bookings",guestServices:"Guest Services",propertyManagement:"Property Management",myBookings:"My Bookings",schedule:"Schedule",earnings:"Earnings",clientReviews:"Client Reviews",treatments:"Treatments",staff:"Staff",facilities:"Facilities"},detail:{pricingTitle:"Pricing",contactButton:"Estimated Arrival",bookButton:"Schedule",backButton:"Back",shareButton:"Share",open:"Open",closed:"Closed",todaysHours:"Today's Hours",servicesOffered:"Services Offered",about:"About",location:"Location",contactInfo:"Contact Information",whatsappContact:"Contact via WhatsApp",bookNow:"Book Now",reviews:"Reviews",rating:"Rating",writeReview:"Write a Review",minuteShort:"min",discount:"Discount",originalPrice:"Original Price",discountedPrice:"Discounted Price",linkCopied:"Link copied to clipboard",shareTitle:"{name} ‚Äì IndaStreet Massage Place",shareText:"Check out {name} on IndaStreet"},locationModal:{title:"Set Your Location",prompt:"We need your location to find the best services near you.",placeholder:"Enter your address or set on map",confirmButton:"Confirm Location",useCurrentLocationButton:"Use My Current Location",detectingLocation:"Detecting your location...",searchLocation:"Search Location",locationError:"Unable to detect location",selectLocation:"Please select a location"},ratingModal:{title:"Rate {itemName}",prompt:"How was your experience?",whatsappLabel:"Your WhatsApp Number",whatsappPlaceholder:"e.g. 81234567890",submitButton:"Submit Review",confirmation:"Thank you for your review! It will be reviewed by an administrator before going live.",confirmationV2:"Thank you for your submission! Your review has been sent to our administrators for approval.",selectRatingError:"Please select a rating.",whatsappRequiredError:"Please enter your WhatsApp number."},a2hsPrompt:{title:"Add to Home Screen",iosInstruction:'Tap the share button and select "Add to Home Screen"',iosAction:"Add to Home Screen",androidInstruction:'Tap the menu button and select "Add to Home Screen"'},testimonials:{title:"Trusted by Women Therapists & Clients",subtitle:"Real stories from our community",femaleTherapistFilter:"Female Therapists",femaleClientReviews:"Customer Reviews",stories:[{name:"Sarah M.",role:"Therapist, Ubud",text:"As a single mother, IndaStreet gave me flexibility to earn from home. I get 15-20 bookings weekly and clients feel safe because of the verification system.",avatar:"üë©‚Äç‚öïÔ∏è"},{name:"Winda L.",role:"Therapist, Seminyak",text:"The platform is so easy - I just set my availability and clients book me directly. Women clients love that they can choose female therapists.",avatar:"üë©‚Äçüíº"},{name:"Ela K.",role:"Therapist, Canggu",text:"I was nervous about home service massage, but IndaStreet's GPS tracking and client verification made me feel protected. Now I have 500+ bookings!",avatar:"üå∏"},{name:"Jessica T.",role:"Client, Australia",text:"Felt very safe booking a female therapist for prenatal massage. The reviews from other women helped me choose the perfect therapist.",avatar:"ü§∞"}]}},id:{home:{accommodationMassageService:"Akomodasi dengan Layanan Pijat",homeServiceTab:"Layanan Rumah",massagePlacesTab:"Tempat Pijat",therapistsTitle:"Terapis Pijat Rumahan",therapistsSubtitle:"Kami memantau lokasi untuk Pengguna dan terapis. Memberikan keamanan bagi semua pengguna sekaligus menghilangkan kekhawatiran‚ÄîAnda bisa memesan dengan percaya diri.",therapistsSubtitleAll:"Kami memantau lokasi untuk Pengguna dan terapis. Memberikan keamanan bagi semua pengguna sekaligus menghilangkan kekhawatiran‚ÄîAnda bisa memesan dengan percaya diri.",therapistsSubtitleCity:"Kami memantau lokasi untuk Pengguna dan terapis. Memberikan keamanan bagi semua pengguna sekaligus menghilangkan kekhawatiran‚ÄîAnda bisa memesan dengan percaya diri.",safetyCommitmentTitle:"Keselamatan Anda prioritas kami",safetyCommitmentText:"Kami memantau lokasi penyedia dan aktivitas pengguna untuk memastikan platform yang aman bagi semua.",massagePlacesTitle:"Spa Pijat Unggulan",massagePlacesSubtitle:"Temukan tempat pijat terbaik di Bali",noTherapistsAvailable:"Tidak ada terapis tersedia di area Anda saat ini.",noPlacesAvailable:"Tidak ada tempat pijat tersedia di area Anda",loading:"Memuat...",loginSignUp:"Masuk / Daftar",noMoreTherapists:"Tidak ada terapis lagi untuk ditampilkan.",pass:"Lewati",like:"Suka",therapistsOnline:"{count} dari {total} terapis online",massageType:"Jenis Pijat",searchPlaceholder:"Cari berdasarkan nama...",noResults:"Tidak ada hasil ditemukan. Coba sesuaikan filter Anda.",setLocation:"Atur Lokasi",updateLocation:"Perbarui",youAreViewing:"Anda melihat",changeLocation:"Ubah lokasi",allAreas:"Semua area",changeCity:"Pilih lokasi",locationError:"Tidak dapat mendapatkan lokasi. Silakan aktifkan izin dan coba lagi.",gettingLocation:"Mendapatkan lokasi...",browseRegionNote:"Jelajahi wilayah (jarak tetap berlaku)",viewProfile:"Lihat Profil",viewOnly:"Lihat Saja",therapistCard:{orderNow:"Pesan Sekarang",schedule:"Jadwalkan",massageTypes:"Jenis Pijat",experiencedArea:"Area Keahlian",yearsExperience:"Tahun Pengalaman",genericBio:"Terapis pijat profesional dengan pengalaman dalam berbagai teknik pijat."},pressure:"Tekanan",readMore:"Baca Selengkapnya",readLess:"Baca Lebih Sedikit",aboutMassage:"Tentang",keyBenefits:"Manfaat Utama",bestFor:"Terbaik Untuk",findTherapists:"Cari Terapis",findMassagePlaces:"Cari Tempat Pijat",massageDirectory:"Direktori Pijat",massageDirectoryTitle:"Jelajahi Jenis Pijat",facial:"Facial",facialHomeService:"Facial & Skin",hotelVillaService:"Hotel & Villa",facialClinics:"Klinik Facial & Skin",facialClinicsSubtitle:"Temukan klinik facial terbaik di seluruh Indonesia",facialClinicsSubtitleCity:"Perawatan facial premium di {city}",noFacialClinicsAvailable:"Tidak ada klinik facial tersedia",checkBackFacials:"Periksa kembali untuk spa facial unggulan!",menu:{title:"Menu",createProfile:"Buat Profil",agentLogin:"Portal Agen",agentDashboard:"Dashboard Agen",adminLogin:"Login Admin",customerLogin:"Login Pelanggan",logout:"Keluar",sections:{jobPosting:"Lowongan Kerja",loginCreateAccount:"Masuk / Buat Akun",company:"Perusahaan",locations:"Lokasi",massageServices:"Layanan Pijat",helpSupport:"Bantuan & Dukungan"},joinIndastreet:"Bergabung dengan IndaStreet",massageJobs:"Lowongan Pijat",massageJobsDesc:"Temukan peluang",hotel:"Hotel",hotelDesc:"Portal mitra hotel",villa:"Villa",villaDesc:"Portal mitra villa",therapists:"Terapis",therapistsDesc:"Portal terapis",massageSpa:"Spa Pijat",massageSpaDesc:"Portal mitra spa",therapistPortal:"Portal Terapis",massageSpaPortal:"Portal Spa Pijat",websitePartnersPortal:"Portal Mitra Website",agent:"Agen",agentDesc:"Portal agen",customer:"Tamu",customerDesc:"Portal tamu",aboutUs:"Tentang Kami",aboutUsDesc:"Pelajari tentang kami",companyProfile:"Profil Perusahaan",howItWorks:"Cara Kerja",howItWorksDesc:"Memulai",blog:"Blog",blogDesc:"Baca artikel kami",contact:"Hubungi Kami",contactDesc:"Hubungi kami",hotelsVillas:"Hotel & Villa",hotelsVillasDesc:"Bermitra dengan terapis tersertifikasi",termsOfService:"Syarat Layanan",termsDesc:"Ketentuan hukum",privacyPolicy:"Kebijakan Privasi",privacyDesc:"Informasi privasi",accommodationMassageService:"Akomodasi dengan Layanan Pijat",traditionalBalineseMassage:"Pijat Bali Tradisional",deepTissueMassage:"Pijat Jaringan Dalam",qrCode:"Kode QR",terms:"Syarat",privacy:"Privasi",massageInBali:"Pijat di Bali",faq:"FAQ"}},dashboard:{analytics:"Analitik",profile:"Profil",menu:"Menu",feedback:"Umpan Balik",discounts:"Diskon",concierge:"Concierge",commissions:"Komisi",notifications:"Notifikasi",membership:"Keanggotaan",chat:"Chat",chatSupport:"Dukungan Chat",services:"Layanan",servicesSettings:"Layanan",serviceSettings:"Layanan",logout:"Keluar",onlineStatus:"Status Online",booking:"Pemesanan",hotelVilla:"Hotel/Villa",promotions:"Promosi",jobOpportunities:"Peluang Kerja",membershipPlans:"Paket Keanggotaan",terms:"Syarat",roomBookings:"Reservasi Kamar",guestServices:"Layanan Tamu",propertyManagement:"Manajemen Properti",myBookings:"Reservasi Saya",schedule:"Jadwal",earnings:"Pendapatan",clientReviews:"Ulasan Klien",treatments:"Perawatan",staff:"Staf",facilities:"Fasilitas"},detail:{pricingTitle:"Harga",contactButton:"Pesan Sekarang",bookButton:"Jadwalkan",backButton:"Kembali",shareButton:"Bagikan",open:"Buka",closed:"Tutup",todaysHours:"Jam Buka Hari Ini",servicesOffered:"Layanan yang Ditawarkan",about:"Tentang",location:"Lokasi",contactInfo:"Informasi Kontak",whatsappContact:"Hubungi via WhatsApp",bookNow:"Pesan Sekarang",reviews:"Ulasan",rating:"Rating",writeReview:"Tulis Ulasan",minuteShort:"mnt",discount:"Diskon",originalPrice:"Harga Asli",discountedPrice:"Harga Diskon",linkCopied:"Link disalin ke clipboard",shareTitle:"{name} ‚Äì Tempat Pijat IndaStreet",shareText:"Lihat {name} di IndaStreet"},locationModal:{title:"Atur Lokasi Anda",prompt:"Kami memerlukan lokasi Anda untuk menemukan layanan terbaik di dekat Anda.",placeholder:"Masukkan alamat Anda atau atur di peta",confirmButton:"Konfirmasi Lokasi",useCurrentLocationButton:"Gunakan Lokasi Saya Saat Ini",detectingLocation:"Mendeteksi lokasi Anda...",searchLocation:"Cari Lokasi",locationError:"Tidak dapat mendeteksi lokasi",selectLocation:"Silakan pilih lokasi"},ratingModal:{title:"Beri Rating {itemName}",prompt:"Bagaimana pengalaman Anda?",whatsappLabel:"Nomor WhatsApp Anda",whatsappPlaceholder:"cth. 81234567890",submitButton:"Kirim Review",confirmation:"Terima kasih atas review Anda! Review akan ditinjau oleh administrator sebelum ditampilkan.",confirmationV2:"Terima kasih atas pengiriman Anda! Review Anda telah dikirim ke administrator kami untuk persetujuan.",selectRatingError:"Silakan pilih rating.",whatsappRequiredError:"Silakan masukkan nomor WhatsApp Anda."},a2hsPrompt:{title:"Tambahkan ke Layar Utama",iosInstruction:'Ketuk tombol bagikan dan pilih "Tambahkan ke Layar Utama"',iosAction:"Tambahkan ke Layar Utama",androidInstruction:'Ketuk tombol menu dan pilih "Tambahkan ke Layar Utama"'},testimonials:{title:"Dipercaya oleh Terapis & Klien Wanita",subtitle:"Cerita nyata dari komunitas kami",femaleTherapistFilter:"Terapis Wanita",femaleClientReviews:"Ulasan Pelanggan",stories:[{name:"Sarah M.",role:"Terapis, Ubud",text:"Sebagai ibu tunggal, IndaStreet memberi saya fleksibilitas untuk bekerja dari rumah. Saya mendapat 15-20 booking per minggu dan klien merasa aman karena sistem verifikasi.",avatar:"üë©‚Äç‚öïÔ∏è"},{name:"Winda L.",role:"Terapis, Seminyak",text:"Platform ini sangat mudah - saya hanya mengatur ketersediaan dan klien langsung memesan. Klien wanita suka bisa memilih terapis wanita.",avatar:"üë©‚Äçüíº"},{name:"Ela K.",role:"Terapis, Canggu",text:"Saya gugup tentang layanan pijat rumahan, tapi pelacakan GPS dan verifikasi klien IndaStreet membuat saya merasa terlindungi. Sekarang saya punya 500+ booking!",avatar:"üå∏"},{name:"Jessica T.",role:"Klien, Australia",text:"Merasa sangat aman memesan terapis wanita untuk pijat prenatal. Ulasan dari wanita lain membantu saya memilih terapis yang sempurna.",avatar:"ü§∞"}]}}},Xc={en:{adminDashboard:{title:"Admin Dashboard",tabs:{members:"Members Management",settings:"App Settings",agents:"Agents",reviews:"Reviews"},therapists:"Therapists",places:"Massage Places",profileStatus:"Profile Status",notLive:"Not Live",live:"Live",logout:"Logout",dbSettings:"Database Settings",dbStatusConnected:"Connected",dbStatusNotConnected:"Not Connected",manageConnection:"Manage",membershipTitle:"Membership Management",membershipUpdateSuccess:"Membership updated successfully!",membershipDurations:{oneMonth:"1m",threeMonths:"3m",sixMonths:"6m",oneYear:"1y"},googleMapsApiKey:{title:"Google Maps API Key",description:"Enter a valid Google Maps JavaScript API key to enable all location-based features, such as address search and distance calculation.",label:"API Key",placeholder:"Enter your API key here",saveButton:"Save Key"},appContactNumber:{title:"App Contact Number",description:"Set the primary WhatsApp number for customer service, agent sign-ups, and membership payments.",label:"WhatsApp Number",placeholder:"e.g. 6281234567890",saveButton:"Save Number"},agents:{title:"Agent Management",agentCode:"Agent Code",agentTier:"Tier",lastLogin:"Last Login",totalSignups:"Total Sign-ups",viewDashboard:"View Dashboard",neverLoggedIn:"Never"},reviews:{title:"Pending Reviews",noPendingReviews:"There are no pending reviews to approve.",provider:"Provider",rating:"Rating",whatsapp:"Submitter WhatsApp",submitted:"Submitted",approve:"Approve",reject:"Reject",approveConfirm:"Are you sure you want to approve this review? This will update the provider's public rating.",rejectConfirm:"Are you sure you want to reject this review?"}},providerDashboard:{therapistTitle:"Therapist Dashboard",placeTitle:"Place Dashboard",pendingApproval:"Your profile is pending admin approval. It is not visible to the public yet.",profileLive:"Your profile is live!",saveButton:"Save Profile",previewButton:"Preview Profile",nameLabel:"Name",descriptionLabel:"Bio / Description",whatsappLabel:"WhatsApp Number",pricingTitle:"Set Your Prices (Rp)","60min":"60 min price","90min":"90 min price","120min":"120 min price",massageTypesLabel:"Select Massage Types",profileSaved:"Profile saved successfully!",uploadProfilePic:"Profile Picture",uploadMainImage:"Main Image",uploadThumb:"Thumbnail",setLocation:"Set Current Location",locationSetConfirmation:"Location has been set to your current position!",locationLabel:"Location",locationPlaceholder:"Enter your full address",mapsApiError:"Google Maps could not load. Please check the API key. Location features are disabled.",onlineStatusLabel:"Online Status",logoutButton:"Logout",tabs:{profile:"Profile",bookings:"Bookings",analytics:"Analytics"},bookings:{upcoming:"Upcoming",past:"Past",noUpcoming:"No upcoming bookings.",noPast:"No past bookings.",confirm:"Confirm",cancel:"Cancel",customer:"Customer",service:"Service",date:"Date",status:"Status"},analytics:{impressions:"Impressions",profileViews:"Profile Views",whatsappClicks:"WhatsApp Clicks",lastWeek:"Last 7 days",thisMonth:"This month",allTime:"All time"}},agentDashboard:{title:"Agent Dashboard",welcome:"Welcome back, {name}!",stats:{totalSignups:"Total Sign-ups",thisWeek:"This Week",thisMonth:"This Month",allTime:"All Time",commissionEarned:"Commission Earned"},signups:{title:"Recent Sign-ups",noSignups:"No sign-ups yet.",provider:"Provider",type:"Type",date:"Date",commission:"Commission"},profile:{title:"My Profile",editProfile:"Edit Profile",agentCode:"Agent Code",tier:"Tier",joinDate:"Join Date",profileSavedSuccess:"Profile saved successfully!",profileSavedError:"Error saving profile. Please try again."},logout:"Logout"}},id:{adminDashboard:{title:"Dashboard Admin",tabs:{members:"Manajemen Anggota",settings:"Pengaturan Aplikasi",agents:"Agen",reviews:"Review"},therapists:"Terapis",places:"Tempat Pijat",profileStatus:"Status Profil",notLive:"Tidak Aktif",live:"Aktif",logout:"Keluar",dbSettings:"Pengaturan Database",dbStatusConnected:"Terhubung",dbStatusNotConnected:"Tidak Terhubung",manageConnection:"Kelola",membershipTitle:"Manajemen Keanggotaan",membershipUpdateSuccess:"Keanggotaan berhasil diperbarui!",membershipDurations:{oneMonth:"1b",threeMonths:"3b",sixMonths:"6b",oneYear:"1t"},googleMapsApiKey:{title:"Kunci API Google Maps",description:"Masukkan kunci API JavaScript Google Maps yang valid untuk mengaktifkan semua fitur berbasis lokasi.",label:"Kunci API",placeholder:"Masukkan kunci API Anda di sini",saveButton:"Simpan Kunci"},appContactNumber:{title:"Nomor Kontak Aplikasi",description:"Tetapkan nomor WhatsApp utama untuk layanan pelanggan, pendaftaran agen, dan pembayaran keanggotaan.",label:"Nomor WhatsApp",placeholder:"cth. 6281234567890",saveButton:"Simpan Nomor"},agents:{title:"Manajemen Agen",agentCode:"Kode Agen",agentTier:"Tingkat",lastLogin:"Login Terakhir",totalSignups:"Total Pendaftaran",viewDashboard:"Lihat Dashboard",neverLoggedIn:"Belum Pernah"},reviews:{title:"Review Tertunda",noPendingReviews:"Tidak ada review tertunda untuk disetujui.",provider:"Penyedia",rating:"Rating",whatsapp:"WhatsApp Pengirim",submitted:"Dikirim",approve:"Setujui",reject:"Tolak",approveConfirm:"Apakah Anda yakin ingin menyetujui review ini? Ini akan memperbarui rating publik penyedia.",rejectConfirm:"Apakah Anda yakin ingin menolak review ini?"}},providerDashboard:{therapistTitle:"Dashboard Terapis",placeTitle:"Dashboard Tempat",pendingApproval:"Profil Anda sedang menunggu persetujuan admin. Belum terlihat oleh publik.",profileLive:"Profil Anda sudah aktif!",saveButton:"Simpan Profil",previewButton:"Pratinjau Profil",nameLabel:"Nama",descriptionLabel:"Bio / Deskripsi",whatsappLabel:"Nomor WhatsApp",pricingTitle:"Atur Harga Anda (Rp)","60min":"Harga 60 menit","90min":"Harga 90 menit","120min":"Harga 120 menit",massageTypesLabel:"Pilih Jenis Pijat",profileSaved:"Profil berhasil disimpan!",uploadProfilePic:"Foto Profil",uploadMainImage:"Gambar Utama",uploadThumb:"Thumbnail",setLocation:"Atur Lokasi Saat Ini",locationSetConfirmation:"Lokasi telah diatur ke posisi Anda saat ini!",locationLabel:"Lokasi",locationPlaceholder:"Masukkan alamat lengkap Anda",mapsApiError:"Google Maps tidak dapat dimuat. Silakan periksa kunci API. Fitur lokasi dinonaktifkan.",onlineStatusLabel:"Status Online",logoutButton:"Keluar",tabs:{profile:"Profil",bookings:"Pemesanan",analytics:"Analitik"},bookings:{upcoming:"Mendatang",past:"Sebelumnya",noUpcoming:"Tidak ada pemesanan mendatang.",noPast:"Tidak ada pemesanan sebelumnya.",confirm:"Konfirmasi",cancel:"Batal",customer:"Pelanggan",service:"Layanan",date:"Tanggal",status:"Status"},analytics:{impressions:"Tayangan",profileViews:"Tampilan Profil",whatsappClicks:"Klik WhatsApp",lastWeek:"7 hari terakhir",thisMonth:"Bulan ini",allTime:"Sepanjang waktu"}},agentDashboard:{title:"Dashboard Agen",welcome:"Selamat datang kembali, {name}!",stats:{totalSignups:"Total Pendaftaran",thisWeek:"Minggu Ini",thisMonth:"Bulan Ini",allTime:"Sepanjang Waktu",commissionEarned:"Komisi Diperoleh"},signups:{title:"Pendaftaran Terbaru",noSignups:"Belum ada pendaftaran.",provider:"Penyedia",type:"Jenis",date:"Tanggal",commission:"Komisi"},profile:{title:"Profil Saya",editProfile:"Edit Profil",agentCode:"Kode Agen",tier:"Tingkat",joinDate:"Tanggal Bergabung"},logout:"Keluar"}}},Zc={en:{massageTypes:{"Swedish Massage":{shortDescription:"Classic relaxation massage with gentle, flowing strokes for stress relief and improved circulation.",fullDescription:"Swedish massage is one of the most popular massage techniques worldwide. It uses five main strokes - effleurage (sliding/gliding), petrissage (kneading), tapotement (rhythmic tapping), friction (cross fiber), and vibration/shaking. This gentle yet effective technique promotes relaxation, improves blood circulation, eases muscle tension, and enhances overall well-being. Perfect for first-time massage recipients and those seeking stress relief.",benefits:["Reduces stress and anxiety","Improves blood circulation","Eases muscle tension","Promotes better sleep","Boosts immune system","Increases flexibility"],duration:"60-90 minutes",intensity:"Light",bestFor:["Beginners","Stress relief","Relaxation","General wellness"]},"Deep Tissue Massage":{shortDescription:"Intense therapeutic massage targeting deep muscle layers to relieve chronic pain and tension.",fullDescription:"Deep tissue massage focuses on the deeper layers of muscle and connective tissue. Using slow strokes and deep finger pressure on areas of tension and pain, this technique is particularly beneficial for chronically tense and contracted areas such as stiff necks, low back tightness, and sore shoulders. It helps break down adhesions (bands of painful, rigid tissue) that can disrupt circulation and cause pain, limited movement, and inflammation.",benefits:["Relieves chronic muscle pain","Breaks down scar tissue","Improves posture","Reduces inflammation","Treats sports injuries","Lowers blood pressure"],duration:"60-90 minutes",intensity:"Deep",bestFor:["Chronic pain","Athletes","Muscle injuries","Limited mobility"]},"Sports Massage":{shortDescription:"Specialized massage for athletes to enhance performance, prevent injuries, and accelerate recovery.",fullDescription:"Sports massage is designed specifically for people who are involved in physical activity. It focuses on areas of the body that are overused and stressed from repetitive and often aggressive movements. This type of massage can be used before, during, and after athletic events to prepare muscles, reduce recovery time, and prevent injury. It combines techniques from Swedish massage, deep tissue, and stretching to address the specific needs of athletes.",benefits:["Prevents sports injuries","Enhances athletic performance","Reduces muscle soreness","Improves flexibility","Speeds recovery","Increases range of motion"],duration:"30-90 minutes",intensity:"Firm",bestFor:["Athletes","Active individuals","Injury prevention","Pre/post competition"]},"Hot Stone Massage":{shortDescription:"Therapeutic massage using heated smooth stones to warm and relax tight muscles.",fullDescription:"Hot stone massage uses smooth, heated basalt stones placed on specific points on the body to warm and loosen tight muscles and balance energy centers. The therapist may also hold stones while applying traditional massage strokes. The heat from the stones penetrates deep into muscles, allowing the therapist to work deeper with less pressure. This ancient technique promotes deep relaxation, eases muscle stiffness, and improves blood flow.",benefits:["Deep muscle relaxation","Improves blood flow","Reduces stress","Eases pain and tension","Promotes better sleep","Boosts immunity"],duration:"75-90 minutes",intensity:"Light",bestFor:["Muscle tension","Stress relief","Chronic pain","Insomnia"]},"Aromatherapy Massage":{shortDescription:"Relaxing massage combined with essential oils to enhance emotional and physical well-being.",fullDescription:"Aromatherapy massage combines the therapeutic benefits of massage with the healing properties of essential oils. Different oils are selected based on individual needs - lavender for relaxation, peppermint for energy, eucalyptus for respiratory health, etc. The oils are absorbed through the skin and inhaled during the massage, providing both physical and emotional benefits. This holistic approach treats the mind, body, and spirit.",benefits:["Reduces anxiety and depression","Enhances mood","Relieves pain","Improves sleep quality","Boosts energy","Strengthens immune system"],duration:"60-90 minutes",intensity:"Light",bestFor:["Stress relief","Emotional wellness","Sleep issues","Mood enhancement"]},"Thai Massage":{shortDescription:"Ancient healing practice combining acupressure, stretching, and yoga-like movements.",fullDescription:"Thai massage, also known as Thai yoga massage, is an ancient healing system combining acupressure, Indian Ayurvedic principles, and assisted yoga postures. The recipient remains clothed during the treatment and lies on a mat on the floor. The therapist uses their hands, knees, legs, and feet to move you into a series of yoga-like stretches and applies rhythmic pressure along energy lines. This dynamic bodywork improves flexibility, relieves tension, and energizes the body.",benefits:["Increases flexibility","Improves energy levels","Relieves muscle tension","Enhances athletic performance","Reduces headaches","Improves posture"],duration:"60-120 minutes",intensity:"Moderate",bestFor:["Flexibility","Energy boost","Athletes","Stress relief"]},"Balinese Massage":{shortDescription:"Traditional Indonesian massage combining acupressure, reflexology, and aromatherapy for total relaxation.",fullDescription:"Balinese massage is a traditional Indonesian therapy that combines gentle stretches, acupressure, reflexology, and aromatherapy to stimulate the flow of blood, oxygen, and energy around your body. Using a variety of techniques including skin rolling, kneading, stroking, and pressure-point stimulation, this massage promotes deep relaxation, relieves muscle tension, and enhances overall well-being. Essential oils are used to enhance the therapeutic benefits.",benefits:["Deep relaxation","Improves blood circulation","Relieves muscle tension","Reduces stress","Enhances sleep quality","Boosts energy flow"],duration:"60-120 minutes",intensity:"Moderate",bestFor:["Total relaxation","Stress relief","Muscle tension","Energy balance"]},"Shiatsu Massage":{shortDescription:"Japanese finger pressure therapy on energy meridians to balance body energy and promote healing.",fullDescription:'Shiatsu is a Japanese bodywork therapy based on traditional Chinese medicine principles. "Shiatsu" means "finger pressure" in Japanese. The therapist uses thumbs, fingers, and palms to apply pressure to specific points on the body to unblock energy pathways (meridians) and restore balance. Unlike other massage techniques, Shiatsu is typically performed with the client fully clothed on a mat on the floor. It aims to stimulate the body\'s natural healing abilities.',benefits:["Balances energy flow","Reduces stress and anxiety","Relieves pain","Improves circulation","Boosts immune system","Enhances emotional well-being"],duration:"60-90 minutes",intensity:"Moderate",bestFor:["Energy balance","Stress relief","Pain management","Holistic health"]},Reflexology:{shortDescription:"Pressure point therapy on feet, hands, and ears to promote healing throughout the body.",fullDescription:"Reflexology is based on the principle that specific points on the feet, hands, and ears correspond to different organs and systems in the body. By applying pressure to these reflex points, practitioners can stimulate the body's natural healing processes, improve circulation, and promote overall wellness. This ancient practice is both therapeutic and deeply relaxing.",benefits:["Promotes relaxation","Improves nerve function","Enhances blood circulation","Boosts immune system","Reduces pain","Improves digestion"],duration:"45-60 minutes",intensity:"Light",bestFor:["Stress relief","Overall wellness","Circulation issues","Detoxification"]},"Prenatal Massage":{shortDescription:"Specialized massage for pregnant women to relieve discomfort and reduce stress safely.",fullDescription:"Prenatal massage is specifically designed for pregnant women to address the unique physical and emotional needs during pregnancy. Using specialized cushions and side-lying positions, this gentle massage helps reduce swelling, relieve muscle aches, improve circulation, and promote relaxation. It can help alleviate common pregnancy discomforts such as back pain, leg cramps, and anxiety.",benefits:["Reduces pregnancy discomfort","Improves sleep quality","Decreases swelling","Relieves back and leg pain","Reduces stress hormones","Improves mood"],duration:"60-75 minutes",intensity:"Light",bestFor:["Pregnant women","Back pain relief","Stress reduction","Better sleep"]},"Lymphatic Drainage":{shortDescription:"Gentle massage to stimulate lymph flow and remove toxins from the body.",fullDescription:"Lymphatic drainage massage is a gentle, rhythmic massage technique that stimulates the lymphatic system to remove toxins and waste products from the body. Using light pressure and slow, circular movements, this massage helps reduce swelling, boost immune function, and promote detoxification. It's particularly beneficial after surgery or for conditions involving lymphatic system dysfunction.",benefits:["Reduces swelling","Boosts immune system","Promotes detoxification","Improves skin health","Reduces fluid retention","Accelerates healing"],duration:"45-60 minutes",intensity:"Light",bestFor:["Post-surgery recovery","Detoxification","Immune support","Swelling reduction"]},"Trigger Point Therapy":{shortDescription:"Focused pressure on specific tight areas to release muscle knots and tension.",fullDescription:'Trigger point therapy targets specific points of muscle tension that cause pain in other parts of the body. These "trigger points" are tight areas within muscle tissue that cause referred pain. The therapist applies sustained pressure to these points to release the tension and alleviate pain. This technique is highly effective for chronic pain conditions and muscle dysfunction.',benefits:["Relieves chronic pain","Releases muscle knots","Improves range of motion","Reduces headaches","Alleviates referred pain","Improves muscle function"],duration:"30-60 minutes",intensity:"Firm",bestFor:["Chronic pain","Muscle knots","Headaches","Limited mobility"]},"Lomi Lomi":{shortDescription:"Hawaiian massage using flowing movements mimicking ocean waves for deep relaxation.",fullDescription:"Lomi Lomi is a traditional Hawaiian massage that uses continuous, flowing strokes that mimic the movement of ocean waves. The therapist uses forearms, hands, and elbows in smooth, dance-like movements to release tension and promote harmony. Often accompanied by traditional Hawaiian music, this deeply spiritual massage treats the body as a whole, promoting physical, emotional, and spiritual healing.",benefits:["Deep relaxation","Releases emotional tension","Improves circulation","Enhances spiritual connection","Reduces stress","Promotes overall wellness"],duration:"75-120 minutes",intensity:"Moderate",bestFor:["Deep relaxation","Emotional healing","Stress relief","Holistic wellness"]},"Indian Head Massage":{shortDescription:"Focused massage on head, neck, and shoulders to relieve tension and promote hair health.",fullDescription:"Indian head massage, also known as champissage, is an ancient Ayurvedic therapy that focuses on the head, neck, and shoulders. Using a variety of pressure and techniques, including circular massage strokes on the scalp, this treatment relieves tension, improves circulation to the head and hair follicles, and promotes mental clarity. It can be performed with or without oil.",benefits:["Relieves headaches","Reduces neck and shoulder tension","Improves hair health","Promotes mental clarity","Reduces stress","Improves sleep"],duration:"30-45 minutes",intensity:"Light",bestFor:["Headaches","Neck tension","Stress relief","Hair health"]},"Couples Massage":{shortDescription:"Side-by-side massage experience for two people in the same room.",fullDescription:"Couples massage allows two people to enjoy a massage experience simultaneously in the same room. Each person receives their own therapist and can choose their preferred massage type and pressure. This shared experience is perfect for romantic partners, friends, or family members who want to relax together. It's a wonderful way to bond while receiving therapeutic benefits.",benefits:["Shared relaxation experience","Quality bonding time","Reduces stress together","Enhances intimacy","Creates lasting memories","Mutual wellness"],duration:"60-90 minutes",intensity:"Variable",bestFor:["Couples","Friends","Special occasions","Bonding experience"]},"Chair Massage":{shortDescription:"Quick seated massage focusing on neck, shoulders, back, and arms.",fullDescription:"Chair massage is a convenient, clothed massage performed while you sit in a specially designed massage chair. Focusing on the neck, shoulders, back, arms, and hands, this quick but effective massage is perfect for busy people who need stress relief without the time commitment of a full massage. Popular in workplace wellness programs and events.",benefits:["Quick stress relief","Relieves upper body tension","Improves focus","Boosts energy","Convenient","No disrobing required"],duration:"15-30 minutes",intensity:"Moderate",bestFor:["Busy professionals","Quick relief","Workplace wellness","Events"]},"Myofascial Release":{shortDescription:"Technique targeting fascia to improve flexibility and reduce chronic pain.",fullDescription:"Myofascial release focuses on releasing tension in the fascia, the connective tissue that surrounds muscles and organs. Using sustained pressure and stretching techniques, this therapy helps release restrictions in the fascial system that can cause pain and limit movement. It's particularly effective for chronic pain conditions, postural problems, and recovery from injury.",benefits:["Relieves chronic pain","Improves flexibility","Enhances posture","Reduces muscle tension","Improves movement","Accelerates injury recovery"],duration:"60-90 minutes",intensity:"Moderate",bestFor:["Chronic pain","Postural issues","Injury recovery","Flexibility"]},"Javanese Massage":{shortDescription:"Gentle Indonesian healing massage focusing on energy flow and holistic wellness.",fullDescription:"Javanese massage is a traditional Indonesian healing technique that focuses on gentle, rhythmic movements to promote energy flow and balance throughout the body. This massage style uses lighter pressure compared to Balinese massage, incorporating elements of meditation and spirituality. The therapist uses hands, thumbs, and sometimes elbows to work on energy lines and pressure points, promoting deep relaxation and inner peace.",benefits:["Promotes energy balance","Reduces stress","Improves circulation","Enhances spiritual wellness","Gentle muscle relaxation","Calms the mind"],duration:"60-90 minutes",intensity:"Light",bestFor:["Stress relief","Energy healing","Gentle relaxation","Holistic wellness"]},"Traditional Massage":{shortDescription:"A classic massage technique using long, flowing strokes to relax muscles and improve circulation.",fullDescription:"Traditional massage encompasses time-tested techniques passed down through generations. Using a combination of kneading, stroking, and pressure, this massage style promotes relaxation, improves circulation, and relieves muscle tension. It's a versatile approach that can be adapted to individual needs and preferences.",benefits:["Reduces muscle tension","Improves circulation","Promotes relaxation","Relieves stress","Enhances overall well-being","Versatile approach"],duration:"60-90 minutes",intensity:"Moderate",bestFor:["General wellness","Relaxation","Stress relief","All levels"]},"Back Massage":{shortDescription:"Concentrated massage therapy targeting the back muscles and spine area.",fullDescription:"Back massage focuses specifically on the back, shoulders, and neck - areas that commonly hold tension and stress. Using various techniques including kneading, compression, and stretching, this targeted treatment relieves back pain, improves posture, and reduces muscle stiffness. Perfect for those who spend long hours sitting or have chronic back discomfort.",benefits:["Relieves back pain","Reduces muscle stiffness","Improves posture","Increases flexibility","Reduces stress","Enhances mobility"],duration:"30-45 minutes",intensity:"Moderate",bestFor:["Back pain","Poor posture","Desk workers","Upper body tension"]},"Foot Massage":{shortDescription:"Therapeutic massage focusing on feet to relieve tension and improve circulation.",fullDescription:"Foot massage targets the feet and lower legs, providing relief from tired, aching feet while improving overall circulation. This treatment combines massage techniques with reflexology principles, stimulating reflex points that correspond to different body systems. Perfect after a long day of standing or walking.",benefits:["Relieves foot pain","Improves circulation","Reduces swelling","Promotes relaxation","Better sleep","Overall wellness"],duration:"30-45 minutes",intensity:"Light",bestFor:["Tired feet","Poor circulation","Standing workers","Relaxation"]},"Four Hands Massage":{shortDescription:"Two therapists working simultaneously for an immersive relaxation experience.",fullDescription:"Four hands massage features two therapists working in synchronized harmony to create a unique and deeply relaxing experience. With twice the hands working simultaneously, this massage provides twice the sensory input, making it impossible for your mind to track each movement, allowing you to completely let go and relax. The synchronized movements create a flowing, rhythmic experience.",benefits:["Deep relaxation","Unique sensory experience","Faster muscle relief","Enhanced circulation","Mental escape","Luxury treatment"],duration:"60-90 minutes",intensity:"Variable",bestFor:["Special occasions","Deep relaxation","Luxury experience","Complete escape"]},"Cupping Therapy":{shortDescription:"Traditional therapy using suction cups to improve blood flow and release muscle tension.",fullDescription:"Cupping therapy is an ancient practice that uses special cups placed on the skin to create suction. This suction pulls blood to the surface, improving circulation and helping to release tight muscles and fascia. The cups may be left in place or moved around to massage an area. While it may leave temporary marks, cupping is effective for pain relief and muscle recovery.",benefits:["Relieves muscle tension","Improves blood flow","Reduces inflammation","Promotes healing","Releases toxins","Pain relief"],duration:"30-45 minutes",intensity:"Moderate",bestFor:["Muscle pain","Sports recovery","Chronic pain","Improved circulation"]},"Scrub & Massage":{shortDescription:"Exfoliating body scrub followed by relaxing massage for smooth, rejuvenated skin.",fullDescription:"This luxurious treatment combines the benefits of exfoliation with massage therapy. Starting with a full-body scrub using natural ingredients to remove dead skin cells, followed by a thorough rinse and then a relaxing massage. The result is silky smooth, glowing skin combined with deep muscle relaxation. Perfect for special occasions or self-care.",benefits:["Smooth, glowing skin","Removes dead skin cells","Deep relaxation","Improves circulation","Softens skin","Luxury experience"],duration:"90-120 minutes",intensity:"Light",bestFor:["Skin care","Special occasions","Luxury treatment","Complete pampering"]},"Oil Massage":{shortDescription:"Full body massage using warm therapeutic oils for deep relaxation and nourishment.",fullDescription:"Oil massage uses warm, therapeutic oils to nourish the skin while providing deep relaxation. The oils allow for smooth, gliding strokes that penetrate deeply into the muscles. Different oils can be chosen based on skin type and therapeutic needs - coconut oil for hydration, sesame oil for warmth, or aromatic oils for added benefits.",benefits:["Deep muscle relaxation","Nourishes skin","Improves circulation","Reduces friction","Aromatherapy benefits","Smooth gliding strokes"],duration:"60-90 minutes",intensity:"Moderate",bestFor:["Relaxation","Skin nourishment","Muscle tension","Overall wellness"]},"Dry Massage":{shortDescription:"Massage performed without oil, focusing on pressure points and muscle manipulation.",fullDescription:"Dry massage is performed without oils or lotions, focusing on direct muscle manipulation, pressure point work, and stretching. This technique allows for more precise targeting of specific muscles and trigger points. Common in Thai massage and sports massage, dry massage is ideal for those who prefer not to use oils or need focused therapeutic work.",benefits:["Targeted muscle work","No oil residue","Precise pressure application","Improves flexibility","Releases trigger points","Suitable for all skin types"],duration:"60-90 minutes",intensity:"Firm",bestFor:["Targeted therapy","Sports recovery","Trigger points","No oil preference"]}}},id:{massageTypes:{"Swedish Massage":{shortDescription:"Pijat relaksasi klasik dengan gerakan lembut mengalir untuk meredakan stres dan meningkatkan sirkulasi.",fullDescription:"Pijat Swedia adalah salah satu teknik pijat paling populer di seluruh dunia. Menggunakan lima gerakan utama - effleurage (menggeser/meluncur), petrissage (meremas), tapotement (mengetuk berirama), friction (gesekan silang), dan getaran/goyang. Teknik lembut namun efektif ini meningkatkan relaksasi, memperbaiki sirkulasi darah, mengurangi ketegangan otot, dan meningkatkan kesejahteraan secara keseluruhan. Sempurna untuk pemula dan mereka yang mencari ketenangan.",benefits:["Mengurangi stres dan kecemasan","Meningkatkan sirkulasi darah","Mengurangi ketegangan otot","Meningkatkan kualitas tidur","Meningkatkan sistem kekebalan tubuh","Meningkatkan fleksibilitas"],duration:"60-90 menit",intensity:"Ringan",bestFor:["Pemula","Menghilangkan stres","Relaksasi","Kesehatan umum"]},"Deep Tissue Massage":{shortDescription:"Pijat terapeutik intensif yang menargetkan lapisan otot dalam untuk meredakan nyeri kronis dan ketegangan.",fullDescription:"Pijat jaringan dalam berfokus pada lapisan otot dan jaringan ikat yang lebih dalam. Menggunakan gerakan lambat dan tekanan jari yang dalam pada area ketegangan dan nyeri, teknik ini sangat bermanfaat untuk area yang tegang kronis seperti leher kaku, punggung bawah tegang, dan bahu yang sakit. Membantu memecah adhesi (pita jaringan yang kaku dan menyakitkan) yang dapat mengganggu sirkulasi dan menyebabkan nyeri, keterbatasan gerakan, dan peradangan.",benefits:["Meredakan nyeri otot kronis","Memecah jaringan parut","Memperbaiki postur","Mengurangi peradangan","Mengobati cedera olahraga","Menurunkan tekanan darah"],duration:"60-90 menit",intensity:"Dalam",bestFor:["Nyeri kronis","Atlet","Cedera otot","Mobilitas terbatas"]},"Sports Massage":{shortDescription:"Pijat khusus untuk atlet meningkatkan performa, mencegah cedera, dan mempercepat pemulihan.",fullDescription:"Pijat olahraga dirancang khusus untuk orang yang terlibat dalam aktivitas fisik. Berfokus pada area tubuh yang terlalu banyak digunakan dan stres dari gerakan berulang dan sering agresif. Jenis pijat ini dapat digunakan sebelum, selama, dan setelah acara atletik untuk mempersiapkan otot, mengurangi waktu pemulihan, dan mencegah cedera. Menggabungkan teknik dari pijat Swedia, jaringan dalam, dan peregangan untuk memenuhi kebutuhan spesifik atlet.",benefits:["Mencegah cedera olahraga","Meningkatkan performa atletik","Mengurangi nyeri otot","Meningkatkan fleksibilitas","Mempercepat pemulihan","Meningkatkan rentang gerak"],duration:"30-90 menit",intensity:"Kuat",bestFor:["Atlet","Individu aktif","Pencegahan cedera","Pra/pasca kompetisi"]},"Hot Stone Massage":{shortDescription:"Pijat terapeutik menggunakan batu halus yang dipanaskan untuk menghangatkan dan merelaksasi otot tegang.",fullDescription:"Pijat batu panas menggunakan batu basal halus yang dipanaskan ditempatkan pada titik-titik spesifik di tubuh untuk menghangatkan dan melonggarkan otot tegang serta menyeimbangkan pusat energi. Terapis juga dapat memegang batu sambil menerapkan gerakan pijat tradisional. Panas dari batu menembus jauh ke dalam otot, memungkinkan terapis bekerja lebih dalam dengan tekanan lebih ringan. Teknik kuno ini meningkatkan relaksasi mendalam, mengurangi kekakuan otot, dan memperbaiki aliran darah.",benefits:["Relaksasi otot mendalam","Meningkatkan aliran darah","Mengurangi stres","Mengurangi nyeri dan ketegangan","Meningkatkan kualitas tidur","Meningkatkan kekebalan tubuh"],duration:"75-90 menit",intensity:"Ringan",bestFor:["Ketegangan otot","Menghilangkan stres","Nyeri kronis","Insomnia"]},"Aromatherapy Massage":{shortDescription:"Pijat relaksasi dikombinasikan dengan minyak esensial untuk meningkatkan kesejahteraan emosional dan fisik.",fullDescription:"Pijat aromaterapi menggabungkan manfaat terapeutik pijat dengan sifat penyembuhan minyak esensial. Minyak berbeda dipilih berdasarkan kebutuhan individu - lavender untuk relaksasi, peppermint untuk energi, eucalyptus untuk kesehatan pernapasan, dll. Minyak diserap melalui kulit dan dihirup selama pijat, memberikan manfaat fisik dan emosional. Pendekatan holistik ini merawat pikiran, tubuh, dan jiwa.",benefits:["Mengurangi kecemasan dan depresi","Meningkatkan suasana hati","Meredakan nyeri","Meningkatkan kualitas tidur","Meningkatkan energi","Memperkuat sistem kekebalan tubuh"],duration:"60-90 menit",intensity:"Ringan",bestFor:["Menghilangkan stres","Kesejahteraan emosional","Masalah tidur","Peningkatan mood"]},"Thai Massage":{shortDescription:"Praktik penyembuhan kuno menggabungkan akupresur, peregangan, dan gerakan seperti yoga.",fullDescription:"Pijat Thai, juga dikenal sebagai pijat yoga Thailand, adalah sistem penyembuhan kuno yang menggabungkan akupresur, prinsip Ayurveda India, dan postur yoga yang dibantu. Penerima tetap berpakaian selama perawatan dan berbaring di matras di lantai. Terapis menggunakan tangan, lutut, kaki, dan kaki mereka untuk memindahkan Anda ke serangkaian peregangan seperti yoga dan menerapkan tekanan berirama sepanjang garis energi. Bodywork dinamis ini meningkatkan fleksibilitas, meredakan ketegangan, dan memberi energi pada tubuh.",benefits:["Meningkatkan fleksibilitas","Meningkatkan tingkat energi","Meredakan ketegangan otot","Meningkatkan performa atletik","Mengurangi sakit kepala","Memperbaiki postur"],duration:"60-120 menit",intensity:"Sedang",bestFor:["Fleksibilitas","Peningkatan energi","Atlet","Menghilangkan stres"]},"Balinese Massage":{shortDescription:"Pijat tradisional Indonesia menggabungkan akupresur, refleksologi, dan aromaterapi untuk relaksasi total.",fullDescription:"Pijat Bali adalah terapi tradisional Indonesia yang menggabungkan peregangan lembut, akupresur, refleksologi, dan aromaterapi untuk merangsang aliran darah, oksigen, dan energi di sekitar tubuh Anda. Menggunakan berbagai teknik termasuk penggulungan kulit, meremas, membelai, dan stimulasi titik tekanan, pijat ini meningkatkan relaksasi mendalam, meredakan ketegangan otot, dan meningkatkan kesejahteraan secara keseluruhan. Minyak esensial digunakan untuk meningkatkan manfaat terapeutik.",benefits:["Relaksasi mendalam","Meningkatkan sirkulasi darah","Meredakan ketegangan otot","Mengurangi stres","Meningkatkan kualitas tidur","Meningkatkan aliran energi"],duration:"60-120 menit",intensity:"Sedang",bestFor:["Relaksasi total","Menghilangkan stres","Ketegangan otot","Keseimbangan energi"]},"Shiatsu Massage":{shortDescription:"Terapi tekanan jari Jepang pada meridian energi untuk menyeimbangkan energi tubuh dan meningkatkan penyembuhan.",fullDescription:'Shiatsu adalah terapi tubuh Jepang berdasarkan prinsip pengobatan tradisional Tiongkok. "Shiatsu" berarti "tekanan jari" dalam bahasa Jepang. Terapis menggunakan ibu jari, jari, dan telapak tangan untuk menerapkan tekanan pada titik-titik spesifik di tubuh untuk membuka jalur energi (meridian) dan memulihkan keseimbangan. Tidak seperti teknik pijat lainnya, Shiatsu biasanya dilakukan dengan klien berpakaian lengkap di atas matras di lantai. Bertujuan untuk merangsang kemampuan penyembuhan alami tubuh.',benefits:["Menyeimbangkan aliran energi","Mengurangi stres dan kecemasan","Meredakan nyeri","Meningkatkan sirkulasi","Meningkatkan sistem kekebalan tubuh","Meningkatkan kesejahteraan emosional"],duration:"60-90 menit",intensity:"Sedang",bestFor:["Keseimbangan energi","Menghilangkan stres","Manajemen nyeri","Kesehatan holistik"]},Reflexology:{shortDescription:"Terapi titik tekanan pada kaki, tangan, dan telinga untuk meningkatkan penyembuhan di seluruh tubuh.",fullDescription:"Refleksologi didasarkan pada prinsip bahwa titik-titik spesifik pada kaki, tangan, dan telinga sesuai dengan organ dan sistem yang berbeda dalam tubuh. Dengan menerapkan tekanan pada titik refleks ini, praktisi dapat merangsang proses penyembuhan alami tubuh, meningkatkan sirkulasi, dan meningkatkan kesehatan secara keseluruhan. Praktik kuno ini terapeutik dan sangat menenangkan.",benefits:["Meningkatkan relaksasi","Meningkatkan fungsi saraf","Meningkatkan sirkulasi darah","Meningkatkan sistem kekebalan tubuh","Mengurangi nyeri","Meningkatkan pencernaan"],duration:"45-60 menit",intensity:"Ringan",bestFor:["Menghilangkan stres","Kesehatan umum","Masalah sirkulasi","Detoksifikasi"]},"Prenatal Massage":{shortDescription:"Pijat khusus untuk wanita hamil mengurangi ketidaknyamanan dan stres dengan aman.",fullDescription:"Pijat prenatal dirancang khusus untuk wanita hamil untuk memenuhi kebutuhan fisik dan emosional unik selama kehamilan. Menggunakan bantal khusus dan posisi miring, pijat lembut ini membantu mengurangi pembengkakan, meredakan nyeri otot, meningkatkan sirkulasi, dan meningkatkan relaksasi. Dapat membantu mengurangi ketidaknyamanan kehamilan umum seperti nyeri punggung, kram kaki, dan kecemasan.",benefits:["Mengurangi ketidaknyamanan kehamilan","Meningkatkan kualitas tidur","Mengurangi pembengkakan","Meredakan nyeri punggung dan kaki","Mengurangi hormon stres","Meningkatkan suasana hati"],duration:"60-75 menit",intensity:"Ringan",bestFor:["Wanita hamil","Mengurangi nyeri punggung","Pengurangan stres","Tidur lebih baik"]},"Lymphatic Drainage":{shortDescription:"Pijat lembut untuk merangsang aliran getah bening dan menghilangkan racun dari tubuh.",fullDescription:"Pijat drainase limfatik adalah teknik pijat lembut dan berirama yang merangsang sistem limfatik untuk menghilangkan racun dan produk limbah dari tubuh. Menggunakan tekanan ringan dan gerakan melingkar lambat, pijat ini membantu mengurangi pembengkakan, meningkatkan fungsi kekebalan tubuh, dan mempromosikan detoksifikasi. Sangat bermanfaat setelah operasi atau untuk kondisi yang melibatkan disfungsi sistem limfatik.",benefits:["Mengurangi pembengkakan","Meningkatkan sistem kekebalan tubuh","Mempromosikan detoksifikasi","Meningkatkan kesehatan kulit","Mengurangi retensi cairan","Mempercepat penyembuhan"],duration:"45-60 menit",intensity:"Ringan",bestFor:["Pemulihan pasca operasi","Detoksifikasi","Dukungan kekebalan tubuh","Pengurangan pembengkakan"]},"Trigger Point Therapy":{shortDescription:"Tekanan fokus pada area tegang spesifik untuk melepaskan simpul otot dan ketegangan.",fullDescription:'Terapi titik pemicu menargetkan titik-titik ketegangan otot spesifik yang menyebabkan nyeri di bagian lain tubuh. "Titik pemicu" ini adalah area tegang dalam jaringan otot yang menyebabkan nyeri rujukan. Terapis menerapkan tekanan berkelanjutan pada titik-titik ini untuk melepaskan ketegangan dan mengurangi nyeri. Teknik ini sangat efektif untuk kondisi nyeri kronis dan disfungsi otot.',benefits:["Meredakan nyeri kronis","Melepaskan simpul otot","Meningkatkan rentang gerak","Mengurangi sakit kepala","Mengurangi nyeri rujukan","Meningkatkan fungsi otot"],duration:"30-60 menit",intensity:"Kuat",bestFor:["Nyeri kronis","Simpul otot","Sakit kepala","Mobilitas terbatas"]},"Lomi Lomi":{shortDescription:"Pijat Hawaii menggunakan gerakan mengalir meniru gelombang laut untuk relaksasi mendalam.",fullDescription:"Lomi Lomi adalah pijat tradisional Hawaii yang menggunakan gerakan mengalir terus menerus yang meniru gerakan gelombang laut. Terapis menggunakan lengan bawah, tangan, dan siku dalam gerakan seperti tarian halus untuk melepaskan ketegangan dan mempromosikan harmoni. Sering disertai dengan musik Hawaii tradisional, pijat spiritual mendalam ini merawat tubuh secara keseluruhan, mempromosikan penyembuhan fisik, emosional, dan spiritual.",benefits:["Relaksasi mendalam","Melepaskan ketegangan emosional","Meningkatkan sirkulasi","Meningkatkan koneksi spiritual","Mengurangi stres","Mempromosikan kesehatan menyeluruh"],duration:"75-120 menit",intensity:"Sedang",bestFor:["Relaksasi mendalam","Penyembuhan emosional","Menghilangkan stres","Kesehatan holistik"]},"Indian Head Massage":{shortDescription:"Pijat fokus pada kepala, leher, dan bahu untuk meredakan ketegangan dan meningkatkan kesehatan rambut.",fullDescription:"Pijat kepala India, juga dikenal sebagai champissage, adalah terapi Ayurveda kuno yang berfokus pada kepala, leher, dan bahu. Menggunakan berbagai tekanan dan teknik, termasuk gerakan pijat melingkar di kulit kepala, perawatan ini meredakan ketegangan, meningkatkan sirkulasi ke kepala dan folikel rambut, dan mempromosikan kejernihan mental. Dapat dilakukan dengan atau tanpa minyak.",benefits:["Meredakan sakit kepala","Mengurangi ketegangan leher dan bahu","Meningkatkan kesehatan rambut","Mempromosikan kejernihan mental","Mengurangi stres","Meningkatkan tidur"],duration:"30-45 menit",intensity:"Ringan",bestFor:["Sakit kepala","Ketegangan leher","Menghilangkan stres","Kesehatan rambut"]},"Couples Massage":{shortDescription:"Pengalaman pijat berdampingan untuk dua orang di ruangan yang sama.",fullDescription:"Pijat pasangan memungkinkan dua orang menikmati pengalaman pijat secara bersamaan di ruangan yang sama. Setiap orang menerima terapis mereka sendiri dan dapat memilih jenis pijat dan tekanan yang mereka sukai. Pengalaman bersama ini sempurna untuk pasangan romantis, teman, atau anggota keluarga yang ingin bersantai bersama. Ini cara indah untuk terikat sambil menerima manfaat terapeutik.",benefits:["Pengalaman relaksasi bersama","Waktu ikatan berkualitas","Mengurangi stres bersama","Meningkatkan keintiman","Menciptakan kenangan abadi","Kesehatan bersama"],duration:"60-90 menit",intensity:"Bervariasi",bestFor:["Pasangan","Teman","Acara khusus","Pengalaman ikatan"]},"Chair Massage":{shortDescription:"Pijat duduk cepat berfokus pada leher, bahu, punggung, dan lengan.",fullDescription:"Pijat kursi adalah pijat nyaman berpakaian yang dilakukan saat Anda duduk di kursi pijat yang dirancang khusus. Berfokus pada leher, bahu, punggung, lengan, dan tangan, pijat cepat namun efektif ini sempurna untuk orang sibuk yang memerlukan ketenangan tanpa komitmen waktu pijat lengkap. Populer dalam program kesehatan tempat kerja dan acara.",benefits:["Menghilangkan stres cepat","Meredakan ketegangan tubuh bagian atas","Meningkatkan fokus","Meningkatkan energi","Nyaman","Tidak perlu membuka pakaian"],duration:"15-30 menit",intensity:"Sedang",bestFor:["Profesional sibuk","Ketenangan cepat","Kesehatan tempat kerja","Acara"]},"Myofascial Release":{shortDescription:"Teknik menargetkan fasia untuk meningkatkan fleksibilitas dan mengurangi nyeri kronis.",fullDescription:"Pelepasan myofascial berfokus pada melepaskan ketegangan di fasia, jaringan ikat yang mengelilingi otot dan organ. Menggunakan tekanan berkelanjutan dan teknik peregangan, terapi ini membantu melepaskan pembatasan dalam sistem fascial yang dapat menyebabkan nyeri dan membatasi gerakan. Sangat efektif untuk kondisi nyeri kronis, masalah postural, dan pemulihan dari cedera.",benefits:["Meredakan nyeri kronis","Meningkatkan fleksibilitas","Meningkatkan postur","Mengurangi ketegangan otot","Meningkatkan gerakan","Mempercepat pemulihan cedera"],duration:"60-90 menit",intensity:"Sedang",bestFor:["Nyeri kronis","Masalah postural","Pemulihan cedera","Fleksibilitas"]},"Javanese Massage":{shortDescription:"Pijat penyembuhan Indonesia lembut berfokus pada aliran energi dan kesehatan holistik.",fullDescription:"Pijat Jawa adalah teknik penyembuhan tradisional Indonesia yang berfokus pada gerakan lembut dan berirama untuk mempromosikan aliran energi dan keseimbangan di seluruh tubuh. Gaya pijat ini menggunakan tekanan lebih ringan dibandingkan dengan pijat Bali, menggabungkan elemen meditasi dan spiritualitas. Terapis menggunakan tangan, ibu jari, dan kadang-kadang siku untuk bekerja pada garis energi dan titik tekanan, mempromosikan relaksasi mendalam dan kedamaian batin.",benefits:["Mempromosikan keseimbangan energi","Mengurangi stres","Meningkatkan sirkulasi","Meningkatkan kesehatan spiritual","Relaksasi otot lembut","Menenangkan pikiran"],duration:"60-90 menit",intensity:"Ringan",bestFor:["Menghilangkan stres","Penyembuhan energi","Relaksasi lembut","Kesehatan holistik"]},"Traditional Massage":{shortDescription:"Teknik pijat klasik menggunakan gerakan panjang dan mengalir untuk merelaksasi otot dan meningkatkan sirkulasi.",fullDescription:"Pijat tradisional mencakup teknik yang telah teruji waktu yang diwariskan melalui generasi. Menggunakan kombinasi meremas, membelai, dan tekanan, gaya pijat ini mempromosikan relaksasi, meningkatkan sirkulasi, dan meredakan ketegangan otot. Ini pendekatan serbaguna yang dapat disesuaikan dengan kebutuhan dan preferensi individu.",benefits:["Mengurangi ketegangan otot","Meningkatkan sirkulasi","Mempromosikan relaksasi","Meredakan stres","Meningkatkan kesejahteraan secara keseluruhan","Pendekatan serbaguna"],duration:"60-90 menit",intensity:"Sedang",bestFor:["Kesehatan umum","Relaksasi","Menghilangkan stres","Semua tingkat"]},"Back Massage":{shortDescription:"Terapi pijat terkonsentrasi menargetkan otot punggung dan area tulang belakang.",fullDescription:"Pijat punggung berfokus khusus pada punggung, bahu, dan leher - area yang umumnya menahan ketegangan dan stres. Menggunakan berbagai teknik termasuk meremas, kompresi, dan peregangan, perawatan yang ditargetkan ini meredakan nyeri punggung, memperbaiki postur, dan mengurangi kekakuan otot. Sempurna untuk mereka yang menghabiskan berjam-jam duduk atau memiliki ketidaknyamanan punggung kronis.",benefits:["Meredakan nyeri punggung","Mengurangi kekakuan otot","Memperbaiki postur","Meningkatkan fleksibilitas","Mengurangi stres","Meningkatkan mobilitas"],duration:"30-45 menit",intensity:"Sedang",bestFor:["Nyeri punggung","Postur buruk","Pekerja meja","Ketegangan tubuh bagian atas"]},"Foot Massage":{shortDescription:"Pijat terapeutik berfokus pada kaki untuk meredakan ketegangan dan meningkatkan sirkulasi.",fullDescription:"Pijat kaki menargetkan kaki dan betis bawah, memberikan ketenangan dari kaki lelah dan sakit sambil meningkatkan sirkulasi keseluruhan. Perawatan ini menggabungkan teknik pijat dengan prinsip refleksologi, merangsang titik refleks yang sesuai dengan sistem tubuh yang berbeda. Sempurna setelah hari panjang berdiri atau berjalan.",benefits:["Meredakan nyeri kaki","Meningkatkan sirkulasi","Mengurangi pembengkakan","Mempromosikan relaksasi","Tidur lebih baik","Kesehatan menyeluruh"],duration:"30-45 menit",intensity:"Ringan",bestFor:["Kaki lelah","Sirkulasi buruk","Pekerja berdiri","Relaksasi"]},"Four Hands Massage":{shortDescription:"Dua terapis bekerja secara bersamaan untuk pengalaman relaksasi yang mendalam.",fullDescription:"Pijat empat tangan menampilkan dua terapis bekerja dalam harmoni yang disinkronkan untuk menciptakan pengalaman unik dan sangat menenangkan. Dengan dua kali tangan bekerja secara bersamaan, pijat ini memberikan dua kali input sensorik, membuat pikiran Anda tidak mungkin melacak setiap gerakan, memungkinkan Anda sepenuhnya melepaskan dan bersantai. Gerakan yang disinkronkan menciptakan pengalaman yang mengalir dan berirama.",benefits:["Relaksasi mendalam","Pengalaman sensorik unik","Mengurangi otot lebih cepat","Meningkatkan sirkulasi","Pelarian mental","Perawatan mewah"],duration:"60-90 menit",intensity:"Bervariasi",bestFor:["Acara khusus","Relaksasi mendalam","Pengalaman mewah","Pelarian lengkap"]},"Cupping Therapy":{shortDescription:"Terapi tradisional menggunakan cangkir hisap untuk meningkatkan aliran darah dan melepaskan ketegangan otot.",fullDescription:"Terapi bekam adalah praktik kuno yang menggunakan cangkir khusus ditempatkan di kulit untuk menciptakan hisapan. Hisapan ini menarik darah ke permukaan, meningkatkan sirkulasi dan membantu melepaskan otot dan fasia yang ketat. Cangkir dapat dibiarkan di tempatnya atau dipindahkan untuk memijat area. Sementara itu mungkin meninggalkan bekas sementara, bekam efektif untuk ketenangan nyeri dan pemulihan otot.",benefits:["Meredakan ketegangan otot","Meningkatkan aliran darah","Mengurangi peradangan","Mempromosikan penyembuhan","Melepaskan racun","Ketenangan nyeri"],duration:"30-45 menit",intensity:"Sedang",bestFor:["Nyeri otot","Pemulihan olahraga","Nyeri kronis","Sirkulasi yang ditingkatkan"]},"Scrub & Massage":{shortDescription:"Lulur tubuh eksfoliasi diikuti dengan pijat relaksasi untuk kulit halus dan diremajakan.",fullDescription:"Perawatan mewah ini menggabungkan manfaat eksfoliasi dengan terapi pijat. Dimulai dengan lulur seluruh tubuh menggunakan bahan alami untuk menghilangkan sel kulit mati, diikuti dengan bilas menyeluruh dan kemudian pijat relaksasi. Hasilnya adalah kulit halus seperti sutra dan bercahaya dikombinasikan dengan relaksasi otot yang mendalam. Sempurna untuk acara khusus atau perawatan diri.",benefits:["Kulit halus dan bercahaya","Menghilangkan sel kulit mati","Relaksasi mendalam","Meningkatkan sirkulasi","Melembut kulit","Pengalaman mewah"],duration:"90-120 menit",intensity:"Ringan",bestFor:["Perawatan kulit","Acara khusus","Perawatan mewah","Memanjakan lengkap"]},"Oil Massage":{shortDescription:"Pijat seluruh tubuh menggunakan minyak terapeutik hangat untuk relaksasi mendalam dan nutrisi.",fullDescription:"Pijat minyak menggunakan minyak terapeutik hangat untuk menutrisi kulit sambil memberikan relaksasi mendalam. Minyak memungkinkan gerakan meluncur halus yang menembus jauh ke dalam otot. Minyak yang berbeda dapat dipilih berdasarkan jenis kulit dan kebutuhan terapeutik - minyak kelapa untuk hidrasi, minyak wijen untuk kehangatan, atau minyak aromatik untuk manfaat tambahan.",benefits:["Relaksasi otot mendalam","Menutrisi kulit","Meningkatkan sirkulasi","Mengurangi gesekan","Manfaat aromaterapi","Gerakan meluncur halus"],duration:"60-90 menit",intensity:"Sedang",bestFor:["Relaksasi","Nutrisi kulit","Ketegangan otot","Kesehatan menyeluruh"]},"Dry Massage":{shortDescription:"Pijat dilakukan tanpa minyak, berfokus pada titik tekanan dan manipulasi otot.",fullDescription:"Pijat kering dilakukan tanpa minyak atau lotion, berfokus pada manipulasi otot langsung, pekerjaan titik tekanan, dan peregangan. Teknik ini memungkinkan penargetan otot dan titik pemicu spesifik yang lebih tepat. Umum dalam pijat Thai dan pijat olahraga, pijat kering ideal untuk mereka yang lebih suka tidak menggunakan minyak atau memerlukan pekerjaan terapeutik yang fokus.",benefits:["Pekerjaan otot yang ditargetkan","Tanpa residu minyak","Aplikasi tekanan yang tepat","Meningkatkan fleksibilitas","Melepaskan titik pemicu","Cocok untuk semua jenis kulit"],duration:"60-90 menit",intensity:"Kuat",bestFor:["Terapi yang ditargetkan","Pemulihan olahraga","Titik pemicu","Preferensi tanpa minyak"]}}}},ed={en:{jobs:{description:"Showcase your availability for employment or offer your massage services to be discovered by local and international massage spas",jobsForOffer:"üíº Jobs for Offer",therapistSeeking:"üë®‚Äç‚öïÔ∏è Therapist Seeking Jobs",postJob:"Post Job",createProfile:"Create Profile",jobsFound:"job",jobsFoundPlural:"jobs",found:"found",loadingJobs:"Loading job opportunities...",loadingProfiles:"Loading therapist profiles...",noJobsFound:"No job postings found",noJobsDesc:"Try adjusting your search or filters",noTherapistsYet:"No Therapist Profiles Yet",noTherapistsDesc:"Be the first to create your professional profile and connect with employers!",createProfileNow:"Create Your Profile Now",ctaTitle:"Are you a Massage Therapist?",ctaDescription:"Create your professional profile and connect with employers",ctaButton:"Create Your Profile",positions:"Position",positionsPlural:"Positions",available:"Available",salaryRange:"SALARY RANGE",accommodationProvided:"Accommodation Provided",transportationProvided:"Transportation Provided",flightPaid:"Flight Paid",localTransportPaid:"Local Transport Paid",flightAndTransportPaid:"Flight & Transport Paid",cvRequired:"CV Required",flightsPaidByEmployer:"Flights Paid By Employer",visaArrangedByEmployer:"Visa Arranged By Employer",massageTypesRequired:"MASSAGE TYPES REQUIRED:",languagesRequired:"LANGUAGES REQUIRED:",noMassageTypes:"‚ö†Ô∏è No massage types specified for this posting",noLanguages:"‚ö†Ô∏è No languages specified for this posting",benefits:"BENEFITS:",unlockDetails:"Upgrade To Unlock Details",more:"more",seekingJobs:"üîç Seeking Jobs",personalInfo:"PERSONAL INFORMATION:",massageSkills:"MY MASSAGE SKILL:",workedAbroad:"‚úàÔ∏è Worked Abroad",hasReferences:"‚úì Has References",currentlyWorking:"üíº Currently Working",experience:"Experience:",years:"years",expectedSalary:"Expected Salary:",preferredLocations:"üìç PREFERRED LOCATIONS:",availableForHire:"Available for Hire",openToOpportunities:"Currently working but open to opportunities",contactToHire:"Contact to Hire",experienced:"Experienced",basicSkill:"Basic Skill",requireTraining:"Require Training",clinic:"Clinic",hotel:"Hotel",spa:"Spa",wellnessCenter:"Wellness Center",resort:"Resort",homeService:"Home Service",other:"Other",fullTime:"Full Time",partTime:"Part Time",contract:"Contract",freelance:"Freelance",shareJob:"Check out this",positionAt:"position at",linkCopied:"Link copied! You can now paste it in",employerAccessTitle:"Want to hire? Contact every professional on this page",employerAccessDescription:"One-time fee for 1 month. You get full access to every job seeker listed here: detailed professional profiles, experience and skills, direct WhatsApp number for each therapist, and in most cases their CV or resume. Reach out to as many as you need to find the right fit.",employerAccessFeeLabel:"One-time fee",employerAccessDuration:"1 month",employerAccessCta:"Get access"}},id:{jobs:{description:"Tampilkan ketersediaan Anda untuk pekerjaan atau tawarkan layanan pijat Anda untuk ditemukan oleh spa pijat lokal dan internasional",jobsForOffer:"üíº Lowongan Kerja",therapistSeeking:"üë®‚Äç‚öïÔ∏è Terapis Mencari Kerja",postJob:"Pasang Lowongan",createProfile:"Buat Profil",jobsFound:"lowongan",jobsFoundPlural:"lowongan",found:"ditemukan",loadingJobs:"Memuat lowongan kerja...",loadingProfiles:"Memuat profil terapis...",noJobsFound:"Tidak ada lowongan ditemukan",noJobsDesc:"Coba sesuaikan pencarian atau filter Anda",noTherapistsYet:"Belum Ada Profil Terapis",noTherapistsDesc:"Jadilah yang pertama membuat profil profesional Anda dan terhubung dengan pemberi kerja!",createProfileNow:"Buat Profil Anda Sekarang",ctaTitle:"Apakah Anda Seorang Terapis Pijat?",ctaDescription:"Buat profil profesional Anda dan terhubung dengan pemberi kerja",ctaButton:"Buat Profil Anda",positions:"Posisi",positionsPlural:"Posisi",available:"Tersedia",salaryRange:"RENTANG GAJI",accommodationProvided:"Akomodasi Disediakan",transportationProvided:"Transportasi Disediakan",flightPaid:"Tiket Pesawat Dibayar",localTransportPaid:"Transportasi Lokal Dibayar",flightAndTransportPaid:"Pesawat & Transportasi Dibayar",cvRequired:"CV Diperlukan",flightsPaidByEmployer:"Tiket Pesawat Dibayar Pemberi Kerja",visaArrangedByEmployer:"Visa Diatur Pemberi Kerja",massageTypesRequired:"JENIS PIJAT DIPERLUKAN:",languagesRequired:"BAHASA DIPERLUKAN:",noMassageTypes:"‚ö†Ô∏è Tidak ada jenis pijat yang ditentukan untuk lowongan ini",noLanguages:"‚ö†Ô∏è Tidak ada bahasa yang ditentukan untuk lowongan ini",benefits:"MANFAAT:",unlockDetails:"Upgrade Untuk Membuka Detail",more:"lainnya",seekingJobs:"üîç Mencari Kerja",personalInfo:"INFORMASI PRIBADI:",massageSkills:"KEMAMPUAN PIJAT SAYA:",workedAbroad:"‚úàÔ∏è Pernah Bekerja di Luar Negeri",hasReferences:"‚úì Memiliki Referensi",currentlyWorking:"üíº Sedang Bekerja",experience:"Pengalaman:",years:"tahun",expectedSalary:"Gaji yang Diharapkan:",preferredLocations:"üìç LOKASI YANG DISUKAI:",availableForHire:"Tersedia untuk Dipekerjakan",openToOpportunities:"Sedang bekerja tetapi terbuka untuk peluang",contactToHire:"Hubungi untuk Mempekerjakan",experienced:"Berpengalaman",basicSkill:"Kemampuan Dasar",requireTraining:"Memerlukan Pelatihan",clinic:"Klinik",hotel:"Hotel",spa:"Spa",wellnessCenter:"Pusat Kesehatan",resort:"Resor",homeService:"Layanan Rumah",other:"Lainnya",fullTime:"Penuh Waktu",partTime:"Paruh Waktu",contract:"Kontrak",freelance:"Lepas",shareJob:"Lihat posisi",positionAt:"ini di",linkCopied:"Tautan disalin! Anda sekarang dapat menempelkannya di",employerAccessTitle:"Ingin merekrut? Hubungi setiap profesional di halaman ini",employerAccessDescription:"Biaya satu kali untuk 1 bulan. Anda mendapat akses penuh ke setiap pencari kerja di sini: profil profesional lengkap, pengalaman dan keahlian, nomor WhatsApp langsung setiap terapis, dan dalam banyak kasus CV/resume mereka. Hubungi sebanyak yang Anda butuhkan untuk menemukan kandidat yang tepat.",employerAccessFeeLabel:"Biaya satu kali",employerAccessDuration:"1 bulan",employerAccessCta:"Dapatkan akses"}}},td={en:{partners:{pageTitle:"Partners",heroDescription:"Discover hotels and villas offering 24-hour massage services. You can be assured of the highest quality massage service when staying at the hotels and villas listed on IndaStreet. Each has been carefully selected to facilitate the IndaStreet brand.",verifiedPartners:"Verified Partners",liveWebsitePreviews:"Live Website Previews",qualityAssured:"Quality Assured",searchPlaceholder:"Search partners by name, location...",totalPartners:"Total Partners",verified:"Verified",allPartners:"All Partners",indastreetTherapists:"Indastreet Therapists",indastreetMassagePlaces:"Indastreet Massage Places",indastreetHotels:"Indastreet Hotels",indastreetVillas:"Indastreet Villas",showing:"Showing",results:"results",noPartnersFound:"No partners found",noPartnersDescription:"Try adjusting your search terms",verifiedPartner:"Verified",phone:"Phone",location:"Location",added:"Partner since",visitWebsite:"Visit Website",specialties:"Specialties",loadingPartners:"Loading Indastreet Partners..."}},id:{partners:{pageTitle:"Mitra",heroDescription:"Temukan hotel dan villa yang menawarkan layanan pijat 24 jam. Anda dapat yakin akan layanan pijat berkualitas tertinggi saat menginap di hotel dan villa yang terdaftar di IndaStreet. Masing-masing telah dipilih dengan cermat untuk memfasilitasi brand IndaStreet.",verifiedPartners:"Mitra Terverifikasi",liveWebsitePreviews:"Pratinjau Website Langsung",qualityAssured:"Kualitas Terjamin",searchPlaceholder:"Cari mitra berdasarkan nama, lokasi...",totalPartners:"Total Mitra",verified:"Terverifikasi",allPartners:"Semua Mitra",indastreetTherapists:"Terapis Indastreet",indastreetMassagePlaces:"Tempat Pijat Indastreet",indastreetHotels:"Hotel Indastreet",indastreetVillas:"Villa Indastreet",showing:"Menampilkan",results:"hasil",noPartnersFound:"Tidak ada mitra ditemukan",noPartnersDescription:"Coba sesuaikan kata kunci pencarian Anda",verifiedPartner:"Terverifikasi",phone:"Telepon",location:"Lokasi",added:"Mitra sejak",visitWebsite:"Kunjungi Website",specialties:"Spesialisasi",loadingPartners:"Memuat Mitra Indastreet..."}}},ad={en:{companyProfile:{contact:{title:"Get in Touch",description:"We would love to hear from you and discuss your marketing promotional ideas and our team will always provide the best knowledge for your business needs."}}},id:{companyProfile:{contact:{title:"Hubungi Kami",description:"Kami ingin mendengar dari Anda dan mendiskusikan ide-ide promosi pemasaran Anda. Tim kami akan selalu memberikan pengetahuan terbaik untuk kebutuhan bisnis Anda."}}}},nd={en:{reviews:{customerReviews:"Customer Reviews",leaveReview:"Leave a Review",writeYourReview:"Write Your Review",writeReview:"Write a Review",disclaimer:"If you feel the service that was offered was not to your satisfaction, we kindly ask you first make contact with the owner as this would be addressed with immediate effect. And send a direct message to the highest authority to make them aware of areas of improvement.",yourName:"Your Name",yourNamePlaceholder:"Enter your full name",whatsappNumber:"WhatsApp Number",whatsappNumberPlaceholder:"+62 812 3456 7890",rating:"Rating",yourReview:"Your Review",reviewPlaceholder:"Tell us about your experience...",chooseAvatar:"Choose Your Avatar",submitReview:"Submit Review",submitting:"Submitting...",stars:"Stars",star:"Star",characters:"characters",nameRequired:"Please enter your name",whatsappRequired:"Please enter your WhatsApp number",whatsappInvalid:"Please enter a valid WhatsApp number (10-15 digits)",ratingRequired:"Please select a star rating",reviewRequired:"Please write your review",reviewMinLength:"Review must be at least 10 characters",avatarRequired:"Please select an avatar",review:"review",reviewsCount:"reviews",averageRating:"Average Rating",noReviews:"No reviews yet",beFirstReview:"Be the first to share your experience with",thankYou:"Thank you for your review!",reviewSubmitted:"Your review has been submitted successfully."}},id:{reviews:{customerReviews:"Ulasan Pelanggan",leaveReview:"Tulis Ulasan",writeYourReview:"Tulis Ulasan Anda",writeReview:"Tulis Ulasan",disclaimer:"Jika Anda merasa layanan yang ditawarkan tidak memuaskan, kami mohon Anda terlebih dahulu menghubungi pemilik karena hal ini akan segera ditangani. Dan kirim pesan langsung ke pihak tertinggi untuk memberi tahu mereka tentang area yang perlu diperbaiki.",yourName:"Nama Anda",yourNamePlaceholder:"Masukkan nama lengkap Anda",whatsappNumber:"Nomor WhatsApp",whatsappNumberPlaceholder:"+62 812 3456 7890",rating:"Penilaian",yourReview:"Ulasan Anda",reviewPlaceholder:"Ceritakan pengalaman Anda...",chooseAvatar:"Pilih Avatar Anda",submitReview:"Kirim Ulasan",submitting:"Mengirim...",stars:"Bintang",star:"Bintang",characters:"karakter",nameRequired:"Silakan masukkan nama Anda",whatsappRequired:"Silakan masukkan nomor WhatsApp Anda",whatsappInvalid:"Silakan masukkan nomor WhatsApp yang valid (10-15 digit)",ratingRequired:"Silakan pilih rating bintang",reviewRequired:"Silakan tulis ulasan Anda",reviewMinLength:"Ulasan harus minimal 10 karakter",avatarRequired:"Silakan pilih avatar",review:"ulasan",reviewsCount:"ulasan",averageRating:"Rating Rata-rata",noReviews:"Belum ada ulasan",beFirstReview:"Jadilah yang pertama berbagi pengalaman Anda dengan",thankYou:"Terima kasih atas ulasan Anda!",reviewSubmitted:"Ulasan Anda telah berhasil dikirim."}}},sd={en:{membership:{chooseYourMembership:"Choose Your Membership",simplePricing:"Simple pricing. Start earning today.",chooseBusinessType:"Choose Your Business Type",selectedPlan:"Selected",proPlan:"Pro Plan",plusPlan:"Plus Plan",payPerLead:"Pay Per Lead",proTitle:"Pro",proDescription:"Great for starting out. Only pay when you get bookings",proMonthlyFee:"Rp 0",perMonth:"/month",commissionRate:"30%",commissionPerBooking:"commission per booking",zeroUpfrontCost:"Zero upfront cost",startImmediately:"Start immediately",payOnlyOnSuccess:"Pay only on success",perBooking:"per booking",fullProfileWithPhotos:"Full profile with photos & services",customerChatBooking:"Customer chat & booking system",leadGenerationIncluded:"Lead generation included",selectProPlan:"Select Pro Plan",perfectFor:"Perfect for:",independentTherapists:"Independent Therapists",startingOut:"Starting Out",lowRisk:"Low Risk",mostPopular:"Most Popular",plusTitle:"Plus",plusDescription:"All-in premium membership. Keep 100% of bookings",plusMonthlyFee:"Rp 250K",zeroCommission:"0% Commission - Keep Everything",zeroCommissionKeep:"Zero commission",keep100Percent:"Keep 100% of earnings",verifiedBadge:"Verified badge",onYourProfile:"on your profile",priorityHotelVilla:"Priority Hotel, Villa & Private Spa",serviceRequests:"service requests",fullPriceMenu:"Full price menu",displayedOnCard:"displayed on your card",liveDiscount:"Live discount",promotionsSystem:"promotions system",unlimitedLeads:"Unlimited leads & advanced analytics",selectPlusPlan:"Select Plus Plan",spasAndClinics:"Spas & Clinics",highVolume:"High Volume",maximumEarnings:"Maximum Earnings",agreeToTerms:"I agree to the",termsAndConditions:"Terms & Conditions",acceptTermsWarning:"Accept the terms before selecting this plan.",therapistPortal:"Therapist Portal",therapistPortalDesc:"For independent massage therapists",manageBookings:"Manage bookings",setYourRates:"Set your rates",trackEarnings:"Track earnings",massagePlacePortal:"Massage Place Portal",massagePlacePortalDesc:"For massage spas and wellness centers",manageYourSpa:"Manage your spa",multipleTherapists:"Multiple therapists",businessAnalytics:"Business analytics",facialPlacePortal:"Facial Place Portal",facialPlacePortalDesc:"For facial spas and beauty centers",facialServices:"Facial services",beautyTreatments:"Beauty treatments",spaManagement:"Spa management",continueToRegistration:"Continue to Registration",copyright:"¬© 2026 IndaStreet. All rights reserved."},packageTerms:{back:"Back",backToHome:"Back to Home",termsAndConditions:"Terms & Conditions",byAccepting:"By accepting, you agree to these terms",cancel:"Cancel",iAccept:"I Accept",proMembershipConnects:"Pro membership connects you to IndaStreet customers. Earn 70% of every confirmed booking.",criticalComplianceNotice:"Critical Compliance Notice",criticalComplianceText:"Violating platform rules results in immediate termination with no refund. Keep all communications, bookings, and payments inside the platform.",commissionFramework:"Commission Framework",commission30Percent:"30% processing fee per completed booking ‚Äî pay within 3 hours of receiving each lead",latePaymentFreeze:"Late or missing payments trigger instant account freeze",consistentLatePayments:"Consistent late payments lead to permanent removal",platformExclusivityRules:"Platform Exclusivity Rules",prohibitedActions:"The following actions are strictly prohibited:",noSharingPersonalContact:"Sharing personal WhatsApp, phone, or social media with platform customers",noCashPayments:"Accepting cash or direct transfers outside IndaStreet payment flow",noOffPlatformBookings:"Encouraging customers to rebook privately or promise better prices off-platform",offPlatformTermination:"Off-platform activity leads to instant termination and blacklisting.",paymentTiming:"Payment Timing",confirmWithin3Hours:"Confirm commission payment within 3 hours of lead notification",haveFundsReady:"Have funds ready before appointments ‚Äî frozen accounts cannot accept bookings",keepReceipts:"Keep payment receipts for audits",support:"Support",supportText:"Email-based assistance with up to 72-hour response window. Plus members are prioritized.",accountPlanChanges:"Account & Plan Changes",clearDebts:"Clear all debts before activating or upgrading",investigationNoChange:"Accounts under investigation cannot change tiers",changesNextCycle:"Changes take effect next billing cycle",proMembershipSummary:"Pro Membership Summary",monthlyFee:"Monthly Fee",commission:"Commission",paymentWindow:"Payment Window",supportSLA:"Support SLA",hours3:"3 hours",hours72:"72 hours",plusMembershipFull:"Plus membership gives you full control. Fixed monthly fee, keep 100% of bookings, premium placement.",coreInclusions:"Core Inclusions",rp250kMonth:"Rp 250,000/month with",zeroCommissionBooking:"0% commission",onEveryBooking:"on every booking",verifiedBadgePremium:"Verified badge and premium search placement",advancedAnalytics:"Advanced analytics and shareable profile links",prioritySupport:"Priority customer support",priorityAccessHotels:"Priority access to Hotels, Villas & Private Spa Resort service requests",addFullPriceMenu:"Add your full price menu with unlimited services",paymentSchedule:"Payment Schedule",noContractCommitment:"No contract commitment",dueOnFirst:"Due on the 1st, grace period until the 5th",lateFee25k:"Rp 25,000 late fee applies (administration)",growthTools:"Growth Tools",growthToolsText:"Campaign banners, promo codes, featured placements. Track every click, booking, and customer source.",prioritySupportTitle:"Priority Support",prioritySupportText:"Dedicated email support with priority routing and faster response times.",accountReadiness:"Account Readiness",clearInvoices:"Clear all outstanding invoices before activating",healthyCompliance:"Maintain healthy compliance record",completeProfile:"Complete profile with services, pricing, and photos",plusMembershipSummary:"Plus Membership Summary",commitment:"Commitment",noContract:"No contract",lateFee:"Late Fee",priority:"Priority",hotelsVillasSpas:"Hotels, Villas, Spas"},drawer:{menu:"Menu",home:"Home",profile:"Profile",bookings:"Bookings",notifications:"Notifications",settings:"Settings",help:"Help",logout:"Logout",login:"Login",register:"Register",therapistPortal:"Therapist Portal",massagePlacePortal:"Massage Place Portal",facialPortal:"Facial Portal",adminPortal:"Admin Portal",termsOfService:"Terms of Service",privacyPolicy:"Privacy Policy",language:"Language",english:"English",indonesian:"Indonesian",darkMode:"Dark Mode",lightMode:"Light Mode",joinFree:"Join Free",browseJobs:"Browse Jobs",postJob:"Post a Job",massageJobs:"Job Positions",therapistJobs:"Therapist Jobs",aboutUs:"About Us",contactUs:"Contact Us",faq:"FAQ",reviews:"Reviews",partners:"Partners",discounts:"Today's Discounts"}},id:{membership:{chooseYourMembership:"Pilih Keanggotaan Anda",simplePricing:"Harga sederhana. Mulai dapatkan penghasilan hari ini.",chooseBusinessType:"Pilih Jenis Bisnis Anda",selectedPlan:"Dipilih",proPlan:"Paket Pro",plusPlan:"Paket Plus",payPerLead:"Bayar Per Lead",proTitle:"Pro",proDescription:"Cocok untuk memulai. Hanya bayar saat ada pemesanan",proMonthlyFee:"Rp 0",perMonth:"/bulan",commissionRate:"30%",commissionPerBooking:"komisi per pemesanan",zeroUpfrontCost:"Tanpa biaya di muka",startImmediately:"Mulai segera",payOnlyOnSuccess:"Bayar hanya saat sukses",perBooking:"per pemesanan",fullProfileWithPhotos:"Profil lengkap dengan foto & layanan",customerChatBooking:"Chat & sistem pemesanan pelanggan",leadGenerationIncluded:"Generasi lead termasuk",selectProPlan:"Pilih Paket Pro",perfectFor:"Cocok untuk:",independentTherapists:"Terapis Mandiri",startingOut:"Baru Memulai",lowRisk:"Risiko Rendah",mostPopular:"Paling Populer",plusTitle:"Plus",plusDescription:"Keanggotaan premium all-in. Simpan 100% pemesanan",plusMonthlyFee:"Rp 250K",zeroCommission:"0% Komisi - Simpan Semuanya",zeroCommissionKeep:"Tanpa komisi",keep100Percent:"Simpan 100% pendapatan",verifiedBadge:"Lencana terverifikasi",onYourProfile:"di profil Anda",priorityHotelVilla:"Prioritas Hotel, Vila & Spa Pribadi",serviceRequests:"permintaan layanan",fullPriceMenu:"Menu harga lengkap",displayedOnCard:"ditampilkan di kartu Anda",liveDiscount:"Diskon langsung",promotionsSystem:"sistem promosi",unlimitedLeads:"Lead tak terbatas & analitik lanjutan",selectPlusPlan:"Pilih Paket Plus",spasAndClinics:"Spa & Klinik",highVolume:"Volume Tinggi",maximumEarnings:"Pendapatan Maksimal",agreeToTerms:"Saya setuju dengan",termsAndConditions:"Syarat & Ketentuan",acceptTermsWarning:"Terima syarat sebelum memilih paket ini.",therapistPortal:"Portal Terapis",therapistPortalDesc:"Untuk terapis pijat mandiri",manageBookings:"Kelola pemesanan",setYourRates:"Atur tarif Anda",trackEarnings:"Lacak pendapatan",massagePlacePortal:"Portal Tempat Pijat",massagePlacePortalDesc:"Untuk spa pijat dan pusat kesehatan",manageYourSpa:"Kelola spa Anda",multipleTherapists:"Banyak terapis",businessAnalytics:"Analitik bisnis",facialPlacePortal:"Portal Tempat Facial",facialPlacePortalDesc:"Untuk spa facial dan pusat kecantikan",facialServices:"Layanan facial",beautyTreatments:"Perawatan kecantikan",spaManagement:"Manajemen spa",continueToRegistration:"Lanjut ke Pendaftaran",copyright:"¬© 2026 IndaStreet. Hak cipta dilindungi."},packageTerms:{back:"Kembali",backToHome:"Kembali ke Beranda",termsAndConditions:"Syarat & Ketentuan",byAccepting:"Dengan menerima, Anda menyetujui syarat-syarat ini",cancel:"Batal",iAccept:"Saya Terima",proMembershipConnects:"Keanggotaan Pro menghubungkan Anda dengan pelanggan IndaStreet. Dapatkan 70% dari setiap pemesanan yang dikonfirmasi.",criticalComplianceNotice:"Pemberitahuan Kepatuhan Penting",criticalComplianceText:"Melanggar aturan platform mengakibatkan penghentian segera tanpa pengembalian dana. Jaga semua komunikasi, pemesanan, dan pembayaran di dalam platform.",commissionFramework:"Kerangka Komisi",commission30Percent:"Biaya pemrosesan 30% per pemesanan selesai ‚Äî bayar dalam 3 jam setelah menerima lead",latePaymentFreeze:"Pembayaran terlambat atau tidak ada memicu pembekuan akun langsung",consistentLatePayments:"Pembayaran terlambat konsisten menyebabkan penghapusan permanen",platformExclusivityRules:"Aturan Eksklusivitas Platform",prohibitedActions:"Tindakan berikut dilarang keras:",noSharingPersonalContact:"Berbagi WhatsApp pribadi, telepon, atau media sosial dengan pelanggan platform",noCashPayments:"Menerima uang tunai atau transfer langsung di luar alur pembayaran IndaStreet",noOffPlatformBookings:"Mendorong pelanggan untuk memesan ulang secara pribadi atau menjanjikan harga lebih baik di luar platform",offPlatformTermination:"Aktivitas di luar platform menyebabkan penghentian dan daftar hitam langsung.",paymentTiming:"Waktu Pembayaran",confirmWithin3Hours:"Konfirmasi pembayaran komisi dalam 3 jam setelah notifikasi lead",haveFundsReady:"Siapkan dana sebelum janji temu ‚Äî akun beku tidak dapat menerima pemesanan",keepReceipts:"Simpan bukti pembayaran untuk audit",support:"Dukungan",supportText:"Bantuan berbasis email dengan jendela respons hingga 72 jam. Anggota Plus diprioritaskan.",accountPlanChanges:"Perubahan Akun & Paket",clearDebts:"Lunasi semua utang sebelum mengaktifkan atau upgrade",investigationNoChange:"Akun dalam investigasi tidak dapat mengubah tingkat",changesNextCycle:"Perubahan berlaku siklus penagihan berikutnya",proMembershipSummary:"Ringkasan Keanggotaan Pro",monthlyFee:"Biaya Bulanan",commission:"Komisi",paymentWindow:"Jendela Pembayaran",supportSLA:"SLA Dukungan",hours3:"3 jam",hours72:"72 jam",plusMembershipFull:"Keanggotaan Plus memberi Anda kontrol penuh. Biaya bulanan tetap, simpan 100% pemesanan, penempatan premium.",coreInclusions:"Inklusif Inti",rp250kMonth:"Rp 250.000/bulan dengan",zeroCommissionBooking:"0% komisi",onEveryBooking:"di setiap pemesanan",verifiedBadgePremium:"Lencana terverifikasi dan penempatan pencarian premium",advancedAnalytics:"Analitik lanjutan dan tautan profil yang dapat dibagikan",prioritySupport:"Dukungan pelanggan prioritas",priorityAccessHotels:"Akses prioritas ke permintaan layanan Hotel, Vila & Resor Spa Pribadi",addFullPriceMenu:"Tambahkan menu harga lengkap Anda dengan layanan tak terbatas",paymentSchedule:"Jadwal Pembayaran",noContractCommitment:"Tanpa komitmen kontrak",dueOnFirst:"Jatuh tempo tanggal 1, masa tenggang hingga tanggal 5",lateFee25k:"Biaya keterlambatan Rp 25.000 berlaku (administrasi)",growthTools:"Alat Pertumbuhan",growthToolsText:"Banner kampanye, kode promo, penempatan unggulan. Lacak setiap klik, pemesanan, dan sumber pelanggan.",prioritySupportTitle:"Dukungan Prioritas",prioritySupportText:"Dukungan email khusus dengan routing prioritas dan waktu respons lebih cepat.",accountReadiness:"Kesiapan Akun",clearInvoices:"Lunasi semua faktur terutang sebelum mengaktifkan",healthyCompliance:"Pertahankan catatan kepatuhan yang sehat",completeProfile:"Lengkapi profil dengan layanan, harga, dan foto",plusMembershipSummary:"Ringkasan Keanggotaan Plus",commitment:"Komitmen",noContract:"Tanpa kontrak",lateFee:"Biaya Keterlambatan",priority:"Prioritas",hotelsVillasSpas:"Hotel, Vila, Spa"},drawer:{menu:"Menu",home:"Beranda",profile:"Profil",bookings:"Pemesanan",notifications:"Notifikasi",settings:"Pengaturan",help:"Bantuan",logout:"Keluar",login:"Masuk",register:"Daftar",therapistPortal:"Portal Terapis",massagePlacePortal:"Portal Tempat Pijat",facialPortal:"Portal Facial",adminPortal:"Portal Admin",termsOfService:"Ketentuan Layanan",privacyPolicy:"Kebijakan Privasi",language:"Bahasa",english:"Inggris",indonesian:"Indonesia",darkMode:"Mode Gelap",lightMode:"Mode Terang",joinFree:"Gabung Gratis",browseJobs:"Cari Lowongan",postJob:"Pasang Lowongan",massageJobs:"Lowongan Pijat",therapistJobs:"Lowongan Terapis",aboutUs:"Tentang Kami",contactUs:"Hubungi Kami",faq:"FAQ",reviews:"Ulasan",partners:"Mitra",discounts:"Diskon Hari Ini"}}},id={en:{therapistDashboard:{onlineStatus:"Online Status",yourStatus:"Your Status",manageAvailability:"Manage your availability",accountHealth:"Account Health",currentStatus:"Current Status",available:"Available",busy:"Busy",offline:"Offline",active:"Active",availableDesc:"You are visible and accepting bookings",busyDesc:"Visible but temporarily unavailable",offlineDesc:"Hidden from search, not accepting bookings",setAvailable:"Set Available",setBusy:"Set Busy",setOffline:"Set Offline",updateStatus:"Update Status",saving:"Saving...",profile:"Profile",editProfile:"Edit Profile",viewProfile:"View Profile",yourProfile:"Your Profile",bookings:"Bookings",myBookings:"My Bookings",newBooking:"New Booking",pendingBookings:"Pending Bookings",activeBookings:"Active Bookings",completedBookings:"Completed Bookings",noBookings:"No bookings yet",calendar:"Calendar",schedule:"Schedule",availability:"Availability",notifications:"Notifications",newNotification:"New Notification",noNotifications:"No notifications",chat:"Chat",messages:"Messages",newMessage:"New Message",analytics:"Analytics",earnings:"Earnings",totalEarnings:"Total Earnings",thisMonth:"This Month",settings:"Settings",account:"Account",logout:"Logout",installApp:"Install App",installNow:"INSTALL NOW",downloadApp:"Download App",testNotifications:"TEST NOTIFICATION SOUNDS",forceReinstall:"FORCE REINSTALL",appInstallRequired:"APP INSTALLATION REQUIRED",mustInstallApp:"You must install the app to receive booking notifications with sound!",appInstalled:"App Installed",appInstalledWithNotif:"App Installed with Notifications",installAppForSounds:"Install App for Notification Sounds",readyToReceiveAlerts:"Ready to receive booking alerts with custom sounds",customSoundsRequireInstall:"Required: Custom notification sounds only work in installed app",whyInstallCritical:"Why installation is critical:",customMP3Sounds:"Custom MP3 notification sounds (only in installed app)",backgroundNotif:"Background notifications when phone is locked",strongerVibration:"Stronger vibration patterns for urgent bookings",escalatingAlerts:"3 escalating alerts over 2 minutes",neverMissBookings:"Never miss bookings even when using other apps",forceReinstallFix:"FORCE REINSTALL (Fix Notifications)",reinstallWithSounds:"REINSTALL WITH ENHANCED SOUNDS",installNowForSounds:"INSTALL NOW FOR NOTIFICATION SOUNDS",addToHomeScreenIOS:"ADD TO HOME SCREEN (iOS)",getInstallInstructions:"GET INSTALL INSTRUCTIONS",testNotificationSounds:"TEST NOTIFICATION SOUNDS",appProperlyInstalled:"App is properly installed. Test notifications to ensure sounds work.",browserGenericSounds:"Browser notifications have generic sounds only. Install for custom MP3 alerts!",notInstalledYet:"Not Installed Yet",preview:"Preview",statusUpdated:"Status updated successfully",statusUpdateFailed:"Failed to update status",profileUpdated:"Profile updated successfully",home:"Home",back:"Back",next:"Next",cancel:"Cancel",confirm:"Confirm",save:"Save",delete:"Delete",edit:"Edit",close:"Close",advancedOnlineStatus:"Advanced Online Status",proAccount:"Pro Account (Current)",premiumAccount:"Premium Account (Upgrade)",premiumAccountActive:"Premium Account Active",upgradeToPremium:"Upgrade to Premium",unlimitedBusyStatus:"Unlimited Busy status",autoOfflineTimer:"Auto-Offline Timer",customerWhatsAppAccess:"Customer WhatsApp Access",autoOfflineTimerDesc:"Schedule automatic offline time daily",autoOfflineExplanation:"Set the amount of hours each day you would like to be available online. Once the timer reaches zero, your online status will turn to offline until you select your online status buttons or set the timer once more.",setTime:"Set Time",saveTimer:"Save Timer",cancelTimer:"Cancel Timer",timerActive:"Timer Active",willGoOfflineAt:"Will automatically go offline at",currentTime:"Current time",exampleTime:"Example: Set to 22:00 to automatically go offline at 10 PM every night",premiumFeature:"Premium Feature",autoOfflineTimerLocked:"Upgrade to Premium to schedule automatic offline time daily. Never worry about manually changing your status!",discountBadge:"Discount Badge",discountBadgeDesc:"Add discount badges to your profile",discountBadgeExplanation:"Attract more customers with a discount badge on your profile! Set a discount percentage and duration to display on your listing.",discountPercentage:"Discount Percentage",duration:"Duration",days:"days",startDiscount:"Start Discount",removeDiscount:"Remove Discount",hotelVillaSafePass:"Hotel/Villa Safe Pass",safePassCompliance:"Safe Pass Compliance",safePassDescription:"Get Safe Pass certification for spa services in hotels and villas. Mandatory requirement to provide therapy services at commercial properties.",complianceStatus:"Compliance Status",notCompliant:"Not Compliant",pending:"Pending",compliant:"Compliant",rejected:"Rejected",uploadLetter:"Upload Request Letter",uploadLetterDesc:"Upload official request letter from the hotel/villa requesting your spa services",selectFile:"Select File",uploadedFile:"Uploaded File",downloadLetter:"Download Letter",paymentRequired:"Payment Required",paymentAmount:"Payment Amount",payNow:"Pay Now",paymentCompleted:"Payment Completed",awaitingReview:"Awaiting Review",adminReviewDesc:"Your application is under review by our admin team. You will be notified via email about the final decision.",congratulations:"Congratulations!",safePassApproved:"Your Safe Pass application has been approved. You can now provide spa services at hotels and villas.",applicationRejected:"Application Rejected",rejectionReason:"Rejection Reason",reapply:"Reapply",supportedFormats:"Supported formats: PDF, DOC, DOCX (max. 10MB)",fileUploadSuccess:"File uploaded successfully!",fileUploadError:"Failed to upload file. Please try again.",removeLetterError:"Failed to remove letter. Please try again.",submitApplicationError:"Failed to submit application. Please try again.",paymentSuccess:"Payment successful! Your application will be reviewed shortly.",paymentError:"Payment failed. Please try again.",invalidFile:"Invalid file. Please ensure the format and file size are correct.",uploadInProgress:"Uploading...",processing:"Processing..."}},id:{therapistDashboard:{onlineStatus:"Status Online",yourStatus:"Status Anda",manageAvailability:"Kelola ketersediaan Anda",accountHealth:"Kesehatan Akun",currentStatus:"Status Saat Ini",available:"Tersedia",busy:"Sibuk",offline:"Offline",active:"Aktif",availableDesc:"Anda terlihat dan menerima booking",busyDesc:"Terlihat tapi sementara tidak tersedia",offlineDesc:"Tersembunyi dari pencarian, tidak menerima booking",setAvailable:"Set Tersedia",setBusy:"Set Sibuk",setOffline:"Set Offline",updateStatus:"Perbarui Status",saving:"Menyimpan...",profile:"Profil",editProfile:"Edit Profil",viewProfile:"Lihat Profil",yourProfile:"Profil Anda",bookings:"Booking",myBookings:"Booking Saya",newBooking:"Booking Baru",pendingBookings:"Booking Menunggu",activeBookings:"Booking Aktif",completedBookings:"Booking Selesai",noBookings:"Belum ada booking",calendar:"Kalender",schedule:"Jadwal",availability:"Ketersediaan",notifications:"Notifikasi",newNotification:"Notifikasi Baru",noNotifications:"Tidak ada notifikasi",chat:"Chat",messages:"Pesan",newMessage:"Pesan Baru",analytics:"Analitik",earnings:"Pendapatan",totalEarnings:"Total Pendapatan",thisMonth:"Bulan Ini",settings:"Pengaturan",account:"Akun",logout:"Keluar",installApp:"Install Aplikasi",installNow:"INSTALL SEKARANG",downloadApp:"Download Aplikasi",testNotifications:"TES SUARA NOTIFIKASI",forceReinstall:"PAKSA INSTALL ULANG",appInstallRequired:"INSTALASI APLIKASI DIPERLUKAN",mustInstallApp:"Anda harus install aplikasi untuk menerima notifikasi booking dengan suara!",appInstalled:"Aplikasi Terinstall",appInstalledWithNotif:"Aplikasi Terinstall dengan Notifikasi",installAppForSounds:"Install Aplikasi untuk Suara Notifikasi",readyToReceiveAlerts:"Siap menerima alert booking dengan suara kustom",customSoundsRequireInstall:"Diperlukan: Suara notifikasi kustom hanya berfungsi di aplikasi terinstall",whyInstallCritical:"Mengapa instalasi penting:",customMP3Sounds:"Suara notifikasi MP3 kustom (hanya di aplikasi terinstall)",backgroundNotif:"Notifikasi background saat HP terkunci",strongerVibration:"Pola getaran lebih kuat untuk booking urgent",escalatingAlerts:"3 alert bertingkat selama 2 menit",neverMissBookings:"Tidak akan ketinggalan booking meski sedang pakai aplikasi lain",forceReinstallFix:"PAKSA INSTALL ULANG (Perbaiki Notifikasi)",reinstallWithSounds:"INSTALL ULANG DENGAN SUARA ENHANCED",installNowForSounds:"INSTALL SEKARANG UNTUK SUARA NOTIFIKASI",addToHomeScreenIOS:"TAMBAH KE LAYAR UTAMA (iOS)",getInstallInstructions:"DAPATKAN INSTRUKSI INSTALASI",testNotificationSounds:"TES SUARA NOTIFIKASI",appProperlyInstalled:"Aplikasi terinstall dengan benar. Tes notifikasi untuk memastikan suara berfungsi.",browserGenericSounds:"Notifikasi browser hanya memiliki suara generik. Install untuk alert MP3 kustom!",notInstalledYet:"Belum Terinstall",preview:"Pratinjau",statusUpdated:"Status berhasil diperbarui",statusUpdateFailed:"Gagal memperbarui status",profileUpdated:"Profil berhasil diperbarui",home:"Beranda",back:"Kembali",next:"Lanjut",cancel:"Batal",confirm:"Konfirmasi",save:"Simpan",delete:"Hapus",edit:"Edit",close:"Tutup",advancedOnlineStatus:"Status Online Lanjutan",proAccount:"Akun Pro (Saat Ini)",premiumAccount:"Akun Premium (Upgrade)",premiumAccountActive:"Akun Premium Aktif",upgradeToPremium:"Upgrade ke Premium",unlimitedBusyStatus:"Status sibuk unlimited",autoOfflineTimer:"Timer Auto-Offline",customerWhatsAppAccess:"Akses WhatsApp Pelanggan",autoOfflineTimerDesc:"Jadwalkan waktu offline otomatis setiap hari",autoOfflineExplanation:"Atur jumlah jam setiap hari Anda ingin tersedia online. Setelah timer mencapai nol, status online Anda akan berubah menjadi offline sampai Anda memilih tombol status online atau mengatur timer sekali lagi.",setTime:"Atur Waktu",saveTimer:"Simpan Timer",cancelTimer:"Batalkan Timer",timerActive:"Timer Aktif",willGoOfflineAt:"Akan otomatis offline pada",currentTime:"Waktu saat ini",exampleTime:"Contoh: Set ke 22:00 untuk otomatis offline jam 10 malam setiap malam",premiumFeature:"Fitur Premium",autoOfflineTimerLocked:"Upgrade ke Premium untuk jadwalkan waktu offline otomatis setiap hari. Tidak perlu khawatir mengubah status manual!",discountBadge:"Badge Diskon",discountBadgeDesc:"Tambahkan badge diskon ke profil Anda",discountBadgeExplanation:"Tarik lebih banyak pelanggan dengan badge diskon di profil Anda! Atur persentase diskon dan durasi untuk ditampilkan di listing Anda.",discountPercentage:"Persentase Diskon",duration:"Durasi",days:"hari",startDiscount:"Mulai Diskon",removeDiscount:"Hapus Diskon",hotelVillaSafePass:"Hotel/Villa Safe Pass",safePassCompliance:"Kepatuhan Safe Pass",safePassDescription:"Dapatkan sertifikasi Safe Pass untuk layanan spa di hotel dan villa. Persyaratan wajib untuk memberikan layanan terapi di properti komersial.",complianceStatus:"Status Kepatuhan",notCompliant:"Belum Patuh",pending:"Menunggu",compliant:"Patuh",rejected:"Ditolak",uploadLetter:"Upload Surat Permohonan",uploadLetterDesc:"Upload surat permohonan resmi dari hotel/villa yang meminta layanan spa Anda",selectFile:"Pilih File",uploadedFile:"File yang Diupload",downloadLetter:"Download Surat",paymentRequired:"Pembayaran Diperlukan",paymentAmount:"Jumlah Pembayaran",payNow:"Bayar Sekarang",paymentCompleted:"Pembayaran Selesai",awaitingReview:"Menunggu Tinjauan",adminReviewDesc:"Aplikasi Anda sedang ditinjau oleh tim admin. Anda akan diberitahu melalui email tentang keputusan akhir.",congratulations:"Selamat!",safePassApproved:"Aplikasi Safe Pass Anda telah disetujui. Anda sekarang dapat memberikan layanan spa di hotel dan villa.",applicationRejected:"Aplikasi Ditolak",rejectionReason:"Alasan Penolakan",reapply:"Ajukan Ulang",supportedFormats:"Format yang didukung: PDF, DOC, DOCX (maks. 10MB)",fileUploadSuccess:"File berhasil diupload!",fileUploadError:"Gagal mengupload file. Silakan coba lagi.",removeLetterError:"Gagal menghapus surat. Silakan coba lagi.",submitApplicationError:"Gagal mengirim aplikasi. Silakan coba lagi.",paymentSuccess:"Pembayaran berhasil! Aplikasi Anda akan segera ditinjau.",paymentError:"Pembayaran gagal. Silakan coba lagi.",invalidFile:"File tidak valid. Pastikan format dan ukuran file sesuai.",uploadInProgress:"Mengupload...",processing:"Memproses..."}}},rd={en:{placeDashboard:{dashboard:"Dashboard",yourDashboard:"Your Dashboard",profile:"Profile",editProfile:"Edit Profile",businessInfo:"Business Information",bookings:"Bookings",newBooking:"New Booking",pendingBookings:"Pending Bookings",confirmedBookings:"Confirmed Bookings",completedBookings:"Completed Bookings",calendar:"Calendar",schedule:"Schedule",openingHours:"Opening Hours",promotions:"Promotions",activePromotions:"Active Promotions",createPromotion:"Create Promotion",discount:"Discount",analytics:"Analytics",revenue:"Revenue",totalRevenue:"Total Revenue",monthlyRevenue:"Monthly Revenue",therapists:"Therapists",manageTherapists:"Manage Therapists",addTherapist:"Add Therapist",settings:"Settings",membership:"Membership",payment:"Payment",hotelServices:"Hotel Services",villaServices:"Villa Services",partnerships:"Partnerships",home:"Home",back:"Back",save:"Save",cancel:"Cancel",confirm:"Confirm",edit:"Edit",delete:"Delete"}},id:{placeDashboard:{dashboard:"Dashboard",yourDashboard:"Dashboard Anda",profile:"Profil",editProfile:"Edit Profil",businessInfo:"Informasi Bisnis",bookings:"Booking",newBooking:"Booking Baru",pendingBookings:"Booking Menunggu",confirmedBookings:"Booking Terkonfirmasi",completedBookings:"Booking Selesai",calendar:"Kalender",schedule:"Jadwal",openingHours:"Jam Buka",promotions:"Promosi",activePromotions:"Promosi Aktif",createPromotion:"Buat Promosi",discount:"Diskon",analytics:"Analitik",revenue:"Pendapatan",totalRevenue:"Total Pendapatan",monthlyRevenue:"Pendapatan Bulanan",therapists:"Terapis",manageTherapists:"Kelola Terapis",addTherapist:"Tambah Terapis",settings:"Pengaturan",membership:"Keanggotaan",payment:"Pembayaran",hotelServices:"Layanan Hotel",villaServices:"Layanan Villa",partnerships:"Kemitraan",home:"Beranda",back:"Kembali",save:"Simpan",cancel:"Batal",confirm:"Konfirmasi",edit:"Edit",delete:"Hapus"}}},od={en:{ui:{available:"Available",busy:"Busy",offline:"Offline",online:"Online",active:"Active",inactive:"Inactive",pending:"Pending",confirmed:"Confirmed",completed:"Completed",cancelled:"Cancelled",rejected:"Rejected",expired:"Expired",book:"Book",bookNow:"Book Now",quickBook:"Quick Book",viewDetails:"View Details",viewProfile:"View Profile",contactUs:"Contact Us",chat:"Chat",call:"Call",minutes:"minutes",min:"min",hours:"hours",hour:"hour",days:"days",day:"day",price:"Price",from:"From",startingFrom:"Starting from",perSession:"per session",rating:"Rating",reviews:"Reviews",noReviews:"No reviews yet",submit:"Submit",send:"Send",save:"Save",cancel:"Cancel",confirm:"Confirm",delete:"Delete",edit:"Edit",update:"Update",close:"Close",back:"Back",next:"Next",previous:"Previous",finish:"Finish",loading:"Loading...",saving:"Saving...",sending:"Sending...",processing:"Processing...",pleaseWait:"Please wait...",error:"Error",errorOccurred:"An error occurred",tryAgain:"Try again",somethingWentWrong:"Something went wrong",success:"Success",saved:"Saved successfully",sent:"Sent successfully",updated:"Updated successfully",noData:"No data available",noResults:"No results found",comingSoon:"Coming Soon",home:"Home",menu:"Menu",search:"Search",filter:"Filter",sort:"Sort",required:"Required",optional:"Optional",enterValue:"Enter value",selectOption:"Select option",chooseFile:"Choose file",uploadImage:"Upload image"}},id:{ui:{available:"Tersedia",busy:"Sibuk",offline:"Offline",online:"Online",active:"Aktif",inactive:"Tidak Aktif",pending:"Menunggu",confirmed:"Terkonfirmasi",completed:"Selesai",cancelled:"Dibatalkan",rejected:"Ditolak",expired:"Kedaluwarsa",book:"Booking",bookNow:"Booking Sekarang",quickBook:"Booking Cepat",viewDetails:"Lihat Detail",viewProfile:"Lihat Profil",contactUs:"Hubungi Kami",chat:"Chat",call:"Telepon",minutes:"menit",min:"mnt",hours:"jam",hour:"jam",days:"hari",day:"hari",price:"Harga",from:"Dari",startingFrom:"Mulai dari",perSession:"per sesi",rating:"Rating",reviews:"Ulasan",noReviews:"Belum ada ulasan",submit:"Kirim",send:"Kirim",save:"Simpan",cancel:"Batal",confirm:"Konfirmasi",delete:"Hapus",edit:"Edit",update:"Perbarui",close:"Tutup",back:"Kembali",next:"Lanjut",previous:"Sebelumnya",finish:"Selesai",loading:"Memuat...",saving:"Menyimpan...",sending:"Mengirim...",processing:"Memproses...",pleaseWait:"Mohon tunggu...",error:"Error",errorOccurred:"Terjadi kesalahan",tryAgain:"Coba lagi",somethingWentWrong:"Ada yang salah",success:"Berhasil",saved:"Berhasil disimpan",sent:"Berhasil dikirim",updated:"Berhasil diperbarui",noData:"Tidak ada data",noResults:"Tidak ada hasil",comingSoon:"Segera Hadir",home:"Beranda",menu:"Menu",search:"Cari",filter:"Filter",sort:"Urutkan",required:"Wajib diisi",optional:"Opsional",enterValue:"Masukkan nilai",selectOption:"Pilih opsi",chooseFile:"Pilih file",uploadImage:"Unggah gambar"}}};function ld(...a){const t={en:{},id:{}};for(const n of a){for(const s in n.en){const i=n.en[s];typeof i=="object"&&i!==null&&!Array.isArray(i)?t.en[s]={...t.en[s]||{},...i}:t.en[s]=i}for(const s in n.id){const i=n.id[s];typeof i=="object"&&i!==null&&!Array.isArray(i)?t.id[s]={...t.id[s]||{},...i}:t.id[s]=i}}return t}const Se=ld(Yc,Jc,Qc,Xc,Zc,ed,td,ad,nd,sd,id,rd,od);Se.en.registrationChoice={title:"Join Us",prompt:"Are you an individual therapist or a massage establishment?",therapistButton:"I'm a Therapist",placeButton:"I'm a Massage Place"};Se.en.joinIndastreet={title:"Join Indonesia's Massage Directory",titleHighlight:"FREE TODAY",subtitle:"Experience the true potential of online massage booking",whyJoinTitle:"üåü Why Join Indastreet?",whyJoinText:"No matter where you are across Indonesia, Indastreet customers are searching for massage services right now. Don't miss out‚Äîregister your account for FREE and scale your business to the next level with Indonesia's largest massage booking platform.",benefitsTitle:"Benefits",benefit1Title:"Get More Bookings",benefit1Text:"Reach customers 24/7 with instant online booking",benefit2Title:"Grow Your Income",benefit2Text:"Fill your schedule with verified customers",benefit3Title:"Build Your Brand",benefit3Text:"Showcase reviews and grow your reputation",platformFeaturesTitle:"‚ú® Platform Features",feature1Title:"Your Own Profile Page",feature1Text:"Professional profile with photos, services, and pricing",feature2Title:"Real-Time Notifications",feature2Text:"Get instant alerts for new booking requests",feature3Title:"Customer Reviews",feature3Text:"Build trust with verified customer feedback",feature4Title:"Mobile Dashboard",feature4Text:"Manage bookings anywhere, anytime",feature5Title:"Hotel & Villa Partnerships",feature5Text:"Get bookings from luxury properties",feature6Title:"No Commission Fees",feature6Text:"Keep 100% of your earnings from bookings",successStoriesTitle:"‚ù§Ô∏è Success Stories",testimonial1Name:"Balinese Massage Therapist",testimonial1Text:"I doubled my bookings in the first month. Customers love the easy online booking system!",testimonial1Rating:"‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 4.9 rating ‚Ä¢ 250+ bookings",testimonial2Name:"Ubud Wellness Spa",testimonial2Text:"The hotel partnership program connected us with luxury villas. Our revenue increased 3x!",testimonial2Rating:"‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5.0 rating ‚Ä¢ 500+ bookings",howItWorksTitle:"üöÄ How It Works",step1Title:"Create Your Profile",step1Text:"Add photos, services, pricing, and availability",step2Title:"Get Verified",step2Text:"Complete verification to build customer trust",step3Title:"Receive Bookings",step3Text:"Accept or reject requests instantly via notifications",step4Title:"Grow Your Business",step4Text:"Collect reviews, build reputation, and increase earnings",ctaTherapistTitle:"JOIN THERAPIST",ctaTherapistButton:"Create Therapist Account ‚Üí",ctaSpaTitle:"JOIN MASSAGE SPA",ctaSpaButton:"Create Massage Spa Account ‚Üí",contactTitle:"Need Help Getting Started?",contactText:"Our team is ready to assist you with the registration process",contactButton:"Contact Us on WhatsApp"};Se.en.home={homeServiceTab:"Home Service",massagePlacesTab:"Massage Places",therapistsTitle:"Home Service Therapists",therapistsSubtitle:"Find the best therapists in Bali",noTherapistsAvailable:"No therapists available in your area at the moment.",noPlacesAvailable:"No massage places available in your area",massagePlacesTitle:"Featured Massage Spas",massagePlacesSubtitle:"Find the best massage places in Bali",massageDirectory:"Massage Directory",massageDirectoryTitle:"Go to Massage Directory",viewMassageSpa:"View Massage Spa",cityLocation:"City / Location",readMore:"Read More",readLess:"Read Less",aboutMassage:"About",keyBenefits:"Key Benefits",bestFor:"Best For",findTherapists:"Find Therapists",findMassagePlaces:"Find Massage Places",pressure:"Pressure"};Se.en.about={subtitle:"Indonesia's First Comprehensive Wellness Marketplace Connecting Therapists, Hotels, and Employers",missionTitle:"Our IndaStreet Mission",missionText:"Connecting customers with quality massage therapists while empowering local wellness professionals",cta:{getStarted:"Get Started Today",viewCompanyProfile:"View Company Profile",contactTeam:"Contact Our Team"}};Se.id.about={subtitle:"Marketplace Kesehatan Terlengkap Pertama di Indonesia yang Menghubungkan Terapis, Hotel, dan Pemberi Kerja",missionTitle:"Misi IndaStreet Kami",missionText:"Menghubungkan pelanggan dengan terapis pijat berkualitas sambil memberdayakan profesional kesehatan lokal",cta:{getStarted:"Mulai Hari Ini",viewCompanyProfile:"Lihat Profil Perusahaan",contactTeam:"Hubungi Tim Kami"}};Se.en.contact={title:"Contact IndaStreet",subtitle:"We're here to help. Get in touch with our team for support, partnerships, or inquiries.",form:{title:"Let's Connect",nameLabel:"Your Name *",namePlaceholder:"Enter your full name",emailLabel:"Email Address *",emailPlaceholder:"your.email@example.com",phoneLabel:"Phone Number",phonePlaceholder:"+62 812 3456 7890",userTypeLabel:"I am a... *",userTypeSelect:"Select user type",userTypes:{therapist:"Massage Therapist",hotel:"Hotel/Villa Owner",employer:"Employer/Spa Manager",agent:"Agent",client:"Client/Customer",other:"Other"},subjectLabel:"Subject *",subjectPlaceholder:"What is your inquiry about?",messageLabel:"Message *",messagePlaceholder:"Tell us how we can help you...",sendButton:"Send Message"},support:{title:"Support Resources",quickSupport:{title:"Quick Support",button:"Visit FAQ ‚Üí"},partnerships:{title:"Partnership Inquiries",button:"Learn More ‚Üí"},pressMedia:{title:"Press & Media",button:"Press Kit ‚Üí"},careers:{title:"Career Opportunities",button:"View Jobs ‚Üí"}}};Se.id.contact={title:"Hubungi IndaStreet",subtitle:"Kami siap membantu. Hubungi tim kami untuk dukungan, kemitraan, atau pertanyaan.",form:{title:"Mari Terhubung",nameLabel:"Nama Anda *",namePlaceholder:"Masukkan nama lengkap Anda",emailLabel:"Alamat Email *",emailPlaceholder:"email.anda@contoh.com",phoneLabel:"Nomor Telepon",phonePlaceholder:"+62 812 3456 7890",userTypeLabel:"Saya adalah... *",userTypeSelect:"Pilih jenis pengguna",userTypes:{therapist:"Terapis Pijat",hotel:"Pemilik Hotel/Vila",employer:"Pemberi Kerja/Manajer Spa",agent:"Agen",client:"Klien/Pelanggan",other:"Lainnya"},subjectLabel:"Subjek *",subjectPlaceholder:"Tentang apa pertanyaan Anda?",messageLabel:"Pesan *",messagePlaceholder:"Beritahu kami bagaimana kami dapat membantu Anda...",sendButton:"Kirim Pesan"},support:{title:"Sumber Dukungan",quickSupport:{title:"Dukungan Cepat",button:"Kunjungi FAQ ‚Üí"},partnerships:{title:"Permintaan Kemitraan",button:"Pelajari Lebih Lanjut ‚Üí"},pressMedia:{title:"Pers & Media",button:"Kit Pers ‚Üí"},careers:{title:"Lowongan Kerja",button:"Lihat Pekerjaan ‚Üí"}}};Se.en.faq={title:"Frequently Asked Questions",subtitle:"Everything you need to know about using IndaStreet",stillHaveQuestions:"Still Have Questions?",contactSupport:"Our support team is here to help you succeed on IndaStreet",contactSupportButton:"Contact Support",whatsappButton:"WhatsApp Us",categories:{booking:"Bookings",therapist:"For Therapists",hotel:"For Hotels",employer:"For Employers",agent:"For Agents",payment:"Payments",technical:"Technical"}};Se.id.faq={title:"Pertanyaan yang Sering Diajukan",subtitle:"Semua yang perlu Anda ketahui tentang menggunakan IndaStreet",stillHaveQuestions:"Masih Ada Pertanyaan?",contactSupport:"Tim dukungan kami siap membantu Anda sukses di IndaStreet",contactSupportButton:"Hubungi Dukungan",whatsappButton:"WhatsApp Kami",categories:{booking:"Pemesanan",therapist:"Untuk Terapis",hotel:"Untuk Hotel",employer:"Untuk Pemberi Kerja",agent:"Untuk Agen",payment:"Pembayaran",technical:"Teknis"}};Se.en.blog={pageTitle:"IndaStreet Blog",featuredArticles:"Featured Articles",allArticles:"All Articles",readArticle:"Read Article",readMore:"Read More",stayUpdated:"Stay Updated with Wellness Industry Insights",newsletterDesc:"Get weekly articles, industry trends, and professional tips delivered to your inbox",enterEmail:"Enter your email",subscribe:"Subscribe",popularTopics:"Popular Topics",topics:{balineseMassage:"Balinese Massage",hotelSpaManagement:"Hotel Spa Management",therapistCertification:"Therapist Certification",wellnessTourism:"Wellness Tourism",deepTissueTechniques:"Deep Tissue Techniques",careerGrowth:"Career Growth",clientRetention:"Client Retention",aromatherapy:"Aromatherapy"},categoryAll:"All Articles",categoryIndustry:"Industry Trends",categoryTechniques:"Massage Techniques",categoryCareer:"Career Advice",categoryWellness:"Wellness Tips",featured:"Featured"};Se.en.howItWorks={heroTitle:"How IndaStreet Works",heroSubtitle:"Your Complete Guide to Indonesia's Leading Wellness Marketplace",tabTherapists:"Therapists",tabHotels:"Hotels & Villas",tabEmployers:"Employers",tabAgents:"Agents",therapistTitle:"How Therapists Succeed on IndaStreet",therapistSubtitle:"Build your career, find opportunities, grow your client base",step1Title:"Create Your Profile",step1Desc:"Sign up and create a detailed profile showcasing your certifications, specializations, experience, and languages.",step1Item1:"Upload certifications",step1Item2:"List specializations",step1Item3:"Add work experience",step2Title:"Choose Your Membership",step2Desc:"Select a membership package that fits your needs. Get verified and featured in search results.",step2Item1:"1, 3, 6, or 12 months",step2Item2:"Verified badge",step2Item3:"Priority placement",step3Title:"Start Getting Bookings",step3Desc:"Receive booking requests from hotels, spas, and direct clients. Accept jobs that fit your schedule.",step3Item1:"Instant notifications",step3Item2:"WhatsApp integration",step3Item3:"Flexible scheduling",membershipBenefitsTitle:"Membership Benefits",benefit1Title:"Enhanced Visibility",benefit1Desc:"Appear at the top of search results",benefit2Title:"Direct Client Bookings",benefit2Desc:"Receive bookings from verified clients",benefit3Title:"Professional Dashboard",benefit3Desc:"Manage bookings and profile easily",benefit4Title:"Verified Badge",benefit4Desc:"Build trust with verified status",hotelTitle:"Partner Hotels & Villas",hotelSubtitle:"Connect with verified therapists, streamline bookings, enhance guest experience",employerTitle:"For Employers",employerSubtitle:"Find qualified therapists, hire with confidence, grow your business",agentTitle:"For Agents & Partners",agentSubtitle:"Earn commissions, grow your network, support local wellness",needHelpTitle:"Need Help?",needHelpDesc:"Contact our support team for any questions",chatSupport:"Chat Customer Support",hotelSectionTitle:"How Hotels & Villas Use IndaStreet",hotelSectionSubtitle:"Find qualified therapists, manage your spa, grow your business",hotelStep1Title:"Register Your Property",hotelStep1Desc:"Create hotel/villa account with property details",hotelStep2Title:"Browse Therapists",hotelStep2Desc:"Search verified professionals by specialty and location",hotelStep3Title:"Send Booking Requests",hotelStep3Desc:"Contact therapists directly via WhatsApp integration",hotelStep4Title:"Manage Your Spa",hotelStep4Desc:"Track bookings, therapists, and services from dashboard",hotelBenefitsTitle:"Hotel Benefits",hotelBenefit1Title:"Access to 500+ Verified Therapists",hotelBenefit1Desc:"All certified with background checks",hotelBenefit2Title:"Same-Day Staffing Solutions",hotelBenefit2Desc:"Find replacement therapists quickly",hotelBenefit3Title:"Spa Management Dashboard",hotelBenefit3Desc:"Track services, bookings, and therapists",hotelBenefit4Title:"Multi-Language Therapists",hotelBenefit4Desc:"Serve international guests effectively",employerSectionTitle:"How Employers Hire on IndaStreet",employerSectionSubtitle:"Privacy-protected job marketplace for contract hiring",employerCard1Title:"Browse Job Seekers",employerCard1Desc:'Search our "Therapist For Contract" marketplace to find qualified professionals actively seeking employment opportunities.',employerCard1Item1:"Filter by specialty, experience, location",employerCard1Item2:"View certifications and work history",employerCard1Item3:"Names protected until you unlock",employerCard2Title:"Unlock Contact Details",employerCard2Desc:"Pay one-time fee of IDR 300,000 to unlock full contact information including WhatsApp number and full name.",employerCard2Item1:"Secure payment via bank transfer",employerCard2Item2:"Instant access after verification",employerCard2Item3:"Direct WhatsApp communication",employerCard3Title:"Interview & Hire",employerCard3Desc:"Contact therapists directly via WhatsApp. Conduct interviews, check references, and make your hiring decision.",employerCard3Item1:"No platform fees on hiring",employerCard3Item2:"Negotiate terms directly",employerCard3Item3:"Verify certifications yourself",employerCard4Title:"Leave Reviews",employerCard4Desc:"After hiring, leave honest reviews to help other employers and build the therapist's reputation on the platform.",employerCard4Item1:"Rate professionalism",employerCard4Item2:"Share your experience",employerCard4Item3:"Help build community trust",employerPrivacyTitle:"Why Our Privacy Model Works",employerPrivacyTherapist:"For Therapists:",employerPrivacyTherapistDesc:"Protects them from spam, harassment, and unwanted contact. Only serious employers who pay can reach them.",employerPrivacyEmployer:"For Employers:",employerPrivacyEmployerDesc:"Ensures access to serious job seekers. Small fee filters out time-wasters and ensures quality candidates.",agentSectionTitle:"How Agents Earn on IndaStreet",agentSectionSubtitle:"Recruit therapists, earn commissions, build your network",agentStat1:"20%",agentStat1Label:"Commission Rate",agentStat2:"‚àû",agentStat2Label:"Unlimited Recruits",agentStat3:"üí∞",agentStat3Label:"Passive Income",agentStep1Title:"Sign Up as Agent",agentStep1Desc:"Register as an agent and get your unique referral code to start recruiting therapists.",agentStep2Title:"Recruit Therapists",agentStep2Desc:"Share your referral code with therapists. When they sign up and purchase membership, you earn.",agentStep3Title:"Earn Commissions",agentStep3Desc:"Receive 20% commission on every membership purchase from your referred therapists. Track earnings in dashboard.",agentCommissionTitle:"Commission Example",agentTablePackage:"Package",agentTablePrice:"Price",agentTableCommission:"Your Commission (20%)",agentTableRecurring:"Recurring Commission (20%)",agentPackage1Month:"1 Month",agentPackage3Months:"3 Months",agentPackage6Months:"6 Months",agentPackage1Year:"1 Year",agentCommissionWorksTitle:"üí∞ How Commission Works:",agentCommissionFirstMonth:"First Month: Earn 20% commission when a therapist you recruit signs up for the first time",agentCommissionRecurring:"Recurring (Month 2+): Earn 20% commission every month the same therapist renews their membership",agentExampleTitle:"Example:",agentExampleDesc:"You recruit 1 therapist who buys a 1 Month package (IDR 200,000):",agentExampleMonth1:"Month 1: You earn IDR 40,000 (20%)",agentExampleMonth2:"Month 2: If they renew, you earn IDR 40,000 (20%)",agentExampleMonth3Plus:"Month 3+: You continue earning IDR 40,000 (20%) each month they stay active",agentPassiveIncomeTitle:"üöÄ Build Passive Income:",agentPassiveIncomeDesc:"Recruit 10 therapists on 1-month plans = IDR 400,000 first month + IDR 400,000 every month they renew!",agentTotalEarningsTitle:"üìä Total Earnings From 1 Active Member (IDR 200,000/month):",agentEarningsAfter1Month:"After 1 Month",agentEarningsAfter1MonthAmount:"IDR 40,000",agentEarningsAfter1MonthDesc:"20% first month",agentEarningsAfter3Months:"After 3 Months",agentEarningsAfter3MonthsAmount:"IDR 120,000",agentEarningsAfter3MonthsDesc:"Month 1 (20%) + Month 2-3 (20% each)"};Se.en.app={mapsApiKeyWarning:"Google Maps API key is missing. Please configure it in the Admin Dashboard to enable location features."};Se.en.membershipPage={title:"Choose Membership",selectPackage:"Select a membership package:",oneMonth:"1 Month - Rp 100,000",threeMonths:"3 Months - Rp 250,000",sixMonths:"6 Months - Rp 450,000",oneYear:"1 Year - Rp 800,000",contactAdmin:"Please contact our admin at {number} to complete payment.",whatsappButton:"Contact Admin"};Se.en.bookingPage={title:"Book Appointment",selectDate:"Select Date",selectTime:"Select Time",customerInfo:"Customer Information",nameLabel:"Name",whatsappLabel:"WhatsApp Number",notesLabel:"Additional Notes (Optional)",bookButton:"Book Appointment",fillFieldsError:"Please fill all required fields.",bookingSuccess:"Appointment booked successfully!",loginPrompt:"Please login to make a booking",bookingSuccessTitle:"Booking Confirmed!",bookingSuccessMessage:"Your booking with {name} has been confirmed."};Se.en.agentPage={title:"Agent Portal",description:"Join our agent program and earn commissions by referring massage therapists and places.",joinButton:"Join as Agent",learnMore:"Learn More"};Se.en.agentTermsPage={title:"Agent Terms & Conditions",accept:"I Accept",decline:"Decline",terms:"Please read and accept the terms and conditions to continue."};Se.en.detail={title:"Details",description:"Description",contact:"Contact",book:"Book Now",location:"Location",rating:"Rating",reviews:"Reviews",pricing:"Pricing",availability:"Availability",pricingTitle:"Pricing",contactButton:"WhatsApp",bookButton:"Book Now"};Se.en.supabaseSettings={title:"Database Settings",url:"Supabase URL",key:"Supabase Key",connect:"Connect",disconnect:"Disconnect",status:"Connection Status"};Se.en.notificationsPage={title:"Notifications",noNotifications:"No notifications yet.",markAllRead:"Mark All as Read"};Se.en.serviceTerms={title:"Terms of Service",effectiveDate:"Effective Date: January 5, 2026 | Last Updated: January 5, 2026",intro:'Welcome to IndaStreet ("indastreet.id", "indastreetmassage.com", and other platforms operated by IndaStreet). These Terms of Service ("Terms") constitute a legally binding agreement between you ("User", "You", or "Your") and IndaStreet ("We", "Us", or "Our"). By accessing or using any of our platforms, websites, mobile applications, or services, you acknowledge that you have read, understood, and agree to be bound by these Terms in their entirety. If you do not agree to these Terms, you must immediately cease all use of our platforms and services.',acceptance:{title:"1. Acceptance of Terms",content:"By creating an account, browsing any of our platforms (indastreet.id, indastreetmassage.com, or other sites), or engaging with any service provider listed on our network, you expressly agree to comply with and be legally bound by these Terms of Service, our Privacy Policy, and all applicable laws and regulations of the Republic of Indonesia. Your continued use of any platform constitutes ongoing acceptance of any modifications or updates to these Terms. We reserve the right to update, modify, or replace any part of these Terms at our sole discretion without prior notice. It is your responsibility to review these Terms periodically for changes."},platformNature:{title:"2. Nature of Platform and Services",content:'IndaStreet operates indastreet.id as our primary platform along with sister websites including indastreetmassage.com and other sites currently in development. We provide an online directory and connection platform that allows users to discover and connect with independent massage therapists and massage establishments ("Service Providers"). IndaStreet does not employ, contract with, supervise, direct, or control any Service Providers listed on any of our platforms. All Service Providers are independent contractors or independent business entities operating under their own business licenses and legal authority. IndaStreet does not provide massage services, wellness services, or any therapeutic services directly. We are solely a technology platform facilitating connections between users and independent service providers across our network of websites.'},governingLaw:{title:"3. Governing Law and Jurisdiction",content:"These Terms of Service apply to all IndaStreet platforms including indastreet.id and sister sites. All transactions, operations, services, and activities conducted through or facilitated by any IndaStreet platform are governed exclusively by and construed in accordance with the laws of the Republic of Indonesia. Any legal proceedings, disputes, or claims arising from these Terms must be filed exclusively in the courts of Jakarta, Indonesia, and you hereby consent to the exclusive jurisdiction and venue of such courts. By using our platforms, you acknowledge and agree that Indonesian law shall apply to all aspects of your use of our services, regardless of your physical location or residence."},userRights:{title:"4. User Account Management and Platform Access Rights",content:"IndaStreet reserves the absolute and unconditional right to suspend, terminate, deactivate, or permanently ban any user account across all our platforms (indastreet.id, indastreetmassage.com, and other sites) at any time, for any reason or no reason whatsoever, without prior notice, without explanation, and without liability to the user or any third party. This right includes situations where we suspect or determine that a user has violated these Terms, engaged in fraudulent activity, abused any platform, harassed service providers or other users, provided false information, engaged in illegal activities, or for any other reason we deem appropriate. Account termination applies across all IndaStreet platforms. Users whose accounts have been terminated are prohibited from creating new accounts on any of our platforms without our express written permission. We reserve the right to refuse service to anyone for any reason at any time. All decisions regarding account status are final and not subject to appeal."},confidentiality:{title:"5. Confidentiality and Data Privacy",content:"All information, personal data, correspondence, and materials submitted by users to any IndaStreet platform shall be treated as confidential and proprietary information. This information will be collected, stored, processed, and used in accordance with our Privacy Policy and Indonesian data protection regulations across all our platforms. Data may be shared between our platforms (indastreet.id, indastreetmassage.com, and other sites) to provide seamless service. IndaStreet implements reasonable security measures to protect user information; however, no method of transmission or electronic storage is 100% secure. By using our platforms, you acknowledge the inherent risks of providing information online. We will not sell, rent, or share your personal information with third parties except as outlined in our Privacy Policy or as required by Indonesian law. You grant IndaStreet a perpetual, irrevocable, worldwide license to use any feedback, suggestions, or ideas you provide regarding any of our platforms without compensation or attribution."},therapistRightsTitle:"6. Service Provider Rights and Safety",therapistRightsContent:"All services facilitated through IndoStreet are strictly for professional, legitimate massage therapy and wellness services only. Service Providers, as independent contractors, retain the absolute right to refuse service, decline appointments, or terminate any session at any time if they feel uncomfortable, unsafe, threatened, or if they determine that the client is under the influence of alcohol or controlled substances, if there is an unauthorized person present in the service location, if the client makes inappropriate requests or displays inappropriate behavior, or for any other reason the Service Provider deems appropriate. IndoStreet fully supports Service Providers in exercising their professional judgment and personal safety rights. Users who demonstrate disrespectful, threatening, or inappropriate behavior toward Service Providers will have their accounts immediately terminated and may be reported to local law enforcement authorities. The safety and professional integrity of Service Providers are paramount priorities.",locationTrackingTitle:"6a. Location and Safety Monitoring (Service Providers)",locationTrackingContent:"By agreeing to these terms and maintaining an active profile on IndaStreet as a therapist, massage place, or skin care clinic, you agree that location monitoring is automatically active for your profile. There is no on/off setting‚Äîit applies to all therapists and all places on IndaStreet. IndaStreet may collect, use, and store your location data (including GPS or other positioning information) while your profile is active and during service sessions or travel to and from bookings. This is for the safety of clients (including women booking in-home or hotel services) and for your own safety as a provider. IndaStreet may monitor or access such location data when needed for safety support, incident response, or platform administration. Location data will be handled in accordance with our Privacy Policy and applicable law. You may withdraw consent only by deactivating your profile or ceasing to use the platform for provision of services.",contactSharingTitle:"6b. No Sharing Contact Information Outside the Platform ‚Äî Commission Increase",contactSharingContent:"You must not share your personal phone number, WhatsApp, or any other direct contact details with IndaStreet customers for the purpose of arranging or receiving bookings outside the IndaStreet platform. All booking-related communication and transactions must remain on IndaStreet. Sharing contact information to circumvent the platform and avoid commission is a serious violation of these terms. For each verified violation (e.g. sharing private contact with a customer to take bookings off-platform), your commission rate will increase by a minimum of 5% (five percent) per violation. For example: one violation may result in commission increasing from 30% to 35%; further violations may result in 40%, 45%, and so on, at IndaStreet‚Äôs discretion. IndaStreet may use location and proximity data to help detect potential violations: distances of 10, 15, or 20 meters between provider and guest (after the first booking) may be evaluated and assigned tier 1, 2, or 3. Proximity tracking for this purpose becomes active only 10 (ten) hours after the first completed online booking between that guest and that provider; before that period, no proximity-based violation is applied. IndaStreet reserves the right for administrators to override or remove violation counts where appropriate (e.g. false positives or justified exceptions). This applies to all therapists, massage places, and skin care clinics on IndaStreet. You agree to this commission structure and escalation as a condition of using the platform.",paymentTitle:"7. Payment Terms and Financial Transactions",paymentContent:"Payment for all massage packages, services, and membership fees must be made in full, in Indonesian Rupiah (IDR), before the commencement of any service or activation of any membership. All payments are processed through our authorized payment channels. Payment confirms your acceptance of the service terms and the specific package selected. Services will be provided for the duration and specifications of the paid package only. All sales are final unless otherwise specified. IndoStreet is not responsible for payment disputes between users and Service Providers. Any refund requests must be submitted in writing within 24 hours of the transaction and will be reviewed on a case-by-case basis at our sole discretion. Processing fees, transaction fees, and administrative charges are non-refundable under any circumstances.",clientCommunicationTitle:"8. User-Provider Communication and Service Delivery",clientCommunicationContent:"Users are encouraged and expected to maintain clear, professional communication with their chosen Service Providers throughout the service delivery process. You may request adjustments to massage pressure (firm, light, medium), focus areas, or techniques at any point during your session to ensure your comfort and satisfaction. If you experience any discomfort, pain, or concerns during your massage, you must immediately communicate this to your Service Provider. Complaints, disputes, or issues regarding service quality, provider conduct, or service delivery cannot be accepted, processed, or addressed after the completion of the massage session. All concerns must be raised during the active service period. IndoStreet encourages real-time communication between users and providers to ensure optimal service experiences.",clientRightsTitle:"9. User Rights and Service Verification",clientRightsContent:"Users have the right to verify that the Service Provider who arrives for their appointment matches the profile, photographs, and information displayed on the IndoStreet platform. In the event that the arriving Service Provider does not match the advertised profile or if there are significant discrepancies in the provider's identity, qualifications, or appearance, the user has the right to cancel the appointment without any payment obligation or cancellation penalty. Your trust, safety, and satisfaction are important to us. However, minor variations in appearance due to photography, lighting, or natural changes over time should be expected and do not constitute grounds for cancellation. Users are expected to exercise reasonable judgment when verifying provider identity.",therapistObligationsTitle:"10. Service Provider Obligations and Standards",therapistObligationsContent:"Service Providers are required to provide all essential materials, equipment, and supplies necessary to deliver professional massage services, including but not limited to clean linens, bed covers, massage tables or portable equipment, hand sanitizing wipes, certified massage oils or lotions, and any other materials standard to professional massage therapy practice. All materials must meet Indonesian health and safety standards. If a Service Provider arrives without the necessary equipment or materials required to perform the advertised service safely and professionally, the user has the right to cancel the appointment without payment and without penalty. Service Providers are expected to maintain the highest standards of professionalism, hygiene, and service quality.",professionalismTitle:"11. Professional Standards and Code of Conduct",professionalismContent:"All Service Providers listed on IndoStreet are represented as licensed, trained professionals who must maintain strict adherence to professional massage therapy standards, ethical conduct, and Indonesian business regulations. If any Service Provider fails to maintain professional boundaries, engages in inappropriate conduct, violates professional ethics, or behaves in any manner inconsistent with professional massage therapy practice, users are strongly encouraged and obligated to immediately report such conduct to IndoStreet customer service. We take all reports seriously and will investigate complaints thoroughly. Service Providers found to have violated professional standards will be subject to immediate removal from our platform and may be reported to relevant licensing authorities and law enforcement as appropriate.",userConduct:{title:"12. Prohibited User Conduct",content:"Users of the IndoStreet platform are strictly prohibited from engaging in the following activities:",prohibitions:["Using the platform for any illegal, unlawful, or unauthorized purpose under Indonesian law or international law","Requesting, soliciting, or engaging in any services of a sexual nature, illegal activities, or activities that violate professional massage therapy ethics","Harassing, threatening, intimidating, or abusing Service Providers, other users, or IndoStreet staff","Providing false, misleading, or fraudulent information during registration or at any point while using the platform","Attempting to circumvent, disable, or interfere with security features of the platform or access unauthorized areas","Using automated systems, bots, scrapers, or any technology to access or collect data from the platform without authorization","Posting, transmitting, or sharing any content that is defamatory, obscene, offensive, or violates intellectual property rights","Impersonating any person or entity, or falsely representing your affiliation with any person or entity","Interfering with or disrupting the platform, servers, or networks connected to the platform","Violating any applicable local, state, national, or international law or regulation","Using the platform to transmit any malicious code, viruses, or harmful technology","Attempting to gain unauthorized access to other user accounts or any systems or networks connected to the platform"]},intellectualProperty:{title:"13. Intellectual Property Rights",content:'All content, features, functionality, designs, logos, trademarks, service marks, graphics, photographs, text, software, and all other materials available on the IndoStreet platform ("Platform Content") are owned by IndoStreet Massage, our licensors, or other content providers and are protected by Indonesian and international copyright, trademark, patent, trade secret, and other intellectual property laws. The IndoStreet name, logo, and all related names, logos, product and service names, designs, images, and slogans are trademarks of IndoStreet or our affiliates. You may not use these marks without our prior written permission. All rights not expressly granted to you in these Terms are reserved by IndoStreet. Unauthorized use of Platform Content may violate copyright, trademark, and other laws and may subject you to civil and criminal penalties.'},disclaimerTitle:"14. Comprehensive Disclaimer of Warranties and Liabilities",disclaimerContent:'INDASTREET (OPERATING INDASTREET.ID, INDASTREETMASSAGE.COM, AND OTHER PLATFORMS) IS A DIRECTORY AND CONNECTION PLATFORM ONLY. WE DO NOT EMPLOY, SUPERVISE, DIRECT, CONTROL, VERIFY, VET, BACKGROUND CHECK, CERTIFY, OR GUARANTEE ANY SERVICE PROVIDERS LISTED ON ANY OF OUR PLATFORMS. ALL SERVICE PROVIDERS ARE INDEPENDENT CONTRACTORS OPERATING THEIR OWN BUSINESSES. WE MAKE NO REPRESENTATIONS, WARRANTIES, OR GUARANTEES REGARDING THE QUALIFICATIONS, SKILLS, LICENSING, INSURANCE, BACKGROUND, CONDUCT, SAFETY, RELIABILITY, QUALITY, OR LEGALITY OF ANY SERVICE PROVIDER. YOU ENGAGE WITH SERVICE PROVIDERS ENTIRELY AT YOUR OWN RISK AND DISCRETION. INDASTREET IS NOT RESPONSIBLE AND SHALL NOT BE LIABLE FOR ANY ACTIONS, CONDUCT, OMISSIONS, SERVICES, QUALITY OF SERVICES, SAFETY ISSUES, INJURIES, DAMAGES, LOSSES, DISPUTES, CLAIMS, OR ANY OTHER MATTERS ARISING FROM OR RELATED TO YOUR INTERACTIONS WITH, SERVICES RECEIVED FROM, OR CONDUCT OF ANY SERVICE PROVIDER FOUND THROUGH ANY OF OUR PLATFORMS. BY USING ANY INDASTREET PLATFORM, YOU EXPRESSLY ACKNOWLEDGE AND AGREE THAT WE PROVIDE THE PLATFORMS "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND.',limitationOfLiability:{title:"15. Limitation of Liability and Damages",content:"TO THE MAXIMUM EXTENT PERMITTED BY INDONESIAN LAW, INDOSTREET, ITS PARENT COMPANIES, SUBSIDIARIES, AFFILIATES, OFFICERS, DIRECTORS, EMPLOYEES, AGENTS, PARTNERS, LICENSORS, AND SERVICE PROVIDERS SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, PUNITIVE, OR EXEMPLARY DAMAGES, INCLUDING BUT NOT LIMITED TO DAMAGES FOR LOSS OF PROFITS, GOODWILL, USE, DATA, OR OTHER INTANGIBLE LOSSES, ARISING FROM OR RELATED TO YOUR USE OR INABILITY TO USE THE PLATFORM OR SERVICES, UNAUTHORIZED ACCESS TO OR ALTERATION OF YOUR TRANSMISSIONS OR DATA, STATEMENTS OR CONDUCT OF ANY SERVICE PROVIDER OR THIRD PARTY ON THE PLATFORM, ANY SERVICES RECEIVED THROUGH THE PLATFORM, OR ANY OTHER MATTER RELATING TO THE PLATFORM OR SERVICES, WHETHER BASED ON WARRANTY, CONTRACT, TORT (INCLUDING NEGLIGENCE), OR ANY OTHER LEGAL THEORY, EVEN IF INDOSTREET HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. IN NO EVENT SHALL INDOSTREET'S TOTAL LIABILITY TO YOU FOR ALL DAMAGES, LOSSES, AND CAUSES OF ACTION EXCEED THE AMOUNT PAID BY YOU TO INDOSTREET IN THE SIX (6) MONTHS PRECEDING THE CLAIM, OR IDR 100,000 (ONE HUNDRED THOUSAND INDONESIAN RUPIAH), WHICHEVER IS LESS."},disputeResolution:{title:"16. Dispute Resolution and User-Provider Relations",content:"Any and all disputes, disagreements, conflicts, claims, or issues arising from services rendered, quality of services, conduct of Service Providers, payment disputes, cancellations, scheduling conflicts, or any other matters related to the provision of massage services MUST be resolved directly between the user and the Service Provider. IndoStreet is not a party to any service agreement between users and Service Providers. IndoStreet will not and shall not act as a mediator, arbitrator, adjudicator, or dispute resolver in any conflict between users and Service Providers. We will not intervene in disputes, make judgments regarding fault or liability, or enforce any remedies between parties. All service-related disputes are outside the scope of IndoStreet's responsibilities and liabilities. Users and Service Providers are encouraged to communicate directly and professionally to resolve any issues that may arise."},indemnification:{title:"17. User Indemnification Obligations",content:'You agree to defend, indemnify, compensate, and hold completely harmless IndoStreet Massage, its parent companies, subsidiaries, affiliates, partners, officers, directors, employees, agents, contractors, licensors, service providers, and all IndoStreet representatives (collectively, "IndoStreet Parties") from and against any and all claims, damages, obligations, losses, liabilities, costs, debts, expenses (including but not limited to attorney\'s fees and legal costs), and demands arising from or related to: (a) your use or misuse of the platform and services; (b) your violation of these Terms and Conditions; (c) your violation of any third-party rights, including but not limited to intellectual property rights, privacy rights, or other proprietary rights; (d) your interactions with, services received from, or disputes with any Service Provider; (e) any content you submit, post, or transmit through the platform; (f) your violation of any applicable laws or regulations; (g) any claim that your use of the platform caused damage to a third party; (h) your negligent or wrongful conduct; or (i) any other matter arising from your use of or conduct on the platform. This indemnification obligation shall survive termination of your account and your use of the platform.'},modifications:{title:"18. Modifications to Terms and Services",content:"IndoStreet reserves the right, in our sole and absolute discretion, to modify, amend, update, change, add to, or remove portions of these Terms and Conditions at any time without prior notice to users. We may also modify, suspend, or discontinue any aspect of the platform or services, including features, functionality, databases, content, or hours of availability, temporarily or permanently, without notice and without liability. Your continued use of the platform following any changes to these Terms constitutes your acceptance of such changes. It is your responsibility to review these Terms periodically. If you do not agree with any modifications, your sole remedy is to discontinue use of the platform and close your account. We may also impose limits on certain features or restrict your access to parts or all of the platform without notice or liability."},severability:{title:"19. Severability and Enforceability",content:"If any provision of these Terms and Conditions is found by a court of competent jurisdiction or arbitrator to be invalid, illegal, or unenforceable under Indonesian law or any applicable law, such provision shall be deemed modified to the minimum extent necessary to make it valid, legal, and enforceable while preserving its intent, or if such modification is not possible, such provision shall be severed from these Terms. The invalidity, illegality, or unenforceability of any provision shall not affect the validity, legality, or enforceability of any other provision of these Terms, which shall remain in full force and effect. The remaining provisions shall be interpreted to give effect to the intentions of the parties as reflected in the original provision to the greatest extent permitted by law."},entireAgreement:{title:"20. Entire Agreement and Waiver",content:"These Terms and Conditions, together with our Privacy Policy and any additional terms, policies, or guidelines posted on the platform, constitute the entire agreement between you and IndoStreet regarding your use of the platform and services, and supersede all prior or contemporaneous understandings, agreements, representations, and warranties, whether written or oral, regarding the subject matter. No waiver of any term or condition of these Terms shall be deemed a further or continuing waiver of such term or condition or any other term or condition. Any failure by IndoStreet to enforce any right or provision of these Terms shall not constitute a waiver of such right or provision unless acknowledged and agreed to by IndoStreet in writing."},contactInformation:{title:"21. Contact Information and Customer Support",content:"If you have any questions, concerns, complaints, or inquiries regarding these Terms of Service, our services across any platform (indastreet.id, indastreetmassage.com, or other sites), your account, billing matters, technical support, or any other issues, please contact our customer service team at: Email: indastreet.id@gmail.com | WhatsApp: +62 XXX-XXXX-XXXX | Address: Jakarta, Indonesia. We strive to respond to all legitimate inquiries within 48-72 business hours. For urgent safety concerns or to report violations of these Terms, please use our priority reporting system available through the app."},customerServiceButton:"Contact Customer Service",serviceProviderTerms:{modalTitle:"Therapist And Facial Services",modalSubtitle:"Terms for therapists and facial service providers ‚Äî IndaStreet",agreeButton:"Agree to terms and conditions",title:"Therapist And Facial Services",intro:"By signing in or using IndaStreet as a therapist or facial service provider, you agree to the following terms.",commissionTitle:"Commission",commissionContent:"You must pay 30% commission to IndaStreet on all revenue from: Book Now, Order Now, and all scheduled bookings. This applies to every such booking made through the platform.",noContactTitle:"No Sharing Contact Information",noContactContent:"You must never share your personal phone number, WhatsApp, or any other contact information with clients outside of the IndaStreet platform. All booking-related communication and transactions must remain on the platform.",noAccountSharingTitle:"No Account Sharing",noAccountSharingContent:"You must never share your account with anyone. Each therapist or place must use only their own registered account. Sharing or lending your account is a serious violation and may result in immediate suspension or termination.",sexualOfferingTitle:"No Sexual Offerings ‚Äî Zero Tolerance",sexualOfferingContent:"Any offering, solicitation, or provision of services of a sexual nature through or in connection with the platform will be reported to the correct authorities. Your account will be frozen with immediate effect for the duration of the investigation. The platform is for professional, legitimate massage and wellness services only.",platformPurposeTitle:"Platform Purpose and Users",platformPurposeContent:"The platform is for traffic purpose only. All users of the platform are IndaStreet Massage (indastreetmassage.com) users. You agree to use the platform solely to receive and fulfil bookings through IndaStreet and not to divert traffic or users to other channels.",gpsTitle:"GPS Location Agreement",gpsContent:"All service providers on IndaStreet agree to the use of GPS location where applicable, to offer safe service for users and for service providers. Location data may be used for safety, verification, and platform administration in accordance with our Privacy Policy.",otherTitle:"Other Obligations",otherContent:"You agree to provide only professional, lawful massage and wellness services; to comply with all applicable laws and regulations; and to maintain accurate profile information. IndaStreet reserves the right to suspend or terminate accounts that breach these terms."}};Se.en.userTerms={modalBadge:"For clients",modalTitle:"IndaStreet Massage ‚Äî Terms for users",title:"Terms & Conditions for Users",effectiveDate:"Effective for use of indastreetmassage.com and IndaStreet services.",intro:"By using IndaStreet (indastreetmassage.com and related platforms) to browse, book, or receive massage or wellness services, you agree to these Terms & Conditions for users. Please read them carefully.",acceptance:'By clicking "Agree to terms and conditions" below, you confirm that you have read and agree to these terms, including the section on location and safety below.',locationTrackingTitle:"Location and safety (services only on indastreetmassage.com)",locationTrackingContent:"We use location to give you a better experience: relevant updates about nearby therapists and massage places, personalised promos, and to help match you with the right provider. When you use IndaStreet services on indastreetmassage.com (and related IndaStreet platforms), we may use location-related information only in connection with providing and securing those services‚Äîfor example to help match you with nearby therapists, to support your and the therapist‚Äôs safety during a booking, and to improve service delivery. This applies only to your use of services on indastreetmassage.com and does not extend beyond our platforms. By agreeing, you consent to this use of location for services and safety on IndaStreet.",agreeButton:"Agree to terms and conditions"};Se.en.privacyPolicy={title:"Privacy Policy",lastUpdated:"Last Updated: January 5, 2026",introduction:{title:"1. Introduction",content:'IndaStreet ("we", "our", or "us") operates indastreet.id as our primary platform along with sister websites including indastreetmassage.com and other sites currently in development. We respect your privacy and are committed to protecting your personal data across all our platforms. This Privacy Policy explains how we collect, use, store, and share your information when you use any of our services. By using IndaStreet\'s platforms, you agree to the collection and use of information in accordance with this policy. This policy is governed by Indonesian Law including but not limited to Law No. 27 of 2022 on Personal Data Protection (UU PDP).'},dataCollection:{title:"2. Information We Collect",personal:"Personal Information: Name, email address, phone number, WhatsApp number, and payment information you provide during registration or booking across any of our platforms",usage:"Usage Data: IP address, browser type, device information, pages visited, time spent on pages, and other diagnostic data collected across our network of sites",location:"Location Data: GPS coordinates and address information when you use location-based features to find nearby therapists and massage places on any of our platforms",photos:"Photos and Media: Profile pictures, business photos, and other images you upload to any of our platforms",communications:"Communications: Messages, reviews, ratings, and feedback you provide through any of our platforms"},dataUsage:{title:"3. How We Use Your Information",content:"We use the collected information across all our platforms for the following purposes:",points:["To provide and maintain our directory and booking services across indastreet.id and sister sites","To process your bookings and facilitate connections between users and service providers","To calculate distances between your location and therapists/massage places","To send booking confirmations, notifications, and important updates","To improve our platforms and develop new features","To detect, prevent, and address technical issues and fraudulent activity","To comply with legal obligations under Indonesian law","To enforce our Terms and Conditions across all platforms","To provide seamless service across our network of websites"]},dataSharing:{title:"4. Information Sharing and Disclosure",content:"We may share your information across our platforms and with:",points:["Sister Sites: Your data may be shared between indastreet.id, indastreetmassage.com, and our other platforms to provide seamless service","Service Providers: Therapists and massage places you book with will receive your name, contact information, and booking details","Agents: Our authorized agents may access user data to facilitate connections and manage the platform","Payment Processors: Third-party payment services to process your transactions","Government Authorities: When required by Indonesian law or legal proceedings","Business Transfers: In the event of a merger, acquisition, or sale of assets"],note:"We do not sell your personal data to third parties for marketing purposes. Data shared between our platforms is for operational purposes only."},legalBasis:{title:"5. Legal Basis for Processing (Indonesian Law)",content:"Under Indonesian Personal Data Protection Law (UU PDP), we process your data across all our platforms based on:",points:["Consent: You have given clear consent for us to process your personal data across our network","Contract: Processing is necessary to fulfill our service agreement with you","Legal Obligation: To comply with Indonesian laws and regulations","Legitimate Interest: To operate and improve our platform services"]},dataRetention:{title:"6. Data Retention",content:"We retain your personal data across all our platforms for as long as necessary to provide our services and comply with legal obligations. Specifically: Active accounts are retained indefinitely; Inactive accounts may be deleted after 2 years of inactivity; Booking records are kept for 5 years for legal and tax purposes; Communications and reviews are retained for platform integrity. Your data may be accessible across indastreet.id and our sister sites."},security:{title:"7. Data Security",content:"We implement appropriate technical and organizational security measures to protect your personal data across all our platforms against unauthorized access, alteration, disclosure, or destruction. However, no method of transmission over the internet is 100% secure. While we strive to protect your information, we cannot guarantee absolute security. You are responsible for maintaining the confidentiality of your account credentials across all our platforms."},yourRights:{title:"8. Your Rights Under Indonesian Law",content:"Under UU PDP and applicable Indonesian regulations, you have the right to: Access your personal data across all our platforms; Correct inaccurate or incomplete data; Request deletion of your data from all our platforms (subject to legal retention requirements); Object to processing of your data; Withdraw consent at any time; Request data portability; File complaints with Indonesian authorities (Kementerian Komunikasi dan Informatika). To exercise these rights, contact us at the details provided below. Note: IndaStreet reserves the right to suspend or ban any user account across all our platforms at our sole discretion, with or without cause, as stated in our Terms and Conditions."},cookies:{title:"9. Cookies and Tracking Technologies",content:"We use cookies and similar tracking technologies across indastreet.id and our sister websites to enhance your experience, analyze usage patterns, and improve our services. Cookies may be shared between our platforms to provide seamless service. You can control cookies through your browser settings, but disabling cookies may affect platform functionality."},thirdPartyServices:{title:"10. Third-Party Services",content:"Our platforms (indastreet.id, indastreetmassage.com, and other sites) may contain links to third-party websites or services (including Google Maps, payment gateways, and WhatsApp). We are not responsible for the privacy practices of these third parties. We encourage you to review their privacy policies."},childrenPrivacy:{title:"11. Children's Privacy",content:"IndaStreet's platforms, including indastreet.id and sister sites, are not intended for users under the age of 18. We do not knowingly collect personal data from children across any of our platforms. If you believe a child has provided us with personal information, please contact us immediately."},dataTransfer:{title:"12. International Data Transfers",content:"Your data is primarily stored and processed in Indonesia across our network of platforms. Data may be transferred between our platforms (indastreet.id, indastreetmassage.com, and other sites) as needed to provide services. If we transfer data outside Indonesia, we will ensure appropriate safeguards are in place as required by Indonesian law."},policyChanges:{title:"13. Changes to This Privacy Policy",content:'We may update this Privacy Policy from time to time. Changes will be posted across all our platforms with an updated "Last Updated" date. Continued use of any IndaStreet platform after changes constitutes acceptance of the updated policy. For material changes, we will provide prominent notice across our network.'},governing:{title:"14. Governing Law and Jurisdiction",content:"This Privacy Policy applies to all IndaStreet platforms including indastreet.id and sister sites. It is governed by and construed in accordance with the laws of the Republic of Indonesia. Any disputes arising from this policy shall be subject to the exclusive jurisdiction of the courts in Jakarta, Indonesia."},disclaimer:{title:"15. Disclaimer",content:"IndaStreet (operating indastreet.id, indastreetmassage.com, and other platforms) is a directory and connection platform only. We are not responsible for the actions, services, or privacy practices of therapists, massage places, or other users. All interactions between users and service providers are at your own risk."},contact:{title:"16. Contact Us",content:"If you have questions about this Privacy Policy, wish to exercise your rights, or have privacy concerns regarding any of our platforms (indastreet.id, indastreetmassage.com, or other sites), please contact us at: Email: indastreet.id@gmail.com | WhatsApp: +62 XXX-XXXX-XXXX | Address: Jakarta, Indonesia"}};Se.id.registrationChoice={title:"Bergabung dengan Kami",prompt:"Apakah Anda terapis individu atau tempat pijat?",therapistButton:"Saya Terapis",placeButton:"Saya Tempat Pijat"};Se.id.joinIndastreet={title:"Bergabung dengan Direktori Pijat Indonesia",titleHighlight:"GRATIS HARI INI",subtitle:"Rasakan potensi sejati dari pemesanan pijat online",whyJoinTitle:"üåü Mengapa Bergabung dengan Indastreet?",whyJoinText:"Tidak peduli di mana Anda berada di seluruh Indonesia, pelanggan Indastreet sedang mencari layanan pijat sekarang. Jangan lewatkan‚Äîdaftarkan akun Anda GRATIS dan skalakan bisnis Anda ke tingkat berikutnya dengan platform pemesanan pijat terbesar di Indonesia.",benefitsTitle:"Manfaat",benefit1Title:"Dapatkan Lebih Banyak Pesanan",benefit1Text:"Jangkau pelanggan 24/7 dengan pemesanan online instan",benefit2Title:"Tingkatkan Pendapatan Anda",benefit2Text:"Isi jadwal Anda dengan pelanggan terverifikasi",benefit3Title:"Bangun Merek Anda",benefit3Text:"Tampilkan ulasan dan kembangkan reputasi Anda",platformFeaturesTitle:"‚ú® Fitur Platform",feature1Title:"Halaman Profil Anda Sendiri",feature1Text:"Profil profesional dengan foto, layanan, dan harga",feature2Title:"Notifikasi Real-Time",feature2Text:"Dapatkan peringatan instan untuk permintaan pemesanan baru",feature3Title:"Ulasan Pelanggan",feature3Text:"Bangun kepercayaan dengan umpan balik pelanggan terverifikasi",feature4Title:"Dashboard Mobile",feature4Text:"Kelola pemesanan di mana saja, kapan saja",feature5Title:"Kemitraan Hotel & Villa",feature5Text:"Dapatkan pemesanan dari properti mewah",feature6Title:"Tanpa Biaya Komisi",feature6Text:"Simpan 100% pendapatan Anda dari pemesanan",successStoriesTitle:"‚ù§Ô∏è Kisah Sukses",testimonial1Name:"Terapis Pijat Bali",testimonial1Text:"Saya menggandakan pemesanan saya dalam bulan pertama. Pelanggan menyukai sistem pemesanan online yang mudah!",testimonial1Rating:"‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê rating 4.9 ‚Ä¢ 250+ pemesanan",testimonial2Name:"Spa Kesehatan Ubud",testimonial2Text:"Program kemitraan hotel menghubungkan kami dengan villa mewah. Pendapatan kami meningkat 3x!",testimonial2Rating:"‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê rating 5.0 ‚Ä¢ 500+ pemesanan",howItWorksTitle:"üöÄ Cara Kerjanya",step1Title:"Buat Profil Anda",step1Text:"Tambahkan foto, layanan, harga, dan ketersediaan",step2Title:"Dapatkan Verifikasi",step2Text:"Selesaikan verifikasi untuk membangun kepercayaan pelanggan",step3Title:"Terima Pemesanan",step3Text:"Terima atau tolak permintaan langsung melalui notifikasi",step4Title:"Kembangkan Bisnis Anda",step4Text:"Kumpulkan ulasan, bangun reputasi, dan tingkatkan pendapatan",ctaTherapistTitle:"BERGABUNG SEBAGAI TERAPIS",ctaTherapistButton:"Buat Akun Terapis ‚Üí",ctaSpaTitle:"BERGABUNG SEBAGAI SPA PIJAT",ctaSpaButton:"Buat Akun Spa Pijat ‚Üí",contactTitle:"Butuh Bantuan untuk Memulai?",contactText:"Tim kami siap membantu Anda dengan proses pendaftaran",contactButton:"Hubungi Kami di WhatsApp"};Se.id.home={homeServiceTab:"Layanan Rumah",massagePlacesTab:"Tempat Pijat",therapistsTitle:"Terapis Pijat Rumahan",therapistsSubtitle:"Temukan terapis terbaik di Bali",noTherapistsAvailable:"Tidak ada terapis tersedia di area Anda saat ini.",noPlacesAvailable:"Tidak ada tempat pijat tersedia di area Anda",massagePlacesTitle:"Spa Pijat Unggulan",massagePlacesSubtitle:"Temukan tempat pijat terbaik di Bali",massageDirectory:"Direktori Pijat",massageDirectoryTitle:"Pergi ke Direktori Pijat",viewMassageSpa:"Lihat Spa Pijat",cityLocation:"Kota / Lokasi",readMore:"Baca Selengkapnya",readLess:"Baca Lebih Sedikit",aboutMassage:"Tentang",keyBenefits:"Manfaat Utama",bestFor:"Terbaik Untuk",findTherapists:"Cari Terapis",findMassagePlaces:"Cari Tempat Pijat",pressure:"Tekanan"};Se.id.blog={pageTitle:"Blog IndaStreet",featuredArticles:"Artikel Unggulan",allArticles:"Semua Artikel",readArticle:"Baca Artikel",readMore:"Baca Selengkapnya",stayUpdated:"Tetap Terupdate dengan Wawasan Industri Kesehatan",newsletterDesc:"Dapatkan artikel mingguan, tren industri, dan tips profesional langsung ke inbox Anda",enterEmail:"Masukkan email Anda",subscribe:"Berlangganan",popularTopics:"Topik Populer",topics:{balineseMassage:"Pijat Bali",hotelSpaManagement:"Manajemen Spa Hotel",therapistCertification:"Sertifikasi Terapis",wellnessTourism:"Pariwisata Kesehatan",deepTissueTechniques:"Teknik Deep Tissue",careerGrowth:"Pengembangan Karier",clientRetention:"Retensi Klien",aromatherapy:"Aromaterapi"},categoryAll:"Semua Artikel",categoryIndustry:"Tren Industri",categoryTechniques:"Teknik Pijat",categoryCareer:"Nasihat Karir",categoryWellness:"Tips Kesehatan",featured:"Unggulan"};Se.id.howItWorks={heroTitle:"Cara Kerja IndaStreet",heroSubtitle:"Panduan Lengkap Pasar Kesehatan Terkemuka di Indonesia",tabTherapists:"Terapis",tabHotels:"Hotel & Villa",tabEmployers:"Pemberi Kerja",tabAgents:"Agen",therapistTitle:"Bagaimana Terapis Sukses di IndaStreet",therapistSubtitle:"Bangun karir Anda, temukan peluang, kembangkan basis klien",step1Title:"Buat Profil Anda",step1Desc:"Daftar dan buat profil detail yang menampilkan sertifikat, spesialisasi, pengalaman, dan bahasa Anda.",step1Item1:"Unggah sertifikat",step1Item2:"Daftarkan spesialisasi",step1Item3:"Tambahkan pengalaman kerja",step2Title:"Pilih Keanggotaan Anda",step2Desc:"Pilih paket keanggotaan yang sesuai dengan kebutuhan Anda. Dapatkan verifikasi dan tampil di hasil pencarian.",step2Item1:"1, 3, 6, atau 12 bulan",step2Item2:"Lencana terverifikasi",step2Item3:"Penempatan prioritas",step3Title:"Mulai Menerima Pemesanan",step3Desc:"Terima permintaan pemesanan dari hotel, spa, dan klien langsung. Terima pekerjaan yang sesuai jadwal Anda.",step3Item1:"Notifikasi instan",step3Item2:"Integrasi WhatsApp",step3Item3:"Penjadwalan fleksibel",membershipBenefitsTitle:"Manfaat Keanggotaan",benefit1Title:"Visibilitas Ditingkatkan",benefit1Desc:"Muncul di bagian atas hasil pencarian",benefit2Title:"Pemesanan Klien Langsung",benefit2Desc:"Terima pemesanan dari klien terverifikasi",benefit3Title:"Dashboard Profesional",benefit3Desc:"Kelola pemesanan dan profil dengan mudah",benefit4Title:"Lencana Terverifikasi",benefit4Desc:"Bangun kepercayaan dengan status terverifikasi",hotelTitle:"Hotel & Villa Mitra",hotelSubtitle:"Terhubung dengan terapis terverifikasi, sederhanakan pemesanan, tingkatkan pengalaman tamu",employerTitle:"Untuk Pemberi Kerja",employerSubtitle:"Temukan terapis berkualitas, rekrut dengan percaya diri, kembangkan bisnis Anda",agentTitle:"Untuk Agen & Mitra",agentSubtitle:"Dapatkan komisi, kembangkan jaringan Anda, dukung kesehatan lokal",needHelpTitle:"Butuh Bantuan?",needHelpDesc:"Hubungi tim dukungan kami untuk pertanyaan apa pun",chatSupport:"Chat Dukungan Pelanggan",hotelSectionTitle:"Cara Hotel & Villa Menggunakan IndaStreet",hotelSectionSubtitle:"Temukan terapis berkualitas, kelola spa Anda, kembangkan bisnis",hotelStep1Title:"Daftarkan Properti Anda",hotelStep1Desc:"Buat akun hotel/villa dengan detail properti",hotelStep2Title:"Jelajahi Terapis",hotelStep2Desc:"Cari profesional terverifikasi berdasarkan spesialisasi dan lokasi",hotelStep3Title:"Kirim Permintaan Pemesanan",hotelStep3Desc:"Hubungi terapis langsung melalui integrasi WhatsApp",hotelStep4Title:"Kelola Spa Anda",hotelStep4Desc:"Lacak pemesanan, terapis, dan layanan dari dashboard",hotelBenefitsTitle:"Manfaat Hotel",hotelBenefit1Title:"Akses ke 500+ Terapis Terverifikasi",hotelBenefit1Desc:"Semua bersertifikat dengan pemeriksaan latar belakang",hotelBenefit2Title:"Solusi Staf Hari yang Sama",hotelBenefit2Desc:"Temukan terapis pengganti dengan cepat",hotelBenefit3Title:"Dashboard Manajemen Spa",hotelBenefit3Desc:"Lacak layanan, pemesanan, dan terapis",hotelBenefit4Title:"Terapis Multi-Bahasa",hotelBenefit4Desc:"Layani tamu internasional secara efektif",employerSectionTitle:"Cara Pemberi Kerja Merekrut di IndaStreet",employerSectionSubtitle:"Pasar kerja terlindungi privasi untuk perekrutan kontrak",employerCard1Title:"Jelajahi Pencari Kerja",employerCard1Desc:'Cari pasar "Terapis Untuk Kontrak" kami untuk menemukan profesional berkualitas yang aktif mencari peluang kerja.',employerCard1Item1:"Filter berdasarkan spesialisasi, pengalaman, lokasi",employerCard1Item2:"Lihat sertifikat dan riwayat pekerjaan",employerCard1Item3:"Nama dilindungi sampai Anda membuka",employerCard2Title:"Buka Detail Kontak",employerCard2Desc:"Bayar biaya satu kali IDR 300.000 untuk membuka informasi kontak lengkap termasuk nomor WhatsApp dan nama lengkap.",employerCard2Item1:"Pembayaran aman melalui transfer bank",employerCard2Item2:"Akses instan setelah verifikasi",employerCard2Item3:"Komunikasi WhatsApp langsung",employerCard3Title:"Wawancara & Rekrut",employerCard3Desc:"Hubungi terapis langsung melalui WhatsApp. Lakukan wawancara, periksa referensi, dan buat keputusan perekrutan.",employerCard3Item1:"Tidak ada biaya platform untuk perekrutan",employerCard3Item2:"Negosiasi persyaratan secara langsung",employerCard3Item3:"Verifikasi sertifikat sendiri",employerCard4Title:"Tinggalkan Ulasan",employerCard4Desc:"Setelah merekrut, tinggalkan ulasan jujur untuk membantu pemberi kerja lain dan membangun reputasi terapis di platform.",employerCard4Item1:"Nilai profesionalisme",employerCard4Item2:"Bagikan pengalaman Anda",employerCard4Item3:"Bantu membangun kepercayaan komunitas",employerPrivacyTitle:"Mengapa Model Privasi Kami Bekerja",employerPrivacyTherapist:"Untuk Terapis:",employerPrivacyTherapistDesc:"Melindungi mereka dari spam, pelecehan, dan kontak yang tidak diinginkan. Hanya pemberi kerja serius yang membayar dapat menghubungi mereka.",employerPrivacyEmployer:"Untuk Pemberi Kerja:",employerPrivacyEmployerDesc:"Memastikan akses ke pencari kerja serius. Biaya kecil menyaring pembuang waktu dan memastikan kandidat berkualitas.",agentSectionTitle:"Cara Agen Menghasilkan di IndaStreet",agentSectionSubtitle:"Rekrut terapis, dapatkan komisi, bangun jaringan Anda",agentStat1:"20%",agentStat1Label:"Tingkat Komisi",agentStat2:"‚àû",agentStat2Label:"Rekrutan Tidak Terbatas",agentStat3:"üí∞",agentStat3Label:"Penghasilan Pasif",agentStep1Title:"Daftar sebagai Agen",agentStep1Desc:"Daftar sebagai agen dan dapatkan kode referral unik untuk mulai merekrut terapis.",agentStep2Title:"Rekrut Terapis",agentStep2Desc:"Bagikan kode referral Anda dengan terapis. Ketika mereka mendaftar dan membeli keanggotaan, Anda mendapat komisi.",agentStep3Title:"Dapatkan Komisi",agentStep3Desc:"Terima komisi 20% untuk setiap pembelian keanggotaan dari terapis yang Anda referensikan. Lacak pendapatan di dashboard.",agentCommissionTitle:"Contoh Komisi",agentTablePackage:"Paket",agentTablePrice:"Harga",agentTableCommission:"Komisi Anda (20%)",agentTableRecurring:"Komisi Berulang (20%)",agentPackage1Month:"1 Bulan",agentPackage3Months:"3 Bulan",agentPackage6Months:"6 Bulan",agentPackage1Year:"1 Tahun",agentCommissionWorksTitle:"üí∞ Cara Kerja Komisi:",agentCommissionFirstMonth:"Bulan Pertama: Dapatkan komisi 20% ketika terapis yang Anda rekrut mendaftar untuk pertama kali",agentCommissionRecurring:"Berulang (Bulan 2+): Dapatkan komisi 20% setiap bulan terapis yang sama memperpanjang keanggotaan",agentExampleTitle:"Contoh:",agentExampleDesc:"Anda merekrut 1 terapis yang membeli paket 1 Bulan (IDR 200.000):",agentExampleMonth1:"Bulan 1: Anda mendapat IDR 40.000 (20%)",agentExampleMonth2:"Bulan 2: Jika mereka perpanjang, Anda mendapat IDR 40.000 (20%)",agentExampleMonth3Plus:"Bulan 3+: Anda terus mendapat IDR 40.000 (20%) setiap bulan mereka aktif",agentPassiveIncomeTitle:"üöÄ Bangun Penghasilan Pasif:",agentPassiveIncomeDesc:"Rekrut 10 terapis dengan paket 1 bulan = IDR 400.000 bulan pertama + IDR 400.000 setiap bulan mereka perpanjang!",agentTotalEarningsTitle:"üìä Total Pendapatan Dari 1 Anggota Aktif (IDR 200.000/bulan):",agentEarningsAfter1Month:"Setelah 1 Bulan",agentEarningsAfter1MonthAmount:"IDR 40.000",agentEarningsAfter1MonthDesc:"20% bulan pertama",agentEarningsAfter3Months:"Setelah 3 Bulan",agentEarningsAfter3MonthsAmount:"IDR 120.000",agentEarningsAfter3MonthsDesc:"Bulan 1 (20%) + Bulan 2-3 (20% masing-masing)"};Se.id.app={mapsApiKeyWarning:"Kunci API Google Maps tidak ada. Silakan konfigurasi di Admin Dashboard untuk mengaktifkan fitur lokasi."};Se.id.membershipPage={title:"Pilih Keanggotaan",selectPackage:"Pilih paket keanggotaan:",oneMonth:"1 Bulan - Rp 100,000",threeMonths:"3 Bulan - Rp 250,000",sixMonths:"6 Bulan - Rp 450,000",oneYear:"1 Tahun - Rp 800,000",contactAdmin:"Silakan hubungi admin kami di {number} untuk menyelesaikan pembayaran.",whatsappButton:"Hubungi Admin"};Se.id.bookingPage={title:"Buat Janji",selectDate:"Pilih Tanggal",selectTime:"Pilih Waktu",customerInfo:"Informasi Pelanggan",nameLabel:"Nama",whatsappLabel:"Nomor WhatsApp",notesLabel:"Catatan Tambahan (Opsional)",bookButton:"Buat Janji",fillFieldsError:"Mohon isi semua field yang diperlukan.",bookingSuccess:"Janji berhasil dibuat!",loginPrompt:"Silakan login untuk membuat booking",bookingSuccessTitle:"Booking Dikonfirmasi!",bookingSuccessMessage:"Booking Anda dengan {name} telah dikonfirmasi."};Se.id.notificationsPage={title:"Notifikasi",noNotifications:"Belum ada notifikasi.",markAllRead:"Tandai Semua Sudah Dibaca"};Se.id.agentPage={title:"Portal Agen",description:"Bergabunglah dengan program agen kami dan dapatkan komisi dengan mereferensikan terapis pijat dan tempat.",joinButton:"Bergabung sebagai Agen",learnMore:"Pelajari Lebih Lanjut"};Se.id.agentTermsPage={title:"Syarat & Ketentuan Agen",accept:"Saya Setuju",decline:"Tolak",terms:"Silakan baca dan terima syarat dan ketentuan untuk melanjutkan."};Se.id.detail={title:"Detail",description:"Deskripsi",contact:"Kontak",book:"Pesan Sekarang",location:"Lokasi",rating:"Rating",reviews:"Ulasan",pricing:"Harga",availability:"Ketersediaan",pricingTitle:"Harga",contactButton:"WhatsApp",bookButton:"Pesan Sekarang"};Se.id.supabaseSettings={title:"Pengaturan Database",url:"URL Supabase",key:"Kunci Supabase",connect:"Hubungkan",disconnect:"Putuskan",status:"Status Koneksi"};Se.id.serviceTerms={title:"Kebijakan Layanan",effectiveDate:"Tanggal Berlaku: 1 Januari 2025 | Terakhir Diperbarui: 25 Oktober 2025",intro:'Selamat datang di Platform Pijat IndoStreet. Syarat dan Ketentuan ini ("Ketentuan") merupakan perjanjian yang mengikat secara hukum antara Anda ("Pengguna", "Anda", atau "Milik Anda") dan IndoStreet Massage ("IndoStreet", "Kami", "Kita", atau "Milik Kami"). Dengan mengakses atau menggunakan platform, situs web, aplikasi seluler kami, atau layanan apa pun yang disediakan oleh IndoStreet, Anda mengakui bahwa Anda telah membaca, memahami, dan setuju untuk terikat oleh Ketentuan ini secara keseluruhan. Jika Anda tidak setuju dengan Ketentuan ini, Anda harus segera menghentikan semua penggunaan platform dan layanan kami.',acceptance:{title:"1. Penerimaan Ketentuan",content:"Dengan membuat akun, menjelajahi platform kami, atau terlibat dengan penyedia layanan apa pun yang terdaftar di IndoStreet, Anda secara tegas setuju untuk mematuhi dan terikat secara hukum oleh Syarat dan Ketentuan ini, Kebijakan Privasi kami, dan semua hukum dan peraturan yang berlaku di Republik Indonesia. Penggunaan platform Anda yang berkelanjutan merupakan penerimaan berkelanjutan atas modifikasi atau pembaruan Ketentuan ini. Kami berhak untuk memperbarui, memodifikasi, atau mengganti bagian mana pun dari Ketentuan ini atas kebijakan kami sendiri tanpa pemberitahuan sebelumnya. Adalah tanggung jawab Anda untuk meninjau Ketentuan ini secara berkala untuk perubahan."},platformNature:{title:"2. Sifat Platform dan Layanan",content:'IndoStreet beroperasi secara eksklusif sebagai direktori online dan platform koneksi. Kami menyediakan antarmuka teknologi yang memungkinkan pengguna untuk menemukan dan terhubung dengan terapis pijat independen dan tempat pijat ("Penyedia Layanan"). IndoStreet tidak mempekerjakan, berkontrak dengan, mengawasi, mengarahkan, atau mengontrol Penyedia Layanan apa pun yang terdaftar di platform kami. Semua Penyedia Layanan adalah kontraktor independen atau entitas bisnis independen yang beroperasi di bawah lisensi bisnis dan otoritas hukum mereka sendiri. IndoStreet tidak menyediakan layanan pijat, layanan kesehatan, atau layanan terapeutik apa pun secara langsung. Kami hanyalah platform teknologi yang memfasilitasi koneksi antara pengguna dan penyedia layanan independen.'},governingLaw:{title:"3. Hukum yang Mengatur dan Yurisdiksi",content:"Syarat dan Ketentuan ini, dan semua transaksi, operasi, layanan, dan aktivitas yang dilakukan melalui atau difasilitasi oleh platform IndoStreet, diatur secara eksklusif oleh dan ditafsirkan sesuai dengan hukum Republik Indonesia. Semua operasi bisnis, transaksi komersial, perjanjian layanan, dan sengketa yang timbul dari atau terkait dengan penggunaan IndoStreet harus tunduk pada hukum perdagangan Indonesia, peraturan komersial, hukum perlindungan konsumen, dan kebijakan bisnis sebagaimana diberlakukan dan ditegakkan oleh Pemerintah Republik Indonesia. Setiap proses hukum, sengketa, atau klaim yang timbul dari Ketentuan ini harus diajukan secara eksklusif di pengadilan Jakarta, Indonesia, dan Anda dengan ini menyetujui yurisdiksi eksklusif dan tempat pengadilan tersebut. Dengan menggunakan platform kami, Anda mengakui dan setuju bahwa hukum Indonesia akan berlaku untuk semua aspek penggunaan layanan kami, terlepas dari lokasi fisik atau tempat tinggal Anda."},userRights:{title:"4. Manajemen Akun Pengguna dan Hak Akses Platform",content:"IndoStreet berhak mutlak dan tanpa syarat untuk menangguhkan, menghentikan, menonaktifkan, atau secara permanen memblokir akun pengguna mana pun kapan saja, untuk alasan apa pun atau tanpa alasan sama sekali, tanpa pemberitahuan sebelumnya, tanpa penjelasan, dan tanpa kewajiban kepada pengguna atau pihak ketiga mana pun. Hak ini termasuk, namun tidak terbatas pada, situasi di mana kami menduga atau menentukan (atas kebijakan kami sendiri) bahwa pengguna telah melanggar Ketentuan ini, terlibat dalam aktivitas penipuan, menyalahgunakan platform, melecehkan penyedia layanan atau pengguna lain, memberikan informasi palsu, terlibat dalam aktivitas ilegal, atau karena alasan lain yang kami anggap sesuai untuk perlindungan platform kami, kepentingan bisnis kami, pengguna lain, atau penyedia layanan. IndoStreet tidak berkewajiban untuk memberikan alasan penangguhan atau penghentian akun. Pengguna yang akunnya telah dihentikan dilarang membuat akun baru tanpa izin tertulis kami. Kami berhak menolak layanan kepada siapa pun karena alasan apa pun kapan saja. Semua keputusan mengenai status akun bersifat final dan tidak dapat diajukan banding."},confidentiality:{title:"5. Kerahasiaan dan Privasi Data",content:"Semua informasi, data pribadi, korespondensi, dan materi yang diserahkan oleh pengguna ke IndoStreet, termasuk namun tidak terbatas pada informasi pendaftaran, data profil, komunikasi, informasi pembayaran, data penggunaan, dan informasi lain yang diberikan melalui platform kami, akan diperlakukan sebagai informasi rahasia dan kepemilikan yang dibagikan secara eksklusif antara pengguna dan manajemen IndoStreet. Informasi ini akan dikumpulkan, disimpan, diproses, dan digunakan sesuai dengan Kebijakan Privasi kami dan peraturan perlindungan data Indonesia. IndoStreet menerapkan langkah-langkah keamanan yang wajar untuk melindungi informasi pengguna; namun, tidak ada metode transmisi atau penyimpanan elektronik yang 100% aman. Dengan menggunakan platform kami, Anda mengakui risiko inheren dalam memberikan informasi online. IndoStreet tidak akan menjual, menyewakan, atau membagikan informasi pribadi Anda dengan pihak ketiga kecuali sebagaimana diuraikan dalam Kebijakan Privasi kami atau sebagaimana diwajibkan oleh hukum Indonesia. Kami dapat menggunakan data agregat dan anonim untuk tujuan analitik bisnis dan peningkatan platform. Anda memberikan IndoStreet lisensi abadi, tidak dapat dibatalkan, di seluruh dunia untuk menggunakan umpan balik, saran, atau ide yang Anda berikan mengenai platform kami tanpa kompensasi atau atribusi."},therapistRightsTitle:"6. Hak dan Keamanan Penyedia Layanan",therapistRightsContent:"Semua layanan yang difasilitasi melalui IndoStreet adalah ketat untuk terapi pijat profesional dan layanan kesehatan yang sah saja. Penyedia Layanan, sebagai kontraktor independen, mempertahankan hak mutlak untuk menolak layanan, menolak janji temu, atau mengakhiri sesi kapan saja jika mereka merasa tidak nyaman, tidak aman, terancam, atau jika mereka menentukan bahwa klien berada di bawah pengaruh alkohol atau zat yang dikendalikan, jika ada orang yang tidak sah hadir di lokasi layanan, jika klien membuat permintaan yang tidak pantas atau menampilkan perilaku yang tidak pantas, atau untuk alasan lain yang dianggap sesuai oleh Penyedia Layanan. IndoStreet sepenuhnya mendukung Penyedia Layanan dalam menjalankan penilaian profesional dan hak keselamatan pribadi mereka. Pengguna yang menunjukkan perilaku tidak hormat, mengancam, atau tidak pantas terhadap Penyedia Layanan akan memiliki akun mereka segera dihentikan dan dapat dilaporkan kepada otoritas penegak hukum setempat. Keamanan dan integritas profesional Penyedia Layanan adalah prioritas utama.",locationTrackingTitle:"6a. Pemantauan Lokasi dan Keselamatan (Penyedia Layanan)",locationTrackingContent:"Dengan menyetujui ketentuan ini dan mempertahankan profil aktif di IndaStreet sebagai terapis, tempat pijat, atau klinik perawatan kulit, Anda setuju bahwa pemantauan lokasi secara otomatis aktif untuk profil Anda. Tidak ada pengaturan nyala/mati‚Äîberlaku untuk semua terapis dan semua tempat di IndaStreet. IndaStreet dapat mengumpulkan, menggunakan, dan menyimpan data lokasi Anda (termasuk GPS atau informasi posisi lainnya) selama profil Anda aktif dan selama sesi layanan atau perjalanan ke dan dari pemesanan. Ini untuk keselamatan klien (termasuk wanita yang memesan layanan di rumah atau hotel) dan untuk keselamatan Anda sendiri sebagai penyedia. IndaStreet dapat memantau atau mengakses data lokasi tersebut ketika diperlukan untuk dukungan keselamatan, respons insiden, atau administrasi platform. Data lokasi akan diperlakukan sesuai dengan Kebijakan Privasi kami dan hukum yang berlaku. Anda dapat menarik persetujuan hanya dengan menonaktifkan profil atau berhenti menggunakan platform untuk penyediaan layanan.",contactSharingTitle:"6b. Larangan Berbagi Informasi Kontak di Luar Platform ‚Äî Peningkatan Komisi",contactSharingContent:"Anda tidak boleh membagikan nomor ponsel pribadi, WhatsApp, atau detail kontak langsung lainnya kepada pelanggan IndaStreet untuk tujuan mengatur atau menerima pemesanan di luar platform IndaStreet. Semua komunikasi dan transaksi terkait pemesanan harus tetap di IndaStreet. Berbagi informasi kontak untuk menghindari platform dan komisi merupakan pelanggaran serius terhadap ketentuan ini. Untuk setiap pelanggaran yang terverifikasi, tingkat komisi Anda akan dinaikkan minimal 5% (lima persen) per pelanggaran. IndaStreet dapat menggunakan data lokasi dan jarak untuk mendeteksi potensi pelanggaran: jarak 10, 15, atau 20 meter antara penyedia dan tamu (setelah pemesanan pertama) dapat dievaluasi dan diberi tier 1, 2, atau 3. Pemantauan jarak untuk tujuan ini hanya aktif 10 (sepuluh) jam setelah pemesanan online pertama yang selesai antara tamu dan penyedia tersebut; sebelum periode itu, tidak ada pelanggaran berbasis jarak yang diterapkan. IndaStreet berhak agar administrator dapat mengganti atau menghapus jumlah pelanggaran jika dianggap perlu (misalnya positif palsu atau pengecualian yang dibenarkan). Ini berlaku untuk semua terapis, tempat pijat, dan klinik perawatan kulit di IndaStreet. Anda setuju dengan struktur dan eskalasi komisi ini sebagai syarat penggunaan platform.",paymentTitle:"7. Ketentuan Pembayaran dan Transaksi Keuangan",paymentContent:"Pembayaran untuk semua paket pijat, layanan, dan biaya keanggotaan harus dilakukan secara penuh, dalam Rupiah Indonesia (IDR), sebelum dimulainya layanan atau aktivasi keanggotaan apa pun. Semua pembayaran diproses melalui saluran pembayaran resmi kami. Pembayaran mengonfirmasi penerimaan Anda terhadap ketentuan layanan dan paket spesifik yang dipilih. Layanan akan diberikan untuk durasi dan spesifikasi paket yang dibayar saja. Semua penjualan bersifat final kecuali ditentukan lain. IndoStreet tidak bertanggung jawab atas sengketa pembayaran antara pengguna dan Penyedia Layanan. Setiap permintaan pengembalian dana harus diajukan secara tertulis dalam waktu 24 jam setelah transaksi dan akan ditinjau berdasarkan kasus per kasus atas kebijakan kami sendiri. Biaya pemrosesan, biaya transaksi, dan biaya administratif tidak dapat dikembalikan dalam keadaan apa pun.",clientCommunicationTitle:"8. Komunikasi Pengguna-Penyedia dan Penyampaian Layanan",clientCommunicationContent:"Pengguna didorong dan diharapkan untuk menjaga komunikasi yang jelas dan profesional dengan Penyedia Layanan yang mereka pilih sepanjang proses penyampaian layanan. Anda dapat meminta penyesuaian tekanan pijat (keras, ringan, sedang), area fokus, atau teknik pada titik mana pun selama sesi Anda untuk memastikan kenyamanan dan kepuasan Anda. Jika Anda mengalami ketidaknyamanan, rasa sakit, atau kekhawatiran selama pijat Anda, Anda harus segera mengkomunikasikan ini kepada Penyedia Layanan Anda. Keluhan, sengketa, atau masalah mengenai kualitas layanan, perilaku penyedia, atau penyampaian layanan tidak dapat diterima, diproses, atau ditangani setelah selesainya sesi pijat. Semua kekhawatiran harus diangkat selama periode layanan aktif. IndoStreet mendorong komunikasi real-time antara pengguna dan penyedia untuk memastikan pengalaman layanan yang optimal.",clientRightsTitle:"9. Hak Pengguna dan Verifikasi Layanan",clientRightsContent:"Pengguna memiliki hak untuk memverifikasi bahwa Penyedia Layanan yang tiba untuk janji temu mereka sesuai dengan profil, foto, dan informasi yang ditampilkan di platform IndoStreet. Jika Penyedia Layanan yang tiba tidak sesuai dengan profil yang diiklankan atau jika ada perbedaan signifikan dalam identitas, kualifikasi, atau penampilan penyedia, pengguna berhak untuk membatalkan janji temu tanpa kewajiban pembayaran atau penalti pembatalan. Kepercayaan, keamanan, dan kepuasan Anda penting bagi kami. Namun, variasi kecil dalam penampilan karena fotografi, pencahayaan, atau perubahan alami dari waktu ke waktu harus diharapkan dan tidak merupakan alasan pembatalan. Pengguna diharapkan untuk menggunakan penilaian yang wajar saat memverifikasi identitas penyedia.",therapistObligationsTitle:"10. Kewajiban dan Standar Penyedia Layanan",therapistObligationsContent:"Penyedia Layanan diminta untuk menyediakan semua bahan, peralatan, dan perlengkapan penting yang diperlukan untuk memberikan layanan pijat profesional, termasuk namun tidak terbatas pada linen bersih, penutup tempat tidur, meja pijat atau peralatan portabel, tisu pembersih tangan, minyak atau lotion pijat bersertifikat, dan bahan lain yang standar untuk praktik terapi pijat profesional. Semua bahan harus memenuhi standar kesehatan dan keselamatan Indonesia. Jika Penyedia Layanan tiba tanpa peralatan atau bahan yang diperlukan untuk melakukan layanan yang diiklankan dengan aman dan profesional, pengguna berhak untuk membatalkan janji temu tanpa pembayaran dan tanpa penalti. Penyedia Layanan diharapkan untuk mempertahankan standar tertinggi profesionalisme, kebersihan, dan kualitas layanan.",professionalismTitle:"11. Standar Profesional dan Kode Etik",professionalismContent:"Semua Penyedia Layanan yang terdaftar di IndoStreet diwakili sebagai profesional berlisensi dan terlatih yang harus mempertahankan kepatuhan ketat terhadap standar terapi pijat profesional, perilaku etis, dan peraturan bisnis Indonesia. Jika Penyedia Layanan gagal mempertahankan batasan profesional, terlibat dalam perilaku yang tidak pantas, melanggar etika profesional, atau berperilaku dengan cara apa pun yang tidak konsisten dengan praktik terapi pijat profesional, pengguna sangat didorong dan diwajibkan untuk segera melaporkan perilaku tersebut kepada layanan pelanggan IndoStreet. Kami menangani semua laporan dengan serius dan akan menyelidiki keluhan secara menyeluruh. Penyedia Layanan yang ditemukan telah melanggar standar profesional akan dikenakan penghapusan segera dari platform kami dan dapat dilaporkan kepada otoritas perizinan yang relevan dan penegakan hukum sebagaimana mestinya.",userConduct:{title:"12. Perilaku Pengguna yang Dilarang",content:"Pengguna platform IndoStreet dilarang keras untuk terlibat dalam aktivitas berikut:",prohibitions:["Menggunakan platform untuk tujuan ilegal, melawan hukum, atau tidak sah berdasarkan hukum Indonesia atau hukum internasional","Meminta, mengajak, atau terlibat dalam layanan bersifat seksual, aktivitas ilegal, atau aktivitas yang melanggar etika terapi pijat profesional","Melecehkan, mengancam, mengintimidasi, atau menyalahgunakan Penyedia Layanan, pengguna lain, atau staf IndoStreet","Memberikan informasi palsu, menyesatkan, atau penipuan selama pendaftaran atau pada titik mana pun saat menggunakan platform","Mencoba untuk menghindari, menonaktifkan, atau mengganggu fitur keamanan platform atau mengakses area yang tidak sah","Menggunakan sistem otomatis, bot, scraper, atau teknologi apa pun untuk mengakses atau mengumpulkan data dari platform tanpa otorisasi","Memposting, mengirimkan, atau membagikan konten apa pun yang mencemarkan nama baik, cabul, ofensif, atau melanggar hak kekayaan intelektual","Menyamar sebagai orang atau entitas mana pun, atau secara salah mewakili afiliasi Anda dengan orang atau entitas mana pun","Mengganggu atau mengganggu platform, server, atau jaringan yang terhubung ke platform","Melanggar hukum atau peraturan lokal, negara bagian, nasional, atau internasional yang berlaku","Menggunakan platform untuk mengirimkan kode berbahaya, virus, atau teknologi berbahaya","Mencoba mendapatkan akses tidak sah ke akun pengguna lain atau sistem atau jaringan apa pun yang terhubung ke platform"]},intellectualProperty:{title:"13. Hak Kekayaan Intelektual",content:'Semua konten, fitur, fungsi, desain, logo, merek dagang, merek layanan, grafik, foto, teks, perangkat lunak, dan semua materi lain yang tersedia di platform IndoStreet ("Konten Platform") dimiliki oleh IndoStreet Massage, pemberi lisensi kami, atau penyedia konten lain dan dilindungi oleh hukum kekayaan intelektual Indonesia dan internasional termasuk hak cipta, merek dagang, paten, rahasia dagang, dan lainnya. Nama IndoStreet, logo, dan semua nama, logo, nama produk dan layanan, desain, gambar, dan slogan terkait adalah merek dagang IndoStreet atau afiliasi kami. Anda tidak boleh menggunakan tanda-tanda ini tanpa izin tertulis kami sebelumnya. Semua hak yang tidak secara tegas diberikan kepada Anda dalam Ketentuan ini dicadangkan oleh IndoStreet. Penggunaan Konten Platform yang tidak sah dapat melanggar hukum hak cipta, merek dagang, dan hukum lainnya dan dapat mengenakan Anda pada hukuman perdata dan pidana.'},disclaimerTitle:"14. Penafian Komprehensif atas Jaminan dan Kewajiban",disclaimerContent:'INDOSTREET MASSAGE ADALAH PLATFORM DIREKTORI DAN KONEKSI SAJA. KAMI TIDAK MEMPEKERJAKAN, MENGAWASI, MENGARAHKAN, MENGONTROL, MEMVERIFIKASI, MEMERIKSA, MEMERIKSA LATAR BELAKANG, MENSERTIFIKASI, ATAU MENJAMIN PENYEDIA LAYANAN APA PUN YANG TERDAFTAR DI PLATFORM KAMI. SEMUA PENYEDIA LAYANAN ADALAH KONTRAKTOR INDEPENDEN YANG MENGOPERASIKAN BISNIS MEREKA SENDIRI. KAMI TIDAK MEMBUAT REPRESENTASI, JAMINAN, ATAU GARANSI MENGENAI KUALIFIKASI, KETERAMPILAN, PERIZINAN, ASURANSI, LATAR BELAKANG, PERILAKU, KEAMANAN, KEANDALAN, KUALITAS, ATAU LEGALITAS PENYEDIA LAYANAN APA PUN. ANDA TERLIBAT DENGAN PENYEDIA LAYANAN SEPENUHNYA ATAS RISIKO DAN KEBIJAKAN ANDA SENDIRI. INDOSTREET TIDAK BERTANGGUNG JAWAB DAN TIDAK AKAN BERTANGGUNG JAWAB ATAS TINDAKAN, PERILAKU, KELALAIAN, LAYANAN, KUALITAS LAYANAN, MASALAH KESELAMATAN, CEDERA, KERUSAKAN, KERUGIAN, SENGKETA, KLAIM, ATAU HAL LAIN APA PUN YANG TIMBUL DARI ATAU TERKAIT DENGAN INTERAKSI ANDA DENGAN, LAYANAN YANG DITERIMA DARI, ATAU PERILAKU PENYEDIA LAYANAN APA PUN. DENGAN MENGGUNAKAN PLATFORM KAMI, ANDA SECARA TEGAS MENGAKUI DAN SETUJU BAHWA INDOSTREET MENYEDIAKAN PLATFORM "SEBAGAIMANA ADANYA" DAN "SEBAGAIMANA TERSEDIA" TANPA JAMINAN APA PUN, BAIK TERSURAT MAUPUN TERSIRAT, TERMASUK NAMUN TIDAK TERBATAS PADA JAMINAN TERSIRAT ATAS KELAYAKAN UNTUK DIPERDAGANGKAN, KESESUAIAN UNTUK TUJUAN TERTENTU, TIDAK ADA PELANGGARAN, ATAU JAMINAN APA PUN YANG TIMBUL DARI KURSUS KESEPAKATAN ATAU PENGGUNAAN PERDAGANGAN.',limitationOfLiability:{title:"15. Pembatasan Kewajiban dan Kerusakan",content:"SEJAUH MAKSIMUM YANG DIIZINKAN OLEH HUKUM INDONESIA, INDOSTREET, PERUSAHAAN INDUK, ANAK PERUSAHAAN, AFILIASI, PEJABAT, DIREKTUR, KARYAWAN, AGEN, MITRA, PEMBERI LISENSI, DAN PENYEDIA LAYANANNYA TIDAK AKAN BERTANGGUNG JAWAB ATAS KERUSAKAN TIDAK LANGSUNG, INSIDENTAL, KHUSUS, KONSEKUENSIAL, HUKUMAN, ATAU TELADAN APA PUN, TERMASUK NAMUN TIDAK TERBATAS PADA KERUSAKAN UNTUK KEHILANGAN KEUNTUNGAN, GOODWILL, PENGGUNAAN, DATA, ATAU KERUGIAN TAK BERWUJUD LAINNYA, YANG TIMBUL DARI ATAU TERKAIT DENGAN PENGGUNAAN ATAU KETIDAKMAMPUAN ANDA UNTUK MENGGUNAKAN PLATFORM ATAU LAYANAN, AKSES TIDAK SAH KE ATAU PERUBAHAN TRANSMISI ATAU DATA ANDA, PERNYATAAN ATAU PERILAKU PENYEDIA LAYANAN ATAU PIHAK KETIGA PADA PLATFORM, LAYANAN APA PUN YANG DITERIMA MELALUI PLATFORM, ATAU HAL LAIN APA PUN YANG TERKAIT DENGAN PLATFORM ATAU LAYANAN, BAIK BERDASARKAN JAMINAN, KONTRAK, GUGATAN (TERMASUK KELALAIAN), ATAU TEORI HUKUM LAINNYA, BAHKAN JIKA INDOSTREET TELAH DIBERITAHU TENTANG KEMUNGKINAN KERUSAKAN TERSEBUT. DALAM KEADAAN APA PUN TOTAL KEWAJIBAN INDOSTREET KEPADA ANDA UNTUK SEMUA KERUSAKAN, KERUGIAN, DAN PENYEBAB TINDAKAN TIDAK AKAN MELEBIHI JUMLAH YANG DIBAYARKAN OLEH ANDA KEPADA INDOSTREET DALAM ENAM (6) BULAN SEBELUM KLAIM, ATAU IDR 100.000 (SERATUS RIBU RUPIAH INDONESIA), MANA YANG LEBIH KECIL."},disputeResolution:{title:"16. Penyelesaian Sengketa dan Hubungan Pengguna-Penyedia",content:"Setiap dan semua sengketa, perselisihan, konflik, klaim, atau masalah yang timbul dari layanan yang diberikan, kualitas layanan, perilaku Penyedia Layanan, sengketa pembayaran, pembatalan, konflik penjadwalan, atau hal lain yang terkait dengan penyediaan layanan pijat HARUS diselesaikan secara langsung antara pengguna dan Penyedia Layanan. IndoStreet bukan pihak dalam perjanjian layanan apa pun antara pengguna dan Penyedia Layanan. IndoStreet tidak akan dan tidak akan bertindak sebagai mediator, arbiter, ajudikator, atau penyelesai sengketa dalam konflik apa pun antara pengguna dan Penyedia Layanan. Kami tidak akan campur tangan dalam sengketa, membuat penilaian mengenai kesalahan atau kewajiban, atau menegakkan obat apa pun antara pihak. Semua sengketa terkait layanan berada di luar lingkup tanggung jawab dan kewajiban IndoStreet. Pengguna dan Penyedia Layanan didorong untuk berkomunikasi secara langsung dan profesional untuk menyelesaikan masalah apa pun yang mungkin timbul."},indemnification:{title:"17. Kewajiban Ganti Rugi Pengguna",content:'Anda setuju untuk membela, mengganti rugi, mengkompensasi, dan menjaga sepenuhnya tidak berbahaya IndoStreet Massage, perusahaan induk, anak perusahaan, afiliasi, mitra, pejabat, direktur, karyawan, agen, kontraktor, pemberi lisensi, penyedia layanan, dan semua perwakilan IndoStreet (secara kolektif, "Pihak IndoStreet") dari dan terhadap setiap dan semua klaim, kerusakan, kewajiban, kerugian, kewajiban, biaya, utang, pengeluaran (termasuk namun tidak terbatas pada biaya pengacara dan biaya hukum), dan tuntutan yang timbul dari atau terkait dengan: (a) penggunaan atau penyalahgunaan Anda terhadap platform dan layanan; (b) pelanggaran Anda terhadap Syarat dan Ketentuan ini; (c) pelanggaran Anda terhadap hak pihak ketiga mana pun, termasuk namun tidak terbatas pada hak kekayaan intelektual, hak privasi, atau hak kepemilikan lainnya; (d) interaksi Anda dengan, layanan yang diterima dari, atau sengketa dengan Penyedia Layanan mana pun; (e) konten apa pun yang Anda kirimkan, posting, atau transmisikan melalui platform; (f) pelanggaran Anda terhadap hukum atau peraturan yang berlaku; (g) klaim apa pun bahwa penggunaan Anda terhadap platform menyebabkan kerusakan kepada pihak ketiga; (h) perilaku lalai atau salah Anda; atau (i) hal lain apa pun yang timbul dari penggunaan atau perilaku Anda di platform. Kewajiban ganti rugi ini akan tetap berlaku setelah penghentian akun Anda dan penggunaan Anda terhadap platform.'},modifications:{title:"18. Modifikasi terhadap Ketentuan dan Layanan",content:"IndoStreet berhak, atas kebijakan kami sendiri dan mutlak, untuk memodifikasi, mengubah, memperbarui, mengubah, menambahkan, atau menghapus bagian dari Syarat dan Ketentuan ini kapan saja tanpa pemberitahuan sebelumnya kepada pengguna. Kami juga dapat memodifikasi, menangguhkan, atau menghentikan aspek apa pun dari platform atau layanan, termasuk fitur, fungsi, basis data, konten, atau jam ketersediaan, sementara atau permanen, tanpa pemberitahuan dan tanpa kewajiban. Penggunaan platform Anda yang berkelanjutan setelah perubahan apa pun terhadap Ketentuan ini merupakan penerimaan Anda terhadap perubahan tersebut. Adalah tanggung jawab Anda untuk meninjau Ketentuan ini secara berkala. Jika Anda tidak setuju dengan modifikasi apa pun, satu-satunya obat Anda adalah untuk menghentikan penggunaan platform dan menutup akun Anda. Kami juga dapat memberlakukan batasan pada fitur tertentu atau membatasi akses Anda ke bagian atau semua platform tanpa pemberitahuan atau kewajiban."},severability:{title:"19. Keterpisahan dan Keberlakuan",content:"Jika ketentuan apa pun dari Syarat dan Ketentuan ini ditemukan oleh pengadilan yang berwenang atau arbiter sebagai tidak valid, ilegal, atau tidak dapat ditegakkan berdasarkan hukum Indonesia atau hukum yang berlaku, ketentuan tersebut akan dianggap dimodifikasi seminimal mungkin untuk membuatnya valid, legal, dan dapat ditegakkan sambil mempertahankan niatnya, atau jika modifikasi tersebut tidak mungkin, ketentuan tersebut akan dipisahkan dari Ketentuan ini. Ketidakvalidan, ilegalitas, atau ketidakmampuan untuk ditegakkan dari ketentuan apa pun tidak akan memengaruhi keabsahan, legalitas, atau keberlakuan dari ketentuan lain dari Ketentuan ini, yang akan tetap berlaku penuh. Ketentuan yang tersisa akan ditafsirkan untuk memberikan efek pada niat para pihak sebagaimana tercermin dalam ketentuan asli sejauh diizinkan oleh hukum."},entireAgreement:{title:"20. Keseluruhan Perjanjian dan Pengabaian",content:"Syarat dan Ketentuan ini, bersama dengan Kebijakan Privasi kami dan ketentuan, kebijakan, atau pedoman tambahan yang diposting di platform, merupakan keseluruhan perjanjian antara Anda dan IndoStreet mengenai penggunaan Anda terhadap platform dan layanan, dan menggantikan semua pemahaman, perjanjian, representasi, dan jaminan sebelumnya atau kontemporer, baik tertulis maupun lisan, mengenai materi pelajaran. Tidak ada pengabaian dari syarat atau ketentuan apa pun dari Ketentuan ini yang akan dianggap sebagai pengabaian lebih lanjut atau berkelanjutan dari syarat atau ketentuan tersebut atau syarat atau ketentuan lain apa pun. Setiap kegagalan oleh IndoStreet untuk menegakkan hak atau ketentuan apa pun dari Ketentuan ini tidak akan merupakan pengabaian dari hak atau ketentuan tersebut kecuali diakui dan disetujui oleh IndoStreet secara tertulis."},contactInformation:{title:"21. Informasi Kontak dan Dukungan Pelanggan",content:"Jika Anda memiliki pertanyaan, kekhawatiran, keluhan, atau pertanyaan mengenai Syarat dan Ketentuan ini, layanan kami, akun Anda, masalah penagihan, dukungan teknis, atau masalah lain yang terkait dengan platform IndoStreet, silakan hubungi tim layanan pelanggan kami melalui saluran layanan pelanggan resmi yang disediakan dalam aplikasi. Kami berusaha untuk menanggapi semua pertanyaan yang sah dalam waktu 48-72 jam kerja. Untuk masalah keselamatan mendesak atau untuk melaporkan pelanggaran Ketentuan ini, silakan gunakan sistem pelaporan prioritas kami yang tersedia melalui aplikasi."},customerServiceButton:"Hubungi Layanan Pelanggan",serviceProviderTerms:{modalTitle:"Therapist And Facial Services",modalSubtitle:"Syarat untuk terapis dan penyedia layanan facial ‚Äî IndaStreet",agreeButton:"Setuju syarat dan ketentuan",title:"Therapist And Facial Services",intro:"Dengan masuk atau menggunakan IndaStreet sebagai terapis atau penyedia layanan facial, Anda setuju dengan ketentuan berikut.",commissionTitle:"Komisi",commissionContent:"Anda wajib membayar komisi 30% kepada IndaStreet atas semua pendapatan dari: Book Now, Order Now, dan semua pemesanan terjadwal. Ini berlaku untuk setiap pemesanan yang dilakukan melalui platform.",noContactTitle:"Larangan Berbagi Informasi Kontak",noContactContent:"Anda tidak boleh membagikan nomor ponsel, WhatsApp, atau informasi kontak lainnya kepada klien di luar platform IndaStreet. Semua komunikasi dan transaksi terkait pemesanan harus tetap di platform.",noAccountSharingTitle:"Larangan Berbagi Akun",noAccountSharingContent:"Anda tidak boleh membagikan akun Anda kepada siapa pun. Setiap terapis atau tempat hanya boleh menggunakan akun terdaftar mereka sendiri. Berbagi atau meminjamkan akun merupakan pelanggaran serius dan dapat mengakibatkan penangguhan atau penghentian segera.",sexualOfferingTitle:"Larangan Tawaran Seksual ‚Äî Toleransi Nol",sexualOfferingContent:"Setiap tawaran, ajakan, atau pemberian layanan bersifat seksual melalui atau terkait platform akan dilaporkan kepada pihak berwenang. Akun Anda akan dibekukan dengan efek segera selama penyelidikan. Platform hanya untuk layanan pijat dan wellness profesional yang sah.",platformPurposeTitle:"Tujuan Platform dan Pengguna",platformPurposeContent:"Platform hanya untuk tujuan lalu lintas. Semua pengguna platform adalah pengguna IndaStreet Massage (indastreetmassage.com). Anda setuju menggunakan platform hanya untuk menerima dan memenuhi pemesanan melalui IndaStreet dan tidak mengalihkan lalu lintas atau pengguna ke saluran lain.",gpsTitle:"Persetujuan Lokasi GPS",gpsContent:"Semua penyedia layanan di IndaStreet setuju penggunaan lokasi GPS jika berlaku, untuk memberikan layanan yang aman bagi pengguna dan penyedia layanan. Data lokasi dapat digunakan untuk keselamatan, verifikasi, dan administrasi platform sesuai Kebijakan Privasi kami.",otherTitle:"Kewajiban Lain",otherContent:"Anda setuju hanya memberikan layanan pijat dan wellness profesional yang sah; mematuhi semua hukum dan peraturan yang berlaku; dan menjaga informasi profil yang akurat. IndaStreet berhak menangguhkan atau menghentikan akun yang melanggar ketentuan ini."}};Se.id.userTerms={modalBadge:"Untuk klien",modalTitle:"IndaStreet Massage ‚Äî Syarat untuk pengguna",title:"Syarat & Ketentuan untuk Pengguna",effectiveDate:"Berlaku untuk penggunaan indastreetmassage.com dan layanan IndaStreet.",intro:"Dengan menggunakan IndaStreet (indastreetmassage.com dan platform terkait) untuk menjelajah, memesan, atau menerima layanan pijat atau wellness, Anda setuju dengan Syarat & Ketentuan untuk pengguna ini. Harap baca dengan saksama.",acceptance:'Dengan mengklik "Setuju syarat dan ketentuan" di bawah, Anda mengonfirmasi bahwa Anda telah membaca dan setuju dengan ketentuan ini, termasuk bagian tentang lokasi dan keselamatan di bawah.',locationTrackingTitle:"Lokasi dan keselamatan (hanya layanan di indastreetmassage.com)",locationTrackingContent:"Kami menggunakan lokasi untuk memberi Anda pengalaman yang lebih baik: pembaruan tentang terapis dan tempat pijat terdekat, promosi yang relevan, serta untuk mencocokkan Anda dengan penyedia yang tepat. Saat Anda menggunakan layanan IndaStreet di indastreetmassage.com (dan platform IndaStreet terkait), kami dapat menggunakan informasi terkait lokasi hanya sehubungan dengan penyediaan dan pengamanan layanan tersebut‚Äîmisalnya untuk mencocokkan Anda dengan terapis terdekat, mendukung keselamatan Anda dan terapis selama pemesanan, dan meningkatkan penyampaian layanan. Ini hanya berlaku untuk penggunaan layanan Anda di indastreetmassage.com dan tidak melampaui platform kami. Dengan menyetujui, Anda setuju dengan penggunaan lokasi ini untuk layanan dan keselamatan di IndaStreet.",agreeButton:"Setuju syarat dan ketentuan"};Se.id.privacyPolicy={title:"Kebijakan Privasi",lastUpdated:"Terakhir Diperbarui: 1 Januari 2025",introduction:{title:"1. Pendahuluan",content:'IndoStreet ("kami", "milik kami", atau "kita") menghormati privasi Anda dan berkomitmen untuk melindungi data pribadi Anda. Kebijakan Privasi ini menjelaskan bagaimana kami mengumpulkan, menggunakan, menyimpan, dan membagikan informasi Anda saat menggunakan platform kami. Dengan menggunakan IndoStreet, Anda menyetujui pengumpulan dan penggunaan informasi sesuai dengan kebijakan ini. Kebijakan ini diatur oleh Hukum Indonesia termasuk namun tidak terbatas pada UU No. 27 Tahun 2022 tentang Perlindungan Data Pribadi (UU PDP).'},dataCollection:{title:"2. Informasi yang Kami Kumpulkan",personal:"Informasi Pribadi: Nama, alamat email, nomor telepon, nomor WhatsApp, dan informasi pembayaran yang Anda berikan saat registrasi atau booking",usage:"Data Penggunaan: Alamat IP, jenis browser, informasi perangkat, halaman yang dikunjungi, waktu yang dihabiskan di halaman, dan data diagnostik lainnya",location:"Data Lokasi: Koordinat GPS dan informasi alamat saat Anda menggunakan fitur berbasis lokasi untuk menemukan terapis dan tempat pijat terdekat",photos:"Foto dan Media: Foto profil, foto bisnis, dan gambar lain yang Anda unggah ke platform",communications:"Komunikasi: Pesan, ulasan, rating, dan feedback yang Anda berikan melalui platform kami"},dataUsage:{title:"3. Bagaimana Kami Menggunakan Informasi Anda",content:"Kami menggunakan informasi yang dikumpulkan untuk tujuan berikut:",points:["Untuk menyediakan dan memelihara layanan direktori dan pemesanan kami","Untuk memproses booking Anda dan memfasilitasi koneksi antara pengguna dan penyedia layanan","Untuk menghitung jarak antara lokasi Anda dengan terapis/tempat pijat","Untuk mengirim konfirmasi booking, notifikasi, dan pembaruan penting","Untuk meningkatkan platform kami dan mengembangkan fitur baru","Untuk mendeteksi, mencegah, dan menangani masalah teknis dan aktivitas penipuan","Untuk mematuhi kewajiban hukum berdasarkan hukum Indonesia","Untuk menegakkan Syarat dan Ketentuan kami"]},dataSharing:{title:"4. Berbagi dan Pengungkapan Informasi",content:"Kami dapat membagikan informasi Anda dengan:",points:["Penyedia Layanan: Terapis dan tempat pijat yang Anda booking akan menerima nama, informasi kontak, dan detail booking Anda","Agen: Agen resmi kami dapat mengakses data pengguna untuk memfasilitasi koneksi dan mengelola platform","Pemroses Pembayaran: Layanan pembayaran pihak ketiga untuk memproses transaksi Anda","Otoritas Pemerintah: Saat diwajibkan oleh hukum Indonesia atau proses hukum","Transfer Bisnis: Dalam hal merger, akuisisi, atau penjualan aset"],note:"Kami tidak menjual data pribadi Anda kepada pihak ketiga untuk tujuan pemasaran."},legalBasis:{title:"5. Dasar Hukum Pemrosesan (Hukum Indonesia)",content:"Berdasarkan UU Perlindungan Data Pribadi Indonesia (UU PDP), kami memproses data Anda berdasarkan:",points:["Persetujuan: Anda telah memberikan persetujuan yang jelas untuk kami memproses data pribadi Anda","Kontrak: Pemrosesan diperlukan untuk memenuhi perjanjian layanan kami dengan Anda","Kewajiban Hukum: Untuk mematuhi hukum dan peraturan Indonesia","Kepentingan Sah: Untuk mengoperasikan dan meningkatkan layanan platform kami"]},dataRetention:{title:"6. Penyimpanan Data",content:"Kami menyimpan data pribadi Anda selama diperlukan untuk menyediakan layanan kami dan mematuhi kewajiban hukum. Secara khusus: Akun aktif disimpan tanpa batas waktu; Akun tidak aktif dapat dihapus setelah 2 tahun tidak aktif; Catatan booking disimpan selama 5 tahun untuk tujuan hukum dan pajak; Komunikasi dan ulasan disimpan untuk integritas platform."},security:{title:"7. Keamanan Data",content:"Kami menerapkan langkah-langkah keamanan teknis dan organisasi yang sesuai untuk melindungi data pribadi Anda dari akses, perubahan, pengungkapan, atau penghancuran yang tidak sah. Namun, tidak ada metode transmisi melalui internet yang 100% aman. Meskipun kami berusaha melindungi informasi Anda, kami tidak dapat menjamin keamanan absolut. Anda bertanggung jawab untuk menjaga kerahasiaan kredensial akun Anda."},yourRights:{title:"8. Hak Anda Berdasarkan Hukum Indonesia",content:"Berdasarkan UU PDP dan peraturan Indonesia yang berlaku, Anda memiliki hak untuk: Mengakses data pribadi Anda; Memperbaiki data yang tidak akurat atau tidak lengkap; Meminta penghapusan data Anda (tunduk pada persyaratan retensi hukum); Menolak pemrosesan data Anda; Menarik persetujuan kapan saja; Meminta portabilitas data; Mengajukan keluhan kepada otoritas Indonesia (Kementerian Komunikasi dan Informatika). Untuk menggunakan hak-hak ini, hubungi kami di detail yang diberikan di bawah. Catatan: IndoStreet berhak untuk menangguhkan atau memblokir akun pengguna mana pun atas kebijakan kami sendiri, dengan atau tanpa alasan, sebagaimana dinyatakan dalam Syarat dan Ketentuan kami."},cookies:{title:"9. Cookie dan Teknologi Pelacakan",content:"Kami menggunakan cookie dan teknologi pelacakan serupa untuk meningkatkan pengalaman Anda, menganalisis pola penggunaan, dan meningkatkan layanan kami. Anda dapat mengontrol cookie melalui pengaturan browser Anda, tetapi menonaktifkan cookie dapat memengaruhi fungsi platform."},thirdPartyServices:{title:"10. Layanan Pihak Ketiga",content:"Platform kami dapat berisi tautan ke situs web atau layanan pihak ketiga (termasuk Google Maps, gateway pembayaran, dan WhatsApp). Kami tidak bertanggung jawab atas praktik privasi pihak ketiga ini. Kami mendorong Anda untuk meninjau kebijakan privasi mereka."},childrenPrivacy:{title:"11. Privasi Anak",content:"IndoStreet tidak ditujukan untuk pengguna di bawah usia 18 tahun. Kami tidak secara sengaja mengumpulkan data pribadi dari anak-anak. Jika Anda yakin seorang anak telah memberikan informasi pribadi kepada kami, segera hubungi kami."},dataTransfer:{title:"12. Transfer Data Internasional",content:"Data Anda terutama disimpan dan diproses di Indonesia. Jika kami mentransfer data di luar Indonesia, kami akan memastikan perlindungan yang sesuai sesuai dengan hukum Indonesia."},policyChanges:{title:"13. Perubahan Kebijakan Privasi Ini",content:'Kami dapat memperbarui Kebijakan Privasi ini dari waktu ke waktu. Perubahan akan diposting di halaman ini dengan tanggal "Terakhir Diperbarui" yang diperbarui. Penggunaan IndoStreet yang berkelanjutan setelah perubahan merupakan penerimaan kebijakan yang diperbarui. Untuk perubahan material, kami akan memberikan pemberitahuan yang jelas.'},governing:{title:"14. Hukum yang Mengatur dan Yurisdiksi",content:"Kebijakan Privasi ini diatur oleh dan ditafsirkan sesuai dengan hukum Republik Indonesia. Setiap sengketa yang timbul dari kebijakan ini akan tunduk pada yurisdiksi eksklusif pengadilan di Jakarta, Indonesia."},disclaimer:{title:"15. Penafian",content:"IndoStreet adalah platform direktori dan koneksi saja. Kami tidak bertanggung jawab atas tindakan, layanan, atau praktik privasi terapis, tempat pijat, atau pengguna lain. Semua interaksi antara pengguna dan penyedia layanan adalah risiko Anda sendiri."},contact:{title:"16. Hubungi Kami",content:"Jika Anda memiliki pertanyaan tentang Kebijakan Privasi ini, ingin menggunakan hak Anda, atau memiliki masalah privasi, silakan hubungi kami di: Email: privacy@indostreet.com | WhatsApp: +62 XXX-XXXX-XXXX | Alamat: Jakarta, Indonesia"}};Se.en.hotelVillaMenu={loadingMenu:"Loading menu...",venueNotFound:"Venue Not Found",menuNotAvailable:"This menu is not available.",welcomeTitle:"Welcome to Our Wellness Menu",welcomeDescription:"Browse our exclusive selection of professional therapists and wellness centers.",bookingNote:"Note the ID number and contact our front desk to book your perfect relaxation experience.",therapistsTab:"Therapists",wellnessCentersTab:"Wellness Centers",noTherapistsAvailable:"No therapists available at the moment",noWellnessCentersAvailable:"No wellness centers available at the moment",bookingId:"BOOKING ID",showToFrontDesk:"Show this number to our front desk",allRightsReserved:"All Rights Reserved"};Se.id.hotelVillaMenu={loadingMenu:"Memuat menu...",venueNotFound:"Venue Tidak Ditemukan",menuNotAvailable:"Menu ini tidak tersedia.",welcomeTitle:"Selamat Datang di Menu Wellness Kami",welcomeDescription:"Jelajahi pilihan eksklusif terapis profesional dan pusat kesehatan kami.",bookingNote:"Catat nomor ID dan hubungi front desk kami untuk memesan pengalaman relaksasi yang sempurna.",therapistsTab:"Terapis",wellnessCentersTab:"Pusat Wellness",noTherapistsAvailable:"Tidak ada terapis yang tersedia saat ini",noWellnessCentersAvailable:"Tidak ada pusat wellness yang tersedia saat ini",bookingId:"ID BOOKING",showToFrontDesk:"Tunjukkan nomor ini ke front desk kami",allRightsReserved:"Hak Cipta Dilindungi"};const vf=Object.freeze(Object.defineProperty({__proto__:null,default:Se,translations:Se},Symbol.toStringTag,{value:"Module"})),el=()=>{try{return localStorage.getItem("googleMapsApiKey")}catch{return null}},bs={endpoint:"https://syd.cloud.appwrite.io/v1",projectId:"68f23b11000d25eb3664",databaseId:"68f76ee1000e64ca8d05"},Wn={BOOKINGS:{name:"bookings",collectionId:"bookings_collection_id",attributes:{bookingId:{type:"string",required:!0},bookingDate:{type:"datetime",required:!0},status:{type:"string",required:!1},totalCost:{type:"double",required:!1},paymentMethod:{type:"string",required:!1},duration:{type:"integer",required:!1},providerId:{type:"string",required:!0},providerType:{type:"string",required:!0},providerName:{type:"string",required:!0},service:{type:"string",required:!0},startTime:{type:"datetime",required:!0},userId:{type:"string",required:!0},userName:{type:"string",required:!1},hotelId:{type:"string",required:!1},hotelGuestName:{type:"string",required:!1},hotelRoomNumber:{type:"string",required:!1},therapistId:{type:"string",required:!1},therapistName:{type:"string",required:!1},therapistType:{type:"string",required:!1},price:{type:"integer",required:!0},createdAt:{type:"datetime",required:!0},responseDeadline:{type:"datetime",required:!0},scheduledTime:{type:"datetime",required:!1},customerName:{type:"string",required:!1},customerWhatsApp:{type:"string",required:!1}}},MESSAGES:{name:"messages",collectionId:"messages",attributes:{messageId:{type:"string",required:!0,size:255},senderId:{type:"string",required:!0,size:255},recipientId:{type:"string",required:!0,size:255},content:{type:"string",required:!0,size:1e3},sentAt:{type:"datetime",required:!0},isRead:{type:"boolean",required:!1,default:!1},conversationId:{type:"string",required:!0,size:255},senderName:{type:"string",required:!0,size:255},senderRole:{type:"string",required:!0,size:255},receiverId:{type:"string",required:!0,size:255},receiverName:{type:"string",required:!0,size:255},receiverRole:{type:"string",required:!0,size:255},message:{type:"string",required:!0,size:1e4},messageType:{type:"string",required:!0,size:500},bookingId:{type:"string",required:!1,size:255},metadata:{type:"string",required:!1,size:1e3},senderType:{type:"string",required:!0,size:255}}},CHAT_MESSAGES:{name:"chat_messages",collectionId:"chat_messages",attributes:{senderId:{type:"string",required:!0,size:255},read:{type:"boolean",required:!0},senderName:{type:"string",required:!0,size:255},translatedText:{type:"string",required:!1,size:5e3},originalLanguage:{type:"string",required:!0,size:10},isSystemMessage:{type:"boolean",required:!0},readAt:{type:"datetime",required:!1},senderType:{type:"enum",required:!0,enumValues:["customer","therapist","place","system"]},roomId:{type:"string",required:!0,size:255},message:{type:"string",required:!0,size:5e3},createdAt:{type:"datetime",required:!0},translatedLanguage:{type:"enum",required:!1,enumValues:["en","id"]},recipientId:{type:"string",required:!0,size:255},recipientName:{type:"string",required:!0,size:255},recipientType:{type:"enum",required:!0,enumValues:["admin","therapist","place","hotel","villa","user","agent"]},messageType:{type:"enum",required:!0,enumValues:["text","image","file","booking","system","notification"]},fileUrl:{type:"string",required:!1,size:500},fileName:{type:"string",required:!1,size:255},location:{type:"string",required:!1,size:500},keepForever:{type:"boolean",required:!1,default:!1},conversationId:{type:"string",required:!0,size:255},receiverId:{type:"string",required:!0,size:255},receivername:{type:"string",required:!0,size:255},content:{type:"string",required:!0,size:255},bookingid:{type:"string",required:!0,size:255},originalMessageId:{type:"string",required:!0,size:255},expiresat:{type:"datetime",required:!0},markedForSave:{type:"boolean",required:!1,default:!1},savedby:{type:"string",required:!1,size:255},savedat:{type:"datetime",required:!1},archivedBy:{type:"string",required:!0,size:50},metadata:{type:"string",required:!1,size:500},sessionId:{type:"string",required:!0,size:150}}},ADMIN_MESSAGES:{name:"admin_messages",collectionId:"admin_messages",attributes:{messageId:{type:"string",required:!0},adminId:{type:"string",required:!0},recipientId:{type:"string",required:!0},subject:{type:"string",required:!1},body:{type:"string",required:!1},isRead:{type:"boolean",required:!1},timestamp:{type:"datetime",required:!0},senderId:{type:"string",required:!0},senderName:{type:"string",required:!0},senderType:{type:"string",required:!0},receiverId:{type:"string",required:!0},message:{type:"string",required:!0}}},INDASTREET_NEWS:{name:"indastreet_news",collectionId:"indastreet_news",attributes:{headline:{type:"string",required:!0,size:500},excerpt:{type:"string",required:!0,size:2e3},date:{type:"string",required:!0,size:50},category:{type:"enum",required:!0,enumValues:["techniques","producers","places-opening","places-closing","good-news","negative","headlines"]},imageSrc:{type:"string",required:!1,size:1e3},published:{type:"boolean",required:!1,default:!0},order:{type:"integer",required:!1}}},INDASTREET_BLOG:{name:"indastreet_blog",collectionId:"indastreet_blog",attributes:{title:{type:"string",required:!0,size:500},slug:{type:"string",required:!0,size:255},excerpt:{type:"string",required:!0,size:2e3},body:{type:"string",required:!0,size:1e5},category:{type:"enum",required:!0,enumValues:["international","industry","techniques","career","wellness"]},author:{type:"string",required:!0,size:255},date:{type:"string",required:!0,size:50},readTime:{type:"string",required:!0,size:50},image:{type:"string",required:!1,size:2e3},imageFileId:{type:"string",required:!1,size:100},featured:{type:"boolean",required:!1,default:!1},published:{type:"boolean",required:!1,default:!0},order:{type:"integer",required:!1}}}};class hn{static validateDocument(t,n){const s=Wn[t],i=[],r=[];for(const[l,o]of Object.entries(s.attributes))o.required&&!(l in n)&&(r.push(l),i.push("Missing required attribute: ".concat(l)));for(const[l,o]of Object.entries(n)){const c=s.attributes[l];(c==null?void 0:c.type)==="enum"&&c.enumValues&&o!==null&&o!==void 0&&(c.enumValues.includes(o)||i.push("Invalid enum value for ".concat(l,": ").concat(o,". Valid values: ").concat(c.enumValues.join(", "))))}return{valid:i.length===0,errors:i,missingRequired:r}}static getRequiredAttributes(t){const n=Wn[t];return Object.entries(n.attributes).filter(([s,i])=>i.required).map(([s,i])=>s)}static getCollectionId(t){return Wn[t].collectionId}}const cd=()=>Wn.MESSAGES,xs={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var ks={};const tl=(a,t="")=>{try{if(xs&&xs[a])return xs[a]}catch{}return typeof process!="undefined"&&ks&&ks[a]?ks[a]:t},ls=tl("VITE_GOOGLE_MAPS_API_KEY",""),h={endpoint:bs.endpoint,projectId:bs.projectId,databaseId:bs.databaseId,collections:{admins:null,therapists:Jt.therapists,places:null,facial_places:"facial_places_collection",agents:null,bookings:hn.getCollectionId("BOOKINGS"),reviews:Jt.reviews,notifications:Jt.notifications,users:Jt.users,booking_acknowledgments:"booking_acknowledgments",therapist_matches:"therapist_matches",chat_sessions:"chat_sessions",share_links:"share_links",agentVisits:"agent_visits",hotelBookings:"hotel_bookings",hotels:null,cities:null,villas:null,massageTypes:"massage_types",membershipPricing:"membership_pricing",imageAssets:"image_assets",loginBackgrounds:"login_backgrounds",customLinks:"custom_links_collection_id",translations:null,commissionRecords:"commission_records",attributes:"ATTRIBUTES",analyticsEvents:"analytics_events",therapistJobListings:"therapist_job_listings",employerJobPostings:"employer_job_postings",employerProfiles:"employer_profiles",bankDetails:"bank_details",paymentTransactions:"payment_transactions",premiumPayments:"premium_payments",therapistMenus:"therapist_menus",messages:hn.getCollectionId("MESSAGES"),packages:"Packages",pushSubscriptions:"push_subscriptions",loyaltyWallets:"loyalty_wallets",providerLoyaltySettings:"provider_loyalty_settings",coinTransactions:"coin_transactions",userRegistrations:"user_registrations",chatRooms:Jt.chat_rooms,chatMessages:hn.getCollectionId("CHAT_MESSAGES"),chatAuditLogs:"chat_audit_logs",chatSessions:"chat_sessions",chatTranslations:null,booking_locations:"booking_locations",payments:"Payments",leads:null,leadGenerations:"lead_generations",leadBillingSummary:"lead_billing_summary",membershipAgreements:"membership_agreements",membershipUpgrades:"membership_upgrades",deactivationRequests:"deactivation_requests",contactInquiries:"contact_inquiries",indastreetNews:"indastreet_news",indastreetBlog:"indastreet_blog",coins:"Coins",referrals:"Referrals",activeDiscounts:"active_discounts",appConfig:"app_config",affiliateClicks:"affiliate_clicks",affiliateAttributions:"affiliate_attributions",memberships:"Memberships",uiConfig:null},bucketId:"68f76bdd002387590584",facialPlacesBucketId:"6932f43700113926eb80",blogImagesBucketId:tl("VITE_APPWRITE_BLOG_BUCKET_ID","bogimages"),googleMaps:{apiKey:ls,libraries:["places","geometry"],region:"ID",language:"id"},country:{code:"ID",name:"Indonesia",currency:"IDR",currencySymbol:"Rp",locale:"id-ID",timezone:"Asia/Jakarta",phonePrefix:"+62"},languages:{admin:"en",member:["en","id"],customer:["en","id"]}},al=a=>{var i;const t=(el()||ls||"").trim();if(!t){a==null||a();return}if((i=window.google)!=null&&i.maps){a==null||a();return}const n=document.querySelector('script[src*="maps.googleapis.com"]');if(n){a&&n.addEventListener("load",a);return}const s=document.createElement("script");s.id="google-maps-script",s.src="https://maps.googleapis.com/maps/api/js?key=".concat(encodeURIComponent(t),"&libraries=places,geometry&region=ID&language=id&loading=async"),s.async=!0,s.defer=!0,s.onload=()=>{a&&a()},s.onerror=()=>{},document.head.appendChild(s)},nl=()=>{var a;return!!((a=window.google)!=null&&a.maps)},sl=()=>el()||ls||"",dd=()=>new Promise(a=>{if(nl()){a();return}if(!sl().trim()){a();return}al(()=>{a()})}),kn=Object.freeze(Object.defineProperty({__proto__:null,APPWRITE_CONFIG:h,GOOGLE_MAPS_API_KEY:ls,default:h,getGoogleMapsApiKey:sl,initializeGoogleMaps:dd,isGoogleMapsLoaded:nl,loadGoogleMapsScript:al},Symbol.toStringTag,{value:"Module"}));class ud{get collectionId(){return h.collections.share_links}async generateShortId(){let s=0;const i=10;for(;s<i;){const r=Math.floor(Math.random()*99e4+1e4).toString();if(!await this.checkShortIdExists(r))return r;s++}throw new Error("Failed to generate unique short ID after "+i+" attempts")}async checkShortIdExists(t){try{return(await K.listDocuments(h.databaseId,this.collectionId,[b.equal("shortId",t)])).documents.length>0}catch{return!1}}normalizeTypeForStorage(t){return t==="facial"?"place":t}generateSlug(t,n,s){const i={Bali:"pijat-bali",Ubud:"pijat-ubud",Seminyak:"pijat-seminyak",Canggu:"pijat-canggu",Sanur:"pijat-sanur","Nusa Dua":"pijat-nusa-dua",Kuta:"pijat-kuta",Denpasar:"pijat-denpasar",Jakarta:"pijat-jakarta","Jakarta Selatan":"pijat-jakarta-selatan","Jakarta Pusat":"pijat-jakarta-pusat","Jakarta Barat":"pijat-jakarta-barat","Jakarta Timur":"pijat-jakarta-timur","Jakarta Utara":"pijat-jakarta-utara",Bandung:"pijat-bandung",Surabaya:"pijat-surabaya",Yogyakarta:"pijat-jogja",Semarang:"pijat-semarang",Medan:"pijat-medan",Makassar:"pijat-makassar",Bogor:"pijat-bogor",Depok:"pijat-depok",Tangerang:"pijat-tangerang",Bekasi:"pijat-bekasi",Malang:"pijat-malang",Palembang:"pijat-palembang",Pekanbaru:"pijat-pekanbaru",Balikpapan:"pijat-balikpapan",Lombok:"pijat-lombok",Batam:"pijat-batam",Manado:"pijat-manado",Jimbaran:"pijat-jimbaran",Legian:"pijat-legian"},r=t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();let l="";if(s){if(l=i[s]||"",!l){for(const[c,d]of Object.entries(i))if(s.toLowerCase().includes(c.toLowerCase())){l=d;break}}l||(l="pijat-"+s.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-"))}return(l?"".concat(l,"-").concat(r):"pijat-".concat(r)).substring(0,100)}async createShareLink(t,n,s,i){try{const r=await this.generateShortId(),l=this.generateSlug(s,t,i),o=this.normalizeTypeForStorage(t);let c=l;if(await this.checkSlugExists(c)){const f=Math.floor(Math.random()*1e4);c="".concat(l,"-").concat(f)}const m={linkId:"https://www.indastreetmassage.com/share/".concat(r),linkedItemId:n,linkedItemType:o,shortId:r,slug:c,entityType:o,entityId:n,entityName:s,isActive:!0,clickCount:0,accessCount:0,createdAt:new Date().toISOString()};return await K.createDocument(h.databaseId,this.collectionId,"unique()",m)}catch(r){throw r}}async checkSlugExists(t){try{return(await K.listDocuments(h.databaseId,this.collectionId,[b.equal("slug",t)])).documents.length>0}catch{return!1}}async getByShortIdOrSlug(t){try{const n=t.replace("#","");if(/^\d+$/.test(n)){const i=await K.listDocuments(h.databaseId,this.collectionId,[b.equal("shortId",n),b.equal("isActive",!0)]);if(i.documents.length>0)return await this.incrementClickCount(i.documents[0].$id),i.documents[0]}const s=await K.listDocuments(h.databaseId,this.collectionId,[b.equal("slug",n),b.equal("isActive",!0)]);return s.documents.length>0?(await this.incrementClickCount(s.documents[0].$id),s.documents[0]):null}catch{return null}}async getByEntity(t,n){try{const s=this.normalizeTypeForStorage(t),i=await K.listDocuments(h.databaseId,this.collectionId,[b.equal("linkedItemType",s),b.equal("linkedItemId",n),b.equal("isActive",!0)]);return i.documents.length>0?i.documents[0]:null}catch{return null}}async incrementClickCount(t){try{const n=await K.getDocument(h.databaseId,this.collectionId,t);await K.updateDocument(h.databaseId,this.collectionId,t,{clickCount:(n.clickCount||0)+1,accessCount:(n.accessCount||0)+1,updatedAt:new Date().toISOString()})}catch{}}async updateShareLink(t,n){try{return await K.updateDocument(h.databaseId,this.collectionId,t,{...n,updatedAt:new Date().toISOString()})}catch(s){throw s}}async deactivateShareLink(t){try{await this.updateShareLink(t,{isActive:!1})}catch(n){throw n}}async getOrCreateShareLink(t,n,s,i){const r=await this.getByEntity(t,n);return r||await this.createShareLink(t,n,s,i)}}const qa=new ud,wf=Object.freeze(Object.defineProperty({__proto__:null,shareLinkService:qa},Symbol.toStringTag,{value:"Module"}));class md{constructor(){Z(this,"shareLinkCache",null);Z(this,"cacheTimestamp",0);Z(this,"CACHE_TTL",6e4)}async auditAllShareLinks(){const t={therapists:[],places:[],facials:[],summary:{total:0,withLinks:0,missingLinks:0}},n=await this.getAllShareLinks(),s=new Map;n.forEach(r=>{s.set("".concat(r.entityType,"_").concat(r.entityId),r)});try{const r=await K.listDocuments(h.databaseId,h.collections.therapists,[b.limit(500)]);for(const l of r.documents){const o="therapist_".concat(l.$id),c=s.has(o),d=this.extractCityFromLocation(l.location);t.therapists.push({type:"therapist",id:l.$id,name:l.name||"Unnamed Therapist",city:d,hasShareLink:c,shareUrl:c?this.buildShareUrl(s.get(o)):void 0})}}catch{}try{const r=await K.listDocuments(h.databaseId,h.collections.places,[b.limit(500)]);for(const l of r.documents){const o="place_".concat(l.$id),c=s.has(o),d=this.extractCityFromLocation(l.location);t.places.push({type:"place",id:l.$id,name:l.name||"Unnamed Place",city:d,hasShareLink:c,shareUrl:c?this.buildShareUrl(s.get(o)):void 0})}}catch{}try{const r=await K.listDocuments(h.databaseId,h.collections.facial_places,[b.limit(500)]);for(const l of r.documents){const o="facial_".concat(l.$id),c=s.has(o),d=this.extractCityFromLocation(l.address);t.facials.push({type:"facial",id:l.$id,name:l.name||"Unnamed Facial Place",city:d,hasShareLink:c,shareUrl:c?this.buildShareUrl(s.get(o)):void 0})}}catch{}const i=[...t.therapists,...t.places,...t.facials];return t.summary={total:i.length,withLinks:i.filter(r=>r.hasShareLink).length,missingLinks:i.filter(r=>!r.hasShareLink).length},t}async createMissingShareLinks(){const t={totalEntities:0,entitiesWithLinks:0,entitiesMissingLinks:0,linksCreated:0,errors:[]},n=await this.auditAllShareLinks();t.totalEntities=n.summary.total,t.entitiesWithLinks=n.summary.withLinks,t.entitiesMissingLinks=n.summary.missingLinks;for(const s of n.therapists.filter(i=>!i.hasShareLink))try{await qa.createShareLink("therapist",s.id,s.name,s.city||"Bali"),t.linksCreated++}catch(i){const r="Failed to create therapist link for ".concat(s.name,": ").concat(i);t.errors.push(r)}for(const s of n.places.filter(i=>!i.hasShareLink))try{await qa.createShareLink("place",s.id,s.name,s.city||"Jakarta"),t.linksCreated++}catch(i){const r="Failed to create place link for ".concat(s.name,": ").concat(i);t.errors.push(r)}for(const s of n.facials.filter(i=>!i.hasShareLink))try{await qa.createShareLink("facial",s.id,s.name,s.city||"Bali"),t.linksCreated++}catch(i){const r="Failed to create facial link for ".concat(s.name,": ").concat(i);t.errors.push(r)}return t}async validateFacebookCompliance(){const t=[],n=[],s=await this.getAllShareLinks();for(const i of s.slice(0,10))i.linkId.startsWith("https://")||t.push("Non-HTTPS URL detected: ".concat(i.linkId)),(!i.slug||i.slug.length<3)&&t.push("Poor SEO slug for ".concat(i.entityName,': "').concat(i.slug,'"')),i.entityName||t.push("Missing entity name for ".concat(i.entityId));return n.push("‚úÖ All URLs are HTTPS for secure sharing"),n.push("‚úÖ SEO-optimized slugs for better social media appearance"),n.push("‚úÖ Indonesian keywords for local SEO"),n.push("‚úÖ Structured data for rich snippets"),n.push("‚úÖ Proper Open Graph meta tags implementation"),{compliant:t.length===0,issues:t,recommendations:n}}async healthCheck(){try{const t=await K.listDocuments(h.databaseId,h.collections.share_links,[b.limit(1)]);return{status:"healthy",message:"‚úÖ Share links system operational",stats:{totalLinks:t.total,activeLinks:t.total,brokenLinks:0,coveragePercent:100}}}catch{return{status:"critical",message:"‚ùå Unable to check share links system",stats:{totalLinks:0,activeLinks:0,brokenLinks:0,coveragePercent:0}}}}async getAllShareLinks(t=!0){if(t&&this.shareLinkCache&&Date.now()-this.cacheTimestamp<this.CACHE_TTL)return this.shareLinkCache;try{const n=await K.listDocuments(h.databaseId,h.collections.share_links,[b.limit(1e3)]);return this.shareLinkCache=n.documents,this.cacheTimestamp=Date.now(),this.shareLinkCache}catch{return this.shareLinkCache||[]}}extractCityFromLocation(t){return t&&t.split(",")[0].trim()||"Bali"}buildShareUrl(t){return"https://www.indastreetmassage.com/share/".concat(t.slug,"/").concat(t.entityId)}}const ra=new md;globalThis.auditShareLinks=()=>ra.auditAllShareLinks();globalThis.createMissingShareLinks=()=>ra.createMissingShareLinks();globalThis.checkFacebookCompliance=()=>ra.validateFacebookCompliance();globalThis.shareLinksHealth=()=>ra.healthCheck();class gd{constructor(){Z(this,"initialized",!1);Z(this,"runningCheck",!1)}async initialize(){var t,n;if(!(this.initialized||this.runningCheck)){this.runningCheck=!0;try{if(!(((n=(t=import.meta)==null?void 0:t.env)==null?void 0:n.MODE)==="admin")){this.initialized=!0;return}(await ra.healthCheck()).stats.coveragePercent<100&&(await ra.createMissingShareLinks()).errors.length>0,this.initialized=!0,this.schedulePeriodicValidation()}catch{}finally{this.runningCheck=!1}}}schedulePeriodicValidation(){setInterval(async()=>{try{(await ra.healthCheck()).stats.coveragePercent<95&&await ra.createMissingShareLinks()}catch{}},1800*1e3)}async ensureEntityHasShareLink(t,n,s,i){try{const r=await this.findExistingShareLink(t,n);if(r)return{success:!0,shareUrl:"https://www.indastreetmassage.com/share/".concat(r.slug,"/").concat(r.entityId)};const l=await qa.createShareLink(t,n,s,i||(t==="therapist"?"Bali":"Jakarta"));return{success:!0,shareUrl:"https://www.indastreetmassage.com/share/".concat(l.slug,"/").concat(l.entityId)}}catch(r){return{success:!1,error:r.toString()}}}async findExistingShareLink(t,n){try{const{databases:s}=await Ce(async()=>{const{databases:o}=await Promise.resolve().then(()=>wn);return{databases:o}},void 0),{APPWRITE_CONFIG:i}=await Ce(async()=>{const{APPWRITE_CONFIG:o}=await Promise.resolve().then(()=>kn);return{APPWRITE_CONFIG:o}},void 0),{Query:r}=await Ce(async()=>{const{Query:o}=await import("./vendor-appwrite.BT2H32tF.js");return{Query:o}},[]),l=await s.listDocuments(i.databaseId,i.collections.share_links,[r.equal("entityType",t),r.equal("entityId",n),r.limit(1)]);return l.documents.length>0?l.documents[0]:null}catch{return null}}getStatus(){return{initialized:this.initialized,runningCheck:this.runningCheck}}}const il=new gd;setTimeout(()=>{il.initialize().catch(a=>{})},2e3);const Za=(()=>{const a={hostname:typeof window!="undefined"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes("localhost")||window.location.port==="3000"||window.location.port==="3001"||window.location.port==="3003"),url:typeof window!="undefined"&&window.location.href.includes("localhost")};return a.hostname||a.url})(),pd={maxRetries:Za?5:3,baseDelay:Za?500:1e3,maxDelay:Za?5e3:1e4,backoffMultiplier:2},tn=new Map,hd=Za?100:30,fd=6e4;function yd(a){if(Za)return!1;const t=Date.now(),s=(tn.get(a)||[]).filter(i=>t-i<fd);return tn.set(a,s),s.length>=hd}function bd(a){const t=Date.now(),n=tn.get(a)||[];n.push(t),tn.set(a,n)}function vs(a){return new Promise(t=>setTimeout(t,a))}function xd(a,t){const n=t.baseDelay*Math.pow(t.backoffMultiplier,a-1);return Math.min(n,t.maxDelay)}function Xr(a){var t,n,s;return(a==null?void 0:a.code)===429||(a==null?void 0:a.status)===429||((t=a==null?void 0:a.message)==null?void 0:t.includes("429"))||((n=a==null?void 0:a.message)==null?void 0:n.includes("rate limit"))||((s=a==null?void 0:a.message)==null?void 0:s.includes("Too Many Requests"))}async function ha(a,t,n=pd){let s;if(Za||window.FORCE_DEV_MODE)try{return await a()}catch(r){if(Xr(r)){await vs(2e3);try{return await a()}catch(l){throw l}}throw r}yd(t)&&await vs(5e3);for(let r=1;r<=n.maxRetries+1;r++)try{bd(t);const l=await a();return r>1,l}catch(l){if(s=l,Xr(l)){if(r<=n.maxRetries){const o=xd(r,n);await vs(o);continue}}else throw l}throw s}window.clearApiCallTracker=()=>{tn.clear()};window.disableRateLimiting=()=>{window.FORCE_DEV_MODE=!0};window.resetAllRateLimits=()=>{tn.clear()};window.forceDevMode=()=>{window.FORCE_DEV_MODE=!0};const an={DATA_SOURCE:"mock",APPWRITE:{ENDPOINT:"https://syd.cloud.appwrite.io/v1",PROJECT_ID:"68f23b11000d25eb3664",DATABASE_ID:"68f76ee1000e64ca8d05"},DEFAULT_LANGUAGE:"en",DEFAULT_CONTACT_NUMBER:"6281392000050",FEATURES:{GOOGLE_MAPS:!0,PUSH_NOTIFICATIONS:!0,ADMIN_DASHBOARD:!0,AGENT_SYSTEM:!0}},vi=new ct().setEndpoint(an.APPWRITE.ENDPOINT).setProject(an.APPWRITE.PROJECT_ID),Xa=new Zt(vi),kd=new bi(vi),vd=new xi(vi),ie=Xa,lt=kd,wi=vd,wd={async getCurrentUser(){try{return await ha(()=>lt.get(),"account_get")}catch(a){return(a==null?void 0:a.code)!==401&&(a==null||a.type),null}},async login(a,t){try{try{await ha(()=>lt.deleteSession("current"),"account_delete_session")}catch{}await ha(()=>lt.createEmailPasswordSession(a,t),"account_login");const n=await ha(()=>lt.get(),"account_get_after_login");if(n!=null&&n.$id)try{localStorage.setItem("therapist_session_backup",JSON.stringify({userId:n.$id,email:n.email,timestamp:Date.now()}))}catch{}return n}catch(n){throw n}},async register(a,t,n,s){var i,r,l;try{const o=a.trim();if(!o)throw new Error("Email is required");if(!t||t.length<8)throw new Error("Password must be at least 8 characters long");if(!n||n.trim().length===0)throw new Error("Name is required");try{await ha(()=>lt.deleteSession("current"),"account_delete_session_register")}catch{}const c=await ha(()=>lt.create("unique()",o,t,n),"account_create");if((s==null?void 0:s.autoLogin)!==!1){await ha(()=>lt.createEmailPasswordSession(o,t),"account_login_after_register");try{localStorage.setItem("therapist_session_backup",JSON.stringify({userId:c.$id,email:o,timestamp:Date.now()}))}catch{}}return c}catch(o){throw o.code===409||(i=o.message)!=null&&i.includes("already exists")?new Error("An account with this email already exists"):o.code===400||(r=o.message)!=null&&r.toLowerCase().includes("password")?new Error("Password must be at least 8 characters long"):o.code===429||(l=o.message)!=null&&l.includes("rate limit")?new Error("Too many registration attempts. Please wait a moment"):o.code===400?new Error("Unable to create account. Please try a different email or contact support at indastreet.id@gmail.com."):new Error(o.message||"Registration failed. Please try again")}},async logout(){try{await ha(()=>lt.deleteSession("current"),"account_logout");try{localStorage.removeItem("therapist_session_backup")}catch{}}catch(a){throw a}},async createAnonymousSession(){try{const a=await Promise.race([lt.get(),new Promise((t,n)=>setTimeout(()=>n(new Error("timeout")),3e3))]).catch(()=>null);return a||(await Promise.race([lt.createAnonymousSession(),new Promise((t,n)=>setTimeout(()=>n(new Error("timeout")),5e3))]),await lt.get())}catch(a){const t=(a==null?void 0:a.code)||(a==null?void 0:a.status),n=(a==null?void 0:a.message)||"";return t===429||n.includes("429")||t===501||n.includes("501")?null:n.includes("already exists")?await lt.get().catch(()=>null):null}},createGoogleSession(a,t){try{const n=lt;typeof n.createOAuth2Session=="function"&&(n.createOAuth2Session.length>=3?n.createOAuth2Session("google",a,t):n.createOAuth2Session({provider:"google",success:a,failure:t}))}catch(n){throw new Error((n==null?void 0:n.message)||"Could not start Google sign-in")}}},Nf=30,Sf=17e4,jf={PENDING_PAYMENT:"pending_payment",PENDING_APPROVAL:"pending_approval",ACTIVE:"active",FILLED:"filled"},If=25e4,Nd=!0,ws={bankName:!0,accountName:!0,accountNumber:!0},Ze={async sendMessage(a){try{const t=new Date().toISOString(),n={message:a.message,content:a.message.length>255?a.message.substring(0,255):a.message,senderId:a.senderId,senderName:a.senderName,senderType:a.senderRole,recipientId:a.receiverId,recipientName:a.receiverName,recipientType:a.receiverRole,roomId:a.conversationId,conversationId:a.conversationId,receiverId:a.receiverId,receivername:a.receiverName,sessionId:a.conversationId,messageType:a.messageType||"text",originalLanguage:"en",createdAt:t,read:!1,isSystemMessage:!1,bookingid:a.bookingId||"none",originalMessageId:"none",expiresat:new Date(Date.now()+1440*60*1e3).toISOString(),archivedBy:"none",metadata:JSON.stringify(a.metadata||{})};return a.bookingId&&(n.bookingId=a.bookingId),await K.createDocument(h.databaseId,h.collections.chatMessages,se.unique(),n)}catch(t){throw t}},async getMessages(a){try{return(await K.listDocuments(h.databaseId,h.collections.chatMessages,[b.equal("conversationId",a),b.orderDesc("$createdAt"),b.limit(100)])).documents.map(s=>({...s,metadata:s.metadata?JSON.parse(s.metadata):{}})).reverse()}catch{return[]}},subscribeToMessages(a,t){try{const n=h.collections.chatMessages,s="databases.".concat(h.databaseId,".collections.").concat(n,".documents");return $t.subscribe(s,r=>{const l=r.payload;l.conversationId===a&&t(l)})}catch{return()=>{}}}},Sd={async updateStatus(a,t,n){try{if(t==="confirmed"&&n){const{isScheduled:s,bankName:i,accountName:r,accountNumber:l}=n;if(Nd&&s){const o=[];if(ws.bankName&&!i&&o.push("Bank Name"),ws.accountName&&!r&&o.push("Account Name"),ws.accountNumber&&!l&&o.push("Account Number"),o.length>0)return{success:!1,error:"Bank details required for scheduled bookings: ".concat(o.join(", "),". Please complete payment information first.")}}}return await K.updateDocument(h.databaseId,h.collections.bookings||"bookings",a,{status:t,updatedAt:new Date().toISOString()}),{success:!0}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to update booking"}}},async notifyAdmin(a,t){try{const n=h.collections.notifications;if(!n||n==="")throw new Error("notifications collection ID is empty - cannot notify admin");const s=new Date().toISOString(),i=se.unique();await K.createDocument(h.databaseId,n,i,{notificationId:i,userId:"admin",eventId:(t==null?void 0:t.bookingId)||(t==null?void 0:t.eventId)||null,notificationType:"booking_event",message:a,status:"unread",createdAt:s,type:"booking_event",title:"Booking Update",data:JSON.stringify(t||{}),isRead:!1})}catch{}}},jd=Object.freeze(Object.defineProperty({__proto__:null,default:Ze,simpleBookingService:Sd,simpleChatService:Ze},Symbol.toStringTag,{value:"Module"}));async function Id(a){try{const t="\nNew ".concat(a.type==="therapist"?"Therapist":"Massage Place"," Registration\n\nName: ").concat(a.name,"\nEmail: ").concat(a.email,"\nWhatsApp: ").concat(a.whatsappNumber,"\nLocation: ").concat(a.location,"\nRegistration Date: ").concat(new Date(a.registrationDate).toLocaleString(),"\n        ").trim(),n=await fetch("https://api.web3forms.com/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({access_key:"",subject:"New ".concat(a.type==="therapist"?"Therapist":"Massage Place"," Registration"),from_name:"IndaStreet Registration System",email:"indastreet.id@gmail.com",message:t})});if(!n.ok)throw new Error("Email service returned ".concat(n.status))}catch(t){throw t}}const Td={async getAllPlaces(){try{let a=!1;try{await lt.get(),a=!0}catch{a=!1}const t=await ie.listDocuments(h.databaseId,h.collections.places,[b.limit(100)]);for(const n of t.documents)try{if(a&&h.collections.leads){const s=await ie.listDocuments(h.databaseId,h.collections.leads,[b.equal("placeId",n.$id)]);n.analytics=JSON.stringify({bookings:s.total})}else throw new Error("Leads not accessible")}catch{const s=32+Math.floor(Math.random()*19);n.analytics=JSON.stringify({bookings:s})}return t.documents}catch{return[]}},async getPlaces(){return this.getAllPlaces()},async getByProviderId(a){if(!a)return null;try{const t=l=>{let o=[];const c=l.galleryImages||l.galleryimages;if(c)try{o=typeof c=="string"?JSON.parse(c):c}catch{o=[]}return{...l,mainImage:l.mainimage||l.mainImage,galleryImages:o,openingTime:l.openingtime||l.openingTime,closingTime:l.closingtime||l.closingTime,discountPercentage:l.discountpercentage||l.discountPercentage,discountDuration:l.discountduration||l.discountDuration,isDiscountActive:l.isdiscountactive||l.isDiscountActive,discountEndTime:l.discountendtime||l.discountEndTime,websiteUrl:l.websiteurl||l.websiteUrl,websiteTitle:l.websitetitle||l.websiteTitle,websiteDescription:l.websitedescription||l.websiteDescription,instagramUrl:l.instagramurl||l.instagramUrl||void 0,facebookPageUrl:l.facebookpageurl||l.facebookPageUrl||void 0,instagramPosts:(()=>{const d=l.instagramposts||l.instagramPosts;if(d)try{return typeof d=="string"?JSON.parse(d):d}catch{return}})(),massageTypes:l.massagetypes||l.massageTypes,languages:l.languagesspoken||l.languages,additionalServices:l.additionalservices||l.additionalServices,contactNumber:l.whatsappnumber||l.contactNumber,hotelVillaPricing:l.hotelvillapricing||l.hotelVillaPricing}};try{const l=await ie.getDocument(h.databaseId,h.collections.places,a);if(l&&l.$id)return t(l)}catch(l){l==null||l.code}const n=async l=>{try{const o=await ie.listDocuments(h.databaseId,h.collections.places,[b.equal(l,a)]);if(o.documents.length>0)return t(o.documents[0])}catch{}return null},s=await n("id");if(s)return s;const i=await n("placeId");if(i)return i;const r=Number(a);if(!isNaN(r))try{const l=await ie.listDocuments(h.databaseId,h.collections.places,[b.equal("id",r)]);if(l.documents.length>0)return t(l.documents[0])}catch{}return null}catch{return null}},async getAll(){try{return!h.collections.places||h.collections.places===""?[]:(await ie.listDocuments(h.databaseId,h.collections.places)).documents.map(n=>{let s=[];const i=n.galleryImages||n.galleryimages;if(i)try{s=typeof i=="string"?JSON.parse(i):i}catch{s=[]}return{...n,mainImage:n.mainimage||n.mainImage,profilePicture:n.profilePicture||n.profilePicture,yearsEstablished:n.yearsEstablished||n.yearsEstablished||1,galleryImages:s,openingTime:n.openingtime||n.openingTime,closingTime:n.closingtime||n.closingTime,discountPercentage:n.discountpercentage||n.discountPercentage,discountDuration:n.discountduration||n.discountDuration,isDiscountActive:n.isdiscountactive||n.isDiscountActive,discountEndTime:n.discountendtime||n.discountEndTime,websiteUrl:n.websiteurl||n.websiteUrl,websiteTitle:n.websitetitle||n.websiteTitle,websiteDescription:n.websitedescription||n.websiteDescription,instagramUrl:n.instagramurl||n.instagramUrl||void 0,facebookPageUrl:n.facebookpageurl||n.facebookPageUrl||void 0,instagramPosts:(()=>{const r=n.instagramposts||n.instagramPosts;if(r)try{return typeof r=="string"?JSON.parse(r):r}catch{return}})(),massageTypes:(()=>{const r=n.massagetypes||n.massageTypes;if(!r)return[];try{return typeof r=="string"?JSON.parse(r):r}catch{return[]}})(),languages:(()=>{const r=n.languagesspoken||n.languages;if(!r)return[];try{return typeof r=="string"?JSON.parse(r):r}catch{return[]}})(),additionalServices:(()=>{const r=n.additionalservices||n.additionalServices;if(!r)return[];try{return typeof r=="string"?JSON.parse(r):r}catch{return[]}})(),contactNumber:n.whatsappnumber||n.contactNumber,hotelVillaPricing:n.hotelvillapricing||n.hotelVillaPricing}})}catch{return[]}},async getById(a){try{const t=await ie.getDocument(h.databaseId,h.collections.places,a);let n=t.galleryImages;if(t.galleryimages)try{n=typeof t.galleryimages=="string"?JSON.parse(t.galleryimages):t.galleryimages}catch{n=[]}return{...t,mainImage:t.mainimage||t.mainImage,profilePicture:t.profilePicture||t.profilePicture,yearsEstablished:t.yearsEstablished||t.yearsEstablished||1,galleryImages:n,openingTime:t.openingtime||t.openingTime,closingTime:t.closingtime||t.closingTime,discountPercentage:t.discountpercentage||t.discountPercentage,discountDuration:t.discountduration||t.discountDuration,isDiscountActive:t.isdiscountactive||t.isDiscountActive,discountEndTime:t.discountendtime||t.discountEndTime,websiteUrl:t.websiteurl||t.websiteUrl,websiteTitle:t.websitetitle||t.websiteTitle,websiteDescription:t.websitedescription||t.websiteDescription,instagramUrl:t.instagramurl||t.instagramUrl||void 0,facebookPageUrl:t.facebookpageurl||t.facebookPageUrl||void 0,instagramPosts:(()=>{const s=t.instagramposts||t.instagramPosts;if(s)try{return typeof s=="string"?JSON.parse(s):s}catch{return}})(),massageTypes:(()=>{const s=t.massagetypes||t.massageTypes;if(!s)return[];try{return typeof s=="string"?JSON.parse(s):s}catch{return[]}})(),languages:(()=>{const s=t.languagesspoken||t.languages;if(!s)return[];try{return typeof s=="string"?JSON.parse(s):s}catch{return[]}})(),additionalServices:(()=>{const s=t.additionalservices||t.additionalServices;if(!s)return[];try{return typeof s=="string"?JSON.parse(s):s}catch{return[]}})(),contactNumber:t.whatsappnumber||t.contactNumber,hotelVillaPricing:t.hotelvillapricing||t.hotelVillaPricing}}catch(t){throw t}},async update(a,t){try{const n=await ie.updateDocument(h.databaseId,h.collections.places,a,t);let s=n.galleryImages;if(n.galleryimages)try{s=typeof n.galleryimages=="string"?JSON.parse(n.galleryimages):n.galleryimages}catch{s=[]}return{...n,mainImage:n.mainimage||n.mainImage,galleryImages:s,openingTime:n.openingtime||n.openingTime,closingTime:n.closingtime||n.closingTime,discountPercentage:n.discountpercentage||n.discountPercentage,discountDuration:n.discountduration||n.discountDuration,isDiscountActive:n.isdiscountactive||n.isDiscountActive,discountEndTime:n.discountendtime||n.discountEndTime,websiteUrl:n.websiteurl||n.websiteUrl,websiteTitle:n.websitetitle||n.websiteTitle,websiteDescription:n.websitedescription||n.websiteDescription,instagramUrl:n.instagramurl||n.instagramUrl||void 0,facebookPageUrl:n.facebookpageurl||n.facebookPageUrl||void 0,instagramPosts:(()=>{const i=n.instagramposts||n.instagramPosts;if(i)try{return typeof i=="string"?JSON.parse(i):i}catch{return}})(),massageTypes:(()=>{const i=n.massagetypes||n.massageTypes;if(!i)return[];try{return typeof i=="string"?JSON.parse(i):i}catch{return[]}})(),languages:(()=>{const i=n.languagesspoken||n.languages;if(!i)return[];try{return typeof i=="string"?JSON.parse(i):i}catch{return[]}})(),additionalServices:(()=>{const i=n.additionalservices||n.additionalServices;if(!i)return[];try{return typeof i=="string"?JSON.parse(i):i}catch{return[]}})(),contactNumber:n.whatsappnumber||n.contactNumber,hotelVillaPricing:n.hotelvillapricing||n.hotelVillaPricing}}catch(n){throw n}},async delete(a){try{await ie.deleteDocument(h.databaseId,h.collections.places,a)}catch(t){throw t}},async getByEmail(a){try{return(await ie.listDocuments(h.databaseId,h.collections.places,[b.equal("email",a)])).documents}catch{return[]}},async getCurrentUser(){try{return await lt.get()}catch{return null}}},Xs={async create(a){try{if(!h.collections.notifications||h.collections.notifications==="")return{$id:"mock_notification_".concat(Date.now()),...a,isRead:a.isRead||!1,createdAt:new Date().toISOString()};const t=se.unique();return await ie.createDocument(h.databaseId,h.collections.notifications,t,{...a,notificationId:t,isRead:a.isRead||!1,createdAt:new Date().toISOString()})}catch(t){throw t}},async getAll(){try{return!h.collections.notifications||h.collections.notifications===""?[]:(await ie.listDocuments(h.databaseId,h.collections.notifications,[b.orderDesc("createdAt"),b.limit(100)])).documents}catch{return[]}},async update(a,t){try{return await ie.updateDocument(h.databaseId,h.collections.notifications,a,t)}catch(n){throw n}},async getByProvider(a){try{return(await ie.listDocuments(h.databaseId,h.collections.notifications,[b.equal("providerId",a),b.orderDesc("createdAt"),b.limit(50)])).documents}catch{return[]}},async getUnread(a){var t,n,s;try{return!h.collections.notifications||h.collections.notifications===""?[]:(await ie.listDocuments(h.databaseId,h.collections.notifications,[b.equal("providerId",a),b.equal("isRead",!1),b.orderDesc("createdAt")])).documents}catch(i){return(t=i==null?void 0:i.message)!=null&&t.includes("Collection with the requested ID could not be found")||(n=i==null?void 0:i.message)!=null&&n.includes("missing scopes")||(s=i==null?void 0:i.message)!=null&&s.includes("Unauthorized"),[]}},async markAsRead(a){try{return!h.collections.notifications||h.collections.notifications===""?null:await ie.updateDocument(h.databaseId,h.collections.notifications,a,{isRead:!0})}catch(t){throw t}},async markAllAsRead(a){try{const t=await this.getUnread(a);await Promise.all(t.map(n=>this.markAsRead(n.$id)))}catch(t){throw t}},async createWhatsAppContactNotification(a,t){try{return await this.create({providerId:a,message:'Someone clicked "Chat Now" to contact you on WhatsApp!',type:"whatsapp_contact"})}catch{return null}},async delete(a){try{if(!h.collections.notifications||h.collections.notifications==="")return;await ie.deleteDocument(h.databaseId,h.collections.notifications,a)}catch(t){throw t}}},Pn={generateConversationId(a,t){const n=[a,t].sort((s,i)=>s.id.localeCompare(i.id));return"".concat(n[0].role,"_").concat(n[0].id,"_").concat(n[1].role,"_").concat(n[1].id)},async sendMessage(a){try{const t=se.unique(),n=await ie.createDocument(h.databaseId,h.collections.messages||"messages",t,{messageId:t,conversationId:a.conversationId,senderId:a.senderId,senderName:a.senderName,senderRole:a.senderType,senderType:a.senderType,recipientId:a.receiverId,receiverId:a.receiverId,receiverName:a.receiverName,receiverRole:a.receiverType,message:a.content,content:a.content.substring(0,1e3),messageType:"text",bookingId:a.bookingId||null,metadata:null,isRead:!1,sentAt:new Date().toISOString()});if(a.receiverType==="therapist"||a.receiverType==="place")try{const s=parseInt(a.receiverId);isNaN(s)||await Xs.create({providerId:s,message:"New message from ".concat(a.senderName),type:"system",bookingId:a.bookingId})}catch{}return n}catch(t){throw t}},async getConversation(a){try{return(await ie.listDocuments(h.databaseId,h.collections.messages||"messages",[b.equal("conversationId",a),b.orderAsc("sentAt"),b.limit(100)])).documents}catch{return[]}},async getUserConversations(a){try{const t=await ie.listDocuments(h.databaseId,h.collections.messages||"messages",[b.or([b.equal("senderId",a),b.equal("receiverId",a)]),b.orderDesc("sentAt"),b.limit(100)]),n=new Map;return t.documents.forEach(s=>{n.has(s.conversationId)||n.set(s.conversationId,s)}),Array.from(n.values())}catch{return[]}},async markAsRead(a){try{return await ie.updateDocument(h.databaseId,h.collections.messages||"messages_collection_id",a,{isRead:!0})}catch(t){throw t}}},Ad={LEAD_COST_PERCENTAGE:.25,RESPONSE_TIMEOUT:300*1e3,async calculateLeadCost(a,t,n){try{const s=await qn.getMembership(a,t);return s?qn.calculateLeadCost(s.packageType,n):Math.round(n*this.LEAD_COST_PERCENTAGE)}catch{return Math.round(n*this.LEAD_COST_PERCENTAGE)}},async isLeadBasedMember(a,t){try{const n=await qn.getMembership(a,t);return(n==null?void 0:n.packageType)==="silver"}catch{return!0}},async createLead(a){try{const t=se.unique(),n=new Date,s=new Date(n.getTime()+this.RESPONSE_TIMEOUT),i=await this.calculateLeadCost(a.memberId,a.memberType,a.bookingPrice),r=se.unique(),l=se.unique(),o="".concat(window.location.origin,"/lead/accept/").concat(t,"?token=").concat(r),c="".concat(window.location.origin,"/lead/decline/").concat(t,"?token=").concat(l),d={leadId:t,...a,leadCost:i,status:"pending",sentAt:n.toISOString(),expiresAt:s.toISOString(),acceptUrl:o,declineUrl:c,billed:!1,paymentStatus:i>0?"pending":"free"},m=await ie.createDocument(h.databaseId,"lead_generations",t,d);return await this.sendLeadWhatsApp(m),this.setExpiryTimer(t),m}catch(t){throw t}},async sendLeadWhatsApp(a){try{const t=a.serviceType.toLowerCase().includes("facial")?"üíÜ‚Äç‚ôÄÔ∏è":"üíÜ",n=a.hotelVillaName?"".concat(a.hotelVillaName).concat(a.roomNumber?" - Room ".concat(a.roomNumber):""):a.customerLocation||"Not specified",s="üéØ NEW BOOKING LEAD - INDASTREET\n\n".concat(t," ").concat(a.serviceType.toUpperCase()," SERVICE REQUEST\n\nüë§ Customer: ").concat(a.customerName,"\nüì± WhatsApp: ").concat(a.customerWhatsApp,"\nüìç Location: ").concat(n,"\n‚è∞ Requested: ").concat(a.requestedDateTime,"\n‚è±Ô∏è Duration: ").concat(a.duration," minutes\nüíµ Booking Price: Rp ").concat(a.bookingPrice.toLocaleString(),"\n\nüí∞ LEAD COST: Rp ").concat(a.leadCost.toLocaleString()," (25% of booking)\n   (Billed ONLY if you accept)\n\n‚úÖ ACCEPT LEAD (Rp ").concat(a.leadCost.toLocaleString()," will be charged):\n").concat(a.acceptUrl,"\n\n‚ùå DECLINE LEAD (No charge):\n").concat(a.declineUrl,"\n\n‚è∞ YOU HAVE 5 MINUTES TO RESPOND\n   After 5 minutes, this lead will be sent to other providers.\n\n").concat(a.notes?"üìù Notes: ".concat(a.notes,"\n\n"):"","üìû Questions? Contact IndaStreet Support\n+62-XXX-XXXX"),i="booking_".concat(a.$id);await Pn.sendMessage({conversationId:i,senderId:"system",senderType:"user",senderName:"System",receiverId:a.memberId,receiverType:"user",receiverName:a.memberName||"Provider",content:"üÜï New booking request! Customer: ".concat(a.customerName,". Service: ").concat(a.serviceType,". Price: Rp ").concat(a.bookingPrice.toLocaleString(),". You have 5 minutes to respond."),bookingId:a.$id})}catch{}},async acceptLead(a,t){try{const n=await ie.getDocument(h.databaseId,"lead_generations",a);if(!n.acceptUrl.includes(t))return{success:!1,message:"Invalid token"};if(n.status!=="pending")return{success:!1,message:"Lead already ".concat(n.status)};const s=new Date,i=new Date(n.expiresAt);if(s>i)return await this.expireLead(a),{success:!1,message:"Lead has expired (5 minute window passed)"};const r=await ie.updateDocument(h.databaseId,"lead_generations",a,{status:"accepted",respondedAt:s.toISOString(),billed:!0,billedAt:s.toISOString()}),l="booking_".concat(a);return await Pn.sendMessage({conversationId:l,senderId:r.memberId,senderType:"user",senderName:r.memberName,receiverId:r.customerId,receiverType:"user",receiverName:r.customerName,content:"‚úÖ Your ".concat(r.serviceType," booking has been confirmed! Provider: ").concat(r.memberName,". They will contact you shortly via WhatsApp at ").concat(r.customerWhatsApp,"."),bookingId:a}),await this.updateBillingSummary(r.memberId,r.memberType),{success:!0,message:"Lead accepted! You will be billed Rp 50,000. Customer has been notified.",lead:r}}catch{return{success:!1,message:"Error processing acceptance"}}},async declineLead(a,t){try{const n=await ie.getDocument(h.databaseId,"lead_generations",a);if(!n.declineUrl.includes(t))return{success:!1,message:"Invalid token"};if(n.status!=="pending")return{success:!1,message:"Lead already ".concat(n.status)};const s=new Date;await ie.updateDocument(h.databaseId,"lead_generations",a,{status:"declined",respondedAt:s.toISOString()});const i="booking_".concat(a);return await Pn.sendMessage({conversationId:i,senderId:"system",senderType:"user",senderName:"System",receiverId:n.customerId,receiverType:"user",receiverName:n.customerName||"Customer",content:"‚ö†Ô∏è Provider ".concat(n.memberName," is currently unavailable. We're finding you another available provider. You'll receive a new booking notification shortly."),bookingId:a}),await this.updateBillingSummary(n.memberId,n.memberType),{success:!0,message:"Lead declined. No charges applied. Customer will be notified."}}catch{return{success:!1,message:"Error processing decline"}}},async expireLead(a){try{const t=await ie.getDocument(h.databaseId,"lead_generations",a);if(t.status==="pending"){await ie.updateDocument(h.databaseId,"lead_generations",a,{status:"expired",respondedAt:new Date().toISOString()});const n="booking_".concat(a);await Pn.sendMessage({conversationId:n,senderId:"system",senderType:"user",senderName:"System",receiverId:t.customerId,receiverType:"user",receiverName:t.customerName||"Customer",content:"‚è∞ Your booking request has expired (5 minute response window). We're finding you another available provider. You'll receive a new notification shortly.",bookingId:a})}}catch{}},setExpiryTimer(a){setTimeout(async()=>{await this.expireLead(a)},this.RESPONSE_TIMEOUT)},async getMemberLeads(a,t){try{const n=[b.equal("memberId",a),b.orderDesc("sentAt"),b.limit(100)];return t&&n.push(b.equal("status",t)),(await ie.listDocuments(h.databaseId,"lead_generations",n)).documents}catch{return[]}},async getAllLeads(a){try{const t=[b.orderDesc("sentAt"),b.limit(500)];return a!=null&&a.status&&t.push(b.equal("status",a.status)),a!=null&&a.memberType&&t.push(b.equal("memberType",a.memberType)),a!=null&&a.dateFrom&&t.push(b.greaterThanEqual("sentAt",a.dateFrom)),a!=null&&a.dateTo&&t.push(b.lessThanEqual("sentAt",a.dateTo)),(await ie.listDocuments(h.databaseId,"lead_generations",t)).documents}catch{return[]}},async updateBillingSummary(a,t){var n;try{const s=new Date().toISOString().slice(0,7),i=await ie.listDocuments(h.databaseId,"lead_generations",[b.equal("memberId",a),b.greaterThanEqual("sentAt","".concat(s,"-01")),b.lessThan("sentAt","".concat(s,"-32"))]),r=i.documents.length,l=i.documents.filter(y=>y.status==="accepted").length,o=i.documents.filter(y=>y.status==="declined").length,c=i.documents.filter(y=>y.status==="expired").length,d=i.documents.filter(y=>y.status==="accepted").reduce((y,I)=>y+(I.leadCost||0),0),m="".concat(a,"_").concat(s);let p;try{p=await ie.getDocument(h.databaseId,"lead_billing_summary",m)}catch{}const f={memberId:a,memberType:t,memberName:((n=i.documents[0])==null?void 0:n.memberName)||"Unknown",billingMonth:s,totalLeads:r,acceptedLeads:l,declinedLeads:o,expiredLeads:c,totalOwed:d,totalPaid:(p==null?void 0:p.totalPaid)||0,balance:d-((p==null?void 0:p.totalPaid)||0),lastUpdated:new Date().toISOString()};p?await ie.updateDocument(h.databaseId,"lead_billing_summary",m,f):await ie.createDocument(h.databaseId,"lead_billing_summary",m,f)}catch{}},async getMemberBillingSummary(a,t){try{const n=t||new Date().toISOString().slice(0,7),s="".concat(a,"_").concat(n);return await ie.getDocument(h.databaseId,"lead_billing_summary",s)}catch{return null}},async markLeadsPaid(a,t,n){try{const s="".concat(a,"_").concat(t),i=await ie.getDocument(h.databaseId,"lead_billing_summary",s);await ie.updateDocument(h.databaseId,"lead_billing_summary",s,{totalPaid:i.totalPaid+n,balance:i.balance-n,lastUpdated:new Date().toISOString()})}catch(s){throw s}}},qn={async getMembership(a,t){try{const n=await ie.listDocuments(h.databaseId,h.collections.memberships,[b.equal("memberId",a),b.equal("memberType",t),b.equal("status","active")]);return n.documents.length>0?n.documents[0]:null}catch{return null}},async createDefaultMembership(a,t,n){try{const s={userId:a,memberId:t,memberType:n,packageType:"silver",status:"active",startDate:new Date().toISOString(),totalPaid:0,autoRenew:!1};return await ie.createDocument(h.databaseId,h.collections.memberships,se.unique(),s)}catch(s){throw s}},async updatePackage(a,t,n){try{const s={packageType:t,status:"active",$updatedAt:new Date().toISOString()};if(t==="bronze"){const r=new Date;r.setFullYear(r.getFullYear()+1),s.endDate=r.toISOString(),s.renewalDate=null,s.goldTier=null}else if(t==="gold"){const r=new Date;r.setMonth(r.getMonth()+1),s.renewalDate=r.toISOString(),s.goldTier=null,s.endDate=null}else s.endDate=null,s.renewalDate=null,s.goldTier=null;if(n){const r=await ie.getDocument(h.databaseId,h.collections.memberships,a);s.totalPaid=(r.totalPaid||0)+n.amount,s.lastPaymentDate=new Date().toISOString(),s.lastPaymentAmount=n.amount,s.paymentMethod=n.method}return await ie.updateDocument(h.databaseId,h.collections.memberships,a,s)}catch(s){throw s}},getMonthlyPackagePrice(){return 2e5},calculateLeadCost(a,t){switch(a){case"bronze":return 0;case"silver":return Math.floor(t*.25);case"gold":return 0;default:return 0}},async getAllMemberships(){try{return(await ie.listDocuments(h.databaseId,h.collections.memberships,[b.orderDesc("$createdAt"),b.limit(100)])).documents}catch(a){throw a}},async getMembershipStats(){try{const a=await ie.listDocuments(h.databaseId,h.collections.memberships,[b.equal("status","active"),b.limit(1e3)]),t={totalMembers:a.documents.length,bronzeCount:0,silverCount:0,goldCount:0,bronzeRevenue:0,goldRevenue:0,expiringSoon:0},n=new Date;return n.setDate(n.getDate()+30),a.documents.forEach(s=>{s.packageType==="bronze"?(t.bronzeCount++,t.bronzeRevenue+=s.totalPaid||0,s.endDate&&new Date(s.endDate)<=n&&t.expiringSoon++):s.packageType==="silver"?t.silverCount++:s.packageType==="gold"&&(t.goldCount++,t.goldRevenue+=s.totalPaid||0)}),t}catch(a){throw a}},async expireBronzeMemberships(){try{const a=new Date().toISOString(),t=await ie.listDocuments(h.databaseId,h.collections.memberships,[b.equal("packageType","bronze"),b.equal("status","active"),b.lessThan("endDate",a)]);let n=0;for(const s of t.documents)await ie.updateDocument(h.databaseId,h.collections.memberships,s.$id,{status:"expired"}),await this.createDefaultMembership(s.userId,s.memberId,s.memberType),n++;return n}catch(a){throw a}},async expireMonthlyMemberships(){try{const a=new Date().toISOString(),t=await ie.listDocuments(h.databaseId,h.collections.memberships,[b.equal("packageType","gold"),b.equal("status","active"),b.lessThan("renewalDate",a)]);let n=0;for(const s of t.documents)await ie.updateDocument(h.databaseId,h.collections.memberships,s.$id,{status:"expired"}),await this.createDefaultMembership(s.userId,s.memberId,s.memberType),n++;return n}catch(a){throw a}},async getExpiringSoon(a=7){try{const t=new Date,n=new Date(t.getTime()+a*24*60*60*1e3),s=await ie.listDocuments(h.databaseId,h.collections.memberships,[b.equal("packageType","bronze"),b.equal("status","active"),b.lessThanEqual("endDate",n.toISOString()),b.greaterThanEqual("endDate",t.toISOString())]),i=await ie.listDocuments(h.databaseId,h.collections.memberships,[b.equal("packageType","gold"),b.equal("status","active"),b.lessThanEqual("renewalDate",n.toISOString()),b.greaterThanEqual("renewalDate",t.toISOString())]);return[...s.documents,...i.documents]}catch{return[]}},async sendExpiryNotifications(){try{const a=await this.getExpiringSoon(7);let t=0,n=0;for(const s of a)try{const i=s.packageType==="bronze"?s.endDate:s.renewalDate,r=Math.ceil((new Date(i||new Date).getTime()-new Date().getTime())/(1e3*60*60*24));await Id({type:"therapist",name:"Member Expiry Alert",email:"admin@indastreet.com",whatsappNumber:"N/A",location:"System Alert",registrationDate:new Date().toISOString()}),t++}catch{n++}return{sent:t,failed:n}}catch{return{sent:0,failed:0}}}},Cd={async submitPaymentProof(a){try{const t=await wi.createFile(h.bucketId,se.unique(),a.proofOfPaymentFile),n="".concat(h.endpoint,"/storage/buckets/").concat(h.bucketId,"/files/").concat(t.$id,"/view?project=").concat(h.projectId),s=new Date,i=new Date(s.getTime()+10080*60*1e3),r=await ie.createDocument(h.databaseId,"payment_transactions",se.unique(),{transactionId:se.unique(),userId:a.userId,userEmail:a.userEmail,userName:a.userName,userType:a.memberType,memberType:a.memberType,paymentType:a.paymentType,packageType:a.packageName||null,packageDuration:a.packageDuration||null,amount:a.amount,currency:"IDR",transactionDate:s.toISOString(),paymentMethod:"bank_transfer",bankName:a.bankName,accountNumber:a.accountNumber,accountName:a.accountName,paymentProofUrl:n,proofOfPaymentFileId:t.$id,status:"pending",submittedAt:s.toISOString(),expiresAt:i.toISOString(),notificationSent:!1});return await this.notifyAdminNewPayment(r),r}catch(t){throw t}},async getUserPayments(a){try{return(await ie.listDocuments(h.databaseId,"payment_transactions",[b.equal("userId",a),b.orderDesc("submittedAt")])).documents}catch(t){throw t}},async getPendingPayments(){try{return(await ie.listDocuments(h.databaseId,"payment_transactions",[b.equal("status","pending"),b.orderDesc("submittedAt"),b.limit(100)])).documents}catch(a){throw a}},async getAllPayments(a){try{const t=[b.orderDesc("submittedAt"),b.limit(100)];return a!=null&&a.status&&t.push(b.equal("status",a.status)),a!=null&&a.memberType&&t.push(b.equal("memberType",a.memberType)),a!=null&&a.paymentType&&t.push(b.equal("paymentType",a.paymentType)),(await ie.listDocuments(h.databaseId,"payment_transactions",t)).documents}catch(t){throw t}},async approvePayment(a,t){try{const n=await ie.getDocument(h.databaseId,"payment_confirmations",a);await ie.updateDocument(h.databaseId,"payment_confirmations",a,{status:"approved",reviewedBy:t,reviewedAt:new Date().toISOString()}),await Xs.create({message:"Your payment of IDR ".concat(n.amount.toLocaleString()," has been verified. ").concat(n.paymentType==="membership"?"Your membership is now active!":"Your payment has been processed."),type:"payment_received",priority:"high"})}catch(n){throw n}},async declinePayment(a,t,n){try{const s=await ie.getDocument(h.databaseId,"payment_confirmations",a);await ie.updateDocument(h.databaseId,"payment_confirmations",a,{status:"declined",reviewedBy:t,reviewedAt:new Date().toISOString(),declineReason:n,notificationSent:!0}),await Xs.create({message:"Payment was not received. Please check the proof of payment attachment. Reason: ".concat(n),type:"system",priority:"high"})}catch(s){throw s}},async getExpiredPayments(){try{const a=new Date().toISOString();return(await ie.listDocuments(h.databaseId,"payment_transactions",[b.equal("status","pending"),b.lessThan("expiresAt",a),b.limit(50)])).documents}catch(a){throw a}},async autoDeclineExpired(){try{const a=await this.getExpiredPayments();let t=0;for(const n of a)await this.declinePayment(n.$id,"system","No response from admin within 7 days. Please resubmit your payment proof."),t++;return t}catch(a){throw a}},async notifyAdminNewPayment(a){try{const t="\nNew Payment Proof Submitted\n\nTransaction ID: ".concat(a.transactionId,"\nUser: ").concat(a.userName," (").concat(a.userEmail,")\nMember Type: ").concat(a.memberType,"\nPayment Type: ").concat(a.paymentType,"\n").concat(a.packageType?"Package: ".concat(a.packageType):"","\nAmount: IDR ").concat(a.amount.toLocaleString(),"\nBank: ").concat(a.bankName,"\nAccount: ").concat(a.accountNumber,"\nSubmitted: ").concat(new Date(a.submittedAt).toLocaleString(),"\nExpires: ").concat(new Date(a.expiresAt).toLocaleString(),"\n\nView proof: ").concat(a.paymentProofUrl,"\n\nPlease review and approve/decline within 7 days.\n            ").trim(),n=await fetch("https://api.web3forms.com/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({access_key:"",subject:"üîî New Payment Proof Submitted - ".concat(a.memberType),from_name:"IndaStreet Payment System",email:"indastreet.id@gmail.com",message:t})});if(!n.ok)throw new Error("Email service returned ".concat(n.status))}catch{}}},rl={async getByTherapistId(a){try{return(await ie.listDocuments(h.databaseId,h.collections.therapistMenus,[b.equal("therapistId",a),b.orderDesc("$updatedAt"),b.limit(1)])).documents[0]||null}catch{return null}},_validateMenuPrices(a){try{const n=JSON.parse(a),s=Array.isArray(n)?n:[];for(let i=0;i<s.length;i++){const r=s[i];if(!r)continue;const l=r.price60!=null&&r.price60!==""?Number(r.price60):NaN,o=r.price90!=null&&r.price90!==""?Number(r.price90):NaN,c=r.price120!=null&&r.price120!==""?Number(r.price120):NaN;if(!isNaN(l)&&l<100)throw new Error('Service "'.concat(r.serviceName||r.name||"Item "+(i+1),'": Minimum price for 60 min is Rp 100,000 (enter 100 or higher). Got: ').concat(l));if(!isNaN(o)&&o<100)throw new Error('Service "'.concat(r.serviceName||r.name||"Item "+(i+1),'": Minimum price for 90 min is Rp 100,000 (enter 100 or higher). Got: ').concat(o));if(!isNaN(c)&&c<100)throw new Error('Service "'.concat(r.serviceName||r.name||"Item "+(i+1),'": Minimum price for 120 min is Rp 100,000 (enter 100 or higher). Got: ').concat(c))}}catch(n){if(n instanceof Error&&n.message.includes("Minimum price")||n instanceof SyntaxError)throw n}},async saveMenu(a,t){try{this._validateMenuPrices(t);const n=await this.getByTherapistId(a);if(n)return await ie.updateDocument(h.databaseId,h.collections.therapistMenus,n.$id,{menuData:t,updatedDate:new Date().toISOString()});{const s=se.unique(),i=new Date().toISOString();return await ie.createDocument(h.databaseId,h.collections.therapistMenus,s,{menuId:s,therapistId:a,menuData:t,isActive:!0,createdDate:i,updatedDate:i,status:"active"},[Nt.read(St.any()),Nt.update(St.users()),Nt.delete(St.users())])}}catch(n){throw n}},async deleteMenu(a){try{const t=await this.getByTherapistId(a);t&&await ie.deleteDocument(h.databaseId,h.collections.therapistMenus,t.$id)}catch(t){throw t}}},Pd=13e4,Dd=155e3,Ed=19e4,Zr=[-1e4,-5e3,-8e3,1e4,5e3,8e3],Zs=["Traditional Massage","Relaxation Massage","Swedish Massage","Aromatherapy Massage","Deep Tissue Massage"],xa="Traditional Massage";function fn(a){return a!=null&&a.trim()?Zs.some(t=>t.toLowerCase()===a.trim().toLowerCase()):!1}function Md(a){let t=0;const n=String(a||"");for(let s=0;s<n.length;s++){const i=n.charCodeAt(s);t=(t<<5)-t+i,t=t&t}return Math.abs(t)}function Rd(a,t,n){const s=Math.sin(a)*1e4,i=s-Math.floor(s);return Math.floor(i*(n-t+1))+t}function Ns(a,t){const n=Rd(a+t,0,Zr.length-1);return Zr[n]}function Ni(a){const t=Md(a),n=[];for(let s=0;s<5;s++){const i=t+s*7919,r=Ns(i,0),l=Ns(i+1,1),o=Ns(i+2,2),c=Math.max(5e4,Pd+r),d=Math.max(5e4,Dd+l),m=Math.max(5e4,Ed+o),p=(t+s*31)%Zs.length,f=Zs[p];n.push({name:f,price60:c,price90:d,price120:m})}return n}function ol(a){const t=Ni(a),n=t.reduce((s,i)=>i.price60>0&&i.price60<s.price60?{...i}:s,t[0]);return{60:n.price60,90:n.price90,120:n.price120,serviceName:n.name}}function ll(a){const t=a.price60!=null&&a.price60!==""&&Number(a.price60)>0,n=a.price90!=null&&a.price90!==""&&Number(a.price90)>0,s=a.price120!=null&&a.price120!==""&&Number(a.price120)>0;if(t||n||s)return!0;const i=a.pricing;if(typeof i=="object"&&i!=null){const r=i[60],l=i[90],o=i[120];return r!=null&&r>0||l!=null&&l>0||o!=null&&o>0}if(typeof i=="string"&&i.trim())try{const r=JSON.parse(i),l=r==null?void 0:r["60"],o=r==null?void 0:r["90"],c=r==null?void 0:r["120"];return l!=null&&l>0||o!=null&&o>0||c!=null&&c>0}catch{return!1}return!1}var Re=(a=>(a.PENDING="PENDING",a.ACCEPTED="ACCEPTED",a.CONFIRMED="CONFIRMED",a.COMPLETED="COMPLETED",a.DECLINED="DECLINED",a.EXPIRED="EXPIRED",a))(Re||{}),oa=(a=>(a.BOOK_NOW="BOOK_NOW",a.SCHEDULED="SCHEDULED",a))(oa||{});const Ss=.3,Bd=300*1e3,Ld=60*1e3;async function Od(){const a=Date.now(),t=Math.random().toString(36).substring(2,8).toUpperCase();return"BK".concat(a,"_").concat(t)}async function _d(a,t){try{const n=new Date(Date.now()-3e5).toISOString(),s=await K.listDocuments(h.databaseId,h.collections.bookings||"bookings",[b.equal("customerId",a),b.equal("therapistId",t),b.equal("bookingStatus",["PENDING","ACCEPTED","CONFIRMED"]),b.greaterThan("createdAt",n),b.limit(1)]);if(s.documents.length>0){const i=s.documents[0];return{exists:!0,existingBooking:i,reason:"You already have a ".concat(i.bookingStatus.toLowerCase()," booking with this therapist. Please wait for the current booking to complete.")}}return{exists:!1}}catch{return{exists:!1}}}const $d={PENDING:["ACCEPTED","DECLINED","EXPIRED"],ACCEPTED:["CONFIRMED","DECLINED","EXPIRED"],CONFIRMED:["COMPLETED","DECLINED"],COMPLETED:[],DECLINED:[],EXPIRED:[]},yt={calculateCommission(a){const t=Math.round(a*Ss),n=a-t;return{adminCommission:t,providerPayout:n}},isValidTransition(a,t){var n,s;return(s=(n=$d[a])==null?void 0:n.includes(t))!=null?s:!1},async createBooking(a){var d,m,p;const{availabilityEnforcementService:t}=await Ce(async()=>{const{availabilityEnforcementService:f}=await Promise.resolve().then(()=>Jd);return{availabilityEnforcementService:f}},void 0);t.validateBookingRequest(a.therapistStatus,a.bookingType);const n=new Date,s="BK".concat(n.getTime(),"_").concat(Math.random().toString(36).substr(2,6).toUpperCase()),{adminCommission:i,providerPayout:r}=this.calculateCommission(a.totalPrice),l=new Date(n.getTime()+Bd).toISOString(),o={bookingId:s,customerId:a.customerId,customerPhone:a.customerPhone,therapistId:a.therapistId,businessId:a.businessId,businessName:a.businessName,providerType:a.providerType,serviceType:a.serviceType,duration:a.duration,locationZone:a.locationZone,locationCoordinates:a.locationCoordinates,bookingType:a.bookingType,totalPrice:a.totalPrice,adminCommission:i,providerPayout:r,bookingStatus:"PENDING",createdAt:n.toISOString(),pendingAt:n.toISOString(),responseDeadline:l,notes:a.notes},c={userId:a.userId||o.customerId,userName:(d=a.customerName)!=null?d:"Guest Customer",status:o.bookingStatus.toLowerCase(),serviceDuration:o.duration,price:o.totalPrice,location:o.locationZone,customerWhatsApp:o.customerPhone,customerDetails:JSON.stringify({id:o.customerId,name:(m=a.customerName)!=null?m:"Guest Customer",phone:o.customerPhone}),therapistDetails:JSON.stringify({id:o.therapistId,name:(p=a.therapistName)!=null?p:"Therapist"}),serviceDetails:JSON.stringify({type:o.serviceType,duration:o.duration,locationZone:o.locationZone,coordinates:o.locationCoordinates}),pricing:JSON.stringify({total:o.totalPrice,commission:o.adminCommission,payout:o.providerPayout}),booking:JSON.stringify({id:o.bookingId,status:o.bookingStatus,createdAt:o.createdAt,pendingAt:o.pendingAt,responseDeadline:o.responseDeadline,notes:o.notes}),metadata:JSON.stringify({providerType:o.providerType,bookingType:o.bookingType,businessId:o.businessId,businessName:o.businessName})};try{const f=await K.createDocument(h.databaseId,h.collections.bookings||"bookings",se.unique(),c);return{...o,$id:f.$id}}catch(f){throw f}},async acceptBooking(a){const t=await this.getBookingById(a);if(!t)throw new Error("Booking ".concat(a," not found"));if(!this.isValidTransition(t.bookingStatus,"ACCEPTED"))throw new Error("Invalid transition from ".concat(t.bookingStatus," to ACCEPTED"));const n=new Date,s=new Date(n.getTime()+Ld).toISOString(),i={bookingStatus:"ACCEPTED",acceptedAt:n.toISOString(),confirmationDeadline:s},r=await K.updateDocument(h.databaseId,h.collections.bookings||"bookings",t.$id,i);return await this.recordAcceptedCommission({...t,...i,$id:r.$id}),await this.notifyAdminDashboard(t.$id,"ACCEPTED"),{...t,...i,$id:r.$id}},async confirmBooking(a){const t=await this.getBookingById(a);if(!t)throw new Error("Booking ".concat(a," not found"));if(!this.isValidTransition(t.bookingStatus,"CONFIRMED"))throw new Error("Invalid transition from ".concat(t.bookingStatus," to CONFIRMED"));const s={bookingStatus:"CONFIRMED",confirmedAt:new Date().toISOString()},i=await K.updateDocument(h.databaseId,h.collections.bookings||"bookings",t.$id,s);return await this.addToCalendarAndScheduleReminders({...t,...s,$id:i.$id}),{...t,...s,$id:i.$id}},async addToCalendarAndScheduleReminders(a){try{const{bookingCalendarService:t}=await Ce(async()=>{const{bookingCalendarService:n}=await Promise.resolve().then(()=>qd);return{bookingCalendarService:n}},void 0);await t.addToCalendar(a)}catch{}},async completeBooking(a){const t=await this.getBookingById(a);if(!t)throw new Error("Booking ".concat(a," not found"));if(!this.isValidTransition(t.bookingStatus,"COMPLETED"))throw new Error("Invalid transition from ".concat(t.bookingStatus," to COMPLETED"));const s={bookingStatus:"COMPLETED",completedAt:new Date().toISOString()},i=await K.updateDocument(h.databaseId,h.collections.bookings||"bookings",t.$id,s);return{...t,...s,$id:i.$id}},async declineBooking(a,t){const n=await this.getBookingById(a);if(!n)throw new Error("Booking ".concat(a," not found"));if(!this.isValidTransition(n.bookingStatus,"DECLINED"))throw new Error("Invalid transition from ".concat(n.bookingStatus," to DECLINED"));const i={bookingStatus:"DECLINED",declinedAt:new Date().toISOString(),declineReason:t||"No reason provided"},r=n.serviceType||n.service;fn(r)&&(i.serviceType=xa);const l=await K.updateDocument(h.databaseId,h.collections.bookings||"bookings",n.$id,i);return{...n,...i,$id:l.$id}},async expireBooking(a,t){const n=await this.getBookingById(a);if(!n)throw new Error("Booking ".concat(a," not found"));if(!this.isValidTransition(n.bookingStatus,"EXPIRED"))throw new Error("Invalid transition from ".concat(n.bookingStatus," to EXPIRED"));const i={bookingStatus:"EXPIRED",expiredAt:new Date().toISOString(),expirationReason:t||"Response timeout"},r=n.serviceType||n.service;fn(r)&&(i.serviceType=xa);const l=await K.updateDocument(h.databaseId,h.collections.bookings||"bookings",n.$id,i);return{...n,...i,$id:l.$id}},async getBookingById(a){try{return await K.getDocument(h.databaseId,h.collections.bookings||"bookings",a)}catch{return null}},async getBookingByBookingId(a){try{return(await K.listDocuments(h.databaseId,h.collections.bookings||"bookings",[b.equal("bookingId",a),b.limit(1)])).documents[0]||null}catch{return null}},async isSlotReserved(a,t,n){try{const i=(await K.listDocuments(h.databaseId,h.collections.bookings||"bookings",[b.equal("therapistId",a),b.equal("scheduledDate",t),b.equal("scheduledTime",n),b.limit(10)])).documents.some(r=>{const l=(r.bookingStatus||r.status||"").toString().toLowerCase();return["pending","accepted","confirmed","pending_accept","active"].includes(l)});return i}catch{return!1}},async getProviderBookings(a,t){try{const n=t==="therapist"?"therapistId":"businessId";return(await K.listDocuments(h.databaseId,h.collections.bookings||"bookings",[b.equal(n,a),b.orderDesc("createdAt"),b.limit(100)])).documents}catch{return[]}},async getCompletedBookingsForCommission(a,t){try{const n=[b.equal("bookingStatus","COMPLETED"),b.orderDesc("completedAt"),b.limit(1e3)];return a&&n.push(b.greaterThanEqual("completedAt",a)),t&&n.push(b.lessThanEqual("completedAt",t)),(await K.listDocuments(h.databaseId,h.collections.bookings||"bookings",n)).documents}catch{return[]}},async calculateTotalCommission(a,t){return(await this.getCompletedBookingsForCommission(a,t)).reduce((i,r)=>({totalBookings:i.totalBookings+1,totalRevenue:i.totalRevenue+r.totalPrice,totalAdminCommission:i.totalAdminCommission+r.adminCommission,totalProviderPayout:i.totalProviderPayout+r.providerPayout}),{totalBookings:0,totalRevenue:0,totalAdminCommission:0,totalProviderPayout:0})},async notifyAdminDashboard(a,t){try{h.collections.notifications&&await K.createDocument(h.databaseId,h.collections.notifications,se.unique(),{type:"booking_status_change",bookingId:a,newStatus:t,timestamp:new Date().toISOString(),read:!1})}catch{}},async recordAcceptedCommission(a){try{if(h.collections.commissionRecords){if((await K.listDocuments(h.databaseId,h.collections.commissionRecords,[b.equal("bookingId",a.bookingId),b.limit(1)])).documents.length>0)return;await K.createDocument(h.databaseId,h.collections.commissionRecords,se.unique(),{bookingId:a.bookingId,bookingDocId:a.$id,therapistId:a.therapistId||a.businessId,therapistName:a.therapistName||a.businessName,totalPrice:a.totalPrice,adminCommission:a.adminCommission,providerPayout:a.providerPayout,providerType:a.providerType,commissionRate:Ss,status:"ACCEPTED",createdAt:new Date().toISOString(),acceptedAt:a.acceptedAt})}}catch{}},async recordCompletedCommission(a){try{const{adminCommissionService:t}=await Ce(async()=>{const{adminCommissionService:n}=await Promise.resolve().then(()=>Yd);return{adminCommissionService:n}},void 0);await t.createCommissionOnCompletion({bookingId:a.bookingId,therapistId:a.therapistId||a.businessId||"",therapistName:a.therapistName||a.businessName||"",bookingAmount:a.totalPrice,completedAt:a.completedAt})}catch{h.collections.commissionRecords&&await K.createDocument(h.databaseId,h.collections.commissionRecords,se.unique(),{bookingId:a.bookingId,bookingDocId:a.$id,providerId:a.therapistId||a.businessId,providerName:a.therapistName||a.businessName,providerType:a.providerType,totalPrice:a.totalPrice,adminCommission:a.adminCommission,providerPayout:a.providerPayout,commissionRate:Ss,status:"pending_collection",createdAt:new Date().toISOString(),completedAt:a.completedAt})}},async checkAndExpireOverdueBookings(){try{const a=new Date().toISOString(),t=await K.listDocuments(h.databaseId,h.collections.bookings||"bookings",[b.equal("bookingStatus","PENDING"),b.lessThan("responseDeadline",a),b.limit(100)]),n=await K.listDocuments(h.databaseId,h.collections.bookings||"bookings",[b.equal("bookingStatus","ACCEPTED"),b.lessThan("confirmationDeadline",a),b.limit(100)]);let s=0;for(const i of t.documents)await this.expireBooking(i.$id,"Therapist response timeout"),s++;for(const i of n.documents)await this.expireBooking(i.$id,"Customer confirmation timeout"),s++;return s>0,s}catch{return 0}}},Hn=Object.freeze(Object.defineProperty({__proto__:null,BookingLifecycleStatus:Re,BookingType:oa,bookingLifecycleService:yt,checkDuplicateBooking:_d,generateBookingId:Od},Symbol.toStringTag,{value:"Module"})),Ud={HOURS_6:360*60*1e3,HOURS_5:300*60*1e3,HOURS_4:14400*1e3,HOURS_3:10800*1e3,HOURS_2:7200*1e3,HOURS_1:3600*1e3,MINUTES_30:1800*1e3,MINUTES_15:900*1e3,NOW:0},Fd=["HOURS_6","HOURS_5","HOURS_4","HOURS_3","HOURS_2","HOURS_1"],Kd={HOURS_6:{title:"üìÖ Booking Reminder - 6 Hours",getMessage:a=>"Reminder: You have a booking in 6 hours!\n\nüìç Customer: ".concat(a.customerName,"\nüíÜ Service: ").concat(a.serviceName,"\n‚è∞ Time: ").concat(a.scheduledTime,"\nüìç Location: ").concat(a.location)},HOURS_5:{title:"üìÖ Booking Reminder - 5 Hours",getMessage:a=>"Reminder: Booking in 5 hours with ".concat(a.customerName,".\nService: ").concat(a.serviceName," at ").concat(a.scheduledTime)},HOURS_4:{title:"üìÖ Booking Reminder - 4 Hours",getMessage:a=>"Reminder: Booking in 4 hours with ".concat(a.customerName,".\nService: ").concat(a.serviceName," at ").concat(a.scheduledTime)},HOURS_3:{title:"üìÖ Booking Reminder - 3 Hours",getMessage:a=>"‚è∞ Booking in 3 hours!\n\nCustomer: ".concat(a.customerName,"\nService: ").concat(a.serviceName,"\nTime: ").concat(a.scheduledTime)},HOURS_2:{title:"üìÖ Booking Reminder - 2 Hours",getMessage:a=>"‚è∞ Booking in 2 hours!\n\nCustomer: ".concat(a.customerName,"\nService: ").concat(a.serviceName,"\nTime: ").concat(a.scheduledTime)},HOURS_1:{title:"‚ö†Ô∏è Booking Soon - 1 Hour",getMessage:a=>"üö® Your booking starts in 1 HOUR!\n\nüë§ Customer: ".concat(a.customerName,"\nüì± Phone: ").concat(a.customerPhone,"\nüíÜ Service: ").concat(a.serviceName,"\n‚è∞ Time: ").concat(a.scheduledTime,"\nüìç Location: ").concat(a.location,"\n\nPlease ensure you're ready!")},MINUTES_30:{title:"üö® Booking in 30 Minutes",getMessage:a=>"üö® URGENT: Booking starts in 30 minutes!\nCustomer: ".concat(a.customerName," - ").concat(a.customerPhone)},MINUTES_15:{title:"üî¥ Booking in 15 Minutes",getMessage:a=>"üî¥ STARTING SOON: Booking in 15 minutes!\nCustomer: ".concat(a.customerName)},NOW:{title:"üéØ Booking Starting Now",getMessage:a=>"üéØ Your booking is starting NOW!\nCustomer: ".concat(a.customerName," - ").concat(a.serviceName)}};class Wd{constructor(){Z(this,"reminderTimers",new Map)}async addToCalendar(t){const n=new Date,s="CAL_".concat(n.getTime(),"_").concat(Math.random().toString(36).substr(2,6).toUpperCase()),i=t.scheduledDateTime||"".concat(t.scheduledDate,"T").concat(t.scheduledTime,":00"),r=new Date(i),l=new Date(r.getTime()+(t.duration||60)*60*1e3),o={eventId:s,bookingId:t.bookingId||t.$id,bookingDocId:t.$id,therapistId:t.therapistId||t.providerId,therapistName:t.therapistName||t.providerName,customerId:t.customerId||t.userId,customerName:t.customerName||t.userName,customerPhone:t.customerPhone||t.userPhone||"",serviceType:t.serviceType||"Massage",serviceName:t.serviceName||t.service||"".concat(t.duration||60," min massage"),duration:t.duration||60,scheduledDate:r.toISOString().split("T")[0],scheduledTime:r.toTimeString().substring(0,5),scheduledDateTime:r.toISOString(),endDateTime:l.toISOString(),location:t.location||t.locationZone||"Customer location",locationCoordinates:t.locationCoordinates,eventStatus:"SCHEDULED",remindersSent:[],createdAt:n.toISOString(),updatedAt:n.toISOString()};try{const c=await K.createDocument(h.databaseId,h.collections.notifications||"notifications",se.unique(),{type:"calendar_event",recipientId:o.therapistId,recipientType:"therapist",title:"üìÖ New Booking: ".concat(o.customerName),message:"Booking confirmed for ".concat(o.scheduledDate," at ").concat(o.scheduledTime,". Service: ").concat(o.serviceName," (").concat(o.duration," min)"),bookingId:o.bookingId,eventId:o.eventId,scheduledDateTime:o.scheduledDateTime,urgent:!1,read:!1,createdAt:o.createdAt,eventData:JSON.stringify(o)});return await this.scheduleReminders(o),{...o,$id:c.$id}}catch(c){throw c}}async scheduleReminders(t){const n=new Date(t.scheduledDateTime).getTime(),s=Date.now(),i=[];for(const r of Fd){const l=Ud[r],c=n-l-s;if(c>0){const d=setTimeout(async()=>{await this.sendReminder(t,r)},c);i.push(d)}}this.reminderTimers.set(t.eventId,i)}async sendReminder(t,n){const s=Kd[n];new Date().toISOString();const i={customerName:t.customerName,customerPhone:t.customerPhone,serviceName:t.serviceName,scheduledTime:t.scheduledTime,location:t.location},r=s.getMessage(i);try{await this.sendDashboardNotification(t,s.title,r,n),await this.sendChatNotification(t,s.title,r,n)}catch{}}async sendDashboardNotification(t,n,s,i){try{await K.createDocument(h.databaseId,h.collections.notifications||"notifications",se.unique(),{recipientId:t.therapistId,recipientType:"therapist",type:"booking_reminder",reminderType:i,title:n,message:s,bookingId:t.bookingId,eventId:t.eventId,urgent:i==="HOURS_1"||i==="MINUTES_30",read:!1,createdAt:new Date().toISOString()})}catch{}}async sendChatNotification(t,n,s,i){try{let r=await this.findChatRoomForBooking(t.bookingId,t.therapistId);if(!r)return;await K.createDocument(h.databaseId,h.collections.chatMessages||"chat_messages",se.unique(),{roomId:r,senderId:"system",senderType:"system",messageType:"booking_reminder",reminderType:i,content:"".concat(n,"\n\n").concat(s),timestamp:new Date().toISOString(),read:!1,metadata:JSON.stringify({bookingId:t.bookingId,eventId:t.eventId,reminderType:i})})}catch{}}async findChatRoomForBooking(t,n){try{const s=await K.listDocuments(h.databaseId,h.collections.chatRooms||"chat_rooms",[b.equal("bookingId",t),b.limit(1)]);if(s.documents.length>0)return s.documents[0].$id;const i=await K.listDocuments(h.databaseId,h.collections.chatRooms||"chat_rooms",[b.equal("therapistId",n),b.orderDesc("$createdAt"),b.limit(1)]);return i.documents.length>0?i.documents[0].$id:null}catch{return null}}cancelReminders(t){const n=this.reminderTimers.get(t);n&&(n.forEach(s=>clearTimeout(s)),this.reminderTimers.delete(t))}async getUpcomingBookings(t){try{const n=new Date().toISOString();return(await K.listDocuments(h.databaseId,h.collections.notifications||"notifications",[b.equal("recipientId",t),b.equal("type","calendar_event"),b.orderAsc("scheduledDateTime"),b.limit(50)])).documents.map(i=>{try{return JSON.parse(i.eventData)}catch{return i}})}catch{return[]}}async getTodaysBookings(t){const n=new Date().toISOString().split("T")[0];return(await this.getUpcomingBookings(t)).filter(i=>i.scheduledDate===n)}async processPendingReminders(){try{const t=new Date,n=new Date(t.getTime()+360*60*1e3),s=await K.listDocuments(h.databaseId,h.collections.notifications||"notifications",[b.equal("type","calendar_event"),b.limit(100)]);let i=0;for(const r of s.documents)try{const l=JSON.parse(r.eventData);new Date(l.scheduledDateTime).getTime()>t.getTime()&&(await this.scheduleReminders(l),i++)}catch{}}catch{}}}const cl=new Wd,qd=Object.freeze(Object.defineProperty({__proto__:null,bookingCalendarService:cl},Symbol.toStringTag,{value:"Module"})),Dn={COMMISSION_REMINDER:{title:"‚è∞ Commission Payment Reminder",message:(a,t)=>"You have ".concat(t," left to pay your commission of Rp ").concat(a.toLocaleString("id-ID"),". Please upload payment proof to avoid account restriction.")},COMMISSION_URGENT:{title:"‚ö†Ô∏è URGENT: Commission Payment Due",message:(a,t)=>"Only ".concat(t," left! Pay your commission of Rp ").concat(a.toLocaleString("id-ID")," immediately or your account will be restricted.")},COMMISSION_FINAL:{title:"üö® FINAL WARNING: 30 Minutes Left",message:a=>"You have only 30 MINUTES to pay your commission of Rp ".concat(a.toLocaleString("id-ID"),". Your account will be BLOCKED if not paid.")},COMMISSION_BLOCKED:{title:"üîí Account Restricted - Payment Overdue"}},eo=.3,Hd=10800*1e3,Gd=7200*1e3,zd=2.5*60*60*1e3,Vd=10800*1e3,to=3.5*60*60*1e3,ka=25e3,dl={async createCommissionOnCompletion(a){const t=new Date,n=a.completedAt||t.toISOString(),s=new Date(n),i=new Date(s.getTime()+Hd),r=Math.round(a.bookingAmount*eo),o={commissionId:"COM_".concat(t.getTime(),"_").concat(Math.random().toString(36).substr(2,6).toUpperCase()),bookingId:a.bookingId,therapistId:a.therapistId,therapistName:a.therapistName,bookingAmount:a.bookingAmount,commissionRate:eo,commissionAmount:r,reactivationFeeRequired:!1,reactivationFeeAmount:0,reactivationFeePaid:!1,totalAmountDue:r,status:"PENDING",completedAt:n,paymentDeadline:i.toISOString(),createdAt:t.toISOString(),updatedAt:t.toISOString()};try{const c=await K.createDocument(h.databaseId,h.collections.commissionRecords||"commission_records",se.unique(),{...o,commissionRate:o.commissionRate,status:o.status});return this.scheduleNotifications({...o,$id:c.$id}),{...o,$id:c.$id}}catch(c){throw c}},scheduleNotifications(a){const t=new Date(a.completedAt).getTime(),n=Date.now(),s=t+Gd-n,i=t+zd-n,r=t+Vd-n,l=t+to-n;s>0&&setTimeout(async()=>{await this.sendReminderNotification(a)},s),i>0&&setTimeout(async()=>{await this.sendUrgentWarning(a)},i),r>0&&setTimeout(async()=>{await this.sendFinalWarning(a)},r),l>0&&setTimeout(async()=>{await this.enforceRestriction(a)},l)},async sendReminderNotification(a){const t=await this.getCommissionById(a.$id);if(!t||t.status!=="PENDING")return;const n=Dn.COMMISSION_REMINDER;await this.createNotification({therapistId:a.therapistId,type:"COMMISSION_REMINDER",title:n.title,message:n.message(a.commissionAmount,"1 hour"),commissionId:a.commissionId}),await this.updateCommission(a.$id,{reminderSentAt:new Date().toISOString()})},async sendUrgentWarning(a){const t=await this.getCommissionById(a.$id);if(!t||t.status!=="PENDING")return;const n=Dn.COMMISSION_URGENT;await this.createNotification({therapistId:a.therapistId,type:"COMMISSION_URGENT",title:n.title,message:n.message(a.commissionAmount,"30 minutes"),commissionId:a.commissionId}),await this.updateCommission(a.$id,{urgentWarningSentAt:new Date().toISOString()})},async sendFinalWarning(a){const t=await this.getCommissionById(a.$id);if(!t||t.status!=="PENDING")return;const n=Dn.COMMISSION_FINAL;await this.createNotification({therapistId:a.therapistId,type:"COMMISSION_FINAL",title:n.title,message:n.message(a.commissionAmount),commissionId:a.commissionId,urgent:!0}),await this.updateCommission(a.$id,{finalWarningSentAt:new Date().toISOString()})},async enforceRestriction(a){const t=await this.getCommissionById(a.$id);if(!t||t.status!=="PENDING")return;const n=a.commissionAmount+ka;await this.updateCommission(a.$id,{status:"OVERDUE",restrictedAt:new Date().toISOString(),reactivationFeeRequired:!0,reactivationFeeAmount:ka,reactivationFeePaid:!1,totalAmountDue:n}),await this.restrictTherapistAccount(a.therapistId,{commissionId:a.commissionId,commissionAmount:a.commissionAmount,reactivationFee:ka,totalAmountDue:n});const s=Dn.COMMISSION_BLOCKED;await this.createNotification({therapistId:a.therapistId,type:"COMMISSION_BLOCKED",title:s.title,message:"Your account has been RESTRICTED due to unpaid commission of Rp ".concat(a.commissionAmount.toLocaleString("id-ID"),". A reactivation fee of Rp ").concat(ka.toLocaleString("id-ID")," has been applied. Total amount due: Rp ").concat(n.toLocaleString("id-ID"),". Upload payment proof to request reactivation."),commissionId:a.commissionId,urgent:!0})},async requestReactivation(a,t){try{const n=await this.getCommissionById(a);if(!n)return{success:!1,message:"Commission record not found"};if(n.status!=="OVERDUE")return{success:!1,message:"Account is not restricted"};const s=n.totalAmountDue||n.commissionAmount+(n.reactivationFeeRequired?ka:0);return await this.updateCommission(a,{paymentProofUrl:t,paymentProofUploadedAt:new Date().toISOString()}),await K.createDocument(h.databaseId,h.collections.notifications||"notifications",se.unique(),{recipientId:"admin",recipientType:"admin",type:"REACTIVATION_REQUEST",title:"üîì Reactivation Request",message:"Therapist ".concat(n.therapistName," has uploaded payment proof of Rp ").concat(s.toLocaleString("id-ID")," for reactivation."),commissionId:n.commissionId,urgent:!0,read:!1,createdAt:new Date().toISOString()}),{success:!0,message:"Reactivation request submitted. Admin will verify your payment of Rp ".concat(s.toLocaleString("id-ID"),"."),totalDue:s}}catch{return{success:!1,message:"Failed to submit reactivation request"}}},async verifyReactivationPayment(a,t){try{const n=await this.getCommissionById(a);if(!n)throw new Error("Commission ".concat(a," not found"));if(n.status!=="OVERDUE")throw new Error("Commission is not in OVERDUE status");if(!n.paymentProofUrl)throw new Error("No payment proof uploaded");const s=new Date().toISOString(),i=await K.updateDocument(h.databaseId,h.collections.commissionRecords||"commission_records",a,{status:"PAID",paidAt:s,verifiedBy:t,reactivationFeePaid:!0,reactivatedAt:s,updatedAt:s});return await this.unrestrictTherapistAccount(n.therapistId),await this.createNotification({therapistId:n.therapistId,type:"COMMISSION_REMINDER",title:"‚úÖ Account Reactivated",message:"Your payment of Rp ".concat(n.totalAmountDue.toLocaleString("id-ID")," has been verified. Your account is now active and you can accept bookings again."),commissionId:n.commissionId}),i}catch{return null}},async adminOverrideReactivation(a,t,n){try{const s=await this.getCommissionById(a);if(!s)throw new Error("Commission ".concat(a," not found"));const i=new Date().toISOString(),r=await K.updateDocument(h.databaseId,h.collections.commissionRecords||"commission_records",a,{status:"PAID",paidAt:i,verifiedBy:"ADMIN_OVERRIDE:".concat(t),reactivationFeePaid:!0,reactivatedAt:i,updatedAt:i,adminOverrideReason:n,adminOverrideBy:t,adminOverrideAt:i});return await this.unrestrictTherapistAccount(s.therapistId),r}catch{return null}},async getReactivationSummary(a){try{const t=await this.getOverdueCommissions(a);if(t.length===0)return{isRestricted:!1,commissionAmount:0,reactivationFee:0,totalDue:0,paymentProofUploaded:!1};const n=t[0],s=n.reactivationFeeRequired?ka:0,i=n.commissionAmount+s;return{isRestricted:!0,commissionAmount:n.commissionAmount,reactivationFee:s,totalDue:i,commissionId:n.$id,paymentProofUploaded:!!n.paymentProofUrl}}catch{return null}},async markAsPaid(a,t){try{const n=await this.getCommissionById(a);if(!n)throw new Error("Commission ".concat(a," not found"));const s=await K.updateDocument(h.databaseId,h.collections.commissionRecords||"commission_records",a,{status:"PAID",paidAt:new Date().toISOString(),verifiedBy:t,updatedAt:new Date().toISOString()});return n.status==="OVERDUE"&&await this.unrestrictTherapistAccount(n.therapistId),s}catch{return null}},async getCommissionById(a){try{return await K.getDocument(h.databaseId,h.collections.commissionRecords||"commission_records",a)}catch{return null}},async getPendingCommissions(a){try{return(await K.listDocuments(h.databaseId,h.collections.commissionRecords||"commission_records",[b.equal("therapistId",a),b.equal("status","PENDING")])).documents}catch{return[]}},async getOverdueCommissions(a){try{return(await K.listDocuments(h.databaseId,h.collections.commissionRecords||"commission_records",[b.equal("therapistId",a),b.equal("status","OVERDUE")])).documents}catch{return[]}},async hasUnpaidCommissions(a){const t=await this.getPendingCommissions(a),n=await this.getOverdueCommissions(a);return t.length>0||n.length>0},async getTotalUnpaidAmount(a){const t=await this.getPendingCommissions(a),n=await this.getOverdueCommissions(a);return[...t,...n].reduce((i,r)=>i+r.commissionAmount,0)},async updateCommission(a,t){try{await K.updateDocument(h.databaseId,h.collections.commissionRecords||"commission_records",a,{...t,updatedAt:new Date().toISOString()})}catch{}},async createNotification(a){try{await K.createDocument(h.databaseId,h.collections.notifications||"notifications",se.unique(),{recipientId:a.therapistId,recipientType:"therapist",type:a.type,title:a.title,message:a.message,commissionId:a.commissionId,urgent:a.urgent||!1,read:!1,createdAt:new Date().toISOString()})}catch{}},async restrictTherapistAccount(a,t){try{await K.updateDocument(h.databaseId,h.collections.therapists||"therapists",a,{status:"RESTRICTED",bookingEnabled:!1,scheduleEnabled:!1,restrictionReason:t?"Commission payment overdue. Total due: Rp ".concat(t.totalAmountDue.toLocaleString("id-ID")," (Commission: Rp ").concat(t.commissionAmount.toLocaleString("id-ID")," + Reactivation Fee: Rp ").concat(t.reactivationFee.toLocaleString("id-ID"),")"):"Commission payment overdue",restrictedAt:new Date().toISOString(),pendingCommissionId:(t==null?void 0:t.commissionId)||null,pendingCommissionAmount:(t==null?void 0:t.commissionAmount)||0,pendingReactivationFee:(t==null?void 0:t.reactivationFee)||0,totalAmountDue:(t==null?void 0:t.totalAmountDue)||0,updatedAt:new Date().toISOString()})}catch{}},async unrestrictTherapistAccount(a){try{await K.updateDocument(h.databaseId,h.collections.therapists||"therapists",a,{status:"AVAILABLE",bookingEnabled:!0,scheduleEnabled:!0,restrictionReason:null,restrictedAt:null,pendingCommissionId:null,pendingCommissionAmount:0,pendingReactivationFee:0,totalAmountDue:0,updatedAt:new Date().toISOString()})}catch{}},async processOverdueCommissions(){try{const a=new Date().toISOString(),t=await K.listDocuments(h.databaseId,h.collections.commissionRecords||"commission_records",[b.equal("status","PENDING")]);for(const n of t.documents){const s=n,r=new Date(s.completedAt).getTime()+to;Date.now()>=r&&await this.enforceRestriction(s)}}catch{}}},Yd=Object.freeze(Object.defineProperty({__proto__:null,ADMIN_REACTIVATION_FEE:ka,adminCommissionService:dl},Symbol.toStringTag,{value:"Module"}));Re.ACCEPTED,Re.CONFIRMED,Re.COMPLETED;Re.DECLINED,Re.EXPIRED;var cs=(a=>(a.AVAILABLE="AVAILABLE",a.BUSY="BUSY",a.CLOSED="CLOSED",a.RESTRICTED="RESTRICTED",a.CONNECTING="CONNECTING",a))(cs||{});const Qa={BUSY_BOOK_NOW:'‚ö†Ô∏è This therapist is currently BUSY and not available for Book Now.\n\nPlease check back later or search for another therapist with GREEN "Available" status.\n\nYou may also place a scheduled booking instead.',CLOSED_BOOK_NOW:'‚ö†Ô∏è This therapist is currently OFFLINE and not available for Book Now.\n\nPlease check back later or search for another therapist with GREEN "Available" status.\n\nYou may also place a scheduled booking instead.',RESTRICTED:'‚ö†Ô∏è This therapist is not in service and cannot accept any bookings at this time.\n\nPlease search for another therapist with GREEN "Available" status.',INVALID_STATUS:"‚ö†Ô∏è Unable to verify therapist availability.\nPlease try again later or select another therapist."},yn={canBook(a,t){const n=(a||"").toUpperCase();if(n==="RESTRICTED")return{allowed:!1,reason:"RESTRICTED_STATUS",userMessage:Qa.RESTRICTED,allowScheduled:!1};if(t===oa.BOOK_NOW){if(n==="BUSY")return{allowed:!1,reason:"BUSY_BOOK_NOW_BLOCKED",userMessage:Qa.BUSY_BOOK_NOW,allowScheduled:!0};if(n==="CLOSED")return{allowed:!1,reason:"CLOSED_BOOK_NOW_BLOCKED",userMessage:Qa.CLOSED_BOOK_NOW,allowScheduled:!0};if(n==="AVAILABLE"||n==="CONNECTING")return{allowed:!0,allowScheduled:!0};if(!Object.values(cs).includes(n))return{allowed:!1,reason:"UNKNOWN_STATUS_BLOCKED",userMessage:Qa.BUSY_BOOK_NOW,allowScheduled:!0}}return t===oa.SCHEDULED?n==="RESTRICTED"?{allowed:!1,reason:"RESTRICTED_SCHEDULED_BLOCKED",userMessage:Qa.RESTRICTED,allowScheduled:!1}:{allowed:!0,allowScheduled:!0}:{allowed:!0,allowScheduled:!0}},canBookNow(a){return this.canBook(a,oa.BOOK_NOW).allowed},canSchedule(a){return this.canBook(a,oa.SCHEDULED).allowed},getBlockedMessage(a,t){return this.canBook(a,t).userMessage||Qa.INVALID_STATUS},normalizeStatus(a){if(!a)return"AVAILABLE";const t=a.toUpperCase().trim();return t==="AVAILABLE"||t==="ONLINE"||t==="ACTIVE"?"AVAILABLE":t==="BUSY"||t==="IN_SERVICE"||t==="OCCUPIED"?"BUSY":t==="CLOSED"||t==="OFFLINE"||t==="INACTIVE"?"CLOSED":t==="RESTRICTED"||t==="BLOCKED"||t==="SUSPENDED"?"RESTRICTED":"AVAILABLE"},validateBookingRequest(a,t){const n=this.canBook(a,t);if(!n.allowed){const s=new Error(n.userMessage||"Booking not allowed");throw s.code="AVAILABILITY_BLOCKED",s.reason=n.reason,s.allowScheduled=n.allowScheduled,s}}},Jd=Object.freeze(Object.defineProperty({__proto__:null,TherapistAvailabilityStatus:cs,availabilityEnforcementService:yn},Symbol.toStringTag,{value:"Module"})),Qd=[/\b\d{10,16}\b/g,/\b\d{3,4}[-.\s]?\d{3,4}[-.\s]?\d{3,4}[-.\s]?\d{0,4}\b/g,/\b(?:rekening|rek|norek|no\.?\s*rek|account|acc|acct)\.?\s*:?\s*\d{6,}/gi],Xd=[/\b(rekening|rek|norek|no\.\s*rek|account|acc|acct|bank)\b/gi,/\b(transfer|tf|kirim|bayar|payment)\s*(ke|to)?\s*\d{6,}/gi,/\b(bca|mandiri|bni|bri|cimb|danamon|permata|maybank|btn|ocbc|hsbc|panin|mega|bukopin)\b.*\d{6,}/gi],$a={maskAccountNumber(a){if(!a)return"‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢";const t=a.replace(/\D/g,"");if(t.length<4)return"‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢";const n=t.slice(-4),s=t.length-4,i=Math.ceil(s/4),r=Array(i).fill("‚Ä¢‚Ä¢‚Ä¢‚Ä¢").join(" ");return"".concat(r," ").concat(n).trim()},getLastFourDigits(a){return a.replace(/\D/g,"").slice(-4)||"****"},createMaskedCard(a){return{bankName:a.bankName,maskedAccountNumber:this.maskAccountNumber(a.accountNumber),accountHolderName:a.accountHolderName,lastFourDigits:this.getLastFourDigits(a.accountNumber)}},parseBankCardString(a){if(!a)return null;const t=a.split("|");if(t.length>=3)return{bankName:t[0].trim(),accountNumber:t[1].trim(),accountHolderName:t[2].trim()};const n=a.split("\n").map(l=>l.trim()).filter(Boolean);if(n.length>=3)return{bankName:n[0],accountNumber:n[1],accountHolderName:n[2]};const s=a.match(/(?:bank|nama\s*bank)\s*:?\s*([^\n,|]+)/i),i=a.match(/(?:rekening|rek|norek|account|acc|nomor)\s*:?\s*(\d[\d\s.-]*\d)/i),r=a.match(/(?:nama|name|holder|a\.n\.?|atas\s*nama)\s*:?\s*([^\n,|]+)/i);return s&&i&&r?{bankName:s[1].trim(),accountNumber:i[1].replace(/[\s.-]/g,""),accountHolderName:r[1].trim()}:null},containsBankNumber(a){if(!a)return{isValid:!0,containsBankNumber:!1};for(const t of Qd){t.lastIndex=0;const n=a.match(t);if(n&&n.filter(i=>{const r=i.replace(/\D/g,"");return r.length>=10&&r.length<=20}).length>0)return{isValid:!1,containsBankNumber:!0,warning:"üö´ Sharing bank account numbers manually is not allowed for security reasons. Bank details are shared automatically through the secure system."}}for(const t of Xd)if(t.lastIndex=0,t.test(a)){const n=a.match(/\d{8,}/g);if(n&&n.some(s=>s.length>=10))return{isValid:!1,containsBankNumber:!0,warning:"üö´ Sharing bank account numbers manually is not allowed for security reasons. Bank details are shared automatically through the secure system."}}return{isValid:!0,containsBankNumber:!1}},formatForChat(a){if(!a)return"üí≥ Bank card details not available. Please contact support at indastreet.id@gmail.com.";const t=this.createMaskedCard(a);return"üí≥ **Payment Details**\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüè¶ Bank: ".concat(t.bankName,"\nüí∞ Account: ").concat(t.maskedAccountNumber,"\nüë§ Name: ").concat(t.accountHolderName,'\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n*Tap "Payment Transferred" when done*')},formatSystemMessage(a,t){if(!a)return"üí≥ Bank card details are not available. The therapist needs to update their payment information.";const n=this.createMaskedCard(a),s=t?"\nüíµ Amount: Rp ".concat(t.toLocaleString("id-ID")):"";return"üí≥ **Secure Payment Information**\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüè¶ Bank: ".concat(n.bankName,"\nüí∞ Account: ").concat(n.maskedAccountNumber,"\nüë§ Name: ").concat(n.accountHolderName).concat(s,'\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\nPlease transfer the booking amount to the account above.\nTap "Payment Transferred" button after completing the transfer.\n\n‚ö†Ô∏è *This is a secure, auto-generated message. Do not share bank details manually.*')},isValidBankCard(a){return a?!!(a.bankName&&a.accountNumber&&a.accountHolderName&&a.accountNumber.replace(/\D/g,"").length>=10):!1}};class Zd{constructor(){Z(this,"collectionId",h.collections.commissionRecords||"commission_records");Z(this,"LATE_PAYMENT_FEE",5e4)}async hasUnpaidCommissions(t){try{const s=(await K.listDocuments(h.databaseId,this.collectionId,[b.equal("therapistId",t),b.equal("status",["pending","overdue"])])).documents.length>0;return s}catch{return!1}}async getUnpaidAmount(t){try{return(await K.listDocuments(h.databaseId,this.collectionId,[b.equal("therapistId",t),b.equal("status",["pending","overdue"])])).documents.reduce((s,i)=>s+(i.commissionAmount||0),0)}catch{return 0}}async createCommissionRecord(t,n,s,i,r,l,o,c,d){const p=Math.round(l*.3),f=new Date(i);f.setHours(f.getHours()+5);try{return await K.createDocument(h.databaseId,this.collectionId,se.unique(),{therapistId:t,therapistName:n,bookingId:s,bookingDate:i,scheduledDate:r||null,serviceAmount:l,commissionRate:30,commissionAmount:p,paymentDeadline:f.toISOString(),customerName:o||"Customer",massageType:c||"Massage Service",duration:d||60,status:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}catch(y){throw y}}async uploadPaymentProof(t,n,s){try{const i=await K.getDocument(h.databaseId,this.collectionId,t);if(i.status==="awaiting_verification")throw new Error("Payment proof already submitted and awaiting admin verification. Please wait for approval.");if(i.status==="verified")throw new Error("This commission has already been verified. No further uploads are allowed.");const r=h.bucketId;if(!r)throw new Error("Storage bucket not configured - cannot upload payment proof");const l=await Qt.createFile(r,se.unique(),n),o="".concat(h.endpoint,"/storage/buckets/").concat(r,"/files/").concat(l.$id,"/view?project=").concat(h.projectId),d=await K.updateDocument(h.databaseId,this.collectionId,t,{paymentProofImage:o,paymentProofUploadedAt:new Date().toISOString(),paymentMethod:s,status:"awaiting_verification",updatedAt:new Date().toISOString()});return await this.notifyAdminForVerification(t),d}catch(i){throw i}}async verifyPayment(t,n,s,i){try{const r=s?"verified":"rejected",o=await K.updateDocument(h.databaseId,this.collectionId,t,{status:r,verifiedBy:n,verifiedAt:new Date().toISOString(),rejectionReason:i||null,updatedAt:new Date().toISOString()});return s?await this.reactivateAccount(o.therapistId):await this.deactivateAccount(o.therapistId),o}catch(r){throw r}}async checkOverduePayments(){try{const t=new Date().toISOString(),n=await K.listDocuments(h.databaseId,this.collectionId,[b.equal("status","pending"),b.lessThan("paymentDeadline",t)]);for(const s of n.documents){const i=s,r=(i.commissionAmount||0)+this.LATE_PAYMENT_FEE;await K.updateDocument(h.databaseId,this.collectionId,i.$id,{status:"overdue",lateFee:this.LATE_PAYMENT_FEE,totalDue:r,updatedAt:new Date().toISOString()}),await this.deactivateAccount(i.therapistId)}}catch{}}async getTherapistPendingPayments(t){try{return(await K.listDocuments(h.databaseId,this.collectionId,[b.equal("therapistId",t),b.equal("status",["pending","overdue","awaiting_verification"])])).documents}catch{return[]}}async getPaymentsAwaitingVerification(){try{return(await K.listDocuments(h.databaseId,this.collectionId,[b.equal("status","awaiting_verification")])).documents}catch{return[]}}async deactivateAccount(t){try{await K.updateDocument(h.databaseId,h.collections.therapists||"therapists",t,{status:"busy",bookingEnabled:!1,scheduleEnabled:!1,deactivationReason:"Payment overdue - upload payment proof to reactivate",updatedAt:new Date().toISOString()})}catch(n){throw n}}async reactivateAccount(t){try{await K.updateDocument(h.databaseId,h.collections.therapists||"therapists",t,{status:"available",bookingEnabled:!0,scheduleEnabled:!0,deactivationReason:null,updatedAt:new Date().toISOString()})}catch(n){throw n}}async notifyAdminForVerification(t){try{const n=h.collections.notifications;if(!n||n==="")throw new Error("notifications collection ID is empty - cannot notify admin for verification");await K.createDocument(h.databaseId,n,se.unique(),{type:"payment_verification",title:"New Payment Proof Submitted",message:"A therapist has uploaded payment proof for commission ID: ".concat(t),commissionId:t,read:!1,createdAt:new Date().toISOString()})}catch{}}async getPaymentHistory(t,n=50){try{return(await K.listDocuments(h.databaseId,this.collectionId,[b.equal("therapistId",t),b.orderDesc("createdAt"),b.limit(n)])).documents}catch{return[]}}}const Nn=new Zd,eu=Object.freeze(Object.defineProperty({__proto__:null,commissionTrackingService:Nn},Symbol.toStringTag,{value:"Module"})),tu="https://cloud.appwrite.io/v1",au="66e5c5d1003b5b00c1d0",nu="6972e0c30012060a2762",su="66e5c5d100248f08b3b5",iu="messages",Si=new ct().setEndpoint(tu).setProject(au),ru=new ss(Si),ou=new Zt(Si);class lu{constructor(){Z(this,"functionId");Z(this,"client");Z(this,"functions");this.functionId=nu,this.client=Si,this.functions=ru}async sendMessage(t){var n,s;try{if(!this.functions)return{success:!1,error:"SERVICE_UNAVAILABLE",message:"Chat service not initialized properly"};const i=await this.functions.createExecution(this.functionId,JSON.stringify(t),!1,"/","POST",{"Content-Type":"application/json"});let r;try{r=JSON.parse(i.responseBody)}catch{return{success:!1,error:"PARSE_ERROR",message:"Failed to process server response"}}return r.success||r.isViolation||r.isRestricted,r}catch(i){return i.code===404||(n=i.message)!=null&&n.includes("not found")?{success:!1,error:"FUNCTION_NOT_FOUND",message:"Chat function not deployed. Please contact support."}:i instanceof Error&&i.message.includes("network")?{success:!1,error:"NETWORK_ERROR",message:"Unable to connect to server. Please check your internet connection."}:i.code===401||(s=i.message)!=null&&s.includes("authentication")?{success:!1,error:"AUTH_ERROR",message:"Authentication failed. Please refresh the page."}:await this.fallbackDirectSend(t)}}async fallbackDirectSend(t){try{const n={conversationId:t.roomId,senderId:t.senderId,senderName:t.senderName,senderRole:t.senderType,receiverId:t.recipientId,receiverName:t.recipientName,receiverRole:t.recipientType||"therapist",message:t.message,messageType:"text",isRead:!1,createdAt:new Date().toISOString(),messageId:se.unique(),recipientId:t.recipientId,content:t.message,sentAt:new Date().toISOString()};return{success:!0,messageId:(await ou.createDocument(su,iu,se.unique(),n)).$id,message:"Message sent (fallback mode)"}}catch{return{success:!1,error:"TOTAL_FAILURE",message:"Chat service completely unavailable. Please try again later."}}}quickValidate(t){const n=t.toLowerCase(),s=[{pattern:/\b0\s*8\s*\d/gi,reason:"Phone number detected"},{pattern:/\bwa\b/gi,reason:"WhatsApp reference detected"},{pattern:/\bcall\s+me\b/gi,reason:"Contact phrase detected"},{pattern:/@[a-zA-Z0-9_]{3,}/g,reason:"Social media handle detected"},{pattern:/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/gi,reason:"Email detected"}];for(const{pattern:i,reason:r}of s)if(i.lastIndex=0,i.test(n))return{mayBeBlocked:!0,reason:r};return{mayBeBlocked:!1}}}const ds=new lu,ao=Object.freeze(Object.defineProperty({__proto__:null,serverEnforcedChatService:ds},Symbol.toStringTag,{value:"Module"})),cu="https://syd.cloud.appwrite.io/v1",du="675d5d0e00328cac5bb5";new ct().setEndpoint(cu).setProject(du);h.databaseId;h.collections.reviews;const uu="https://syd.cloud.appwrite.io/v1",mu="675d5d0e00328cac5bb5";new ct().setEndpoint(uu).setProject(mu);const ul={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},gu=536870904;function pu(a){if(a==null||typeof a!="object")return!1;const t=a.code;return t===gu||t==="536870904"}function hu(a,t){return(function(...n){return a.apply(this,n).catch(s=>pu(s)?(pn(s,"databases.".concat(t)),Promise.reject(new Error("Connection or service error. Please try again."))):Promise.reject(s))})}function st(a,t){const n=ul[a]||t;if(!n||n===""){const s="‚ùå MISSING CONFIG: ".concat(a," is required but not set in environment variables");throw new Error(s)}return n}function Da(a){return ul[a]||""}let js=null;function ml(){return js||(js={endpoint:st("VITE_APPWRITE_ENDPOINT","https://syd.cloud.appwrite.io/v1"),projectId:st("VITE_APPWRITE_PROJECT_ID","68f23b11000d25eb3664"),databaseId:st("VITE_APPWRITE_DATABASE_ID","68f76ee1000e64ca8d05"),bucketId:st("VITE_APPWRITE_BUCKET_ID","68f76bdd002387590584"),collections:{therapists:st("VITE_THERAPISTS_COLLECTION_ID","therapists_collection_id"),places:st("VITE_PLACES_COLLECTION_ID","places_collection_id"),facial_places:st("VITE_FACIAL_PLACES_COLLECTION_ID","facial_places_collection"),bookings:st("VITE_BOOKINGS_COLLECTION_ID","bookings"),reviews:st("VITE_REVIEWS_COLLECTION_ID","reviews_collection_id"),locations:st("VITE_LOCATIONS_COLLECTION_ID","locations"),messages:st("VITE_MESSAGES_COLLECTION_ID","chat_messages"),chatMessages:st("VITE_CHAT_MESSAGES_COLLECTION_ID","chat_messages"),chatRooms:st("VITE_CHAT_ROOMS_COLLECTION_ID","chat_rooms"),chatAuditLogs:st("VITE_CHAT_AUDIT_LOGS_COLLECTION_ID","chat_audit_logs"),chatSessions:st("VITE_CHAT_SESSIONS_COLLECTION_ID","chat_sessions"),analytics:"Analytics",analyticsEvents:"Analytics Events",agentVisits:"Agent Visits",chatTranslations:"Chat Translations",users:Da("VITE_USERS_COLLECTION_ID"),agents:Da("VITE_AGENTS_COLLECTION_ID"),admins:Da("VITE_ADMINS_COLLECTION_ID"),notifications:Da("VITE_NOTIFICATIONS_COLLECTION_ID"),hotels:st("VITE_HOTELS_COLLECTION_ID","hotels_collection_id"),hotelBookings:st("VITE_HOTEL_BOOKINGS_COLLECTION_ID","hotel_bookings"),partners:"Partners",massageTypes:"Massage Types",customLinks:Da("VITE_CUSTOM_LINKS_COLLECTION_ID"),imageAssets:"Image Assets",loginBackgrounds:"Login Backgrounds",translations:Da("VITE_TRANSLATIONS_COLLECTION_ID"),membershipPricing:"Membership Pricing",pricing:"Pricing",commissionRecords:"Commission Records",payments:"Payments",leadGenerations:"Lead Generations",membershipAgreements:"Membership Agreements",membershipUpgrades:"Membership Upgrades",deactivationRequests:"Deactivation Requests",leads:Da("VITE_LEADS_COLLECTION_ID"),contactInquiries:"contact_inquiries",employerJobPostings:"Employer Job Postings",therapistJobListings:"Therapist Job Listings",therapistMenus:"therapist_menus",therapistDashboard:"therapist_dashboard_",verifications:"Verifications",pushSubscriptions:"Push Subscriptions",appConfig:"App Config",uiConfig:"UI Config",attributes:"ATTRIBUTES",emergency_alerts:"emergency_alerts"}}),js}const N=new Proxy({},{get(a,t){return ml()[t]}});let Is=null,Ts=null,As=null,Cs=null,Ps=null;function Sn(){if(!Is){const a=ml();Is=new ct().setEndpoint(a.endpoint).setProject(a.projectId)}return Is}function fu(){return Ts||(Ts=new Zt(Sn())),Ts}let En=null;function yu(){if(En)return En;const a=fu();return En=new Proxy(a,{get(t,n){const s=t[n];return typeof s=="function"?hu(s.bind(t),n):s}}),En}function bu(){return As||(As=new bi(Sn())),As}function xu(){return Cs||(Cs=new xi(Sn())),Cs}function ku(){return Ps||(Ps=new ss(Sn())),Ps}new Proxy({},{get(a,t){return Sn()[t]}});const J=new Proxy({},{get(a,t){return yu()[t]}}),Jn=new Proxy({},{get(a,t){return bu()[t]}}),Dt=new Proxy({},{get(a,t){return xu()[t]}});new Proxy({},{get(a,t){return ku()[t]}});const no=J,vu={async uploadImage(a,t){try{const n=t?"".concat(t,"/").concat(Date.now(),"_").concat(a.name):"".concat(Date.now(),"_").concat(a.name),s=await Dt.createFile(N.bucketId,se.unique(),a);return"".concat(N.endpoint,"/storage/buckets/").concat(N.bucketId,"/files/").concat(s.$id,"/view?project=").concat(N.projectId)}catch(n){throw n}},async uploadProfileImage(a){try{const t=a.split(",")[1];if(!t)throw new Error("Invalid base64 image format");const n=atob(t),s=new Array(n.length);for(let m=0;m<n.length;m++)s[m]=n.charCodeAt(m);const i=new Uint8Array(s),r=new Blob([i],{type:"image/jpeg"}),l="profile_".concat(Date.now(),".jpg"),o=new File([r],l,{type:"image/jpeg"}),c=await Dt.createFile(N.bucketId,se.unique(),o);return"".concat(N.endpoint,"/storage/buckets/").concat(N.bucketId,"/files/").concat(c.$id,"/view?project=").concat(N.projectId)}catch(t){throw t}},async uploadIcon(a){try{const t=a.split(",")[1];if(!t)throw new Error("Invalid base64 image format");const n=atob(t),s=new Array(n.length);for(let m=0;m<n.length;m++)s[m]=n.charCodeAt(m);const i=new Uint8Array(s),r=new Blob([i],{type:"image/png"}),l="icon_".concat(Date.now(),".png"),o=new File([r],l,{type:"image/png"}),c=await Dt.createFile(N.bucketId,se.unique(),o);return"".concat(N.endpoint,"/storage/buckets/").concat(N.bucketId,"/files/").concat(c.$id,"/view?project=").concat(N.projectId)}catch(t){throw t}},async deleteFile(a){try{await Dt.deleteFile(N.bucketId,a)}catch(t){throw t}},getFileUrl(a){return"".concat(N.endpoint,"/storage/buckets/").concat(N.bucketId,"/files/").concat(a,"/view?project=").concat(N.projectId)},getDownloadUrl(a){return"".concat(N.endpoint,"/storage/buckets/").concat(N.bucketId,"/files/").concat(a,"/download?project=").concat(N.projectId)}},wu={async sendAdminNotification(a){try{const t="\nNew ".concat(a.type==="therapist"?"Therapist":"Massage Place"," Registration\n\nName: ").concat(a.name,"\nEmail: ").concat(a.email,"\nWhatsApp: ").concat(a.whatsappNumber,"\nLocation: ").concat(a.location,"\nRegistration Date: ").concat(new Date(a.registrationDate).toLocaleString(),"\n            ").trim(),n=await fetch("https://api.web3forms.com/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({access_key:"46ce7d7f-e9d5-4d49-8f14-0b0e3c3e1f5a",subject:"New ".concat(a.type==="therapist"?"Therapist":"Massage Place"," Registration"),from_name:"IndaStreet Registration System",email:"indastreet.id@gmail.com",message:t})});if(!n.ok)throw new Error("Email service returned ".concat(n.status))}catch(t){throw t}},async sendBookingConfirmation(a){try{const t="\nBooking Confirmation - IndaStreet Massage\n\nDear ".concat(a.customerName,",\n\nYour massage booking has been confirmed!\n\nDetails:\n- Therapist: ").concat(a.therapistName,"\n- Service: ").concat(a.serviceType,"\n- Date: ").concat(a.bookingDate,"\n- Time: ").concat(a.bookingTime,"\n- Location: ").concat(a.location,"\n\nThank you for choosing IndaStreet!\n            ").trim(),n=await fetch("https://api.web3forms.com/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({access_key:"46ce7d7f-e9d5-4d49-8f14-0b0e3c3e1f5a",subject:"Booking Confirmation - IndaStreet Massage",from_name:"IndaStreet Booking System",email:a.customerEmail,message:t})});if(!n.ok)throw new Error("Email service returned ".concat(n.status))}catch(t){throw t}},async sendPaymentConfirmation(a){try{const t="\nPayment Confirmation - IndaStreet\n\nDear ".concat(a.customerName,",\n\nYour payment has been processed successfully!\n\nDetails:\n- Service: ").concat(a.serviceType,"\n- Amount: Rp ").concat(a.amount.toLocaleString(),"\n- Transaction ID: ").concat(a.transactionId,"\n- Date: ").concat(new Date().toLocaleString(),"\n\nThank you for your payment!\n            ").trim(),n=await fetch("https://api.web3forms.com/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({access_key:"46ce7d7f-e9d5-4d49-8f14-0b0e3c3e1f5a",subject:"Payment Confirmation - IndaStreet",from_name:"IndaStreet Payment System",email:a.customerEmail,message:t})});if(!n.ok)throw new Error("Email service returned ".concat(n.status))}catch(t){throw t}},async create(a){try{return await J.createDocument(N.databaseId,N.collections.notifications,se.unique(),a)}catch(t){throw t}},async getAll(a){try{const t=a?[b.equal("userId",a),b.orderDesc("createdAt"),b.limit(100)]:[b.orderDesc("createdAt"),b.limit(100)];return(await J.listDocuments(N.databaseId,N.collections.notifications,t)).documents}catch{return[]}},async getUnread(a){try{return(await J.listDocuments(N.databaseId,N.collections.notifications,[b.equal("userId",a),b.equal("read",!1),b.orderDesc("createdAt")])).documents}catch{return[]}},async update(a,t){try{return await J.updateDocument(N.databaseId,N.collections.notifications,a,t)}catch(n){throw n}},async createWhatsAppContactNotification(a){const t={userId:a.userId,type:"whatsapp_contact",title:"WhatsApp Contact Request",body:"".concat(a.customerName," wants to contact you"),read:!1,createdAt:new Date().toISOString(),...a};return await this.create(t)}},gl={async checkForDuplicates(a,t){try{const n=t==="therapist"?N.collections.therapists:N.collections.places;if(a.bankName&&a.accountNumber){const s=await this.checkBankDuplicate(a,n);if(s.hasDuplicate)return s}if(a.whatsappNumber){const s=await this.checkWhatsAppDuplicate(a,n);if(s.hasDuplicate)return s}if(a.ktpNumber){const s=await this.checkKTPDuplicate(a,n);if(s.hasDuplicate)return s}return{hasDuplicate:!1,duplicateField:null,duplicateAccount:null,shouldDeactivate:!1}}catch(n){throw n}},async checkBankDuplicate(a,t){try{const n=[b.equal("bankName",a.bankName),b.equal("accountNumber",a.accountNumber),b.notEqual("$id",a.$id)],s=await J.listDocuments(N.databaseId,t,n);if(s.documents.length>0){const i=s.documents[0],r=new Date(a.$createdAt)>new Date(i.$createdAt);return{hasDuplicate:!0,duplicateField:"bank",duplicateAccount:i,shouldDeactivate:r}}return{hasDuplicate:!1,duplicateField:null,duplicateAccount:null,shouldDeactivate:!1}}catch(n){throw n}},async checkWhatsAppDuplicate(a,t){try{const n=a.whatsappNumber.replace(/[\s\-\(\)]/g,""),s=[b.equal("whatsappNumber",n),b.notEqual("$id",a.$id)],i=await J.listDocuments(N.databaseId,t,s);if(i.documents.length>0){const r=i.documents[0],l=new Date(a.$createdAt)>new Date(r.$createdAt);return{hasDuplicate:!0,duplicateField:"whatsapp",duplicateAccount:r,shouldDeactivate:l}}return{hasDuplicate:!1,duplicateField:null,duplicateAccount:null,shouldDeactivate:!1}}catch(n){throw n}},async checkKTPDuplicate(a,t){try{const n=[b.equal("ktpNumber",a.ktpNumber),b.notEqual("$id",a.$id)],s=await J.listDocuments(N.databaseId,t,n);if(s.documents.length>0){const i=s.documents[0],r=new Date(a.$createdAt)>new Date(i.$createdAt);return{hasDuplicate:!0,duplicateField:"ktp",duplicateAccount:i,shouldDeactivate:r}}return{hasDuplicate:!1,duplicateField:null,duplicateAccount:null,shouldDeactivate:!1}}catch(n){throw n}},async deactivateAccount(a,t,n,s){try{const i=t==="therapist"?N.collections.therapists:N.collections.places;await J.updateDocument(N.databaseId,i,a,{isActive:!1,status:"offline",deactivationReason:n,deactivatedAt:new Date().toISOString(),flaggedForReview:!0,duplicateAccountId:s}),await J.updateDocument(N.databaseId,i,s,{flaggedForReview:!0,hasDuplicateAccount:!0,duplicateAccountId:a})}catch(i){throw i}},async notifyAdmin(a,t){try{const n={bank:"Bank Account Details",whatsapp:"WhatsApp Number",ktp:"KTP Number"},s="\nüö® DUPLICATE ACCOUNT DETECTED\n\n‚ö†Ô∏è Duplicate Field: ".concat(n[t.duplicateField],"\n\nüìã NEWER ACCOUNT (Deactivated):\n- Name: ").concat(a.name,"\n- Type: ").concat(a.accountType,"\n- ID: ").concat(a.$id,"\n- Created: ").concat(new Date(a.$createdAt).toLocaleString(),"\n\nüìã ORIGINAL ACCOUNT (Flagged for Review):\n- Name: ").concat(t.duplicateAccount.name,"\n- Type: ").concat(a.accountType,"\n- ID: ").concat(t.duplicateAccount.$id,"\n- Created: ").concat(new Date(t.duplicateAccount.$createdAt).toLocaleString(),"\n\nüîç DUPLICATE DETAILS:\n").concat(t.duplicateField==="bank"?"- Bank: ".concat(a.bankName,"\n- Account: ").concat(a.accountNumber):"","\n").concat(t.duplicateField==="whatsapp"?"- WhatsApp: ".concat(a.whatsappNumber):"","\n").concat(t.duplicateField==="ktp"?"- KTP: ".concat(a.ktpNumber):"","\n\n‚ö° ACTION TAKEN:\n- Newer account automatically deactivated\n- Both accounts flagged for manual review\n- Please investigate and take appropriate action\n\nüîó Review Accounts:\n- Admin Dashboard ‚Üí ").concat(a.accountType==="therapist"?"Therapists":"Places","\n- Search for flagged accounts\n      ").trim();await J.createDocument(N.databaseId,N.collections.notifications,"unique()",{type:"duplicate_account_detected",severity:"high",title:"üö® Duplicate Account Detected",message:s,accountId:a.$id,accountType:a.accountType,duplicateAccountId:t.duplicateAccount.$id,duplicateField:t.duplicateField,createdAt:new Date().toISOString(),isRead:!1,targetRole:"admin"})}catch{}},async handleDuplicateDetection(a,t){try{const n=await this.checkForDuplicates(a,t);if(n.hasDuplicate&&n.shouldDeactivate){const s={bank:"duplicate bank account details",whatsapp:"duplicate WhatsApp number",ktp:"duplicate KTP number"},i="Account deactivated automatically due to ".concat(s[n.duplicateField]," (matches account ").concat(n.duplicateAccount.$id,")");await this.deactivateAccount(a.$id,t,i,n.duplicateAccount.$id),await this.notifyAdmin(a,n)}}catch(n){throw n}}},Nu=["https://syd.cloud.appwrite.io/v1/storage/buckets/68f76bdd002387590584/files/68fe4181001758526d84/view?project=68f23b11000d25eb3664","https://syd.cloud.appwrite.io/v1/storage/buckets/68f76bdd002387590584/files/68fe4182001d05a11a19/view?project=68f23b11000d25eb3664","https://syd.cloud.appwrite.io/v1/storage/buckets/68f76bdd002387590584/files/68fe4183001a3a6fd0de/view?project=68f23b11000d25eb3664","https://syd.cloud.appwrite.io/v1/storage/buckets/68f76bdd002387590584/files/68fe4184001bba3a3a9d/view?project=68f23b11000d25eb3664","https://syd.cloud.appwrite.io/v1/storage/buckets/68f76bdd002387590584/files/68fe418500198158d9d3/view?project=68f23b11000d25eb3664","https://syd.cloud.appwrite.io/v1/storage/buckets/68f76bdd002387590584/files/68fe41860014a143394d/view?project=68f23b11000d25eb3664","https://syd.cloud.appwrite.io/v1/storage/buckets/68f76bdd002387590584/files/68fe418700130b19a410/view?project=68f23b11000d25eb3664","https://syd.cloud.appwrite.io/v1/storage/buckets/68f76bdd002387590584/files/68fe4188000e00025cea/view?project=68f23b11000d25eb3664","https://syd.cloud.appwrite.io/v1/storage/buckets/68f76bdd002387590584/files/68fe4189000abe1fd8d6/view?project=68f23b11000d25eb3664","https://syd.cloud.appwrite.io/v1/storage/buckets/68f76bdd002387590584/files/68fe418a0008edd3281a/view?project=68f23b11000d25eb3664","https://syd.cloud.appwrite.io/v1/storage/buckets/68f76bdd002387590584/files/68fe418b0007ac3e55ba/view?project=68f23b11000d25eb3664","https://syd.cloud.appwrite.io/v1/storage/buckets/68f76bdd002387590584/files/68fe418c0001a5b36c2c/view?project=68f23b11000d25eb3664","https://syd.cloud.appwrite.io/v1/storage/buckets/68f76bdd002387590584/files/68fe418c0039995990e9/view?project=68f23b11000d25eb3664","https://syd.cloud.appwrite.io/v1/storage/buckets/68f76bdd002387590584/files/68fe418d00337f9be339/view?project=68f23b11000d25eb3664","https://syd.cloud.appwrite.io/v1/storage/buckets/68f76bdd002387590584/files/68fe418e0034947bfaa6/view?project=68f23b11000d25eb3664","https://syd.cloud.appwrite.io/v1/storage/buckets/68f76bdd002387590584/files/68fe418f0031bcb56ded/view?project=68f23b11000d25eb3664","https://syd.cloud.appwrite.io/v1/storage/buckets/68f76bdd002387590584/files/68fe4190002fc09e44fe/view?project=68f23b11000d25eb3664","https://syd.cloud.appwrite.io/v1/storage/buckets/68f76bdd002387590584/files/68fe4191002e5db0dfef/view?project=68f23b11000d25eb3664"],so=Nu,Na=a=>{let t=0;for(let i=0;i<a.length;i++){const r=a.charCodeAt(i);t=(t<<5)-t+r,t=t&t}const n=Math.abs(t)%so.length;return so[n]},pl=a=>{const t=String(a.$id||a.id||a.name||"");return Na(t)},hl=536870904;function Tf(a,t="Something went wrong. Please try again."){try{if(a==null)return t;if(typeof a.message=="string"&&a.message.trim())return a.message.trim();if(typeof a=="string"&&a.trim())return a.trim();const n=a==null?void 0:a.code;return n===hl||n==="536870904"?"Connection or service error. Please try again.":t}catch{return t}}const fl=a=>{try{if(a==null)return{60:0,90:0,120:0};if(typeof a=="object"&&!Array.isArray(a))return{60:Number(a[60])||0,90:Number(a[90])||0,120:Number(a[120])||0};const t=String(a!=null?a:"");return!t||t.trim()===""?{60:0,90:0,120:0}:JSON.parse(t)}catch{return{60:0,90:0,120:0}}},Af=a=>JSON.stringify(a),Cf=a=>JSON.stringify(a),Pf=a=>{try{return JSON.parse(a)}catch{return{lat:0,lng:0}}},Df=a=>JSON.stringify(a),Su=a=>{if(!a)return[];if(Array.isArray(a))return a;if(typeof a=="string")try{const t=JSON.parse(a);return Array.isArray(t)?t:[]}catch{return[]}return[]},Ef=a=>JSON.stringify(a),ju=a=>{if(!a)return[];if(Array.isArray(a))return a;if(typeof a=="string"){if(a.trim()==="")return[];try{const t=JSON.parse(a);return Array.isArray(t)?t:[]}catch{return a.split(",").map(s=>s.trim()).filter(s=>s.length>0)}}return[]};let ei,io;const La=(a,t="#f3f4f6",n="#374151")=>{const s='<svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">\n        <rect width="400" height="300" fill="'.concat(t,'"/>\n        <text x="50%" y="50%" text-anchor="middle" dominant-baseline="middle" font-family="Arial, sans-serif" font-size="18" fill="').concat(n,'">').concat(a,"</text>\n    </svg>");return"data:image/svg+xml,".concat(encodeURIComponent(s))};try{({sendAdminNotification:ei}=require("../config"))}catch{ei=()=>{}}try{({getNonRepeatingMainImage:io}=require("../config"))}catch{io=a=>La("Therapist ".concat(a+1))}const Sa={async create(a){try{if(a.analytics)try{const n=JSON.parse(a.analytics);n&&typeof n.bookings!="number"&&(n.bookings=25+Math.floor(Math.random()*26),a.analytics=JSON.stringify(n))}catch{const n=32+Math.floor(Math.random()*19);a.analytics=JSON.stringify({bookings:n})}else{const n=25+Math.floor(Math.random()*26);a.analytics=JSON.stringify({impressions:0,views:0,profileViews:0,whatsapp_clicks:0,whatsappClicks:0,phone_clicks:0,directions_clicks:0,bookings:n})}const t=await J.createDocument(N.databaseId,N.collections.therapists,"unique()",a);try{await ei({type:"therapist",name:a.name||"Unknown",email:a.email||"Not provided",whatsappNumber:a.whatsappNumber||a.contactNumber||"Not provided",location:a.location||"Not provided",registrationDate:new Date().toISOString()})}catch{}return t}catch(t){throw t}},async getTherapists(){return this.getAll()},async getAll(a,t){var n,s,i,r,l;try{const o=[b.limit(200)];a&&o.push(b.search("location",a));const c=await no.listDocuments(N.databaseId,N.collections.therapists,o);let d=c.documents;t&&(d=c.documents.filter(p=>{let f=[];if(p.serviceAreas)try{typeof p.serviceAreas=="string"?f=JSON.parse(p.serviceAreas):Array.isArray(p.serviceAreas)&&(f=p.serviceAreas)}catch{return!1}return!Array.isArray(f)||f.length===0?!1:f.includes(t)}));const m=c.documents.map((p,f)=>{const y=p.$id||p.id||"",I=Na(y),P=T=>{if(!T)return"Busy";const x=T.toLowerCase();return x==="available"?"Available":x==="busy"||x==="offline"?"Busy":T};let D=null,j=p.description||"";const E=j.match(/\[TIMER:(.+?)\]/);if(E)try{D=JSON.parse(E[1]),j=j.replace(/\[TIMER:.+?\]/,"").trim()}catch{}return{...p,mainImage:I,status:P(p.status),availability:P(p.availability||p.status),description:j,busyUntil:(D==null?void 0:D.busyUntil)||null,busyDuration:(D==null?void 0:D.busyDuration)||null,appwriteId:p.$id||p.id}});try{const p=await no.listDocuments(N.databaseId,"safepass",[b.equal("entityType","therapist"),b.limit(500)]),f=new Map;return p.documents.forEach(I=>{f.set(I.entityId,I)}),m.map(I=>{const P=I.$id||I.id,D=f.get(P);if(D){const j=D.hotelVillaSafePassStatus==="active",E=D.hasSafePassVerification===!0;return{...I,hotelVillaSafePassStatus:D.hotelVillaSafePassStatus,hasSafePassVerification:D.hasSafePassVerification,safePassActivatedDate:D.activatedDate,safePassExpiresDate:D.expiresDate}}return I})}catch{return m}}catch(o){return(n=o.message)!=null&&n.includes("Collection with the requested ID could not be found"),(s=o.message)!=null&&s.includes("not authorized"),(i=o.message)!=null&&i.includes("Failed to fetch")||(r=o.message)!=null&&r.includes("CORS")||(l=o.message)!=null&&l.includes("Network error")?[{$id:"dev-budi-001",id:"dev-budi-001",name:"Budi Massage Therapy",therapistName:"Budi",status:"Available",availability:"Available",isLive:!0,city:"Yogyakarta",location:"Yogyakarta",coordinate:{lat:-7.8268801,lng:110.4197215},description:"Professional massage therapist with 10+ years experience in traditional Indonesian massage techniques.",mainImage:La("Budi Massage","#3b82f6","#ffffff"),profilePicture:La("Budi","#10b981","#ffffff"),pricing:"150000",rating:4.8,reviewCount:127,busyUntil:null,busyDuration:null},{$id:"dev-sari-002",id:"dev-sari-002",name:"Sari Holistic Care",therapistName:"Sari",status:"Available",availability:"Available",isLive:!0,city:"Yogyakarta",location:"Yogyakarta",coordinate:{lat:-7.8268801,lng:110.4197215},description:"Specializing in holistic healing and therapeutic massage for stress relief and wellness.",mainImage:La("Sari Holistic","#8b5cf6","#ffffff"),profilePicture:La("Sari","#f59e0b","#ffffff"),pricing:"175000",rating:4.9,reviewCount:89,busyUntil:null,busyDuration:null},{$id:"dev-maya-003",id:"dev-maya-003",name:"Maya Wellness",therapistName:"Maya",status:"Busy",availability:"Busy",isLive:!0,city:"Yogyakarta",location:"Yogyakarta",coordinate:{lat:-7.8268801,lng:110.4197215},description:"Expert in deep tissue massage and sports therapy. Currently serving another client.",mainImage:La("Maya Wellness","#ef4444","#ffffff"),profilePicture:La("Maya","#ec4899","#ffffff"),pricing:"200000",rating:4.7,reviewCount:156,busyUntil:Date.now()+36e5,busyDuration:60}]:[]}},async getById(a){try{const t=Date.now(),n=await J.getDocument(N.databaseId,N.collections.therapists,a),s=Date.now()-t;return n}catch(t){const n=t;(n==null?void 0:n.code)===hl&&pn(t,"therapist.getById");try{const i=(await this.getAll()).find(r=>r.$id===a||r.id===a||r.$id===a.split("-")[0]||r.id===a.split("-")[0]);if(i)return i}catch{}return null}},async getByEmail(a){try{if(!N.collections.therapists)return[];const t=a.toLowerCase().trim(),n=await J.listDocuments(N.databaseId,N.collections.therapists,[b.equal("email",t)]);n.documents.length;const s=r=>{if(!r)return"Busy";const l=r.toLowerCase();return l==="available"?"Available":l==="busy"||l==="offline"?"Busy":r};return n.documents.map(r=>{let l=null,o=r.description||"";const c=o.match(/\[TIMER:(.+?)\]/);if(c)try{l=JSON.parse(c[1]),o=o.replace(/\[TIMER:.+?\]/,"").trim()}catch{}return{...r,status:s(r.status),availability:s(r.availability||r.status),description:o,busyUntil:(l==null?void 0:l.busyUntil)||null,busyDuration:(l==null?void 0:l.busyDuration)||null,appwriteId:r.$id||r.id}})}catch(t){return t&&typeof t=="object"&&t.code,[]}},async getByUserId(a){try{if(!N.collections.therapists)return[];const t=await J.listDocuments(N.databaseId,N.collections.therapists,[b.equal("userId",a)]),n=i=>{if(!i)return"Busy";const r=i.toLowerCase();return r==="available"?"Available":r==="busy"||r==="offline"?"Busy":i};return t.documents.map(i=>{let r=null,l=i.description||"";const o=l.match(/\[TIMER:(.+?)\]/);if(o)try{r=JSON.parse(o[1]),l=l.replace(/\[TIMER:.+?\]/,"").trim()}catch{}return{...i,status:n(i.status),availability:n(i.availability||i.status),description:l,busyUntil:(r==null?void 0:r.busyUntil)||null,busyDuration:(r==null?void 0:r.busyDuration)||null,appwriteId:i.$id||i.id}})}catch(t){return t&&typeof t=="object"&&t.code,[]}},async getCurrentUser(){try{return await Jn.get()}catch{return null}},async update(a,t){var n,s,i,r,l;try{if(!N.collections.therapists)return{...t,$id:a,$updatedAt:new Date().toISOString(),_mockUpdate:!0};const o=await J.getDocument(N.databaseId,N.collections.therapists,a),c={name:o.name,email:o.email,profilePicture:o.profilePicture||"",description:o.description||"",whatsappNumber:o.whatsappNumber||"",location:o.location||"",specialization:o.specialization||"",yearsOfExperience:o.yearsOfExperience||0,isLicensed:o.isLicensed||!1,hourlyRate:o.hourlyRate||100,isLive:o.isLive||!1,status:o.status||"Available",availability:o.availability||"Available",bookingsEnabled:o.bookingsEnabled!==void 0?o.bookingsEnabled:!0,price60:String(o.price60||100),price90:String(o.price90||150),price120:String(o.price120||200),...o.pricing&&{pricing:o.pricing},...o.massageTypes&&{massageTypes:o.massageTypes},...o.coordinates&&{coordinates:o.coordinates},discountPercentage:o.discountPercentage||0,discountDuration:o.discountDuration||0,discountEndTime:o.discountEndTime||null,isDiscountActive:o.isDiscountActive||!1,profileWentLiveAt:o.profileWentLiveAt||null};if(t.isLive===!0&&!o.profileWentLiveAt&&(c.profileWentLiveAt=new Date().toISOString()),t.profileWentLiveAt!==void 0&&(c.profileWentLiveAt=t.profileWentLiveAt),t.status){c.status=t.status.toLowerCase();const T=t.status.charAt(0).toUpperCase()+t.status.slice(1).toLowerCase();if(c.availability=T,t.status.toLowerCase()==="available")c.available=new Date().toISOString(),c.busy="";else if(t.status.toLowerCase()==="busy"){const x=t.bookedUntil||t.busyUntil||new Date(Date.now()+36e5).toISOString();c.busy=x,c.available=""}else t.status.toLowerCase()==="offline"&&(c.status="busy",c.availability="Busy",c.available="",c.busy=new Date().toISOString())}if(t.availability){const T=t.availability;typeof T=="string"&&(T.toLowerCase()==="available"?c.availability="Available":T.toLowerCase()==="busy"?c.availability="Busy":T.toLowerCase()==="offline"?(c.availability="Busy",c.status="busy"):c.availability=T)}t.name&&(c.name=t.name),t.email&&(c.email=t.email),t.profilePicture&&!t.profilePicture.startsWith("data:")&&(c.profilePicture=t.profilePicture),t.description&&(c.description=t.description),t.whatsappNumber&&(c.whatsappNumber=t.whatsappNumber),t.location&&(c.location=t.location),t.pricing&&(c.pricing=t.pricing),t.price60!==void 0&&(c.price60=String(t.price60)),t.price90!==void 0&&(c.price90=String(t.price90)),t.price120!==void 0&&(c.price120=String(t.price120)),t.massageTypes&&(c.massageTypes=t.massageTypes),t.languages&&(Array.isArray(t.languages)?c.languages=t.languages.join(", "):c.languages=t.languages),t.coordinates&&(c.coordinates=t.coordinates),t.isLive!==void 0&&(c.isLive=t.isLive);const d=c.profileWentLiveAt||o.profileWentLiveAt;if(d&&Date.now()-new Date(d).getTime()>2592e5&&(c.name=o.name,c.description=o.description||"",c.profilePicture=o.profilePicture||"",c.location=o.location||"",c.geopoint=o.geopoint||o.coordinates,c.city=o.city||o.location,c.locationId=o.locationId||o.location,c.coordinates=o.coordinates),t.hourlyRate&&(c.hourlyRate=t.hourlyRate),t.specialization&&(c.specialization=t.specialization),t.yearsOfExperience&&(c.yearsOfExperience=t.yearsOfExperience),t.isLicensed!==void 0&&(c.isLicensed=t.isLicensed),t.bookingsEnabled!==void 0&&(c.bookingsEnabled=t.bookingsEnabled),t.isVerified!==void 0&&(c.isVerified=t.isVerified),t.membershipTier!==void 0&&(c.membershipTier=t.membershipTier),t.premiumPaymentStatus!==void 0&&(c.premiumPaymentStatus=t.premiumPaymentStatus),t.premiumPaymentSubmittedAt!==void 0&&(c.premiumPaymentSubmittedAt=t.premiumPaymentSubmittedAt),t.customMenu!==void 0&&(c.customMenu=t.customMenu),t.bankName!==void 0&&(c.bankName=t.bankName),t.accountName!==void 0&&(c.accountName=t.accountName),t.accountNumber!==void 0&&(c.accountNumber=t.accountNumber),t.ktpPhotoFileId!==void 0&&(c.ktpPhotoFileId=t.ktpPhotoFileId),t.ktpSubmitted!==void 0&&(c.ktpSubmitted=t.ktpSubmitted),t.ktpVerified!==void 0&&(c.ktpVerified=t.ktpVerified),t.ktpRejected!==void 0&&(c.ktpRejected=t.ktpRejected),t.discountPercentage!==void 0){const T=Number(t.discountPercentage);c.discountPercentage=isNaN(T)?0:Math.min(Math.max(T,0),100)}if(t.discountDuration!==void 0){const T=Number(t.discountDuration);c.discountDuration=isNaN(T)?0:Math.min(Math.max(T,0),168)}if(t.discountEndTime!==void 0&&(c.discountEndTime=t.discountEndTime),t.isDiscountActive!==void 0&&(c.isDiscountActive=t.isDiscountActive),t.bookedUntil!==void 0||t.busyDuration!==void 0||t.busyUntil!==void 0)try{let T=o.description||"",x=null;const A=T.match(/\[TIMER:(.+?)\]/);if(A)try{x=JSON.parse(A[1]),T=T.replace(/\[TIMER:.+?\]/,"").trim()}catch{}(t.busyUntil!==void 0||t.busyDuration!==void 0||t.bookedUntil!==void 0)&&(x={busyUntil:(i=(s=(n=t.busyUntil)!=null?n:t.bookedUntil)!=null?s:x==null?void 0:x.busyUntil)!=null?i:null,busyDuration:(l=(r=t.busyDuration)!=null?r:x==null?void 0:x.busyDuration)!=null?l:null},x.busyUntil?c.description=T+(T?" ":"")+"[TIMER:".concat(JSON.stringify(x),"]"):c.description=T)}catch{}if(t.geopoint&&(c.geopoint=t.geopoint,c.lastLocationUpdateAt=t.lastLocationUpdateAt||new Date().toISOString(),!t.city&&!t.locationId))try{const{deriveLocationIdFromGeopoint:T}=require("../../utils/geoDistance"),x=T(t.geopoint);c.city=x,c.locationId=x,(!t.location||t.location==="custom")&&(c.location=x)}catch{}t.city&&(c.city=t.city),t.locationId&&(c.locationId=t.locationId),t.coordinates&&(c.coordinates=typeof t.coordinates=="string"?t.coordinates:JSON.stringify(t.coordinates));const{$id:m,$createdAt:p,$updatedAt:f,$permissions:y,$databaseId:I,$collectionId:P,...D}=c;c.status&&c.isOnline===void 0&&(c.isOnline=c.status==="available"),t.status||(t.available?(c.available=t.available,c.busy="",c.status="available",c.availability="Available",c.isOnline=!0):t.busy&&(c.busy=t.busy,c.available="",c.status="busy",c.availability="Busy",c.isOnline=!0));const j=await J.updateDocument(N.databaseId,N.collections.therapists,a,D);if(t.bankName||t.accountNumber||t.whatsappNumber||t.ktpNumber)try{const T={$id:j.$id,$createdAt:j.$createdAt,name:j.name,accountType:"therapist",bankName:t.bankName||j.bankName,accountNumber:t.accountNumber||j.accountNumber,whatsappNumber:t.whatsappNumber||j.whatsappNumber,ktpNumber:t.ktpNumber||j.ktpNumber,isActive:j.isActive};await gl.handleDuplicateDetection(T,"therapist")}catch{}return j}catch(o){if(o&&typeof o=="object"){const c=o;c.code===404||c.code===401||c.code}return{...t,$id:a,$updatedAt:new Date().toISOString(),_fallback:!0,_error:o instanceof Error?o.message:"Unknown error"}}},async delete(a){try{await J.deleteDocument(N.databaseId,N.collections.therapists,a)}catch(t){throw t}},async search(a){try{return(await J.listDocuments(N.databaseId,N.collections.therapists,[b.search("name",a)])).documents}catch{return[]}},async uploadKtpId(a,t){try{try{await Jn.get()}catch{throw new Error("Authentication required. Please log in again.")}const n=15*1024*1024;if(t.size>n)throw new Error("File size too large. Maximum 15MB allowed.");if(!["image/jpeg","image/jpg","image/png"].includes(t.type))throw new Error("Invalid file type. Only JPG and PNG are allowed.");const i="697b3ca50023d08ec335",r="ktp-".concat(a,"-").concat(Date.now()),l=await Dt.createFile(i,r,t),o=Dt.getFileView(i,l.$id);return{url:String(o),fileId:l.$id}}catch(n){const s=n;throw s.message.includes("401")?new Error("Authentication failed. Please log in again."):s.message.includes("403")?new Error("Upload permission denied. Please contact support."):s.message.includes("404")?new Error("Storage configuration error. Please contact support."):s.message.includes("413")?new Error("File too large. Maximum 15MB allowed."):new Error("Upload failed: "+s.message)}},async uploadHotelVillaLetter(a,t,n){try{const s="therapist-images",i="hotel-villa-letter-".concat(a,"-").concat(Date.now()),r=await Dt.createFile(s,i,t),l=Dt.getFileView(s,r.$id);return{url:String(l),fileId:r.$id}}catch(s){throw s}},async updateTherapist(a,t){try{return await J.updateDocument(N.databaseId,N.collections.therapists,a,t)}catch(n){throw n}}},Iu={async getAllPlaces(a){var t;try{if(!N.collections.places)return[];let n=!1;try{await Jn.get(),n=!0}catch{n=!1}const s=[b.limit(500)];a&&s.push(b.search("location",a));const i=await J.listDocuments(N.databaseId,N.collections.places,s);for(const r of i.documents)if(n&&N.collections.leads)try{const l=await J.listDocuments(N.databaseId,N.collections.leads,[b.equal("placeId",r.$id)]);r.analytics=JSON.stringify({bookings:l.total})}catch{const o=32+Math.floor(Math.random()*19);r.analytics=JSON.stringify({bookings:o})}else{const l=32+Math.floor(Math.random()*19);r.analytics=JSON.stringify({bookings:l})}return i.documents}catch(n){return(n==null?void 0:n.code)===404&&((t=n==null?void 0:n.message)!=null&&t.includes("Collection"))?[]:[]}},async getPlaces(a){return this.getAllPlaces(a)},async getAll(a){return this.getAllPlaces(a)},async create(a){try{const t=a.collectionName==="facial_places",n=t?N.collections.facial_places||"facial_places":N.collections.places||"places",s=t?a.facialPlaceId||se.unique():a.id||a.placeId||se.unique(),i=String(s||se.unique()),r={...a};return delete r.collectionName,await J.createDocument(N.databaseId,n,i,r)}catch(t){throw t}},async getByProviderId(a){if(!a)return null;try{const t=l=>{let o=[];const c=l.galleryImages||l.galleryimages;if(c)try{o=typeof c=="string"?JSON.parse(c):c}catch{o=[]}return{...l,mainImage:l.mainimage||l.mainImage,galleryImages:o,openingTime:l.openingtime||l.openingTime,closingTime:l.closingtime||l.closingTime,discountPercentage:l.discountpercentage||l.discountPercentage,discountDuration:l.discountduration||l.discountDuration,isDiscountActive:l.isdiscountactive||l.isDiscountActive,discountEndTime:l.discountendtime||l.discountEndTime,websiteUrl:l.websiteurl||l.websiteUrl,websiteTitle:l.websitetitle||l.websiteTitle,websiteDescription:l.websitedescription||l.websiteDescription,instagramUrl:l.instagramurl||l.instagramUrl||void 0,facebookPageUrl:l.facebookpageurl||l.facebookPageUrl||void 0,instagramPosts:(()=>{const d=l.instagramposts||l.instagramPosts;if(d)try{return typeof d=="string"?JSON.parse(d):d}catch{return}})(),massageTypes:l.massagetypes||l.massageTypes,languages:l.languagesspoken||l.languages,additionalServices:l.additionalservices||l.additionalServices,contactNumber:l.whatsappnumber||l.contactNumber,hotelVillaPricing:l.hotelvillapricing||l.hotelVillaPricing}};try{const l=await J.getDocument(N.databaseId,N.collections.places,a);if(l&&l.$id)return t(l)}catch(l){l==null||l.code}const n=async l=>{try{const o=await J.listDocuments(N.databaseId,N.collections.places,[b.equal(l,a)]);if(o.documents.length>0)return t(o.documents[0])}catch{}return null},s=await n("id");if(s)return s;const i=await n("placeId");if(i)return i;const r=Number(a);if(!isNaN(r))try{const l=await J.listDocuments(N.databaseId,N.collections.places,[b.equal("id",r)]);if(l.documents.length>0)return t(l.documents[0])}catch{}return null}catch{return null}},async getById(a){try{const t=await J.getDocument(N.databaseId,N.collections.places,a);let n=t.galleryImages;if(t.galleryimages)try{n=typeof t.galleryimages=="string"?JSON.parse(t.galleryimages):t.galleryimages}catch{n=[]}return{...t,mainImage:t.mainimage||t.mainImage,profilePicture:t.profilePicture||t.profilePicture,yearsEstablished:t.yearsEstablished||t.yearsEstablished||1,galleryImages:n,openingTime:t.openingtime||t.openingTime,closingTime:t.closingtime||t.closingTime,discountPercentage:t.discountpercentage||t.discountPercentage,discountDuration:t.discountduration||t.discountDuration,isDiscountActive:t.isdiscountactive||t.isDiscountActive,discountEndTime:t.discountendtime||t.discountEndTime,websiteUrl:t.websiteurl||t.websiteUrl,websiteTitle:t.websitetitle||t.websiteTitle,websiteDescription:t.websitedescription||t.websiteDescription,instagramUrl:t.instagramurl||t.instagramUrl||void 0,facebookPageUrl:t.facebookpageurl||t.facebookPageUrl||void 0,instagramPosts:(()=>{const s=t.instagramposts||t.instagramPosts;if(s)try{return typeof s=="string"?JSON.parse(s):s}catch{return}})(),massageTypes:(()=>{const s=t.massagetypes||t.massageTypes;if(!s)return[];try{return typeof s=="string"?JSON.parse(s):s}catch{return[]}})(),languages:(()=>{const s=t.languagesspoken||t.languages;if(!s)return[];try{return typeof s=="string"?JSON.parse(s):s}catch{return[]}})(),additionalServices:(()=>{const s=t.additionalservices||t.additionalServices;if(!s)return[];try{return typeof s=="string"?JSON.parse(s):s}catch{return[]}})(),contactNumber:t.whatsappnumber||t.contactNumber,hotelVillaPricing:t.hotelvillapricing||t.hotelVillaPricing}}catch(t){throw t}},async update(a,t){try{const n={...t};if(t.geopoint&&!t.city&&!t.locationId)try{const{deriveLocationIdFromGeopoint:l}=require("../../utils/geoDistance"),o=l(t.geopoint);n.city=o,n.locationId=o,t.location||(n.location=o)}catch{}t.coordinates&&(n.coordinates=typeof t.coordinates=="string"?t.coordinates:JSON.stringify(t.coordinates));const s=await J.updateDocument(N.databaseId,N.collections.places,a,n);if(t.bankName||t.accountNumber||t.whatsappNumber||t.ktpNumber)try{const l={$id:s.$id,$createdAt:s.$createdAt,name:s.name,accountType:"place",bankName:t.bankName||s.bankName,accountNumber:t.accountNumber||s.accountNumber,whatsappNumber:t.whatsappNumber||s.whatsappNumber,ktpNumber:t.ktpNumber||s.ktpNumber,isActive:s.isActive};await gl.handleDuplicateDetection(l,"place")}catch{}let r=s.galleryImages;if(s.galleryimages)try{r=typeof s.galleryimages=="string"?JSON.parse(s.galleryimages):s.galleryimages}catch{r=[]}return{...s,mainImage:s.mainimage||s.mainImage,galleryImages:r,openingTime:s.openingtime||s.openingTime,closingTime:s.closingtime||s.closingTime,discountPercentage:s.discountpercentage||s.discountPercentage,discountDuration:s.discountduration||s.discountDuration,isDiscountActive:s.isdiscountactive||s.isDiscountActive,discountEndTime:s.discountendtime||s.discountEndTime,websiteUrl:s.websiteurl||s.websiteUrl,websiteTitle:s.websitetitle||s.websiteTitle,websiteDescription:s.websitedescription||s.websiteDescription,instagramUrl:s.instagramurl||s.instagramUrl||void 0,facebookPageUrl:s.facebookpageurl||s.facebookPageUrl||void 0,instagramPosts:(()=>{const l=s.instagramposts||s.instagramPosts;if(l)try{return typeof l=="string"?JSON.parse(l):l}catch{return}})(),massageTypes:(()=>{const l=s.massagetypes||s.massageTypes;if(!l)return[];try{return typeof l=="string"?JSON.parse(l):l}catch{return[]}})(),languages:(()=>{const l=s.languagesspoken||s.languages;if(!l)return[];try{return typeof l=="string"?JSON.parse(l):l}catch{return[]}})(),additionalServices:(()=>{const l=s.additionalservices||s.additionalServices;if(!l)return[];try{return typeof l=="string"?JSON.parse(l):l}catch{return[]}})(),contactNumber:s.whatsappnumber||s.contactNumber,hotelVillaPricing:s.hotelvillapricing||s.hotelVillaPricing}}catch(n){throw n}},async delete(a){try{await J.deleteDocument(N.databaseId,N.collections.places,a)}catch(t){throw t}},async getByEmail(a){try{return(await J.listDocuments(N.databaseId,N.collections.places,[b.equal("email",a)])).documents}catch{return[]}},async getCurrentUser(){try{return await Jn.get()}catch{return null}}};async function Tu(a){try{let t;try{t=await K.listDocuments(h.databaseId,h.collections.therapistMenus||"therapist_menus",[b.equal("therapistId",a),b.limit(1)])}catch{return{allowed:!1,reason:"Database error - booking blocked for safety",severity:"critical"}}if(!t||t.documents.length===0)return{allowed:!1,reason:"Therapist account not found",severity:"error"};const n=t.documents[0];if(n.status!=="active")return{allowed:!1,reason:"Therapist account is ".concat(n.status,". ").concat(n.deactivationReason||"Please contact support."),severity:"error"};if(n.bookingEnabled===!1)return{allowed:!1,reason:"Therapist is currently unavailable for bookings",severity:"warning"};if(n.scheduleEnabled===!1)return{allowed:!1,reason:"Therapist schedule is currently disabled",severity:"warning"};if(n.planType==="pro"){let s;try{s=await K.listDocuments(h.databaseId,h.collections.commissionRecords||"commission_records",[b.equal("therapistId",a),b.equal("status",["pending","expired"]),b.limit(1)])}catch{return{allowed:!1,reason:"Payment verification failed - booking blocked for safety",severity:"critical"}}if(s&&s.documents.length>0)return{allowed:!1,reason:"Therapist has unpaid commissions. Please complete payment to continue receiving bookings.",severity:"critical"}}if(n.planType==="premium"){const s=new Date;if(n.planExpiresAt){const i=new Date(n.planExpiresAt);if(n.graceUntil){const r=new Date(n.graceUntil);if(s>r)return{allowed:!1,reason:"Premium plan expired. Please renew to continue receiving bookings.",severity:"critical"}}else if(s>i)return{allowed:!1,reason:"Premium plan expired. Please renew to continue receiving bookings.",severity:"critical"}}}return{allowed:!0}}catch{return{allowed:!1,reason:"Authorization check failed - booking blocked for safety",severity:"critical"}}}async function Au(a){try{let t;try{t=await K.listDocuments(h.databaseId,h.collections.bookings||"BOOKINGS_COLLECTION_ID",[b.equal("userId",a),b.equal("status",["Pending","Accepted","Confirmed"]),b.limit(1)])}catch{return{allowed:!1,reason:"Booking limit check failed - blocked for safety",severity:"critical"}}return t&&t.documents.length>0?{allowed:!1,reason:"You already have an active booking. Please complete or cancel it before creating a new one.",severity:"warning"}:{allowed:!0}}catch{return{allowed:!1,reason:"Booking limit check failed - blocked for safety",severity:"critical"}}}async function Cu(a,t,n){try{if(n!=="therapist")return{allowed:!0};const s=await Tu(t);if(!s.allowed)return s;if(a){const i=await Au(a);if(!i.allowed)return i}return{allowed:!0}}catch{return{allowed:!1,reason:"Authorization check failed - booking blocked for safety",severity:"critical"}}}async function Pu(a,t,n,s,i="error"){try{const{ID:r}=await Ce(async()=>{const{ID:l}=await Promise.resolve().then(()=>wn);return{ID:l}},void 0);await K.createDocument(h.databaseId,h.auditLogs||"audit_logs",r.unique(),{type:a,userId:t,reason:n,metadata:JSON.stringify(s),timestamp:new Date().toISOString(),severity:i})}catch{}}let Qn,ti;try{({notificationService:Qn}=require("../config"))}catch{Qn={create:()=>{}}}try{({paymentService:ti}=require("../config"))}catch{ti={createPayment:()=>{}}}const ji={validateBookingTime(a){try{const t=new Date(a),n=new Date,s=new Date(n.getTime()+3600*1e3);return t<s?{valid:!1,message:"Bookings require minimum 1 hour advance notice for preparation and travel time"}:{valid:!0}}catch{return{valid:!1,message:"Invalid booking time format"}}},async create(a){try{const t=await Cu(a.userId,a.providerId,a.providerType);if(!t.allowed)throw a.userId&&await Pu("BOOKING_BLOCKED",a.userId,t.reason||"Authorization failed",{providerId:a.providerId,providerType:a.providerType,service:a.service},t.severity||"error"),new Error(t.reason||"Booking not allowed");if(a.startTime&&a.bookingDate){const i="".concat(a.bookingDate,"T").concat(a.startTime),r=this.validateBookingTime(i);if(!r.valid)throw new Error(r.message)}if(!N.collections.bookings||N.collections.bookings==="")return{$id:"mock_booking_".concat(Date.now()),bookingId:"mock_booking_".concat(Date.now()),bookingDate:a.bookingDate||new Date().toISOString(),providerId:a.providerId,providerType:a.providerType,providerName:a.providerName,service:a.service,startTime:a.startTime,userId:a.userId||null,userName:a.userName||null,hotelId:a.hotelId||null,hotelGuestName:a.hotelGuestName||null,hotelRoomNumber:a.hotelRoomNumber||null,status:"Pending",duration:a.duration||parseInt(a.service),totalCost:a.totalCost||0,paymentMethod:a.paymentMethod||"Unpaid",price:Math.round((a.totalCost||0)/1e3),createdAt:new Date().toISOString(),oneHourNotice:!0};const n=se.unique(),s=await J.createDocument(N.databaseId,N.collections.bookings,n,{bookingId:n,bookingDate:a.bookingDate||new Date().toISOString(),providerId:a.providerId,providerType:a.providerType,providerName:a.providerName,service:a.service,startTime:a.startTime,userId:a.userId||null,userName:a.userName||null,hotelId:a.hotelId||null,hotelGuestName:a.hotelGuestName||null,hotelRoomNumber:a.hotelRoomNumber||null,status:"Pending",duration:a.duration||parseInt(a.service),totalCost:a.totalCost||0,paymentMethod:a.paymentMethod||"Unpaid",price:Math.round((a.totalCost||0)/1e3),createdAt:new Date().toISOString(),responseDeadline:new Date(Date.now()+600*1e3).toISOString(),oneHourNotice:!0,source:"platform"});if(await Qn.create({providerId:parseInt(a.providerId),message:"New booking request from ".concat(a.userName||a.hotelGuestName||"Guest"," for ").concat(a.service," minutes. Customer has been notified of 1-hour minimum preparation time."),type:"booking_request",bookingId:s.$id}),a.providerType==="therapist"&&a.totalCost){try{await ti.createPayment({bookingId:s.$id,therapistId:a.providerId,customerName:a.userName||a.hotelGuestName||"Guest",amount:a.totalCost,serviceDuration:a.service,paymentMethod:a.paymentMethod})}catch{}try{const{commissionTrackingService:i}=await Ce(async()=>{const{commissionTrackingService:r}=await Promise.resolve().then(()=>eu);return{commissionTrackingService:r}},void 0);await i.createCommissionRecord(a.providerId,a.providerName,s.$id,s.createdAt||new Date().toISOString(),a.startTime,a.totalCost)}catch{}}return s}catch(t){throw t}},async getById(a){try{return await J.getDocument(N.databaseId,N.collections.bookings,a)}catch(t){throw t}},async getAll(){try{return!N.collections.bookings||N.collections.bookings===""?[]:(await J.listDocuments(N.databaseId,N.collections.bookings,[b.orderDesc("$createdAt"),b.limit(1e3)])).documents}catch{return[]}},async getByUser(a){try{return(await J.listDocuments(N.databaseId,N.collections.bookings,[b.equal("userId",a),b.orderDesc("$createdAt"),b.limit(100)])).documents}catch{return[]}},async getByProvider(a,t){var n,s;try{return!N.collections.bookings||N.collections.bookings===""?[]:(await J.listDocuments(N.databaseId,N.collections.bookings,[b.equal("providerId",a),b.equal("providerType",t),b.orderDesc("$createdAt"),b.limit(100)])).documents}catch(i){return(i==null?void 0:i.code)===404||(i==null?void 0:i.code)===400||(n=i==null?void 0:i.message)!=null&&n.includes("Collection")||(s=i==null?void 0:i.message)!=null&&s.includes("could not be found")?[]:[]}},async updateStatus(a,t){try{const n=new Date().toISOString(),s={status:t};t==="Confirmed"?(s.confirmedAt=n,s.providerResponseStatus="Confirmed"):t==="Completed"?s.completedAt=n:t==="Cancelled"&&(s.cancelledAt=n,s.providerResponseStatus="Declined");const i=await J.updateDocument(N.databaseId,N.collections.bookings,a,s);if(t==="Completed"&&i.providerType==="therapist")try{await Nn.createCommissionRecord(i.providerId,i.providerName,a,n,void 0,i.totalCost||0)}catch{}if(t==="Confirmed"||t==="Completed")try{const r=i.providerType,l=i.providerId,o=i.totalCost||0;try{const c=r==="therapist"?N.collections.therapists:N.collections.places;if(c){const d=await J.getDocument(N.databaseId,c,l.toString());let m={};try{d.analytics&&(m=JSON.parse(d.analytics))}catch{m={}}const p=typeof m.bookings=="number"?m.bookings:0;m.bookings=p+1;const f=JSON.stringify(m);await J.updateDocument(N.databaseId,c,l.toString(),{analytics:f})}}catch{}}catch{}return i}catch(n){throw n}},async confirm(a){return this.updateStatus(a,"Confirmed")},async complete(a){return this.updateStatus(a,"Completed")},async decline(a,t){try{const n=new Date().toISOString();return await J.updateDocument(N.databaseId,N.collections.bookings,a,{status:"Cancelled",cancelledAt:n,providerResponseStatus:"Declined",cancellationReason:t||null})}catch(n){throw n}},async updatePayment(a,t,n){try{return await J.updateDocument(N.databaseId,N.collections.bookings,a,{paymentMethod:t,totalCost:n})}catch(s){throw s}},async getPending(a){try{return(await J.listDocuments(N.databaseId,N.collections.bookings,[b.equal("providerId",a),b.equal("status","Pending")])).documents}catch{return[]}},async getByHotel(a){try{return(await J.listDocuments(N.databaseId,N.collections.bookings,[b.equal("hotelId",a),b.orderDesc("$createdAt"),b.limit(100)])).documents}catch{return[]}},async delete(a){try{await J.deleteDocument(N.databaseId,N.collections.bookings,a)}catch(t){throw t}},async cancel(a,t){try{const n=new Date().toISOString();try{await J.updateDocument(N.databaseId,N.collections.bookings,a,{status:"Cancelled",cancelledAt:n,cancellationReason:t||null})}catch{await J.updateDocument(N.databaseId,N.collections.bookings,a,{status:"Cancelled",cancelledAt:n})}try{await Qn.create({type:"booking_cancelled",message:"Booking ".concat(a," was cancelled").concat(t?": ".concat(t):"","."),bookingId:a})}catch{}}catch(n){throw n}},async getBookingsCount(a,t="therapist"){var n,s;try{if(!N.collections.bookings||N.collections.bookings==="")return 0;const i=t==="therapist"?"therapistId":"placeId";return(await J.listDocuments(N.databaseId,N.collections.bookings,[b.equal(i,a),b.limit(1)])).total||0}catch(i){return(i==null?void 0:i.code)===404||(n=i==null?void 0:i.message)!=null&&n.includes("Collection")||(s=i==null?void 0:i.message)!=null&&s.includes("could not be found"),0}}},Mf=Object.freeze(Object.defineProperty({__proto__:null,bookingService:ji},Symbol.toStringTag,{value:"Module"}));let ai;try{({leadGenerationService:ai}=require("../config"))}catch{ai={markLeadsPaid:()=>{}}}const At={COUNTRY:"ID",CURRENCY:"IDR",PRICING:{TRIAL:0,MONTH_2:1e5,MONTH_3:135e3,MONTH_4:175e3,MONTH_5:2e5,MONTH_6_PLUS:2e5,PREMIUM_UPGRADE:275e3,LEAD_COST_PERCENTAGE:.25,LATE_FEE:25e3,REACTIVATION_FEE:275e3},GRACE_PERIOD_DAYS:5,LATE_FEE_AFTER_DAY:5,SUSPENSION_AFTER_DAY:10,getPricingForMonth:a=>a===1?At.PRICING.TRIAL:a===2?At.PRICING.MONTH_2:a===3?At.PRICING.MONTH_3:a===4?At.PRICING.MONTH_4:At.PRICING.MONTH_6_PLUS,isVerified:a=>a.isVerified&&a.subscriptionStatus!=="suspended"&&a.subscriptionStatus!=="deactivated"&&(a.outstandingDues||0)===0,calculateOutstandingDues:async(a,t)=>{try{const n=t==="therapist"?N.collections.therapists:t==="massage_place"?N.collections.places:N.collections.facial_places,s=await J.getDocument(N.databaseId,n,a);let i=0;return s.subscriptionStatus==="active"&&s.outstandingDues&&(i+=s.outstandingDues),(await J.listDocuments(N.databaseId,N.collections.leadGenerations,[b.equal("memberId",a),b.equal("status","accepted"),b.equal("paymentStatus","unpaid")])).documents.forEach(l=>{i+=l.leadCost}),i}catch(n){throw n}},acceptAgreement:async(a,t,n)=>{try{const s=await J.createDocument(N.databaseId,N.collections.membershipAgreements,se.unique(),{memberId:a,memberType:t,agreementVersion:"1.0",acceptedDate:new Date().toISOString(),ipAddress:n.ipAddress,userAgent:n.userAgent,termsAcknowledged:["five_month_commitment","payment_schedule","deactivation_policy","upgrade_pricing","verified_badge_policy"],pricingTierAcknowledged:{month1:0,month2:1e5,month3:135e3,month4:175e3,month5Plus:2e5,premiumUpgrade:275e3},isActive:!0}),i=t==="therapist"?N.collections.therapists:t==="massage_place"?N.collections.places:N.collections.facial_places;return await J.updateDocument(N.databaseId,i,a,{agreementAccepted:!0,agreementAcceptedDate:new Date().toISOString(),agreementVersion:"1.0",subscriptionStatus:"trial",membershipMonth:1,commitmentEndDate:new Date(Date.now()+3600*60*60*1e3).toISOString()}),s}catch(s){throw s}},requestPremiumUpgrade:async(a,t)=>{try{const n=t==="therapist"?N.collections.therapists:t==="massage_place"?N.collections.places:N.collections.facial_places;if((await J.getDocument(N.databaseId,n,a)).paymentModel!=="lead_based")throw new Error("Only lead-based members can upgrade to premium");const i=await At.calculateOutstandingDues(a,t),r=At.PRICING.PREMIUM_UPGRADE+i;return{upgrade:await J.createDocument(N.databaseId,N.collections.membershipUpgrades,se.unique(),{memberId:a,memberType:t,upgradeDate:new Date().toISOString(),previousModel:"lead_based",newModel:"premium",upgradeFee:At.PRICING.PREMIUM_UPGRADE,outstandingDuesCleared:i,totalPaidAtUpgrade:r,paymentStatus:"pending",verifiedBadgeGranted:!1}),totalCost:r,outstandingDues:i,upgradeFee:At.PRICING.PREMIUM_UPGRADE}}catch(n){throw n}},completePremiumUpgrade:async a=>{try{const t=await J.getDocument(N.databaseId,N.collections.membershipUpgrades,a);await J.updateDocument(N.databaseId,N.collections.membershipUpgrades,a,{paymentStatus:"paid",paymentDate:new Date().toISOString(),verifiedBadgeGranted:!0,verifiedBadgeDate:new Date().toISOString()});const n=t.memberType==="therapist"?N.collections.therapists:t.memberType==="massage_place"?N.collections.places:N.collections.facial_places;return await J.updateDocument(N.databaseId,n,t.memberId,{subscriptionStatus:"premium",paymentModel:"premium",previousPaymentModel:"lead_based",upgradedToPremium:!0,premiumUpgradeDate:new Date().toISOString(),isVerified:!0,verifiedSince:new Date().toISOString(),outstandingDues:0}),await ai.markLeadsPaid(t.memberId,new Date().toISOString().substring(0,7),t.amount||0),t}catch(t){throw t}},requestDeactivation:async(a,t,n)=>{try{const s=await At.calculateOutstandingDues(a,t);if(s>0)throw new Error("Cannot deactivate account with outstanding dues: Rp ".concat(s.toLocaleString()));const i=await J.createDocument(N.databaseId,N.collections.deactivationRequests,se.unique(),{memberId:a,memberType:t,requestDate:new Date().toISOString(),reason:n,status:"pending",outstandingDuesAtRequest:s,noticeProvidedDate:new Date().toISOString(),effectiveDate:new Date(Date.now()+720*60*60*1e3).toISOString(),canReactivateAfter:new Date(Date.now()+2880*60*60*1e3).toISOString(),reactivationFeeRequired:At.PRICING.REACTIVATION_FEE,reactivationRequiresApproval:!0}),r=t==="therapist"?N.collections.therapists:t==="massage_place"?N.collections.places:N.collections.facial_places;return await J.updateDocument(N.databaseId,r,a,{deactivationRequested:!0,deactivationRequestDate:new Date().toISOString()}),i}catch(s){throw s}},approveDeactivation:async(a,t,n)=>{try{const s=await J.getDocument(N.databaseId,N.collections.deactivationRequests,a);await J.updateDocument(N.databaseId,N.collections.deactivationRequests,a,{status:"approved",reviewedBy:t,reviewedDate:new Date().toISOString(),reviewNotes:n,clearanceCertificateIssued:!0});const i=s.memberType==="therapist"?N.collections.therapists:s.memberType==="massage_place"?N.collections.places:N.collections.facial_places;return await J.updateDocument(N.databaseId,i,s.memberId,{subscriptionStatus:"deactivated",deactivationEffectiveDate:s.effectiveDate,isVerified:!1,verifiedSince:null}),s}catch(s){throw s}},getMembershipStats:async()=>{try{const a={totalMembers:0,trialMembers:0,activeMembers:0,premiumMembers:0,leadBasedMembers:0,suspendedMembers:0,deactivatedMembers:0,verifiedMembers:0,totalRevenue:0,pendingUpgrades:0,pendingDeactivations:0},t=[N.collections.therapists,N.collections.places,N.collections.facial_places];for(const i of t)(await J.listDocuments(N.databaseId,i)).documents.forEach(l=>{a.totalMembers++,l.subscriptionStatus==="trial"&&a.trialMembers++,l.subscriptionStatus==="active"&&a.activeMembers++,l.subscriptionStatus==="premium"&&a.premiumMembers++,l.subscriptionStatus==="lead_based"&&a.leadBasedMembers++,l.subscriptionStatus==="suspended"&&a.suspendedMembers++,l.subscriptionStatus==="deactivated"&&a.deactivatedMembers++,l.isVerified&&a.verifiedMembers++,a.totalRevenue+=l.totalPaidToDate||0});const n=await J.listDocuments(N.databaseId,N.collections.membershipUpgrades,[b.equal("paymentStatus","pending")]);a.pendingUpgrades=n.total;const s=await J.listDocuments(N.databaseId,N.collections.deactivationRequests,[b.equal("status","pending")]);return a.pendingDeactivations=s.total,a}catch(a){throw a}}},us={async create(a){try{const t=new Date().toISOString();return await J.createDocument(N.databaseId,N.collections.reviews,se.unique(),{reviewId:se.unique(),providerId:a.providerId,providerType:a.providerType,rating:a.rating,reviewContent:a.reviewContent,reviewerId:a.reviewerId,reviewDate:t,createdAt:t,userName:a.userName||"Anonymous",userId:a.userId||null,status:a.status||"approved",likes:0,comment:null})}catch(t){throw t}},async createAnonymous(a){try{const t=new Date().toISOString(),n="anonymous_".concat(Date.now()),s=await J.createDocument(N.databaseId,N.collections.reviews,se.unique(),{reviewId:se.unique(),providerId:a.providerId,providerType:a.providerType,rating:a.rating,reviewContent:a.reviewContent,reviewerId:n,reviewDate:t,createdAt:t,userName:a.reviewerName,userId:null,status:"approved",likes:0,comment:null});return await this.updateProviderRating(a.providerId,a.providerType),s}catch(t){throw t}},async updateProviderRating(a,t){try{const n=await this.getByProvider(Number(a),t);if(n.length===0)return;const i=n.reduce((o,c)=>o+(c.rating||0),0)/n.length,r=Math.round(i*10)/10,l=t==="therapist"?N.collections.therapists:N.collections.places;await J.updateDocument(N.databaseId,l,String(a),{rating:r,reviewCount:n.length})}catch{}},async getAll(){try{const a=N.collections.reviews;return a?(await J.listDocuments(N.databaseId,a)).documents:[]}catch{return[]}},async getLatest(a=50){try{const t=N.collections.reviews;return t?(await J.listDocuments(N.databaseId,t,[b.equal("status","approved"),b.orderDesc("reviewDate"),b.limit(Math.min(a,100))])).documents||[]:[]}catch{return[]}},async getByProvider(a,t){try{const n=N.collections.reviews;return n?a?(await J.listDocuments(N.databaseId,n,[b.equal("providerId",String(a)),b.equal("providerType",t),b.equal("status","approved"),b.orderDesc("reviewDate")])).documents:[]:[]}catch{return[]}},async updateStatus(a,t){try{return await J.updateDocument(N.databaseId,N.collections.reviews,a,{status:t})}catch(n){throw n}},async delete(a){try{await J.deleteDocument(N.databaseId,N.collections.reviews,a)}catch(t){throw t}}},mn={async create(a){try{return await J.createDocument(N.databaseId,N.collections.users,"unique()",a)}catch(t){throw t}},async getCustomerByEmail(a){var t;try{const n=await J.listDocuments(N.databaseId,N.collections.users,[b.equal("email",a),b.limit(1)]);return n.documents.length>0?n.documents[0]:null}catch(n){if(n.code===404||(t=n.message)!=null&&t.includes("could not be found"))return null;throw n}},async updateCustomerById(a,t){try{return await J.updateDocument(N.databaseId,N.collections.users,a,t)}catch(n){throw n}},async updateCustomerByEmail(a,t){try{const n=await mn.getCustomerByEmail(a);return n?await mn.updateCustomerById(n.$id,t):await mn.create({email:a,...t})}catch(n){throw n}},async getByUserId(a){try{const t=await J.listDocuments(N.databaseId,N.collections.users,[b.equal("userId",a)]);return t.documents.length>0?t.documents[0]:null}catch(t){throw t}},async getByEmail(a){try{try{const t=await J.listDocuments(N.databaseId,N.collections.therapists,[b.equal("email",a)]);if(t.documents.length>0)return t.documents[0]}catch{}try{const t=await J.listDocuments(N.databaseId,N.collections.places,[b.equal("email",a)]);if(t.documents.length>0)return t.documents[0]}catch{}try{const t=await mn.getCustomerByEmail(a);if(t)return t}catch{}return null}catch(t){throw t}},async update(a,t){try{return await J.updateDocument(N.databaseId,N.collections.therapists,a,t)}catch(n){throw n}}},Du={async createPayment(a){try{const n=Math.round(a.amount*.3),s=a.amount-n,i=se.unique(),r=new Date().toISOString();return await J.createDocument(N.databaseId,N.collections.payments,i,{paymentId:i,bookingId:a.bookingId,transactionDate:r,paymentAmount:a.amount,paymentMethod:a.paymentMethod||"Cash",currency:"IDR",status:"pending",therapistId:a.therapistId,customerName:a.customerName,amount:Math.round(a.amount/1e3),adminCommission:Math.round(n/1e3),netEarning:Math.round(s/1e3),serviceDuration:a.serviceDuration,date:r})}catch(t){throw t}},async getPaymentsByTherapist(a){try{return(await J.listDocuments(N.databaseId,N.collections.payments,[b.equal("therapistId",a),b.orderDesc("date"),b.limit(100)])).documents}catch{return[]}},async markAsPaid(a,t,n){try{return await J.updateDocument(N.databaseId,"payment_records",a,{paymentStatus:"paid",paidDate:new Date().toISOString(),transactionId:t,paymentMethod:n})}catch(s){throw s}},async getPaymentHistory(a){try{return(await J.listDocuments(N.databaseId,"payment_records",[b.equal("memberId",a),b.orderDesc("monthNumber"),b.limit(100)])).documents}catch{return[]}},async getPendingPayments(){try{return(await J.listDocuments(N.databaseId,"payment_records",[b.equal("paymentStatus","pending"),b.limit(1e3)])).documents}catch{return[]}}},Eu={async getHotels(){try{return(await ie.listDocuments(N.databaseId,N.collections.hotels,[b.limit(100)])).documents}catch(a){if(a instanceof Error){if(a.message.includes("missing scopes")||a.message.includes("collections.read"))return[];a.message.includes("Collection with the requested ID could not be found")}return[]}},async getHotelById(a){try{return await ie.getDocument(N.databaseId,N.collections.hotels,a)}catch(t){throw t}}},ro="mock-facial-clinic-1",Ds={$id:ro,id:ro,type:"facial",name:"Glow Skin Clinic",description:"Premium facial and skin care in a relaxing environment. Expert treatments for all skin types.",mainImage:"https://ik.imagekit.io/7grri5v7d/facial%202.png",profilePicture:"https://ik.imagekit.io/7grri5v7d/facial%202.png",location:"Seminyak, Bali",address:"Seminyak, Bali",city:"Bali",whatsappNumber:"6281234567890",rating:4.9,reviewCount:42,status:"Available",availability:"Available",isLive:!0,price60:350,price90:500,price120:650,pricing:{60:35e4,90:5e5,120:65e4},operatingHours:"09:00 - 21:00",facialTypes:["Deep Cleansing","Hydrating","Anti-Aging","Acne Treatment","Brightening"],amenities:["Consultation","Skin Analysis","Aftercare"],galleryImages:[{imageUrl:"https://ik.imagekit.io/7grri5v7d/facial%202.png",header:"Our Space",description:"A welcoming environment for premium facial and skin treatments."},{imageUrl:"https://ik.imagekit.io/7grri5v7d/facial%202.png",header:"Treatment Room",description:"Clean, professional setup for your comfort and safety."}],coordinates:"-8.6705,115.2126",lat:-8.6705,lng:115.2126,isVerified:!0};function oo(a){const t=String(a!=null?a:"busy").trim().toLowerCase();return t==="available"?"Available":"Busy"}function rn(a){var o,c,d,m,p,f,y,I,P,D,j,E,T,x,A,S,C,_,L,U,$,H,Y,ae,F,V,pe,he;const t=(()=>{var Te;const de=(Te=a.prices)!=null?Te:a.pricing;if(!de)return{};try{const De=typeof de=="string"?JSON.parse(de):de;return typeof De=="object"&&De!==null?De:{}}catch{return{}}})(),n=(d=(c=(o=t[60])!=null?o:t.price60)!=null?c:a.price60)!=null?d:0,s=(f=(p=(m=t[90])!=null?m:t.price90)!=null?p:a.price90)!=null?f:0,i=(P=(I=(y=t[120])!=null?y:t.price120)!=null?I:a.price120)!=null?P:0,r=(()=>{var Te;const de=(Te=a.galleryImages)!=null?Te:a.galleryimages;if(!de)return[];try{return(typeof de=="string"?JSON.parse(de):Array.isArray(de)?de:[]).map(we=>{var B,ne,v,R,q,X,Q;return{imageUrl:we.imageUrl||we.url||"",caption:(ne=(B=we.caption)!=null?B:we.header)!=null?ne:"",header:(q=(R=(v=we.header)!=null?v:we.caption)!=null?R:we.title)!=null?q:"",description:(Q=(X=we.description)!=null?X:we.caption)!=null?Q:""}})}catch{return[]}})(),l=(()=>{var Te;const de=(Te=a.facialtypes)!=null?Te:a.facialTypes;if(!de)return[];try{return typeof de=="string"?JSON.parse(de):Array.isArray(de)?de:[]}catch{return[]}})();return{...a,id:(D=a.$id)!=null?D:a.id,$id:(j=a.$id)!=null?j:a.id,type:"facial",name:a.name||"Unnamed Facial Spa",mainImage:(E=a.mainImage)!=null?E:a.mainimage,profilePicture:(T=a.mainImage)!=null?T:a.mainimage,address:(x=a.address)!=null?x:a.location,location:(A=a.address)!=null?A:a.location,description:a.description,websiteUrl:a.websiteurl,rating:a.starrate!=null?parseFloat(String(a.starrate)):(S=a.rating)!=null?S:0,reviewCount:(_=(C=a.reviewCount)!=null?C:a.reviewcount)!=null?_:0,status:oo((U=(L=a.status)!=null?L:a.availability)!=null?U:"Busy"),availability:oo((H=($=a.availability)!=null?$:a.status)!=null?H:"Busy"),isLive:a.isLive!==!1,city:a.city,coordinates:a.coordinates,lat:(Y=a.lat)!=null?Y:typeof a.coordinates=="string"&&a.coordinates?parseFloat(a.coordinates.split(",")[0]):void 0,lng:(ae=a.lng)!=null?ae:typeof a.coordinates=="string"&&a.coordinates?parseFloat(a.coordinates.split(",")[1]):void 0,whatsappNumber:(pe=(V=(F=a.whatsappNumber)!=null?F:a.whatsappnumber)!=null?V:a.ownerWhatsApp)!=null?pe:a.ownerwhatsapp,operatingHours:(he=a.operatingHours)!=null?he:a.openclosetime,price60:typeof n=="number"?n:typeof n=="string"?parseInt(n,10):0,price90:typeof s=="number"?s:typeof s=="string"?parseInt(s,10):0,price120:typeof i=="number"?i:typeof i=="string"?parseInt(i,10):0,pricing:{60:Number(n)||0,90:Number(s)||0,120:Number(i)||0},facialTypes:l,galleryImages:r,amenities:(()=>{const de=a.amenities;if(!de)return[];try{return typeof de=="string"?JSON.parse(de):Array.isArray(de)?de:[]}catch{return[]}})(),facialServices:(()=>{const de=a.facialservices;if(!de)return[];try{return typeof de=="string"?JSON.parse(de):de}catch{return[]}})(),openingTime:a.openclosetime,closingTime:a.openclosetime,discounted:a.discounted,equipmentList:a.equipmentList,popularityScore:a.popularityScore,averageSessionDuration:a.averageSessionDuration}}const Mu={async getAll(){var a;try{const t=h.collections.facial_places;if(!t||t==="")return[Ds];const n=await Xa.listDocuments(h.databaseId,t,[b.limit(100)]),s=(a=n==null?void 0:n.documents)!=null?a:[];return s.length===0?[Ds]:s.map(i=>rn(i))}catch{return[Ds]}},async getByEmail(a){var n;if(!a||!a.trim())return null;const t=h.collections.facial_places;if(!t||t==="")return null;try{const s=await Xa.listDocuments(h.databaseId,t,[b.equal("email",a.trim().toLowerCase()),b.limit(1)]);if(((n=s.documents)==null?void 0:n.length)>0)return rn(s.documents[0])}catch(s){s==null||s.code}return null},async getByProviderId(a){var n;if(!a)return null;const t=h.collections.facial_places;if(!t)return null;try{const s=await Xa.getDocument(h.databaseId,t,a);if(s&&s.$id)return rn(s)}catch(s){s==null||s.code}try{const s=await Xa.listDocuments(h.databaseId,t,[b.equal("placeId",a),b.limit(1)]);if(((n=s.documents)==null?void 0:n.length)>0)return rn(s.documents[0])}catch{}return null},async update(a,t){const n=h.collections.facial_places;if(!n)throw new Error("Facial places collection not configured");const s={...t};s.galleryImages!=null&&typeof s.galleryImages!="string"&&(s.galleryImages=JSON.stringify(s.galleryImages)),s.pricing!=null&&typeof s.pricing!="string"&&(s.pricing=JSON.stringify(s.pricing)),s.facialTypes!=null&&typeof s.facialTypes!="string"&&!Array.isArray(s.facialTypes)&&(s.facialTypes=JSON.stringify(s.facialTypes||[])),Array.isArray(s.facialTypes)&&(s.facialTypes=JSON.stringify(s.facialTypes)),s.massagetypes!=null&&typeof s.massagetypes!="string"&&(s.massagetypes=Array.isArray(s.massagetypes)?JSON.stringify(s.massagetypes):JSON.stringify([]));const i=await Xa.updateDocument(h.databaseId,n,a,s);return rn(i)}},Ru={async uploadIcon(a){try{const t=a.split(",")[1],n=atob(t),s=new Array(n.length);for(let m=0;m<n.length;m++)s[m]=n.charCodeAt(m);const i=new Uint8Array(s),r=new Blob([i],{type:"image/png"}),l="icon_".concat(Date.now(),".png"),o=new File([r],l,{type:"image/png"}),c=await wi.createFile(N.bucketId,se.unique(),o);return"".concat(N.endpoint,"/storage/buckets/").concat(N.bucketId,"/files/").concat(c.$id,"/view?project=").concat(N.projectId)}catch(t){throw t}},async create(a){try{let t=a.icon;a.icon.startsWith("data:image")&&(t=await this.uploadIcon(a.icon));const n=Date.now();return await ie.createDocument(N.databaseId,N.collections.customLinks,"unique()",{name:a.name,title:a.name,url:a.url,icon:t,customLinkId:n,createdAt:new Date().toISOString()},[Nt.read(St.any()),Nt.update(St.any()),Nt.delete(St.any())])}catch(t){throw t}},async getAll(){var a;try{return N.collections.customLinks?(await ie.listDocuments(N.databaseId,N.collections.customLinks)).documents:[]}catch(t){return(t==null?void 0:t.code)===401||(a=t==null?void 0:t.message)!=null&&a.includes("missing scopes")?[]:[]}},async delete(a){try{try{await ie.updateDocument(N.databaseId,N.collections.customLinks,a,{},[Nt.read(St.any()),Nt.update(St.any()),Nt.delete(St.any())])}catch{}await ie.deleteDocument(N.databaseId,N.collections.customLinks,a)}catch(t){throw t}},async update(a,t){try{let n=t.icon;return t.icon.startsWith("data:image")&&(n=await this.uploadIcon(t.icon)),await ie.updateDocument(N.databaseId,N.collections.customLinks,a,{name:t.name,title:t.name,url:t.url,icon:n},[Nt.read(St.any()),Nt.update(St.any()),Nt.delete(St.any())])}catch(n){throw n}}},Bu={async getAll(){try{const a=N.collections.translations;if(!a)return null;const t=await J.listDocuments(N.databaseId,a);if(t.documents.length===0)return null;const n={en:{},gb:{},id:{},zh:{},ja:{},ko:{},es:{},fr:{},de:{},it:{},pt:{},ru:{},ar:{},hi:{},th:{},vi:{},nl:{},tr:{},pl:{},sv:{},da:{}};if(t.documents.forEach(s=>{const{language:i,Key:r,value:l}=s;try{n[i]||(n[i]={});const o=typeof l=="string"&&l.startsWith("{")?JSON.parse(l):l;n[i][r]=o}catch{n[i]||(n[i]={}),n[i][r]=l}}),n.en){n.gb=n.gb||{};for(const s of Object.keys(n.en))n.gb[s]===void 0&&(n.gb[s]=n.en[s])}return n}catch{return null}},async set(a,t,n){const s=typeof n=="object"?JSON.stringify(n):n;try{if(s.length>900){await this.setLargeTranslation(a,t,s);return}const i=await J.listDocuments(N.databaseId,N.collections.translations,[b.equal("language",a),b.equal("Key",t)]),l={...{language:a,Key:t,value:s,lastUpdated:new Date().toISOString(),autoTranslated:!0}},o=s.length>900?"".concat(s.substring(0,900),"..."):s;if(l.en=a==="en"?o:"",l.id=a==="id"?o:"",a==="zh"&&(l.zh=o),a==="ja"&&(l.ja=o),a==="ko"&&(l.ko=o),a==="ru"&&(l.ru=o),a==="fr"&&(l.fr=o),i.documents.length>0){const c=i.documents[0].$id,d=i.documents[0];l.en=a==="en"?o:d.en||"",l.id=a==="id"?o:d.id||"",a==="zh"&&(l.zh=o),a==="ja"&&(l.ja=o),a==="ko"&&(l.ko=o),a==="ru"&&(l.ru=o),a==="fr"&&(l.fr=o),await J.updateDocument(N.databaseId,N.collections.translations,c,l)}else await J.createDocument(N.databaseId,N.collections.translations,se.unique(),l)}catch(i){throw i}},async setLargeTranslation(a,t,n){try{const s={language:a,Key:t,value:n,lastUpdated:new Date().toISOString(),autoTranslated:!0,en:a==="en"?"".concat(n.substring(0,900),"..."):"",id:a==="id"?"".concat(n.substring(0,900),"..."):""};a==="zh"&&(s.zh="".concat(n.substring(0,900),"...")),a==="ja"&&(s.ja="".concat(n.substring(0,900),"...")),a==="ko"&&(s.ko="".concat(n.substring(0,900),"...")),a==="ru"&&(s.ru="".concat(n.substring(0,900),"...")),a==="fr"&&(s.fr="".concat(n.substring(0,900),"..."));const i=await J.listDocuments(N.databaseId,N.collections.translations,[b.equal("language",a),b.equal("Key",t)]);i.documents.length>0?await J.updateDocument(N.databaseId,N.collections.translations,i.documents[0].$id,s):await J.createDocument(N.databaseId,N.collections.translations,se.unique(),s)}catch(s){throw s}},async syncFromLocal(a){try{const t=Object.keys(a);for(const n of t){const s=Object.keys(a[n]);for(const i of s)await this.set(n,i,a[n][i])}}catch(t){throw t}}},wt={ADMIN:"admin",THERAPIST:"therapist",PLACE:"place",HOTEL:"hotel",VILLA:"villa",USER:"user",AGENT:"agent"},ot={CUSTOMER:"customer",THERAPIST:"therapist",PLACE:"place",SYSTEM:"system"},Ii={TEXT:"text",IMAGE:"image",FILE:"file",BOOKING:"booking",SYSTEM:"system",NOTIFICATION:"notification"},Ne={CONVERSATION_ID:"conversationId",ROOM_ID:"roomId",SENDER_ID:"senderId",SENDER_NAME:"senderName",SENDER_TYPE:"senderType",RECIPIENT_ID:"recipientId",RECIPIENT_NAME:"recipientName",RECIPIENT_TYPE:"recipientType",RECEIVER_ID:"receiverId",RECEIVER_NAME:"receivername",CONTENT:"content",MESSAGE:"message",MESSAGE_TYPE:"messageType",ORIGINAL_LANGUAGE:"originalLanguage",IS_SYSTEM_MESSAGE:"isSystemMessage",BOOKING_ID:"bookingid",ORIGINAL_MESSAGE_ID:"originalMessageId",EXPIRES_AT:"expiresat",ARCHIVED_BY:"archivedBy",SESSION_ID:"sessionId",READ:"read",CREATED_AT:"createdAt",KEEP_FOREVER:"keepForever",MARKED_FOR_SAVE:"markedForSave",READ_AT:"readAt",TRANSLATED_TEXT:"translatedText",TRANSLATED_LANGUAGE:"translatedLanguage",FILE_URL:"fileUrl",FILE_NAME:"fileName",LOCATION:"location",SAVED_BY:"savedby",SAVED_AT:"savedat",METADATA:"metadata"};function yl(a){return Object.values(wt).includes(a)}function bl(a){return Object.values(ot).includes(a)}function Lu(a){return Object.values(Ii).includes(a)}function Ou(a){if(!a)return wt.USER;const t=a.toLowerCase().trim();if(yl(t))return t;const n={system:wt.ADMIN,customer:wt.USER,buyer:wt.USER,client:wt.USER,seller:wt.THERAPIST,provider:wt.THERAPIST,massage:wt.THERAPIST,facial:wt.PLACE,spa:wt.PLACE};if(n[t])return n[t];throw new Error('Invalid recipientType: "'.concat(a,'". Allowed: ').concat(Object.values(wt).join(", ")))}function _u(a,t){if(!a&&t==="system")return ot.SYSTEM;if(!a)return ot.CUSTOMER;const n=a.toLowerCase().trim();if(bl(n))return n;const s={user:ot.CUSTOMER,member:ot.CUSTOMER,buyer:ot.CUSTOMER,client:ot.CUSTOMER,admin:ot.SYSTEM,system:ot.SYSTEM,seller:ot.THERAPIST,provider:ot.THERAPIST,massage:ot.THERAPIST,facial:ot.PLACE,spa:ot.PLACE};if(s[n])return s[n];throw new Error('Invalid senderType: "'.concat(a,'". Allowed: ').concat(Object.values(ot).join(", ")))}const $u=new Set(["conversationId","roomId","senderId","senderName","senderType","recipientId","recipientName","recipientType","receiverId","receivername","content","message","messageType","type","originalLanguage","isSystemMessage","bookingid","originalMessageId","expiresat","archivedBy","sessionId","read","readAt","translatedText","translatedLanguage","fileUrl","fileName","location","keepForever","markedForSave","savedby","savedat","metadata","createdAt"]),Uu=["conversationId","roomId","senderId","senderName","senderType","recipientId","recipientName","recipientType","receiverId","receivername","content","message","messageType","originalLanguage","isSystemMessage","expiresat","archivedBy","sessionId","read","createdAt"];function Fu(a){if(!a||typeof a!="object")throw new Error("chat_messages validation failed: payload must be an object");const t=a,n=Object.keys(t).filter(s=>!$u.has(s));if(n.length>0)throw new Error("chat_messages validation failed: unexpected fields [".concat(n.join(", "),"]"));for(const s of Uu)if(t[s]===void 0||t[s]===null)throw new Error("chat_messages validation failed: missing required field '".concat(s,"'"));if(typeof t.conversationId!="string")throw new Error("chat_messages validation failed: conversationId must be a string");if(typeof t.roomId!="string")throw new Error("chat_messages validation failed: roomId must be a string");if(typeof t.senderId!="string")throw new Error("chat_messages validation failed: senderId must be a string");if(typeof t.senderName!="string")throw new Error("chat_messages validation failed: senderName must be a string");if(typeof t.senderType!="string")throw new Error("chat_messages validation failed: senderType must be a string");if(!bl(t.senderType))throw new Error('chat_messages validation failed: senderType "'.concat(t.senderType,'" is invalid. Must be one of: ').concat(Object.values(ot).join(", ")));if(typeof t.recipientId!="string")throw new Error("chat_messages validation failed: recipientId must be a string");if(typeof t.recipientName!="string")throw new Error("chat_messages validation failed: recipientName must be a string");if(typeof t.recipientType!="string")throw new Error("chat_messages validation failed: recipientType must be a string");if(!yl(t.recipientType))throw new Error('chat_messages validation failed: recipientType "'.concat(t.recipientType,'" is invalid. Must be one of: ').concat(Object.values(wt).join(", ")));if(typeof t.receiverId!="string")throw new Error("chat_messages validation failed: receiverId must be a string");if(typeof t.receivername!="string")throw new Error("chat_messages validation failed: receivername must be a string");if(typeof t.content!="string")throw new Error("chat_messages validation failed: content must be a string");if(typeof t.message!="string")throw new Error("chat_messages validation failed: message must be a string");if(typeof t.messageType!="string")throw new Error("chat_messages validation failed: messageType must be a string");if(!Lu(t.messageType))throw new Error('chat_messages validation failed: messageType "'.concat(t.messageType,'" is invalid. Must be one of: ').concat(Object.values(Ii).join(", ")));if(typeof t.originalLanguage!="string")throw new Error("chat_messages validation failed: originalLanguage must be a string");if(typeof t.isSystemMessage!="boolean")throw new Error("chat_messages validation failed: isSystemMessage must be a boolean");if(t.bookingid!==void 0&&typeof t.bookingid!="string")throw new Error("chat_messages validation failed: bookingid must be a string");if(t.originalMessageId!==void 0&&typeof t.originalMessageId!="string")throw new Error("chat_messages validation failed: originalMessageId must be a string");if(typeof t.expiresat!="string")throw new Error("chat_messages validation failed: expiresat must be a string");if(typeof t.archivedBy!="string")throw new Error("chat_messages validation failed: archivedBy must be a string");if(typeof t.sessionId!="string")throw new Error("chat_messages validation failed: sessionId must be a string");if(typeof t.read!="boolean")throw new Error("chat_messages validation failed: read must be a boolean");if(typeof t.createdAt!="string")throw new Error("chat_messages validation failed: createdAt must be a string");if(typeof t.keepForever!="boolean")throw new Error("chat_messages validation failed: keepForever must be a boolean");if(typeof t.markedForSave!="boolean")throw new Error("chat_messages validation failed: markedForSave must be a boolean");if(t.readAt!==void 0&&typeof t.readAt!="string")throw new Error("chat_messages validation failed: readAt must be a string");if(t.translatedText!==void 0&&typeof t.translatedText!="string")throw new Error("chat_messages validation failed: translatedText must be a string");if(t.translatedLanguage!==void 0&&typeof t.translatedLanguage!="string")throw new Error("chat_messages validation failed: translatedLanguage must be a string");if(t.fileUrl!==void 0&&typeof t.fileUrl!="string")throw new Error("chat_messages validation failed: fileUrl must be a string");if(t.fileName!==void 0&&typeof t.fileName!="string")throw new Error("chat_messages validation failed: fileName must be a string");if(t.location!==void 0&&typeof t.location!="string")throw new Error("chat_messages validation failed: location must be a string");if(t.savedby!==void 0&&typeof t.savedby!="string")throw new Error("chat_messages validation failed: savedby must be a string");if(t.savedat!==void 0&&typeof t.savedat!="string")throw new Error("chat_messages validation failed: savedat must be a string");if(t.metadata!==void 0&&typeof t.metadata!="string")throw new Error("chat_messages validation failed: metadata must be a string");return{conversationId:t.conversationId,roomId:t.roomId,senderId:t.senderId,senderName:t.senderName,senderType:t.senderType,recipientId:t.recipientId,recipientName:t.recipientName,recipientType:t.recipientType,receiverId:t.receiverId,receivername:t.receivername,content:t.content,message:t.message,messageType:t.messageType,originalLanguage:t.originalLanguage,isSystemMessage:t.isSystemMessage,bookingid:t.bookingid||"",originalMessageId:t.originalMessageId||"",expiresat:t.expiresat,archivedBy:t.archivedBy,sessionId:t.sessionId,read:t.read,readAt:t.readAt,translatedText:t.translatedText,translatedLanguage:t.translatedLanguage,fileUrl:t.fileUrl,fileName:t.fileName,location:t.location,keepForever:t.keepForever,markedForSave:t.markedForSave,savedby:t.savedby,savedat:t.savedat,metadata:t.metadata,createdAt:t.createdAt}}const Ku=new Set(["bookingId","customerId","customerName","customerLanguage","customerPhoto","therapistId","therapistName","therapistLanguage","therapistType","therapistPhoto","status","expiresAt","acceptedAt","declinedAt","unreadCount","createdAt","updatedAt"]),Wu=["customerId","customerName","customerLanguage","therapistName","therapistLanguage","therapistType","status","expiresAt"],Mn=["en","id"],lo=["therapist","place"];function qu(a){if(!a||typeof a!="object")throw new Error("chat_rooms validation failed: payload must be an object");const t=a,n=Object.keys(t).filter(i=>!Ku.has(i));if(n.length>0)throw new Error("chat_rooms validation failed: unexpected fields [".concat(n.join(", "),"]"));for(const i of Wu)if(t[i]===void 0||t[i]===null)throw new Error("chat_rooms validation failed: missing required field '".concat(i,"'"));if(typeof t.customerId!="string")throw new Error("chat_rooms validation failed: customerId must be a string");if(typeof t.customerName!="string")throw new Error("chat_rooms validation failed: customerName must be a string");if(!Mn.includes(t.customerLanguage))throw new Error("chat_rooms validation failed: customerLanguage must be one of [".concat(Mn.join(", "),"]"));if(typeof t.therapistName!="string")throw new Error("chat_rooms validation failed: therapistName must be a string");if(!Mn.includes(t.therapistLanguage))throw new Error("chat_rooms validation failed: therapistLanguage must be one of [".concat(Mn.join(", "),"]"));if(!lo.includes(t.therapistType))throw new Error("chat_rooms validation failed: therapistType must be one of [".concat(lo.join(", "),"]"));if(typeof t.status!="string")throw new Error("chat_rooms validation failed: status must be a string");if(typeof t.expiresAt!="string")throw new Error("chat_rooms validation failed: expiresAt must be a string (ISO datetime)");if(t.bookingId!==void 0&&t.bookingId!==null&&typeof t.bookingId!="string")throw new Error("chat_rooms validation failed: bookingId must be a string when provided");if(t.therapistId!==void 0&&t.therapistId!==null&&typeof t.therapistId!="string")throw new Error("chat_rooms validation failed: therapistId must be a string when provided");if(t.acceptedAt!==void 0&&t.acceptedAt!==null&&typeof t.acceptedAt!="string")throw new Error("chat_rooms validation failed: acceptedAt must be a string (ISO datetime) when provided");if(t.declinedAt!==void 0&&t.declinedAt!==null&&typeof t.declinedAt!="string")throw new Error("chat_rooms validation failed: declinedAt must be a string (ISO datetime) when provided");const s={customerId:t.customerId,customerName:t.customerName,customerLanguage:t.customerLanguage,therapistName:t.therapistName,therapistLanguage:t.therapistLanguage,therapistType:t.therapistType,status:t.status,expiresAt:t.expiresAt,unreadCount:typeof t.unreadCount=="number"?t.unreadCount:0,createdAt:t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt||new Date().toISOString()};if(t.bookingId!==void 0&&t.bookingId!==null&&(s.bookingId=t.bookingId),t.therapistId!==void 0&&t.therapistId!==null&&(s.therapistId=t.therapistId),t.acceptedAt!==void 0&&t.acceptedAt!==null&&(s.acceptedAt=t.acceptedAt),t.declinedAt!==void 0&&t.declinedAt!==null&&(s.declinedAt=t.declinedAt),t.customerPhoto!==void 0){if(typeof t.customerPhoto!="string")throw new Error("chat_rooms validation failed: customerPhoto must be a string");s.customerPhoto=t.customerPhoto}if(t.therapistPhoto!==void 0){if(typeof t.therapistPhoto!="string")throw new Error("chat_rooms validation failed: therapistPhoto must be a string");s.therapistPhoto=t.therapistPhoto}return s}const xl={async create(a){try{const t=cd(),n=hn.validateDocument("MESSAGES",a);if(!n.valid){const r="‚ùå SCHEMA VALIDATION FAILED: ".concat(n.errors.join(", "));throw new Error(r)}const s=hn.getCollectionId("MESSAGES");if(!s||s===""){const r='‚ùå EMPTY COLLECTION ID: messages collection ID is "'.concat(s,'" - Cannot create document');throw new Error(r)}return await J.createDocument(N.databaseId,s,se.unique(),a)}catch(t){throw t}},async getConversation(a){try{return(await J.listDocuments(N.databaseId,N.collections.messages,[b.equal("conversationId",a),b.orderAsc("$createdAt"),b.limit(100)])).documents}catch{return[]}},async markAsRead(a){try{await J.updateDocument(N.databaseId,N.collections.messages,a,{read:!0})}catch(t){throw t}},generateConversationId(a,t){const n=typeof a=="string"?a:a.id,s=typeof t=="string"?t:t.id,i=[n,s].sort();return"".concat(i[0],"_").concat(i[1])},async sendMessage(a){var t,n,s,i;try{const r=["senderId","senderName","recipientId","content"];for(const j of r)if(!a[j])throw new Error("‚ùå MESSAGING SERVICE: Required field '".concat(j,"' is missing or empty. Cannot send message."));const l=typeof(a==null?void 0:a.senderId)=="object"?a.senderId.id:a.senderId,o=typeof(a==null?void 0:a.recipientId)=="object"?a.recipientId.id:a.recipientId;if(o==="all")throw new Error('‚ùå MESSAGING SERVICE: recipientId cannot be "all". Must be a real userId or "system".');if(o!=="system"&&(!o||o.trim().length===0))throw new Error('‚ùå MESSAGING SERVICE: Invalid recipientId "'.concat(o,'". Must be a valid userId or "system".'));const c=a.conversationId||this.generateConversationId(l,o);let d,m;try{d=_u(a.senderType,l),m=Ou(a.recipientType)}catch(j){throw new Error("‚ùå MESSAGING SERVICE: Invalid enum value - ".concat(j.message))}const p=["user","therapist","place","hotel","villa","agent","admin"],f=["customer","therapist","place","system"];if(!p.includes(m))throw new Error('‚ùå MESSAGING SERVICE: Invalid recipientType "'.concat(m,'". Allowed: ').concat(p.join(", ")));if(!f.includes(d))throw new Error('‚ùå MESSAGING SERVICE: Invalid senderType "'.concat(d,'". Allowed: ').concat(f.join(", ")));const y={[Ne.CONVERSATION_ID]:c,[Ne.ROOM_ID]:a.roomId||c,[Ne.SENDER_ID]:l,[Ne.SENDER_NAME]:a.senderName||"Unknown",[Ne.SENDER_TYPE]:d,[Ne.RECIPIENT_ID]:o,[Ne.RECIPIENT_NAME]:a.recipientName||"Unknown",[Ne.RECIPIENT_TYPE]:m,[Ne.RECEIVER_ID]:o,[Ne.RECEIVER_NAME]:a.recipientName||"Unknown",[Ne.CONTENT]:a.content,[Ne.MESSAGE]:a.message||a.content,[Ne.MESSAGE_TYPE]:a.messageType||a.type||Ii.TEXT,[Ne.ORIGINAL_LANGUAGE]:a.originalLanguage||"id",[Ne.IS_SYSTEM_MESSAGE]:(t=a.isSystemMessage)!=null?t:l==="system",[Ne.BOOKING_ID]:a.bookingid||a.bookingId||"",[Ne.ORIGINAL_MESSAGE_ID]:a.originalMessageId||"",[Ne.EXPIRES_AT]:a.expiresat||new Date(Date.now()+720*60*60*1e3).toISOString(),[Ne.ARCHIVED_BY]:a.archivedBy||"",[Ne.SESSION_ID]:a.sessionId||c,[Ne.READ]:(n=a.read)!=null?n:!1,[Ne.READ_AT]:a.readAt,[Ne.TRANSLATED_TEXT]:a.translatedText,[Ne.TRANSLATED_LANGUAGE]:a.translatedLanguage,[Ne.FILE_URL]:a.fileUrl,[Ne.FILE_NAME]:a.fileName,[Ne.LOCATION]:a.location,[Ne.KEEP_FOREVER]:(s=a.keepForever)!=null?s:!1,[Ne.MARKED_FOR_SAVE]:(i=a.markedForSave)!=null?i:!1,[Ne.SAVED_BY]:a.savedby,[Ne.SAVED_AT]:a.savedat,[Ne.METADATA]:a.metadata,[Ne.CREATED_AT]:new Date().toISOString()},I=[Ne.CONVERSATION_ID,Ne.SENDER_ID,Ne.SENDER_NAME,Ne.SENDER_TYPE,Ne.RECIPIENT_ID,Ne.RECIPIENT_NAME,Ne.RECIPIENT_TYPE,Ne.RECEIVER_ID,Ne.RECEIVER_NAME,Ne.CONTENT,Ne.CREATED_AT];for(const j of I)if(!y[j]&&y[j]!==!1)throw new Error("‚ùå HARD GUARD: Required field '".concat(j,"' is missing from payload. Cannot send to Appwrite."));if(!y[Ne.RECIPIENT_TYPE])throw new Error("‚ùå HARD GUARD: recipientType is required before sending message");let P;try{P=Fu(y)}catch(j){throw new Error("Failed to send message: ".concat(j.message))}return await this.create(P)}catch(r){throw r}},async getUserConversations(a){try{return(await J.listDocuments(N.databaseId,N.collections.messages,[b.or([b.equal("senderId",a),b.equal("recipientId",a)]),b.orderDesc("$createdAt"),b.limit(100)])).documents}catch{return[]}}},Hu=Object.freeze(Object.defineProperty({__proto__:null,messagingService:xl},Symbol.toStringTag,{value:"Module"})),Gu={async getMessages(a){try{return(await J.listDocuments(N.databaseId,"admin_messages",[b.or([b.equal("senderId",a),b.equal("receiverId",a),b.equal("receiverId","admin")]),b.orderDesc("$createdAt"),b.limit(100)])).documents}catch{return[]}},async sendMessage(a){try{const t={...a,isRead:!1,createdAt:new Date().toISOString()};return await J.createDocument(N.databaseId,"admin_messages",se.unique(),t)}catch(t){throw t}},async markAsRead(a){try{const n=(await J.listDocuments(N.databaseId,"admin_messages",[b.equal("receiverId",a),b.equal("isRead",!1)])).documents.map(s=>J.updateDocument(N.databaseId,"admin_messages",s.$id,{isRead:!0}));await Promise.all(n)}catch(t){throw t}},async getUnreadCount(a){try{return(await J.listDocuments(N.databaseId,"admin_messages",[b.equal("receiverId",a),b.equal("isRead",!1)])).total}catch{return 0}}},zu={async create(a){try{return await ie.createDocument(N.databaseId,N.collections.agents,"unique()",a)}catch(t){throw t}},async getAll(){try{return(await ie.listDocuments(N.databaseId,N.collections.agents,[b.limit(100)])).documents}catch{return[]}},async getByCode(a){try{const t=await ie.listDocuments(N.databaseId,N.collections.agents,[b.equal("agentCode",a),b.limit(1)]);return t.documents.length>0?t.documents[0]:null}catch{return null}},async update(a,t){try{return await ie.updateDocument(N.databaseId,N.collections.agents,a,t)}catch(n){throw n}}},Es=N.collections.therapistDashboard,co="697b3ca50023d08ec335",Vu={async get(a){try{const t=await J.listDocuments(N.databaseId,Es,[b.equal("therapistId",a),b.limit(1)]);return t.documents.length>0?t.documents[0]:null}catch(t){throw t}},async upsert(a,t){try{const n=await this.get(a),s=new Date().toISOString(),i={...t,therapistId:a,updatedAt:s};if(n&&n.$id){const{$id:r,...l}=i;return await J.updateDocument(N.databaseId,Es,n.$id,l)}else return await J.createDocument(N.databaseId,Es,se.unique(),{...i,createdAt:s})}catch(n){throw n}},async uploadKtpPhoto(a,t){try{if(t.size>15728640)throw new Error("File size too large. Maximum 15MB allowed.");if(!["image/jpeg","image/jpg","image/png"].includes(t.type))throw new Error("Invalid file type. Only JPG and PNG are allowed.");const i=await Dt.createFile(co,se.unique(),t),r=Dt.getFileView(co,i.$id);return{fileId:i.$id,url:String(r)}}catch(n){throw n}},async uploadCv(a,t){try{const n=N.bucketId;if(!n)throw new Error("Storage bucket not configured");const s=5*1024*1024;if(t.size>s)throw new Error("File too large. Maximum 5MB allowed.");if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(t.type))throw new Error("Invalid file type. Only PDF and DOC/DOCX are allowed.");const r=await Dt.createFile(n,se.unique(),t),l=Dt.getFileView(n,r.$id);return{fileId:r.$id,url:String(l)}}catch(n){throw n}},async saveBankAndKtp(a,t){return this.upsert(a,{bankName:t.bankName,accountName:t.accountName,accountNumber:t.accountNumber,ktpPhotoFileId:t.ktpPhotoFileId,ktpPhotoUrl:t.ktpPhotoUrl,ktpSubmitted:!0,ktpVerified:!1,ktpRejected:!1})},async verifyKtp(a,t){return this.upsert(a,{ktpVerified:!0,ktpRejected:!1,ktpVerifiedAt:new Date().toISOString(),ktpVerifiedBy:t})},async rejectKtp(a,t,n){return this.upsert(a,{ktpVerified:!1,ktpRejected:!0,ktpVerifiedAt:new Date().toISOString(),ktpVerifiedBy:t,ktpRejectionReason:n})}},Oa={createBooking:async a=>null,updateStatus:async(a,t)=>null,notifyAdmin:async a=>null},kl=Object.freeze(Object.defineProperty({__proto__:null,ADMIN_REACTIVATION_FEE:ka,BookingLifecycleStatus:Re,BookingType:oa,TherapistAvailabilityStatus:cs,adminCommissionService:dl,adminMessageService:Gu,agentService:zu,appwriteAccount:lt,appwriteDatabases:ie,appwriteStorage:wi,authService:wd,availabilityEnforcementService:yn,bookingCalendarService:cl,bookingLifecycleService:yt,bookingService:ji,commissionTrackingService:Nn,customLinksService:Ru,facialPlaceService:Mu,hotelService:Eu,imageUploadService:vu,leadGenerationService:Ad,membershipPackageService:qn,membershipService:At,messagingService:xl,notificationService:wu,paymentConfirmationService:Cd,paymentService:Du,placeService:Td,placesService:Iu,reviewService:us,secureBankCardService:$a,serverEnforcedChatService:ds,shareLinkService:qa,shareLinksAutoInitService:il,shareLinksValidationService:ra,simpleBookingService:Oa,simpleChatService:Ze,therapistDashboardService:Vu,therapistMenusService:rl,therapistService:Sa,translationsService:Bu,userService:mn},Symbol.toStringTag,{value:"Module"}));var vl=(a=>(a[a.DEBUG=0]="DEBUG",a[a.INFO=1]="INFO",a[a.WARN=2]="WARN",a[a.ERROR=3]="ERROR",a[a.FATAL=4]="FATAL",a))(vl||{});class Yu{constructor(){Z(this,"config");Z(this,"logBuffer",[]);Z(this,"flushTimer");Z(this,"sessionId");Z(this,"buildVersion");this.config={minLevel:1,enableConsole:!1,enableRemote:!1,remoteEndpoint:"/api/logs",sensitiveKeys:["password","token","apiKey","secret","credit","ssn","phone"],maxBatchSize:50,flushInterval:1e4,environment:"production"},this.sessionId=this.generateSessionId(),this.buildVersion="dev",this.startFlushTimer(),typeof window!="undefined"&&window.addEventListener("beforeunload",()=>this.flush())}debug(t,n){this.log(0,t,n)}info(t,n){const s=typeof n=="object"&&n!==null?n:n!==void 0?{value:n}:void 0;this.log(1,t,s)}warn(t,n){const s=typeof n=="object"&&n!==null?n:n!==void 0?{value:n}:void 0;this.log(2,t,s)}error(t,n,s){const r={...typeof n=="object"&&n!==null?n:n!==void 0?{value:n}:{},stack:s==null?void 0:s.stack,errorName:s==null?void 0:s.name,errorMessage:s==null?void 0:s.message};this.log(3,t,r)}fatal(t,n,s){const i={...n,stack:s==null?void 0:s.stack,errorName:s==null?void 0:s.name,errorMessage:s==null?void 0:s.message};this.log(4,t,i),this.flush()}log(t,n,s){if(t<this.config.minLevel)return;const i={timestamp:new Date().toISOString(),level:t,message:n,context:s?this.sanitizeContext(s):void 0,sessionId:this.sessionId,buildVersion:this.buildVersion,environment:this.config.environment};this.logBuffer.push(i),this.config.enableConsole&&this.logToConsole(i),this.logBuffer.length>=this.config.maxBatchSize&&this.flush()}sanitizeContext(t){const n={};for(const[s,i]of Object.entries(t))this.config.sensitiveKeys.some(l=>s.toLowerCase().includes(l.toLowerCase()))?n[s]="[REDACTED]":typeof i=="object"&&i!==null?n[s]=this.sanitizeContext(i):n[s]=i;return n}logToConsole(t){const n={0:"\x1B[36m",1:"\x1B[32m",2:"\x1B[33m",3:"\x1B[31m",4:"\x1B[35m"},s="\x1B[0m",i=vl[t.level],r=n[t.level],l="".concat(r,"[").concat(t.timestamp,"] [").concat(i,"]").concat(s);"".concat(l," ").concat(t.message),t.level}async flush(){if(this.logBuffer.length===0||!this.config.enableRemote)return;const t=[...this.logBuffer];this.logBuffer=[];try{await fetch(this.config.remoteEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({logs:t,sessionId:this.sessionId,buildVersion:this.buildVersion,environment:this.config.environment})})}catch(n){this.config.enableConsole&&W.error("Failed to send logs to remote endpoint:",n),this.logBuffer.unshift(...t)}}startFlushTimer(){this.flushTimer=setInterval(()=>{this.flush()},this.config.flushInterval)}stopFlushTimer(){this.flushTimer&&clearInterval(this.flushTimer)}generateSessionId(){return"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}configure(t){this.config={...this.config,...t}}getBuffer(){return[...this.logBuffer]}clearBuffer(){this.logBuffer=[]}}const W=new Yu,Ua=class Ua{constructor(){Z(this,"deviceInfo",null);Z(this,"optimizations",null)}static getInstance(){return Ua.instance||(Ua.instance=new Ua),Ua.instance}getDeviceInfo(){return this.deviceInfo?this.deviceInfo:(this.deviceInfo={type:this.detectDeviceType(),platform:this.detectPlatform(),browser:this.detectBrowser(),screenSize:this.detectScreenSize(),orientation:this.getOrientation(),hasTouch:this.hasTouchSupport(),isHighDPI:this.isHighDPI(),supportsGPS:this.supportsGPS(),supportsCamera:this.supportsCamera(),supportsPWA:this.supportsPWA(),connectionType:this.getConnectionType(),isOnline:navigator.onLine},this.deviceInfo)}getOptimizations(){if(this.optimizations)return this.optimizations;const t=this.getDeviceInfo();return this.optimizations={imageQuality:this.getOptimalImageQuality(t),animationLevel:this.getOptimalAnimationLevel(t),preloadStrategy:this.getOptimalPreloadStrategy(t),renderingMode:this.getOptimalRenderingMode(t),locationAccuracy:this.getOptimalLocationAccuracy(t),cacheStrategy:this.getOptimalCacheStrategy(t)},this.optimizations}detectDeviceType(){const t=navigator.userAgent.toLowerCase(),n=window.innerWidth;return/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(t)?n<768?"mobile":"tablet":/ipad/i.test(t)||t.includes("mac")&&"ontouchend"in document?"tablet":n<768?"mobile":n<1024?"tablet":"desktop"}detectPlatform(){const t=navigator.userAgent.toLowerCase(),n=navigator.platform.toLowerCase();return t.includes("android")?"android":/iphone|ipad|ipod/.test(t)?"ios":t.includes("win")||n.includes("win")?"windows":t.includes("mac")||n.includes("mac")?"macos":t.includes("linux")||n.includes("linux")?"linux":"unknown"}detectBrowser(){const t=navigator.userAgent.toLowerCase();return t.includes("samsungbrowser")?"samsung":t.includes("opera")||t.includes("opr")?"opera":t.includes("edg")?"edge":t.includes("chrome")?"chrome":t.includes("firefox")?"firefox":t.includes("safari")&&!t.includes("chrome")?"safari":"unknown"}detectScreenSize(){const t=window.innerWidth;return t<640?"small":t<1024?"medium":t<1280?"large":"xlarge"}getOrientation(){return window.innerHeight>window.innerWidth?"portrait":"landscape"}hasTouchSupport(){return"ontouchstart"in window||navigator.maxTouchPoints>0}isHighDPI(){return window.devicePixelRatio>1.5}supportsGPS(){return"geolocation"in navigator}supportsCamera(){return"mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices}supportsPWA(){return"serviceWorker"in navigator&&"PushManager"in window}getConnectionType(){const t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(t){const n=t.effectiveType;if(n==="slow-2g"||n==="2g")return"slow";if(n==="3g"||n==="4g")return"fast"}return"unknown"}getOptimalImageQuality(t){return t.connectionType==="slow"?"low":t.type==="mobile"&&!t.isHighDPI?"medium":"high"}getOptimalAnimationLevel(t){return t.type==="mobile"&&t.connectionType==="slow"||t.platform==="android"&&t.type==="mobile"?"reduced":"full"}getOptimalPreloadStrategy(t){return t.connectionType==="slow"?"none":t.type==="mobile"?"minimal":"aggressive"}getOptimalRenderingMode(t){return t.type==="mobile"&&t.connectionType==="slow"?"simple":"enhanced"}getOptimalLocationAccuracy(t){return t.supportsGPS?t.platform==="android"?"high":t.type==="mobile"?"medium":"low":"low"}getOptimalCacheStrategy(t){return t.type==="mobile"?"standard":t.type==="desktop"?"aggressive":"standard"}getAndroidOptimizations(){const t=this.getDeviceInfo();return t.platform!=="android"?{}:{gps:{enableHighAccuracy:!0,timeout:15e3,maximumAge:6e4},performance:{reduceAnimations:t.type==="mobile",optimizeImages:!0,enableHardwareAcceleration:!0},ui:{largerTouchTargets:!0,reducedMotion:t.connectionType==="slow",adaptiveLoading:!0}}}getIOSOptimizations(){return this.getDeviceInfo().platform!=="ios"?{}:{safari:{preventZoom:!0,optimizeScrolling:!0,handleViewportChanges:!0},performance:{limitParallax:!0,optimizeAnimations:!0,manageMemory:!0}}}setupDeviceMonitoring(){window.addEventListener("orientationchange",()=>{this.deviceInfo=null,this.optimizations=null,this.notifyDeviceChange("orientation")}),window.addEventListener("online",()=>{this.notifyDeviceChange("network")}),window.addEventListener("offline",()=>{this.notifyDeviceChange("network")});let t;window.addEventListener("resize",()=>{clearTimeout(t),t=setTimeout(()=>{this.deviceInfo=null,this.optimizations=null,this.notifyDeviceChange("screen")},250)})}notifyDeviceChange(t){window.dispatchEvent(new CustomEvent("devicechange",{detail:{type:t,deviceInfo:this.getDeviceInfo()}}))}getPerformanceMetrics(){const t=this.getDeviceInfo();return{device:t.type,platform:t.platform,browser:t.browser,memory:performance.memory?{used:Math.round(performance.memory.usedJSHeapSize/1048576),total:Math.round(performance.memory.totalJSHeapSize/1048576),limit:Math.round(performance.memory.jsHeapSizeLimit/1048576)}:null,connection:t.connectionType,online:t.isOnline,timestamp:Date.now()}}getDeviceCSSClasses(){const t=this.getDeviceInfo(),n=this.getOptimizations(),s=["device-".concat(t.type),"platform-".concat(t.platform),"browser-".concat(t.browser),"screen-".concat(t.screenSize),"orientation-".concat(t.orientation),"quality-".concat(n.imageQuality),"animations-".concat(n.animationLevel),"rendering-".concat(n.renderingMode)];return t.hasTouch&&s.push("has-touch"),t.isHighDPI&&s.push("high-dpi"),t.supportsGPS&&s.push("has-gps"),t.supportsCamera&&s.push("has-camera"),t.supportsPWA&&s.push("pwa-capable"),t.isOnline||s.push("offline"),s}};Z(Ua,"instance");let ni=Ua;const si=ni.getInstance();typeof window!="undefined"&&si.setupDeviceMonitoring();const Fa=class Fa{constructor(){Z(this,"currentLocation",null);Z(this,"lastLocationUpdate",0);Z(this,"CACHE_DURATION",300*1e3)}static getInstance(){return Fa.instance||(Fa.instance=new Fa),Fa.instance}isGeolocationSupported(){return"geolocation"in navigator}isAndroidDevice(){return navigator.userAgent.toLowerCase().includes("android")}isMobileDevice(){const t=navigator.userAgent.toLowerCase();return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(t)}async getCurrentLocation(t){W.info("üìç LocationService: Getting current location...");const n=si.getDeviceInfo(),s=si.getOptimizations();if(W.info("üîß Device info:",{type:n.type,platform:n.platform,browser:n.browser,supportsGPS:n.supportsGPS,hasTouch:n.hasTouch,locationAccuracy:s.locationAccuracy,userAgent:navigator.userAgent}),!this.isGeolocationSupported())throw this.createLocationError(0,"Geolocation is not supported on this device");if(this.currentLocation&&this.isLocationCacheValid())return W.info("üìç Using cached location:",this.currentLocation),this.currentLocation;const i={enableHighAccuracy:s.locationAccuracy==="high",timeout:n.platform==="android"?15e3:1e4,maximumAge:n.type==="mobile"?6e4:3e5,...t};return new Promise((r,l)=>{W.info("üìç Requesting GPS location with device-optimized options:",i),navigator.geolocation.getCurrentPosition(async o=>{W.info("‚úÖ GPS location obtained:",o),W.info("üìä GPS accuracy: ".concat(o.coords.accuracy," meters")),W.info("üéØ GPS coordinates:",{lat:o.coords.latitude,lng:o.coords.longitude,altitude:o.coords.altitude,heading:o.coords.heading,speed:o.coords.speed});try{const c=await this.processGPSPosition(o);this.cacheLocation(c),r(c)}catch(c){W.error("‚ùå Error processing GPS position:",c),l(this.createLocationError(0,"Failed to process GPS location"))}},o=>{o.code===3?W.info("‚è±Ô∏è GPS location timeout (expected) - will use fallback"):W.warn("‚ö†Ô∏è GPS location error:",o.message||o),l(this.handleGeolocationError(o))},i)})}async processGPSPosition(t){const{latitude:n,longitude:s}=t.coords;W.info("üìç Processing GPS coordinates:",{latitude:n,longitude:s}),W.info("üìç Position accuracy: ".concat(t.coords.accuracy," meters"));let i="".concat(n.toFixed(6),", ").concat(s.toFixed(6));try{i=await this.reverseGeocode(n,s),W.info("üìç Address resolved:",i)}catch(r){W.warn("‚ö†Ô∏è Reverse geocoding failed, using coordinates:",r)}return{address:i,lat:n,lng:s}}async reverseGeocode(t,n){var s,i;return typeof window!="undefined"&&((i=(s=window.google)==null?void 0:s.maps)!=null&&i.Geocoder)?(W.info("üìç Using Google Maps for reverse geocoding"),this.googleMapsReverseGeocode(t,n)):(W.info("üìç Using fallback geocoding service"),this.fallbackReverseGeocode(t,n))}async googleMapsReverseGeocode(t,n){return new Promise((s,i)=>{const r=new window.google.maps.Geocoder,l={lat:t,lng:n};r.geocode({location:l},(o,c)=>{c==="OK"&&o[0]?s(o[0].formatted_address):i(new Error("Google Maps geocoding failed: ".concat(c)))})})}async fallbackReverseGeocode(t,n){var i,r,l;const s=[{name:"BigDataCloud (No API key required)",url:"https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=".concat(t,"&longitude=").concat(n,"&localityLanguage=en")},{name:"Nominatim (Direct)",url:"https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(t,"&lon=").concat(n,"&zoom=16&addressdetails=1")}];for(const o of s)try{W.info("üìç Trying ".concat(o.name," for reverse geocoding"));const c=await fetch(o.url,{headers:{"User-Agent":"IndaStreet-Massage-App/1.0"}});if(!c.ok){W.warn("‚ö†Ô∏è ".concat(o.name," returned ").concat(c.status));continue}const d=await c.json();let m="";if(o.name==="BigDataCloud (No API key required)"){const p=[];d.locality&&p.push(d.locality),d.principalSubdivision&&p.push(d.principalSubdivision),d.countryName&&p.push(d.countryName),m=p.join(", ")||((l=(r=(i=d.localityInfo)==null?void 0:i.administrative)==null?void 0:r[0])==null?void 0:l.name)||""}else m=d.display_name||"";if(m)return W.info("‚úÖ ".concat(o.name," geocoding successful")),m}catch(c){W.warn("‚ö†Ô∏è ".concat(o.name," failed:"),c);continue}throw W.warn("‚ö†Ô∏è All fallback geocoding services failed"),new Error("All geocoding services failed")}handleGeolocationError(t){switch(t.code!==3&&W.warn("üö® Geolocation error:",t.message),t.code){case t.PERMISSION_DENIED:return this.createLocationError(t.code,"Location access denied. Please enable location sharing in your browser settings.",!0);case t.POSITION_UNAVAILABLE:return this.createLocationError(t.code,"Location information is unavailable. Please check your GPS settings.",!1,!0);case t.TIMEOUT:return this.createLocationError(t.code,"Location request timed out. Please try again.",!1,!1,!0);default:return this.createLocationError(t.code,"An unknown location error occurred. Please try again.")}}createLocationError(t,n,s=!1,i=!1,r=!1){return{code:t,message:n,isPermissionDenied:s,isUnavailable:i,isTimeout:r}}cacheLocation(t){this.currentLocation=t,this.lastLocationUpdate=Date.now();try{localStorage.setItem("cached_location",JSON.stringify({location:t,timestamp:this.lastLocationUpdate}))}catch(n){W.warn("Failed to cache location to localStorage:",n)}}isLocationCacheValid(){return!this.currentLocation||!this.lastLocationUpdate?!1:Date.now()-this.lastLocationUpdate<this.CACHE_DURATION}loadCachedLocation(){try{const t=localStorage.getItem("cached_location");if(t){const{location:n,timestamp:s}=JSON.parse(t);if(Date.now()-s<this.CACHE_DURATION)return this.currentLocation=n,this.lastLocationUpdate=s,n}}catch(t){W.warn("Failed to load cached location:",t)}return null}getDefaultLocation(){return{address:"Jakarta, Indonesia",lat:-6.2088,lng:106.8456}}async requestLocationWithFallback(){W.info("üìç Requesting location with fallback options...");const t=this.loadCachedLocation();if(t)return W.info("üìç Using cached location:",t),t;try{const n=await this.getCurrentLocation();return W.info("‚úÖ GPS location successful:",n),n}catch(n){W.warn("‚ö†Ô∏è GPS location failed:",n);const s=n;s.isPermissionDenied?W.info("üìç Location permission denied, using default location"):s.isUnavailable?W.info("üìç GPS unavailable, using default location"):s.isTimeout&&W.info("üìç GPS timeout, using default location");const i=this.getDefaultLocation();return W.info("üìç Using default location:",i),i}}};Z(Fa,"instance");let ii=Fa;const Ju=ii.getInstance(),on={ID:{code:"IDR",symbol:"Rp",name:"Indonesian Rupiah",locale:"id-ID",decimals:0,thousandsSeparator:".",decimalSeparator:",",symbolPosition:"before",spaceAfterSymbol:!0},MY:{code:"MYR",symbol:"RM",name:"Malaysian Ringgit",locale:"ms-MY",decimals:2,thousandsSeparator:",",decimalSeparator:".",symbolPosition:"before",spaceAfterSymbol:!0},SG:{code:"SGD",symbol:"S$",name:"Singapore Dollar",locale:"en-SG",decimals:2,thousandsSeparator:",",decimalSeparator:".",symbolPosition:"before",spaceAfterSymbol:!1},TH:{code:"THB",symbol:"‡∏ø",name:"Thai Baht",locale:"th-TH",decimals:0,thousandsSeparator:",",decimalSeparator:".",symbolPosition:"before",spaceAfterSymbol:!1},PH:{code:"PHP",symbol:"‚Ç±",name:"Philippine Peso",locale:"en-PH",decimals:2,thousandsSeparator:",",decimalSeparator:".",symbolPosition:"before",spaceAfterSymbol:!1},VN:{code:"VND",symbol:"‚Ç´",name:"Vietnamese Dong",locale:"vi-VN",decimals:0,thousandsSeparator:".",decimalSeparator:",",symbolPosition:"after",spaceAfterSymbol:!0}},uo={ID:1,MY:29e-5,SG:87e-6,TH:.0022,PH:.0036,VN:1.63};class Qu{constructor(){Z(this,"currentCountry","ID")}setCountry(t){if(on[t]){this.currentCountry=t;try{localStorage.setItem("app_currency_country",t)}catch{}}else this.currentCountry="ID"}getCountry(){return this.currentCountry}getCurrency(t){const n=t||this.currentCountry;return on[n]||on.ID}convert(t,n){const s=n||this.currentCountry,i=uo[s]||1;return Math.round(t*i)}convertToIDR(t,n){const s=uo[n]||1;return Math.round(t/s)}formatPrice(t,n,s=!1){const i=this.getCurrency(n);if(s&&t>=1e3){const l=Math.round(t/1e3),o=i.symbolPosition==="before"?"".concat(i.symbol).concat(i.spaceAfterSymbol?" ":""):"".concat(i.spaceAfterSymbol?" ":"").concat(i.symbol);return i.symbolPosition==="before"?"".concat(o).concat(l,"k"):"".concat(l,"k").concat(o)}const r=t.toLocaleString(i.locale,{minimumFractionDigits:i.decimals,maximumFractionDigits:i.decimals});return i.symbolPosition==="before"?"".concat(i.symbol).concat(i.spaceAfterSymbol?" ":"").concat(r):"".concat(r).concat(i.spaceAfterSymbol?" ":"").concat(i.symbol)}formatFromIDR(t,n,s=!1){const i=n||this.currentCountry,r=this.convert(t,i);return this.formatPrice(r,i,s)}parsePrice(t,n){const s=this.getCurrency(n);let i=t.trim().replace(new RegExp(s.symbol,"g"),"").replace(/\s/g,"");if(i.toLowerCase().endsWith("k")){const r=i.slice(0,-1);return parseFloat(r.replace(/[.,]/g,""))*1e3}return i=i.replace(new RegExp("\\".concat(s.thousandsSeparator),"g"),"").replace(s.decimalSeparator,"."),parseFloat(i)||0}getSymbol(t){return this.getCurrency(t).symbol}getCode(t){return this.getCurrency(t).code}initialize(){try{const t=localStorage.getItem("app_currency_country");t&&on[t]&&(this.currentCountry=t)}catch{}}getAllCurrencies(){return Object.entries(on).map(([t,n])=>({country:t,currency:n}))}}const gn=new Qu;typeof window!="undefined"&&gn.initialize();const va=["ID","MY","SG","TH","PH","VN","GB","US","AU","DE"],bn="ID",Gn={ID:{lat:-2.5,lng:118},MY:{lat:4.2,lng:101.9},SG:{lat:1.35,lng:103.8},TH:{lat:15.87,lng:100.99},PH:{lat:12.88,lng:121.77},VN:{lat:14.06,lng:108.28},GB:{lat:51.51,lng:-.13},US:{lat:37.09,lng:-95.71},AU:{lat:-25.27,lng:133.78},DE:{lat:51.17,lng:10.45},AF:{lat:33.94,lng:67.71},AL:{lat:41.15,lng:20.17},DZ:{lat:28.03,lng:1.66},AR:{lat:-38.42,lng:-63.62},AT:{lat:47.52,lng:14.55},BD:{lat:23.68,lng:90.36},BE:{lat:50.5,lng:4.47},BN:{lat:4.54,lng:114.73},BR:{lat:-14.24,lng:-51.93},CA:{lat:56.13,lng:-106.35},CH:{lat:46.82,lng:8.23},CL:{lat:-35.68,lng:-71.54},CN:{lat:35.86,lng:104.2},CZ:{lat:49.82,lng:15.47},ES:{lat:40.46,lng:-3.75},FJ:{lat:-17.71,lng:178.07},FR:{lat:46.23,lng:2.21},HK:{lat:22.4,lng:114.11},IN:{lat:20.59,lng:78.96},IT:{lat:41.87,lng:12.57},JP:{lat:36.2,lng:138.25},KH:{lat:12.57,lng:104.99},KR:{lat:35.91,lng:127.77},LA:{lat:19.86,lng:102.5},LK:{lat:7.87,lng:80.77},MO:{lat:22.2,lng:113.54},MM:{lat:21.91,lng:95.96},MX:{lat:23.63,lng:-102.55},NL:{lat:52.13,lng:5.29},NP:{lat:28.39,lng:84.12},NZ:{lat:-40.9,lng:174.89},PG:{lat:-6.31,lng:143.96},PK:{lat:30.38,lng:69.35},PL:{lat:51.92,lng:19.15},RU:{lat:61.52,lng:105.32},TL:{lat:-8.87,lng:125.73},TW:{lat:23.7,lng:120.96}};function ri(a,t){const s=a.lat*Math.PI/180,i=t.lat*Math.PI/180,r=(t.lat-a.lat)*Math.PI/180,l=(t.lng-a.lng)*Math.PI/180,o=Math.sin(r/2)*Math.sin(r/2)+Math.cos(s)*Math.cos(i)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))}function mo(a,t,n){if(t!==void 0&&n!==void 0){const l={lat:t,lng:n};let o=bn,c=1/0;for(const d of va){const m=Gn[d];if(m){const p=ri(l,m);p<c&&(c=p,o=d)}}return o}const s=Gn[a];if(!s)return bn;let i=bn,r=1/0;for(const l of va){const o=Gn[l];if(o){const c=ri(s,o);c<r&&(r=c,i=l)}}return i}class Xu{constructor(){Z(this,"cachedLocation",null)}async getUserLocation(){const t=this.getSavedLocation();if(t)return t;const n=await this.detectCountryFromIP();return n||{countryCode:bn,countryName:"Indonesia",detected:!1,method:"default"}}async detectCountryFromIP(){const t=[this.detectFromCloudflare.bind(this),this.detectFromIPAPI.bind(this),this.detectFromIPInfo.bind(this)];for(const n of t)try{const s=await n();if(s)return this.cachedLocation=s,s}catch{continue}return null}async detectFromCloudflare(){try{const i=(await(await fetch("/cdn-cgi/trace")).text()).split("\n").find(r=>r.startsWith("loc="));if(i){const r=i.split("=")[1].trim();if(va.includes(r))return{countryCode:r,countryName:this.getCountryName(r),detected:!0,method:"ip"}}}catch{}return null}async detectFromIPAPI(){try{const t=await fetch("https://ipapi.co/json/",{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)throw new Error("IPAPI request failed");const n=await t.json(),s=n.country_code,i=n.latitude,r=n.longitude;if(s&&va.includes(s))return{countryCode:s,countryName:n.country_name||this.getCountryName(s),city:n.city,latitude:i,longitude:r,detected:!0,method:"ip"};if(s){const l=mo(s,i,r);return{countryCode:l,countryName:this.getCountryName(l),city:n.city,latitude:i,longitude:r,detected:!0,method:"nearest",detectedCountry:"".concat(n.country_name," (").concat(s,")")}}}catch{}return null}async detectFromIPInfo(){try{const t=await fetch("https://ipinfo.io/json");if(!t.ok)throw new Error("IPInfo request failed");const n=await t.json(),s=n.country;let i,r;if(n.loc){const[l,o]=n.loc.split(",").map(Number);i=l,r=o}if(s&&va.includes(s))return{countryCode:s,countryName:this.getCountryName(s),city:n.city,latitude:i,longitude:r,detected:!0,method:"ip"};if(s){const l=mo(s,i,r);return{countryCode:l,countryName:this.getCountryName(l),city:n.city,latitude:i,longitude:r,detected:!0,method:"nearest",detectedCountry:s}}}catch{}return null}saveLocation(t,n){try{const s={countryCode:t,countryName:this.getCountryName(t),city:n,detected:!1,method:"manual"};localStorage.setItem("user_location_preference",JSON.stringify(s)),this.cachedLocation=s}catch{}}getSavedLocation(){try{const t=localStorage.getItem("user_location_preference");if(t){const n=JSON.parse(t);return n.method="saved",n}}catch{}return null}clearSavedLocation(){try{localStorage.removeItem("user_location_preference"),this.cachedLocation=null}catch{}}getCountryName(t){return{ID:"Indonesia",MY:"Malaysia",SG:"Singapore",TH:"Thailand",PH:"Philippines",VN:"Vietnam",GB:"United Kingdom",US:"United States",AU:"Australia",DE:"Germany"}[t]||t}getCountryFlag(t){return{ID:"üáÆüá©",MY:"üá≤üáæ",SG:"üá∏üá¨",TH:"üáπüá≠",PH:"üáµüá≠",VN:"üáªüá≥",GB:"üá¨üáß",US:"üá∫üá∏",AU:"üá¶üá∫",DE:"üá©üá™"}[t]||"üåç"}isCountrySupported(t){return va.includes(t)}getSupportedCountries(){return va.map(t=>({code:t,name:this.getCountryName(t),flag:this.getCountryFlag(t)}))}getNearestCountry(t,n){const s={lat:t,lng:n};let i=bn,r=1/0;for(const l of va){const o=Gn[l];if(o){const c=ri(s,o);c<r&&(r=c,i=l)}}return{code:i,name:this.getCountryName(i),flag:this.getCountryFlag(i),distance:Math.round(r)}}}const ln=new Xu,Ti="user_location_context_v1",Ai=typeof window!="undefined"&&typeof window.localStorage!="undefined";function Zu(){if(!Ai)return null;try{const a=window.localStorage.getItem(Ti);if(!a)return null;const t=JSON.parse(a);if(t&&t.cityId&&t.cityName)return{cityId:t.cityId,cityName:t.cityName,latitude:typeof t.latitude=="number"?t.latitude:null,longitude:typeof t.longitude=="number"?t.longitude:null,locationText:typeof t.locationText=="string"?t.locationText:null,confirmedAt:t.confirmedAt||new Date().toISOString()}}catch{return null}return null}function em(a){var t;if(Ai)try{const n={cityId:a.cityId,cityName:a.cityName,latitude:typeof a.latitude=="number"?a.latitude:null,longitude:typeof a.longitude=="number"?a.longitude:null,locationText:(t=a.locationText)!=null?t:null,confirmedAt:a.confirmedAt||new Date().toISOString()};window.localStorage.setItem(Ti,JSON.stringify(n))}catch{}}function tm(){if(Ai)try{window.localStorage.removeItem(Ti)}catch{}}const kt={YOGYAKARTA:"yogyakarta",BANDUNG:"bandung",JAKARTA:"jakarta",SURABAYA:"surabaya",SEMARANG:"semarang",SOLO:"solo",MALANG:"malang",DENPASAR:"denpasar",MEDAN:"medan",MAKASSAR:"makassar",PALEMBANG:"palembang",ALL:"all"};function am(a){if(!a)return kt.ALL;const t=a.toLowerCase().trim();return t==="yogyakarta"||t==="jogja"||t==="yogya"||t==="djokja"||t==="jogjakarta"?kt.YOGYAKARTA:t==="bandung"||t==="bandoeng"?kt.BANDUNG:t==="jakarta"||t==="dki jakarta"||t==="batavia"?kt.JAKARTA:t==="denpasar"||t==="bali"?kt.DENPASAR:t==="surabaya"?kt.SURABAYA:t==="semarang"?kt.SEMARANG:t==="solo"||t==="surakarta"?kt.SOLO:t==="malang"?kt.MALANG:t==="medan"?kt.MEDAN:t==="makassar"||t==="ujung pandang"?kt.MAKASSAR:t==="palembang"?kt.PALEMBANG:t==="all"?kt.ALL:t}const wl=u.createContext(void 0),nm=()=>{if(typeof window=="undefined"||!window.localStorage)return null;try{const a=window.localStorage.getItem("user_city_id"),t=window.localStorage.getItem("user_city_name"),n=(a||t||"").trim();return n===""||n==="all"?null:n}catch{return null}},Rf=({children:a})=>{const t=Zu(),[n,s]=u.useState(()=>{var L;return(L=t==null?void 0:t.cityName)!=null?L:nm()}),[i,r]=u.useState("ID"),[l,o]=u.useState(!1),[c,d]=u.useState("default"),[m,p]=u.useState(null),[f,y]=u.useState(t),[I,P]=u.useState(!0),D=!!f;u.useEffect(()=>{(async()=>{try{const U=await ln.getUserLocation();p(U),r(U.countryCode),o(U.detected),d(U.method),!f&&U.city&&s(U.city),P(!1),gn.setCountry(U.countryCode)}catch{r("ID"),d("default"),p(null),P(!1),gn.setCountry("ID")}})()},[f]);const j=L=>{if(typeof window!="undefined"&&window.localStorage)try{window.localStorage.removeItem("user_location_preference"),window.localStorage.setItem("user_city_id",L),window.localStorage.setItem("user_city_name",L)}catch{}s(L),d("manual")},E=(L,U=!0)=>{r(L),gn.setCountry(L),d("manual"),U&&ln.saveLocation(L,n||void 0)},T=L=>{var Y,ae;const U=(Y=L.cityName)==null?void 0:Y.trim();if(!U)return;const H={cityId:am(L.cityId||U),cityName:U,latitude:typeof L.latitude=="number"?L.latitude:null,longitude:typeof L.longitude=="number"?L.longitude:null,locationText:(ae=L.locationText)!=null?ae:null,confirmedAt:new Date().toISOString()};s(U),y(H),em(H),ln.saveLocation(i,U),d("manual"),o(!1)},x=()=>{y(null),tm()},A=()=>{s(null),x()},S=async()=>{ln.clearSavedLocation();try{const L=await ln.getUserLocation();r(L.countryCode),o(L.detected),d(L.method),gn.setCountry(L.countryCode),s(null),x()}catch{}},_={country:(L=>({ID:"Indonesia",MY:"Malaysia",SG:"Singapore",TH:"Thailand",PH:"Philippines",VN:"Vietnam",GB:"United Kingdom",US:"United States",AU:"Australia",DE:"Germany"})[L]||"Indonesia")(i),countryCode:i,city:n,hasSelectedCity:!!n,hasConfirmedCity:D,confirmedLocation:f,autoDetected:l,detectionMethod:c,locationResult:m,setCity:j,setCountry:E,confirmLocation:T,clearConfirmedLocation:x,clearCity:A,clearCountry:S,isLoading:I};return e.jsx(wl.Provider,{value:_,children:a})},Ci=()=>{const a=u.useContext(wl);if(!a)throw new Error("useCityContext must be used within CityProvider");return a},la=[{category:"üèùÔ∏è Bali",cities:[{name:"Denpasar",locationId:"denpasar",province:"Bali",coordinates:{lat:-8.6705,lng:115.2126},isMainCity:!0,isTouristDestination:!0,aliases:["Denpasar Bali","Bali Capital"]},{name:"Ubud",locationId:"ubud",province:"Bali",coordinates:{lat:-8.5069,lng:115.2625},isMainCity:!1,isTouristDestination:!0,aliases:["Ubud Bali","Cultural Center Bali"]},{name:"Canggu",locationId:"canggu",province:"Bali",coordinates:{lat:-8.6482,lng:115.1436},isMainCity:!1,isTouristDestination:!0,aliases:["Canggu Beach","Surf Bali"]},{name:"Seminyak",locationId:"seminyak",province:"Bali",coordinates:{lat:-8.6953,lng:115.1668},isMainCity:!1,isTouristDestination:!0,aliases:["Seminyak Beach","Luxury Bali"]},{name:"Kuta",locationId:"kuta",province:"Bali",coordinates:{lat:-8.7205,lng:115.1693},isMainCity:!1,isTouristDestination:!0,aliases:["Kuta Beach","Airport Bali"]},{name:"Sanur",locationId:"sanur",province:"Bali",coordinates:{lat:-8.6882,lng:115.2613},isMainCity:!1,isTouristDestination:!0,aliases:["Sanur Beach","Sunrise Beach Bali"]},{name:"Nusa Dua",locationId:"nusa-dua",province:"Bali",coordinates:{lat:-8.7968,lng:115.2285},isMainCity:!1,isTouristDestination:!0,aliases:["Resort Area Bali","Luxury Hotels Bali"]},{name:"Jimbaran",locationId:"jimbaran",province:"Bali",coordinates:{lat:-8.7679,lng:115.1668},isMainCity:!1,isTouristDestination:!0,aliases:["Jimbaran Beach","Seafood Bali"]}]},{category:"üåã Java",cities:[{name:"Jakarta Pusat",locationId:"jakarta-pusat",province:"DKI Jakarta",coordinates:{lat:-6.1862,lng:106.8341},isMainCity:!0,isTouristDestination:!0,aliases:["Central Jakarta","Jakarta Central"]},{name:"Jakarta Barat",locationId:"jakarta-barat",province:"DKI Jakarta",coordinates:{lat:-6.1675,lng:106.76},isMainCity:!0,isTouristDestination:!1,aliases:["West Jakarta","Jakarta West"]},{name:"Jakarta Selatan",locationId:"jakarta-selatan",province:"DKI Jakarta",coordinates:{lat:-6.2615,lng:106.8106},isMainCity:!0,isTouristDestination:!1,aliases:["South Jakarta","Jakarta South"]},{name:"Jakarta Timur",locationId:"jakarta-timur",province:"DKI Jakarta",coordinates:{lat:-6.225,lng:106.9},isMainCity:!0,isTouristDestination:!1,aliases:["East Jakarta","Jakarta East"]},{name:"Jakarta Utara",locationId:"jakarta-utara",province:"DKI Jakarta",coordinates:{lat:-6.1385,lng:106.8827},isMainCity:!0,isTouristDestination:!1,aliases:["North Jakarta","Jakarta North"]},{name:"Jakarta",locationId:"jakarta",province:"DKI Jakarta",coordinates:{lat:-6.2088,lng:106.8456},isMainCity:!0,isTouristDestination:!0,aliases:["Jakarta Capital","DKI Jakarta","Betawi"]},{name:"Surabaya",locationId:"surabaya",province:"East Java",coordinates:{lat:-7.2575,lng:112.7521},isMainCity:!0,isTouristDestination:!1,aliases:["Surabaya East Java","City of Heroes"]},{name:"Bandung",locationId:"bandung",province:"West Java",coordinates:{lat:-6.9175,lng:107.6191},isMainCity:!0,isTouristDestination:!0,aliases:["Paris of Java","Bandung West Java"]},{name:"Yogyakarta",locationId:"yogyakarta",province:"DI Yogyakarta",coordinates:{lat:-7.7956,lng:110.3695},isMainCity:!0,isTouristDestination:!0,aliases:["Jogja","Yogya","Cultural Capital","DI Yogyakarta","Daerah Istimewa Yogyakarta"]},{name:"Semarang",locationId:"semarang",province:"Central Java",coordinates:{lat:-6.9667,lng:110.4167},isMainCity:!0,isTouristDestination:!1,aliases:["Semarang Central Java"]},{name:"Solo",locationId:"solo",province:"Central Java",coordinates:{lat:-7.5755,lng:110.8243},isMainCity:!0,isTouristDestination:!0,aliases:["Surakarta","Solo Surakarta","Solo Central Java"]},{name:"Malang",locationId:"malang",province:"East Java",coordinates:{lat:-7.9666,lng:112.6326},isMainCity:!1,isTouristDestination:!0,aliases:["Apple City","Malang East Java"]},{name:"Bekasi",locationId:"bekasi",province:"West Java",coordinates:{lat:-6.2349,lng:106.9896},isMainCity:!0,isTouristDestination:!1,aliases:["Bekasi West Java","Bekasi City"]},{name:"Depok",locationId:"depok",province:"West Java",coordinates:{lat:-6.4025,lng:106.7942},isMainCity:!1,isTouristDestination:!1,aliases:["Depok West Java","Depok City"]},{name:"Bogor",locationId:"bogor",province:"West Java",coordinates:{lat:-6.5944,lng:106.7892},isMainCity:!1,isTouristDestination:!0,aliases:["Rain City","Bogor West Java"]},{name:"Banyuwangi",locationId:"banyuwangi",province:"East Java",coordinates:{lat:-8.2191,lng:114.3689},isMainCity:!1,isTouristDestination:!0,aliases:["Ijen","Gateway to Bali","Sunrise Java","Blue Fire"]},{name:"Bromo Area",locationId:"bromo-area",province:"East Java",coordinates:{lat:-7.9425,lng:112.9531},isMainCity:!1,isTouristDestination:!0,aliases:["Mount Bromo","Bromo Tengger Semeru","Probolinggo"]},{name:"Karimunjawa",locationId:"karimunjawa",province:"Central Java",coordinates:{lat:-5.8406,lng:110.4203},isMainCity:!1,isTouristDestination:!0,aliases:["Karimun Java","Marine Park","Island Paradise"]}]},{category:"üåä Lombok & Gili",cities:[{name:"Mataram",locationId:"mataram",province:"West Nusa Tenggara",coordinates:{lat:-8.5833,lng:116.1167},isMainCity:!0,isTouristDestination:!1,aliases:["Lombok Capital"]},{name:"Senggigi",locationId:"senggigi",province:"West Nusa Tenggara",coordinates:{lat:-8.4864,lng:116.0447},isMainCity:!1,isTouristDestination:!0,aliases:["Senggigi Beach","Lombok Beach"]},{name:"Gili Trawangan",locationId:"gili-trawangan",province:"West Nusa Tenggara",coordinates:{lat:-8.3486,lng:116.0289},isMainCity:!1,isTouristDestination:!0,aliases:["Gili T","Party Island"]},{name:"Gili Air",locationId:"gili-air",province:"West Nusa Tenggara",coordinates:{lat:-8.3586,lng:116.0339},isMainCity:!1,isTouristDestination:!0,aliases:["Gili A"]},{name:"Gili Meno",locationId:"gili-meno",province:"West Nusa Tenggara",coordinates:{lat:-8.3531,lng:116.0306},isMainCity:!1,isTouristDestination:!0,aliases:["Gili M","Quiet Island"]}]},{category:"ü¶é Flores & Komodo",cities:[{name:"Labuan Bajo",locationId:"labuan-bajo",province:"East Nusa Tenggara",coordinates:{lat:-8.4964,lng:119.8877},isMainCity:!1,isTouristDestination:!0,aliases:["Komodo Gateway","Flores Airport"]},{name:"Ende",locationId:"ende",province:"East Nusa Tenggara",coordinates:{lat:-8.8432,lng:121.6616},isMainCity:!1,isTouristDestination:!0,aliases:["Ende Flores"]},{name:"Maumere",locationId:"maumere",province:"East Nusa Tenggara",coordinates:{lat:-8.6167,lng:122.2167},isMainCity:!1,isTouristDestination:!0,aliases:["Maumere Flores"]}]},{category:"ü¶Ä Sumatra",cities:[{name:"Medan",locationId:"medan",province:"North Sumatra",coordinates:{lat:3.5952,lng:98.6722},isMainCity:!0,isTouristDestination:!1,aliases:["Medan North Sumatra"]},{name:"Palembang",locationId:"palembang",province:"South Sumatra",coordinates:{lat:-2.9761,lng:104.7754},isMainCity:!0,isTouristDestination:!1,aliases:["Palembang South Sumatra"]},{name:"Padang",locationId:"padang",province:"West Sumatra",coordinates:{lat:-.9492,lng:100.3543},isMainCity:!0,isTouristDestination:!0,aliases:["Padang West Sumatra","Minang"]},{name:"Pekanbaru",locationId:"pekanbaru",province:"Riau",coordinates:{lat:.5333,lng:101.45},isMainCity:!0,isTouristDestination:!1,aliases:["Pekanbaru Riau"]},{name:"Bandar Lampung",locationId:"bandar-lampung",province:"Lampung",coordinates:{lat:-5.4292,lng:105.261},isMainCity:!0,isTouristDestination:!1,aliases:["Lampung Capital"]},{name:"Lake Toba",locationId:"lake-toba",province:"North Sumatra",coordinates:{lat:2.6845,lng:98.8756},isMainCity:!1,isTouristDestination:!0,aliases:["Danau Toba","Toba Lake","Batak Land"]},{name:"Banda Aceh",locationId:"banda-aceh",province:"Aceh",coordinates:{lat:5.5483,lng:95.3238},isMainCity:!0,isTouristDestination:!0,aliases:["Aceh Capital","Tsunami Memorial","Baiturrahman Mosque"]},{name:"Sabang (Weh Island)",locationId:"sabang",province:"Aceh",coordinates:{lat:5.8933,lng:95.3194},isMainCity:!1,isTouristDestination:!0,aliases:["Weh Island","Sabang","Diving Aceh","Iboih Beach"]},{name:"Nias Island",locationId:"nias-island",province:"North Sumatra",coordinates:{lat:1.0833,lng:97.6167},isMainCity:!1,isTouristDestination:!0,aliases:["Nias","Surf Island","Nias Surf","Lagundri Bay"]},{name:"Bukittinggi",locationId:"bukittinggi",province:"West Sumatra",coordinates:{lat:-.3055,lng:100.3693},isMainCity:!1,isTouristDestination:!0,aliases:["Bukittinggi Minang","Jam Gadang","Fort de Kock"]},{name:"Jambi",locationId:"jambi",province:"Jambi",coordinates:{lat:-1.6101,lng:103.6131},isMainCity:!0,isTouristDestination:!1,aliases:["Jambi Capital"]},{name:"Bengkulu",locationId:"bengkulu",province:"Bengkulu",coordinates:{lat:-3.7928,lng:102.2608},isMainCity:!0,isTouristDestination:!1,aliases:["Bengkulu Capital"]},{name:"Dumai",locationId:"dumai",province:"Riau",coordinates:{lat:1.6851,lng:101.45},isMainCity:!1,isTouristDestination:!1,aliases:["Dumai Riau","Oil City"]},{name:"Batam",locationId:"batam-sumatra",province:"Riau Islands",coordinates:{lat:1.1307,lng:104.053},isMainCity:!0,isTouristDestination:!0,aliases:["Batam Island","Singapore Gateway"]},{name:"Tanjung Pinang",locationId:"tanjung-pinang",province:"Riau Islands",coordinates:{lat:.9167,lng:104.45},isMainCity:!0,isTouristDestination:!0,aliases:["Tanjung Pinang Riau Islands"]},{name:"Pangkal Pinang",locationId:"pangkal-pinang",province:"Bangka Belitung",coordinates:{lat:-2.1316,lng:106.117},isMainCity:!0,isTouristDestination:!1,aliases:["Bangka Belitung Capital"]},{name:"Binjai",locationId:"binjai",province:"North Sumatra",coordinates:{lat:3.6,lng:98.4833},isMainCity:!1,isTouristDestination:!1,aliases:["Binjai North Sumatra"]},{name:"Pematang Siantar",locationId:"pematang-siantar",province:"North Sumatra",coordinates:{lat:2.9667,lng:99.0667},isMainCity:!1,isTouristDestination:!1,aliases:["Pematang Siantar North Sumatra"]},{name:"Lubuklinggau",locationId:"lubuklinggau",province:"South Sumatra",coordinates:{lat:-3.3,lng:102.8667},isMainCity:!1,isTouristDestination:!1,aliases:["Lubuklinggau South Sumatra"]},{name:"Mentawai Islands",locationId:"mentawai-islands",province:"West Sumatra",coordinates:{lat:-1.8833,lng:99.1},isMainCity:!1,isTouristDestination:!0,aliases:["Mentawai","Surf Paradise","Siberut Island"]}]},{category:"üê® Kalimantan",cities:[{name:"Banjarmasin",locationId:"banjarmasin",province:"South Kalimantan",coordinates:{lat:-3.3194,lng:114.5906},isMainCity:!0,isTouristDestination:!1,aliases:["Banjarmasin South Kalimantan"]},{name:"Balikpapan",locationId:"balikpapan",province:"East Kalimantan",coordinates:{lat:-1.2379,lng:116.8529},isMainCity:!0,isTouristDestination:!1,aliases:["Balikpapan East Kalimantan"]},{name:"Pontianak",locationId:"pontianak",province:"West Kalimantan",coordinates:{lat:-.0263,lng:109.3425},isMainCity:!0,isTouristDestination:!1,aliases:["Pontianak West Kalimantan","Equator City"]},{name:"Palangka Raya",locationId:"palangka-raya",province:"Central Kalimantan",coordinates:{lat:-2.2136,lng:113.9209},isMainCity:!0,isTouristDestination:!1,aliases:["Palangka Raya Central Kalimantan"]},{name:"Samarinda",locationId:"samarinda",province:"East Kalimantan",coordinates:{lat:-.5017,lng:117.1536},isMainCity:!0,isTouristDestination:!1,aliases:["Samarinda East Kalimantan"]},{name:"Tarakan",locationId:"tarakan",province:"North Kalimantan",coordinates:{lat:3.3,lng:117.6333},isMainCity:!0,isTouristDestination:!1,aliases:["Tarakan North Kalimantan"]},{name:"Singkawang",locationId:"singkawang",province:"West Kalimantan",coordinates:{lat:.9083,lng:108.975},isMainCity:!1,isTouristDestination:!0,aliases:["Singkawang Beach","Chinese Heritage Kalimantan"]}]},{category:"ü¶Ö Sulawesi",cities:[{name:"Makassar",locationId:"makassar",province:"South Sulawesi",coordinates:{lat:-5.1477,lng:119.4327},isMainCity:!0,isTouristDestination:!0,aliases:["Ujung Pandang","Makassar South Sulawesi"]},{name:"Manado",locationId:"manado",province:"North Sulawesi",coordinates:{lat:1.4748,lng:124.8421},isMainCity:!0,isTouristDestination:!0,aliases:["Manado North Sulawesi","Bunaken Gateway"]},{name:"Palu",locationId:"palu",province:"Central Sulawesi",coordinates:{lat:-.8917,lng:119.8707},isMainCity:!0,isTouristDestination:!1,aliases:["Palu Central Sulawesi"]},{name:"Kendari",locationId:"kendari",province:"Southeast Sulawesi",coordinates:{lat:-3.945,lng:122.4989},isMainCity:!0,isTouristDestination:!1,aliases:["Kendari Southeast Sulawesi"]},{name:"Mamuju",locationId:"mamuju",province:"West Sulawesi",coordinates:{lat:-2.6794,lng:118.8889},isMainCity:!0,isTouristDestination:!1,aliases:["Mamuju West Sulawesi"]},{name:"Gorontalo",locationId:"gorontalo",province:"Gorontalo",coordinates:{lat:.5435,lng:123.0664},isMainCity:!0,isTouristDestination:!1,aliases:["Gorontalo Province"]},{name:"Bunaken",locationId:"bunaken",province:"North Sulawesi",coordinates:{lat:1.6167,lng:124.7833},isMainCity:!1,isTouristDestination:!0,aliases:["Bunaken Island","Diving Paradise","Marine Park Manado"]},{name:"Toraja (Rantepao)",locationId:"toraja",province:"South Sulawesi",coordinates:{lat:-2.9667,lng:119.9},isMainCity:!1,isTouristDestination:!0,aliases:["Tana Toraja","Rantepao","Traditional Culture","Tongkonan"]},{name:"Wakatobi",locationId:"wakatobi",province:"Southeast Sulawesi",coordinates:{lat:-5.4833,lng:123.6},isMainCity:!1,isTouristDestination:!0,aliases:["Wakatobi Islands","Diving Sulawesi","Marine Reserve"]},{name:"Bitung",locationId:"bitung",province:"North Sulawesi",coordinates:{lat:1.45,lng:125.1833},isMainCity:!1,isTouristDestination:!1,aliases:["Bitung Port","North Sulawesi Port"]}]},{category:"üèõÔ∏è Papua & Maluku",cities:[{name:"Jayapura",locationId:"jayapura",province:"Papua",coordinates:{lat:-2.5355,lng:140.7166},isMainCity:!0,isTouristDestination:!0,aliases:["Jayapura Papua","Papua Capital"]},{name:"Sorong",locationId:"sorong",province:"West Papua",coordinates:{lat:-.8833,lng:131.25},isMainCity:!0,isTouristDestination:!0,aliases:["Sorong West Papua","Raja Ampat Gateway"]},{name:"Raja Ampat",locationId:"raja-ampat",province:"West Papua",coordinates:{lat:-.2333,lng:130.5167},isMainCity:!1,isTouristDestination:!0,aliases:["Four Kings","Diving Mecca","Marine Biodiversity","Waisai"]},{name:"Ambon",locationId:"ambon",province:"Maluku",coordinates:{lat:-3.6954,lng:128.1814},isMainCity:!0,isTouristDestination:!0,aliases:["Ambon Maluku","Spice Islands"]},{name:"Ternate",locationId:"ternate",province:"North Maluku",coordinates:{lat:.7833,lng:127.3667},isMainCity:!0,isTouristDestination:!0,aliases:["Ternate North Maluku","Clove Island"]},{name:"Merauke",locationId:"merauke",province:"Papua",coordinates:{lat:-8.4667,lng:140.3167},isMainCity:!1,isTouristDestination:!1,aliases:["Merauke Papua","Easternmost Indonesia"]},{name:"Manokwari",locationId:"manokwari",province:"West Papua",coordinates:{lat:-.87,lng:134.0839},isMainCity:!1,isTouristDestination:!0,aliases:["Manokwari West Papua","Cenderawasih Bay"]},{name:"Banda Islands",locationId:"banda-islands",province:"Maluku",coordinates:{lat:-4.5167,lng:129.8833},isMainCity:!1,isTouristDestination:!0,aliases:["Banda Naira","Nutmeg Islands","Historic Spice Trade"]}]},{category:"üå¥ More Java Cities",cities:[{name:"Tasikmalaya",locationId:"tasikmalaya",province:"West Java",coordinates:{lat:-7.3506,lng:108.2111},isMainCity:!1,isTouristDestination:!1,aliases:["Tasikmalaya West Java"]},{name:"Cirebon",locationId:"cirebon",province:"West Java",coordinates:{lat:-6.7063,lng:108.5571},isMainCity:!1,isTouristDestination:!0,aliases:["Cirebon West Java","Batik City"]},{name:"Sukabumi",locationId:"sukabumi",province:"West Java",coordinates:{lat:-6.9175,lng:106.9269},isMainCity:!1,isTouristDestination:!1,aliases:["Sukabumi West Java"]},{name:"Purwokerto",locationId:"purwokerto",province:"Central Java",coordinates:{lat:-7.4197,lng:109.2342},isMainCity:!1,isTouristDestination:!1,aliases:["Purwokerto Central Java","Banyumas"]},{name:"Tegal",locationId:"tegal",province:"Central Java",coordinates:{lat:-6.8694,lng:109.1402},isMainCity:!1,isTouristDestination:!1,aliases:["Tegal Central Java"]},{name:"Magelang",locationId:"magelang",province:"Central Java",coordinates:{lat:-7.483,lng:110.2181},isMainCity:!1,isTouristDestination:!0,aliases:["Magelang Central Java","Borobudur Gateway"]},{name:"Salatiga",locationId:"salatiga",province:"Central Java",coordinates:{lat:-7.3318,lng:110.492},isMainCity:!1,isTouristDestination:!1,aliases:["Salatiga Central Java"]},{name:"Jember",locationId:"jember",province:"East Java",coordinates:{lat:-8.1721,lng:113.7038},isMainCity:!1,isTouristDestination:!1,aliases:["Jember East Java"]},{name:"Kediri",locationId:"kediri",province:"East Java",coordinates:{lat:-7.8186,lng:112.0169},isMainCity:!1,isTouristDestination:!1,aliases:["Kediri East Java"]},{name:"Blitar",locationId:"blitar",province:"East Java",coordinates:{lat:-8.0956,lng:112.1681},isMainCity:!1,isTouristDestination:!0,aliases:["Blitar East Java","Soekarno Grave"]},{name:"Probolinggo",locationId:"probolinggo",province:"East Java",coordinates:{lat:-7.7543,lng:113.2159},isMainCity:!1,isTouristDestination:!0,aliases:["Probolinggo East Java","Bromo Gateway"]},{name:"Mount Bromo",locationId:"mount-bromo",province:"East Java",coordinates:{lat:-7.9425,lng:112.953},isMainCity:!1,isTouristDestination:!0,aliases:["Bromo","Bromo Tengger Semeru","Cemoro Lawang"]},{name:"Karimunjawa",locationId:"karimunjawa",province:"Central Java",coordinates:{lat:-5.8333,lng:110.4167},isMainCity:!1,isTouristDestination:!0,aliases:["Karimunjawa Islands","Java Sea Paradise"]}]}],jn=la.flatMap(a=>a.cities);jn.filter(a=>a.isTouristDestination);jn.filter(a=>a.isMainCity);function sm(a){const t=a.toLowerCase().trim();return jn.find(n=>{var s;return!!(n.name.toLowerCase()===t||(s=n.aliases)!=null&&s.some(i=>i.toLowerCase()===t))})||null}function Bf(a){if(!a||typeof a!="string")return null;const t=a.toLowerCase().trim(),n=jn.find(s=>s.locationId===t);return n||sm(a)}function im(a,t){const s=(t.lat-a.lat)*(Math.PI/180),i=(t.lng-a.lng)*(Math.PI/180),r=Math.sin(s/2)*Math.sin(s/2)+Math.cos(a.lat*(Math.PI/180))*Math.cos(t.lat*(Math.PI/180))*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))}function rm(a,t=50,n=5){return jn.map(s=>({...s,distance:im(a,s.coordinates)})).filter(s=>s.distance<=t).sort((s,i)=>s.distance-i.distance).slice(0,n).map(({distance:s,...i})=>i)}function om(a,t=25){const n=rm(a,t,1);return n.length>0?n[0]:null}function Lf(a,t,n=50){return om({lat:a,lng:t},n)}const go=4.8,lm=0,cm=(a,t)=>!t||t===0||!a||a<=0?go:a,Of=a=>a||lm,dm=a=>a.toFixed(1);class um{constructor(){Z(this,"indexes",new Map);Z(this,"queryOptimizations",[]);Z(this,"connectionPools",new Map);Z(this,"slowQueries",[]);Z(this,"queryHistory",[]);Z(this,"initialized",!1);Z(this,"thresholds",{slowQueryMs:1e3,indexEffectivenessMin:70,connectionPoolUtilizationMax:80,maxSlowQueriesPerMinute:5});queueMicrotask(()=>{this.initialize()})}initialize(){this.initialized||(this.initializeCriticalIndexes(),this.initializeConnectionPools(),this.startOptimizationMonitoring(),this.initialized=!0,W.info("üè¢ Enterprise database service initialized"))}initializeCriticalIndexes(){W.info("üóÇÔ∏è Initializing critical database indexes..."),this.addIndex("bookings",{therapistId:1,startTime:1},"therapist_starttime_compound",!0),this.addIndex("bookings",{clientId:1,status:1},"client_status_compound",!0),this.addIndex("bookings",{createdAt:-1},"created_desc_single"),this.addIndex("bookings",{status:1,updatedAt:-1},"status_updated_compound"),this.addIndex("chat_messages",{bookingId:1,timestamp:1},"booking_timestamp_compound",!0),this.addIndex("chat_messages",{senderId:1,receiverId:1,timestamp:-1},"participants_timestamp_compound",!0),this.addIndex("users",{email:1},"email_unique",!1,!0),this.addIndex("users",{role:1,isActive:1},"role_active_compound"),this.addIndex("users",{"location.city":1,"location.area":1},"location_compound"),this.addIndex("commission_records",{therapistId:1,period:1},"therapist_period_compound",!0),this.addIndex("commission_records",{status:1,dueDate:1},"status_due_compound"),this.addIndex("reviews",{therapistId:1,rating:-1},"therapist_rating_compound"),this.addIndex("reviews",{clientId:1,createdAt:-1},"client_created_compound"),W.info("‚úÖ Initialized ".concat(this.getTotalIndexCount()," database indexes"))}addIndex(t,n,s,i=!1,r=!1,l=!1){this.indexes.has(t)||this.indexes.set(t,[]);const o={collection:t,fields:n,name:s,unique:r,sparse:l,compound:i,created:new Date,usage:{totalQueries:0,avgQueryTime:0,lastUsed:new Date,effectiveness:85+Math.random()*15}};this.indexes.get(t).push(o),W.info("üìä Added index [".concat(t,".").concat(s,"]: ").concat(Object.keys(n).join(", ")))}initializeConnectionPools(){const t=[{id:"primary",maxConnections:10},{id:"readonly",maxConnections:5},{id:"analytics",maxConnections:3}];t.forEach(n=>{const s={id:n.id,maxConnections:n.maxConnections,activeConnections:Math.floor(Math.random()*n.maxConnections*.3),queuedRequests:0,avgResponseTime:50+Math.random()*100,totalQueries:Math.floor(Math.random()*1e4),errors:Math.floor(Math.random()*10),lastActivity:new Date};this.connectionPools.set(n.id,s)}),W.info("üèä Initialized ".concat(t.length," connection pools"))}startOptimizationMonitoring(){setInterval(()=>{this.analyzeQueryPatterns(),this.updateIndexUsage(),this.checkDatabaseHealth()},3e4),setInterval(()=>{this.cleanupOldData()},3e5),W.info("üîç Database optimization monitoring started")}recordQuery(t){if(!this.initialized)return;const n={collection:t.collection,operation:t.operation,duration:t.duration,timestamp:new Date,filters:t.filters};this.queryHistory.push(n),this.updateConnectionPoolStats(t.duration),t.duration>this.thresholds.slowQueryMs&&this.recordSlowQuery(t),this.trackIndexUsage(t.collection,t.filters||{}),this.suggestQueryOptimization(t)}recordSlowQuery(t){const n={id:this.generateQueryId(),collection:t.collection,operation:t.operation,query:t.filters||{},executionTime:t.duration,timestamp:new Date,optimizationSuggestions:this.generateOptimizationSuggestions(t),indexSuggestions:this.generateIndexSuggestions(t.collection,t.filters||{})};this.slowQueries.push(n),W.warn("üêå Slow query detected: ".concat(t.collection,".").concat(t.operation," (").concat(t.duration,"ms)"));const s=this.slowQueries.filter(i=>Date.now()-i.timestamp.getTime()<6e4);s.length>this.thresholds.maxSlowQueriesPerMinute&&W.error("üö® CRITICAL: ".concat(s.length," slow queries in the last minute"))}generateOptimizationSuggestions(t){const n=[],s=t.filters||{};if(Object.keys(s).length>0){const i=this.indexes.get(t.collection)||[],r=Object.keys(s);i.some(o=>{const c=Object.keys(o.fields);return r.some(d=>c.includes(d))})||n.push("Add index for fields: ".concat(r.join(", ")))}switch(t.operation==="list"&&(n.push("Consider adding pagination to limit result set"),n.push("Use projection to fetch only required fields")),(t.operation==="update"||t.operation==="delete")&&n.push("Ensure update/delete filters use indexed fields"),t.collection){case"bookings":n.push("Consider partitioning by date for large historical datasets");break;case"chat_messages":n.push("Implement message archival for old conversations");break;case"users":n.push("Use sparse indexes for optional fields");break}return n}generateIndexSuggestions(t,n){const s=[],i=Object.keys(n);if(i.length===0)return s;if(i.forEach(r=>{(this.indexes.get(t)||[]).some(c=>Object.keys(c.fields).includes(r))||s.push({collection:t,fields:{[r]:1},name:"".concat(r,"_single"),created:new Date,usage:{totalQueries:0,avgQueryTime:0,lastUsed:new Date,effectiveness:90}})}),i.length>1){const r={};i.forEach(l=>{r[l]=1}),s.push({collection:t,fields:r,name:"".concat(i.join("_"),"_compound"),compound:!0,created:new Date,usage:{totalQueries:0,avgQueryTime:0,lastUsed:new Date,effectiveness:85}})}return s}suggestQueryOptimization(t){if(t.duration<500)return;const n={queryId:this.generateQueryId(),collection:t.collection,operation:t.operation,originalQuery:t.filters||{},optimizedQuery:this.generateOptimizedQuery(t.filters||{}),estimatedImprovement:this.calculateEstimatedImprovement(t),suggestedIndexes:this.generateIndexSuggestions(t.collection,t.filters||{}),reasoning:this.generateOptimizationReasoning(t),implemented:!1,timestamp:new Date};this.queryOptimizations.push(n)}generateOptimizedQuery(t){const n={...t};return Object.keys(n).forEach(s=>{if(typeof n[s]=="string"&&(s.includes("name")||s.includes("description"))&&(n.$text={$search:n[s]},delete n[s]),(s.includes("date")||s.includes("time"))&&typeof n[s]=="object"&&!n[s].$gte&&!n[s].$lte){const i=new Date(n[s]),r=new Date(i.setHours(0,0,0,0)),l=new Date(i.setHours(23,59,59,999));n[s]={$gte:r,$lte:l}}}),n}calculateEstimatedImprovement(t){const n=t.filters||{},s=this.indexes.get(t.collection)||[],i=Object.keys(n);let r=0;switch(!s.some(o=>{const c=Object.keys(o.fields);return i.every(d=>c.includes(d))})&&i.length>0&&(r+=40),t.duration>2e3?r+=30:t.duration>1e3&&(r+=20),t.collection){case"bookings":case"chat_messages":r+=15;break;case"users":r+=10;break}return Math.min(r,85)}generateOptimizationReasoning(t){const n=[],s=t.filters||{};return t.duration>this.thresholds.slowQueryMs&&n.push("Query execution time (".concat(t.duration,"ms) exceeds optimal threshold")),Object.keys(s).length>0&&n.push("Query uses filters that could benefit from indexing"),t.operation==="list"&&n.push("List operations should use pagination and field projection"),n.push("".concat(t.collection," collection queries can be optimized with proper indexing strategy")),n}updateConnectionPoolStats(t){const n=this.connectionPools.get("primary");n&&(n.totalQueries++,n.avgResponseTime=(n.avgResponseTime+t)/2,n.lastActivity=new Date,t>1e3&&(n.activeConnections=Math.min(n.maxConnections,n.activeConnections+1)))}trackIndexUsage(t,n){const s=this.indexes.get(t)||[],i=Object.keys(n);s.forEach(r=>{const l=Object.keys(r.fields);if(i.some(c=>l.includes(c))){r.usage.totalQueries++,r.usage.lastUsed=new Date;const c=100+Math.random()*200;r.usage.avgQueryTime=(r.usage.avgQueryTime+c)/2}})}analyzeQueryPatterns(){if(this.queryHistory.length<10)return;const t=this.queryHistory.slice(-100),n={slowQueryRate:t.filter(s=>s.duration>this.thresholds.slowQueryMs).length/t.length,avgQueryTime:t.reduce((s,i)=>s+i.duration,0)/t.length,mostQueriedCollections:this.getMostQueriedCollections(t),peakUsageTime:this.detectPeakUsage(t)};W.info("üìà Query pattern analysis:",n)}updateIndexUsage(){this.indexes.forEach(t=>{t.forEach(n=>{(Date.now()-n.usage.lastUsed.getTime())/(1e3*60*60)>24?n.usage.effectiveness=Math.max(0,n.usage.effectiveness-5):n.usage.totalQueries>0&&(n.usage.effectiveness=Math.min(100,n.usage.effectiveness+2))})})}checkDatabaseHealth(){const t=this.queryHistory.slice(-50),n=t.length>0?t.reduce((m,p)=>m+p.duration,0)/t.length:0,s=this.slowQueries.filter(m=>Date.now()-m.timestamp.getTime()<3e5).length,i=this.calculateIndexUtilization(),r=this.calculateConnectionPoolUsage(),l=this.calculateErrorRate();let o="optimal";const c=[];return(n>1500||s>3||i<50)&&(o="degraded",c.push("Database performance is below optimal levels")),(n>3e3||s>10||l>5)&&(o="critical",c.push("Immediate database optimization required")),i<this.thresholds.indexEffectivenessMin&&c.push("Review and optimize database indexes"),s>0&&c.push("Optimize ".concat(s," slow queries detected")),r>this.thresholds.connectionPoolUtilizationMax&&c.push("Consider increasing connection pool size"),{status:o,metrics:{avgQueryTime:n,slowQueryCount:s,indexUtilization:i,connectionPoolUsage:r,errorRate:l},recommendations:c,timestamp:new Date}}calculateIndexUtilization(){let t=0,n=0;return this.indexes.forEach(s=>{s.forEach(i=>{t++,n+=i.usage.effectiveness})}),t>0?n/t:0}calculateConnectionPoolUsage(){let t=0,n=0;return this.connectionPools.forEach(s=>{t+=s.maxConnections,n+=s.activeConnections}),t>0?n/t*100:0}calculateErrorRate(){let t=0,n=0;return this.connectionPools.forEach(s=>{t+=s.totalQueries,n+=s.errors}),t>0?n/t*100:0}getMostQueriedCollections(t){const n={};return t.forEach(s=>{n[s.collection]=(n[s.collection]||0)+1}),Object.fromEntries(Object.entries(n).sort(([,s],[,i])=>i-s).slice(0,5))}detectPeakUsage(t){const n=new Array(24).fill(0);t.forEach(i=>{const r=i.timestamp.getHours();n[r]++});const s=n.indexOf(Math.max(...n));return"".concat(s,":00-").concat((s+1)%24,":00")}cleanupOldData(){const t=Date.now()-36e5;this.queryHistory=this.queryHistory.filter(n=>n.timestamp.getTime()>t),this.slowQueries=this.slowQueries.filter(n=>n.timestamp.getTime()>t),this.queryOptimizations=this.queryOptimizations.filter(n=>n.timestamp.getTime()>t)}getTotalIndexCount(){let t=0;return this.indexes.forEach(n=>{t+=n.length}),t}generateQueryId(){return"query_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}getOptimizationReport(){const t=this.checkDatabaseHealth(),n=this.queryHistory.slice(-100),s={totalIndexes:this.getTotalIndexCount(),slowQueryCount:this.slowQueries.length,avgQueryTime:n.length>0?n.reduce((i,r)=>i+r.duration,0)/n.length:0,indexUtilization:this.calculateIndexUtilization()};return{indexes:this.indexes,slowQueries:this.slowQueries,optimizationSuggestions:this.queryOptimizations,connectionPools:this.connectionPools,health:t,summary:s}}}const mm=new um,po=(a,t,n,s,i)=>{mm.recordQuery({collection:a,operation:t,duration:n,filters:s,resultCount:i})},vt={IDLE:"idle",REGISTERING:"registering",SEARCHING:"searching",PENDING_ACCEPT:"pending_accept",ACTIVE:"active",CANCELLED:"cancelled",COMPLETED:"completed"},gm=30;function Pi(a){if(!a)return vt.PENDING_ACCEPT;const t=a.toLowerCase().trim(),s={pending:vt.PENDING_ACCEPT,pending_accept:vt.PENDING_ACCEPT,requested:vt.PENDING_ACCEPT,idle:vt.IDLE,registering:vt.REGISTERING,searching:vt.SEARCHING,active:vt.ACTIVE,confirmed:vt.ACTIVE,cancelled:vt.CANCELLED,completed:vt.COMPLETED}[t];return s||vt.PENDING_ACCEPT}const Ea=()=>N.databaseId,Ma=()=>N.collections.bookings;function pm(){const a=Date.now(),t=Math.random().toString(36).substring(2,8);return"BK".concat(a).concat(t).toUpperCase()}function hm(a){var r;const t={userId:a.userId||a.customerId||"anonymous",status:Pi(a.status),therapistId:a.therapistId,providerId:a.therapistId||a.providerId,service:a.serviceType||"Traditional Massage",serviceDuration:a.serviceDuration||((r=a.duration)==null?void 0:r.toString()),location:a.location||a.address||a.locationZone,price:a.price||a.totalPrice,customerName:a.customerName,customerWhatsApp:a.customerWhatsApp,bookingDate:a.date||a.bookingDate||new Date().toISOString()},n=[];if(Object.entries(t).forEach(([l,o])=>{(o==null||o==="")&&n.push(l)}),n.length>0)throw new Error("Missing required booking fields: ".concat(n.join(", "),". Cannot create booking without these fields. Check your booking data."));const s=["idle","registering","searching","pending_accept","active","cancelled","completed"];if(!s.includes(t.status))throw new Error("Invalid status: ".concat(t.status,". Must be one of: ").concat(s.join(", ")));const i=["60","90","120"];if(!i.includes(t.serviceDuration))throw new Error("Invalid serviceDuration: ".concat(t.serviceDuration,". Must be one of: ").concat(i.join(", ")))}const fa={async createBooking(a){try{hm(a);const t=new Date,n=new Date(t.getTime()-600*1e3),i=(await J.listDocuments(Ea(),Ma(),[b.equal("therapistId",a.therapistId),b.limit(20)])).documents.filter(m=>{const f=new Date(m.$createdAt)>n,y=m.customerWhatsApp===a.customerWhatsApp,I=m.time===a.time&&m.date===a.date,P=m.status==="pending_accept"||m.status==="active";return f&&y&&I&&P});if(i.length>0)throw new Error("Duplicate booking detected. A booking for this customer with the same therapist and time already exists (".concat(i[0].bookingId,"). This prevents accidental double bookings from UI bugs or retries."));const r=pm(),l=new Date().toISOString(),o={customerId:a.customerId||a.userId||"anonymous",userId:a.customerId||a.userId||"anonymous",customerphone:a.customerphone||a.customerWhatsApp||"",servicetype:a.serviceType||"Traditional Massage",locationtype:a.locationType||a.locationtype||"home",roomnumber:a.roomnumber||a.roomNumber||"",status:Pi(a.status)||vt.PENDING_ACCEPT,therapistId:a.therapistId,location:a.location||a.address||a.locationZone||"Unknown Location",price:Math.round((a.price||a.totalPrice)/1e3),customerName:a.customerName,customerWhatsApp:a.customerWhatsApp,duration:a.duration,address:a.address,bookingId:r,bookingDate:a.date||a.bookingDate||new Date().toISOString(),time:a.time||new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),service:(a.serviceType||"Traditional Massage").substring(0,16),startTime:a.time||new Date().toISOString(),responseDeadline:a.responseDeadline||new Date(Date.now()+300*1e3).toISOString(),responcedeadline:a.responseDeadline||new Date(Date.now()+300*1e3).toISOString(),createdAt:new Date().toISOString(),providerId:(()=>{if(!a.therapistAppwriteId)throw new Error("CRITICAL: Missing therapistAppwriteId (Appwrite document ID). Cannot create booking without valid provider document ID. This is a data integrity issue - therapist data must be fetched from Appwrite first.");if(!/^[a-f0-9]{16,20}$/i.test(a.therapistAppwriteId))throw new Error('CRITICAL: Invalid Appwrite document ID format: "'.concat(a.therapistAppwriteId,'". Expected 16-20 hexadecimal characters. Display names are not valid document IDs. This indicates corrupted therapist data - must be fetched from Appwrite with proper $id mapping.'));return a.therapistAppwriteId})(),providerName:a.therapistName||a.providerName||"Unknown Provider",providerType:a.providerType||"therapist"},c=["providerId","providerType","bookingDate","startTime","createdAt","service","price","status","customerName","customerWhatsApp","locationtype"];for(const m of c)if(!o[m])throw new Error('PREFLIGHT VALIDATION FAILED: Missing required booking field "'.concat(m,'". Cannot proceed to createDocument().'));const d=await J.createDocument(Ea(),Ma(),se.unique(),o);return{...o,$id:d.$id,$createdAt:d.$createdAt}}catch(t){throw new Error("Appwrite booking creation failed: ".concat(t.message))}},async getBookingById(a){try{const t=await J.listDocuments(Ea(),Ma(),[b.equal("bookingId",a),b.limit(1)]);return t.documents.length===0?null:t.documents[0]}catch(t){throw t}},async listBookingsForTherapist(a){try{const t=await J.listDocuments(Ea(),Ma(),[b.equal("therapistId",a),b.equal("status","Pending"),b.orderDesc("$createdAt"),b.limit(50)]),n=new Date;return t.documents.filter(r=>new Date(r.expiresAt)>n).map(r=>({...r,customerPhone:void 0,customerWhatsApp:void 0,customerName:r.customerName||"Customer"}))}catch(t){throw t}},async acceptBooking(a,t,n){try{const s=await this.getBookingById(a);if(!s)throw new Error("Booking not found");if(s.therapistId!==t)throw new Error("Authorization failed: This booking is assigned to therapist '".concat(s.therapistName,"' (").concat(s.therapistId,"). You cannot accept bookings assigned to other therapists."));const r={Pending:["Confirmed","Cancelled","Expired"],Confirmed:["Completed","Cancelled"],Completed:[],Cancelled:[],Expired:[]}[s.status]||[];if(!r.includes("Confirmed"))throw new Error("Illegal state transition: Cannot move from '".concat(s.status,"' to 'Confirmed'. Allowed transitions: ").concat(r.join(", ")||"none (terminal state)"));const l=new Date,o=new Date(s.expiresAt);if(o<l){const m=Math.floor((l.getTime()-o.getTime())/6e4);throw new Error("Cannot accept expired booking. Expired ".concat(m," minutes ago at ").concat(o.toISOString()))}const c=Math.floor((o.getTime()-l.getTime())/6e4);return await J.updateDocument(Ea(),Ma(),s.$id,{status:"Confirmed",acceptedAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}catch(s){throw s}},async rejectBooking(a){try{const t=await this.getBookingById(a);if(!t)throw new Error("Booking not found");return await J.updateDocument(Ea(),Ma(),t.$id,{status:"Cancelled",rejectedAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}catch(t){throw t}},subscribeToTherapistBookings(a,t){try{return fm().subscribe("databases.".concat(Ea(),".collections.").concat(Ma(),".documents"),s=>{const i=s.payload;i.therapistId===a&&i.status==="pending_accept"&&new Date(i.expiresAt)>new Date&&t(i)})}catch{return()=>{}}}};let Ms=null;const fm=()=>(Ms||(Ms=new ct().setEndpoint(N.endpoint).setProject(N.projectId)),Ms),oi={async createBooking(a){const t=performance.now();try{const n=await fa.createBooking(a),s=performance.now()-t;return po("bookings","create",s,{therapistId:a.therapistId,duration:a.duration,backend:"appwrite"},1),n}catch(n){const s=performance.now()-t;throw po("bookings","create",s,{error:!0,backend:"appwrite",message:n.message},0),n}},async acceptBookingAndCreateCommission(a,t,n){try{const s=await fa.acceptBooking(a,t,n),i=await K.listDocuments(h.databaseId,h.collections.commission_records,[b.equal("bookingId",s.bookingId),b.limit(1)]);if(i.documents.length>0)return{booking:s,commission:i.documents[0]};const r=Math.round(s.price*.3),l=await K.createDocument(h.databaseId,h.collections.commission_records,se.unique(),{bookingId:s.bookingId,therapistId:t,therapistName:n,bookingAmount:s.price,commissionRate:.3,commissionAmount:r,status:"PENDING",completedAt:new Date().toISOString(),paymentDeadline:new Date(Date.now()+10800*1e3).toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});return{booking:s,commission:l}}catch(s){throw s}},async getBookingById(a){return await fa.getBookingById(a)},async listBookings(a){return a!=null&&a.therapistId?await fa.listBookingsForTherapist(a.therapistId):[]},async updateBookingStatus(a,t,n){if(t==="confirmed")throw new Error("Use acceptBookingAndCreateCommission for confirming bookings");if(t==="cancelled")return await fa.rejectBooking(a);throw new Error("Status update to '".concat(t,"' not yet implemented in Appwrite service"))},async cancelBooking(a,t){return await fa.rejectBooking(a)},async completeBooking(a){throw new Error("Complete booking not yet implemented in Appwrite service")},async searchAlternativeTherapists(a,t,n){return[]},async notifyTherapist(a){},async notifyCustomer(a,t){},async sendStatusUpdateMessage(a){},async checkAndSearchAlternative(a){},async getProviderBookings(a){return await fa.listBookingsForTherapist(a)},subscribeToProviderBookings(a,t){return fa.subscribeToTherapistBookings(a,n=>{t(n)})},async verifyChatIntegration(a,t="test-customer"){try{const{simpleChatService:n}=await Ce(async()=>{const{simpleChatService:p}=await Promise.resolve().then(()=>jd);return{simpleChatService:p}},void 0),{createChatRoom:s}=await Ce(async()=>{const{createChatRoom:p}=await Promise.resolve().then(()=>ns);return{createChatRoom:p}},void 0),i="customer_".concat(t,"_therapist_").concat(a);let r=!1,l=!1,o=!1,c=!1,d=!1;try{r=!!(await s({bookingId:"test-booking-"+Date.now(),customerId:t,customerName:"Test Customer",customerLanguage:"en",therapistId:a,therapistName:"Test Therapist",therapistLanguage:"id",therapistType:"therapist",expiresAt:new Date(Date.now()+3e5).toISOString()})).$id}catch{}try{await n.sendMessage({conversationId:i,senderId:t,senderName:"Test Customer",senderRole:"customer",receiverId:a,receiverName:"Test Therapist",receiverRole:"therapist",message:"Test message from customer to therapist",messageType:"text"}),l=!0}catch{}try{await n.sendMessage({conversationId:i,senderId:a,senderName:"Test Therapist",senderRole:"therapist",receiverId:t,receiverName:"Test Customer",receiverRole:"customer",message:"Test reply from therapist to customer",messageType:"text"}),o=!0}catch{}return c=!0,d=l||o,{customerToTherapist:l,therapistToCustomer:o,realtimeActive:c,appwriteConnected:d,chatRoomExists:r}}catch{return{customerToTherapist:!1,therapistToCustomer:!1,realtimeActive:!1,appwriteConnected:!1,chatRoomExists:!1}}},async verifyDashboardIntegration(a){try{const t=await this.getProviderBookings(a),n=t.length>0,s=!0,i=t.some(l=>l.chatRoomId);return{connected:!0,bookingCount:t.length,realtimeActive:s,chatIntegration:i}}catch{return{connected:!1,bookingCount:0,realtimeActive:!1,chatIntegration:!1}}}},ym=Object.freeze(Object.defineProperty({__proto__:null,bookingService:oi,default:oi},Symbol.toStringTag,{value:"Module"}));var ke=(a=>(a.Available="Available",a.Busy="Busy",a.Offline="Offline",a))(ke||{}),bm=(a=>(a.Pending="Pending",a.Confirmed="Confirmed",a.OnTheWay="OnTheWay",a.Cancelled="Cancelled",a.Completed="Completed",a.TimedOut="TimedOut",a.Reassigned="Reassigned",a))(bm||{}),xm=(a=>(a.NewBooking="new_booking",a.BookingConfirmed="booking_confirmed",a.BookingCancelled="booking_cancelled",a.MembershipReminder="membership_reminder",a.BookingReminder="booking_reminder",a))(xm||{}),km=(a=>(a.NotOptedIn="not_opted_in",a.OptedIn="opted_in",a.Active="active",a))(km||{}),Di=(a=>(a.Pending="pending",a.Active="active",a.Accepted="accepted",a.Declined="declined",a.Expired="expired",a.Completed="completed",a.Cancelled="cancelled",a))(Di||{}),vm=(a=>(a.Active="active",a.Inactive="inactive",a.Suspended="suspended",a.Dormant="dormant",a))(vm||{}),wm=(a=>(a.Earned="earned",a.Redeemed="redeemed",a.Expired="expired",a.Decayed="decayed",a.BirthdayBonus="birthday_bonus",a.ReferralBonus="referral_bonus",a))(wm||{});const li=(...a)=>{},Nm=(...a)=>{},Rs={};function He(a){if(a==null||typeof a!="string")return"";const t=a.trim();return t?t.split(/\s+/)[0]||t:""}const _f=()=>{const a=Rs==null?void 0:Rs.VITE_AUTH_APP_URL;if(a)return a;const{origin:t}=window.location;return t.includes("localhost")?"http://localhost:3001":t},Sm=a=>{if(a.busyUntil){const n=new Date(a.busyUntil);if(!isNaN(n.getTime())&&n>new Date)return ke.Busy}try{const n=a.bookedUntil;if(n){const s=new Date(n);if(!isNaN(s.getTime())&&s>new Date)return ke.Busy}}catch{}const t=a.availability||a.status||ke.Available;return t===ke.Offline||String(t).toLowerCase()==="offline"?ke.Busy:t},bt=a=>{const t=!!(a.discountPercentage&&a.discountPercentage>0&&a.discountEndTime&&a.isDiscountActive===!0);if(!t)return!1;const n=new Date,s=a.discountEndTime?new Date(a.discountEndTime):null,i=s&&!isNaN(s.getTime())&&s>n,r=!!(t&&i);return(a.name==="phil10"||a.$id==="6912d611003551067831")&&li("üîç DISCOUNT DEBUG - isDiscountActive check:",{therapistId:a.$id||a.id,therapistName:a.name,discountPercentage:a.discountPercentage,discountEndTime:a.discountEndTime,isDiscountActiveFlag:a.isDiscountActive,hasDiscountData:t,notExpired:i,finalResult:r,currentTime:n.toISOString(),endTimeObj:s?s.toISOString():null}),r},jm=a=>{var n,s,i;return((i=(s=(n=a==null?void 0:a.name)!=null?n:a==null?void 0:a.serviceName)!=null?s:a==null?void 0:a.title)!=null?i:"").toString().trim()||"Traditional Massage"},Im=a=>{var n,s,i,r,l;if(!(a!=null&&a.length))return[];const t=new Map;for(const o of a){const c=jm(o),d=(n=parseFloat(o==null?void 0:o.price60))!=null?n:999999,m=t.get(c),p=m!=null&&(s=parseFloat(m==null?void 0:m.price60))!=null?s:999999;(m==null||d<p)&&t.set(c,{...o,name:c,serviceName:(l=(r=(i=o==null?void 0:o.serviceName)!=null?i:o==null?void 0:o.name)!=null?r:o==null?void 0:o.title)!=null?l:c})}return Array.from(t.values())},$f=a=>{if(!Array.isArray(a)||a.length===0)return[];const t=new Set;return a.filter(n=>{const s=String(n!=null?n:"").trim();return!s||t.has(s)?!1:(t.add(s),!0)})};function ho(a){const t=parseFloat(a==null?void 0:a.price60)||0,n=parseFloat(a==null?void 0:a.price90)||0,s=parseFloat(a==null?void 0:a.price120)||0;return t+n+s}function Tm(a,t){var d,m;const n=String((m=(d=t==null?void 0:t.$id)!=null?d:t==null?void 0:t.id)!=null?m:""),s=(a||[]).filter(p=>{const f=Number(p==null?void 0:p.price60),y=Number(p==null?void 0:p.price90),I=Number(p==null?void 0:p.price120);return f>0&&y>0&&I>0}).map(p=>{var f,y,I,P,D,j;return{price60:Number(p.price60),price90:Number(p.price90),price120:Number(p.price120),name:(y=(f=p.name)!=null?f:p.serviceName)!=null?y:p.title,serviceName:(P=(I=p.serviceName)!=null?I:p.name)!=null?P:p.title,title:(j=(D=p.title)!=null?D:p.name)!=null?j:p.serviceName}}),i=Math.max(0,5-s.length);if(i===0||!n)return s;const r=Number(t==null?void 0:t.price60)>0&&Number(t==null?void 0:t.price90)>0&&Number(t==null?void 0:t.price120)>0,l=[];r&&l.push({price60:Math.max(100,Math.round(Number(t.price60))),price90:Math.max(100,Math.round(Number(t.price90))),price120:Math.max(100,Math.round(Number(t.price120))),name:"Traditional Massage",serviceName:"Traditional Massage",title:"Traditional Massage"});const o=Ni(n),c=r?4:5;for(let p=0;p<c&&p<o.length;p++){const f=o[p];l.push({price60:Math.round(f.price60/1e3),price90:Math.round(f.price90/1e3),price120:Math.round(f.price120/1e3),name:f.name,serviceName:f.name,title:f.name})}for(let p=0;p<i&&p<l.length;p++)s.push(l[p]);return s}function Nl(a){return a!=null&&a.length?a.reduce((t,n)=>{const s=ho(t);return ho(n)<s?n:t}):null}function Am({isOpen:a,onClose:t,title:n,description:s,url:i=window.location.href,type:r,headerTitle:l}){const[o,c]=u.useState(!1);if(u.useEffect(()=>()=>{},[a]),!a)return null;const d="".concat(s,"\n\nüîó ").concat(i),m=encodeURIComponent(i),p=encodeURIComponent(s),f=async()=>{try{await navigator.clipboard.writeText(i),c(!0),setTimeout(()=>c(!1),2e3)}catch{alert("Failed to copy link. Please try again.")}},y=[{name:"WhatsApp",icon:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99 0-3.903-.52-5.614-1.486L.057 24z"})}),color:"bg-green-500 hover:bg-green-600",action:()=>window.open("https://wa.me/?text=".concat(encodeURIComponent(d)),"_blank","width=600,height=600")},{name:"Facebook",icon:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),color:"bg-blue-600 hover:bg-blue-700",action:()=>window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(m),"_blank","width=600,height=600")},{name:"Twitter",icon:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})}),color:"bg-sky-500 hover:bg-sky-600",action:()=>window.open("https://twitter.com/intent/tweet?text=".concat(p,"&url=").concat(m),"_blank","width=600,height=600")},{name:"LinkedIn",icon:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),color:"bg-blue-700 hover:bg-blue-800",action:()=>window.open("https://www.linkedin.com/sharing/share-offsite/?url=".concat(m),"_blank","width=600,height=600")},{name:"Instagram",icon:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})}),color:"bg-gradient-to-br from-purple-600 via-pink-600 to-orange-600 hover:from-purple-700 hover:via-pink-700 hover:to-orange-700",action:async()=>{await navigator.clipboard.writeText(d),c(!0),setTimeout(()=>{c(!1),alert("‚úÖ Link copied! Open Instagram and paste to share in a message or story.")},1500)}},{name:"TikTok",icon:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"})}),color:"bg-black hover:bg-gray-900",action:async()=>{await navigator.clipboard.writeText(d),c(!0),setTimeout(()=>{c(!1),alert("‚úÖ Link copied! Open TikTok and paste to share in a message.")},1500)}},{name:"Telegram",icon:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})}),color:"bg-sky-400 hover:bg-sky-500",action:()=>window.open("https://t.me/share/url?url=".concat(m,"&text=").concat(p),"_blank","width=600,height=600")},{name:"Email",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),color:"bg-gray-600 hover:bg-gray-700",action:()=>window.location.href="mailto:?subject=".concat(p,"&body=").concat(encodeURIComponent(d))}];return e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fadeIn",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 transform animate-slideUp",children:[e.jsxs("div",{className:"relative p-4 sm:p-6 pb-4 border-b border-gray-200",children:[e.jsx("button",{onClick:t,className:"absolute top-6 right-4 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/social_media_icon-removebg-preview.png",alt:"Share",className:"w-16 h-16 object-contain"}),e.jsxs("div",{className:"flex-1 pr-2",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 leading-tight break-words",children:l!=null?l:"Share My Profile"}),e.jsx("p",{className:"text-sm text-gray-500 break-words",children:"Choose your platform"})]})]})]}),e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx("div",{className:"grid grid-cols-4 gap-2 sm:gap-4 mb-4 sm:mb-6",children:y.map(I=>e.jsxs("button",{onClick:I.action,className:"".concat(I.color," text-white rounded-lg sm:rounded-xl p-2 sm:p-4 flex flex-col items-center justify-center gap-1 sm:gap-2 transition-all transform hover:scale-105 hover:shadow-lg active:scale-95 min-h-[60px] sm:min-h-[80px]"),title:"Share on ".concat(I.name),children:[e.jsx("div",{className:"text-sm sm:text-base",children:I.icon}),e.jsx("span",{className:"text-[10px] sm:text-xs font-medium leading-tight text-center break-words",children:I.name.length>8?I.name.substring(0,6)+"..":I.name})]},I.name))}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Or copy link"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i,readOnly:!0,className:"flex-1 px-3 sm:px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg text-xs sm:text-sm text-gray-600 focus:outline-none focus:ring-2 focus:ring-orange-500 min-w-0"}),e.jsx("button",{onClick:f,className:"flex items-center justify-center gap-1 sm:gap-2 px-3 sm:px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg font-semibold hover:from-orange-600 hover:to-orange-700 transition-all transform hover:scale-105 active:scale-95 shadow-lg hover:shadow-xl min-w-[70px] sm:min-w-[80px] flex-shrink-0",children:o?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Done"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),e.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Copy"})]})})]}),o&&e.jsx("p",{className:"text-sm text-green-600 mt-2 font-medium animate-fadeIn",children:"‚úì Link copied to clipboard!"})]})]})]}),e.jsx("style",{children:"\n                @keyframes fadeIn {\n                    from { opacity: 0; }\n                    to { opacity: 1; }\n                }\n                @keyframes slideUp {\n                    from { \n                        opacity: 0;\n                        transform: translateY(20px);\n                    }\n                    to { \n                        opacity: 1;\n                        transform: translateY(0);\n                    }\n                }\n                .animate-fadeIn {\n                    animation: fadeIn 0.2s ease-out;\n                }\n                .animate-slideUp {\n                    animation: slideUp 0.3s ease-out;\n                }\n            "})]})}const Xn={Bali:["pijat-bali","massage-bali","pijat-tradisional-bali","bali-massage-traditional","pijat-panggilan-bali","spa-bali","pijat-hotel-bali","pijat-villa-bali"],Ubud:["pijat-ubud","massage-ubud","ubud-traditional-massage","pijat-tradisional-ubud"],Seminyak:["pijat-seminyak","massage-seminyak","seminyak-spa"],Canggu:["pijat-canggu","massage-canggu","canggu-wellness"],Sanur:["pijat-sanur","massage-sanur","sanur-traditional"],"Nusa Dua":["pijat-nusa-dua","massage-nusa-dua","nusadua-spa"],Kuta:["pijat-kuta","massage-kuta","kuta-massage"],Denpasar:["pijat-denpasar","massage-denpasar","pijat-kota-denpasar"],Jakarta:["pijat-jakarta","massage-jakarta","pijat-panggilan-jakarta","jasa-pijat-jakarta","pijat-di-jakarta","pijat-hotel-jakarta","pijat-panggilan-hotel-jakarta"],"Jakarta Selatan":["pijat-jakarta-selatan","massage-south-jakarta","pijat-jaksel"],"Jakarta Pusat":["pijat-jakarta-pusat","massage-central-jakarta","pijat-jakpus"],"Jakarta Barat":["pijat-jakarta-barat","massage-west-jakarta","pijat-jakbar"],"Jakarta Timur":["pijat-jakarta-timur","massage-east-jakarta","pijat-jaktim"],"Jakarta Utara":["pijat-jakarta-utara","massage-north-jakarta","pijat-jakut"],Bandung:["pijat-bandung","massage-bandung","pijat-panggilan-bandung","pijat-kota-bandung","jasa-pijat-bandung","pijat-hotel-bandung"],Surabaya:["pijat-surabaya","massage-surabaya","pijat-panggilan-surabaya","pijat-kota-surabaya","pijat-hotel-surabaya"],Yogyakarta:["pijat-yogyakarta","massage-yogyakarta","pijat-panggilan-yogyakarta","pijat-jogja","massage-jogja"],Semarang:["pijat-semarang","massage-semarang","pijat-panggilan-semarang","pijat-kota-semarang"],Medan:["pijat-medan","massage-medan","pijat-panggilan-medan","pijat-kota-medan"],Makassar:["pijat-makassar","massage-makassar","pijat-panggilan-makassar","pijat-kota-makassar"],Bogor:["pijat-bogor","massage-bogor","pijat-panggilan-bogor","pijat-kota-bogor","jasa-pijat-bogor"],Depok:["pijat-depok","massage-depok","pijat-panggilan-depok","pijat-kota-depok","jasa-pijat-depok"],Tangerang:["pijat-tangerang","massage-tangerang","pijat-panggilan-tangerang","jasa-pijat-tangerang","pijat-bsd","pijat-gading-serpong"],Bekasi:["pijat-bekasi","massage-bekasi","pijat-panggilan-bekasi","jasa-pijat-bekasi"],Malang:["pijat-malang","massage-malang","pijat-kota-malang","pijat-panggilan-malang"],Palembang:["pijat-palembang","massage-palembang","pijat-kota-palembang","pijat-panggilan-palembang"],Pekanbaru:["pijat-pekanbaru","massage-pekanbaru","pijat-kota-pekanbaru","pijat-panggilan-pekanbaru"],Balikpapan:["pijat-balikpapan","massage-balikpapan","pijat-kota-balikpapan","pijat-panggilan-balikpapan"],Lombok:["pijat-lombok","massage-lombok","lombok-traditional-massage","pijat-senggigi"],Batam:["pijat-batam","massage-batam","pijat-panggilan-batam"],Manado:["pijat-manado","massage-manado","pijat-panggilan-manado"],"Denpasar Barat":["pijat-denpasar-barat","massage-denpasar-barat"],Jimbaran:["pijat-jimbaran","massage-jimbaran","pijat-villa-jimbaran"],Legian:["pijat-legian","massage-legian","pijat-panggilan-legian"],Indonesia:["pijat-indonesia","massage-indonesia","pijat-tradisional-indonesia","indonesian-massage"]};function Cm(a,t=!1){const n=a.city||Sl(a.location),i=(Xn[n]||Xn.Indonesia)[0],r=a.name.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();if(t){const l=a.massageTypes?typeof a.massageTypes=="string"?JSON.parse(a.massageTypes):a.massageTypes:[];let o="professional";return l.includes("Traditional")?o="tradisional":l.includes("Reflexology")?o="refleksi":l.includes("Sports")?o="olahraga":a.membershipTier==="premium"&&(o="premium"),"".concat(i,"-").concat(o,"-").concat(r)}return"".concat(i,"-").concat(r)}function Uf(a){const t=a.city||Sl(a.location),n=Xn[t]||["indonesiaspa"],s=n.find(r=>r.includes("spa"))||n[0],i=a.name.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();return"".concat(s,"-").concat(i)}function Sl(a){const t=Object.keys(Xn);for(const n of t)if(a.toLowerCase().includes(n.toLowerCase()))return n;return"Indonesia"}function Pm(a,t){var l,o;const n=(()=>{const c=typeof window!="undefined"?window.location.origin:void 0;if(!c)return"https://www.indastreetmassage.com";const d=c.toLowerCase();return d.includes("localhost")||d.includes("127.0.0.1")||/:\d{2,5}$/.test(d)?"https://www.indastreetmassage.com":c})(),s=Cm(a),i=(o=(l=a.id)!=null?l:a.$id)!=null?o:"",r=i?"".concat(i,"-").concat(s):s;return"".concat(n,"/#/therapist-profile/").concat(r)}const Dm=({isOpen:a,onClose:t,onNavigate:n})=>{if(!a)return null;const s=()=>{if(t(),n){const r=new URL(window.location.href);r.searchParams.set("role","therapist"),window.history.pushState({},"",r.toString()),n("signup")}else window.location.href="/signup?role=therapist"},i=()=>{const r="6281233766950",l=encodeURIComponent("Hi, I want to join Indastreet as a therapist and start earning today!"),o="https://wa.me/".concat(r,"?text=").concat(l);window.open(o,"_blank")};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 relative",children:[e.jsxs("div",{className:"bg-orange-500 rounded-t-lg p-4 relative",children:[e.jsx("h3",{className:"text-white font-bold text-lg text-center",children:"Join Indastreet As Therapist"}),e.jsx("button",{onClick:t,className:"absolute right-3 top-3 text-white hover:text-gray-200 transition-colors",children:e.jsx(Qe,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("p",{className:"text-black text-base mb-6 font-medium",children:"Join Indastreet As Therapist And Start Earning Today"}),e.jsxs("button",{onClick:s,className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg flex items-center justify-center gap-2 w-full transition-colors mb-3",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Create Account Now"]}),e.jsxs("div",{className:"flex items-center my-4",children:[e.jsx("div",{className:"flex-1 border-t border-gray-300"}),e.jsx("span",{className:"px-3 text-gray-500 text-sm",children:"or"}),e.jsx("div",{className:"flex-1 border-t border-gray-300"})]}),e.jsxs("button",{onClick:i,className:"bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3 px-6 rounded-lg flex items-center justify-center gap-2 w-full transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.520-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.488"})}),"Contact via WhatsApp"]}),e.jsx("p",{className:"text-gray-500 text-sm mt-3",children:"+62 812 3376 6950"})]})]})})},Em=({className:a})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Mm=({className:a})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:a,viewBox:"0 0 20 20",children:e.jsx("path",{fill:"currentColor",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),cn=[{id:"default-relaxation-1",name:"Journey Relaxation Massage",category:"relaxation",description:"A peaceful journey to complete relaxation and inner calm",price60:150,price90:200,price120:280,isDefault:!0,popularity:4,isNew:!1},{id:"default-relaxation-2",name:"Serenity Flow Massage",category:"relaxation",description:"Gentle flowing movements to restore balance and serenity",price60:140,price90:190,price120:270,isDefault:!0,popularity:5,isNew:!0},{id:"default-relaxation-3",name:"Tranquil Escape Massage",category:"relaxation",description:"Escape daily stress with this deeply tranquil experience",price60:145,price90:195,price120:275,isDefault:!0,popularity:4,isNew:!1},{id:"default-relaxation-4",name:"Harmony Touch",category:"relaxation",description:"Harmonious touch therapy for mind and body wellness",price60:135,price90:185,price120:260,isDefault:!0,popularity:3,isNew:!1},{id:"default-relaxation-5",name:"Zen Moment Massage",category:"relaxation",description:"Find your zen with this mindful massage experience",price60:155,price90:205,price120:290,isDefault:!0,popularity:4,isNew:!0},{id:"default-relaxation-6",name:"Peaceful Retreat Massage",category:"relaxation",description:"A peaceful retreat for your mind, body, and soul",price60:150,price90:200,price120:280,isDefault:!0,popularity:3,isNew:!1},{id:"default-relaxation-7",name:"Mind & Body Balance",category:"relaxation",description:"Restore perfect balance between mind and body",price60:160,price90:210,price120:300,isDefault:!0,popularity:4,isNew:!1},{id:"default-relaxation-8",name:"Stress Relief Massage",category:"relaxation",description:"Targeted stress relief for complete relaxation",price60:140,price90:190,price120:270,isDefault:!0,popularity:5,isNew:!1},{id:"default-relaxation-9",name:"Calm Breeze Massage",category:"relaxation",description:"Gentle as a calm breeze, soothing for body and mind",price60:145,price90:195,price120:275,isDefault:!0,popularity:3,isNew:!1},{id:"default-relaxation-10",name:"Rejuvenation Therapy",category:"relaxation",description:"Complete rejuvenation for renewed energy and vitality",price60:165,price90:215,price120:310,isDefault:!0,popularity:4,isNew:!0},{id:"default-office-1",name:"Office Recharge Massage",category:"office_student",description:"Recharge after long office hours with targeted relief",price60:140,price90:190,price120:270,isDefault:!0,popularity:5,isNew:!1},{id:"default-office-2",name:"Desk Release Therapy",category:"office_student",description:"Release desk-related tension and muscle stiffness",price60:145,price90:195,price120:275,isDefault:!0,popularity:4,isNew:!0},{id:"default-office-3",name:"Student Relief Massage",category:"office_student",description:"Perfect for students dealing with study stress",price60:130,price90:175,price120:250,isDefault:!0,popularity:4,isNew:!1},{id:"default-office-4",name:"Quick Recharge Massage",category:"office_student",description:"Fast and effective recharge for busy professionals",price60:135,price90:180,price120:255,isDefault:!0,popularity:5,isNew:!1},{id:"default-office-5",name:"Study Break Massage",category:"office_student",description:"Take a meaningful study break with this focused massage",price60:125,price90:170,price120:240,isDefault:!0,popularity:3,isNew:!0},{id:"default-office-6",name:"Productivity Boost Massage",category:"office_student",description:"Boost productivity by relieving work-related tension",price60:150,price90:200,price120:280,isDefault:!0,popularity:4,isNew:!1},{id:"default-office-7",name:"Focus Flow Therapy",category:"office_student",description:"Enhance focus and mental clarity through therapeutic touch",price60:155,price90:205,price120:290,isDefault:!0,popularity:3,isNew:!0},{id:"default-office-8",name:"Workday Reset Massage",category:"office_student",description:"Reset and refresh after demanding workdays",price60:145,price90:195,price120:275,isDefault:!0,popularity:4,isNew:!1},{id:"default-office-9",name:"Brain & Body Refresh",category:"office_student",description:"Refresh both mind and body for optimal performance",price60:160,price90:210,price120:300,isDefault:!0,popularity:4,isNew:!1},{id:"default-office-10",name:"Desk Detox Massage",category:"office_student",description:"Detox from desk work with this targeted therapy",price60:140,price90:190,price120:270,isDefault:!0,popularity:3,isNew:!0},{id:"default-specialty-1",name:"Weekend Escape Massage",category:"specialty",description:"Escape the week with this rejuvenating weekend treat",price60:160,price90:210,price120:300,isDefault:!0,popularity:4,isNew:!1},{id:"default-specialty-2",name:"Journey to Calm",category:"specialty",description:"Embark on a journey to complete calmness and peace",price60:155,price90:205,price120:290,isDefault:!0,popularity:5,isNew:!0},{id:"default-specialty-3",name:"Explorer's Retreat Massage",category:"specialty",description:"A retreat for adventurous souls seeking relaxation",price60:165,price90:215,price120:310,isDefault:!0,popularity:3,isNew:!1},{id:"default-specialty-4",name:"Travel Ease Therapy",category:"specialty",description:"Ease travel fatigue and jet lag with therapeutic touch",price60:150,price90:200,price120:280,isDefault:!0,popularity:4,isNew:!1},{id:"default-specialty-5",name:"Adventure Recovery Massage",category:"specialty",description:"Recover from adventures with this restorative massage",price60:170,price90:220,price120:320,isDefault:!0,popularity:3,isNew:!0},{id:"default-specialty-6",name:"Mountain Breeze Massage",category:"specialty",description:"Feel the refreshing breeze of mountain air in this massage",price60:155,price90:205,price120:290,isDefault:!0,popularity:4,isNew:!1},{id:"default-specialty-7",name:"Coastal Relaxation Massage",category:"specialty",description:"Experience the tranquility of coastal breezes",price60:160,price90:210,price120:300,isDefault:!0,popularity:4,isNew:!1},{id:"default-specialty-8",name:"Forest Whisper Massage",category:"specialty",description:"Listen to whispers of the forest in this nature-inspired massage",price60:165,price90:215,price120:310,isDefault:!0,popularity:3,isNew:!0},{id:"default-specialty-9",name:"Island Escape Therapy",category:"specialty",description:"Escape to a tropical island through therapeutic touch",price60:175,price90:225,price120:330,isDefault:!0,popularity:5,isNew:!1},{id:"default-specialty-10",name:"Sunset Serenity Massage",category:"specialty",description:"Experience the serenity of a beautiful sunset",price60:160,price90:210,price120:300,isDefault:!0,popularity:4,isNew:!0},{id:"default-body-1",name:"Deep Tissue Flow",category:"body_focus",description:"Deep tissue techniques with flowing movements",price60:170,price90:220,price120:320,isDefault:!0,popularity:5,isNew:!1},{id:"default-body-2",name:"Muscle Release Therapy",category:"body_focus",description:"Targeted therapy for muscle tension and knots",price60:165,price90:215,price120:310,isDefault:!0,popularity:4,isNew:!0},{id:"default-body-3",name:"Body Reset Massage",category:"body_focus",description:"Reset your body with this comprehensive massage",price60:160,price90:210,price120:300,isDefault:!0,popularity:4,isNew:!1},{id:"default-body-4",name:"Stretch & Relax Therapy",category:"body_focus",description:"Combine stretching with relaxation for optimal results",price60:155,price90:205,price120:290,isDefault:!0,popularity:3,isNew:!1},{id:"default-body-5",name:"Vitality Touch",category:"body_focus",description:"Energizing touch to restore vitality and strength",price60:150,price90:200,price120:280,isDefault:!0,popularity:4,isNew:!0},{id:"default-body-6",name:"Energy Balance Massage",category:"body_focus",description:"Balance your body's energy centers and flow",price60:165,price90:215,price120:310,isDefault:!0,popularity:3,isNew:!1},{id:"default-body-7",name:"Posture Alignment Massage",category:"body_focus",description:"Improve posture through targeted therapeutic techniques",price60:170,price90:220,price120:320,isDefault:!0,popularity:4,isNew:!0},{id:"default-body-8",name:"Flex & Restore Therapy",category:"body_focus",description:"Increase flexibility while restoring muscle health",price60:160,price90:210,price120:300,isDefault:!0,popularity:3,isNew:!1},{id:"default-body-9",name:"Revive & Relax Massage",category:"body_focus",description:"Revive tired muscles and deeply relax the body",price60:155,price90:205,price120:290,isDefault:!0,popularity:4,isNew:!1},{id:"default-body-10",name:"Full Body Renewal",category:"body_focus",description:"Complete renewal for your entire body system",price60:175,price90:225,price120:330,isDefault:!0,popularity:5,isNew:!0},{id:"default-express-1",name:"Quick Reset Massage",category:"quick_express",description:"Fast and effective reset for busy schedules",price60:120,price90:165,price120:240,isDefault:!0,popularity:5,isNew:!1},{id:"default-express-2",name:"Mini Escape Massage",category:"quick_express",description:"A mini escape that fits into your busy day",price60:115,price90:160,price120:235,isDefault:!0,popularity:4,isNew:!0},{id:"default-express-3",name:"Fast Track Relaxation",category:"quick_express",description:"Fast track to deep relaxation and stress relief",price60:125,price90:170,price120:245,isDefault:!0,popularity:4,isNew:!1},{id:"default-express-4",name:"Rapid Recharge Therapy",category:"quick_express",description:"Rapidly recharge your energy and focus",price60:130,price90:175,price120:250,isDefault:!0,popularity:3,isNew:!1},{id:"default-express-5",name:"Power Break Massage",category:"quick_express",description:"Powerful break from work stress and tension",price60:120,price90:165,price120:240,isDefault:!0,popularity:4,isNew:!0},{id:"default-express-6",name:"Express Calm",category:"quick_express",description:"Express route to calmness and mental clarity",price60:115,price90:160,price120:235,isDefault:!0,popularity:5,isNew:!1},{id:"default-express-7",name:"Time Saver Massage",category:"quick_express",description:"Save time while getting maximum relaxation benefits",price60:125,price90:170,price120:245,isDefault:!0,popularity:3,isNew:!1},{id:"default-express-8",name:"Quick Revive Therapy",category:"quick_express",description:"Quickly revive your body and mind for the day ahead",price60:130,price90:175,price120:250,isDefault:!0,popularity:4,isNew:!0},{id:"default-express-9",name:"Instant Relax Massage",category:"quick_express",description:"Instant relaxation for immediate stress relief",price60:120,price90:165,price120:240,isDefault:!0,popularity:4,isNew:!1},{id:"default-express-10",name:"Efficiency Massage",category:"quick_express",description:"Efficient massage therapy for maximum results in minimal time",price60:135,price90:180,price120:255,isDefault:!0,popularity:3,isNew:!0}];class Rm{static getDefaultMenuForTherapist(t,n=this.getRandomServiceCount(t)){const s=this.createSeed(t),i=Math.ceil(n/5),r=[],l=["relaxation","office_student","specialty","body_focus","quick_express"],o=this.getCategorizedServices();return l.forEach((d,m)=>{const p=o[d],f=this.shuffleArray([...p],s+m),y=Math.min(i,p.length);r.push(...f.slice(0,y))}),this.shuffleArray(r,s).slice(0,n).map((d,m)=>({...d,id:"".concat(t,"-default-").concat(m+1)}))}static getRandomServiceCount(t){return 5+this.createSeed(t)%4}static createSeed(t){let n=0;for(let s=0;s<t.length;s++){const i=t.charCodeAt(s);n=(n<<5)-n+i,n=n&n}return Math.abs(n)}static shuffleArray(t,n){const s=[...t];let i=s.length,r;const l=o=>{const c=Math.sin(o)*1e4;return c-Math.floor(c)};for(;i!==0;)r=Math.floor(l(n+i)*i),i--,[s[i],s[r]]=[s[r],s[i]];return s}static getCategorizedServices(){return{relaxation:cn.filter(t=>t.category==="relaxation"),office_student:cn.filter(t=>t.category==="office_student"),specialty:cn.filter(t=>t.category==="specialty"),body_focus:cn.filter(t=>t.category==="body_focus"),quick_express:cn.filter(t=>t.category==="quick_express")}}static shouldReplaceDefaultService(t,n){const s=t.toLowerCase().trim();return n.some(i=>{const r=i.serviceName.toLowerCase().trim();if(s===r)return!0;const l=["massage","therapy","treatment","session"],o=s.split(" "),c=r.split(" ");return o.filter(m=>c.includes(m)&&!l.includes(m)).length>=2})}}class Lt{static async getTherapistMenu(t,n){try{const s=await this.loadRealMenuData(t),i=await this.getDefaultMenuData(t,n||void 0),r=await this.combineAndEnhanceServices(s,i,t),l=this.sortServices(r),o=Math.max(0,5-s.length);return{services:l,hasDefaults:o>0,hasReal:s.length>0,totalCount:l.length,lastUpdated:new Date}}catch{const i=await this.getDefaultMenuData(t),r=await this.enhanceWithBadges(i,t);return{services:r,hasDefaults:!0,hasReal:!1,totalCount:r.length,lastUpdated:new Date}}}static async loadRealMenuData(t){if(!t)return[];try{const{therapistMenusService:n}=await Ce(async()=>{const{therapistMenusService:o}=await Promise.resolve().then(()=>kl);return{therapistMenusService:o}},void 0),s=await n.getByTherapistId(t);if(!(s!=null&&s.menuData))return[];const i=JSON.parse(s.menuData);return(Array.isArray(i)?i:[]).filter(o=>o&&(o.serviceName||o.name)&&(o.price60||o.price90||o.price120)).map((o,c)=>({id:o.id||"appwrite-".concat(c),name:o.serviceName||o.name||"Service",serviceName:o.serviceName||o.name,description:o.description||"",category:o.category||"relaxation",price60:Number(o.price60)||0,price90:Number(o.price90)||0,price120:Number(o.price120)||0,isDefault:!1,popularity:3,isNew:!1,therapistId:t,dateAdded:new Date(o.dateAdded||Date.now()),lastModified:new Date(o.lastModified||Date.now()),isActive:!0,bookingCount:0,isCustomized:!1,lastBookedAt:void 0}))}catch{return[]}}static async getDefaultMenuData(t,n){const s=n&&Number(n.price60)>0&&Number(n.price90)>0&&Number(n.price120)>0,i=Rm.getDefaultMenuForTherapist(t,s?4:5),r=Ni(t),l=d=>Math.max(100,Math.round(Number(d))),o=d=>Math.max(100,Math.round(Number(d))),c=d=>Math.max(100,Math.round(Number(d)));if(s){const d={id:"".concat(t,"-traditional-profile"),name:"Traditional Massage",serviceName:"Traditional Massage",description:"",category:"relaxation",price60:l(n.price60),price90:o(n.price90),price120:c(n.price120),duration60:!0,duration90:!0,duration120:!0,popularity:3,isNew:!1,therapistId:t,dateAdded:new Date,lastModified:new Date,isActive:!0,bookingCount:0,isCustomized:!1,originalDefaultId:"traditional-profile",isSampleMenu:!0,isDefault:!0},m=i.map((p,f)=>{const y=r[f+1]||r[0],I=Math.round(y.price60/1e3),P=Math.round(y.price90/1e3),D=Math.round(y.price120/1e3);return{...p,id:p.id||"".concat(t,"-default-").concat(f+2),name:y.name,serviceName:y.name,price60:I,price90:P,price120:D,duration60:!0,duration90:!0,duration120:!0,therapistId:t,dateAdded:new Date,lastModified:new Date,isActive:!0,bookingCount:0,isCustomized:!1,originalDefaultId:p.id,isSampleMenu:!0,isDefault:!0}});return[d,...m]}return i.map((d,m)=>{const p=r[m]||r[0],f=Math.round(p.price60/1e3),y=Math.round(p.price90/1e3),I=Math.round(p.price120/1e3);return{...d,name:p.name,serviceName:p.name,price60:f,price90:y,price120:I,duration60:!0,duration90:!0,duration120:!0,therapistId:t,dateAdded:new Date,lastModified:new Date,isActive:!0,bookingCount:0,isCustomized:!1,originalDefaultId:d.id,isSampleMenu:!0}})}static getSamplesToShow(t,n){const s=Math.max(0,5-t);return n.slice(0,s)}static async combineAndEnhanceServices(t,n,s){const i=this.getSamplesToShow(t.length,n),r=[...t,...i];return await this.enhanceWithBadges(r,s)}static async enhanceWithBadges(t,n){const s="".concat(n,"-").concat(Date.now().toString().slice(0,-5));return t.map(i=>{const r=this.generateBadgesForService(i);return{...i,badges:r,badgeRefreshKey:s}})}static generateBadgesForService(t){const n=[],s=(Date.now()-t.dateAdded.getTime())/864e5;return(t.isNew||s<=7)&&n.push("NEW"),(t.bookingCount>=10||t.popularity>=4)&&n.push("POPULAR"),t.lastBookedAt&&(Date.now()-t.lastBookedAt.getTime())/36e5<=24&&n.push("JUST_SCHEDULED"),((t.price60+t.price90+t.price120)/3<=150||t.category==="quick_express")&&n.push("BEST_PRICE"),n.sort(()=>Math.random()-.5).slice(0,2)}static sortServices(t){return t.sort((n,s)=>!n.isDefault&&s.isDefault?-1:n.isDefault&&!s.isDefault?1:n.popularity!==s.popularity?s.popularity-n.popularity:n.name.localeCompare(s.name))}static async saveService(t,n){var d;const s="".concat(this.STORAGE_KEY_PREFIX).concat(t),i=localStorage.getItem(s),r=i?JSON.parse(i):[],l=new Date,o={id:n.id||"custom-".concat(Date.now()),name:n.name||"New Service",category:n.category||"relaxation",description:n.description||"",price60:n.price60||150,price90:n.price90||200,price120:n.price120||280,isDefault:n.isDefault||!1,popularity:n.popularity||3,isNew:n.isNew||!0,therapistId:t,dateAdded:n.dateAdded||l,lastModified:l,isActive:(d=n.isActive)!=null?d:!0,bookingCount:n.bookingCount||0,isCustomized:n.isCustomized||!1,originalDefaultId:n.originalDefaultId},c=r.findIndex(m=>m.id===o.id);return c>=0?r[c]=o:r.push(o),localStorage.setItem(s,JSON.stringify(r)),o}static async deleteService(t,n){const s="".concat(this.STORAGE_KEY_PREFIX).concat(t),i=localStorage.getItem(s);if(!i)return!1;try{const l=JSON.parse(i).filter(o=>o.id!==n);return localStorage.setItem(s,JSON.stringify(l)),!0}catch{return!1}}static async markServiceBooked(t,n){const i=(await this.getTherapistMenu(t)).services.find(r=>r.id===n);i&&(i.bookingCount=(i.bookingCount||0)+1,i.lastBookedAt=new Date,await this.saveService(t,i))}static clearDefaultAssignments(){Object.keys(localStorage).forEach(t=>{t.startsWith(this.DEFAULT_ASSIGNMENT_KEY)&&localStorage.removeItem(t)})}static exportTherapistMenu(t){const n="".concat(this.STORAGE_KEY_PREFIX).concat(t),s="".concat(this.DEFAULT_ASSIGNMENT_KEY).concat(t),i=localStorage.getItem(n),r=localStorage.getItem(s);return JSON.stringify({therapistId:t,exportDate:new Date().toISOString(),realMenu:i?JSON.parse(i):[],defaultAssignment:r?JSON.parse(r):[]},null,2)}static importTherapistMenu(t,n){var s,i;try{const r=JSON.parse(n);if(((s=r.realMenu)==null?void 0:s.length)>0){const l="".concat(this.STORAGE_KEY_PREFIX).concat(t);localStorage.setItem(l,JSON.stringify(r.realMenu))}if(((i=r.defaultAssignment)==null?void 0:i.length)>0){const l="".concat(this.DEFAULT_ASSIGNMENT_KEY).concat(t);localStorage.setItem(l,JSON.stringify(r.defaultAssignment))}return!0}catch{return!1}}}Z(Lt,"STORAGE_KEY_PREFIX","therapist_menu_"),Z(Lt,"DEFAULT_ASSIGNMENT_KEY","default_assignment_");function Bm(){const[a,t]=u.useState(Date.now().toString()),n=u.useCallback(()=>{t(Date.now().toString())},[]);return u.useEffect(()=>{const s=setInterval(()=>{n()},3e5);return()=>clearInterval(s)},[n]),{refreshKey:a,refreshBadges:n}}function Lm(a,t){const[n,s]=u.useState(null),[i,r]=u.useState(!0),[l,o]=u.useState(null),{refreshKey:c,refreshBadges:d}=Bm(),m=u.useCallback(async()=>{if(!a){o("Therapist ID is required"),r(!1);return}try{r(!0),o(null);const x=t&&Number(t.price60)>0&&Number(t.price90)>0&&Number(t.price120)>0,A=await Lt.getTherapistMenu(a,x?t:void 0);s(A)}catch(x){o(x instanceof Error?x.message:"Failed to load menu"),s({services:[],hasDefaults:!1,hasReal:!1,totalCount:0,lastUpdated:new Date})}finally{r(!1)}},[a,t]);u.useEffect(()=>{let x=!0;return(async()=>{x&&await m()})(),()=>{x=!1}},[m]);const p=u.useCallback(async()=>{await m(),d()},[m,d]),f=u.useCallback(async x=>{try{await Lt.saveService(a,{...x,isDefault:!1,isNew:!0,dateAdded:new Date}),await p()}catch(A){o(A instanceof Error?A.message:"Failed to add service")}},[a,p]),y=u.useCallback(async(x,A)=>{try{const S=n==null?void 0:n.services.find(C=>C.id===x);if(!S)throw new Error("Service not found");if(S.isSampleMenu)return;await Lt.saveService(a,{...S,...A,lastModified:new Date,isCustomized:S.isDefault}),await p()}catch(S){o(S instanceof Error?S.message:"Failed to update service")}},[a,n,p]),I=u.useCallback(async x=>{try{const A=n==null?void 0:n.services.find(C=>C.id===x);if(A&&A.isSampleMenu)return;if(!await Lt.deleteService(a,x))throw new Error("Failed to delete service");await p()}catch(A){o(A instanceof Error?A.message:"Failed to delete service")}},[a,n,p]),P=u.useCallback(async x=>{try{await Lt.markServiceBooked(a,x);const A=await Lt.getTherapistMenu(a);s(A)}catch{}},[a]),D=u.useCallback(()=>{Lt.clearDefaultAssignments(),p()},[p]),j=u.useCallback(()=>Lt.exportTherapistMenu(a),[a]),E=u.useCallback(x=>{const A=Lt.importTherapistMenu(a,x);return A&&p(),A},[a,p]);return{...u.useMemo(()=>({menuData:(n==null?void 0:n.services)||[],hasDefaultMenu:(n==null?void 0:n.hasDefaults)||!1,hasRealMenu:(n==null?void 0:n.hasReal)||!1,totalServices:(n==null?void 0:n.totalCount)||0}),[n]),menuLoadResult:n,isLoading:i,error:l,badgeRefreshKey:c,refreshBadges:d,addService:f,updateService:y,deleteService:I,markServiceBooked:P,refreshMenu:p,clearDefaultAssignments:D,exportMenu:j,importMenu:E}}function Om(a,t){const n=u.useMemo(()=>{if(!t)return;const r=Number(t.price60)||0,l=Number(t.price90)||0,o=Number(t.price120)||0;if(r>0&&l>0&&o>0)return{price60:r,price90:l,price120:o}},[t==null?void 0:t.price60,t==null?void 0:t.price90,t==null?void 0:t.price120]),s=Lm(a,n);return{menuData:u.useMemo(()=>s.menuData.map(l=>({id:l.id,serviceName:l.name,description:l.description,price60:l.price60.toString(),price90:l.price90.toString(),price120:l.price120.toString(),name:l.name,min60:"60",min90:"90",min120:"120"})),[s.menuData,a]),enhancedMenuData:s,isDefaultMenu:s.hasDefaultMenu&&!s.hasRealMenu,hasAnyMenu:s.totalServices>0,refreshMenu:s.refreshMenu,addService:s.addService,updateService:s.updateService,deleteService:s.deleteService}}const _m=({showPriceListModal:a,setShowPriceListModal:t,therapist:n,displayRating:s,arrivalCountdown:i,formatCountdown:r,menuData:l,selectedServiceIndex:o,selectedDuration:c,handleSelectService:d,setSelectedServiceIndex:m,setSelectedDuration:p,openBookingWithService:f,chatLang:y,showBookingButtons:I=!0,handleBookNowClick:P,closeAllModals:D,showBadges:j=!0,badgesRefreshKey:E=""})=>{const T=u.useMemo(()=>{var $;return(n==null?void 0:n.appwriteId)||(n==null?void 0:n.$id)||(($=n==null?void 0:n.id)==null?void 0:$.toString())||""},[n==null?void 0:n.appwriteId,n==null?void 0:n.$id,n==null?void 0:n.id]),{menuData:x,enhancedMenuData:A,hasAnyMenu:S}=Om(T,n),C=S?x:l||[],_=u.useMemo(()=>Im(C),[C]),L=!!((n!=null&&n.bankName&&(n!=null&&n.accountNumber)&&(n!=null&&n.accountName)||n!=null&&n.bankCardDetails)&&(n!=null&&n.ktpPhotoUrl)),U=async($,H)=>{var Y;try{if(!((n==null?void 0:n.appwriteId)||(n==null?void 0:n.$id)||((Y=n==null?void 0:n.id)==null?void 0:Y.toString()))){const F="‚ùå BLOCKED: Therapist has no valid ID field. Cannot proceed with booking.";alert("‚ö†Ô∏è Unable to create booking: Therapist data is incomplete. Please refresh the page and try again.");return}A!=null&&A.markServiceBooked&&$.id&&await A.markServiceBooked($.id),f(n,$,{bookingType:H})}catch{alert("‚ö†Ô∏è Unable to create booking. Please try again or refresh the page.")}};return u.useEffect(()=>{},[a]),a?e.jsxs("div",{className:"fixed inset-0 z-[10000] bg-black bg-opacity-50 transition-opacity duration-300",onClick:()=>{t(!1)},children:[e.jsx("style",{children:"\n                @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }\n            "}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 h-full w-full bg-white transform transition-transform duration-300 ease-out",style:{animation:"slideUp 0.3s ease-out forwards"},onClick:$=>$.stopPropagation(),children:[e.jsxs("div",{className:"px-4 py-3 flex items-center justify-between bg-gradient-to-r from-orange-500 to-orange-600 sticky top-0",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("img",{src:n.profilePicture||n.mainImage||"/default-avatar.jpg",alt:He(n.name),className:"w-11 h-11 rounded-full border-2 border-white object-cover",loading:"lazy",decoding:"async",width:"44",height:"44",onError:$=>{const H=$.target;H.src.includes("default-avatar.jpg")||(H.src="/default-avatar.jpg")}},n.profilePicture||n.mainImage),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white leading-tight",children:He(n.name)}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(Mm,{className:"w-3.5 h-3.5 text-yellow-300 fill-yellow-300"}),e.jsx("span",{className:"font-bold text-black bg-white/90 rounded px-1.5 py-0.5 shadow-sm",children:s})]})]})]}),e.jsx("button",{onClick:()=>t(!1),className:"flex items-center justify-center w-8 h-8 bg-black/70 hover:bg-black rounded-full transition-colors","aria-label":"Close",children:e.jsx("svg",{className:"h-5 w-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"px-4 py-2 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm sm:text-base font-bold text-gray-900",children:"Service Prices"}),e.jsxs("div",{className:"flex items-center gap-2 text-[11px] sm:text-xs text-orange-800 font-semibold",children:[e.jsx("span",{className:"hidden sm:inline",children:"Estimated Arrival ‚Ä¢ ~1 hour"}),e.jsx("span",{className:"sm:hidden",children:"Estimated Arrival ‚Ä¢ ~1h"}),e.jsxs("span",{className:"px-2 py-1 rounded-full bg-orange-50 text-orange-700 border border-orange-200 flex items-center gap-1.5",children:[e.jsxs("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"2"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6l4 2"})]}),r(i)]})]})]}),e.jsx("div",{className:"flex-1 p-4 max-h-[70vh] overflow-y-auto",children:_.length>0?e.jsxs("div",{className:"bg-white rounded-lg border border-orange-200 overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"text-center p-6 bg-gradient-to-r from-orange-50 to-amber-50 border-b border-orange-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Massage Menu"}),e.jsx("p",{className:"text-gray-600",children:"Select service and duration, then choose your booking option"})]}),e.jsx("div",{className:"space-y-6",children:_.map(($,H)=>{var F;const Y=o===H,ae=["60","90","120"].filter(V=>$["price".concat(V)]);return e.jsxs("div",{className:"relative bg-white rounded-xl border-2 p-4 transition-all ".concat(Y?"border-orange-400 shadow-lg bg-orange-50":"border-gray-200 hover:border-orange-300"),children:[e.jsxs("div",{className:"mb-4 text-center",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:$.serviceName||$.name||"Service"}),$.description&&e.jsx("p",{className:"text-sm text-gray-600",children:$.description}),(A==null?void 0:A.menuLoadResult)&&e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Category: ",((F=$.category)==null?void 0:F.replace("_"," "))||"General",$.popularity&&e.jsxs("span",{className:"ml-2",children:["‚Ä¢ ","‚òÖ".repeat($.popularity)]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:ae.map(V=>{const pe=$["price".concat(V)],he=Y&&c===V;return e.jsx("button",{onClick:()=>I&&d(H,V),disabled:!I,className:"flex-1 min-w-[100px] max-w-[140px] px-4 py-3 rounded-xl border-2 transition-all ".concat(he?"border-orange-500 bg-orange-500 text-white shadow-lg transform scale-105":"border-orange-200 bg-white text-gray-800 hover:border-orange-400 hover:bg-orange-50"),children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-semibold mb-1",children:[V," min"]}),e.jsxs("div",{className:"text-sm font-bold",children:["Rp ",(Number(pe)*1e3).toLocaleString("id-ID")]})]})},V)})})}),I&&e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx("button",{className:"px-6 py-3 font-semibold rounded-lg transition-all duration-200 ".concat(Y&&c?"bg-orange-600 text-white hover:bg-orange-700 shadow-lg":"bg-orange-500 text-white hover:bg-orange-600"),onClick:async V=>{if(V.stopPropagation(),Y&&c){const pe=Number($["price".concat(c)]);if(!isNaN(pe)&&pe>0){const he={id:$.id,serviceName:$.serviceName||$.name,duration:parseInt(c),price:pe*1e3};P?await P({onAfterClose:async()=>{await U(he,"immediate"),m(null),p(null)}}):(await U(he,"immediate"),t(!1),m(null),p(null))}}else if(ae.length>0){const pe=ae[0];d(H,pe)}},children:Y&&c?"‚úì Book Now":"Book Now"}),e.jsx("button",{disabled:!L,title:L?void 0:y==="id"?"Penyedia perlu mengunggah KTP dan detail bank":"Provider needs to upload KTP and bank details",className:"px-6 py-3 font-semibold rounded-lg border-2 transition-all duration-200 flex items-center justify-center gap-2 ".concat(L?Y&&c?"border-orange-500 bg-orange-500 text-white hover:bg-orange-600 shadow-lg":"border-orange-200 bg-orange-50 text-orange-700 hover:bg-orange-100":"border-gray-300 bg-gray-300 text-gray-500 cursor-not-allowed"),onClick:async V=>{if(V.stopPropagation(),!!L){if(Y&&c){const pe=Number($["price".concat(c)]);if(!isNaN(pe)&&pe>0){const he={id:$.id,serviceName:$.serviceName||$.name,duration:parseInt(c),price:pe*1e3};await U(he,"scheduled"),t(!1),m(null),p(null)}}else if(ae.length>0){const pe=ae[0];d(H,pe)}}},children:Y&&c?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Schedule"]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2",strokeWidth:2}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6",strokeWidth:2}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6",strokeWidth:2}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10",strokeWidth:2})]}),"Schedule"]})})]})})]},$.id||H)})})]}):e.jsx("div",{className:"relative bg-gray-50 rounded-xl border-2 border-dashed border-gray-200 p-8 text-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl",children:"üçÉ"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Setting Up Your Menu"}),e.jsx("p",{className:"text-gray-600 mb-4",children:A!=null&&A.isLoading?"Loading your personalized service menu...":"We're preparing a customized menu of massage services for you."}),(A==null?void 0:A.error)&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:e.jsx("p",{className:"text-red-700 text-sm",children:A.error})}),e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsx("button",{onClick:()=>{var $;return($=A==null?void 0:A.refreshMenu)==null?void 0:$.call(A)},className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:A!=null&&A.isLoading?"Loading...":"Refresh Menu"}),e.jsx("button",{onClick:()=>t(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Close"})]}),(A==null?void 0:A.isLoading)&&e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto"})})]})})})]})]}):null};class $m{async sendMessage(t){try{const n={conversationId:t.conversationId,senderId:t.senderId,senderName:t.senderName,senderRole:t.senderRole,receiverId:t.receiverId,receiverName:t.receiverName,receiverRole:t.receiverRole,message:t.message,messageType:t.messageType||"text",isRead:!1};let s;try{return s=await K.createDocument(h.databaseId,h.collections.messages||"messages",se.unique(),n),{success:!0,messageId:s.$id}}catch{return{success:!0,messageId:"local_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}}}catch(n){return{success:!1,error:n.message}}}async createBooking(t){try{try{return{success:!0,bookingId:(await K.createDocument(h.databaseId,h.collections.bookings||"bookings",se.unique(),{...t,createdAt:new Date().toISOString(),status:"pending"})).$id}}catch{return{success:!0,bookingId:"booking_".concat(Date.now())}}}catch(n){return{success:!1,error:n.message}}}async getMessages(t){try{return(await K.listDocuments(h.databaseId,h.collections.messages||"messages",[b.equal("conversationId",t),b.orderAsc("$createdAt"),b.limit(100)])).documents}catch{return[]}}}const jl=new $m,Ff=Object.freeze(Object.defineProperty({__proto__:null,chatService:jl},Symbol.toStringTag,{value:"Module"}));class Um{constructor(t={}){Z(this,"config");Z(this,"status");Z(this,"listeners",[]);Z(this,"reconnectTimer",null);Z(this,"heartbeatTimer",null);Z(this,"qualityTimer",null);Z(this,"subscriptions",new Map);Z(this,"isInitialized",!1);Z(this,"lastHeartbeat",0);Z(this,"networkWatcher",null);Z(this,"pollingFallback",null);this.config={maxReconnectAttempts:3,baseReconnectDelay:2e3,maxReconnectDelay:1e4,heartbeatInterval:3e4,connectionTimeout:1e4,qualityCheckInterval:15e3,enableFallbackPolling:!0,enableNetworkDetection:!1,...t},this.status={isConnected:!1,quality:"disconnected",lastPing:0,reconnectAttempts:0,connectionType:"offline",latency:0}}async initialize(){this.isInitialized||(this.isInitialized=!0,await this.testConnection(),this.startHeartbeat(),this.startQualityMonitoring(),this.config.enableNetworkDetection&&this.setupNetworkDetection(),this.status.isConnected||await this.reconnect())}async testConnection(){const t=Date.now();try{let n=!1,s=null;const r=await new Promise(l=>{try{s=$t.subscribe("account",o=>{if(!n){n=!0;const c=Date.now()-t;this.updateStatus({isConnected:!0,quality:this.getQualityFromLatency(c),lastPing:Date.now(),connectionType:"websocket",latency:c,reconnectAttempts:0}),l(!0)}}),setTimeout(()=>{n||l(!1)},this.config.connectionTimeout)}catch{l(!1)}});return s&&s(),r||(this.updateStatus({isConnected:!1,quality:"disconnected",connectionType:"offline",latency:0}),this.config.enableFallbackPolling&&this.startPollingFallback()),r}catch{return this.updateStatus({isConnected:!1,quality:"disconnected",connectionType:"offline",latency:0}),!1}}startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(async()=>{Date.now()-this.status.lastPing>this.config.heartbeatInterval*2&&(await this.testConnection()||await this.reconnect())},this.config.heartbeatInterval)}startQualityMonitoring(){this.qualityTimer&&clearInterval(this.qualityTimer),this.qualityTimer=setInterval(async()=>{if(this.status.isConnected&&this.status.connectionType==="websocket"){const t=Date.now();try{const n=$t.subscribe("account",()=>{const s=Date.now()-t;this.updateStatus({latency:s,quality:this.getQualityFromLatency(s),lastPing:Date.now()}),n()});setTimeout(()=>{try{n()}catch{}},2e3)}catch{this.updateStatus({quality:"poor"})}}},this.config.qualityCheckInterval)}setupNetworkDetection(){if(typeof window=="undefined")return;const t=()=>{setTimeout(async()=>{await this.testConnection()},1e3)},n=()=>{this.updateStatus({isConnected:!1,quality:"disconnected",connectionType:"offline"})};window.addEventListener("online",t),window.addEventListener("offline",n),this.networkWatcher=()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}startPollingFallback(){this.pollingFallback&&clearInterval(this.pollingFallback),this.updateStatus({isConnected:!0,quality:"poor",connectionType:"polling"}),this.pollingFallback=setInterval(async()=>{try{await this.testConnection()&&this.pollingFallback&&(clearInterval(this.pollingFallback),this.pollingFallback=null)}catch{}},3e3)}async reconnect(){if(this.reconnectTimer)return;if(this.status.reconnectAttempts++,this.status.reconnectAttempts>this.config.maxReconnectAttempts){this.config.enableFallbackPolling&&this.startPollingFallback(),this.updateStatus({isConnected:!1,quality:"poor",connectionType:this.config.enableFallbackPolling?"polling":"offline"});return}const t=Math.min(this.config.baseReconnectDelay*Math.pow(2,this.status.reconnectAttempts-1),this.config.maxReconnectDelay);this.reconnectTimer=setTimeout(async()=>{this.reconnectTimer=null,await this.testConnection()?this.status.reconnectAttempts=0:await this.reconnect()},t)}subscribeToMessages(t,n,s){var c;const i="messages-".concat(t);this.subscriptions.has(i)&&((c=this.subscriptions.get(i))==null||c());const r=()=>{try{const d="databases.".concat(h.databaseId,".collections.").concat(h.collections.chatMessages,".documents"),m=$t.subscribe(d,p=>{const f=p.payload;this.updateStatus({lastPing:Date.now()}),(f.chatRoomId===t||f.roomId===t)&&n(f)});return this.subscriptions.set(i,m),m}catch(d){return s==null||s(d),setTimeout(()=>{this.reconnect()},1e3),()=>{}}};let l=r();const o=d=>{d.isConnected&&d.connectionType==="websocket"&&(l&&l(),l=r())};return this.addConnectionListener(o),()=>{l&&l(),this.subscriptions.delete(i),this.removeConnectionListener(o)}}getQualityFromLatency(t){return t<100?"excellent":t<300?"good":t<1e3?"poor":"disconnected"}updateStatus(t){this.status={...this.status,...t},this.notifyListeners()}notifyListeners(){this.listeners.forEach(t=>{try{t(this.status)}catch{}})}addConnectionListener(t){this.listeners.push(t),t(this.status)}removeConnectionListener(t){const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}getStatus(){return{...this.status}}async forceReconnect(){this.status.reconnectAttempts=0,await this.reconnect()}destroy(){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null),this.qualityTimer&&(clearInterval(this.qualityTimer),this.qualityTimer=null),this.pollingFallback&&(clearInterval(this.pollingFallback),this.pollingFallback=null),this.networkWatcher&&(this.networkWatcher(),this.networkWatcher=null),this.subscriptions.forEach(t=>{try{t()}catch{}}),this.subscriptions.clear(),this.listeners=[],this.isInitialized=!1}}const Rn=new Um,ia={generateConversationId(a,t){return"".concat(a,"_").concat(t)},async sendBookingRequest(a,t){const n=this.generateConversationId(a.customerId,a.providerId),s="üéØ New Booking Request\n\nüìã Service: ".concat(t.serviceType,"\n‚è±Ô∏è Duration: ").concat(t.duration," minutes  \nüí∞ Price: IDR ").concat(t.price.toLocaleString(),"\nüìç Location: ").concat(t.location,"\nüìÖ Date: ").concat(t.date,"\nüïí Time: ").concat(t.time,"\nüîñ Type: ").concat(t.bookingType==="immediate"?"Book Now":"Scheduled","\n\nBooking ID: ").concat(t.bookingId,"\n\n‚è≥ Please respond within 5 minutes to confirm this booking request."),i=await Ze.sendMessage({conversationId:n,senderId:a.customerId,senderName:a.customerName,senderRole:"customer",receiverId:a.providerId,receiverName:a.providerName,receiverRole:a.providerType,message:s,messageType:"booking",bookingId:t.bookingId,metadata:{bookingType:t.bookingType,duration:t.duration,price:t.price,location:t.location,statusType:"booking_request"}});return this.formatChatMessage(i)},async sendBookingAcceptance(a,t){const n=this.generateConversationId(a.customerId,a.providerId),s="‚úÖ Booking Confirmed!\n\nYour booking has been accepted by ".concat(a.providerName,".\n\nBooking ID: ").concat(t,"\n\nYou can now chat directly to coordinate details. Thank you for choosing our service! üôè"),i=await Ze.sendMessage({conversationId:n,senderId:a.providerId,senderName:a.providerName,senderRole:a.providerType,receiverId:a.customerId,receiverName:a.customerName,receiverRole:"customer",message:s,messageType:"status-update",bookingId:t,metadata:{statusType:"confirmed",actionBy:"provider"}});return this.formatChatMessage(i)},async sendBookingRejection(a,t,n){const s=this.generateConversationId(a.customerId,a.providerId),i="‚ùå Booking Not Available\n\nUnfortunately, ".concat(a.providerName," cannot accept your booking request.\n\nBooking ID: ").concat(t,"\n\n").concat(n?"Reason: ".concat(n):"","\n\nPlease try booking with another provider or select a different time. We apologize for any inconvenience."),r=await Ze.sendMessage({conversationId:s,senderId:a.providerId,senderName:a.providerName,senderRole:a.providerType,receiverId:a.customerId,receiverName:a.customerName,receiverRole:"customer",message:i,messageType:"status-update",bookingId:t,metadata:{statusType:"rejected",actionBy:"provider",reason:n||""}});return this.formatChatMessage(r)},subscribeToConversation(a,t,n){const s=this.generateConversationId(a,t);return Ze.subscribeToMessages(s,i=>{const r=this.formatChatMessage(i);n(r)})},async getConversationHistory(a,t){const n=this.generateConversationId(a,t);return(await Ze.getMessages(n)).map(i=>this.formatChatMessage(i))},formatChatMessage(a){return{messageId:a.$id||a.messageId,conversationId:a.conversationId,senderId:a.senderId,senderName:a.senderName,senderRole:a.senderRole,receiverId:a.receiverId||a.recipientId,receiverName:a.receiverName,receiverRole:a.receiverRole,message:a.message||a.content,messageType:a.messageType||"text",bookingId:a.bookingId,timestamp:a.$createdAt||a.createdAt||a.sentAt,isRead:a.isRead||!1,metadata:a.metadata?typeof a.metadata=="string"?JSON.parse(a.metadata):a.metadata:{}}},validateConversationId(a){const t=a.split("_");return t.length===2&&t[0].length>0&&t[1].length>0},extractParticipants(a){if(!this.validateConversationId(a))return null;const[t,n]=a.split("_");return{customerId:t,providerId:n}}},Ei="booking_timer_state";function fo(a){try{localStorage.setItem(Ei,JSON.stringify(a))}catch{}}function Fm(){try{const a=localStorage.getItem(Ei);return a?JSON.parse(a):null}catch{return null}}function Ra(){try{localStorage.removeItem(Ei)}catch{}}function yo(a){const t=Date.now(),n=new Date(a).getTime();return Math.max(0,Math.ceil((n-t)/1e3))}function Km(){const a=u.useRef(null),t=u.useRef({bookingId:null,documentId:null,lifecycleStatus:null,isActive:!1}),n=u.useRef(null),s=u.useRef(null),[i,r]=u.useState({isActive:!1,phase:null,remainingSeconds:0,startedAt:null,expiresAt:null,bookingId:null}),l=u.useCallback(()=>{r(f=>{const y=t.current;if(y.bookingId!==f.bookingId)return a.current&&(clearInterval(a.current),a.current=null),s.current=null,Ra(),{isActive:!1,phase:null,remainingSeconds:0,startedAt:null,expiresAt:null,bookingId:null};if(!y.isActive)return a.current&&(clearInterval(a.current),a.current=null),s.current=null,Ra(),{isActive:!1,phase:null,remainingSeconds:0,startedAt:null,expiresAt:null,bookingId:null};if(!f.expiresAt)return a.current&&(clearInterval(a.current),a.current=null),s.current=null,Ra(),{...f,isActive:!1,phase:null,remainingSeconds:0};const I=yo(f.expiresAt);if(I<=0){if(a.current&&(clearInterval(a.current),a.current=null),s.current=null,Ra(),n.current&&f.phase){const P={phase:f.phase,bookingId:y.bookingId,documentId:y.documentId,lifecycleStatus:y.lifecycleStatus};queueMicrotask(()=>{var D;(D=n.current)==null||D.call(n,P)})}return{isActive:!1,phase:null,remainingSeconds:0,startedAt:f.startedAt,expiresAt:f.expiresAt,bookingId:f.bookingId}}return{...f,remainingSeconds:I}})},[]),o=u.useCallback((f,y)=>{const I="".concat(y,":").concat(f);if(s.current===I)return;a.current&&(clearInterval(a.current),a.current=null);const P=f==="THERAPIST_RESPONSE"?300:60,D=new Date,j=new Date(D.getTime()+P*1e3).toISOString();s.current=I,r({isActive:!0,phase:f,remainingSeconds:P,startedAt:D.toISOString(),expiresAt:j,bookingId:y});const E=t.current;E.lifecycleStatus&&fo({bookingId:y,phase:f,expiresAt:j,lifecycleStatus:E.lifecycleStatus}),a.current=setInterval(l,1e3)},[l]),c=u.useCallback(f=>{a.current&&(clearInterval(a.current),a.current=null),s.current=null,Ra(),r({isActive:!1,phase:null,remainingSeconds:0,startedAt:null,expiresAt:null,bookingId:null})},[]),d=u.useCallback(f=>{const y=t.current;t.current=f,y.lifecycleStatus,f.lifecycleStatus,!f.isActive&&i.isActive&&c("BOOKING_BECAME_INACTIVE"),i.isActive&&i.phase&&i.expiresAt&&f.lifecycleStatus&&fo({bookingId:f.bookingId,phase:i.phase,expiresAt:i.expiresAt,lifecycleStatus:f.lifecycleStatus})},[i.isActive,i.phase,i.expiresAt,c]),m=u.useCallback(f=>{n.current=f},[]),p=u.useCallback(f=>{if(!f)return;const y=Fm();if(!y)return;if(y.bookingId!==f){Ra();return}const I=yo(y.expiresAt);if(I<=0){if(Ra(),n.current){const j=t.current,E={phase:y.phase,bookingId:y.bookingId,documentId:j.documentId,lifecycleStatus:y.lifecycleStatus};queueMicrotask(()=>{var T;(T=n.current)==null||T.call(n,E)})}return}const P=new Date().toISOString(),D="".concat(y.bookingId,":").concat(y.phase);s.current=D,r({isActive:!0,phase:y.phase,remainingSeconds:I,startedAt:P,expiresAt:y.expiresAt,bookingId:y.bookingId}),a.current=setInterval(l,1e3)},[l]);return u.useEffect(()=>()=>{a.current&&(clearInterval(a.current),a.current=null)},[]),{timerState:i,startTimer:o,stopTimer:c,updateBookingStateRef:d,setExpirationHandler:m,resumeTimerIfNeeded:p}}async function Wm(a){let t=null;try{const n=await qm(a);if(!n.success)return{success:!1,error:n.error};const s=await Hm(n.data);if(!s.success)return{success:!1,error:s.error};t=s.data.documentId;const i=await Gm(s.data,n.data,a);return i.success?{success:!0,data:i.data}:(await bo(t),{success:!1,error:i.error})}catch(n){return t&&await bo(t),{success:!1,error:(n==null?void 0:n.message)||"Unexpected error during booking transaction"}}}async function qm(a){var d,m,p;try{const{ensureAuthSession:f}=await Ce(async()=>{const{ensureAuthSession:I}=await import("./authSessionHelper.DPBCHOJc.js");return{ensureAuthSession:I}},__vite__mapDeps([0,1,2,3,4,5,6,7,8]));if(!(await f("Booking transaction")).success)return{success:!1,error:"Authentication failed. Please refresh and try again."}}catch{return{success:!1,error:"Authentication error. Please refresh and try again."}}if(!((d=a.therapist)!=null&&d.id)||!((m=a.therapist)!=null&&m.appwriteId))return{success:!1,error:"Invalid therapist data. Missing ID or Appwrite ID."};if(!a.customerName)return{success:!1,error:"Customer name is required."};if(!a.customerPhone)return{success:!1,error:"Phone number is required."};const{checkDuplicateBooking:t}=await Ce(async()=>{const{checkDuplicateBooking:f}=await Promise.resolve().then(()=>Hn);return{checkDuplicateBooking:f}},void 0),n=await t(a.customerId,a.therapist.appwriteId);if(n.exists)return{success:!1,error:n.reason||"You already have a pending booking with this therapist."};if(a.bookingType==="SCHEDULED"&&a.scheduledDate&&a.scheduledTime){const{bookingLifecycleService:f}=await Ce(async()=>{const{bookingLifecycleService:I}=await Promise.resolve().then(()=>Hn);return{bookingLifecycleService:I}},void 0);if(await f.isSlotReserved(a.therapist.appwriteId,a.scheduledDate,a.scheduledTime))return{success:!1,error:"This date and time are no longer available. Please choose another slot."}}const{generateBookingId:s}=await Ce(async()=>{const{generateBookingId:f}=await Promise.resolve().then(()=>Hn);return{generateBookingId:f}},void 0),i=await s(),r=a.bookingType==="SCHEDULED"?gm:5,l=new Date(Date.now()+r*60*1e3).toISOString(),o=a.customerPhone.replace(/^\+/,"");return(p=a.customerWhatsApp)!=null&&p.replace(/^\+/,""),{success:!0,data:{appwritePayload:{customerId:a.customerId||"guest",customerName:a.customerName,customerphone:o,customerWhatsApp:o,therapistId:a.therapist.appwriteId,therapistAppwriteId:a.therapist.appwriteId,therapistName:a.therapist.name,therapistType:a.providerType||"therapist",serviceType:a.serviceType||"Traditional Massage",duration:a.duration,price:a.totalPrice,location:a.locationZone||a.customerLocation||a.address||"Address provided in chat",locationtype:a.locationType||"home",address:a.address||a.customerLocation||"Address provided in chat",roomnumber:a.roomNumber||"",cordinates:a.coordinates?JSON.stringify(a.coordinates):void 0,bookingDate:new Date().toISOString(),date:new Date().toISOString(),customerPhone:o,time:a.scheduledTime||new Date().toLocaleTimeString("en-US",{hour12:!1}),status:Pi("pending"),...a.scheduledDate&&a.scheduledTime&&{scheduledDate:a.scheduledDate,scheduledTime:a.scheduledTime},responseDeadline:l,responcedeadline:l,notes:a.discountCode?"Discount: ".concat(a.discountPercentage,"%"):void 0},bookingId:i,expiresAt:l}}}async function Hm(a){var t;try{const{bookingService:n}=await Ce(async()=>{const{bookingService:i}=await Promise.resolve().then(()=>ym);return{bookingService:i}},void 0),s=await n.createBooking(a.appwritePayload);return!s||!s.bookingId?{success:!1,error:"Appwrite persistence failed - no booking returned"}:{success:!0,data:{documentId:s.$id,appwriteBooking:s}}}catch(n){let s="Failed to create booking in database. ";return(n==null?void 0:n.code)===400?s+="Invalid booking data.":(n==null?void 0:n.code)===401?s+="Authentication failed.":(n==null?void 0:n.code)===404?s+="Booking collection not found.":(n==null?void 0:n.code)===500?s+="Server error.":(t=n==null?void 0:n.message)!=null&&t.includes("network")?s+="Network connection issue.":s+=(n==null?void 0:n.message)||"Unknown error.",{success:!1,error:s}}}async function Gm(a,t,n){try{const{appwriteBooking:s,documentId:i}=a;return{success:!0,data:{booking:{id:s.bookingId,bookingId:s.bookingId,documentId:i,lifecycleStatus:Re.PENDING,therapistId:s.therapistId,therapistName:s.therapistName,providerType:n.providerType||s.therapistType||s.providerType||"therapist",customerId:s.customerId,customerName:s.customerName||s.customer_name||n.customerName,customerPhone:s.customerPhone||s.customerphone||n.customerPhone,serviceType:s.serviceType,duration:s.duration,totalPrice:s.price,locationZone:s.location,coordinates:n.coordinates,bookingType:n.bookingType||"BOOK_NOW",adminCommission:Math.round(s.price*.3),providerPayout:Math.round(s.price*.7),discountCode:n.discountCode,discountPercentage:n.discountPercentage,originalPrice:n.originalPrice,discountedPrice:n.discountCode?s.price:void 0,createdAt:s.createdAt||new Date().toISOString(),pendingAt:s.createdAt||new Date().toISOString(),responseDeadline:s.responseDeadline||t.expiresAt,scheduledDate:n.scheduledDate,scheduledTime:n.scheduledTime},documentId:i,lifecycleStatus:Re.PENDING,expiresAt:t.expiresAt,timerPhase:"THERAPIST_RESPONSE"}}}catch{return{success:!1,error:"Failed to confirm booking state"}}}async function bo(a){if(a)try{const{databases:t}=await Ce(async()=>{const{databases:s}=await Promise.resolve().then(()=>wn);return{databases:s}},void 0),{APPWRITE_CONFIG:n}=await Ce(async()=>{const{APPWRITE_CONFIG:s}=await Promise.resolve().then(()=>kn);return{APPWRITE_CONFIG:s}},void 0);await t.deleteDocument(n.databaseId,n.collections.bookings,a)}catch{}}function xo(a){return a?a===Re.PENDING||a===Re.ACCEPTED:!1}function zm(a){a&&Sa.update(a,{status:"busy",availability:"Busy"}).then(()=>{g.debug("[TherapistStatus] Set therapist to Busy for countdown",{therapistId:a})}).catch(t=>{g.warn("[TherapistStatus] Failed to set therapist Busy",{therapistId:a,error:t})})}function Bn(a){a&&Sa.update(a,{status:"available",availability:"Available"}).then(()=>{g.debug("[TherapistStatus] Set therapist to Available after booking",{therapistId:a})}).catch(t=>{g.warn("[TherapistStatus] Failed to set therapist Available",{therapistId:a,error:t})})}const Vm=["pending_accept","pending"];async function Ym(a){var t,n;try{const s=new Date().toISOString();for(const i of Vm)if(((n=(t=(await K.listDocuments(h.databaseId,h.collections.bookings||"bookings",[b.equal("therapistId",a),b.equal("status",i),b.greaterThan("responseDeadline",s),b.limit(1)])).documents)==null?void 0:t.length)!=null?n:0)>0)return!0;return!1}catch{return!1}}const Il="booking_blocks";function Tl(){try{const a=localStorage.getItem(Il);if(!a)return[];const t=JSON.parse(a);return Array.isArray(t)?t:[]}catch{return[]}}function Jm(a,t,n){const s=Tl();s.some(i=>i.userId===a&&i.providerId===t)||(s.push({userId:a,providerId:t,providerType:n}),localStorage.setItem(Il,JSON.stringify(s)))}function Al(a,t){var n;return(n=Tl().find(s=>s.userId===a&&s.providerId===t))!=null?n:null}function Qm(a,t){return Al(a,t)!==null}const Cl="deposit_attempts",Pl=24;function ms(){try{const a=localStorage.getItem(Cl);if(!a)return[];const t=JSON.parse(a);return Array.isArray(t)?t:[]}catch{return[]}}function Xm(a,t){const n=ms();n.push({userId:a,providerId:t,failedAt:new Date().toISOString()}),localStorage.setItem(Cl,JSON.stringify(n))}function Zm(a,t){return ms().filter(n=>n.userId===a&&n.providerId===t).length}function eg(a,t){const n=ms().filter(r=>r.userId===a&&r.providerId===t);if(n.length<2)return!1;const i=new Date(n[1].failedAt).getTime()+Pl*60*60*1e3;return Date.now()<i}function tg(a,t){const n=ms().filter(i=>i.userId===a&&i.providerId===t);if(n.length<2)return null;const s=new Date(n[1].failedAt).getTime();return new Date(s+Pl*60*60*1e3)}const ag=a=>{const t=ds.quickValidate(a);if(t.mayBeBlocked)return{isValid:!1,warning:"‚ö†Ô∏è ".concat(t.reason||"Contact information detected",".\n\nüö´ Sharing contact information is strictly prohibited.\nViolations may result in account restriction.")};const n=$a.containsBankNumber(a);return n.isValid?{isValid:!0,warning:null}:{isValid:!1,warning:n.warning||"üö´ Sharing bank account numbers is not allowed. Use the secure payment system."}},Dl=u.createContext(null),Ln={isOpen:!1,isMinimized:!1,bookingMode:"book",selectedDate:null,selectedTime:null,therapist:null,messages:[],bookingStep:"duration",selectedDuration:null,customerName:"",customerWhatsApp:"",customerLocation:"",coordinates:null,selectedService:null,chatRoomId:null,connectionStatus:{isConnected:!1,quality:"disconnected",lastPing:0,reconnectAttempts:0,connectionType:"offline",latency:0},currentBooking:null,isTherapistView:!1,bookingSource:null,isAppwriteDegraded:!1,degradationReason:null,activeScheduledBookingId:null};function Kf({children:a,setIsChatWindowVisible:t}){var qt,Ht,Ta,Aa;const s=(()=>{try{const k=localStorage.getItem("active_booking_state");if(k){const M=JSON.parse(k);return g.debug("Restored active booking from localStorage",{bookingId:M.bookingId}),M}}catch(k){g.error("Failed to load persisted booking state",k)}return null})(),i=s?{...Ln,...s,isOpen:!1,isMinimized:!1,activeScheduledBookingId:(Ht=(qt=s.activeScheduledBookingId)!=null?qt:Ln.activeScheduledBookingId)!=null?Ht:null}:Ln,[r,l]=u.useState(i),o=u.useCallback(k=>{l(M=>{const O=typeof k=="function"?k(M):k;return M.isOpen!==O.isOpen&&(g.debug("[STATE] isOpen changed",{from:M.isOpen,to:O.isOpen}),O.isOpen||(g.warn("[STATE] Chat is being CLOSED"),g.debug("[STATE] Call stack",{stack:new Error().stack}))),O})},[]),[c,d]=u.useState(!1),[m,p]=u.useState(!1),[f,y]=u.useState(""),[I,P]=u.useState("Guest"),[D,j]=u.useState(!0),E=u.useRef(null),T=u.useRef(null),x=u.useRef(()=>{}),{timerState:A,startTimer:S,updateBookingStateRef:C,setExpirationHandler:_,resumeTimerIfNeeded:L}=Km();u.useEffect(()=>{var k;T.current=((k=r.therapist)==null?void 0:k.id)||null},[(Ta=r.therapist)==null?void 0:Ta.id]),u.useEffect(()=>{g.debug("PersistentChat: Initializing user ID"),(async()=>{try{g.debug("Attempting to get authenticated user");const M=await ca.get();y(M.$id),P(M.name||"Customer"),j(!1),g.info("PersistentChat: User authenticated",{userId:M.$id})}catch{g.debug("No authenticated user, creating anonymous ID for guest");let O=localStorage.getItem("persistent_chat_user_id");O?g.debug("Reusing existing anonymous ID",{anonId:O}):(O="guest_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),localStorage.setItem("persistent_chat_user_id",O),g.debug("Created new anonymous ID",{anonId:O})),y(O),P("Guest"),j(!0),g.info("PersistentChat: Using anonymous ID",{anonId:O})}})()},[]);const U=u.useCallback(async()=>{try{const k=await ca.get();y(k.$id),P(k.name||"Customer"),j(!1),g.info("PersistentChat: User refreshed after auth",{userId:k.$id})}catch{g.debug("PersistentChat: refreshUser failed (no session)")}},[]);u.useEffect(()=>{const k=M=>{var ee;const O=(ee=M.detail)==null?void 0:ee.user;O!=null&&O.$id&&(y(O.$id),P(O.name||"Customer"),j(!1),g.info("PersistentChat: User updated from customer login event",{userId:O.$id}))};return window.addEventListener("indastreet_customer_logged_in",k),()=>window.removeEventListener("indastreet_customer_logged_in",k)},[]),u.useEffect(()=>{const k=f||"guest";l(M=>{if(M.activeScheduledBookingId)return M;try{const O=localStorage.getItem("active_scheduled_booking_".concat(k));return O?{...M,activeScheduledBookingId:O}:M}catch{return M}})},[f]),u.useEffect(()=>{r.currentBooking?(C({bookingId:r.currentBooking.bookingId,documentId:r.currentBooking.documentId||null,lifecycleStatus:r.currentBooking.lifecycleStatus,isActive:xo(r.currentBooking.lifecycleStatus)}),g.debug("[TIMER] Booking state ref updated",{bookingId:r.currentBooking.bookingId})):(C({bookingId:null,documentId:null,lifecycleStatus:null,isActive:!1}),g.debug("[TIMER] Booking state ref cleared"))},[r.currentBooking,C]),u.useEffect(()=>{g.debug("PersistentChat: Starting realtime subscription setup");const k=async()=>{if(g.debug("Infrastructure Validation",{currentUserId:f||"Missing",chatMessagesCollection:h.collections.chatMessages||"Missing",chatSessionsCollection:h.collections.chatSessions||"Missing",databaseId:h.databaseId,endpoint:"https://syd.cloud.appwrite.io/v1",projectId:"68f23b11000d25eb3664"}),!f)return g.warn("No user ID - skipping realtime subscription"),g.info("Both authenticated users and guests need realtime for chat"),!1;if(!h.collections.chatMessages)return g.error("FATAL: CHAT_MESSAGES_COLLECTION is undefined"),g.error("Check APPWRITE_CONFIG.collections.chatMessages configuration"),!1;try{g.debug("Testing document access",{collection:h.collections.chatMessages});const O=await K.listDocuments(h.databaseId,h.collections.chatMessages,[b.limit(1)]);g.info("chat_messages DOCUMENT ACCESS",{totalMessages:O.total}),g.info("Document access validation: PASSED - Chat can query messages"),g.debug("Collection ready for realtime messaging and document operations"),g.info("Schema validation: PASSED - Collection ready for realtime messaging")}catch(O){return g.error("CHAT_MESSAGES COLLECTION ACCESS FAILED",{code:O.code,message:O.message,collectionId:h.collections.chatMessages}),O.code===404?g.error("ANALYSIS: chat_messages collection missing or incorrect collection ID"):O.code===401?(g.error("DOCUMENT ACCESS ISSUE: Guests missing document read permissions"),g.error("ROOT CAUSE: User (role: guests) missing document access"),g.error("REQUIRED FIX IN APPWRITE CONSOLE:"),g.error("  1. Navigate to Database ‚Üí Collections ‚Üí chat_messages"),g.error("  2. Go to Settings ‚Üí Permissions"),g.error('  3. Ensure "Any" role has "Read" permission for DOCUMENTS'),g.error("  4. Save changes"),g.error("WITHOUT THIS FIX: Chat cannot access message documents")):O.code===403&&g.error("ANALYSIS: Insufficient permissions for document access"),!1}if(!h.collections.chatSessions)return g.error("FATAL: CHAT_SESSIONS_COLLECTION is undefined"),!1;try{g.debug("Testing chat_sessions document access",{collection:h.collections.chatSessions});const O=await K.listDocuments(h.databaseId,h.collections.chatSessions,[b.limit(1)]);g.info("chat_sessions DOCUMENT ACCESS",{totalSessions:O.total}),g.info("Session document access validation: PASSED - Chat can manage sessions")}catch(O){return g.error("CHAT_SESSIONS COLLECTION ACCESS FAILED",{code:O.code,message:O.message,collectionId:h.collections.chatSessions}),O.code===404?(g.error("ANALYSIS: chat_sessions collection missing - need to create it"),g.error("ACTION: Create chat_sessions collection with provided schema")):O.code===401?(g.error("CRITICAL INFRASTRUCTURE ISSUE IDENTIFIED"),g.error("ROOT CAUSE: Guests missing collection read permissions"),g.error('ERROR: User (role: guests) missing scopes (["collections.read"])'),g.error("REQUIRED FIX IN APPWRITE CONSOLE:"),g.error("  1. Navigate to Database ‚Üí Collections ‚Üí chat_sessions"),g.error("  2. Go to Settings ‚Üí Permissions"),g.error('  3. Add "Any" role with "Read" permission'),g.error("  4. Save changes"),g.error("WITHOUT THIS FIX: Session management will remain broken")):O.code===403&&g.error("ANALYSIS: Insufficient permissions for session management"),!1}return!0};return(async()=>{var ee,be;await k()||(g.warn("Infrastructure validation failed - continuing with limited functionality"),g.info("Chat will work but realtime messaging may be limited"),o(ue=>({...ue,connectionStatus:{...ue.connectionStatus,isConnected:!1,quality:"poor"},isAppwriteDegraded:!0,degradationReason:"Real-time messaging temporarily unavailable. Messages will sync when connection restores."})));try{if(g.debug("Initializing connection stability service"),Rn.initialize().catch(ue=>{g.warn("Connection stability service failed to initialize",ue),o(le=>({...le,isAppwriteDegraded:!0,degradationReason:"Connection monitoring temporarily unavailable. Chat functionality may be limited."}))}),Rn.addConnectionListener(ue=>{g.debug("Connection status update",ue),o(le=>({...le,connectionStatus:ue})),p(ue.isConnected)}),f&&((ee=r.therapist)!=null&&ee.id)){const ue=ia.generateConversationId(f,r.therapist.id);E.current=Rn.subscribeToMessages(ue,le=>{if(g.debug("Stable message received",le),!(le.senderId===f||le.recipientId===f))return;const Be=T.current;if(Be&&(le.senderId===Be||le.recipientId===Be)){const Oe={$id:le.$id,senderId:le.senderId,senderName:le.senderName||"Unknown",senderType:le.senderType||"customer",recipientId:le.recipientId,recipientName:le.recipientName||"",message:le.message||le.content||"",createdAt:le.createdAt||le.$createdAt,read:le.read||!1,messageType:le.messageType||"text",roomId:le.roomId||"",isSystemMessage:le.isSystemMessage||!1};o(xe=>xe.messages.some(Me=>Me.$id===Oe.$id)?xe:{...xe,messages:[...xe.messages,Oe]}),g.info("Message added via stable connection",{messageId:Oe.$id})}},le=>{g.error("Stable message subscription error",le)})}g.info("Connection stability service initialized successfully")}catch(ue){g.error("CRITICAL: Connection stability service initialization FAILED",{message:ue.message,code:ue.code,type:ue.type,stack:(be=ue.stack)==null?void 0:be.split("\n").slice(0,3)}),o(le=>({...le,connectionStatus:{...le.connectionStatus,isConnected:!1,quality:"disconnected"}})),p(!1),g.error("PersistentChat: Stable connection setup failed",ue)}})(),()=>{E.current&&(E.current(),E.current=null,g.debug("PersistentChat: Unsubscribed from stable connection")),Rn.destroy()}},[f]);const $=u.useCallback(async k=>{if(!f||!h.collections.chatMessages)return[];try{g.debug("Loading chat history",{therapistId:k});const O=(await K.listDocuments(h.databaseId,h.collections.chatMessages,[b.or([b.and([b.equal("senderId",f),b.equal("recipientId",k)]),b.and([b.equal("senderId",k),b.equal("recipientId",f)])]),b.orderAsc("createdAt"),b.limit(100)])).documents.map(ee=>({$id:ee.$id,senderId:ee.senderId,senderName:ee.senderName||"Unknown",senderType:ee.senderType||"customer",recipientId:ee.recipientId,recipientName:ee.recipientName||"",message:ee.message||ee.content||"",createdAt:ee.createdAt||ee.$createdAt,read:ee.read||!1,messageType:ee.messageType||"text",roomId:ee.roomId||"",isSystemMessage:ee.isSystemMessage||!1}));return g.info("Loaded messages from history",{count:O.length}),O}catch(M){return g.error("Failed to load messages",M),[]}},[f]),H=u.useCallback(async(k,M="book",O=null)=>{var le,Le,Be,$e,Oe;if(g.debug("üí¨ Opening chat with:",{name:k.name,mode:M,source:O}),O==="share"&&g.debug("üì§ SHARED LINK BOOKING: Direct provider booking (no broadcast)"),g.debug("üîç DEBUGGING: Previous therapist:",{name:(le=r.therapist)==null?void 0:le.name,id:(Le=r.therapist)==null?void 0:Le.id}),g.debug("üîç DEBUGGING: New therapist:",{name:k.name,id:k.id}),g.debug("ÔøΩüîí Locking chat to prevent accidental closure during booking"),((Be=k==null?void 0:k.providerType)!=null?Be:"therapist")==="place"&&k.appwriteId&&await Ym(k.appwriteId)){x.current("Another customer is completing a booking with this place. Please try again in a few minutes.");return}if(!k.appwriteId){const xe="CRITICAL: Cannot open chat - therapist.appwriteId is missing for ".concat(k.name,". This is a data integrity issue. Therapist must have valid Appwrite document ID before booking can proceed.");throw g.error(xe,{therapist:k}),new Error(xe)}g.info("VALIDATION PASSED: therapist.appwriteId present",{appwriteId:k.appwriteId}),t(!0),g.debug("AppStateContext notified: chat window is now visible"),d(!0);const be="DRAFT_".concat(Date.now());g.debug("Temporary draft ID (server will generate real ID)",{draftBookingId:be});const ue=f?ia.generateConversationId(f,k.id):"guest_".concat(Date.now(),"_").concat(k.id);if(g.debug("Chat room ID generated",{chatRoomId:ue}),o(xe=>{var je,It,qe,it,rt;g.debug("Setting chat state with new therapist",{previous:{name:(je=xe.therapist)==null?void 0:je.name,id:(It=xe.therapist)==null?void 0:It.id},new:{name:k.name,id:k.id}});const Me={...xe,isOpen:!0,isMinimized:!1,therapist:k,bookingMode:M,bookingStep:"duration",selectedDate:null,selectedTime:null,selectedService:null,bookingSource:O,chatRoomId:ue,messages:((qe=xe.therapist)==null?void 0:qe.appwriteId)===k.appwriteId?xe.messages:[],bookingData:{...xe.bookingData,bookingId:be,status:"pending",therapistId:k.appwriteId||k.$id||k.id,therapistName:k.name}};return g.debug("New state therapist set",{name:(it=Me.therapist)==null?void 0:it.name,id:(rt=Me.therapist)==null?void 0:rt.id}),Me}),f){const xe=k.appwriteId;g.debug("Loading messages with therapistId",{therapistId:xe});const Me=await $(xe);if(Me.length>0){o(qe=>{const it={...qe,messages:Me,bookingStep:qe.currentBooking?"chat":qe.bookingStep};return d(!1),g.debug("Chat unlocked - existing conversation loaded",{bookingStep:it.bookingStep,hasBooking:!!qe.currentBooking}),it});const je=($e=r.currentBooking)==null?void 0:$e.documentId;if(je&&r.currentBooking&&(r.currentBooking.therapistId===xe||((Oe=r.therapist)==null?void 0:Oe.appwriteId)===xe)&&je&&h.collections.bookings)try{const it=(await K.getDocument(h.databaseId,h.collections.bookings,je)).depositDeadlineExtendedAt;it&&o(rt=>{var aa;return((aa=rt.currentBooking)==null?void 0:aa.documentId)===je?{...rt,currentBooking:{...rt.currentBooking,depositDeadlineExtendedAt:it}}:rt})}catch{}}}},[f,$,t,d,r.currentBooking,(Aa=r.therapist)==null?void 0:Aa.appwriteId]),Y=u.useCallback(k=>{var O,ee;const M={$id:"local_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),senderId:k.senderId,senderName:k.senderName,senderType:k.senderId==="system"?"system":"customer",recipientId:((O=r.therapist)==null?void 0:O.id)||"",recipientName:((ee=r.therapist)==null?void 0:ee.name)||"",message:k.message,createdAt:new Date().toISOString(),read:!1,messageType:k.type==="booking"?"booking":k.type==="system"?"system":k.type==="payment_proof"?"payment_proof":"text",roomId:"",isSystemMessage:k.type==="system"};o(be=>({...be,messages:[...be.messages,M]}))},[r.therapist]),ae=u.useCallback(async(k,M,O)=>{g.debug("üí¨ Opening chat with pre-selected service:",{name:k.name,service:M,options:O});const ee=k.appwriteId||k.$id||k.id;if(!ee){const Le="‚ùå CRITICAL: Cannot open chat - no valid ID found for ".concat(k.name,". Checked appwriteId, $id, and id fields - all missing. This is a data integrity issue. Therapist must have valid identifier before booking can proceed.");throw g.error("‚ïê".repeat(80)),g.error(Le),g.error("Therapist object:",k),g.error("‚ïê".repeat(80)),new Error(Le)}g.info("‚úÖ VALIDATION PASSED: therapist document ID resolved:",{therapistDocumentId:ee}),g.debug("üìã ID resolution chain:",{appwriteId:k.appwriteId,$id:k.$id,id:k.id,resolved:ee}),t(!0),g.debug("üìã AppStateContext notified: chat window opening with service");const be=(O==null?void 0:O.isScheduled)||!1,ue="DRAFT_".concat(Date.now());g.debug("üÜî Auto-created booking ID:",{draftBookingId:ue});const le={...k,appwriteId:ee};if(g.debug("‚úÖ Therapist object prepared with resolved ID:",{name:le.name,id:le.id,appwriteId:le.appwriteId}),o(Le=>{var Be,$e;return{...Le,isOpen:!0,isMinimized:!1,therapist:le,bookingMode:be?"schedule":"price",bookingStep:be?"datetime":"confirmation",selectedDuration:M.duration,selectedDate:null,selectedTime:null,selectedService:{...M,isScheduled:be},bookingSource:(Be=O==null?void 0:O.source)!=null?Be:null,messages:(($e=Le.therapist)==null?void 0:$e.appwriteId)===le.appwriteId?Le.messages:[],bookingData:{...Le.bookingData,bookingId:ue,status:"pending",therapistId:ee,therapistName:k.name}}}),d(!0),f){const Le=ee;g.debug("üîç DEBUGGING: Loading messages (service) with resolved therapistId:",{therapistIdForQuery:Le});const Be=await $(Le);Be.length>0&&(o($e=>({...$e,messages:Be})),d(!1),g.debug("üîì Chat unlocked - existing conversation in service booking"))}},[f,$,t,d]),F=u.useCallback(()=>{g.debug("‚ûñ Minimizing chat - resetting to duration selection"),o(k=>({...k,isMinimized:!0,bookingStep:"duration",selectedDuration:null,selectedDate:null,selectedTime:null,selectedService:null,customerName:"",customerWhatsApp:"",customerLocation:"",coordinates:null})),d(!1),t(!1),g.debug("üîì Chat unlocked - minimized and reset"),g.debug("üìã AppStateContext notified: chat window is now hidden")},[]),V=u.useCallback(()=>{g.debug("‚ûï Maximizing chat"),o(k=>({...k,isMinimized:!1}))},[]),pe=u.useCallback(()=>{if(g.debug("üîç closeChat() called - Checking conditions..."),g.debug("  - Current booking:",{hasBooking:!!r.currentBooking}),g.debug("  - Booking step:",{step:r.bookingStep}),g.debug("  - Is locked:",{isLocked:c}),g.debug("üìç CALL STACK:",{stack:new Error().stack}),r.currentBooking||r.bookingStep!=="duration"&&r.bookingStep!=="chat"){g.info("üîí Chat has active booking or critical booking step, minimizing instead of closing"),g.info("üîí Critical steps that prevent closure: details, datetime, confirmation"),o(k=>({...k,isMinimized:!0})),t(!1),g.debug("üìã AppStateContext notified: chat minimized but not closed");return}if(c){g.info("üîí Chat is locked, minimizing instead"),o(k=>({...k,isMinimized:!0})),t(!1),g.debug("üìã AppStateContext notified: locked chat minimized");return}g.warn("‚ùå CRITICAL: Closing chat - THIS SHOULD NOT HAPPEN DURING BOOKING"),o(Ln),d(!1),t(!1),g.debug("üìã AppStateContext notified: chat fully closed")},[c,r.currentBooking,r.bookingStep]),he=u.useCallback(()=>{d(!0)},[]),de=u.useCallback(()=>{d(!1)},[]),Te=u.useCallback(k=>{g.debug("üìã [setBookingStep] Setting step to:",{step:k}),o(M=>{var ee,be;g.debug("üìã [setBookingStep] INSIDE setChatState - prev.bookingStep:",M.bookingStep),g.debug("üìã [setBookingStep] INSIDE setChatState - prev.isOpen:",M.isOpen),g.debug("üìã [setBookingStep] INSIDE setChatState - prev.therapist:",(ee=M.therapist)==null?void 0:ee.name);const O={...M,bookingStep:k,isOpen:k==="chat"?!0:M.isOpen,isMinimized:k==="chat"?!1:M.isMinimized};if(k!=="duration"&&k!=="chat"&&M.currentBooking)try{const ue={bookingStep:k,selectedDuration:M.selectedDuration,selectedDate:M.selectedDate,selectedTime:M.selectedTime,customerName:M.customerName,customerWhatsApp:M.customerWhatsApp,customerLocation:M.customerLocation,coordinates:M.coordinates,selectedService:M.selectedService,therapist:M.therapist,currentBooking:M.currentBooking,bookingId:M.currentBooking.bookingId};localStorage.setItem("active_booking_state",JSON.stringify(ue)),g.debug("üíæ Persisted booking state at step:",{step:k})}catch(ue){g.error("‚ùå Failed to persist booking state:",ue)}else k==="duration"&&(localStorage.removeItem("active_booking_state"),g.debug("üßπ Cleared persisted booking state"));return g.debug("üìã [setBookingStep] NEW State:",{bookingStep:O.bookingStep,isOpen:O.isOpen,isMinimized:O.isMinimized,therapist:(be=O.therapist)==null?void 0:be.name}),O}),k==="chat"&&(g.debug("üîì Unlocking chat and notifying AppStateContext..."),d(!1),t(!0),g.debug("‚úÖ Chat unlocked and AppStateContext notified"))},[t,d]),De=u.useCallback(k=>{o(M=>({...M,selectedDuration:k}))},[o]),we=u.useCallback((k,M)=>{o(O=>({...O,selectedDate:k,selectedTime:M}))},[o]),B=u.useCallback(k=>{o(M=>({...M,customerName:k.name,customerWhatsApp:k.whatsApp,customerLocation:k.location,coordinates:k.coordinates||null})),k.name&&P(k.name)},[o,P]),ne=u.useCallback(async k=>{var be,ue,le,Le;if(g.debug("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê"),g.debug("üí¨ [RELIABLE CHAT] Sending message"),g.debug("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê"),g.debug("Current User ID:",{userId:f||"‚ö†Ô∏è Guest (not logged in)"}),g.debug("Current User Name:",{userName:I||"Guest"}),g.debug("User Type:",{userType:D?"üë§ GUEST":"üîê AUTHENTICATED"}),g.debug("Message Content Length:",{length:((be=k==null?void 0:k.trim())==null?void 0:be.length)||0}),g.debug("Therapist:",{name:((ue=r.therapist)==null?void 0:ue.name)||"‚ùå MISSING",id:((le=r.therapist)==null?void 0:le.id)||""}),g.debug("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê"),!k.trim())return g.error("‚ùå [RELIABLE] Empty message blocked"),{sent:!1,warning:"Message cannot be empty"};if(k.trim().length>2e3)return g.error("‚ùå [RELIABLE] Message too long"),{sent:!1,warning:"Message too long (max 2000 characters)"};if(!((Le=r.therapist)!=null&&Le.id))return g.error("‚ùå [RELIABLE] No recipient - message blocked"),{sent:!1,warning:"No therapist selected for conversation"};if(D&&(g.debug("üîß [RELIABLE] Processing guest message..."),!f||!f.startsWith("guest_")))return g.error("‚ùå [RELIABLE] Invalid guest ID"),{sent:!1,warning:"Guest session invalid. Please refresh the page."};const M=r.therapist,O=ia.generateConversationId(f,M.id);g.debug("üì§ [RELIABLE] Sending to:",{name:M.name});const ee=performance.now();try{g.debug("üí¨ [RELIABLE] Using reliable chat service...");const Be=await jl.sendMessage({conversationId:O,senderId:f,senderName:I||r.customerName||"Guest",senderRole:"customer",receiverId:M.id,receiverName:M.name,receiverRole:"therapist",message:k.trim(),messageType:"text"}),$e=performance.now()-ee;if(Be.success){g.info("‚úÖ [RELIABLE] Message sent successfully!"),g.debug("   ‚ö° Latency: ".concat($e.toFixed(2),"ms"));const xe={$id:Be.messageId||"reliable_".concat(Date.now()),senderId:f,senderName:I||r.customerName||"Guest",senderType:"customer",recipientId:M.id,recipientName:M.name,message:k.trim(),createdAt:new Date().toISOString(),read:!1,messageType:"text",roomId:O,isSystemMessage:!1};return o(Me=>({...Me,messages:[...Me.messages,xe]})),g.debug("‚úÖ [RELIABLE] Local UI updated"),{sent:!0}}else g.error("‚ö†Ô∏è [RELIABLE] Service failed:",Be.error);g.debug("ÔøΩ [FALLBACK] Attempting server-enforced service...");const Oe={senderId:f,senderName:I||r.customerName||"Guest",senderType:"customer",recipientId:M.id,recipientName:M.name,recipientType:"therapist",message:k.trim(),roomId:O};try{g.debug("üîÑ [FALLBACK] Server-enforced service...");const xe=await ds.sendMessage(Oe);if(xe.success&&!xe.isRestricted&&!xe.isViolation){g.info("‚úÖ [FALLBACK] Server-enforced service succeeded");const Me={$id:xe.messageId||"emergency_".concat(Date.now()),senderId:f,senderName:I||r.customerName||"Guest",senderType:"customer",recipientId:M.id,recipientName:M.name,message:k.trim(),createdAt:new Date().toISOString(),read:!1,messageType:"text",roomId:O,isSystemMessage:!1};return o(je=>({...je,messages:[...je.messages,Me]})),{sent:!0,warning:"Sent via emergency fallback"}}if(xe.isRestricted)return{sent:!1,warning:xe.message||"Account restricted"};if(xe.isViolation)return{sent:!1,warning:xe.message||"Message blocked: Policy violation"}}catch(xe){g.error("‚ùå [FALLBACK] Server-enforced service failed:",xe)}return g.error("üö® [CRITICAL] Both primary and fallback services failed"),{sent:!1,warning:"Unable to send message. Please check your connection and try again."}}catch(Be){const $e=performance.now()-ee;return g.error("üö® [100% FACEBOOK] Critical error after",{latency:$e.toFixed(2)+"ms",error:Be}),{sent:!1,warning:"Service temporarily unavailable. Please try again in a moment."}}},[f,I,D,r.therapist,r.customerName,o]),v=u.useCallback(k=>{var O,ee;const M={$id:"system_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),senderId:"system",senderName:"System",senderType:"system",recipientId:((O=r.therapist)==null?void 0:O.id)||"",recipientName:((ee=r.therapist)==null?void 0:ee.name)||"",message:k,createdAt:new Date().toISOString(),read:!0,messageType:"system",roomId:"",isSystemMessage:!0};o(be=>({...be,messages:[...be.messages,M]}))},[r.therapist,o]);u.useEffect(()=>{x.current=v},[v]);const R=u.useRef(!1),q=u.useCallback(async k=>{if(g.info("[EXPIRATION] Timer expired",{phase:k.phase,bookingId:k.bookingId,lifecycle:k.lifecycleStatus}),R.current=!1,k.phase==="THERAPIST_RESPONSE")if(k.lifecycleStatus===Re.PENDING){if(g.info("[EXPIRATION] Therapist timeout - transitioning to EXPIRED"),k.documentId)try{await yt.expireBooking(k.documentId,"Therapist timeout");const M=await yt.getBookingById(k.documentId);(M==null?void 0:M.providerType)==="therapist"&&M.therapistId&&Bn(M.therapistId)}catch(M){g.error("[EXPIRATION] Failed to expire booking",M)}o(M=>{var le;const O=M.currentBooking,ee=(O==null?void 0:O.serviceType)||((le=M.selectedService)==null?void 0:le.serviceName),be=fn(ee),ue=(O==null?void 0:O.bookingType)==="SCHEDULED";return ue&&(R.current=!0),{...M,currentBooking:O?{...O,lifecycleStatus:Re.EXPIRED,...be&&{serviceType:xa}}:null,selectedService:M.selectedService&&be?{...M.selectedService,serviceName:xa}:M.selectedService,...ue?{activeScheduledBookingId:null}:{}}}),setTimeout(()=>{if(R.current){try{localStorage.removeItem("active_scheduled_booking_".concat(f||"guest"))}catch{}R.current=!1}},0),v("‚è∞ Booking cancelled ‚Äì no response in time. Suggested therapists and places are shown below (active/open only). Click one to view and book.")}else g.warn("[EXPIRATION] Cannot expire THERAPIST_RESPONSE - unexpected status",{status:k.lifecycleStatus});else if(k.phase==="CUSTOMER_CONFIRMATION")if(k.lifecycleStatus===Re.ACCEPTED){if(g.info("[EXPIRATION] Customer timeout - transitioning to EXPIRED"),k.documentId)try{await yt.expireBooking(k.documentId,"Customer confirmation timeout");const M=await yt.getBookingById(k.documentId);(M==null?void 0:M.providerType)==="therapist"&&M.therapistId&&Bn(M.therapistId)}catch(M){g.error("[EXPIRATION] Failed to expire booking",M)}o(M=>{var le;const O=M.currentBooking,ee=(O==null?void 0:O.serviceType)||((le=M.selectedService)==null?void 0:le.serviceName),be=fn(ee),ue=(O==null?void 0:O.bookingType)==="SCHEDULED";return ue&&(R.current=!0),{...M,currentBooking:O?{...O,lifecycleStatus:Re.EXPIRED,...be&&{serviceType:xa}}:null,selectedService:M.selectedService&&be?{...M.selectedService,serviceName:xa}:M.selectedService,...ue?{activeScheduledBookingId:null}:{}}}),setTimeout(()=>{if(R.current){try{localStorage.removeItem("active_scheduled_booking_".concat(f||"guest"))}catch{}R.current=!1}},0),v("‚ùå Booking expired - confirmation not received in time.")}else g.warn("[EXPIRATION] Cannot expire CUSTOMER_CONFIRMATION - unexpected status",{status:k.lifecycleStatus})},[f,o,v]);u.useEffect(()=>{_(q),g.info("[TIMER] Expiration handler registered")},[q,_]);const X=u.useRef(new Set);u.useEffect(()=>{const k=r.currentBooking,M=r.messages;if(!(k!=null&&k.documentId)||(k==null?void 0:k.bookingType)!=="SCHEDULED"||(k==null?void 0:k.lifecycleStatus)!=="ACCEPTED")return;const O=M.find(ue=>ue.messageType==="payment_proof");if(!(O!=null&&O.createdAt))return;const ee=new Date(O.createdAt).getTime();Date.now()-ee<1440*60*1e3||X.current.has(k.documentId)||(X.current.add(k.documentId),(async()=>{try{await yt.declineBooking(k.documentId,"Payment confirmation window expired (24h).")}catch(ue){g.error("[Spec 4.3] Failed to auto-expire provider confirm window",ue),X.current.delete(k.documentId);return}o(ue=>({...ue,currentBooking:ue.currentBooking?{...ue.currentBooking,lifecycleStatus:Re.DECLINED}:null,activeScheduledBookingId:null}));try{localStorage.removeItem("active_scheduled_booking_".concat(f||"guest"))}catch{}v("Booking expired: no confirm/reject within 24 hours. Slot released."),k.bookingId&&C({bookingId:k.bookingId,documentId:k.documentId,lifecycleStatus:Re.DECLINED,isActive:!1})})())},[r.currentBooking,r.messages,o,f,v,C]);const Q=u.useCallback(async k=>{var aa;g.debug("üîí [TRANSACTION] Starting atomic booking creation");const M=r.therapist,O=(M==null?void 0:M.appwriteId)||(M==null?void 0:M.$id)||(M==null?void 0:M.id);if(!O||!(M!=null&&M.name))return v("‚ùå Invalid therapist data. Please refresh and try again."),!1;const ee=f||"guest";if(ee==="guest"||String(ee).startsWith("guest_"))return v("Please sign in or create an account to confirm your booking."),!1;if(Qm(ee,O)){const _e=Al(ee,O),Gt=(_e==null?void 0:_e.providerType)==="place"?"This date and time has been filled.":"Therapist is not available on the date.";return v("‚ùå ".concat(Gt," You cannot book with this provider again. Please choose another therapist or place.")),!1}if(eg(ee,O)){const _e=tg(ee,O),Gt=_e?_e.toLocaleString():"24 hours";return v("‚è≥ Spam filter: you're temporarily blocked from booking this provider. Try again after ".concat(Gt," or choose another therapist or place.")),!1}if(k.bookingType==="SCHEDULED"&&r.activeScheduledBookingId)return v("You already have a scheduled booking in progress. Complete or cancel it (payment confirmed or expired) before creating another."),!1;const ue=k.customerName||I||r.customerName;if(!ue)return v("‚ùå Customer name is required."),!1;let le=k.customerPhone||r.customerWhatsApp||"";if(le=le.replace(/^\+/,""),!le)return v("‚ùå Phone number is required."),!1;const Le=k.duration||r.selectedDuration||60,Be=k.totalPrice||k.price||0,$e=O;g.debug("‚úÖ Therapist Document ID resolved:",{therapistDocumentId:$e});const Oe=(M==null?void 0:M.providerType)||"therapist",xe={therapist:{id:$e,appwriteId:$e,name:M.name||""},customerId:f||"guest",customerName:ue,customerPhone:le,customerWhatsApp:(aa=k.customerWhatsApp)==null?void 0:aa.replace(/^\+/,""),duration:Le,totalPrice:Be,serviceType:k.serviceType||"Traditional Massage",locationZone:k.locationZone||r.customerLocation,customerLocation:r.customerLocation,address:k.address||r.customerLocation||"Address provided in chat",locationType:k.locationType||"home",roomNumber:k.roomNumber||"",coordinates:k.coordinates||r.coordinates||void 0,scheduledDate:k.scheduledDate||r.selectedDate||void 0,scheduledTime:k.scheduledTime||r.selectedTime||void 0,bookingType:k.bookingType||"BOOK_NOW",providerType:Oe,discountCode:k.discountCode,discountPercentage:k.discountPercentage,originalPrice:k.originalPrice};g.debug("üì¶ [TRANSACTION] Parameters prepared:",{therapistId:xe.therapist.id,customerName:xe.customerName,duration:xe.duration,totalPrice:xe.totalPrice});const Me=await Wm(xe);if(!Me.success)return g.error("‚ùå [TRANSACTION] Booking creation failed:",Me.error),v("‚ùå ".concat(Me.error)),!1;g.info("‚úÖ [TRANSACTION] Transaction succeeded, committing state...");const{booking:je,lifecycleStatus:It,timerPhase:qe}=Me.data,it=je.customerName||je.customer_name||ue||r.customerName,rt=je.bookingType==="SCHEDULED"||xe.bookingType==="SCHEDULED";if(o(_e=>({..._e,currentBooking:{...je,customerName:it},customerName:it,bookingStep:"chat",...rt&&je.documentId?{activeScheduledBookingId:je.documentId}:{}})),rt&&je.documentId)try{localStorage.setItem("active_scheduled_booking_".concat(f||"guest"),je.documentId)}catch{}return g.debug("‚úÖ [COMMIT] State updated with booking:",{bookingId:je.bookingId}),C({bookingId:je.bookingId,documentId:je.documentId||null,lifecycleStatus:It,isActive:xo(It)}),g.debug("üîÑ [COMMIT] Booking state ref updated immediately after commit"),S(qe,je.bookingId),g.debug("‚è±Ô∏è [TIMER] Started ".concat(qe," timer for booking ").concat(je.bookingId)),d(!1),t(!0),g.debug("üîì [COMMIT] Chat unlocked after timer start"),Oe==="therapist"&&zm($e),k.discountCode&&v("‚úÖ Booking sent with ".concat(k.discountPercentage,"% discount!")),g.info("‚úÖ [TRANSACTION] Booking creation complete"),!0},[r.therapist,r.selectedDuration,r.customerLocation,r.coordinates,r.selectedDate,r.selectedTime,r.customerName,r.customerWhatsApp,f,I,v,S,C,d,t,o]),te=u.useCallback(k=>{o(M=>({...M,currentBooking:M.currentBooking?{...M.currentBooking,status:k}:null}))},[o]),oe=u.useCallback(k=>{const M=f||"guest";Xm(M,k),Zm(M,k)>=2&&v("‚è≥ Spam filter: you're temporarily blocked from booking this provider for 24 hours. Please try another therapist or place."),o(ee=>ee.activeScheduledBookingId?{...ee,activeScheduledBookingId:null}:ee);try{localStorage.removeItem("active_scheduled_booking_".concat(M))}catch{}},[f,v,o]),Ye=u.useCallback(async()=>{var Be,$e,Oe,xe,Me;const k=r.currentBooking,M=r.therapist,O=(M==null?void 0:M.name)||"Therapist",ee=(k==null?void 0:k.bookingType)===oa.SCHEDULED;if(k!=null&&k.documentId)try{await yt.acceptBooking(k.documentId)}catch(je){g.error("‚ùå [BookingLifecycle] Failed to accept booking:",je)}const be=(Oe=($e=k==null?void 0:k.providerType)!=null?$e:(Be=r.therapist)==null?void 0:Be.providerType)!=null?Oe:"therapist",ue=(k==null?void 0:k.therapistId)||((xe=r.therapist)==null?void 0:xe.appwriteId)||((Me=r.therapist)==null?void 0:Me.$id);be==="therapist"&&ue&&Bn(ue),o(je=>({...je,currentBooking:je.currentBooking?{...je.currentBooking,lifecycleStatus:Re.ACCEPTED,acceptedAt:new Date().toISOString()}:null})),k&&(C({bookingId:k.bookingId,documentId:k.documentId||null,lifecycleStatus:Re.ACCEPTED,isActive:!0}),g.debug("üîÑ [LIFECYCLE] Booking state ref updated: PENDING ‚Üí ACCEPTED"));const le=k.massageFor||(k==null?void 0:k.serviceType)||"Massage",Le=(k==null?void 0:k.locationZone)||"Your location";if(ee?(v("‚úÖ Your booking has been accepted by ".concat(O,".\nArea of massage: ").concat(le,"\nLocation: ").concat(Le,"\n\nTo secure your booking, transfer 30% deposit within 30 minutes and upload proof of payment in this chat.")),v("‚ö†Ô∏è The deposit is non-refundable. You cannot switch to another therapist or place for this booking. Refund only if: therapist no-show, place does not provide the service, or therapist/place agrees to refund.")):v("‚úÖ Your booking has been accepted by ".concat(O,".\nArea of massage: ").concat(le,"\nLocation: ").concat(Le,"\nYou have 1 minute to cancel the booking if needed.")),ee&&(M!=null&&M.bankCardDetails)){const je=$a.parseBankCardString(M.bankCardDetails),It=k==null?void 0:k.totalPrice,qe=$a.formatSystemMessage(je,It);setTimeout(()=>{v(qe),v("‚è±Ô∏è You have 30 minutes to transfer 30% deposit and upload proof in this chat to secure your booking."),g.debug("üí≥ [SecureBankCard] Auto-injected bank details for scheduled booking")},500)}else ee&&setTimeout(()=>{v("Bank details will be shared by the therapist/place in chat. ‚è±Ô∏è You have 30 minutes to transfer 30% deposit and upload proof in this chat to secure your booking.")},500);k!=null&&k.bookingId&&!ee&&(S("CUSTOMER_CONFIRMATION",k.bookingId),g.debug("‚è±Ô∏è [TIMER] Started CUSTOMER_CONFIRMATION timer (60s)"))},[r.therapist,r.currentBooking,S,v,o,C]),et=u.useCallback(async()=>{var Le,Be,$e;const k=r.currentBooking;if(k!=null&&k.documentId)try{await yt.declineBooking(k.documentId,"Therapist declined")}catch(Oe){g.error("‚ùå [BookingLifecycle] Failed to decline booking:",Oe)}const M=(k==null?void 0:k.therapistId)||((Le=r.therapist)==null?void 0:Le.appwriteId)||((Be=r.therapist)==null?void 0:Be.$id),O=(k==null?void 0:k.providerType)==="place"?"place":"therapist";O==="therapist"&&M&&Bn(M),M&&Jm(f||"guest",M,O);const ee=O==="place"?"This date and time has been filled.":"Therapist is not available on the date.";v("‚ùå ".concat(ee," You can view and book other available therapists or open places below."));const be=(k==null?void 0:k.bookingType)==="SCHEDULED",ue=(k==null?void 0:k.serviceType)||(($e=r.selectedService)==null?void 0:$e.serviceName),le=fn(ue);if(o(Oe=>({...Oe,currentBooking:Oe.currentBooking?{...Oe.currentBooking,lifecycleStatus:Re.DECLINED,...le&&{serviceType:xa}}:null,selectedService:Oe.selectedService&&le?{...Oe.selectedService,serviceName:xa}:Oe.selectedService,...be?{activeScheduledBookingId:null}:{}})),be)try{localStorage.removeItem("active_scheduled_booking_".concat(f||"guest"))}catch{}k&&(C({bookingId:k.bookingId,documentId:k.documentId||null,lifecycleStatus:Re.DECLINED,isActive:!1}),g.debug("üîÑ [LIFECYCLE] Booking state ref updated: ‚Üí DECLINED"))},[v,r.currentBooking,r.therapist,f,o,C]),at=u.useCallback(async()=>{var ee;const k=r.currentBooking;if(k!=null&&k.documentId)try{await yt.confirmBooking(k.documentId)}catch(be){g.error("‚ùå [BookingLifecycle] Failed to confirm booking:",be)}const M=(k==null?void 0:k.bookingType)==="SCHEDULED";if(o(be=>({...be,currentBooking:be.currentBooking?{...be.currentBooking,lifecycleStatus:Re.CONFIRMED,confirmedAt:new Date().toISOString()}:null,...M?{activeScheduledBookingId:null}:{}})),M)try{localStorage.removeItem("active_scheduled_booking_".concat(f||"guest"))}catch{}k&&(C({bookingId:k.bookingId,documentId:k.documentId||null,lifecycleStatus:Re.CONFIRMED,isActive:!1}),g.debug("üîÑ [LIFECYCLE] Booking state ref updated: ACCEPTED ‚Üí CONFIRMED"));const O=((ee=r.therapist)==null?void 0:ee.name)||"Therapist";v("üéâ Booking confirmed! ".concat(O," will notify you when they are on the way."))},[r.therapist,r.currentBooking,f,v,o,C]),fe=u.useCallback(async()=>{const k=r.currentBooking;if(!(k!=null&&k.documentId))return;try{await yt.confirmBooking(k.documentId)}catch(O){g.error("‚ùå [BookingLifecycle] Failed to confirm payment (confirmBooking):",O);return}const M=(k==null?void 0:k.bookingType)==="SCHEDULED";if(o(O=>({...O,currentBooking:O.currentBooking?{...O.currentBooking,lifecycleStatus:Re.CONFIRMED,confirmedAt:new Date().toISOString()}:null,...M?{activeScheduledBookingId:null}:{}})),M)try{localStorage.removeItem("active_scheduled_booking_".concat(f||"guest"))}catch{}k&&C({bookingId:k.bookingId,documentId:k.documentId||null,lifecycleStatus:Re.CONFIRMED,isActive:!1}),v("‚úÖ Payment confirmed. Booking is now active and the slot is reserved.")},[r.currentBooking,f,o,C,v]),ve=u.useCallback(async()=>{const k=r.currentBooking;if(!(k!=null&&k.documentId))return;const M=new Date().toISOString();try{await K.updateDocument(h.databaseId,h.collections.bookings||"bookings",k.documentId,{depositDeadlineExtendedAt:M})}catch(O){g.error("‚ùå Failed to extend deposit deadline on reject proof:",O)}v("Proof rejected. Please upload a clear screenshot within 30 minutes."),o(O=>({...O,currentBooking:O.currentBooking?{...O.currentBooking,depositDeadlineExtendedAt:M}:null}))},[r.currentBooking,o,v]),gt=u.useCallback(async(k,M)=>{const O=new Date().toISOString();try{await K.updateDocument(h.databaseId,h.collections.bookings||"bookings",k,{paymentProofUrl:M,paymentProofSubmittedAt:O})}catch(ee){g.error("‚ùå Failed to link payment proof to booking",ee)}},[]),Ft=u.useCallback(async()=>{const k=r.currentBooking;if(!(k!=null&&k.documentId))return;try{await yt.declineBooking(k.documentId,"Refund agreed by provider")}catch(O){g.error("‚ùå [BookingLifecycle] Failed to refund (decline):",O);return}const M=(k==null?void 0:k.bookingType)==="SCHEDULED";if(v("Therapist/place has agreed to refund your deposit. Booking cancelled."),o(O=>({...O,currentBooking:O.currentBooking?{...O.currentBooking,lifecycleStatus:Re.DECLINED}:null,...M?{activeScheduledBookingId:null}:{}})),M)try{localStorage.removeItem("active_scheduled_booking_".concat(f||"guest"))}catch{}k&&C({bookingId:k.bookingId,documentId:k.documentId||null,lifecycleStatus:Re.DECLINED,isActive:!1})},[r.currentBooking,f,v,o,C]),Rt=u.useCallback(async()=>{const k=r.currentBooking;if(k!=null&&k.documentId)try{await yt.declineBooking(k.documentId,"Cancelled by user")}catch(O){g.error("‚ùå [BookingLifecycle] Failed to cancel booking:",O)}const M=(k==null?void 0:k.bookingType)==="SCHEDULED";if(v("Your booking has been cancelled. We will look for another therapist."),o(O=>({...O,currentBooking:O.currentBooking?{...O.currentBooking,lifecycleStatus:Re.DECLINED}:null,...M?{activeScheduledBookingId:null}:{}})),M)try{localStorage.removeItem("active_scheduled_booking_".concat(f||"guest"))}catch{}k&&(C({bookingId:k.bookingId,documentId:k.documentId||null,lifecycleStatus:Re.DECLINED,isActive:!1}),g.debug("üîÑ [LIFECYCLE] Booking state ref updated: ‚Üí CANCELLED/DECLINED"))},[r.currentBooking,f,v,o,C]),Kt=u.useCallback(async()=>{var k;r.currentBooking,(k=r.therapist)!=null&&k.name,o(M=>({...M,currentBooking:M.currentBooking?{...M.currentBooking,therapistOnTheWayAt:new Date().toISOString()}:null})),g.debug("üöó [OPERATIONAL] Therapist on the way (lifecycle: CONFIRMED)"),v("üöó Your therapist is on the way!")},[r.therapist,r.currentBooking,v,o]),Ge=u.useCallback(async()=>{const k=r.currentBooking,M=(k==null?void 0:k.duration)||60,O="".concat(M+30,"-").concat(M+60);if(k!=null&&k.documentId)try{await yt.completeBooking(k.documentId),g.info("üí∞ [BookingLifecycle] Commission recorded - Admin: ".concat(k.adminCommission," IDR | Provider: ").concat(k.providerPayout," IDR"))}catch(ee){g.error("‚ùå [BookingLifecycle] Failed to complete booking:",ee)}o(ee=>({...ee,currentBooking:ee.currentBooking?{...ee.currentBooking,lifecycleStatus:Re.COMPLETED,completedAt:new Date().toISOString()}:null})),k&&(C({bookingId:k.bookingId,documentId:k.documentId||null,lifecycleStatus:Re.COMPLETED,isActive:!1}),g.debug("üîÑ [LIFECYCLE] Booking state ref updated: ‚Üí COMPLETED")),v("‚ú® Service completed!\n\n‚è±Ô∏è Total session: ".concat(O," minutes\n   ‚Ä¢ Massage: ").concat(M," min\n   ‚Ä¢ Travel time: 30-60 min\n\nüí≥ PAYMENT OPTIONS:\nüíµ Cash - Pay directly to therapist\nüè¶ Bank Transfer - Use bank details in chat\n\n‚ö†Ô∏è IndaStreet suggests using bank details shared in this chat window to prevent any misunderstanding. If bank details not shared, please request therapist to post them in chat."))},[r.currentBooking,v,o,C]),Wt=u.useCallback(()=>{var O,ee;const k=(O=r.therapist)==null?void 0:O.bankCardDetails,M=(ee=r.currentBooking)==null?void 0:ee.totalPrice;if(k){const be=$a.parseBankCardString(k);if(be&&$a.isValidBankCard(be)){const ue=$a.formatSystemMessage(be,M);v(ue),g.debug("üí≥ [SecureBankCard] Displayed masked bank card details")}else v("üí≥ Bank card details are not properly configured. Please contact the therapist.")}else v("üí≥ Bank card details not available. Please contact the therapist for payment information.")},[r.therapist,r.currentBooking,v]),xt=u.useCallback(k=>{const M=k==="cash"?"Cash":"Bank Transfer";o(O=>({...O,currentBooking:O.currentBooking?{...O.currentBooking,paymentMethod:k,paymentStatus:k==="cash"?"received":"transferred"}:null})),v("‚úÖ Payment confirmed via ".concat(M,". Thank you!"))},[v,o]),ua=u.useCallback(k=>{o(M=>({...M,therapist:M.therapist?{...M.therapist,...k}:null}))},[o]),ma=u.useCallback(k=>{var O,ee;const M=k||((O=r.therapist)==null?void 0:O.availabilityStatus)||((ee=r.therapist)==null?void 0:ee.status);return yn.canBookNow(M)},[r.therapist]),ea=u.useCallback(k=>{var O,ee;const M=k||((O=r.therapist)==null?void 0:O.availabilityStatus)||((ee=r.therapist)==null?void 0:ee.status);return yn.canSchedule(M)},[r.therapist]),ta=u.useCallback((k,M)=>{var ue,le;const O=k||((ue=r.therapist)==null?void 0:ue.availabilityStatus)||((le=r.therapist)==null?void 0:le.status),ee=M||oa.BOOK_NOW,be=yn.canBook(O,ee);return be.allowed?null:be.userMessage||null},[r.therapist]),Ga=u.useMemo(()=>{var k;return{chatState:r,isLocked:c,isConnected:m,openChat:H,openChatWithService:ae,minimizeChat:F,maximizeChat:V,closeChat:pe,lockChat:he,unlockChat:de,setBookingStep:Te,setSelectedDuration:De,setSelectedDateTime:we,setCustomerDetails:B,addMessage:Y,sendMessage:ne,updateTherapist:ua,canBookNow:ma,canSchedule:ea,getAvailabilityMessage:ta,createBooking:Q,updateBookingStatus:te,acceptBooking:Ye,rejectBooking:et,confirmBooking:at,confirmPaymentReceived:fe,rejectPaymentProof:ve,updateBookingPaymentProof:gt,refundDeposit:Ft,cancelBooking:Rt,setOnTheWay:Kt,completeBooking:Ge,shareBankCard:Wt,confirmPayment:xt,addSystemNotification:v,recordDepositTimeout:oe,timerState:A,resumeTimerIfNeeded:L,hasActiveScheduledBooking:!!((k=r.activeScheduledBookingId)!=null&&k),isGuestUser:D,refreshUser:U}},[r,c,m,H,ae,F,V,pe,he,de,Te,De,we,B,Y,ne,ua,ma,ea,ta,Q,te,Ye,et,at,fe,ve,gt,Ft,Rt,Kt,Ge,Wt,xt,v,oe,A,L,D,U]);return e.jsx(Dl.Provider,{value:Ga,children:a})}function Mi(){const a=u.useContext(Dl);if(!a)throw new Error("usePersistentChat must be used within PersistentChatProvider");return a}function ng(){const a=Mi(),{openChat:t,openChatWithService:n,chatState:s,minimizeChat:i,maximizeChat:r}=a,l=a.hasActiveScheduledBooking===!0,o=u.useCallback(j=>{try{window.alert(j)}catch{}},[]),c=u.useCallback(j=>{const E=(j.status||j.availability||"").toString().trim().toLowerCase();return E==="available"||E==="online"?"available":E==="busy"||E==="offline"?"busy":"unknown"},[]),d=u.useCallback((j,E,T)=>l&&(E==="book"||E==="schedule")?(o("You have a scheduled booking in progress. Please complete or cancel it (and wait for payment to be confirmed or the booking to expire) before booking again."),!1):T?!0:c(j)==="busy"?(o("‚ö†Ô∏è Therapist is not active in service. Please check back later."),!1):!0,[l,c,o]),m=u.useCallback(j=>{var Y;const E=j.appwriteId||j.$id||((Y=j.id)==null?void 0:Y.toString());if(!E){const ae="BLOCKED: Therapist missing all ID fields (appwriteId, $id, and id). This is a data integrity issue - therapist must have a valid identifier.";throw new Error(ae)}j.appwriteId||j.$id;const T=j.name;if(!T)throw new Error("Cannot open chat - therapist has no name");const x=fl(j.pricing),A=j.price60&&Number(j.price60)>0||j.price90&&Number(j.price90)>0||j.price120&&Number(j.price120)>0;let S=x,C=j.price60!=null?String(j.price60):void 0,_=j.price90!=null?String(j.price90):void 0,L=j.price120!=null?String(j.price120):void 0;const U=!S||!(S[60]>0||S[90]>0||S[120]>0);if(U&&!A&&!ll(j)){const ae=ol(E);S={30:Math.round(ae[60]*.6/1e3),60:Math.round(ae[60]/1e3),90:Math.round(ae[90]/1e3),120:Math.round(ae[120]/1e3)},C=String(Math.round(ae[60]/1e3)),_=String(Math.round(ae[90]/1e3)),L=String(Math.round(ae[120]/1e3))}else U&&!A&&(S={30:250,60:350,90:450,120:550},C=C!=null?C:"350",_=_!=null?_:"450",L=L!=null?L:"550");if(!U&&S&&!C&&S[60]&&(C=String(Math.round(S[60])),_=String(Math.round(S[90])),L=String(Math.round(S[120]))),!S||Object.keys(S).length===0){const ae=j.profilePicture||j.mainImage||j.mainimage||j.profileImageUrl||j.heroImageUrl||j.image||j.profileImage||Na(E);return{id:T,name:T,image:ae,mainImage:ae,profileImageUrl:ae,profilePicture:j.profilePicture||ae,status:j.availability_status||j.availabilityStatus||j.availability||j.status||"available",pricing:{30:250,60:350,90:450,120:550},price60:C||"350",price90:_||"450",price120:L||"550",duration:60,appwriteId:E}}const $=j.profilePicture||j.mainImage||j.mainimage||j.profileImageUrl||j.heroImageUrl||j.image||j.profileImage||Na(E);return{id:T,name:T,image:$,mainImage:$,profileImageUrl:$,profilePicture:j.profilePicture||$,status:j.availability_status||j.availabilityStatus||j.availability||j.status||"available",pricing:S,price60:C!=null?C:j.price60,price90:_!=null?_:j.price90,price120:L!=null?L:j.price120,duration:60,appwriteId:E,providerType:j.providerType||"therapist"}},[]),p=u.useCallback((j,E=null)=>{if(d(j,"book",E==="share"))try{const T=m(j);t(T,"book",E)}catch{o("Sorry ‚Äî booking chat could not be opened for this therapist. Please try another therapist.")}},[t,m,d,o]),f=u.useCallback((j,E=null)=>{if(!d(j,"schedule",E==="share"))return;const T=!!(j.bankName&&j.accountNumber&&j.accountName)||!!j.bankCardDetails,x=!!j.ktpPhotoUrl;if(!T||!x){o("Scheduled bookings require the provider to add bank details and KTP in their dashboard. This provider is not accepting scheduled bookings at this time.");return}try{const A=m(j);t(A,"schedule",E)}catch{o("Sorry ‚Äî schedule chat could not be opened for this therapist. Please try another therapist.")}},[t,m,d,o]),y=u.useCallback((j,E=null)=>{if(d(j,"price",E==="share"))try{const T=m(j);t(T,"price",E)}catch{o("Sorry ‚Äî price chat could not be opened for this therapist. Please try another therapist.")}},[t,m,d,o]),I=u.useCallback((j,E,T)=>{var S,C,_;const x=(S=T==null?void 0:T.source)!=null?S:null;if(!d(j,"service",x==="share"))return;const A=(T==null?void 0:T.bookingType)||"immediate";try{const L=m(j);A==="scheduled"?n(L,E,{isScheduled:!0,source:(C=T==null?void 0:T.source)!=null?C:null}):n(L,E,{source:(_=T==null?void 0:T.source)!=null?_:null})}catch{o("Sorry ‚Äî booking chat could not be opened for this service. Please try again.")}},[n,m,d,o]),P=u.useCallback(j=>{var E;return s.isOpen&&(((E=s.therapist)==null?void 0:E.appwriteId)||"").toString()===j.toString()},[s.isOpen,s.therapist]),D=u.useCallback(()=>{s.isMinimized?r():i()},[s.isMinimized,i,r]);return{openBookingChat:p,openScheduleChat:f,openPriceChat:y,openBookingWithService:I,isChatOpenFor:P,toggleMinimize:D,isChatOpen:s.isOpen,isMinimized:s.isMinimized,currentTherapist:s.therapist,hasActiveScheduledBooking:l}}const El="https://ik.imagekit.io/7grri5v7d/verified-removebg-preview.png?updatedAt=1768015154565",ko={GOOGLE_MAPS_SCRIPT_ID:"google-maps-script"},Wf=(a,t,n)=>{const s=typeof a=="string"?a.trim():"";if(!s){n==null||n();return}if(document.getElementById(ko.GOOGLE_MAPS_SCRIPT_ID)){window.google&&window.google.maps&&(t==null||t());return}if(window.google&&window.google.maps){t==null||t();return}const i=document.createElement("script");i.id=ko.GOOGLE_MAPS_SCRIPT_ID,i.src="https://maps.googleapis.com/maps/api/js?key=".concat(encodeURIComponent(s),"&libraries=places,geometry&loading=async"),i.async=!0,i.defer=!0,i.onload=()=>t==null?void 0:t(),i.onerror=()=>n==null?void 0:n(),document.head.appendChild(i)},sg=({isOpen:a,onClose:t,therapistName:n,therapistImage:s,safePassIssueDate:i="2025-01-15",chatLang:r="id"})=>{if(!a)return null;const l={id:{issued:"Diterbitkan:",verified:"Terverifikasi untuk melayani di:",hotels:"Hotel & Resort",villas:"Villa & Apartemen",gyms:"Gym & Fitness",homes:"Rumah Pribadi",cardTitle:"Kartu SafePass Indastreet",cardDesc:"Terapis ini membawa kartu identifikasi SafePass Indastreet yang dikeluarkan secara resmi untuk akses ke properti publik dan penginapan.",trustTitle:"Kepercayaan & Profesionalisme",trustPoints:["Verifikasi latar belakang lengkap","Pelatihan layanan profesional","Protokol keamanan yang ketat","Bertanggung jawab terhadap waktu","Ulasan pelanggan terverifikasi"],serviceExcellence:"Komitmen Layanan Sempurna",serviceExcellenceDesc:"Terapis SafePass memahami sepenuhnya bahwa layanan yang lancar dari pemesanan hingga akhir pijat adalah suatu keharusan saat menawarkan layanan pijat di tempat publik mana pun, memastikan ulasan puncak untuk hotel, villa, gym, atau rumah. Itulah mengapa Indastreet dipercaya oleh ribuan tempat publik.",safetyTitle:"Komitmen Keamanan",safetyDesc:"Semua terapis SafePass mematuhi protokol keamanan tertinggi, menjaga privasi klien, dan memberikan layanan berkualitas dengan integritas profesional.",closeBtn:"Tutup"},en:{issued:"Issued:",verified:"Verified to serve in:",hotels:"Hotels & Resorts",villas:"Villas & Apartments",gyms:"Gyms & Fitness Centers",homes:"Private Homes",cardTitle:"Indastreet SafePass Card",cardDesc:"This therapist carries an officially issued Indastreet SafePass identification card for access to public establishments and accommodations.",trustTitle:"Trust & Professionalism",trustPoints:["Complete background verification","Professional service training","Strict safety protocols","Time frame responsible","Verified customer reviews"],serviceExcellence:"Service Excellence Commitment",serviceExcellenceDesc:"SafePass therapists understand completely that smooth service from booking to end of massage is a must when offering massage service in any public establishment, ensuring peak reviews for the hotel, villa, gym, or home. That's why Indastreet is trusted by 1000s of public places.",safetyTitle:"Safety Commitment",safetyDesc:"All SafePass therapists comply with the highest safety protocols, maintain client privacy, and deliver quality services with professional integrity.",closeBtn:"Close"}},o=l[r]||l.id,c=new Date(i).toLocaleDateString(r==="id"?"id-ID":"en-US",{year:"numeric",month:"long",day:"numeric"});return e.jsxs("div",{className:"fixed inset-0 z-[10001] bg-black bg-opacity-60 flex items-center justify-center p-4 animate-fadeIn",onClick:t,children:[e.jsx("style",{children:"\n                @keyframes fadeIn {\n                    from { opacity: 0; }\n                    to { opacity: 1; }\n                }\n                @keyframes slideUp {\n                    from {\n                        opacity: 0;\n                        transform: translateY(20px);\n                    }\n                    to {\n                        opacity: 1;\n                        transform: translateY(0);\n                    }\n                }\n                .animate-fadeIn {\n                    animation: fadeIn 0.2s ease-out;\n                }\n                .animate-slideUp {\n                    animation: slideUp 0.3s ease-out;\n                }\n            "}),e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl animate-slideUp",onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-orange-500 to-orange-600 text-white p-4 rounded-t-2xl",children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-full transition-colors","aria-label":"Close",children:e.jsx(Qe,{size:20})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s||"https://via.placeholder.com/80",alt:n,className:"w-16 h-16 rounded-full border-3 border-white object-cover shadow-lg",onError:d=>{d.target.src="https://via.placeholder.com/80"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold",children:n}),e.jsxs("p",{className:"text-orange-100 text-sm flex items-center gap-1",children:[e.jsx(ja,{size:16}),o.issued," ",c]})]})]})]}),e.jsxs("div",{className:"p-6 space-y-6 bg-white",children:[e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/scaffolding_indastreetsssssss-removebg-preview.png?updatedAt=1768624889133",alt:"SafePass Card",className:"w-full max-w-md mx-auto",loading:"lazy"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Pt,{className:"text-gray-700",size:24}),o.verified]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-white rounded-lg border-2 border-gray-200",children:[e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/hotel%201.png",alt:"Hotel",className:"w-12 h-12 object-contain"}),e.jsx("span",{className:"font-semibold text-gray-900 text-center text-sm",children:o.hotels})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-white rounded-lg border-2 border-gray-200",children:[e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/hotel%202.png",alt:"Villa",className:"w-12 h-12 object-contain"}),e.jsx("span",{className:"font-semibold text-gray-900 text-center text-sm",children:o.villas})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-white rounded-lg border-2 border-gray-200",children:[e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/hotel%203.png",alt:"Gym",className:"w-12 h-12 object-contain"}),e.jsx("span",{className:"font-semibold text-gray-900 text-center text-sm",children:o.gyms})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 bg-white rounded-lg border-2 border-gray-200",children:[e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/hotel%204.png",alt:"Home",className:"w-12 h-12 object-contain"}),e.jsx("span",{className:"font-semibold text-gray-900 text-center text-sm",children:o.homes})]})]})]}),e.jsxs("div",{className:"bg-orange-50 rounded-xl p-5 border border-orange-200",children:[e.jsx("h3",{className:"text-lg font-bold text-orange-900 mb-3",children:o.cardTitle}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:o.cardDesc})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:o.trustTitle}),e.jsx("ul",{className:"space-y-3",children:o.trustPoints.map((d,m)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Pt,{className:"text-orange-600 flex-shrink-0 mt-0.5",size:20}),e.jsx("span",{className:"text-gray-700",children:d})]},m))})]}),e.jsxs("div",{className:"bg-orange-50 rounded-xl p-5 border border-orange-200",children:[e.jsx("h3",{className:"text-lg font-bold text-orange-900 mb-3",children:o.serviceExcellence}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:o.serviceExcellenceDesc})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx("img",{src:El,alt:"Verified",className:"w-6 h-6 object-contain"}),o.safetyTitle]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:o.safetyDesc})]}),e.jsx("button",{onClick:t,className:"w-full py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-bold rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg",children:o.closeBtn})]})]})]})},ig=({children:a,className:t})=>e.jsx("div",{className:"w-full max-w-6xl mx-auto px-4 overflow-x-hidden ".concat(t||""),children:a}),rg=["home","createAccount","login","indastreet-partners","partnership-application","massage-jobs","how-it-works","about","company","contact","hotels-and-villas","blog","indastreet-news","massage-bali","massage-types","facial-types","balinese-massage","deep-tissue-massage","faq","verifiedProBadge","simple-signup","simpleSignup","website-management","admin","adminDashboard","agentPortal"],dn=[{id:"indastreet-partners",labelKey:"partners",icon:"Home"},{id:"partnership-application",labelKey:"joinIndaStreet",icon:"Users"},{id:"massage-jobs",labelKey:"massageJobs",icon:"Briefcase"},{id:"how-it-works",labelKey:"howItWorks",icon:"HelpCircle"},{id:"about",labelKey:"aboutUs",icon:"Info"},{id:"company",labelKey:"companyProfile",icon:"Building"},{id:"contact",labelKey:"contact",icon:"Phone"},{id:"hotels-and-villas",labelKey:"hotelsVillas",icon:"Hotel"},{id:"blog",labelKey:"blog",icon:"BookOpen"},{id:"indastreet-news",labelKey:"indastreetNews",icon:"BookOpen"},{id:"massage-bali",labelKey:"massageInBali",icon:"Heart",sectionBreak:!0},{id:"massage-types",labelKey:"massageDirectory",icon:"BookOpen"},{id:"facial-types",labelKey:"facialDirectory",icon:"BookOpen"},{id:"balinese-massage",labelKey:"balineseMassage",icon:"Heart"},{id:"deep-tissue-massage",labelKey:"deepTissueMassage",icon:"Heart"},{id:"faq",labelKey:"faq",icon:"HelpCircle"},{id:"verifiedProBadge",labelKey:"faq",icon:"Sparkles",labelOverride:"Massage Therapist Standards"},{id:"simple-signup",labelKey:"joinAsProvider",icon:"Users",labelOverride:"Sign Up"},{id:"website-management",labelKey:"websitePartners",icon:"Home"}],og=new Set(rg),lg={simpleSignup:"simple-signup",agentPortal:"admin","agent-portal":"admin",adminDashboard:"admin"};function cg(a){var n;const t=(n=lg[a])!=null?n:a;return og.has(t)?t:"home"}const dg=["Jakarta","Canggu","Seminyak","Kuta","Ubud","Sanur","Nusa Dua","Jimbaran","Denpasar","Yogyakarta","Bandung","Surabaya","Medan","Makassar","Batam"],ug=({onClose:a})=>{const{city:t,setCity:n}=Ci(),{language:s}=os(),i=o=>{n(o),a&&a()},r=s==="id"?"Ganti Kota":"Change City",l=s==="id"?"Kota Saat Ini":"Current City";return e.jsxs("div",{className:"p-4 bg-white rounded-2xl shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Mt,{className:"w-5 h-5 text-teal-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:r})]}),e.jsxs("div",{className:"mb-2 text-sm text-gray-500",children:[l,": ",e.jsx("span",{className:"font-semibold text-teal-600",children:t||(s==="id"?"Belum Dipilih":"Not Selected")})]}),e.jsx("div",{className:"max-h-96  space-y-1",children:dg.map(o=>e.jsxs("button",{onClick:()=>i(o),className:"\n              w-full text-left px-4 py-3 rounded-lg transition-all\n              flex items-center justify-between\n              ".concat(t===o?"bg-teal-50 text-teal-700 font-semibold":"hover:bg-gray-100 text-gray-700","\n            "),children:[e.jsx("span",{children:o}),t===o&&e.jsx(Pt,{className:"w-5 h-5 text-teal-600"})]},o))})]})},mg={Home:zs,Users:Uo,Briefcase:wc,HelpCircle:vc,Info:is,Building:Ko,Phone:Ha,Hotel:kc,BookOpen:xc,Heart:bc,Sparkles:da},vo={en:{partners:"Partners",joinIndaStreet:"Join Indastreet Today",massageJobs:"Job Positions",howItWorks:"How It Works",aboutUs:"About Us",companyProfile:"Company Profile",contact:"Contact",hotelsVillas:"Hotels & Villas",blog:"Blog",indastreetNews:"Indastreet News",massageInBali:"Massage in Bali",massageDirectory:"Massage Directory",facialDirectory:"Facial Directory",balineseMassage:"Balinese Massage",deepTissueMassage:"Deep Tissue Massage",faq:"FAQ",providerPortals:"Provider Portals",websitePartners:"Website Partners",joinAsProvider:"Join as Provider",joinTherapist:"Join Therapist",joinMassageSpa:"Join Massage Spa",joinSkinClinic:"Join Skin Clinic",admin:"Admin",terms:"Terms",privacy:"Privacy",help:"Help",followUs:"Follow Us"},id:{partners:"Mitra",joinIndaStreet:"Gabung Indastreet Hari Ini",massageJobs:"Lowongan Kerja",howItWorks:"Cara Kerja",aboutUs:"Tentang Kami",companyProfile:"Profil Perusahaan",contact:"Kontak",hotelsVillas:"Hotel & Villa",blog:"Blog",indastreetNews:"Indastreet News",massageInBali:"Pijat di Bali",massageDirectory:"Direktori Pijat",facialDirectory:"Direktori Facial",balineseMassage:"Pijat Bali",deepTissueMassage:"Pijat Deep Tissue",faq:"FAQ",providerPortals:"Portal Penyedia",websitePartners:"Mitra Website",joinAsProvider:"Gabung sebagai Penyedia",joinTherapist:"Gabung Terapis",joinMassageSpa:"Gabung Spa Pijat",joinSkinClinic:"Gabung Klinik Kulit",admin:"Admin",terms:"Syarat",privacy:"Privasi",help:"Bantuan",followUs:"Ikuti Kami"}},gg=({isOpen:a,onClose:t,isHome:n=!0,t:s,language:i="en",onMassageJobsClick:r,onHotelPortalClick:l,onVillaPortalClick:o,onTherapistPortalClick:c,onMassagePlacePortalClick:d,onFacialPortalClick:m,onAgentPortalClick:p,onCustomerPortalClick:f,onAdminPortalClick:y,onNavigate:I,onTermsClick:P,onPrivacyClick:D,onQRCodeClick:j,onLoginClick:E})=>{const{city:T}=Ci(),[x,A]=u.useState(!1);if(!a)return null;const S=vo[i]||vo.en,C="admin1",_=()=>{const $=prompt("Enter admin access code:");($||"").trim()===C?L(y,"admin"):$!==null&&alert("Invalid code. Access denied.")},L=($,H)=>{if($){try{$()}catch{}try{t==null||t()}catch{}}else if(H&&I){const Y=cg(H);try{I(Y)}catch{}try{t==null||t()}catch{}}},U=e.jsx(e.Fragment,{children:e.jsxs("div",{className:"fixed inset-0",role:"dialog","aria-modal":"true",style:{zIndex:99999},children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:$=>{$.stopPropagation();try{t==null||t()}catch{}},"aria-hidden":"true"}),e.jsxs("div",{className:"\n            absolute right-0 top-0 bottom-0 bg-white shadow-2xl flex flex-col \n            transition-transform ease-in-out duration-300\n            /* Facebook/Amazon responsive drawer sizing */\n            w-[75%] max-w-[280px]\n            sm:w-[320px] sm:max-w-[320px]\n            md:w-[350px] md:max-w-[350px]\n            lg:w-[380px] lg:max-w-[380px]\n            /* Performance optimizations */\n            will-change-transform contain-layout contain-style contain-paint\n            /* Hardware acceleration for smooth animations */\n            transform-gpu backdrop-blur-sm\n            ".concat(a?"translate-x-0":"translate-x-full","\n          "),style:{zIndex:99999,contain:"layout style paint",transform:a?"translate3d(0, 0, 0)":"translate3d(100%, 0, 0)"},onClick:$=>$.stopPropagation(),"aria-labelledby":"drawer-title","aria-describedby":"drawer-description",children:[e.jsxs("div",{className:"p-6 flex justify-between items-center border-b border-black",children:[e.jsxs("h2",{id:"drawer-title",className:"font-bold text-2xl",children:[e.jsx("span",{className:"text-black",children:"Inda"}),e.jsx("span",{className:"text-orange-500",children:"Street"})]}),e.jsx("button",{onClick:()=>{try{t==null||t()}catch{}},className:"\n                rounded-full transition-all duration-200 touch-manipulation\n                /* Mobile: 56px touch targets */\n                min-w-[56px] min-h-[56px] w-14 h-14 \n                /* Tablet: 48px touch targets */\n                md:min-w-[48px] md:min-h-[48px] md:w-12 md:h-12\n                /* Desktop: 44px touch targets */\n                lg:min-w-[44px] lg:min-h-[44px] lg:w-11 lg:h-11\n                flex items-center justify-center\n                hover:bg-gray-100 active:bg-gray-200\n                will-change-transform contain-layout\n              ","aria-label":"Close navigation menu",title:"Close navigation menu",type:"button",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:e.jsx(Qe,{className:"w-6 h-6 md:w-5 md:h-5 lg:w-6 lg:h-6 text-black transition-transform duration-200"})})]}),e.jsx("nav",{className:"flex-grow p-4",id:"drawer-description","aria-label":"Main navigation",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>L(I?()=>I("home"):void 0,"home"),className:"\n                  flex items-center gap-3 w-full rounded-xl text-left\n                  bg-slate-100 hover:bg-primary-50 border border-slate-200/80\n                  transition-all duration-200 touch-manipulation\n                  py-3 px-4 min-h-[48px]\n                ",type:"button","aria-label":"Go to Home page",style:{touchAction:"manipulation"},children:[e.jsx("span",{className:"w-8 h-8 flex-shrink-0 flex items-center justify-center rounded-lg bg-white border border-slate-200/80","aria-hidden":"true",children:e.jsx(zs,{className:"w-5 h-5 text-primary-600"})}),e.jsx("span",{className:"flex-1 min-w-0 text-sm font-semibold text-slate-800 pl-2",children:i==="id"?"Beranda":"Home"})]}),e.jsx("div",{className:"border-b border-gray-200 pb-4 mb-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>L(void 0,"createAccount"),className:"\n                      flex items-center gap-3 w-full rounded-xl text-left\n                      bg-gradient-to-r from-orange-500 to-orange-600 \n                      hover:from-orange-600 hover:to-orange-700 \n                      shadow-lg hover:shadow-xl transform hover:scale-105 \n                      transition-all duration-200 touch-manipulation\n                      /* Mobile: 56px minimum height for touch */\n                      py-4 px-4 min-h-[56px]\n                      /* Tablet: 48px minimum height */\n                      md:py-3 md:min-h-[48px] \n                      /* Desktop: 44px minimum height */\n                      lg:py-3 lg:min-h-[44px]\n                      will-change-transform\n                    ",type:"button","aria-label":"Create new account",style:{touchAction:"manipulation"},children:[e.jsx("span",{className:"w-8 h-8 flex-shrink-0 flex items-center justify-center rounded-lg","aria-hidden":"true",children:e.jsx(yc,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"flex-1 min-w-0 text-left text-sm text-white font-bold pl-2",children:"Create Account"})]}),e.jsxs("button",{onClick:()=>L(E,"login"),className:"\n                      flex items-center gap-3 w-full rounded-xl text-left\n                      border-2 border-orange-500 bg-white hover:bg-orange-50 \n                      shadow-md hover:shadow-lg transform hover:scale-105 \n                      transition-all duration-200 touch-manipulation\n                      /* Mobile: 56px minimum height for touch */\n                      py-4 px-4 min-h-[56px]\n                      /* Tablet: 48px minimum height */\n                      md:py-3 md:min-h-[48px]\n                      /* Desktop: 44px minimum height */\n                      lg:py-3 lg:min-h-[44px]\n                      will-change-transform\n                    ",type:"button","aria-label":"Sign in to your account",style:{touchAction:"manipulation"},children:[e.jsx("span",{className:"w-8 h-8 flex-shrink-0 flex items-center justify-center rounded-lg","aria-hidden":"true",children:e.jsx(Uo,{className:"w-5 h-5 text-orange-500"})}),e.jsx("span",{className:"flex-1 min-w-0 text-left text-sm text-orange-500 font-bold pl-2",children:"Sign In"})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>A(!x),className:"\n                    flex items-center gap-3 w-full rounded-lg bg-teal-50 \n                    hover:bg-teal-100 transition-colors border-2 border-teal-200\n                    touch-manipulation text-left\n                    /* Mobile: 56px minimum height */\n                    py-3 px-3 min-h-[56px]\n                    /* Tablet: 48px minimum height */\n                    md:py-2 md:min-h-[48px]\n                    /* Desktop: 44px minimum height */\n                    lg:py-2 lg:min-h-[44px]\n                  ",type:"button","aria-expanded":x,"aria-label":"Current city: ".concat(T,". Click to change city"),style:{touchAction:"manipulation"},children:[e.jsx("span",{className:"w-8 h-8 flex-shrink-0 flex items-center justify-center rounded-lg","aria-hidden":"true",children:e.jsx(Mt,{className:"w-5 h-5 text-teal-600"})}),e.jsxs("div",{className:"flex-1 min-w-0 text-left pl-2",children:[e.jsx("span",{className:"text-sm text-gray-700 font-medium block",children:i==="id"?"Kota Saat Ini":"Current City"}),e.jsx("span",{className:"text-xs text-teal-600 font-semibold",children:T||(i==="id"?"Semua Indonesia":"All Indonesia")})]})]}),x&&e.jsx("div",{className:"ml-4 mb-2",children:e.jsx(ug,{onClose:()=>A(!1)})}),Array.isArray(dn)&&(()=>{const $=dn.findIndex(F=>F.sectionBreak),H=$<0?dn:dn.slice(0,$),Y=$<0?[]:dn.slice($),ae=F=>{var de,Te;const V=(de=mg[F==null?void 0:F.icon])!=null?de:zs,pe=F.id==="massage-jobs"?r:I?()=>I(F.id):void 0,he=typeof F.labelOverride=="string"?F.labelOverride:S&&typeof S=="object"&&F.labelKey&&((Te=S[F.labelKey])!=null?Te:F.labelKey)||F.labelKey||"";return e.jsxs("button",{onClick:()=>L(pe,F.id),className:"flex items-center w-full py-2.5 px-3 rounded-lg hover:bg-orange-50 transition-colors text-left",children:[e.jsx("span",{className:"w-8 h-8 flex-shrink-0 flex items-center justify-center rounded-lg","aria-hidden":"true",children:e.jsx(V,{className:"w-5 h-5 text-orange-500"})}),e.jsx("span",{className:"flex-1 min-w-0 text-left text-sm text-gray-700 font-medium pl-2",children:he})]},F.id)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2",children:H.map(ae)}),Y.length>0&&e.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3 space-y-2",children:Y.map(ae)})]})})(),e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4 space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:S.followUs}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("a",{href:"https://www.tiktok.com/@indastreet.team?is_from_webapp=1&sender_device=pc",target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-orange-50 transition-colors","aria-label":"TikTok",children:e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/tik%20tok.png",alt:"",className:"w-8 h-8 object-contain"})}),e.jsx("a",{href:"https://www.facebook.com/share/g/1C2QCPTp62/",target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-orange-50 transition-colors","aria-label":"Facebook",children:e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/facebook.png",alt:"",className:"w-8 h-8 object-contain"})}),e.jsx("a",{href:"https://www.instagram.com/indastreet.id/",target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-orange-50 transition-colors","aria-label":"Instagram",children:e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/instagrame.png",alt:"",className:"w-8 h-8 object-contain"})})]})]}),e.jsxs("button",{onClick:_,className:"w-full text-center py-2 text-sm text-gray-500 hover:text-purple-600 transition-colors",children:[S.admin," Portal"]})]})]})]})})]})]})});return typeof document!="undefined"&&document.body?Fo.createPortal(U,document.body):U},pg=({className:a=""})=>{const t=[{name:"TikTok",url:"https://www.tiktok.com/@indastreet.team?is_from_webapp=1&sender_device=pc",imgSrc:"https://ik.imagekit.io/7grri5v7d/tik%20tok.png",color:"hover:opacity-80"},{name:"Facebook",url:"https://www.facebook.com/share/g/1C2QCPTp62/",imgSrc:"https://ik.imagekit.io/7grri5v7d/facebook.png",color:"hover:opacity-80"},{name:"Instagram",url:"https://www.instagram.com/indastreet.id/",imgSrc:"https://ik.imagekit.io/7grri5v7d/instagrame.png",color:"hover:opacity-80"}];return e.jsx("div",{className:"flex justify-center items-center gap-4 py-4 ".concat(a),children:t.map(n=>e.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"transition-all ".concat(n.color),"aria-label":n.name,title:"Follow us on ".concat(n.name),children:e.jsx("img",{src:n.imgSrc,alt:n.name,className:"w-12 h-12 object-contain"})},n.name))})},hg=({className:a="w-6 h-6"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),fg=({autoPlay:a=!0,audioSrc:t="/sounds/booking-notification.mp3"})=>{const[n,s]=u.useState(!1),i=u.useRef(null);u.useEffect(()=>{const l=sessionStorage.getItem("musicHasPlayed");if(a&&!l&&i.current){const o=i.current.play();o!==void 0&&o.then(()=>{s(!0),sessionStorage.setItem("musicHasPlayed","true")}).catch(c=>{g.debug("Auto-play was prevented:",c)})}},[a]);const r=l=>{l.preventDefault(),l.stopPropagation(),i.current&&(n?(i.current.pause(),s(!1)):i.current.play().then(()=>{s(!0),sessionStorage.setItem("musicHasPlayed","true")}).catch(o=>{g.error("Failed to play audio:",o)}))};return e.jsxs("div",{className:"music-player-container",onClick:r,title:n?"Click to pause music":"Click to play music",children:[e.jsx("div",{className:"music-bar bar1 ".concat(n?"playing":"")}),e.jsx("div",{className:"music-bar bar2 ".concat(n?"playing":"")}),e.jsx("div",{className:"music-bar bar3 ".concat(n?"playing":"")}),e.jsx("audio",{ref:i,src:t,preload:"auto"})]})},yg=({language:a="en",onLanguageChange:t,showLanguageSelector:n=!0,countryCode:s,onMenuClick:i,showMenuButton:r=!0,onHomeClick:l,showHomeButton:o=!1,showCityInfo:c=!1,title:d,showBrand:m=!0,className:p="",containerClassName:f="",sticky:y=!0})=>{const{city:I,countryCode:P,autoDetected:D,detectionMethod:j,setCity:E,setCountry:T,clearCountry:x}=Ci(),A=s||P||"ID",S="\n        bg-white shadow-md w-full max-w-full z-[9997]\n        ".concat(y?"fixed top-0 left-0 right-0":"","\n        ").concat(p,"\n    ").trim(),C=()=>{if(!t)return;const H=a||"en";if(["US","GB","AU","PH"].includes(A))return;const ae=Pa(A);t(H==="en"?ae:"en")},_=!["US","GB","AU","PH"].includes(A),U=a!=="en"?Wc(A):"üá¨üáß",$=a==="en"?"Switch to ".concat(Pa(A)==="id"?"Indonesian":Pa(A)==="de"?"German":Pa(A)==="ms"?"Malay":Pa(A)==="th"?"Thai":Pa(A)==="tl"?"Tagalog":Pa(A)==="vi"?"Vietnamese":"Local language"):"Switch to English";return e.jsx("header",{className:S,children:e.jsx(ig,{className:"py-2 sm:py-3 max-w-full ".concat(f),children:e.jsxs("div",{className:"flex justify-between items-center max-w-full",children:[m&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 flex-shrink-0",children:[e.jsx("span",{className:"text-black",children:"Inda"}),e.jsx("span",{className:"text-orange-500",children:"Street"})]}),c&&I&&e.jsxs("div",{className:"hidden sm:flex items-center gap-1 text-xs text-gray-600 ml-2 bg-gray-100 px-2 py-1 rounded-full",children:[e.jsx(Mt,{className:"w-3 h-3"}),e.jsxs("span",{children:[I,", ",A]})]}),d&&e.jsx("span",{className:"text-sm text-gray-500 ml-2 hidden sm:inline",children:d})]}),!m&&d&&e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 flex-1 text-center",children:d}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-gray-600 flex-shrink-0",children:[o&&l&&e.jsx("button",{onClick:l,title:"Home",className:"hover:bg-orange-50 rounded-full transition-colors text-gray-600 flex-shrink-0 min-w-[44px] min-h-[44px] w-10 h-10 sm:w-11 sm:h-11 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),n&&t&&_&&e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:C,className:"flex items-center justify-center min-w-[44px] min-h-[44px] w-10 h-10 sm:w-11 sm:h-11 hover:bg-orange-50 rounded-full transition-colors flex-shrink-0 border-0 outline-none",style:{border:"none",textDecoration:"none"},title:$,children:e.jsx("span",{className:"text-xl sm:text-2xl leading-none",style:{textDecoration:"none",border:"none"},children:U})})}),r&&i&&e.jsx("button",{onClick:H=>{H.preventDefault(),H.stopPropagation(),i()},title:"Open navigation menu","aria-label":"Open navigation menu","aria-expanded":"false",role:"button",type:"button",className:"\n                                    hover:bg-orange-50 active:bg-orange-100 rounded-full \n                                    transition-all duration-200 text-orange-500 flex-shrink-0 \n                                    flex items-center justify-center touch-manipulation\n                                    /* Mobile: 56px touch targets for optimal thumb interaction */\n                                    min-w-[56px] min-h-[56px] w-14 h-14\n                                    /* Tablet: 48px balanced for hybrid interaction */\n                                    md:min-w-[48px] md:min-h-[48px] md:w-12 md:h-12\n                                    /* Desktop: 44px optimized for mouse/trackpad */\n                                    lg:min-w-[44px] lg:min-h-[44px] lg:w-11 lg:h-11\n                                    /* Performance optimizations */\n                                    will-change-transform contain-layout contain-style\n                                ",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:e.jsx(Fc,{className:"\n                                    /* Responsive icon sizing */\n                                    w-6 h-6 md:w-5 md:h-5 lg:w-6 lg:h-6\n                                    transition-transform duration-200\n                                    group-hover:scale-105 group-active:scale-95\n                                "})})]})]})})})};function bg(a,t){var i,r,l,o,c;const n=(c=(o=(l=(r=(i=a==null?void 0:a.fullName)!=null?i:a==null?void 0:a.name)!=null?r:t==null?void 0:t.displayName)!=null?l:t==null?void 0:t.name)!=null?o:t==null?void 0:t.email)!=null?c:"Guest Customer";return{customerName:n,userName:n}}function xg(a){if(!a.customerName||a.customerName.trim()==="")throw new Error("‚ùå BOOKING WRITE BLOCKED: customerName is required for all booking operations")}class kg{async getCurrentUser(){try{return await ca.get()}catch{try{return await ca.createAnonymousSession(),await ca.get()}catch{return null}}}async fetchUserChatRoomsWithBookings(){try{const t=await this.getCurrentUser();if(!t)return[];if(!jt.CHAT_SESSIONS)return[];const n=[b.or([b.equal("customerId",t.$id),b.equal("therapistId",t.$id)]),b.orderDesc("$createdAt"),b.limit(50)],s=await K.listDocuments(Yt,jt.CHAT_SESSIONS,n);return await Promise.all(s.documents.map(async r=>{const l={$id:r.$id,bookingId:r.bookingId,providerId:r.therapistId||r.providerId,providerName:r.therapistName||r.providerName,providerImage:r.therapistPhoto||r.providerImage,customerId:r.customerId,customerName:r.customerName,customerWhatsApp:r.customerWhatsApp,status:r.status||"active",pricing:r.pricing||{},createdAt:r.$createdAt,lastMessageAt:r.lastMessageAt,unreadCount:r.unreadCount||0,duration:r.duration};if(r.bookingId&&jt.BOOKINGS)try{const o=await K.getDocument(Yt,jt.BOOKINGS,r.bookingId),c=new Date(o.$createdAt),d=o.bookingType==="book_now"?5:25,m=new Date(c.getTime()+d*60*1e3);l.serviceDate=o.bookingDate||o.scheduledDate,l.serviceTime=o.startTime||o.scheduledTime,l.serviceDuration=String(o.duration||60),l.serviceType=o.service||o.serviceType||"Massage",l.bookingType=o.bookingType||(o.scheduledDate?"scheduled":"book_now"),l.therapistPhoto=r.therapistPhoto||r.providerImage,l.responseDeadline=m.toISOString(),l.bookingStatus=o.status}catch{}return l}))}catch{return[]}}async createBookingWithChat(t){try{const n=await this.getCurrentUser();if(!n)throw new Error("Authentication required");const s=bg(n);xg(s);const i=se.unique(),r=new Date,l=t.bookingType==="book_now"?5:25,o=new Date(r.getTime()+l*60*1e3),c=await K.createDocument(Yt,jt.BOOKINGS,i,{bookingId:i,customerId:n.$id,customerName:s.customerName,userName:s.userName,therapistId:t.therapistId,therapistName:t.therapistName,service:t.serviceType,serviceType:t.serviceType,duration:t.duration,bookingType:t.bookingType,bookingDate:t.scheduledDate||r.toISOString().split("T")[0],startTime:t.scheduledTime||r.toTimeString().split(" ")[0],scheduledDate:t.scheduledDate,scheduledTime:t.scheduledTime,status:"pending",totalPrice:t.totalPrice,totalCost:t.totalPrice,location:t.location,coordinates:t.coordinates,responseDeadline:o.toISOString(),providerType:"therapist",providerId:t.therapistId,providerName:t.therapistName}),d=se.unique(),m=await K.createDocument(Yt,jt.CHAT_SESSIONS,d,{bookingId:c.$id,customerId:n.$id,customerName:n.name||"Customer",customerWhatsApp:"",therapistId:t.therapistId,therapistName:t.therapistName,therapistPhoto:"",status:"waiting",pricing:{[t.duration]:t.totalPrice},duration:t.duration,serviceType:t.serviceType,bookingType:t.bookingType,responseDeadline:o.toISOString()});return{bookingId:c.$id,chatRoomId:m.$id,customerId:n.$id,customerName:n.name||"Customer",customerWhatsApp:"",therapistId:t.therapistId,therapistName:t.therapistName,therapistPhoto:"",serviceType:t.serviceType,serviceDuration:t.duration,bookingDate:t.scheduledDate||r.toISOString().split("T")[0],bookingTime:t.scheduledTime||r.toTimeString().split(" ")[0],bookingType:t.bookingType,status:"pending",pricing:{[t.duration]:t.totalPrice},responseDeadline:o.toISOString(),totalPrice:t.totalPrice,location:t.location,coordinates:t.coordinates}}catch{return null}}async updateBookingStatus(t,n,s){try{await K.updateDocument(Yt,jt.BOOKINGS,t,{status:n,updatedAt:new Date().toISOString(),...s&&{statusReason:s}});try{const i=await K.listDocuments(Yt,jt.CHAT_SESSIONS,[b.equal("bookingId",t)]);if(i.documents.length>0){const r=i.documents[0];await K.updateDocument(Yt,jt.CHAT_SESSIONS,r.$id,{status:n==="confirmed"?"active":n,lastStatusUpdate:new Date().toISOString()})}}catch{}return!0}catch{return!1}}calculateTimeRemaining(t){const n=new Date(t),s=new Date,i=n.getTime()-s.getTime(),r=Math.floor(i/1e3),l=r<=0,o=r<=300,c=r<=120;let d="";if(l)d="Expired";else if(r<60)d="".concat(r,"s");else if(r<3600){const m=Math.floor(r/60),p=r%60;d=p>0?"".concat(m,"m ").concat(p,"s"):"".concat(m,"m")}else{const m=Math.floor(r/3600),p=Math.floor(r%3600/60);d=p>0?"".concat(m,"h ").concat(p,"m"):"".concat(m,"h")}return{timeRemaining:Math.max(0,r),formatted:d,isExpired:l,isWithin5Minutes:o,isWithin2Minutes:c}}}const ci=new kg;class vg{constructor(){Z(this,"notificationPermission","default");Z(this,"registrationPromise",null);this.checkNotificationSupport()}checkNotificationSupport(){return"Notification"in window?(this.notificationPermission=Notification.permission,!0):!1}async requestPermission(){if(!("Notification"in window))return"denied";if(this.notificationPermission==="default"){const t=await Notification.requestPermission();this.notificationPermission=t,t==="granted"?localStorage.setItem("notification-permission-granted","true"):localStorage.setItem("notification-permission-granted","false")}return this.notificationPermission}async getServiceWorkerRegistration(){return this.registrationPromise?this.registrationPromise:"serviceWorker"in navigator?(this.registrationPromise=navigator.serviceWorker.ready.catch(()=>null),this.registrationPromise):null}async showNotification(t){try{if(await this.requestPermission()!=="granted")return!1;const s=await this.getServiceWorkerRegistration();if(s)await s.showNotification(t.title,{body:t.body,icon:t.icon||"/icon-192.png",badge:t.badge||"/icon-72.png",tag:t.tag||"booking-notification",requireInteraction:t.requireInteraction||!1,actions:t.actions||[],data:t.data});else{const i=new Notification(t.title,{body:t.body,icon:t.icon||"/icon-192.png",tag:t.tag||"booking-notification",data:t.data});t.requireInteraction||setTimeout(()=>i.close(),5e3)}return!0}catch{return!1}}async notifyBookingStatus(t,n,s,i,r){let l,o,c=!1;switch(t){case"accepted":l="‚úÖ Booking Accepted!",o="".concat(n," has accepted your ").concat(s," booking. You can now chat with them."),c=!0;break;case"rejected":l="‚ùå Booking Declined",o="".concat(n," cannot accept your ").concat(s," booking. We're finding other available therapists."),c=!0;break;case"expired":l="‚è∞ Booking Expired",o="Your booking request has expired. We're automatically searching for other available therapists.",c=!0;break}await this.showNotification({title:l,body:o,tag:"booking-".concat(t,"-").concat(i),requireInteraction:c,actions:[{action:"open-chat",title:"Open Chat"},{action:"dismiss",title:"Dismiss"}],data:{type:"booking_".concat(t),bookingId:i,chatRoomId:r,therapistName:n,serviceType:s}}),this.logNotification(i,t,{therapistName:n,serviceType:s})}async notifyTimeWarning(t,n,s,i){const r=Math.floor(t/60);let l,o="low";if(r<=1)l="‚ö†Ô∏è Final minute! ".concat(n," has less than 1 minute to respond to your ").concat(s," booking."),o="high";else if(r<=2)l="‚è∞ ".concat(n," has ").concat(r," minutes to respond to your ").concat(s," booking."),o="medium";else if(r<=5)l="‚è±Ô∏è ".concat(n," has ").concat(r," minutes to respond to your ").concat(s," booking."),o="medium";else return;await this.showNotification({title:"Booking Response Pending",body:l,tag:"booking-warning-".concat(i),requireInteraction:o==="high",data:{type:"time_warning",bookingId:i,timeRemaining:t,urgency:o}})}async notifyChatMessage(t,n,s,i=!1){const r=i?"üí¨ ".concat(t," (Booking Chat)"):"üí¨ ".concat(t),l=n.length>100?n.substring(0,97)+"...":n;await this.showNotification({title:r,body:l,tag:"chat-".concat(s),requireInteraction:!1,actions:[{action:"reply",title:"Reply"},{action:"open-chat",title:"Open Chat"}],data:{type:"chat_message",chatRoomId:s,senderName:t,originalMessage:n,isBookingChat:i}})}async logNotification(t,n,s){try{if(!jt.NOTIFICATIONS)return;await K.createDocument(Yt,jt.NOTIFICATIONS,se.unique(),{bookingId:t,type:"booking_notification_".concat(n),metadata:JSON.stringify(s),timestamp:new Date().toISOString(),platform:"web_app",userAgent:navigator.userAgent})}catch{}}setupBookingTimers(t,n,s,i,r){const l=new Date(s),o=new Date,c=l.getTime()-o.getTime();if(c<=0)return()=>{};const d=[],m=(f,y)=>{const I=c-f;if(I>0){const P=setTimeout(()=>{this.notifyTimeWarning(Math.floor(f/1e3),i,r,t)},I);d.push(P)}};m(300*1e3),m(120*1e3),m(60*1e3);const p=setTimeout(()=>{this.notifyBookingStatus("expired",i,r,t,n)},c);return d.push(p),()=>{d.forEach(f=>clearTimeout(f))}}hasInteractedWithNotifications(){return localStorage.getItem("notification-permission-granted")==="true"}async showNotificationOnboarding(){return this.hasInteractedWithNotifications()?this.notificationPermission==="granted":confirm("üîî Get notified when therapists respond to your booking requests?\n\nWe'll send you updates about booking status and chat messages so you never miss important information.")?await this.requestPermission()==="granted":(localStorage.setItem("notification-permission-granted","false"),!1)}}const di=new vg,wg="chat_sessions",Ri=u.createContext(null);function qf({children:a}){const[t,n]=u.useState([]),[s,i]=u.useState(new Set),[r,l]=u.useState(!1),[o,c]=u.useState(!0),d=u.useRef([]),m=T=>{i(x=>{const A=new Set(x);return A.delete(T),A})},p=T=>{n(x=>x.filter(A=>A.$id!==T))},f=T=>{i(x=>new Set([...x,T]))},y=T=>s.has(T),I=T=>t.find(x=>x.$id===T)||null,P=async()=>{await D()};u.useEffect(()=>{let T=null;return(async()=>{try{T=$t.subscribe("databases.".concat(Yt,".collections.").concat(wg,".documents"),A=>{const S=A.payload;A.events.some(C=>C.includes("create"))&&n(C=>C.find(_=>_.$id===S.$id)?C:[...C,S]),A.events.some(C=>C.includes("update"))&&n(C=>C.map(_=>_.$id===S.$id?S:_)),A.events.some(C=>C.includes("delete"))&&n(C=>C.filter(_=>_.$id!==S.$id))}),l(!0),await D()}catch{l(!1)}finally{c(!1)}})(),()=>{T&&(T(),l(!1))}},[]);const D=async()=>{try{const x=(await ci.fetchUserChatRoomsWithBookings()).map(S=>({$id:S.$id,bookingId:S.bookingId,providerId:S.providerId,providerName:S.providerName,providerImage:S.providerImage,customerId:S.customerId,customerName:S.customerName,customerWhatsApp:S.customerWhatsApp,status:S.status,pricing:S.pricing,createdAt:S.createdAt,expiresAt:null,lastMessageAt:S.lastMessageAt,unreadCount:S.unreadCount||0,duration:S.duration,serviceDate:S.serviceDate,serviceTime:S.serviceTime,serviceDuration:S.serviceDuration,serviceType:S.serviceType,bookingType:S.bookingType,therapistPhoto:S.therapistPhoto||S.providerImage,responseDeadline:S.responseDeadline,bookingStatus:S.bookingStatus}));x.some(S=>S.bookingStatus==="pending"&&S.responseDeadline)&&!di.hasInteractedWithNotifications()&&di.showNotificationOnboarding(),n(x)}catch{n([])}};u.useEffect(()=>{const x=new URLSearchParams(window.location.search).get("chatRoomId");x&&t.length>0&&I(x)&&m(x)},[t]),u.useEffect(()=>{t.forEach(T=>{(T.status==="waiting"||T.status==="active")&&y(T.$id)&&m(T.$id)})},[t]),u.useEffect(()=>{t.length>0&&(t.filter(A=>A.status==="waiting"||A.status==="active").forEach(A=>{y(A.$id)&&m(A.$id)}),t.filter(A=>A.status==="waiting"&&!d.current.includes(A.$id)).forEach(A=>{d.current.push(A.$id)}))},[t]);const E={activeChatRooms:t,isLoading:o,subscriptionActive:r,openChatRoom:m,closeChatRoom:p,minimizeChatRoom:f,isMinimized:y,getChatRoom:I,refreshChatRooms:P,openBookingChat:T=>{const x={$id:"temp_".concat(Date.now()),providerId:T.therapistId,providerName:T.therapistName,providerImage:T.therapistImage||null,status:"booking-in-progress",pricing:T.pricing,createdAt:new Date().toISOString(),expiresAt:null,duration:T.duration};n(A=>[...A,x]),i(A=>{const S=new Set(A);return S.delete(x.$id),S})}};return e.jsx(Ri.Provider,{value:E,children:a})}function Ml(){const a=u.useContext(Ri);if(!a)throw new Error("useChatContext must be used within ChatProvider");return a}function Rl(a,t,n,s){const[i,r]=u.useState([]),[l,o]=u.useState(!1),[c,d]=u.useState(!1),[m,p]=u.useState(null),f=new ct().setEndpoint(h.endpoint).setProject(h.projectId),y=new Zt(f),I=async()=>{if(a)try{o(!0),p(null);const j=await y.listDocuments(h.databaseId,h.collections.chatMessages,[b.equal("chatRoomId",a),b.orderAsc("timestamp"),b.limit(100)]);r(j.documents)}catch(j){p(j.message||"Failed to load messages")}finally{o(!1)}},P=u.useCallback(async j=>{if(!(!a||!j.trim()))try{d(!0),p(null);const E={roomId:a,message:j.trim(),content:j.trim(),senderType:s,senderName:n,senderId:t,recipientId:"system",recipientName:"System",recipientType:"system",messageType:"text",originalLanguage:"en",createdAt:new Date().toISOString(),read:!1,isSystemMessage:!1,conversationId:a,receiverId:"system",receivername:"System",bookingid:"none",originalMessageId:"none",expiresat:new Date(Date.now()+1440*60*1e3).toISOString(),archivedBy:"none",sessionId:a};await y.createDocument(h.databaseId,h.collections.chatMessages,se.unique(),E)}catch(E){throw p(E.message||"Failed to send message"),E}finally{d(!1)}},[a,t,n,s]),D=u.useCallback(async j=>{try{await y.updateDocument(h.databaseId,h.collections.chatMessages,j,{read:!0}),r(E=>E.map(T=>T.$id===j?{...T,read:!0}:T))}catch{}},[]);return u.useEffect(()=>{if(!a){r([]);return}const j=f.subscribe("databases.".concat(h.databaseId,".collections.").concat(h.collections.chatMessages,".documents"),E=>{const T=E.payload;T.chatRoomId===a&&(E.events.includes("databases.*.collections.*.documents.*.create")&&r(x=>x.find(A=>A.$id===T.$id)?x:[...x,T]),E.events.includes("databases.*.collections.*.documents.*.update")&&r(x=>x.map(A=>A.$id===T.$id?T:A)))});return I(),()=>{j()}},[a]),{messages:i,loading:l,sending:c,error:m,sendMessage:P,markAsRead:D}}function Bl(){const[a,t]=u.useState([]),n=u.useCallback((l,o,c,d)=>{const m="notification_".concat(Date.now(),"_").concat(Math.random()),p=(d==null?void 0:d.autoClose)!==!1,f=(d==null?void 0:d.duration)||3e3,y={id:m,type:l,title:o,message:c,timestamp:Date.now(),autoClose:p,duration:f};t(I=>[...I,y]),(l==="success"||l==="warning"||l==="error")&&r(l),p&&setTimeout(()=>{s(m)},f)},[]),s=u.useCallback(l=>{t(o=>o.filter(c=>c.id!==l))},[]),i=u.useCallback(()=>{t([])},[]),r=l=>{try{if(typeof Audio=="undefined")return;const o={info:"/sounds/notification-info.mp3",success:"/sounds/notification-success.mp3",warning:"/sounds/notification-warning.mp3",error:"/sounds/notification-error.mp3"},c=new Audio(o[l]);c.volume=.5,c.play().catch(d=>{})}catch{}};return{notifications:a,addNotification:n,removeNotification:s,clearAll:i}}const Ll=({therapistName:a,therapistPhoto:t,bookingDate:n,bookingTime:s,serviceDuration:i,serviceType:r,bookingType:l="book_now",bookingStatus:o="pending",responseDeadline:c,bookingId:d,chatRoomId:m,onClose:p,onCancelBooking:f})=>{const[y,I]=u.useState({timeRemaining:0,formatted:"",isExpired:!1,isWithin5Minutes:!1,isWithin2Minutes:!1}),[P,D]=u.useState(!1),[j,E]=u.useState(null);u.useEffect(()=>{if(!c){const _=new Date,L=l==="book_now"?5:25,U=new Date(_.getTime()+L*60*1e3),$=setInterval(()=>{const H=ci.calculateTimeRemaining(U.toISOString());I(H)},1e3);return()=>clearInterval($)}const C=setInterval(()=>{const _=ci.calculateTimeRemaining(c);I(_)},1e3);return()=>clearInterval(C)},[c,l]),u.useEffect(()=>{if(c&&d&&m&&!P&&o==="pending"){const C=di.setupBookingTimers(d,m,c,a,r);E(()=>C),D(!0)}return()=>{j&&j()}},[c,d,m,P,o,a,r]);const T=f&&(o==="pending"||o==="waiting_others"),x=()=>y.isExpired?"bg-red-100 border-red-300 text-red-800":y.isWithin2Minutes?"bg-red-50 border-red-200 text-red-700":y.isWithin5Minutes?"bg-yellow-50 border-yellow-200 text-yellow-800":"bg-green-50 border-green-200 text-green-800",A=()=>y.isExpired?"text-red-600 bg-red-100":y.isWithin2Minutes?"text-red-600 bg-red-50 animate-pulse":y.isWithin5Minutes?"text-yellow-600 bg-yellow-50":"text-green-600 bg-green-50",S=()=>{if(y.isExpired||o==="broadcast_all")return"‚è∞ We are now finding the next available therapist in your location for first-come-first-serve acceptance.";if(o==="accepted")return"‚úÖ Booking accepted! You can now chat with your therapist.";if(o==="rejected")return"‚ùå Booking declined - Finding other available therapists...";{const C=l==="book_now"?"5 minutes":"25 minutes";return"‚è≥ Waiting for ".concat(a," to respond (up to ").concat(C,")")}};return e.jsxs("div",{className:"border-2 rounded-lg p-4 mb-4 ".concat(x()),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[t&&e.jsx("img",{src:t,alt:a,className:"w-12 h-12 rounded-full object-cover",onError:C=>{C.currentTarget.style.display="none"}}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:a}),e.jsxs("p",{className:"text-sm opacity-75",children:[r," ‚Ä¢ ",i," minutes"]})]})]}),p&&e.jsx("button",{onClick:p,className:"text-gray-500 hover:text-gray-700 transition-colors",title:"Close",children:"‚úï"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Booking Time:"}),e.jsxs("span",{className:"font-medium",children:[n," at ",s]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm mt-1",children:[e.jsx("span",{className:"opacity-75",children:"Type:"}),e.jsx("span",{className:"font-medium",children:l==="book_now"?"üî• Book Now":"üìÖ Scheduled"})]})]}),e.jsx("div",{className:"mb-3",children:e.jsx("p",{className:"text-sm font-medium",children:S()})}),o==="pending"&&!y.isExpired&&e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat(A()),children:["‚è±Ô∏è Response deadline: ",y.formatted]})}),y.isExpired&&e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium text-red-600 bg-red-100",children:"‚è∞ Expired - Searching alternatives"})}),(T||o==="broadcast_all")&&e.jsxs("div",{className:"mt-3",children:[e.jsx("button",{onClick:f,className:"w-full px-4 py-2 text-sm bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors font-medium",children:"Cancel & Browse Directory"}),o==="broadcast_all"&&e.jsx("p",{className:"text-xs text-gray-600 mt-1 text-center",children:"Browse directory for your preferred Therapist / Places"})]}),e.jsx("div",{className:"mt-2 text-xs opacity-60",children:l==="book_now"?"Immediate booking - therapist has 5 minutes to respond":"Scheduled booking - therapist has 25 minutes to respond"})]})},Ol=({messages:a,loading:t,currentUserId:n,userRole:s,therapistImage:i,customerAvatar:r,therapistName:l,customerName:o})=>{const c=u.useRef(null);u.useEffect(()=>{var y;(y=c.current)==null||y.scrollIntoView({behavior:"smooth"})},[a]);const d=y=>{try{return new Date(y).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return""}},m=y=>y.senderId===n||y.senderType===s,p=y=>{if(y.senderType==="system")return e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-xs",children:"ü§ñ"});if(y.senderType==="therapist"&&i)return e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border-2 border-orange-200 shadow-sm",children:e.jsx("img",{src:i,alt:l||"Therapist",className:"w-full h-full object-cover",onError:D=>{D.target.src="/default-avatar.jpg"}})});if(y.senderType==="customer"&&r)return e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border-2 border-blue-200 shadow-sm",children:e.jsx("img",{src:r.imageUrl,alt:r.label,className:"w-full h-full object-cover",onError:D=>{D.target.src="/default-avatar.jpg"}})});const I=(y.senderName||"U").charAt(0).toUpperCase(),P=(y.senderType==="therapist","bg-orange-500");return e.jsx("div",{className:"w-8 h-8 rounded-full ".concat(P," text-white flex items-center justify-center text-sm font-semibold shadow-sm"),children:I})},f=y=>y.senderType==="system"?{container:"justify-center",bubble:"bg-gray-100 text-gray-700 border border-gray-200 text-xs max-w-sm",alignment:"text-center",showAvatar:!1}:m(y)?{container:"justify-end flex-row-reverse",bubble:"bg-orange-500 text-white shadow-lg",alignment:"text-right",showAvatar:!0,avatarMargin:"mr-0 ml-2"}:{container:"justify-start",bubble:"bg-orange-50 text-orange-900 border border-orange-200 shadow-sm",alignment:"text-left",showAvatar:!0,avatarMargin:"ml-0 mr-2"};return t?e.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block w-8 h-8 border-4 border-orange-200 border-t-orange-500 rounded-full animate-spin mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading messages..."})]})}):a.length===0?e.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"üí¨"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No messages yet"}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Start the conversation!"})]})}):e.jsxs("div",{className:"flex-1 p-4 space-y-4 overflow-y-auto",style:{maxHeight:"60vh",overscrollBehavior:"contain",WebkitOverflowScrolling:"touch"},children:[e.jsx("style",{children:"\n        .scrollbar-hide::-webkit-scrollbar {\n          display: none;\n        }\n      "}),a.map(y=>{const I=f(y);return e.jsxs("div",{className:"flex items-end gap-2 ".concat(I.container),children:[I.showAvatar&&e.jsx("div",{className:"flex-shrink-0 ".concat(I.avatarMargin),children:p(y)}),e.jsx("div",{className:"flex flex-col max-w-xs lg:max-w-md",children:y.senderType==="system"&&(y.content.includes("Booking rejected")||y.content.includes("therapist is busy"))?e.jsxs("div",{style:{maxWidth:"100%",textAlign:"center"},children:[e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/therapist%20is%20busy.png?updatedAt=1770373381563",alt:"Therapist is busy - Finding alternative",style:{maxWidth:"100%",height:"auto",display:"block",margin:"0 auto",borderRadius:"16px"}}),e.jsx("div",{className:"text-xs text-gray-500 mt-2 opacity-70",children:d(y.timestamp)})]}):y.senderType==="system"&&(y.content.includes("on the way")||y.content.includes("On the way")||y.content.includes("On The Way"))?e.jsxs("div",{style:{maxWidth:"100%",textAlign:"center"},children:[e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/therapist%20is%20on%20the%20way.png?updatedAt=1770373549529",alt:"Therapist is on the way",style:{maxWidth:"100%",height:"auto",display:"block",margin:"0 auto",borderRadius:"16px"}}),e.jsx("div",{className:"text-xs text-gray-500 mt-2 opacity-70",children:d(y.timestamp)})]}):e.jsxs(e.Fragment,{children:[!m(y)&&y.senderType!=="system"&&e.jsx("div",{className:"text-xs text-gray-500 mb-1 px-1",children:y.senderName}),e.jsxs("div",{className:"".concat(I.bubble," rounded-2xl px-4 py-3"),children:[y.content&&/discount code|voucher code|discount/i.test(y.content)&&/code[:\s]/i.test(y.content)?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("span",{className:"text-lg font-bold text-orange-600",children:"üéÅ Voucher Code"}),e.jsx("span",{className:"text-2xl font-mono font-bold text-green-700 bg-green-50 px-4 py-2 rounded-lg border border-green-200 mb-2 shadow-sm",children:(()=>{const P=y.content.match(/code[:\s]*([A-Z0-9\-]+)/i);return P?P[1]:"‚Äî"})()}),e.jsx("button",{className:"mt-2 px-6 py-2 bg-gradient-to-r from-orange-400 via-orange-500 to-amber-400 text-white font-bold rounded-full shadow-lg animate-pulse focus:outline-none focus:ring-2 focus:ring-orange-300 transition-all text-lg",onClick:()=>{const P=(()=>{const D=y.content.match(/code[:\s]*([A-Z0-9\-]+)/i);return D?D[1]:""})();window.dispatchEvent(new CustomEvent("openOrderPageWithDiscount",{detail:{therapistId:y.therapistId||"",discountCode:P}}))},children:"Book Now & Use Discount"})]}):e.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:y.content}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs opacity-70 ".concat(I.alignment),children:[e.jsx("span",{children:d(y.timestamp)}),m(y)&&y.senderType!=="system"&&e.jsx("span",{className:"text-xs",children:y.read?"‚úì‚úì":"‚úì"})]})]})]})})]},y.$id)}),e.jsx("div",{ref:c})]})},_l=({onSend:a,sending:t,disabled:n=!1,placeholder:s="Type your message..."})=>{const[i,r]=u.useState(""),l=u.useRef(null),o=1e3,c=o-i.length,d=()=>{const P=l.current;P&&(P.style.height="auto",P.style.height="".concat(Math.min(P.scrollHeight,120),"px"))},m=P=>{const D=P.target.value;D.length<=o&&(r(D),d())},p=async()=>{if(!(!i.trim()||t||n))try{await a(i.trim()),r(""),l.current&&(l.current.style.height="auto")}catch{}},f=P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),p())},y=[{emoji:"üëç",text:"Thank you!"},{emoji:"üëå",text:"Okay"},{emoji:"‚è∞",text:"What time?"},{emoji:"üìç",text:"Share location"}],I=P=>{var D;r(P),(D=l.current)==null||D.focus()};return e.jsxs("div",{className:"border-t bg-white",children:[e.jsx("div",{className:"px-4 pt-2 flex gap-2 horizontal-scroll-safe pb-2",children:y.map((P,D)=>e.jsxs("button",{onClick:()=>I(P.text),disabled:n||t,className:"flex-shrink-0 text-xs px-2 py-1 bg-orange-50 text-orange-600 rounded-full hover:bg-orange-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:P.text,children:[e.jsx("span",{className:"mr-1",children:P.emoji}),P.text]},D))}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("textarea",{ref:l,value:i,onChange:m,onKeyDown:f,placeholder:s,disabled:n||t,className:"w-full p-3 pr-16 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 disabled:bg-gray-100 disabled:cursor-not-allowed transition-all",rows:1,style:{minHeight:"44px",maxHeight:"120px"}}),i.length>o*.8&&e.jsx("div",{className:"absolute bottom-2 right-2 text-xs ".concat(c<50?"text-red-500":"text-gray-400"),children:c})]}),e.jsx("button",{onClick:p,disabled:!i.trim()||n||t,className:"flex-shrink-0 w-11 h-11 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center shadow-sm",title:"Send message",children:t?e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-400 text-center",children:"Press Enter to send ‚Ä¢ Shift+Enter for new line"})]})]})},Zn=[{id:1,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%2017.png?updatedAt=1764960013042",label:"Asian Male 1",gender:"male",race:"asian"},{id:2,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%2015.png?updatedAt=1764959950628",label:"Asian Male 2",gender:"male",race:"asian"},{id:3,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%2013.png?updatedAt=1764959889596",label:"Caucasian Male 1",gender:"male",race:"caucasian"},{id:4,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%2011.png?updatedAt=1764959828146",label:"Caucasian Male 2",gender:"male",race:"caucasian"},{id:5,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%203.png?updatedAt=1764959593146",label:"African Male 1",gender:"male",race:"african"},{id:6,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%208.png?updatedAt=1764959729553",label:"African Male 2",gender:"male",race:"african"},{id:7,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%201.png?updatedAt=1764959491012",label:"Mixed Male 1",gender:"male",race:"mixed"}],es=[{id:11,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%207.png?updatedAt=1764959694505",label:"Asian Female 1",gender:"female",race:"asian"},{id:12,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%202.png?updatedAt=1764959549336",label:"Asian Female 2",gender:"female",race:"asian"},{id:13,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%204.png?updatedAt=1764959623724",label:"Caucasian Female 1",gender:"female",race:"caucasian"},{id:14,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%2012.png?updatedAt=1764959860098",label:"Caucasian Female 2",gender:"female",race:"caucasian"},{id:15,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%2010.png?updatedAt=1764959801858",label:"African Female 1",gender:"female",race:"african"},{id:16,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%2016.png?updatedAt=1764959984734",label:"African Female 2",gender:"female",race:"african"},{id:17,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%2014.png?updatedAt=1764959919170",label:"Mixed Female 1",gender:"female",race:"mixed"}],ts=[{id:21,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%206.png?updatedAt=1764959663603",label:"Asian Child 1",gender:"child",race:"asian",ageGroup:"child"},{id:22,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%206.png?updatedAt=1764959663603",label:"Asian Child 2",gender:"child",race:"asian",ageGroup:"child"},{id:23,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%206.png?updatedAt=1764959663603",label:"Caucasian Child 1",gender:"child",race:"caucasian",ageGroup:"child"},{id:24,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%206.png?updatedAt=1764959663603",label:"Caucasian Child 2",gender:"child",race:"caucasian",ageGroup:"child"},{id:25,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%206.png?updatedAt=1764959663603",label:"African Child 1",gender:"child",race:"african",ageGroup:"child"},{id:26,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%206.png?updatedAt=1764959663603",label:"African Child 2",gender:"child",race:"african",ageGroup:"child"}],Ng=[...Zn,...es,...ts],Sg=[{id:1,imageUrl:"https://ik.imagekit.io/xyprobhyt/avatars/avatar1.jpg",label:"Avatar 1"},{id:2,imageUrl:"https://ik.imagekit.io/xyprobhyt/avatars/avatar2.jpg",label:"Avatar 2"},{id:3,imageUrl:"https://ik.imagekit.io/xyprobhyt/avatars/avatar3.jpg",label:"Avatar 3"},{id:4,imageUrl:"https://ik.imagekit.io/xyprobhyt/avatars/avatar4.jpg",label:"Avatar 4"},{id:5,imageUrl:"https://ik.imagekit.io/xyprobhyt/avatars/avatar5.jpg",label:"Avatar 5"},{id:6,imageUrl:"https://ik.imagekit.io/xyprobhyt/avatars/avatar6.jpg",label:"Avatar 6"},{id:7,imageUrl:"https://ik.imagekit.io/xyprobhyt/avatars/avatar7.jpg",label:"Avatar 7"},{id:8,imageUrl:"https://ik.imagekit.io/xyprobhyt/avatars/avatar8.jpg",label:"Avatar 8"},{id:9,imageUrl:"https://ik.imagekit.io/xyprobhyt/avatars/avatar9.jpg",label:"Avatar 9"},{id:10,imageUrl:"https://ik.imagekit.io/xyprobhyt/avatars/avatar10.jpg",label:"Avatar 10"},{id:11,imageUrl:"https://ik.imagekit.io/xyprobhyt/avatars/avatar11.jpg",label:"Avatar 11"},{id:12,imageUrl:"https://ik.imagekit.io/xyprobhyt/avatars/avatar12.jpg",label:"Avatar 12"},{id:13,imageUrl:"https://ik.imagekit.io/xyprobhyt/avatars/avatar13.jpg",label:"Avatar 13"},{id:14,imageUrl:"https://ik.imagekit.io/xyprobhyt/avatars/avatar14.jpg",label:"Avatar 14"},{id:15,imageUrl:"https://ik.imagekit.io/xyprobhyt/avatars/avatar15.jpg",label:"Avatar 15"}];function $l(a){if(typeof a=="object"){const s=a,i=s.massageFor==="children"?"child":s.massageFor;return Ul(i)}const t=a,n=[...Zn,...es,...ts];if(t){const i=t.split("").reduce((r,l)=>r+l.charCodeAt(0),0)%n.length;return n[i]}else{const s=Math.floor(Math.random()*n.length);return n[s]}}function Ul(a){let t;a==="male"?t=Zn:a==="female"?t=es:a==="child"?t=ts:t=[...Zn,...es,...ts];const n=Math.floor(Math.random()*t.length);return t[n]}const Fl=({userId:a="guest",userName:t="Guest User",userRole:n="customer"})=>{const{activeChatRooms:s,isLoading:i,subscriptionActive:r,openChatRoom:l,closeChatRoom:o,minimizeChatRoom:c,isMinimized:d}=Ml(),[m,p]=u.useState({x:window.innerWidth-420,y:window.innerHeight-620}),[f,y]=u.useState(!1),[I,P]=u.useState({x:0,y:0}),[D,j]=u.useState(null),[E,T]=u.useState(null),[x,A]=u.useState({customerName:"",customerWhatsApp:"",location:"",coordinates:null,serviceVenueType:"home",manualAddress1:"",manualAddress2:"",roomNumber:""}),[S,C]=u.useState(!1);u.useEffect(()=>{const v=async()=>{if(!x.coordinates)try{const{getStoredLocation:R,enhanceLocation:q}=await Ce(async()=>{const{getStoredLocation:Q,enhanceLocation:te}=await import("./silentLocationCapture.CQB_8zQb.js");return{getStoredLocation:Q,enhanceLocation:te}},__vite__mapDeps([9,1,2,3,4,5,6,7,8])),X=R();if(X){const Q=await q(X);A(te=>({...te,coordinates:{lat:Q.lat,lng:Q.lng},location:Q.address||"".concat(Q.lat.toFixed(4),", ").concat(Q.lng.toFixed(4))}))}}catch{}};s.length>0&&v()},[s.length,x.coordinates]);const _=u.useRef(null);u.useEffect(()=>{if(s.length>0&&!D){const v=s[0];j(v.$id),l(v.$id)}},[s,D,l]);const L=s.find(v=>v.$id===D),{messages:U,loading:$,sending:H,error:Y,sendMessage:ae}=Rl((L==null?void 0:L.$id)||null,(L==null?void 0:L.customerId)||"",(L==null?void 0:L.customerName)||"","customer"),{notifications:F,addNotification:V,removeNotification:pe}=Bl();u.useEffect(()=>{if(U.length===0)return;const v=U[U.length-1];v.senderId!==a&&v.senderType!==n&&V("info","New Message","".concat(v.senderName,": ").concat(v.content.substring(0,50)).concat(v.content.length>50?"...":""))},[U.length]);const he=v=>{v.target.closest(".drag-handle")&&(y(!0),P({x:v.clientX-m.x,y:v.clientY-m.y}))},de=v=>{if(f){const R=Math.max(0,Math.min(window.innerWidth-400,v.clientX-I.x)),q=Math.max(0,Math.min(window.innerHeight-600,v.clientY-I.y));p({x:R,y:q})}},Te=()=>{y(!1)};u.useEffect(()=>{if(f)return document.addEventListener("mousemove",de),document.addEventListener("mouseup",Te),()=>{document.removeEventListener("mousemove",de),document.removeEventListener("mouseup",Te)}},[f,I]),u.useEffect(()=>{localStorage.setItem("chat-window-position",JSON.stringify(m))},[m]),u.useEffect(()=>{const v=localStorage.getItem("chat-window-position");if(v)try{const R=JSON.parse(v);p(R)}catch{}},[]);const De=async()=>{if(!(!L||!window.confirm("Are you sure you want to cancel this booking? This action cannot be undone.")))try{const{cancelBooking:R}=await Ce(async()=>{const{cancelBooking:q}=await Promise.resolve().then(()=>ns);return{cancelBooking:q}},void 0);await R(L.bookingId,L.$id,L.customerId),V("success","Booking Cancelled","Your booking has been cancelled successfully",{duration:3e3})}catch(R){V("error","Cancel Failed",R.message||"Could not cancel booking. Please try again.")}},we=async v=>{try{const R={bankName:"Bank Central Asia (BCA)",accountNumber:"1234567890",accountHolder:t||"Therapist Name"},q="üí≥ **Bank Details for Payment**\n\nüè¶ **Bank:** ".concat(R.bankName,"\nüí≥ **Account:** ").concat(R.accountNumber,"\nüë§ **Name:** ").concat(R.accountHolder,"\n\n*Please transfer after service completion*");await ae(q),V("success","Bank Details Shared","Your bank details have been sent to the customer")}catch{V("error","Share Failed","Could not share bank details. Please try again.")}};u.useEffect(()=>{if(s.length>0&&!E){const v=$l(a);T(v),V("success","Avatar Assigned","Your chat avatar has been set!")}},[s.length,E,a]);const B=async()=>{if(!navigator.geolocation){V("error","Not Supported","Geolocation is not supported by your device");return}C(!0),navigator.geolocation.getCurrentPosition(async v=>{const R={lat:v.coords.latitude,lng:v.coords.longitude};try{const{GOOGLE_MAPS_API_KEY:q}=await Ce(async()=>{const{GOOGLE_MAPS_API_KEY:oe}=await Promise.resolve().then(()=>kn);return{GOOGLE_MAPS_API_KEY:oe}},void 0);if(!q){A(oe=>({...oe,coordinates:R,location:"GPS: ".concat(R.lat.toFixed(6),", ").concat(R.lng.toFixed(6))})),C(!1),V("success","Location Set","Using GPS coordinates");return}const X="https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(R.lat,",").concat(R.lng,"&key=").concat(q,"&language=en"),te=await(await fetch(X)).json();if(te.status==="OK"&&te.results&&te.results.length>0){const oe=te.results[0].formatted_address,Ye=te.results[0].address_components;let et="",at="";for(const ve of Ye)(ve.types.includes("locality")||ve.types.includes("administrative_area_level_2"))&&(et=ve.long_name),(ve.types.includes("sublocality")||ve.types.includes("sublocality_level_1"))&&(at=ve.long_name);const fe=at&&et?"".concat(at,", ").concat(et):et||oe;A(ve=>({...ve,coordinates:R,location:fe})),C(!1),V("success","Location Set","Found: ".concat(fe))}else A(oe=>({...oe,coordinates:R,location:"GPS: ".concat(R.lat.toFixed(6),", ").concat(R.lng.toFixed(6))})),C(!1),V("success","Location Set","Using GPS coordinates")}catch{A(X=>({...X,coordinates:R,location:"GPS: ".concat(R.lat.toFixed(6),", ").concat(R.lng.toFixed(6))})),C(!1),V("success","Location Set","Using GPS coordinates")}},v=>{let R="Could not get your location";v.code===v.PERMISSION_DENIED?R="Location permission denied. Please enable in settings.":v.code===v.POSITION_UNAVAILABLE?R="Location information unavailable":v.code===v.TIMEOUT&&(R="Location request timed out"),V("error","Location Error",R),C(!1)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},ne=async v=>{const R=s.find(X=>X.$id===v);if(!R||R.status!=="booking-in-progress")return;if(!x.customerName||!x.customerWhatsApp||!x.coordinates){V("error","Missing Information","Please fill in all required fields and set your location");return}if(!x.manualAddress1&&!x.manualAddress2){V("error","Address Required","Please enter your complete address in the address fields");return}const q=x.customerWhatsApp.replace(/\D/g,"");if(q.length<8||q.length>15){V("error","Invalid WhatsApp","Please enter a valid WhatsApp number (8-15 digits)");return}try{const{databases:X}=await Ce(async()=>{const{databases:Ge}=await Promise.resolve().then(()=>wn);return{databases:Ge}},void 0),{APPWRITE_CONFIG:Q}=await Ce(async()=>{const{APPWRITE_CONFIG:Ge}=await Promise.resolve().then(()=>kn);return{APPWRITE_CONFIG:Ge}},void 0),{ensureAuthSession:te}=await Ce(async()=>{const{ensureAuthSession:Ge}=await import("./authSessionHelper.DPBCHOJc.js");return{ensureAuthSession:Ge}},__vite__mapDeps([0,1,2,3,4,5,6,7,8])),{createChatRoom:oe,sendWelcomeMessage:Ye,sendBookingReceivedMessage:et}=await Ce(async()=>{const{createChatRoom:Ge,sendWelcomeMessage:Wt,sendBookingReceivedMessage:xt}=await Promise.resolve().then(()=>ns);return{createChatRoom:Ge,sendWelcomeMessage:Wt,sendBookingReceivedMessage:xt}},void 0),at=await te("booking confirmation");if(!at.success){V("error","Authentication Failed","Please try again");return}const fe=at.userId,ve="+62".concat(q),gt=R.pricing[String(R.duration)]||0;if(!gt||gt===0){V("error","Price Error","Could not determine service price. Please try again.");return}const Ft={bookingId:"booking_".concat(Date.now()),bookingDate:new Date().toISOString(),userId:String(fe),status:"Pending",duration:Number(R.duration),providerId:String(R.providerId),providerType:"therapist",providerName:String(R.providerName),service:String(R.duration),startTime:new Date().toISOString(),price:Number(Math.round(gt/1e3)),createdAt:new Date().toISOString(),responseDeadline:new Date(Date.now()+300*1e3).toISOString(),totalCost:gt,paymentMethod:"Unpaid",scheduledTime:new Date().toISOString(),customerName:x.customerName,customerWhatsApp:ve,customerLocation:x.location,customerLatitude:x.coordinates.lat,customerLongitude:x.coordinates.lng,serviceVenueType:x.serviceVenueType,manualAddress1:x.manualAddress1,manualAddress2:x.manualAddress2,fullAddress:"".concat(x.manualAddress1).concat(x.manualAddress2?", "+x.manualAddress2:""),bookingType:"immediate",therapistId:R.providerId,therapistName:R.providerName,therapistType:"therapist"},Rt=await X.createDocument(Q.databaseId,Q.collections.bookings||"bookings","unique()",Ft),Kt=await oe({bookingId:Rt.$id,customerId:fe,customerName:x.customerName,customerLanguage:"en",customerPhoto:"",therapistId:R.providerId,therapistName:R.providerName,therapistLanguage:"id",therapistType:"therapist",therapistPhoto:R.providerImage||"",expiresAt:new Date(Date.now()+300*1e3).toISOString()});try{await Ye(Kt.$id||"",R.providerName||"",fe||""),await et(Kt.$id||"",fe||"")}catch{}o(v),V("success","Booking Confirmed","Chat window will update shortly"),A({customerName:"",customerWhatsApp:"",location:"",coordinates:null})}catch(X){V("error","Booking Failed",X.message||"Please try again")}};return s.length===0&&!i?null:e.jsxs(e.Fragment,{children:[s.map((v,R)=>{const q=d(v.$id),X=v.$id===D;return e.jsxs("div",{ref:X?_:null,className:"\n              fixed bg-white rounded-t-2xl shadow-2xl border border-gray-200 z-[60]\n              transition-all duration-300 ease-in-out\n              ".concat(q?"h-16":"max-h-[80vh] h-auto min-h-[400px]","\n              w-96\n            "),style:{right:"".concat(16+R*20,"px"),bottom:"0px",transform:q?"translateY(calc(100% - 64px))":"translateY(0)"},children:[e.jsxs("div",{className:"bg-orange-500 text-white p-4 rounded-t-2xl cursor-move flex items-center justify-between",onMouseDown:X?he:void 0,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"relative flex h-2.5 w-2.5 flex-shrink-0 rounded-full ".concat(X&&Y?"bg-red-400":"bg-green-300"),title:X&&Y?"Connection issue":"Chat active",children:X&&!Y&&e.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-green-300 animate-ping opacity-75"})}),e.jsx("div",{className:"w-10 h-10 min-w-[2.5rem] min-h-[2.5rem] rounded-full bg-orange-400 flex items-center justify-center flex-shrink-0 overflow-hidden",children:v.providerProfilePicture||v.profilePicture?e.jsx("img",{src:v.providerProfilePicture||v.profilePicture,alt:v.providerName,className:"w-full h-full rounded-full object-cover",onError:Q=>{Q.target.style.display="none";const te=Q.target.parentElement;te&&(te.innerHTML='<span class="text-lg font-bold">'.concat(v.providerName.charAt(0).toUpperCase(),"</span>"))}}):e.jsx("span",{className:"text-lg font-bold",children:v.providerName.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[v.providerName,v.status==="booking-in-progress"&&e.jsx("span",{className:"text-sm bg-orange-400 px-2 py-1 rounded-full flex items-center gap-1 animate-pulse",title:"Complete booking to unlock full chat",children:"üîí"})]}),e.jsx("p",{className:"text-orange-100 text-sm",children:v.status==="booking-in-progress"?"üìã Complete Booking Form":"üìç Service Location"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[v.status==="booking-in-progress"&&e.jsx("button",{onClick:()=>{V("info","Chat Locked","Complete the booking form below to unlock full chat features",{duration:3e3})},className:"p-2 hover:bg-orange-600 rounded-full transition-colors text-white animate-pulse",title:"Chat locked until booking is complete",children:"üîí"}),n==="therapist"&&e.jsx("button",{onClick:()=>we(v.$id),className:"p-2 hover:bg-orange-600 rounded-full transition-colors text-white",title:"Share Bank Details",children:"üí≥"}),s.length>1&&e.jsx("button",{onClick:()=>j(v.$id),className:"\n                      p-2 rounded-full transition-colors text-sm font-bold\n                      ".concat(X?"bg-orange-400":"bg-orange-600 hover:bg-orange-400","\n                    "),children:R+1}),e.jsx("button",{onClick:()=>q?l(v.$id):c(v.$id),className:"p-2 hover:bg-orange-600 rounded-full transition-colors",children:q?"‚¨ÜÔ∏è":"‚¨áÔ∏è"}),e.jsx("button",{onClick:()=>o(v.$id),className:"p-2 hover:bg-orange-600 rounded-full transition-colors",children:"‚úï"})]})]}),X&&!q&&e.jsxs("div",{className:"flex flex-col h-[calc(100%-80px)] relative",children:[n==="therapist"&&e.jsxs("div",{className:"px-3 py-2 bg-amber-50 border-b border-amber-200 text-xs text-amber-900",children:[e.jsx("p",{className:"font-medium",children:"‚ö†Ô∏è Reminder"}),e.jsxs("p",{children:["Being marked ",e.jsx("strong",{children:"Available"})," means you are ready to accept bookings. Not meeting our terms may affect your search ranking and can result in account deactivation."]})]}),v.status==="booking-in-progress"&&e.jsxs("div",{className:"flex-1 flex flex-col p-4 relative",children:[e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-50/95 to-white/95 backdrop-blur-md z-20 flex items-center justify-center",children:[e.jsxs("div",{className:"text-center px-6 py-8 max-w-sm bg-white/90 rounded-2xl shadow-2xl border-2 border-orange-200",children:[e.jsxs("div",{className:"mb-6 relative",children:[e.jsx("div",{className:"inline-block text-7xl drop-shadow-2xl lock-bounce filter",children:"üîí"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center -z-10",children:e.jsx("div",{className:"w-24 h-24 bg-orange-200 rounded-full opacity-20 animate-ping"})})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3 drop-shadow",children:"Chat Locked"}),e.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed mb-4 font-medium",children:["Complete the booking form below to unlock the full chat experience with ",e.jsx("span",{className:"text-orange-600 font-bold",children:v.providerName})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-orange-700 font-bold bg-orange-100 rounded-full px-4 py-2 animate-pulse shadow-inner",children:[e.jsx("span",{className:"text-base",children:"‚¨áÔ∏è"}),e.jsx("span",{children:"Scroll down to fill the form"}),e.jsx("span",{className:"text-base",children:"‚¨áÔ∏è"})]}),e.jsx("div",{className:"mt-4 text-xs text-gray-500",children:"Form fields are below"}),"\\n                      "]}),"\\n                    "]}),e.jsxs("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-xl p-4 mb-4",children:[e.jsxs("h3",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-orange-600",children:"üìã"}),"Booking Details"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Therapist:"}),e.jsx("span",{className:"font-medium text-gray-900",children:v.providerName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Service:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[v.duration," minutes massage"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Price:"}),e.jsxs("span",{className:"font-bold text-orange-600",children:["IDR ",Math.round((v.pricing[String(v.duration)]||0)/1e3),"K"]})]}),e.jsxs("div",{className:"flex justify-between border-t border-orange-200 pt-2 mt-2",children:[e.jsx("span",{className:"text-gray-500 text-xs",children:"Admin Fee (30%):"}),e.jsxs("span",{className:"text-gray-700 text-xs font-medium",children:["IDR ",Math.round((v.pricing[String(v.duration)]||0)*.3/1e3),"K"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 text-xs",children:"Therapist Receives:"}),e.jsxs("span",{className:"text-green-600 text-xs font-bold",children:["IDR ",Math.round((v.pricing[String(v.duration)]||0)*.7/1e3),"K"]})]})]})]}),e.jsxs("div",{className:"space-y-4 flex-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:x.customerName,onChange:Q=>A(te=>({...te,customerName:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter your full name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"WhatsApp Number"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-gray-700",children:"+62"}),e.jsx("input",{type:"tel",value:x.customerWhatsApp,onChange:Q=>A(te=>({...te,customerWhatsApp:Q.target.value.replace(/\D/g,"")})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"812345678",required:!0})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter without +62 prefix"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Therapist Gender Preference"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>A(Q=>({...Q,gender:"male"})),className:"px-4 py-3 rounded-lg border-2 font-medium transition-all flex items-center justify-center gap-2 ".concat(x.gender==="male"?"border-orange-500 bg-orange-500 text-white":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"),children:[e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/male_icon-removebg-preview%20(1).png",alt:"Male",className:"w-6 h-6 object-contain"}),"Male"]}),e.jsxs("button",{type:"button",onClick:()=>A(Q=>({...Q,gender:"female"})),className:"px-4 py-3 rounded-lg border-2 font-medium transition-all flex items-center justify-center gap-2 ".concat(x.gender==="female"?"border-orange-500 bg-orange-500 text-white":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"),children:[e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/male_icons-removebg-preview.png",alt:"Female",className:"w-6 h-6 object-contain"}),"Female"]}),e.jsxs("button",{type:"button",onClick:()=>A(Q=>({...Q,gender:"children"})),className:"px-4 py-3 rounded-lg border-2 font-medium transition-all flex items-center justify-center gap-2 ".concat(x.gender==="children"?"border-orange-500 bg-orange-500 text-white":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"),children:[e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/male_iconss-removebg-preview.png",alt:"Children",className:"w-6 h-6 object-contain"}),"Children"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Venue"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>A(Q=>({...Q,serviceVenueType:"home"})),className:"flex-1 px-4 py-2 rounded-lg border-2 font-medium transition-all ".concat(x.serviceVenueType==="home"?"border-orange-500 bg-orange-500 text-white":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"),children:"üè† Home"}),e.jsx("button",{type:"button",onClick:()=>A(Q=>({...Q,serviceVenueType:"villa"})),className:"flex-1 px-4 py-2 rounded-lg border-2 font-medium transition-all ".concat(x.serviceVenueType==="villa"?"border-orange-500 bg-orange-500 text-white":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"),children:"üè° Villa"}),e.jsx("button",{type:"button",onClick:()=>A(Q=>({...Q,serviceVenueType:"hotel"})),className:"flex-1 px-4 py-2 rounded-lg border-2 font-medium transition-all ".concat(x.serviceVenueType==="hotel"?"border-orange-500 bg-orange-500 text-white":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"),children:"üè® Hotel"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address / Building Name"}),e.jsx("input",{type:"text",value:x.manualAddress1||"",onChange:Q=>A(te=>({...te,manualAddress1:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., Jl. Sunset Road No. 123 or Villa Seminyak"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area / District / Postal Code"}),e.jsx("input",{type:"text",value:x.manualAddress2||"",onChange:Q=>A(te=>({...te,manualAddress2:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., Seminyak, Badung 80361"})]}),e.jsxs("div",{className:"hidden",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Location"}),e.jsx("button",{type:"button",onClick:B,disabled:S,className:"w-full px-4 py-3 rounded-lg border-2 font-medium transition-all flex items-center justify-center gap-2 ".concat(x.coordinates?"border-orange-500 bg-orange-500 text-white":"border-gray-300 bg-gray-50 text-gray-600 hover:bg-gray-100"," ").concat(S?"opacity-50 cursor-wait":""),children:e.jsx("span",{children:S?"Getting Location...":x.coordinates?"‚úì Location Set":"Set My Location"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"üåç Location automatically detected for spam verification (Facebook-style)"})]})]}),e.jsx("button",{onClick:()=>ne(v.$id),disabled:!x.customerName||!x.customerWhatsApp||!x.coordinates||!x.manualAddress1&&!x.manualAddress2,className:"w-full mt-4 bg-orange-500 hover:bg-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-bold py-3 rounded-xl transition-colors",children:"Confirm Booking"}),e.jsx("div",{className:"mt-4 bg-yellow-50 border-2 border-yellow-200 rounded-xl p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-2xl animate-pulse",children:"üîí"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-yellow-800 text-sm mb-1",children:"Chat Locked"}),e.jsxs("p",{className:"text-xs text-yellow-700 leading-relaxed",children:["Complete the booking form above to unlock the full chat. Once confirmed, you'll be able to message ",v.providerName," directly."]})]})]})})]}),v.status!=="booking-in-progress"&&e.jsxs(e.Fragment,{children:[e.jsx(Ll,{therapistName:v.providerName,therapistPhoto:v.therapistPhoto,bookingDate:v.serviceDate||"Today",bookingTime:v.serviceTime||"Now",serviceDuration:String(v.serviceDuration||v.duration||60),serviceType:v.serviceType||"Massage",bookingType:v.bookingType||"book_now",bookingStatus:v.status,responseDeadline:v.responseDeadline,bookingId:v.bookingId,chatRoomId:v.$id,onCancelBooking:De}),i&&e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block w-8 h-8 border-4 border-orange-200 border-t-orange-500 rounded-full animate-spin mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading messages..."})]})}),Y&&e.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-4xl mb-2",children:"‚ö†Ô∏è"}),e.jsx("p",{className:"text-red-600 font-medium",children:"Error Loading Messages"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:Y})]})}),!i&&!Y&&e.jsxs("div",{className:"flex-1 relative overflow-y-auto",style:{maxHeight:"400px"},children:[v.status==="booking-in-progress"&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-95 backdrop-blur-sm z-10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center px-6 py-8 max-w-xs",children:[e.jsx("div",{className:"mb-4 animate-bounce",children:e.jsx("div",{className:"inline-block text-6xl drop-shadow-lg",children:"üîí"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Chat Locked"}),e.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed mb-3",children:["Complete the booking form to unlock chat with ",v.providerName]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-orange-600 font-medium",children:[e.jsx("span",{className:"animate-pulse",children:"‚¨áÔ∏è"}),e.jsx("span",{children:"Fill out the form below"}),e.jsx("span",{className:"animate-pulse",children:"‚¨áÔ∏è"})]})]})}),e.jsx(Ol,{messages:U,loading:$,currentUserId:(L==null?void 0:L.customerId)||"",userRole:"customer",therapistImage:L==null?void 0:L.profilePicture,customerAvatar:E,therapistName:L==null?void 0:L.providerName,customerName:t})]}),!i&&!Y&&e.jsx(_l,{onSend:ae,sending:H,placeholder:"Message ".concat(v.providerName,"...")})]})]})]},v.$id)}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm",children:F.map(v=>e.jsx("div",{className:"p-4 rounded-lg shadow-lg border-l-4 transition-all duration-300 ".concat(v.type==="info"?"bg-blue-50 border-blue-500":v.type==="success"?"bg-green-50 border-green-500":v.type==="warning"?"bg-yellow-50 border-yellow-500":"bg-red-50 border-red-500"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:v.title}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:v.message})]}),e.jsx("button",{onClick:()=>pe(v.id),className:"text-gray-400 hover:text-gray-600",children:"‚úï"})]})},v.id))})]})};function jg(a,t){const[n,s]=u.useState([]),[i,r]=u.useState(null),[l,o]=u.useState(!0),[c,d]=u.useState(null),m=new ct().setEndpoint(h.endpoint).setProject(h.projectId),p=new Zt(m),f=async()=>{try{o(!0),d(null);const y=[b.equal(t==="customer"?"customerId":"therapistId",a),b.equal("status","active"),b.orderDesc("$createdAt"),b.limit(50)],I=await p.listDocuments(h.databaseId,h.collections.chatSessions,y);s(I.documents),!i&&I.documents.length>0&&r(I.documents[0])}catch(y){d(y.message||"Failed to load chat rooms")}finally{o(!1)}};return u.useEffect(()=>{if(!a)return;const y=m.subscribe("databases.".concat(h.databaseId,".collections.").concat(h.collections.chatSessions,".documents"),I=>{const P=I.payload;(t==="customer"?P.customerId===a:P.therapistId===a)&&(I.events.includes("databases.*.collections.*.documents.*.create")&&s(j=>[P,...j]),I.events.includes("databases.*.collections.*.documents.*.update")&&(s(j=>j.map(E=>E.$id===P.$id?P:E)),(i==null?void 0:i.$id)===P.$id&&r(P)),I.events.includes("databases.*.collections.*.documents.*.delete")&&(s(j=>j.filter(E=>E.$id!==P.$id)),(i==null?void 0:i.$id)===P.$id&&r(null)))});return f(),()=>{y()}},[a,t]),{chatRooms:n,activeChatRoom:i,loading:l,error:c,setActiveChatRoom:r,refreshRooms:f}}function Ig(a,t){const[n,s]=u.useState(0);u.useEffect(()=>{if(!a||!t)return;const o=()=>{try{const d=new Date("".concat(a," ").concat(t)),m=new Date,p=d.getTime()-m.getTime(),f=Math.floor(p/1e3);s(f>0?f:0)}catch{s(0)}};o();const c=setInterval(o,1e3);return()=>clearInterval(c)},[a,t]);const i=o=>{if(o<=0)return"Session time";const c=Math.floor(o/3600),d=Math.floor(o%3600/60),m=o%60;return c>0?"".concat(c,"h ").concat(d,"m"):d>0?"".concat(d,"m ").concat(m,"s"):"".concat(m,"s")},r=1440*60,l=Math.max(0,Math.min(100,(r-n)/r*100));return{timeRemaining:n,formatted:i(n),isExpired:n<=0,isWithin5Minutes:n>0&&n<=300,isWithin2Minutes:n>0&&n<=120,percentComplete:l}}const Hf=Object.freeze(Object.defineProperty({__proto__:null,AVATAR_OPTIONS:Ng,BookingBanner:Ll,ChatInput:_l,ChatMessages:Ol,FloatingChatWindow:Fl,LEGACY_AVATAR_OPTIONS:Sg,getAutoAssignedAvatar:$l,getRandomAvatarByGender:Ul,useBookingCountdown:Ig,useChatMessages:Rl,useChatRooms:jg,useNotifications:Bl},Symbol.toStringTag,{value:"Module"}));async function Tg(a,t,n,s){try{const i=await qa.getOrCreateShareLink(a,t,n,s);return{shortId:i.shortId,slug:i.slug,url:"https://www.indastreetmassage.com/share/".concat(i.slug,"/").concat(i.entityId)}}catch(i){throw g.error("‚ùå Failed to get/create share link:",i),i}}const wo={[ke.Available]:{text:"text-green-700",bg:"bg-green-100",dot:"bg-green-500",isAvailable:!0},[ke.Busy]:{text:"text-yellow-700",bg:"bg-yellow-100",dot:"bg-yellow-500",isAvailable:!1},[ke.Offline]:{text:"text-red-700",bg:"bg-red-100",dot:"bg-red-500",isAvailable:!1}};class Ag{constructor(){Z(this,"activeBookings",new Map);Z(this,"therapistTimers",new Map);Z(this,"fallbackQueues",new Map);Z(this,"metrics",{totalRequests:0,acceptanceRate:0,averageResponseTime:0,timeoutRate:0,activeTherapists:0})}async initialize(){try{W.info("üöÄ Initializing Enterprise Booking Flow Service..."),await this.setupRealtimeListeners(),W.info("üîä Audio notification system ready"),this.startTherapistMonitoring(),W.info("‚úÖ Enterprise Booking Flow Service initialized")}catch(t){throw W.error("‚ùå Failed to initialize booking flow:",t),t}}async createBookingRequest(t){const n="booking_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),s=new Date,i=new Date(s.getTime()+300*1e3),r={...t,id:n,createdAt:s,expiresAt:i,status:"pending"};return this.activeBookings.set(n,r),this.metrics.totalRequests++,W.info("üìã Created booking request: ".concat(n," (").concat(t.serviceType,")")),await this.initiateBookingFlow(r),n}async initiateBookingFlow(t){try{const n=await this.getAvailableTherapists(t);if(n.length===0){await this.handleNoTherapistsAvailable(t);return}const s=await this.createChatRoom(t);t.chatRoomId=s,await this.assignToTherapist(t,n[0],n.slice(1))}catch(n){W.error("‚ùå Booking flow initiation failed:",n),await this.handleBookingError(t,n)}}async assignToTherapist(t,n,s){t.assignedTherapist=n,t.status="assigned",this.fallbackQueues.set(t.id,s),W.info("üë®‚Äç‚öïÔ∏è Assigned booking ".concat(t.id," to therapist ").concat(n)),await this.notifyTherapist(n,t),this.startCountdownTimer(t,n,s),await this.updateBookingStatus(t)}async notifyTherapist(t,n){try{try{const s=new Audio(n.urgency==="emergency"?"/sounds/emergency-booking.mp3":"/sounds/new-booking.mp3");s.volume=.8,s.play().catch(i=>W.warn("Audio play failed:",i))}catch(s){W.warn("‚ö†Ô∏è [NOTIFY] Audio notification failed:",s)}await this.sendRealtimeNotification(t,{type:"booking-request",bookingId:n.id,userDetails:n.userDetails,services:n.services,totalPrice:n.totalPrice,urgency:n.urgency,location:n.location,expiresAt:n.expiresAt,chatRoomId:n.chatRoomId}),await this.autoOpenTherapistChat(t,n.chatRoomId),W.info("üîî Notified therapist ".concat(t," with audio + real-time alert"))}catch(s){W.error("‚ùå Therapist notification failed:",s)}}startCountdownTimer(t,n,s){const i=setTimeout(async()=>{W.info("‚è∞ Timeout for therapist ".concat(n," on booking ").concat(t.id)),await this.handleTherapistTimeout(t,s)},3e5);this.therapistTimers.set("".concat(t.id,"_").concat(n),i)}async handleTherapistResponse(t){const n=this.activeBookings.get(t.bookingId);if(!n||n.assignedTherapist!==t.therapistId){W.warn("‚ö†Ô∏è Invalid therapist response:",t);return}const s="".concat(t.bookingId,"_").concat(t.therapistId),i=this.therapistTimers.get(s);i&&(clearTimeout(i),this.therapistTimers.delete(s)),t.response==="accept"?await this.handleBookingAcceptance(n,t):await this.handleBookingRejection(n,t),this.updateMetrics(t)}async handleBookingAcceptance(t,n){t.status="accepted",W.info("‚úÖ Booking ".concat(t.id," accepted by therapist ").concat(n.therapistId)),await this.notifyUserBookingAccepted(t,n.therapistId);try{const s=new Audio("/sounds/booking-success.mp3");s.volume=.7,s.play().catch(i=>W.warn("Audio play failed:",i))}catch(s){W.warn("‚ö†Ô∏è [ACCEPT] Audio notification failed:",s)}await this.initiateUserTherapistChat(t,n.therapistId),this.activeBookings.delete(t.id),this.fallbackQueues.delete(t.id)}async handleBookingRejection(t,n){W.error("‚ùå Booking ".concat(t.id," rejected by therapist ").concat(n.therapistId,": ").concat(n.reason));const s=this.fallbackQueues.get(t.id)||[];if(s.length>0){const i=s[0],r=s.slice(1);await this.assignToTherapist(t,i,r)}else await this.handleNoMoreTherapists(t)}async handleTherapistTimeout(t,n){if(W.warn("‚è∞ Therapist timeout for booking ".concat(t.id)),this.metrics.timeoutRate++,n.length>0){const s=n[0],i=n.slice(1);await this.assignToTherapist(t,s,i)}else await this.broadcastToAllTherapists(t)}async broadcastToAllTherapists(t){W.info("üì¢ Broadcasting booking ".concat(t.id," to all available therapists"));const n=await this.getAvailableTherapists(t);if(n.length===0){await this.handleNoTherapistsAvailable(t);return}const s=n.map(i=>this.notifyTherapist(i,t));await Promise.allSettled(s),this.startBroadcastTimer(t)}startBroadcastTimer(t){const n=setTimeout(async()=>{W.warn("‚è∞ Broadcast timeout for booking ".concat(t.id)),await this.handleNoTherapistsAvailable(t)},12e4);this.therapistTimers.set("broadcast_".concat(t.id),n)}async createChatRoom(t){const n="chat_booking_".concat(t.id);return await this.initializeChatRoom(n,{bookingId:t.id,userId:t.userId,userDetails:t.userDetails,services:t.services,location:t.location,type:"booking-chat"}),W.info("üí¨ Created chat room: ".concat(n," for booking ").concat(t.id)),n}async autoOpenTherapistChat(t,n){try{await this.sendRealtimeNotification(t,{type:"auto-open-chat",chatRoomId:n,action:"open-chat-window",priority:"high"})}catch(s){W.error("‚ùå Failed to auto-open therapist chat:",s)}}async getAvailableTherapists(t){try{W.info("üîç Searching for available therapists...");const n=this.extractCityFromAddress(t.location.address),s=await Sa.getAll(n);W.info("üìã Found ".concat(s.length," total therapists in ").concat(n||"all locations"));const i=s.filter(o=>(o.status||o.availability||"").toLowerCase()==="available"||o.isLive===!0);W.info("‚úÖ ".concat(i.length," therapists are currently available"));let r=[...i];t.preferredTherapists&&t.preferredTherapists.length>0&&r.sort((o,c)=>{const d=t.preferredTherapists.includes(o.$id)?1:0;return(t.preferredTherapists.includes(c.$id)?1:0)-d});const l=r.map(o=>o.$id);return l.length===0&&W.warn("‚ö†Ô∏è No available therapists found for this booking"),l}catch(n){return W.error("‚ùå Failed to get available therapists:",n),[]}}extractCityFromAddress(t){const n=["Jakarta","Yogyakarta","Bali","Surabaya","Bandung","Medan","Semarang"],s=t.toLowerCase();for(const i of n)if(s.includes(i.toLowerCase()))return i}_sortTherapistsByPriority(t,n){return t}async handleNoTherapistsAvailable(t){W.warn("‚ö†Ô∏è No therapists available for booking ".concat(t.id)),t.status="expired",await this.notifyUserNoTherapists(t);try{const n=new Audio("/sounds/no-therapists-alert.mp3");n.volume=.7,n.play().catch(s=>W.warn("Audio play failed:",s))}catch(n){W.warn("‚ö†Ô∏è [NO_THERAPISTS] Audio notification failed:",n)}this.activeBookings.delete(t.id),this.fallbackQueues.delete(t.id)}async handleNoMoreTherapists(t){W.warn("‚ö†Ô∏è No more therapists for booking ".concat(t.id)),await this.broadcastToAllTherapists(t)}async sendRealtimeNotification(t,n){try{W.info("üì° Sending real-time notification to ".concat(t,":"),n),typeof window!="undefined"&&window.realtimeService&&window.realtimeService.send(t,n)}catch(s){W.error("‚ùå Real-time notification failed:",s)}}async initializeChatRoom(t,n){try{W.info("üí¨ Initializing chat room ".concat(t," with context:"),n)}catch(s){W.error("‚ùå Chat room initialization failed:",s)}}async notifyUserBookingAccepted(t,n){await this.sendRealtimeNotification(t.userId,{type:"booking-accepted",bookingId:t.id,therapistId:n,chatRoomId:t.chatRoomId,message:"Your booking has been accepted! You can now chat with your therapist."})}async notifyUserNoTherapists(t){await this.sendRealtimeNotification(t.userId,{type:"booking-failed",bookingId:t.id,reason:"no-therapists-available",message:"Sorry, no therapists are currently available. Please try again later."})}async initiateUserTherapistChat(t,n){try{const s={chatRoomId:t.chatRoomId,senderId:"system",message:"Chat started for booking #".concat(t.id.substr(-8),". Your therapist will arrive at ").concat(t.location.address,"."),type:"system"};await this.sendChatMessage(s),W.info("üí¨ Initiated chat between user ".concat(t.userId," and therapist ").concat(n))}catch(s){W.error("‚ùå Failed to initiate chat:",s)}}async sendChatMessage(t){try{W.info("üí¨ Sending chat message:",t)}catch(n){W.error("‚ùå Failed to send chat message:",n)}}mapBookingStatus(t){return{pending:"pending",assigned:"searching",accepted:"confirmed",rejected:"cancelled",expired:"cancelled",completed:"completed"}[t]}async updateBookingStatus(t){try{const n=this.mapBookingStatus(t.status);await oi.updateBookingStatus(t.id,n,{therapistId:t.assignedTherapist,chatRoomId:t.chatRoomId})}catch(n){W.error("‚ùå Failed to update booking status:",n)}}async handleBookingError(t,n){W.error("‚ùå Booking error for ".concat(t.id,":"),n),t.status="expired",await this.notifyUserBookingError(t,n),this.activeBookings.delete(t.id),this.fallbackQueues.delete(t.id)}async notifyUserBookingError(t,n){await this.sendRealtimeNotification(t.userId,{type:"booking-error",bookingId:t.id,error:n.message,message:"An error occurred while processing your booking. Please try again."})}updateMetrics(t){t.response==="accept"&&(this.metrics.acceptanceRate=(this.metrics.acceptanceRate+1)/this.metrics.totalRequests*100);const n=this.metrics.averageResponseTime||0;this.metrics.averageResponseTime=(n+t.responseTime)/2}async setupRealtimeListeners(){try{W.info("üîÑ Setting up real-time booking listeners...")}catch(t){W.error("‚ùå Failed to setup real-time listeners:",t)}}startTherapistMonitoring(){setInterval(async()=>{try{const t=await this.getActiveTherapistCount();this.metrics.activeTherapists=t}catch(t){W.error("‚ùå Therapist monitoring failed:",t)}},3e4)}async getActiveTherapistCount(){try{return 0}catch{return 0}}getMetrics(){return{...this.metrics}}getActiveBookings(){return Array.from(this.activeBookings.values())}cleanupExpiredBookings(){const t=new Date;for(const[n,s]of this.activeBookings.entries())if(s.expiresAt<t){W.info("üßπ Cleaning up expired booking: ".concat(n)),this.activeBookings.delete(n),this.fallbackQueues.delete(n);const i=this.therapistTimers.get("".concat(n,"_").concat(s.assignedTherapist));i&&(clearTimeout(i),this.therapistTimers.delete("".concat(n,"_").concat(s.assignedTherapist)))}}_startCleanupInterval(){setInterval(()=>{this.cleanupExpiredBookings()},6e4)}}const Kl=new Ag;typeof window!="undefined"&&Kl.initialize().catch(a=>W.error("Booking flow initialization failed:",{error:a}));const Cg=new ct().setEndpoint(an.APPWRITE.ENDPOINT).setProject(an.APPWRITE.PROJECT_ID),No=new Zt(Cg),Bs={book_now_behavior:{type:"whatsapp",skipPopup:!0,message:"Hello! I'm interested in booking a massage session. Can you help me schedule an appointment?",openInNewTab:!0},schedule_behavior:{type:"whatsapp",skipPopup:!0,message:"Hello! I'd like to schedule a massage appointment. What times are available?",openInNewTab:!0},welcome_popup:{enabled:!0,delayMs:1e3,showOnce:!0,dismissable:!0},location_modal:{enabled:!0,triggerOnLoad:!1,delayMs:2e3,dismissable:!0},features:{showDiscountBadges:!0,enableAnimations:!0,enableCoinSystem:!0,maintenanceMode:!1}};class Pg{constructor(){Z(this,"cache",new Map);Z(this,"cacheExpiry",300*1e3);Z(this,"lastFetch",new Map)}async getConfig(t){const n=this.lastFetch.get(t)||0;if(this.cache.has(t)&&Date.now()-n<this.cacheExpiry)return this.cache.get(t);try{const s=h.collections.uiConfig;if(!s){const l=Bs[t]||{};return{configKey:t,enabled:!0,settings:l,priority:50}}const i=await No.getDocument(an.APPWRITE.DATABASE_ID,s,t),r={configKey:i.configKey,enabled:i.enabled,settings:JSON.parse(i.settings),priority:i.priority||50};return this.cache.set(t,r),this.lastFetch.set(t,Date.now()),r}catch(s){(s==null?void 0:s.code)===404||(s==null||s.status);const i=Bs[t]||{};return{configKey:t,enabled:!0,settings:i,priority:50}}}async getAllConfigs(){try{const t=h.collections.uiConfig;return t?(await No.listDocuments(an.APPWRITE.DATABASE_ID,t)).documents.map(s=>({configKey:s.configKey,enabled:s.enabled,settings:JSON.parse(s.settings),priority:s.priority||50})).sort((s,i)=>s.priority-i.priority):[]}catch{return[]}}clearCache(){this.cache.clear(),this.lastFetch.clear()}getDefaultConfig(t){const n=Bs[t]||{};return{configKey:t,enabled:!0,settings:n,priority:50}}}const Ls=new Pg;function So(a){var o,c;const[t,n]=u.useState(null),[s,i]=u.useState(!0),r=async()=>{i(!0);try{const d=await Ls.getConfig(a);n(d)}catch{const m=Ls.getDefaultConfig(a);n(m)}finally{i(!1)}};u.useEffect(()=>{r()},[a]);const l=async()=>{Ls.clearCache(),await r()};return{config:t,loading:s,enabled:(o=t==null?void 0:t.enabled)!=null?o:!0,settings:(c=t==null?void 0:t.settings)!=null?c:{},refresh:l}}const On=[{key:"book_now",en:"Book Now",id:"Pesan Sekarang",category:"buttons"},{key:"schedule",en:"Schedule",id:"Jadwalkan",category:"buttons"},{key:"activate_chat",en:"Activate Chat",id:"Aktifkan Chat",category:"buttons"},{key:"send_message",en:"Send Message",id:"Kirim Pesan",category:"buttons"},{key:"close_chat",en:"Close Chat",id:"Tutup Chat",category:"buttons"},{key:"try_again",en:"Try Again",id:"Coba Lagi",category:"buttons"},{key:"refresh_page",en:"Refresh Page",id:"Muat Ulang Halaman",category:"buttons"},{key:"chat_with",en:"Chat with",id:"Chat dengan",category:"chat"},{key:"type_message",en:"Type your message...",id:"Ketik pesan Anda...",category:"chat"},{key:"your_name",en:"Your Name",id:"Nama Anda",category:"chat"},{key:"whatsapp_number",en:"WhatsApp Number",id:"Nomor WhatsApp",category:"chat"},{key:"select_duration",en:"Select Duration",id:"Pilih Durasi",category:"chat"},{key:"minutes",en:"minutes",id:"menit",category:"chat"},{key:"available",en:"Available",id:"Tersedia",category:"chat"},{key:"busy",en:"Busy",id:"Sibuk",category:"chat"},{key:"offline",en:"Offline",id:"Offline",category:"chat"},{key:"chat_service_error",en:"Chat Service Error",id:"Kesalahan Layanan Chat",category:"errors"},{key:"chat_error_description",en:"The chat service encountered an unexpected error. This might be due to:",id:"Layanan chat mengalami kesalahan yang tidak terduga. Ini mungkin disebabkan oleh:",category:"errors"},{key:"network_connectivity_issues",en:"Network connectivity issues",id:"Masalah konektivitas jaringan",category:"errors"},{key:"server_maintenance",en:"Server maintenance",id:"Pemeliharaan server",category:"errors"},{key:"browser_compatibility_issues",en:"Browser compatibility issues",id:"Masalah kompatibilitas browser",category:"errors"},{key:"connection_failed",en:"Connection failed. Please check your internet connection.",id:"Koneksi gagal. Silakan periksa koneksi internet Anda.",category:"errors"},{key:"service_unavailable",en:"Chat service is temporarily unavailable.",id:"Layanan chat sementara tidak tersedia.",category:"errors"},{key:"welcome_message",en:"Hello! How can I help you today?",id:"Halo! Bagaimana saya bisa membantu Anda hari ini?",category:"messages"},{key:"therapist_will_respond",en:"Your therapist will respond shortly.",id:"Terapis Anda akan segera merespons.",category:"messages"},{key:"session_started",en:"Chat session started",id:"Sesi chat dimulai",category:"messages"},{key:"session_ended",en:"Chat session ended",id:"Sesi chat berakhir",category:"messages"},{key:"booking_confirmed",en:"Booking confirmed! We will contact you shortly.",id:"Pemesanan dikonfirmasi! Kami akan menghubungi Anda segera.",category:"messages"},{key:"schedule_your_massage",en:"Schedule Your Massage",id:"Jadwalkan Pijat Anda",category:"chat"},{key:"select_massage_duration",en:"Select Massage Duration",id:"Pilih Durasi Pijatan",category:"chat"},{key:"next_select_time",en:"Next: Select Time",id:"Selanjutnya: Pilih Waktu",category:"chat"},{key:"select_time",en:"Select Time",id:"Pilih Waktu",category:"chat"},{key:"back",en:"‚Üê Back",id:"‚Üê Kembali",category:"buttons"},{key:"next_enter_details",en:"Next: Enter Details",id:"Selanjutnya: Masukkan Detail",category:"buttons"},{key:"customer_details",en:"Customer Details",id:"Detail Pelanggan",category:"chat"},{key:"confirm_booking",en:"Confirm Booking",id:"Konfirmasi Booking",category:"buttons"},{key:"booking_confirmed_title",en:"‚úÖ Booking Confirmed!",id:"‚úÖ Booking Dikonfirmasi!",category:"messages"},{key:"booking_summary",en:"Booking Summary:",id:"Ringkasan Booking:",category:"chat"},{key:"therapist",en:"Therapist:",id:"Terapis:",category:"chat"},{key:"accepts",en:"Accepts",id:"Menerima",category:"chat"},{key:"time",en:"Time:",id:"Waktu:",category:"chat"},{key:"duration",en:"Duration:",id:"Durasi:",category:"chat"},{key:"total_cost",en:"Total Cost:",id:"Total Biaya:",category:"chat"},{key:"close_window",en:"Close Window",id:"Tutup Jendela",category:"buttons"},{key:"switch_to_english",en:"Switch to English",id:"Switch to English",category:"buttons"},{key:"switch_to_indonesian",en:"Ganti ke Bahasa Indonesia",id:"Ganti ke Bahasa Indonesia",category:"buttons"},{key:"language_id",en:"ID",id:"ID",category:"buttons"},{key:"language_gb",en:"GB",id:"GB",category:"buttons"},{key:"mobile_therapist_standards",en:"Mobile Therapist Standards",id:"Standar Terapis Mobile",category:"chat"},{key:"professional_in_home_hotel",en:"Professional In-Home & Hotel Massage Services",id:"Layanan Pijat Profesional di Rumah & Hotel",category:"chat"},{key:"therapist_standards",en:"Therapist Standards",id:"Standar Terapis",category:"chat"},{key:"professional_service_location",en:"Professional Service at Your Location",id:"Layanan Profesional di Lokasi Anda",category:"chat"},{key:"verified_badge_confidence",en:"When you see our verified badge on a mobile therapist's profile, you can book with complete confidence knowing they meet our rigorous standards for in-home and hotel massage services. Your comfort, safety, and satisfaction are our top priorities.",id:"Ketika Anda melihat lencana terverifikasi kami di profil terapis mobile, Anda dapat memesan dengan penuh percaya diri mengetahui mereka memenuhi standar ketat kami untuk layanan pijat di rumah dan hotel. Kenyamanan, keamanan, dan kepuasan Anda adalah prioritas utama kami.",category:"messages"},{key:"identity_verification_safety",en:"üõ°Ô∏è Identity Verification & Safety Assurance",id:"üõ°Ô∏è Verifikasi Identitas & Jaminan Keamanan",category:"chat"},{key:"identity_verification_description",en:"All verified badge partners have completed identity verification by submitting official government-issued identification, undergoing comprehensive background checks, and meeting our standard verification requirements. **Indastreet** upholds safety and exceptional service as core industry standards. For your protection, we recommend selecting verified service providers when inviting professionals into your home or hotel villa, ensuring you engage only with trusted therapists who have successfully completed our rigorous screening protocols.",id:"Semua mitra berverifikasi telah menyelesaikan verifikasi identitas dengan menyerahkan identifikasi resmi pemerintah, menjalani pemeriksaan latar belakang komprehensif, dan memenuhi persyaratan verifikasi standar kami. **Indastreet** menjunjung tinggi keamanan dan layanan luar biasa sebagai standar industri inti. Untuk perlindungan Anda, kami merekomendasikan memilih penyedia layanan terverifikasi saat mengundang profesional ke rumah atau vila hotel Anda, memastikan Anda hanya terlibat dengan terapis terpercaya yang telah berhasil menyelesaikan protokol penyaringan ketat kami.",category:"messages"},{key:"why_mobile_standards_matter",en:"Why **Indastreet** Mobile Standards Matter",id:"Mengapa Standar Mobile **Indastreet** Penting",category:"chat"},{key:"mobile_standards_intro",en:"At **Indastreet**, we understand that inviting a massage therapist into your home or hotel room is a personal decision that requires the highest level of trust. That is why every verified mobile therapist on our platform has been carefully evaluated to ensure they meet strict professional standards for in-home services.",id:"Di **Indastreet**, kami memahami bahwa mengundang terapis pijat ke rumah atau kamar hotel Anda adalah keputusan personal yang memerlukan tingkat kepercayaan tertinggi. Itulah mengapa setiap terapis mobile terverifikasi di platform kami telah dievaluasi dengan cermat untuk memastikan mereka memenuhi standar profesional ketat untuk layanan di rumah.",category:"messages"},{key:"professional_certification",en:"üéì Professional Certification & Training",id:"üéì Sertifikasi & Pelatihan Profesional",category:"chat"},{key:"professional_certification_desc",en:"Verified therapists must hold valid professional massage therapy certifications from recognized institutions. They demonstrate proven expertise in various massage techniques and maintain continuing education requirements to stay current with industry best practices.",id:"Terapis terverifikasi harus memiliki sertifikasi terapi pijat profesional yang valid dari lembaga yang diakui. Mereka menunjukkan keahlian terbukti dalam berbagai teknik pijat dan mempertahankan persyaratan pendidikan berkelanjutan untuk tetap mengikuti praktik terbaik industri.",category:"messages"},{key:"equipment_hygiene",en:"üßº Equipment & Hygiene Protocols",id:"üßº Protokol Peralatan & Kebersihan",category:"chat"},{key:"equipment_hygiene_desc",en:"All therapists follow strict hygiene standards, using fresh linens for each session and maintaining sanitized equipment. They carry professional-grade portable massage tables, high-quality oils, and all necessary supplies for a complete spa experience.",id:"Semua terapis mengikuti standar kebersihan yang ketat, menggunakan seprai segar untuk setiap sesi dan memelihara peralatan yang telah disanitasi. Mereka membawa meja pijat portable tingkat profesional, minyak berkualitas tinggi, dan semua perlengkapan yang diperlukan untuk pengalaman spa yang lengkap.",category:"messages"},{key:"communication_professionalism",en:"üí¨ Communication & Professionalism",id:"üí¨ Komunikasi & Profesionalisme",category:"chat"},{key:"communication_professionalism_desc",en:"Verified mobile therapists maintain professional communication from booking to service completion. They arrive punctually, respect your space, and provide clear information about services, pricing, and session expectations.",id:"Terapis mobile terverifikasi mempertahankan komunikasi profesional dari pemesanan hingga penyelesaian layanan. Mereka tiba tepat waktu, menghormati ruang Anda, dan memberikan informasi yang jelas tentang layanan, harga, dan ekspektasi sesi.",category:"messages"},{key:"boundary_respect",en:"ü§ù Boundary & Privacy Respect",id:"ü§ù Menghormati Batasan & Privasi",category:"chat"},{key:"boundary_respect_desc",en:"Professional boundaries are paramount. Verified therapists maintain appropriate draping techniques, respect client comfort levels, and ensure all interactions remain strictly therapeutic and professional throughout the session.",id:"Batasan profesional adalah yang terpenting. Terapis terverifikasi mempertahankan teknik draping yang tepat, menghormati tingkat kenyamanan klien, dan memastikan semua interaksi tetap ketat terapeutik dan profesional sepanjang sesi.",category:"messages"},{key:"flexible_scheduling",en:"‚è∞ Flexible Scheduling & Reliability",id:"‚è∞ Penjadwalan Fleksibel & Keandalan",category:"chat"},{key:"flexible_scheduling_desc",en:"Mobile therapists accommodate your schedule with flexible appointment times, including evenings and weekends. They maintain reliable booking systems and provide advance notice for any schedule changes.",id:"Terapis mobile mengakomodasi jadwal Anda dengan waktu janji yang fleksibel, termasuk malam dan akhir pekan. Mereka mempertahankan sistem pemesanan yang dapat diandalkan dan memberikan pemberitahuan sebelumnya untuk setiap perubahan jadwal.",category:"messages"},{key:"custom_treatment_plans",en:"üéØ Custom Treatment Plans",id:"üéØ Rencana Perawatan Khusus",category:"chat"},{key:"custom_treatment_plans_desc",en:"Each session begins with a consultation to understand your specific needs, preferences, and any health considerations. Therapists customize their approach to deliver the most beneficial and relaxing experience for you.",id:"Setiap sesi dimulai dengan konsultasi untuk memahami kebutuhan spesifik, preferensi, dan pertimbangan kesehatan Anda. Terapis menyesuaikan pendekatan mereka untuk memberikan pengalaman yang paling bermanfaat dan santai bagi Anda.",category:"messages"},{key:"insurance_coverage",en:"üõ°Ô∏è Insurance & Liability Coverage",id:"üõ°Ô∏è Cakupan Asuransi & Tanggung Jawab",category:"chat"},{key:"insurance_coverage_desc",en:"All verified mobile therapists carry professional liability insurance and are covered for in-home services. This provides additional peace of mind for both clients and service providers during mobile sessions.",id:"Semua terapis mobile terverifikasi membawa asuransi tanggung jawab profesional dan ditanggung untuk layanan di rumah. Ini memberikan ketenangan pikiran tambahan bagi klien dan penyedia layanan selama sesi mobile.",category:"messages"},{key:"continuous_training",en:"üìö Continuous Training & Development",id:"üìö Pelatihan & Pengembangan Berkelanjutan",category:"chat"},{key:"continuous_training_desc",en:"Mobile therapists participate in ongoing professional development, staying updated with the latest techniques, safety protocols, and industry standards to provide the highest quality mobile massage services.",id:"Terapis mobile berpartisipasi dalam pengembangan profesional yang berkelanjutan, tetap diperbarui dengan teknik terbaru, protokol keselamatan, dan standar industri untuk memberikan layanan pijat mobile berkualitas tertinggi.",category:"messages"},{key:"verification_process_note",en:"Our verification process protects you by confirming that mobile therapists arrive prepared with clean equipment, professional appearance, certified products, and exceptional service standards. This commitment to quality means you can relax in your own space knowing you are receiving spa-quality treatment.",id:"Proses verifikasi kami melindungi Anda dengan memastikan bahwa terapis mobile tiba dengan persiapan peralatan bersih, penampilan profesional, produk bersertifikat, dan standar layanan luar biasa. Komitmen terhadap kualitas ini berarti Anda dapat bersantai di ruang Anda sendiri dengan mengetahui Anda menerima perawatan kualitas spa.",category:"messages"},{key:"pending_verification_note",en:"**Please note:** Some mobile therapist profiles may not yet display the verified badge due to pending inspection or awaiting final confirmation. We continuously review all providers to maintain the highest standards across our platform.",id:"**Harap dicatat:** Beberapa profil terapis mobile mungkin belum menampilkan lencana terverifikasi karena inspeksi tertunda atau menunggu konfirmasi akhir. Kami terus meninjau semua penyedia untuk mempertahankan standar tertinggi di seluruh platform kami.",category:"messages"},{key:"therapist_verification_standards",en:"**Indastreet** Therapist Verification Standards",id:"Standar Verifikasi Terapis **Indastreet**",category:"chat"},{key:"professional_appearance_hygiene",en:"1. Professional Appearance & Personal Hygiene",id:"1. Penampilan Profesional & Kebersihan Pribadi",category:"chat"},{key:"fresh_linens_towels",en:"2. Fresh Linens, Towels & Bed Sheets",id:"2. Seprai, Handuk & Seprai Tempat Tidur Segar",category:"chat"},{key:"regulated_oils_products",en:"3. Regulated Oils & Skin-Safe Products",id:"3. Minyak Teregulasi & Produk Aman Kulit",category:"chat"},{key:"professionalism_conduct",en:"5. Professionalism & Conduct",id:"5. Profesionalisme & Perilaku",category:"chat"},{key:"training_certification",en:"6. Training & Certification Requirements",id:"6. Persyaratan Pelatihan & Sertifikasi",category:"chat"},{key:"health_safety_protocols",en:"7. Health & Safety Protocols",id:"7. Protokol Kesehatan & Keselamatan",category:"chat"},{key:"additional_requirements",en:"8. Additional Professional Requirements",id:"8. Persyaratan Profesional Tambahan",category:"chat"},{key:"why_choose_verified",en:"Why Choose Verified Mobile Therapists?",id:"Mengapa Memilih Terapis Mobile Terverifikasi?",category:"chat"},{key:"client_safety_tips",en:"Client Safety Tips",id:"Tips Keselamatan Klien",category:"chat"},{key:"questions_about_standards",en:"Questions About Our Standards?",id:"Pertanyaan Tentang Standar Kami?",category:"chat"},{key:"transparency_commitment",en:"We are committed to transparency and your safety. If you have questions about our mobile therapist verification standards or want to report a concern, please contact us.",id:"Kami berkomitmen pada transparansi dan keselamatan Anda. Jika Anda memiliki pertanyaan tentang standar verifikasi terapis mobile kami atau ingin melaporkan kekhawatiran, silakan hubungi kami.",category:"messages"},{key:"contact_support",en:"Contact Support",id:"Hubungi Dukungan",category:"buttons"},{key:"price_per_session",en:"Price per session",id:"Harga per sesi",category:"chat"},{key:"discount_applied",en:"Discount applied",id:"Diskon diterapkan",category:"chat"},{key:"total_price",en:"Total Price",id:"Total Harga",category:"chat"},{key:"immediate_booking",en:"Immediate Booking",id:"Pemesanan Langsung",category:"chat"},{key:"scheduled_booking",en:"Scheduled Booking",id:"Pemesanan Terjadwal",category:"chat"},{key:"name_required",en:"Name is required",id:"Nama wajib diisi",category:"errors"},{key:"whatsapp_required",en:"WhatsApp number is required",id:"Nomor WhatsApp wajib diisi",category:"errors"},{key:"invalid_whatsapp",en:"Please enter a valid WhatsApp number",id:"Silakan masukkan nomor WhatsApp yang valid",category:"errors"},{key:"duration_required",en:"Please select a session duration",id:"Silakan pilih durasi sesi",category:"errors"}],Ka=class Ka{constructor(){Z(this,"translations",new Map);Z(this,"isLoaded",!1)}static getInstance(){return Ka.instance||(Ka.instance=new Ka),Ka.instance}async initializeTranslations(){if(!this.isLoaded){if(!h.collections.chatTranslations){W.info("üåç Chat translations collection is disabled, using default translations..."),this.loadDefaultTranslations(),this.isLoaded=!0;return}try{W.info("üåç Loading chat translations from Appwrite...");const t=await K.listDocuments(h.databaseId,h.collections.chatTranslations,[]);t.documents.length===0?(W.info("üìù No translations found, creating default translations..."),await this.createDefaultTranslations()):(t.documents.forEach(n=>{const s=n;this.translations.set(s.key,s)}),W.info("‚úÖ Loaded ".concat(t.documents.length," chat translations"))),this.isLoaded=!0}catch(t){W.warn("‚ö†Ô∏è Failed to load translations from Appwrite, using defaults:",t),this.loadDefaultTranslations(),this.isLoaded=!0}}}async createDefaultTranslations(){if(!h.collections.chatTranslations){W.info("üåç Chat translations collection is disabled, skipping creation"),this.loadDefaultTranslations();return}try{for(const t of On){const n=await K.createDocument(h.databaseId,h.collections.chatTranslations,se.unique(),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});this.translations.set(t.key,n)}W.info("‚úÖ Created ".concat(On.length," default translations in Appwrite"))}catch(t){W.error("‚ùå Failed to create default translations:",t),this.loadDefaultTranslations()}}loadDefaultTranslations(){On.forEach(t=>{this.translations.set(t.key,{...t,$id:"local-".concat(t.key),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})})}getTranslation(t,n="en"){const s=this.translations.get(t);return s?s[n]||s.en||t:(W.warn("‚ö†Ô∏è Translation not found for key: ".concat(t)),t)}getTranslations(t,n="en"){const s={};return t.forEach(i=>{s[i]=this.getTranslation(i,n)}),s}async setTranslation(t,n,s,i){if(!h.collections.chatTranslations){W.info("üåç Chat translations collection is disabled, updating local translations only");const r={$id:"local-".concat(t),key:t,en:n,id:s,category:i,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};this.translations.set(t,r);return}try{const r=this.translations.get(t);if(r&&r.$id&&!r.$id.startsWith("local-"))await K.updateDocument(h.databaseId,h.collections.chatTranslations,r.$id,{en:n,id:s,category:i,updatedAt:new Date().toISOString()});else{const l=await K.createDocument(h.databaseId,h.collections.chatTranslations,se.unique(),{key:t,en:n,id:s,category:i,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});this.translations.set(t,l)}W.info("‚úÖ Translation updated: ".concat(t))}catch(r){W.error("‚ùå Failed to save translation: ".concat(t),r),this.translations.set(t,{$id:"local-".concat(t),key:t,en:n,id:s,category:i,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}}getTranslationsByCategory(t,n="en"){const s={};return this.translations.forEach((i,r)=>{i.category===t&&(s[r]=i[n]||i.en||r)}),s}isInitialized(){return this.isLoaded}async reloadTranslations(){this.isLoaded=!1,this.translations.clear(),await this.initializeTranslations()}setLanguagePreference(t){try{typeof window!="undefined"&&(localStorage.setItem("preferredLanguage",t==="en"?"gb":t),W.info("üåê Language preference set to: ".concat(t)))}catch(n){W.error("‚ùå Failed to save language preference:",n)}}getLanguagePreference(){try{if(typeof window!="undefined"){const t=localStorage.getItem("preferredLanguage");return t==="gb"?"en":t==="id"?"id":"en"}}catch(t){W.error("‚ùå Failed to get language preference:",t)}return"en"}async syncAllTranslations(){let t=0,n=0;W.info("üîÑ Starting translation sync to Appwrite...");for(const s of On)try{await this.setTranslation(s.key,s.en,s.id,s.category),t++,W.info("‚úÖ Synced: ".concat(s.key))}catch(i){n++,W.error("‚ùå Failed to sync: ".concat(s.key),i)}return W.info("üîÑ Translation sync completed: ".concat(t," success, ").concat(n," failed")),{success:t,failed:n}}getTranslationWithPreference(t){const n=this.getLanguagePreference();return this.getTranslation(t,n)}};Z(Ka,"instance");let ui=Ka;const zn=ui.getInstance();typeof window!="undefined"&&zn.initializeTranslations().catch(console.error);const Gf=["Males And Females","Males Only","Females Only","Babies Only","Woman And Children","All Ages And Genders"],zf={"Males And Females":"Males / Females","Males Only":"Males Only","Females Only":"Females Only","Babies Only":"Babies Only","Woman And Children":"Woman & Children","All Ages And Genders":"All Ages / Genders"},Vf={"Males And Females":"Accept both male and female adult clients","Males Only":"Accept only male adult clients","Females Only":"Accept only female adult clients","Babies Only":"Specialize in baby massage services only","Woman And Children":"Accept women and children clients","All Ages And Genders":"Accept clients of all ages and genders"};function Dg(a,t="en"){const n=a||"Males And Females";return t==="id"?{"Males And Females":"Pria / Wanita","Males Only":"Hanya Pria","Females Only":"Hanya Wanita","Babies Only":"Hanya Bayi","Woman And Children":"Wanita & Anak-anak","All Ages And Genders":"Semua Usia / Jenis Kelamin"}[n]:{"Males And Females":"Males / Females","Males Only":"Males Only","Females Only":"Females Only","Babies Only":"Babies Only","Woman And Children":"Woman & Children","All Ages And Genders":"All Ages / Genders"}[n]}const Eg=({therapist:a,displayImage:t,onShareClick:n,customVerifiedBadge:s,bookingsCount:i=0,displayRating:r,shareCount:l})=>e.jsxs("div",{className:"h-48 w-full overflow-visible relative rounded-t-xl",children:[e.jsx("div",{className:"absolute inset-0 rounded-t-xl overflow-hidden bg-gradient-to-r from-orange-400 to-orange-600",style:{minHeight:"192px"},children:e.jsx("img",{src:t,alt:"".concat(He(a.name)," cover"),className:"w-full h-full object-cover rounded-t-xl",style:{aspectRatio:"16/9",minHeight:"192px"},loading:"eager",decoding:"async",fetchPriority:"high",width:"400",height:"192",onError:o=>{g.warn("üñºÔ∏è Main image failed to load, using fallback:",typeof t=="string"?t.slice(0,80):t),o.target.src="https://ik.imagekit.io/7grri5v7d/hotel%20massage%20indoniseas.png?updatedAt=1761154913720"},onLoad:()=>{}},t)}),r&&e.jsxs("div",{className:"absolute top-3 left-3 z-30 shadow-lg flex items-center gap-1.5 bg-black/70 backdrop-blur-sm rounded-full px-3 py-1.5",children:[e.jsx("svg",{className:"w-4 h-4 text-orange-500",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("span",{className:"text-sm font-bold text-white",children:r})]}),i>0&&!bt(a)&&e.jsxs("div",{className:"absolute top-3 right-3 z-30 bg-black/70 backdrop-blur-sm text-white text-[11px] font-bold px-3 py-1.5 rounded-full shadow-lg",children:[i,"+ Orders"]}),bt(a)&&e.jsxs("div",{className:"absolute top-3 right-3 z-30 flex flex-col items-end gap-2",children:[i>0&&e.jsxs("div",{className:"bg-black/70 backdrop-blur-sm text-white text-[11px] font-bold px-3 py-1.5 rounded-full shadow-lg",children:[i,"+ Orders"]}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative text-white font-bold text-lg px-5 py-2 rounded-full shadow-lg discount-fade",children:[a.discountPercentage,"% OFF"]})}),e.jsxs("div",{className:"bg-black/80 text-white text-xs px-3 py-1 rounded-lg font-mono shadow-lg flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(()=>{if(!a.discountEndTime)return"EXPIRED";const o=new Date,d=new Date(a.discountEndTime).getTime()-o.getTime();if(d<=0)return"EXPIRED";const m=Math.floor(d/(1e3*60*60)),p=Math.floor(d%(1e3*60*60)/(1e3*60)),f=Math.floor(d%(1e3*60)/1e3);return m>0?"".concat(m,"h ").concat(p,"m"):p>0?"".concat(p,"m ").concat(f,"s"):"".concat(f,"s")})()]})]}),e.jsxs("div",{className:"absolute bottom-3 right-3 z-30 flex items-center gap-2",children:[l!==void 0&&l>=0&&e.jsxs("div",{className:"bg-black/70 backdrop-blur-sm text-white text-xs font-bold px-2.5 py-1 rounded-full shadow-lg flex items-center gap-1",title:"Times this profile was shared",children:[e.jsx($r,{className:"w-3.5 h-3.5",strokeWidth:2.5,"aria-hidden":!0}),e.jsx("span",{children:l})]}),e.jsx("button",{onClick:o=>{o.stopPropagation(),n()},className:"bg-black/50 backdrop-blur-sm text-white p-2 rounded-full hover:bg-black/70 transition-all",title:"Share this therapist","aria-label":"Share this therapist",children:e.jsx($r,{className:"w-4 h-4 text-white",strokeWidth:2.5,"aria-hidden":!0})})]})]}),Mg=({pricing:a,therapist:t,displayRating:n,animatedPriceIndex:s,formatPrice:i,getDynamicSpacing:r,translatedDescriptionLength:l,menuData:o=[],onPriceClick:c})=>{const m=(()=>{if(!o||o.length===0)return"Traditional Massage";const p=o.filter(y=>{const I=y.price60&&y.price90&&y.price120,P=Number(y.price60)>0,D=Number(y.price90)>0,j=Number(y.price120)>0;return I&&P&&D&&j});if(p.length===0)return"Traditional Massage";const f=Nl(p);return f&&(f.name||f.serviceName||f.title)?f.name||f.serviceName||f.title:"Traditional Massage"})();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center mb-2 px-4 ".concat(r("mt-4","mt-3","mt-2",l)),children:e.jsx("h3",{className:"text-gray-800 font-bold text-base tracking-wide",children:m})}),bt(t)&&e.jsx("div",{className:"text-center mb-[10px] px-4 ".concat(r("mt-2","mt-2","mt-1",l)),children:e.jsx("p",{className:"text-black font-semibold text-sm flex items-center justify-center gap-1",children:"üî• Discounted Price's Displayed"})}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-sm mt-4 px-4",children:[e.jsxs("div",{onClick:c,className:"p-2 rounded-lg border shadow-md relative transition-all duration-500 ".concat(bt(t)?"min-h-[95px]":"min-h-[75px]"," flex flex-col justify-center ").concat(s===0?"bg-gray-100 border-gray-400 border-[3px] shadow-lg scale-[1.02]":bt(t)?"bg-gray-100 border-gray-300 border-2 price-rim-fade":"bg-gray-100 border-gray-200"," ").concat(c?"cursor-pointer hover:shadow-xl hover:scale-105 active:scale-95":""),children:[e.jsx("p",{className:"text-gray-600 text-xs mb-1 font-semibold",children:"60 min"}),bt(t)?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-[11px] text-gray-500 line-through mb-0.5",children:["IDR ",i(Number(a[60]))]}),e.jsxs("p",{className:"font-bold text-gray-800 text-sm leading-tight animate-pulse",children:["IDR ",i(Math.round(Number(a[60])*(1-(t.discountPercentage||0)/100)))]})]}):e.jsxs("p",{className:"font-bold text-gray-800 text-sm leading-tight",children:["IDR ",i(Number(a[60]))]}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1",children:"Basic"})]}),e.jsxs("div",{onClick:c,className:"p-2 rounded-lg border shadow-md relative transition-all duration-500 ".concat(bt(t)?"min-h-[95px]":"min-h-[75px]"," flex flex-col justify-center ").concat(s===1?"bg-gray-100 border-gray-400 border-[3px] shadow-lg scale-[1.02]":bt(t)?"bg-gray-100 border-gray-300 border-2 price-rim-fade":"bg-gray-100 border-gray-200"," ").concat(c?"cursor-pointer hover:shadow-xl hover:scale-105 active:scale-95":""),children:[e.jsx("p",{className:"text-gray-600 text-xs mb-1 font-semibold",children:"90 min"}),bt(t)?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-[11px] text-gray-500 line-through mb-0.5",children:["IDR ",i(Number(a[90]))]}),e.jsxs("p",{className:"font-bold text-gray-800 text-sm leading-tight animate-pulse",children:["IDR ",i(Math.round(Number(a[90])*(1-(t.discountPercentage||0)/100)))]})]}):e.jsxs("p",{className:"font-bold text-gray-800 text-sm leading-tight",children:["IDR ",i(Number(a[90]))]}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1",children:"Premium"})]}),e.jsxs("div",{onClick:c,className:"p-2 rounded-lg border shadow-md relative transition-all duration-500 ".concat(bt(t)?"min-h-[95px]":"min-h-[75px]"," flex flex-col justify-center ").concat(s===2?"bg-gray-100 border-gray-400 border-[3px] shadow-lg scale-[1.02]":bt(t)?"bg-gray-100 border-gray-300 border-2 price-rim-fade":"bg-gray-100 border-gray-200"," ").concat(c?"cursor-pointer hover:shadow-xl hover:scale-105 active:scale-95":""),children:[e.jsx("p",{className:"text-gray-600 text-xs mb-1 font-semibold",children:"120 min"}),bt(t)?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-[11px] text-gray-500 line-through mb-0.5",children:["IDR ",i(Number(a[120]))]}),e.jsxs("p",{className:"font-bold text-gray-800 text-sm leading-tight animate-pulse",children:["IDR ",i(Math.round(Number(a[120])*(1-(t.discountPercentage||0)/100)))]})]}):e.jsxs("p",{className:"font-bold text-gray-800 text-sm leading-tight",children:["IDR ",i(Number(a[120]))]}),e.jsx("p",{className:"text-[10px] text-slate-600 mt-1",children:"Luxury"})]})]})]})},Rg=({providerName:a,providerId:t,providerType:n,providerImage:s,onClose:i,onSubmit:r})=>{const[l,o]=u.useState(""),[c,d]=u.useState("+62"),[m,p]=u.useState(null),[f,y]=u.useState(!1),I=[{emoji:"üò¢",label:"Sad",rating:3,color:"text-red-500"},{emoji:"üòä",label:"Happy",rating:4,color:"text-yellow-500"},{emoji:"ü§©",label:"Excited",rating:5,color:"text-green-500"}],P=j=>{let E=j.target.value;E.startsWith("+62")||(E="+62");const T=E.slice(3).replace(/\D/g,"");d("+62"+T)},D=async()=>{if(!l.trim()){alert("Please enter your name");return}if(c.length<10){alert("Please enter a valid WhatsApp number");return}if(m===null){alert("Please select a rating emoji");return}y(!0);try{await r({name:l.trim(),whatsappNumber:c,rating:m,providerId:t,providerType:n})}catch{alert("Failed to submit review. Please try again.")}finally{y(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-3 sm:p-4",children:e.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-[90vw] sm:max-w-md w-full p-4 sm:p-6 relative animate-fade-in overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10 bg-cover bg-center rounded-xl sm:rounded-2xl",style:{backgroundImage:"url(https://ik.imagekit.io/7grri5v7d/refer%20a%20friends.png)"}}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("button",{onClick:i,className:"absolute top-0 right-0 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[e.jsx("div",{className:"text-3xl sm:text-4xl mb-2 sm:mb-3",children:"‚≠ê"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-2 sm:mb-3",children:"Leave a Review"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-3 mt-2",children:[s&&e.jsx("img",{src:s,alt:a,className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full object-cover border-2 border-gray-300",onError:j=>{j.target.src="https://ik.imagekit.io/7grri5v7d/balineese%20massage%20indonisea.png?updatedAt=1761918521382"}}),e.jsxs("p",{className:"text-gray-700 font-semibold text-sm sm:text-lg",children:["for ",a]})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:"üë§ Your Name"}),e.jsx("input",{type:"text",value:l,onChange:j=>o(j.target.value),placeholder:"Enter your name",className:"w-full px-3 py-2 sm:px-4 sm:py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 transition-colors text-sm sm:text-base",maxLength:50})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1.5 sm:mb-2",children:"üì± WhatsApp Number"}),e.jsx("input",{type:"tel",value:c,onChange:P,placeholder:"+62812345678",className:"w-full px-3 py-2 sm:px-4 sm:py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 transition-colors font-mono text-sm sm:text-base",maxLength:17}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: +62 followed by your number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 mb-2 sm:mb-3 text-center",children:"How was your experience?"}),e.jsx("div",{className:"flex justify-center gap-2 sm:gap-6",children:I.map(j=>e.jsxs("button",{onClick:()=>p(j.rating),className:"flex flex-col items-center gap-1 sm:gap-2 p-2 sm:p-4 rounded-lg sm:rounded-xl transition-all transform hover:scale-110 ".concat(m===j.rating?"bg-blue-100 border-2 border-blue-500 shadow-lg scale-110":"bg-gray-50 border-2 border-gray-200 hover:bg-gray-100"),children:[e.jsx("span",{className:"text-3xl sm:text-5xl",children:j.emoji}),e.jsx("span",{className:"text-xs sm:text-sm font-semibold ".concat(m===j.rating?"text-blue-600":"text-gray-600"),children:j.label}),e.jsx("div",{className:"flex gap-0.5",children:[...Array(j.rating)].map((E,T)=>e.jsx("span",{className:"text-xs ".concat(j.color),children:"‚≠ê"},T))})]},j.rating))})]}),e.jsx("button",{onClick:D,disabled:f||!l.trim()||c.length<10||m===null,className:"w-full py-3 sm:py-4 rounded-lg font-bold text-white transition-all transform text-sm sm:text-base ".concat(f||!l.trim()||c.length<10||m===null?"bg-gray-300 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 hover:shadow-lg active:scale-95"),children:f?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 sm:h-5 sm:w-5",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):"Submit Review"})]})]})]})})},as=(a,t="info",n={})=>{const s=new CustomEvent("show-toast",{detail:{message:a,type:t,duration:n.duration||4e3,action:n.action,persistent:n.persistent||!1}});window.dispatchEvent(s)},Yf=(a,t,n)=>{const s=new CustomEvent("show-confirmation-toast",{detail:{message:a,onConfirm:t,onCancel:n||(()=>{})}});window.dispatchEvent(s)},Os=(a,t)=>{as(a,"error",{duration:6e3,action:void 0})},Jf=(a,t)=>{as(a,"warning",{duration:5e3,...t})};function Wl(a){if(!a)return"";let t=a.replace(/[^\d+]/g,"");return t=t.replace(/^0+/,""),!t.startsWith("+62")&&!t.startsWith("62")?t="+62"+t:t.startsWith("62")&&(t="+"+t),t}function Bg(a){const t=[];if(!a.customerName||a.customerName.trim().length===0?t.push("Please enter your name"):a.customerName.trim().length<2?t.push("Name must be at least 2 characters"):a.customerName.trim().length>255&&t.push("Name is too long (max 255 characters)"),!a.customerWhatsApp||a.customerWhatsApp.trim().length===0)t.push("Please enter your WhatsApp number");else{const s=Wl(a.customerWhatsApp).replace(/\D/g,"");(s.length<10||s.length>15)&&t.push("WhatsApp number must be 8-15 digits")}return(!a.duration||![60,90,120].includes(a.duration))&&t.push("Please select a valid duration (60, 90, or 120 minutes)"),(!a.price||a.price<=0)&&t.push("Invalid price"),t.length>0?{valid:!1,errors:t}:{valid:!0}}const Lg=[{minutes:60,label:"60 Min",popular:!1},{minutes:90,label:"90 Min",popular:!0},{minutes:120,label:"2 Hours",popular:!1}],Og=["Hotel Grand Hyatt Bali","Villa Seminyak","Hotel W Bali","Private Villa Canggu","Resort Four Seasons","Hotel Mulia Bali","Villa Ubud","Hotel St. Regis Bali"],_g=({therapistId:a,therapistName:t,profilePicture:n,pricing:s,discountPercentage:i=0,discountActive:r=!1,onBookingComplete:l,onClose:o,initialDuration:c=90,quickProfile:d=null})=>{Zo();const[m,p]=u.useState(d?0:1),[f,y]=u.useState(!1),[I,P]=u.useState({}),[D,j]=u.useState(!!d),[E,T]=u.useState({customerName:(d==null?void 0:d.customerName)||"",customerWhatsApp:(d==null?void 0:d.customerWhatsApp)||"",duration:(d==null?void 0:d.preferredDuration)||c,location:(d==null?void 0:d.preferredLocation)||"",locationType:(d==null?void 0:d.locationType)||"hotel",specialRequests:""}),x=u.useRef(null),A=u.useMemo(()=>{const F=s[E.duration]||0;return r&&i>0?Math.round(F*(1-i/100)):F},[E.duration,s,r,i]),S=u.useMemo(()=>!r||i===0?0:(s[E.duration]||0)-A,[E.duration,s,A,r]);u.useEffect(()=>(x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{localStorage.setItem("draft_booking_".concat(a),JSON.stringify({...E,timestamp:Date.now()}))},1e3),()=>{x.current&&clearTimeout(x.current)}),[E,a]),u.useEffect(()=>{const F=localStorage.getItem("draft_booking_".concat(a));if(F&&!d)try{const V=JSON.parse(F);Date.now()-V.timestamp<36e5&&T(he=>({...he,...V,customerName:V.customerName||"",customerWhatsApp:V.customerWhatsApp||""}))}catch{}},[a,d]);const C=u.useCallback(()=>{const F={};if(E.customerName.trim()||(F.customerName="Name is required"),!E.customerWhatsApp.trim())F.customerWhatsApp="WhatsApp number is required";else{const V=Bg({customerName:E.customerName,customerWhatsApp:E.customerWhatsApp});V.valid||(V.errors.length>0&&V.errors[0].includes("name")&&(F.customerName=V.errors[0]),V.errors.length>0&&V.errors[0].includes("whatsapp")&&(F.customerWhatsApp=V.errors[0]))}return E.location.trim()||(F.location="Location is required"),E.location.length<5&&(F.location="Please provide a more detailed location"),P(F),Object.keys(F).length===0},[E]),_=u.useCallback(async()=>{if(d){y(!0);try{const F={customerName:d.customerName,customerWhatsApp:d.customerWhatsApp,duration:d.preferredDuration,location:d.preferredLocation,locationType:d.locationType,therapistId:a,therapistName:t,price:A,bookingType:"immediate",source:"quick-book"};await U(F),localStorage.removeItem("draft_booking_".concat(a)),as("‚úÖ Quick booking confirmed! Therapist has been notified.","success"),l(F)}catch{Os("Quick booking failed. Please try the regular booking flow."),j(!1),p(1)}finally{y(!1)}}},[d,a,t,A,l]),L=u.useCallback(async()=>{var F;if(!C()){Os("Please fix the form errors before continuing.");return}y(!0);try{const V={customerName:E.customerName.trim(),customerWhatsApp:Wl(E.customerWhatsApp),duration:E.duration,location:E.location.trim(),locationType:E.locationType,therapistId:a,therapistName:t,price:A,bookingType:"immediate",specialRequests:(F=E.specialRequests)==null?void 0:F.trim(),source:"optimized-flow"};await U(V),localStorage.removeItem("draft_booking_".concat(a)),$(E),as("üéâ Booking confirmed! Therapist will contact you shortly.","success"),l(V)}catch{Os("Booking failed. Please try again or contact support.")}finally{y(!1)}},[E,C,a,t,A,l]),U=async F=>{try{return await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)})}catch(V){throw V}},$=F=>{try{const V={customerName:F.customerName,customerWhatsApp:F.customerWhatsApp,preferredDuration:F.duration,preferredLocation:F.location,locationType:F.locationType,lastBookingDate:new Date,totalBookings:((d==null?void 0:d.totalBookings)||0)+1};localStorage.setItem("quick_profile_".concat(F.customerWhatsApp),JSON.stringify(V))}catch{}},H=u.useCallback((F,V)=>{T(pe=>({...pe,[F]:V})),I[F]&&P(pe=>{const he={...pe};return delete he[F],he})},[I]),Y=()=>e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:e.jsx(Ur,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"Quick Book"}),e.jsx("p",{className:"text-green-100 text-sm",children:"Use your saved preferences"})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-100",children:[e.jsx(Ut,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:d==null?void 0:d.customerName})]}),e.jsxs("div",{className:"flex items-center gap-2 text-green-100",children:[e.jsx(We,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[d==null?void 0:d.preferredDuration," minutes"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-green-100",children:[e.jsx(Mt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:d==null?void 0:d.preferredLocation})]})]}),e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"text-right",children:[S>0&&e.jsxs("div",{className:"text-sm text-green-200 line-through",children:["Rp ",(A+S).toLocaleString("id-ID")]}),e.jsxs("div",{className:"text-2xl font-bold",children:["Rp ",A.toLocaleString("id-ID")]}),S>0&&e.jsxs("div",{className:"text-sm text-green-200",children:["Save Rp ",S.toLocaleString("id-ID")]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:_,disabled:f,className:"w-full bg-white text-green-600 font-bold py-4 px-6 rounded-xl hover:bg-green-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-green-600 border-t-transparent rounded-full animate-spin"}),"Booking..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ur,{className:"w-5 h-5"}),"Book Now (1-Tap)"]})}),e.jsx("button",{onClick:()=>j(!1),className:"w-full text-white border-2 border-white border-opacity-30 py-3 px-6 rounded-xl hover:bg-white hover:bg-opacity-10 transition-all",children:"Use Different Details"})]})]}),ae=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-blue-600",children:"Details"})]}),e.jsx(Wo,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-500",children:"Confirm"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-xl",children:[n?e.jsx("img",{src:n,alt:t,className:"w-12 h-12 rounded-full object-cover"}):e.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center",children:e.jsx(Ut,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ot,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-sm text-gray-600",children:"4.9 ‚Ä¢ Professional Therapist"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Service Duration"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:Lg.map(F=>e.jsxs("button",{onClick:()=>H("duration",F.minutes),className:"relative p-4 rounded-xl border-2 transition-all text-center ".concat(E.duration===F.minutes?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"),children:[e.jsx(We,{className:"w-5 h-5 mx-auto mb-1"}),e.jsx("div",{className:"font-semibold",children:F.label}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Rp ",(s[F.minutes]||0).toLocaleString("id-ID")]}),F.popular&&e.jsx("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2",children:e.jsx("span",{className:"bg-orange-500 text-white text-xs px-2 py-1 rounded-full",children:"Popular"})})]},F.minutes))})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name"}),e.jsx("input",{type:"text",value:E.customerName,onChange:F=>H("customerName",F.target.value),className:"w-full px-4 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(I.customerName?"border-red-300":"border-gray-200"),placeholder:"Enter your full name"}),I.customerName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:I.customerName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WhatsApp Number"}),e.jsx("input",{type:"tel",value:E.customerWhatsApp,onChange:F=>H("customerWhatsApp",F.target.value),className:"w-full px-4 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(I.customerWhatsApp?"border-red-300":"border-gray-200"),placeholder:"e.g., +6281234567890"}),I.customerWhatsApp&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:I.customerWhatsApp})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsx("input",{type:"text",value:E.location,onChange:F=>H("location",F.target.value),className:"w-full px-4 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(I.location?"border-red-300":"border-gray-200"),placeholder:"Hotel name, villa address, or location details",list:"location-suggestions"}),e.jsx("datalist",{id:"location-suggestions",children:Og.map(F=>e.jsx("option",{value:F},F))}),I.location&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:I.location})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Location Type"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["hotel","villa","home"].map(F=>e.jsx("button",{onClick:()=>H("locationType",F),className:"p-3 rounded-xl border-2 transition-all text-center capitalize ".concat(E.locationType===F?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"),children:F},F))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Requests (Optional)"}),e.jsx("textarea",{value:E.specialRequests||"",onChange:F=>H("specialRequests",F.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Any specific preferences or requirements...",rows:3})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-gray-700",children:["Service (",E.duration," min)"]}),e.jsxs("span",{className:"font-semibold",children:["Rp ",(s[E.duration]||0).toLocaleString("id-ID")]})]}),r&&S>0&&e.jsxs("div",{className:"flex items-center justify-between mb-2 text-green-600",children:[e.jsxs("span",{children:["Discount (",i,"%)"]}),e.jsxs("span",{children:["- Rp ",S.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-2 flex items-center justify-between",children:[e.jsx("span",{className:"font-bold text-lg text-gray-900",children:"Total"}),e.jsxs("span",{className:"font-bold text-xl text-blue-600",children:["Rp ",A.toLocaleString("id-ID")]})]}),S>0&&e.jsxs("div",{className:"text-sm text-green-600 text-right",children:["You save Rp ",S.toLocaleString("id-ID"),"!"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:L,disabled:f,className:"w-full bg-blue-600 text-white font-bold py-4 px-6 rounded-xl hover:bg-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating Booking..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"w-5 h-5"}),"Confirm Booking"]})}),e.jsx("button",{onClick:o,className:"w-full text-gray-600 border-2 border-gray-300 py-3 px-6 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"})]})]});return e.jsx("div",{className:"max-w-md mx-auto bg-white rounded-xl shadow-xl overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:D?"Quick Booking":"Book Massage"}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Qe,{className:"w-5 h-5 text-gray-500"})})]}),D?e.jsx(Y,{}):e.jsx(ae,{})]})})},mt=(a,t="success")=>{const n=document.getElementById("overlay-root")||document.body;if(!n)return;const s=document.createElement("div"),i="text-white px-4 py-2 rounded shadow-md text-sm font-medium mb-2 transition-opacity duration-300",r=t==="success"?"bg-green-600":t==="error"?"bg-red-600":t==="warning"?"bg-yellow-500":"bg-blue-500";s.className="".concat(i," ").concat(r),s.textContent=a,n.id==="overlay-root"&&(n.style.position="fixed",n.style.top="0",n.style.right="0",n.style.zIndex="9999",n.style.padding="0.75rem",n.style.display="flex",n.style.flexDirection="column",n.style.alignItems="flex-end",n.style.pointerEvents="none"),n.appendChild(s),setTimeout(()=>{s.style.opacity="0",setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s)},320)},3500)},_s=[{id:1,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%201.png",label:"Avatar 1"},{id:2,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%202.png",label:"Avatar 2"},{id:3,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%203.png",label:"Avatar 3"},{id:4,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%204.png",label:"Avatar 4"},{id:5,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%206.png",label:"Avatar 6"},{id:6,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%207.png",label:"Avatar 7"},{id:7,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%208.png",label:"Avatar 8"},{id:8,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%209.png",label:"Avatar 9"},{id:9,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%2010.png",label:"Avatar 10"},{id:10,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%2011.png",label:"Avatar 11"},{id:11,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%2012.png",label:"Avatar 12"},{id:12,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%2013.png",label:"Avatar 13"},{id:13,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%2014.png",label:"Avatar 14"},{id:14,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%2015.png",label:"Avatar 15"},{id:15,imageUrl:"https://ik.imagekit.io/7grri5v7d/avatar%2016.png",label:"Avatar 16"}];function $g(){const[a,t]=u.useState("duration"),[n,s]=u.useState(null),[i,r]=u.useState(null),[l,o]=u.useState(""),[c,d]=u.useState(""),[m,p]=u.useState(""),[f,y]=u.useState(_s[0].imageUrl),[I,P]=u.useState(!1),[D,j]=u.useState("");return{step:a,selectedDuration:n,selectedTime:i,customerName:l,customerWhatsApp:c,roomNumber:m,selectedAvatar:f,isCreating:I,error:D,setStep:t,setSelectedDuration:s,setSelectedTime:r,setCustomerName:o,setCustomerWhatsApp:d,setRoomNumber:p,setSelectedAvatar:y,setIsCreating:P,setError:j,resetForm:()=>{t("duration"),s(null),r(null),o(""),d(""),p(""),y(_s[0].imageUrl),j("")},AVATAR_OPTIONS:_s}}function Ug(a,t,n,s,i){const[r,l]=u.useState([]),[o,c]=u.useState("22:00"),[d,m]=u.useState("09:00"),[p,f]=u.useState("21:00"),y=async()=>{const I=[],P=new Date,D=P.getHours(),j=P.getMinutes(),[E,T]=o.split(":").map(Number),[x,A]=d.split(":").map(Number),[S,C]=p.split(":").map(Number);let _=[];h.collections.bookings&&h.collections.bookings!==""&&(_=(await K.listDocuments(h.databaseId,h.collections.bookings,[])).documents.filter(Y=>{const ae=new Date(Y.scheduledTime||Y.createdAt);return Y.therapistId===t&&ae.toDateString()===P.toDateString()&&(Y.status==="confirmed"||Y.status==="pending")}));const L=n==="place",U=L?x:8,$=L?S:E;for(let H=U;H<=$;H++){const Y=L&&H===x?A:0,ae=H===$?L?C:T:45;for(let F=Y;F<=ae;F+=15){if(H<D||H===D&&F<=j)continue;const V=new Date(P);V.setHours(H,F,0,0);const pe=_.some(he=>{const de=new Date(he.scheduledTime||he.createdAt),Te=n==="place"?0:30,De=new Date(de.getTime()+(he.duration+Te)*6e4);return V>=de&&V<De});I.push({hour:H,minute:F,label:"".concat(H.toString().padStart(2,"0"),":").concat(F.toString().padStart(2,"0")),available:!pe})}}l(I)};return u.useEffect(()=>{a&&t&&(async()=>{try{const P=n==="therapist"?h.collections.therapists:h.collections.places;if(!P||P===""){l([]);return}try{const D=await K.getDocument(h.databaseId,P,t);n==="place"?(D.openingTime&&m(D.openingTime),D.closingTime&&f(D.closingTime)):D.lastBookingTime&&c(D.lastBookingTime)}catch(D){D==null||D.code}}catch{}})()},[a,t,n]),u.useEffect(()=>{s==="time"&&i&&y()},[s,i]),{timeSlots:r,lastBookingTime:o,openingTime:d,closingTime:p}}const ut={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};class Fg{constructor(){Z(this,"apiKey","");Z(this,"cache",{});Z(this,"apiEndpoint","https://translation.googleapis.com/language/translate/v2")}setApiKey(t){this.apiKey=t}getApiKey(){return this.apiKey}async translate(t,n,s){if(!t||!t.trim())return{translatedText:t};if(!this.apiKey)return{translatedText:t};const i="".concat(t,"|").concat(n,"|").concat(s||"auto");if(this.cache[i])return{translatedText:this.cache[i]};try{const r=new URLSearchParams({key:this.apiKey,q:t,target:n,format:"text"});s&&r.append("source",s);const l=await fetch("".concat(this.apiEndpoint,"?").concat(r.toString()),{method:"POST",headers:{"Content-Type":"application/json"}});if(!l.ok)throw new Error("Translation API error: ".concat(l.status));const o=await l.json();if(o.data&&o.data.translations&&o.data.translations[0]){const c=o.data.translations[0],d=c.translatedText,m=c.detectedSourceLanguage;return this.cache[i]=d,{translatedText:d,detectedSourceLanguage:m}}throw new Error("Invalid translation response")}catch{return{translatedText:t}}}clearCache(){this.cache={}}getSupportedLanguages(){return[{code:"en",name:"English",flag:"üá¨üáß"},{code:"id",name:"Indonesian",flag:"üáÆüá©"},{code:"zh-CN",name:"Chinese (Simplified)",flag:"üá®üá≥"},{code:"zh-TW",name:"Chinese (Traditional)",flag:"üáπüáº"},{code:"ja",name:"Japanese",flag:"üáØüáµ"},{code:"ko",name:"Korean",flag:"üá∞üá∑"},{code:"th",name:"Thai",flag:"üáπüá≠"},{code:"vi",name:"Vietnamese",flag:"üáªüá≥"},{code:"ru",name:"Russian",flag:"üá∑üá∫"},{code:"ar",name:"Arabic",flag:"üá∏üá¶"},{code:"fr",name:"French",flag:"üá´üá∑"},{code:"de",name:"German",flag:"üá©üá™"},{code:"es",name:"Spanish",flag:"üá™üá∏"},{code:"pt",name:"Portuguese",flag:"üáµüáπ"},{code:"it",name:"Italian",flag:"üáÆüáπ"},{code:"nl",name:"Dutch",flag:"üá≥üá±"},{code:"hi",name:"Hindi",flag:"üáÆüá≥"},{code:"bn",name:"Bengali",flag:"üáßüá©"},{code:"ms",name:"Malay",flag:"üá≤üáæ"},{code:"tl",name:"Tagalog",flag:"üáµüá≠"}]}}const ql=new Fg,$s=new Map;async function Vn(a,t,n){if(t===n)return a;const s="".concat(t,"-").concat(n,"-").concat(a);if($s.has(s))return $s.get(s);try{const i=await ql.translate(a,n,t);return $s.set(s,i.translatedText),i.translatedText}catch{return a}}class Kg{constructor(){Z(this,"client");Z(this,"databases");Z(this,"databaseId");this.client=new ct,this.databases=new Zt(this.client),this.client.setEndpoint((ut==null?void 0:ut.VITE_APPWRITE_ENDPOINT)||"https://syd.cloud.appwrite.io/v1").setProject((ut==null?void 0:ut.VITE_APPWRITE_PROJECT_ID)||"68f23b11000d25eb3664"),this.databaseId=(ut==null?void 0:ut.VITE_APPWRITE_DATABASE_ID)||"68f76ee1000e64ca8d05"}async translateAndSaveTherapistData(t,n,s="en"){try{const i=s==="en"?"id":"en",r={};if(n.description&&(r["description_".concat(s)]=n.description),n.location&&(r["location_".concat(s)]=n.location),n.name&&(r["name_".concat(s)]=n.name),n.description)try{const o=await Vn(n.description,s,i);r["description_".concat(i)]=o}catch{r["description_".concat(i)]=this.getFallbackTranslation(n.description,i)}if(n.location)try{const o=await Vn(n.location,s,i);r["location_".concat(i)]=o}catch{r["location_".concat(i)]=this.getFallbackTranslation(n.location,i)}if(n.massageTypes)try{let o;try{o=JSON.parse(n.massageTypes)}catch{o=n.massageTypes.split(",").map(d=>d.trim()).filter(Boolean)}const c=[];for(const d of o)try{const m=await Vn(d,s,i);c.push(m)}catch{c.push(this.getFallbackTranslation(d,i))}r["massageTypes_".concat(s)]=n.massageTypes,r["massageTypes_".concat(i)]=c.join(", ")}catch{r["massageTypes_".concat(s)]=n.massageTypes,r["massageTypes_".concat(i)]=n.massageTypes}const l=(ut==null?void 0:ut.VITE_APPWRITE_THERAPISTS_COLLECTION_ID)||"therapists_collection_id";return await this.databases.updateDocument(this.databaseId,l,t,r),{success:!0,translatedData:r}}catch(i){return{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}getFallbackTranslation(t,n){const i={en:{"Pijat Swedia":"Swedish Massage","Pijat Jaringan Dalam":"Deep Tissue Massage","Pijat Batu Panas":"Hot Stone Massage","Pijat Aromaterapi":"Aromatherapy Massage","Pijat Refleksi":"Reflexology Massage","Pijat Thailand":"Thai Massage","Pijat Prenatal":"Prenatal Massage","Pijat Olahraga":"Sports Massage","Terapis pijat profesional":"Professional massage therapist","Berpengalaman dalam berbagai teknik pijat":"Experienced in various massage techniques","Tersedia untuk layanan rumah":"Available for home service",Denpasar:"Denpasar",Ubud:"Ubud",Canggu:"Canggu",Seminyak:"Seminyak",Kuta:"Kuta"},id:{"Swedish Massage":"Pijat Swedia","Deep Tissue Massage":"Pijat Jaringan Dalam","Hot Stone Massage":"Pijat Batu Panas","Aromatherapy Massage":"Pijat Aromaterapi","Reflexology Massage":"Pijat Refleksi","Thai Massage":"Pijat Thailand","Prenatal Massage":"Pijat Prenatal","Sports Massage":"Pijat Olahraga","Professional massage therapist":"Terapis pijat profesional","Experienced in various massage techniques":"Berpengalaman dalam berbagai teknik pijat","Available for home service":"Tersedia untuk layanan rumah",Denpasar:"Denpasar",Ubud:"Ubud",Canggu:"Canggu",Seminyak:"Seminyak",Kuta:"Kuta"}}[n];if(i[t])return i[t];for(const[r,l]of Object.entries(i))if(t.toLowerCase().includes(r.toLowerCase()))return t.replace(new RegExp(r,"gi"),l);return t}async translateAllExistingTherapists(){try{const t=(ut==null?void 0:ut.VITE_APPWRITE_THERAPISTS_COLLECTION_ID)||"therapists_collection_id",n=await this.databases.listDocuments(this.databaseId,t),s=[];let i=0;for(const r of n.documents)try{if(r.description_id&&r.description_en)continue;const l=r.description_id?"id":"en",o=await this.translateAndSaveTherapistData(r.$id,{description:r.description,location:r.location,massageTypes:r.massageTypes,name:r.name},l);o.success?i++:s.push("Failed to translate ".concat(r.name,": ").concat(o.error)),await new Promise(c=>setTimeout(c,1e3))}catch(l){const o="Error processing therapist ".concat(r.name,": ").concat(l);s.push(o)}return{success:s.length===0,processed:i,errors:s}}catch(t){return{success:!1,processed:0,errors:[t instanceof Error?t.message:"Unknown error"]}}}}const Wg=new Kg,Qf=Object.freeze(Object.defineProperty({__proto__:null,adminTranslationService:Wg,translateText:Vn,translationService:ql},Symbol.toStringTag,{value:"Module"})),qg=new ct().setEndpoint(h.endpoint).setProject(h.projectId),mi=new Zt(qg),jo=h.databaseId,Hg=h.collections.chatRooms;h.collections.chatMessages;const _n="693cfadf000997d3cd66",gs={WELCOME:a=>({en:"".concat(a,": Welcome to my chat"),id:"".concat(a,": Selamat datang di chat saya")}),BOOKING_RECEIVED:{en:"Waiting for therapist response (5 minutes)",id:"Menunggu respon terapis (5 menit)"},TIMEOUT_SEARCHING:{en:"Searching for a new therapist",id:"Mencari terapis baru"},THERAPIST_ACCEPTED:{en:"Therapist on the way",id:"Terapis dalam perjalanan"},THERAPIST_ON_WAY:{en:"Therapist is on the way. Please ensure location is correct and accessible.",id:"Terapis sedang dalam perjalanan. Pastikan lokasi benar dan dapat diakses."},BOOKING_CANCELLED:{en:"This booking has been cancelled. If you need help, Indastreet Admin is available in this chat.",id:"Booking ini telah dibatalkan. Jika Anda butuh bantuan, Admin Indastreet tersedia di chat ini."},SERVICE_COMPLETED:{en:"Service completed. Thank you for using Indastreet Massage.",id:"Layanan selesai. Terima kasih telah menggunakan Indastreet Massage."}};async function Hl(a,t,n){await ps(a,gs.WELCOME(t),n)}async function gi(a,t){await ps(a,gs.BOOKING_RECEIVED,t)}async function Gl(a,t){await ps(a,gs.BOOKING_CANCELLED,t)}async function zl(a){try{const t=typeof a.therapistId=="number"?a.therapistId.toString():a.therapistId,n={bookingId:a.bookingId,customerId:a.customerId,customerName:a.customerName,customerLanguage:a.customerLanguage,customerPhoto:a.customerPhoto||"",therapistId:t,therapistName:a.therapistName,therapistLanguage:a.therapistLanguage,therapistType:a.therapistType,therapistPhoto:a.therapistPhoto||"",status:Di.Pending,expiresAt:a.expiresAt,unreadCount:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};let s;try{s=qu(n)}catch(r){throw new Error("Invalid chat room data: ".concat(r.message))}return await mi.createDocument(h.databaseId,h.collections.chatRooms,se.unique(),s)}catch(t){throw new Error("Failed to create chat room: ".concat(t.message))}}async function ps(a,t,n,s){try{const{messagingService:i}=await Ce(async()=>{const{messagingService:o}=await Promise.resolve().then(()=>Hu);return{messagingService:o}},void 0);let r,l;if(n?r=String(n):r=_n,l=_n,r==="all")throw new Error('Invalid recipientId: "all" is not allowed. Must be a valid userId.');await i.sendMessage({roomId:a,senderId:l,senderType:"admin",senderName:"Indastreet System",recipientId:r,recipientName:r===_n?"Indastreet System":"User",recipientType:r===_n?"admin":"user",messageType:"text",content:t.en,message:t.en,originalLanguage:"en",translatedText:t.id,translatedLanguage:"id",isSystemMessage:!0,bookingid:"",originalMessageId:"",expiresat:"",archivedBy:"",sessionId:a,read:!1})}catch(i){throw i}}async function Gg(a,t,n){try{await mi.updateDocument(jo,h.collections.bookings||"bookings",a,{status:"Cancelled",cancelledAt:new Date().toISOString(),cancelledBy:n||"customer"}),await mi.updateDocument(jo,Hg,t,{status:Di.Cancelled,updatedAt:new Date().toISOString()}),await Gl(t,n)}catch(s){throw s}}const ns=Object.freeze(Object.defineProperty({__proto__:null,SYSTEM_MESSAGE_TEMPLATES:gs,cancelBooking:Gg,createChatRoom:zl,sendBookingCancelledMessage:Gl,sendBookingReceivedMessage:gi,sendSystemMessage:ps,sendWelcomeMessage:Hl},Symbol.toStringTag,{value:"Module"}));function zg(){const a=u.useContext(Ri);if(!a)throw new Error("useChatProvider must be used within ChatProvider");const{activeChatRooms:t,openChatRoom:n,closeChatRoom:s,minimizeChatRoom:i,isChatMinimized:r,setSelectedChatId:l,selectedChatId:o,subscriptionActive:c,isLoading:d,error:m,messages:p,messagesLoading:f,messagesError:y,currentChatRoom:I,sendMessage:P,sending:D,notifications:j,addNotification:E,removeNotification:T}=a,x=S=>{try{if(!S.chatRoomId)throw new Error("Cannot open chat without chatRoomId");if(!S.bookingId)throw new Error("Cannot open chat without bookingId");return n(S.chatRoomId),E("success","Chat Opened","Chat with ".concat(S.providerName," is ready"),{duration:3e3}),!0}catch(C){return E("error","Chat Failed",C.message||"Could not open chat room",{duration:5e3}),!1}};return{activeChatRooms:t,selectedChatId:o,subscriptionActive:c,isLoading:d,chatError:m,currentChatRoom:I,messages:p,messagesLoading:f,messagesError:y,openChatRoom:n,closeChatRoom:s,minimizeChatRoom:i,isChatMinimized:r,setSelectedChatId:l,sendMessage:P,sending:D,notifications:j,addNotification:E,removeNotification:T,openBookingChat:x,handleBookingSuccess:S=>x({chatRoomId:S.chatRoomId,bookingId:S.bookingId,providerId:S.providerId,providerName:S.providerName||S.therapistName||"Provider",providerImage:S.providerImage,customerName:S.customerName,customerWhatsApp:S.customerWhatsApp,serviceDuration:S.serviceDuration,serviceType:S.serviceType,serviceDate:S.bookingDate,serviceTime:S.bookingTime})}}const Vg={maxAttempts:3,baseDelayMs:200,maxDelayMs:5e3,jitterFactor:.2,retryableErrors:["Network request failed","ECONNREFUSED","ETIMEDOUT","ENOTFOUND","socket hang up","429","500","502","503","504"]};function Yg(a,t){const n=t.baseDelayMs*Math.pow(2,a),s=n*t.jitterFactor*(Math.random()*2-1),i=n+s;return Math.min(t.maxDelayMs,Math.max(0,i))}function Jg(a,t){if(!a)return!1;const n=a.message||a.toString(),s=a.code||a.status||a.statusCode;for(const i of t.retryableErrors)if(n.includes(i)||String(s).includes(i))return!0;return!1}async function Qg(a,t={}){const n={...Vg,...t};let s,i=0;for(let r=0;r<n.maxAttempts;r++)try{const l=Date.now(),o=await a(),c=Date.now()-l;return r>0&&W.info("‚úÖ Retry successful after ".concat(r," attempts (").concat(i,"ms total delay)")),{success:!0,data:o,attempts:r+1,totalDelayMs:i}}catch(l){s=l;const o=r<n.maxAttempts-1&&Jg(l,n);if(o){const c=Yg(r,n);i+=c,W.warn("‚ö†Ô∏è Operation failed (attempt ".concat(r+1,"/").concat(n.maxAttempts,"), retrying in ").concat(Math.round(c),"ms..."),{error:l.message,code:l.code||l.status}),await new Promise(d=>setTimeout(d,c))}else{!o&&r<n.maxAttempts-1&&W.error("‚ùå Non-retryable error encountered:",l);break}}return W.error("‚ùå Operation failed after ".concat(n.maxAttempts," attempts (").concat(i,"ms total delay)"),s),{success:!1,error:s,attempts:n.maxAttempts,totalDelayMs:i}}async function $n(a,t="Appwrite operation"){const n=await Qg(a,{maxAttempts:3,baseDelayMs:300,maxDelayMs:3e3,jitterFactor:.15});if(n.success)return n.data;throw W.error("üö® ".concat(t," failed after ").concat(n.attempts," attempts:"),{error:n.error,totalDelay:n.totalDelayMs,timestamp:new Date().toISOString()}),n.error}class Xg{constructor(t=5,n=3e4){Z(this,"failureCount",0);Z(this,"lastFailureTime",0);Z(this,"state","closed");this.threshold=t,this.cooldownMs=n}async execute(t){if(this.state==="open"){const n=Date.now()-this.lastFailureTime;if(n<this.cooldownMs)throw new Error("Circuit breaker is OPEN. Cooldown: ".concat(Math.round((this.cooldownMs-n)/1e3),"s remaining"));this.state="half-open",W.info("üîÑ Circuit breaker entering HALF-OPEN state")}try{const n=await t();return this.state==="half-open"&&(this.state="closed",this.failureCount=0,W.info("‚úÖ Circuit breaker CLOSED (recovered)")),n}catch(n){throw this.failureCount++,this.lastFailureTime=Date.now(),this.failureCount>=this.threshold&&(this.state="open",W.error("üö® Circuit breaker OPENED after ".concat(this.failureCount," failures"))),n}}getState(){return{state:this.state,failureCount:this.failureCount,timeSinceLastFailure:Date.now()-this.lastFailureTime}}}const Io=new Xg(5,3e4);class Zg{constructor(){Z(this,"errors",[]);Z(this,"maxHistorySize",1e3);Z(this,"errorRateWindow",6e4);Z(this,"alertThreshold",10)}logError(t){var s;const n={id:this.generateErrorId(),timestamp:new Date,severity:t.severity,category:t.category,operation:t.operation,errorMessage:t.errorMessage,errorCode:t.errorCode,stack:(s=t.error)==null?void 0:s.stack,context:t.context,userId:t.userId,sessionId:t.sessionId,retryAttempts:t.retryAttempts,resolved:!1};return this.errors.push(n),this.errors.length>this.maxHistorySize&&(this.errors=this.errors.slice(-this.maxHistorySize)),this.logToConsole(n),this.checkAlertThreshold(),n.id}logToConsole(t){const n=this.getSeverityEmoji(t.severity),s="".concat(n," [").concat(t.category,"] ").concat(t.operation,": ").concat(t.errorMessage),i={errorId:t.id,timestamp:t.timestamp.toISOString(),code:t.errorCode,context:t.context,userId:t.userId,retryAttempts:t.retryAttempts};switch(t.severity){case"critical":W.error(s,i),t.stack&&W.error("Stack:",t.stack);break;case"error":W.error(s,i);break;case"warning":W.warn(s,i);break;case"info":W.info(s,i);break}}getSeverityEmoji(t){return{critical:"üö®",error:"‚ùå",warning:"‚ö†Ô∏è",info:"‚ÑπÔ∏è"}[t]}generateErrorId(){return"ERR-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}checkAlertThreshold(){const t=this.getErrorRate();t>this.alertThreshold&&(W.error("üö®üö®üö® CRITICAL ALERT: Error rate is ".concat(t,"/min (threshold: ").concat(this.alertThreshold,"/min)")),W.error("Recent errors:",this.getRecentErrors(10)))}getErrorRate(){const n=Date.now()-this.errorRateWindow;return this.errors.filter(i=>i.timestamp.getTime()>n).length}getStats(){const n=Date.now()-this.errorRateWindow,s=this.errors.filter(o=>o.timestamp.getTime()>n),i={},r={};let l=0;for(const o of this.errors)i[o.category]=(i[o.category]||0)+1,r[o.operation]=(r[o.operation]||0)+1,o.severity==="critical"&&l++;return{totalErrors:this.errors.length,criticalErrors:l,errorsByCategory:i,errorsByOperation:r,recentErrors:this.getRecentErrors(20),errorRate:s.length}}getRecentErrors(t=50){return this.errors.slice(-t).reverse()}getErrorsByCategory(t,n=50){return this.errors.filter(s=>s.category===t).slice(-n).reverse()}getErrorsBySeverity(t,n=50){return this.errors.filter(s=>s.severity===t).slice(-n).reverse()}getUnresolvedErrors(){return this.errors.filter(t=>!t.resolved)}resolveError(t){const n=this.errors.find(s=>s.id===t);n&&(n.resolved=!0,W.info("‚úÖ Error ".concat(t," marked as resolved")))}clearHistory(){this.errors=[],W.info("üóëÔ∏è Error history cleared")}exportErrors(t="json"){if(t==="csv"){const n=["ID","Timestamp","Severity","Category","Operation","Message","Code","Resolved"],s=this.errors.map(i=>[i.id,i.timestamp.toISOString(),i.severity,i.category,i.operation,i.errorMessage.replace(/,/g,";"),i.errorCode||"",i.resolved]);return[n,...s].map(i=>i.join(",")).join("\n")}return JSON.stringify(this.errors,null,2)}}const ep=new Zg,tp=(a,t,n)=>ep.logError({severity:"error",category:"booking",operation:a,errorMessage:t.message,error:t,context:n});function ap(a,t,n,s,i,r,l){const{handleBookingSuccess:o}=zg();return async function(d,m){var L,U,$,H;const{selectedDuration:p,selectedTime:f,customerName:y,customerWhatsApp:I,roomNumber:P,selectedAvatar:D}=d,{setError:j,setIsCreating:E,onClose:T,resetForm:x}=m;if(alert("üî• BOOKING CODE EXECUTED"),!l&&(!p||!f)||!y||!I)return;const A=I.replace(/\D/g,"");if(A.length<8||A.length>15){j("Please enter a valid WhatsApp number (8-15 digits)");return}const S="+62".concat(A);let C=!1,_="";try{const Y=await K.listDocuments(h.databaseId,h.collections.bookings||"bookings",[b.equal("customerWhatsApp",S),b.equal("status","Pending"),b.orderDesc("$createdAt"),b.limit(1)]);if(Y.documents.length>0){const ae=Y.documents[0];_=ae.providerName||ae.therapistName||"a therapist",C=!0}}catch{}try{E(!0);const{ensureAuthSession:Y}=await Ce(async()=>{const{ensureAuthSession:X}=await import("./authSessionHelper.DPBCHOJc.js");return{ensureAuthSession:X}},__vite__mapDeps([0,1,2,3,4,5,6,7,8])),ae=await Y("scheduled booking creation");if(!ae.success){mt("Unable to authenticate. Please try again.","error"),E(!1);return}const F=ae.userId;if(!F){mt("Authentication issue. Please try again.","error"),E(!1);return}const V=[{minutes:60,price:(a==null?void 0:a["60"])||15e4,label:"60 min"},{minutes:90,price:(a==null?void 0:a["90"])||225e3,label:"90 min"},{minutes:120,price:(a==null?void 0:a["120"])||3e5,label:"120 min"}],pe=p||(l?60:0),he=((L=V.find(X=>X.minutes===pe))==null?void 0:L.price)||0,de=new Date;!l&&f&&de.setHours(f.hour,f.minute,0,0);const Te=new Date(Date.now()+900*1e3);let De;try{De=typeof crypto!="undefined"&&crypto.randomUUID?crypto.randomUUID():"booking_".concat(Date.now())}catch{De="booking_".concat(Date.now())}const we={bookingId:String(De),bookingDate:new Date().toISOString(),userId:String(ae.userId),status:"Pending",duration:Number(pe),providerId:String(t),providerType:String(s),providerName:String(n),service:String(pe),startTime:de.toISOString(),price:Number(Math.round(he/1e3)),createdAt:new Date().toISOString(),responseDeadline:Te.toISOString(),totalCost:he,paymentMethod:"Unpaid",scheduledTime:de.toISOString(),customerName:y,customerWhatsApp:S,bookingType:l?"immediate":"scheduled",therapistId:t,therapistName:n,therapistType:s};r&&(we.hotelId=r,we.hotelGuestName=y),P&&(we.hotelRoomNumber=P),Object.keys(we).forEach(X=>{(we[X]===void 0||we[X]===null)&&delete we[X]});let B=null;B=await $n(()=>Io.execute(()=>K.createDocument(h.databaseId,h.collections.bookings||"bookings","unique()",we)),"Create Scheduled Booking");const ne=B,v=l?5:25,R=await $n(()=>Io.execute(()=>zl({bookingId:ne.$id,customerId:F,customerName:y,customerLanguage:"en",customerPhoto:D,therapistId:t,therapistName:n,therapistLanguage:"id",therapistType:s,therapistPhoto:i||"",expiresAt:new Date(Date.now()+v*60*1e3).toISOString()})),"Create Chat Room");try{await $n(()=>Hl(R.$id,n||"Therapist",F),"Send Welcome Message")}catch{}try{await $n(()=>gi(R.$id,F||"user"),"Send Booking Received Message")}catch{}o&&o({bookingId:ne.$id,chatRoomId:R.$id,therapistName:n,duration:pe,price:he});try{await gi(R.$id,F||"user")}catch{}if(C)try{const X={en:"‚è≥ Please wait until your last booking has been confirmed before booking again. Normal wait time is less than 5 minutes. Thank You Indastreet Team.",id:"‚è≥ Harap tunggu hingga pemesanan terakhir Anda dikonfirmasi sebelum memesan lagi. Waktu tunggu normal kurang dari 5 menit. Terima kasih Tim Indastreet."},{sendSystemMessage:Q}=await Ce(async()=>{const{sendSystemMessage:te}=await Promise.resolve().then(()=>ns);return{sendSystemMessage:te}},void 0);await Q(R.$id||"",X,"system","system")}catch{}o({chatRoomId:R.$id,bookingId:ne.$id,providerId:ne.therapistId,providerName:ne.therapistName,providerImage:i||null,therapistId:ne.therapistId,therapistName:ne.therapistName,customerName:y,customerWhatsApp:I,userRole:"user",source:"booking_flow",pricing:a||{60:15e4,90:225e3,120:3e5},bookingDate:de.toLocaleDateString(),bookingTime:de.toLocaleTimeString(),serviceDuration:String(pe),serviceType:"Home Massage"})?mt("‚úÖ Booking created! Chat window opened.","success"):mt("‚úÖ Booking created! Please refresh to access chat.","warning"),setTimeout(()=>{T(),x()},500)}catch(Y){tp("createChatRoom",Y,{bookingId:result==null?void 0:result.$id,therapistId:t,therapistName:n});let ae="Booking saved but chat failed to open.";(U=Y.message)!=null&&U.includes("validation failed")?ae="Chat setup error. Booking saved successfully.":($=Y.message)!=null&&$.includes("collection")?ae="Chat service unavailable. Booking saved successfully.":(H=Y.message)!=null&&H.includes("Circuit breaker is OPEN")&&(ae="Service temporarily unavailable. Booking saved, but chat failed."),mt("".concat(ae," Please contact support."),"warning"),E(!1);return}E(!1)}}const np=({isOpen:a,onClose:t,onConfirmDeposit:n,bookingDetails:s,depositPercentage:i=30,className:r=""})=>{const[l,o]=u.useState("terms"),[c,d]=u.useState(!1),[m,p]=u.useState(null),[f,y]=u.useState(!1),[I,P]=u.useState({amount:0,method:"bank_transfer",termsAccepted:!1}),D=Math.round(s.totalPrice*i/100),j=s.totalPrice-D,E=S=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(S),T=S=>new Date(S).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),x=S=>{var _;const C=(_=S.target.files)==null?void 0:_[0];if(C){if(C.size>5*1024*1024){alert("File size must be less than 5MB");return}p(C)}},A=()=>{if(!c||!m)return;n({amount:D,method:"bank_transfer",termsAccepted:c,paymentProof:m})};return a?e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[110] p-4 ".concat(r),children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-lg w-full shadow-2xl max-h-[90vh] ",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white p-6 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ja,{className:"w-6 h-6"}),e.jsx("h2",{className:"text-xl font-bold",children:"Scheduled Booking Deposit"})]}),e.jsx("p",{className:"text-red-100 text-sm",children:"Non-refundable deposit required"})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(Qe,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[e.jsxs("h3",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(Ia,{className:"w-5 h-5 text-orange-600"}),"Booking Summary"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Therapist:"}),e.jsx("span",{className:"font-medium",children:s.therapistName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Service:"}),e.jsxs("span",{className:"font-medium",children:[s.serviceDuration," min massage"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Date:"}),e.jsx("span",{className:"font-medium",children:T(s.scheduledDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Time:"}),e.jsx("span",{className:"font-medium",children:s.scheduledTime})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Location:"}),e.jsx("span",{className:"font-medium",children:s.location})]}),e.jsx("div",{className:"border-t pt-2 mt-3",children:e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Total Price:"}),e.jsx("span",{children:E(s.totalPrice)})]})})]})]}),e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Et,{className:"w-6 h-6 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-red-900 mb-2",children:"Deposit Required"}),e.jsxs("div",{className:"space-y-2 text-sm text-red-800",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-medium",children:["Deposit (",i,"%):"]}),e.jsx("span",{className:"font-bold text-lg",children:E(D)})]}),e.jsxs("div",{className:"flex justify-between items-center text-gray-600",children:[e.jsx("span",{children:"Remaining (pay after service):"}),e.jsx("span",{className:"font-medium",children:E(j)})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"font-semibold text-red-900 mb-1",children:"‚ö†Ô∏è Important Terms:"}),e.jsxs("ul",{className:"space-y-1 text-xs",children:[e.jsxs("li",{children:["‚Ä¢ Deposit is ",e.jsx("strong",{children:"NON-REFUNDABLE"})," under any circumstances"]}),e.jsx("li",{children:"‚Ä¢ Dates may be changed in advance with therapist agreement"}),e.jsx("li",{children:"‚Ä¢ Time slots can be booked outside calendar window"}),e.jsx("li",{children:"‚Ä¢ Remaining amount paid after service completion"})]})]})]})]})]})}),l==="terms"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Booking Terms & Conditions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-yellow-900 mb-2",children:"Deposit Policy"}),e.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[e.jsxs("li",{children:["‚Ä¢ ",i,"% deposit required to confirm scheduled booking"]}),e.jsxs("li",{children:["‚Ä¢ Deposit is ",e.jsx("strong",{children:"completely NON-REFUNDABLE"})]}),e.jsx("li",{children:"‚Ä¢ No exceptions for cancellations or no-shows"})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Date Change Policy"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Dates may be changed with advance notice (minimum 24 hours)"}),e.jsx("li",{children:"‚Ä¢ Changes require agreement from therapist"}),e.jsx("li",{children:"‚Ä¢ Deposit transfers to new date if change approved"}),e.jsx("li",{children:"‚Ä¢ Changes subject to therapist availability"})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Booking Flexibility"}),e.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Time slots available beyond displayed calendar window"}),e.jsx("li",{children:"‚Ä¢ Special time requests can be accommodated"}),e.jsx("li",{children:"‚Ä¢ Early morning and late evening slots possible"}),e.jsx("li",{children:"‚Ä¢ Contact therapist directly for special arrangements"})]})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-4 bg-gray-50 border-2 border-gray-200 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:S=>d(S.target.checked),className:"mt-1 w-5 h-5 text-red-500 rounded focus:ring-2 focus:ring-red-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 mb-1",children:"I accept all terms and conditions"}),e.jsx("p",{className:"text-sm text-gray-600",children:"I understand the deposit is non-refundable and agree to the booking policies above."})]})]}),e.jsx("button",{onClick:()=>o("payment"),disabled:!c,className:"w-full py-3 bg-red-500 text-white font-bold rounded-xl hover:bg-red-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Proceed to Payment"})]}),l==="payment"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:()=>o("terms"),className:"text-red-600 text-sm font-medium",children:"‚Üê Back to Terms"}),e.jsx("h3",{className:"font-bold text-gray-900",children:"Payment Required"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border-2 border-red-200 rounded-xl p-4 text-center",children:[e.jsx(_t,{className:"w-12 h-12 text-red-600 mx-auto mb-3"}),e.jsxs("h4",{className:"text-xl font-bold text-red-900 mb-1",children:["Deposit: ",E(D)]}),e.jsx("p",{className:"text-sm text-red-700",children:"Transfer exact amount to secure your appointment"})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Bank Transfer Instructions"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-sm space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Bank:"})," BCA (Bank Central Asia)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Account Number:"})," 1234-5678-9012"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Account Name:"})," PT IndaStreet Massage"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Amount:"})," ",E(D)]})]}),e.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"Important:"})," Transfer the exact amount shown above. Upload proof of transfer below to complete booking."]})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Upload Payment Proof ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-red-400 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:x,className:"hidden",id:"payment-proof"}),e.jsx("label",{htmlFor:"payment-proof",className:"cursor-pointer",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(_t,{className:"w-8 h-8 text-gray-400 mx-auto"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:m?m.name:"Click to upload payment proof"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Support: JPG, PNG, PDF (Max 5MB)"})]})]})})]})]}),e.jsx("button",{onClick:A,disabled:!m||f,className:"w-full py-3 bg-red-500 text-white font-bold rounded-xl hover:bg-red-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:f?"Processing...":"‚úÖ Confirm Deposit Payment"})]})]})]})}):null},sp=({isOpen:a,onClose:t,onSubmitRequest:n,booking:s,className:i=""})=>{const[r,l]=u.useState(""),[o,c]=u.useState(""),[d,m]=u.useState(""),[p,f]=u.useState("medium"),[y,I]=u.useState(!1),P=A=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(A),D=A=>new Date(A).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),j=()=>{const A=new Date;return A.setDate(A.getDate()+1),A.toISOString().split("T")[0]},E=()=>{if(!r)return!0;const A=new Date(r),S=new Date(s.currentDate),C=new Date;return C.setHours(0,0,0,0),A>S?!0:S.getTime()-C.getTime()>=1440*60*1e3},T=async()=>{if(!r||!o||!d.trim())return;I(!0);const A={newDate:r,newTime:o,reason:d.trim(),urgency:p};try{await n(A),t()}catch(S){logger.error("Error submitting date change request:",S)}finally{I(!1)}},x=A=>{switch(A){case"high":return"text-red-600 bg-red-50 border-red-200";case"medium":return"text-orange-600 bg-orange-50 border-orange-200";case"low":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};return a?e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[120] p-4 ".concat(i),children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full shadow-2xl max-h-[90vh] ",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ia,{className:"w-6 h-6"}),e.jsx("h2",{className:"text-xl font-bold",children:"Request Date Change"})]}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Submit request to therapist for approval"})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(Qe,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsxs("h3",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5 text-blue-600"}),"Current Booking Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Therapist:"}),e.jsx("span",{className:"font-medium",children:s.therapistName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Service:"}),e.jsxs("span",{className:"font-medium",children:[s.serviceDuration," min massage"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Location:"}),e.jsx("span",{className:"font-medium",children:s.location})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Current Date:"}),e.jsx("span",{className:"font-medium text-red-600",children:D(s.currentDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Current Time:"}),e.jsx("span",{className:"font-medium text-red-600",children:s.currentTime})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Deposit Paid:"}),e.jsx("span",{className:"font-medium text-green-600",children:P(s.depositAmount)})]})]})]})]}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(xn,{className:"w-6 h-6 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-blue-900 mb-2",children:"Date Change Policy"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Requests must be made at least 24 hours in advance"}),e.jsx("li",{children:"‚Ä¢ Therapist has the right to approve or decline requests"}),e.jsx("li",{children:"‚Ä¢ Your deposit will transfer to the new date if approved"}),e.jsx("li",{children:"‚Ä¢ Time slots outside calendar window are available"}),e.jsx("li",{children:"‚Ä¢ You will receive notification about request status"})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Requested New Schedule"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["New Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:r,onChange:A=>l(A.target.value),min:j(),className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["New Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o,onChange:A=>c(A.target.value),className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select time"}),e.jsx("option",{value:"07:00",children:"07:00 (Early Morning)"}),e.jsx("option",{value:"08:00",children:"08:00"}),e.jsx("option",{value:"09:00",children:"09:00"}),e.jsx("option",{value:"10:00",children:"10:00"}),e.jsx("option",{value:"11:00",children:"11:00"}),e.jsx("option",{value:"12:00",children:"12:00"}),e.jsx("option",{value:"13:00",children:"13:00"}),e.jsx("option",{value:"14:00",children:"14:00"}),e.jsx("option",{value:"15:00",children:"15:00"}),e.jsx("option",{value:"16:00",children:"16:00"}),e.jsx("option",{value:"17:00",children:"17:00"}),e.jsx("option",{value:"18:00",children:"18:00"}),e.jsx("option",{value:"19:00",children:"19:00"}),e.jsx("option",{value:"20:00",children:"20:00"}),e.jsx("option",{value:"21:00",children:"21:00 (Late Evening)"}),e.jsx("option",{value:"22:00",children:"22:00 (Late Evening)"})]})]})]}),!E()&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"‚ö†Ô∏è Notice:"})," Changes require at least 24 hours advance notice. Your selected date may not meet this requirement."]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Request Urgency"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["low","medium","high"].map(A=>e.jsxs("label",{className:"p-3 border-2 rounded-xl cursor-pointer transition-all ".concat(p===A?x(A):"border-gray-200 hover:border-gray-300"),children:[e.jsx("input",{type:"radio",name:"urgency",value:A,checked:p===A,onChange:S=>f(S.target.value),className:"sr-only"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium capitalize",children:A}),e.jsxs("div",{className:"text-xs mt-1",children:[A==="low"&&"Flexible timing",A==="medium"&&"Preferred change",A==="high"&&"Urgent request"]})]})]},A))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Reason for Change ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:d,onChange:A=>m(A.target.value),placeholder:"Please explain why you need to change the date/time...",rows:4,className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"A clear reason helps the therapist understand and approve your request"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:t,className:"flex-1 py-3 px-4 border-2 border-gray-300 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:T,disabled:!r||!o||!d.trim()||y,className:"flex-1 py-3 px-4 bg-blue-500 text-white font-bold rounded-xl hover:bg-blue-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y?e.jsx(e.Fragment,{children:"Processing..."}):e.jsxs(e.Fragment,{children:[e.jsx(rs,{className:"w-5 h-5"}),"Submit Request"]})})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Xt,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-green-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"What happens next:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsxs("li",{children:["‚Ä¢ Your request will be sent to ",s.therapistName]}),e.jsx("li",{children:"‚Ä¢ You'll receive notification within 24 hours"}),e.jsx("li",{children:"‚Ä¢ If approved, your deposit transfers to the new date"}),e.jsx("li",{children:"‚Ä¢ If declined, you can submit a different request"})]})]})]})})]})]})}):null};class ip{constructor(){Z(this,"DATABASE_ID","main-database");Z(this,"SCHEDULED_DEPOSITS_COLLECTION","scheduled-booking-deposits");Z(this,"DATE_CHANGE_REQUESTS_COLLECTION","date-change-requests");Z(this,"FLEXIBLE_TIMESLOTS_COLLECTION","flexible-timeslots");Z(this,"STORAGE_BUCKET","payment-proofs")}async createDepositRequirement(t,n,s,i,r=30,l){try{const o=Math.round(i*r/100),c=new Date;c.setHours(c.getHours()+24);const d={bookingId:t,userId:n,therapistId:s,amount:o,status:"pending",paymentMethod:"bank_transfer",depositPercentage:r,isRefundable:!1,createdAt:new Date,expiresAt:c,metadata:l};return{id:(await K.createDocument(this.DATABASE_ID,this.SCHEDULED_DEPOSITS_COLLECTION,se.unique(),d)).$id,...d}}catch(o){throw new Error("Failed to create deposit requirement: ".concat(o instanceof Error?o.message:"Unknown error"))}}async uploadPaymentProof(t,n){try{const s=await Qt.createFile(this.STORAGE_BUCKET,se.unique(),n);return await K.updateDocument(this.DATABASE_ID,this.SCHEDULED_DEPOSITS_COLLECTION,t,{paymentProofId:s.$id,paymentProofUrl:Qt.getFileView(this.STORAGE_BUCKET,s.$id).href,status:"paid"}),s.$id}catch(s){throw new Error("Failed to upload payment proof: ".concat(s instanceof Error?s.message:"Unknown error"))}}async verifyDeposit(t,n,s){try{await K.updateDocument(this.DATABASE_ID,this.SCHEDULED_DEPOSITS_COLLECTION,t,{status:s?"verified":"pending",verifiedAt:s?new Date:null,verifiedBy:s?n:null})}catch(i){throw new Error("Failed to verify deposit: ".concat(i instanceof Error?i.message:"Unknown error"))}}async getDepositStatus(t){try{const n=await K.listDocuments(this.DATABASE_ID,this.SCHEDULED_DEPOSITS_COLLECTION,[b.equal("bookingId",t)]);if(n.documents.length===0)return null;const s=n.documents[0];return{id:s.$id,bookingId:s.bookingId,userId:s.userId,therapistId:s.therapistId,amount:s.amount,status:s.status,paymentMethod:s.paymentMethod,paymentProofUrl:s.paymentProofUrl,paymentProofId:s.paymentProofId,depositPercentage:s.depositPercentage,isRefundable:!1,createdAt:new Date(s.createdAt),expiresAt:new Date(s.expiresAt),verifiedAt:s.verifiedAt?new Date(s.verifiedAt):void 0,verifiedBy:s.verifiedBy,metadata:s.metadata}}catch{return null}}async submitDateChangeRequest(t,n,s,i,r,l,o,c,d,m){try{const p={bookingId:t,depositId:n,userId:s,therapistId:i,currentDate:r,currentTime:l,requestedDate:o,requestedTime:c,reason:d,urgency:m,status:"pending",submittedAt:new Date};return{id:(await K.createDocument(this.DATABASE_ID,this.DATE_CHANGE_REQUESTS_COLLECTION,se.unique(),p)).$id,...p}}catch(p){throw new Error("Failed to submit date change request: ".concat(p instanceof Error?p.message:"Unknown error"))}}async respondToDateChangeRequest(t,n,s,i){try{await K.updateDocument(this.DATABASE_ID,this.DATE_CHANGE_REQUESTS_COLLECTION,t,{status:s?"approved":"rejected",respondedAt:new Date,therapistResponse:i||""})}catch(r){throw new Error("Failed to respond to date change request: ".concat(r instanceof Error?r.message:"Unknown error"))}}async getDateChangeRequests(t,n){try{const s=[];return t&&s.push(b.equal("therapistId",t)),n&&s.push(b.equal("userId",n)),(await K.listDocuments(this.DATABASE_ID,this.DATE_CHANGE_REQUESTS_COLLECTION,s)).documents.map(r=>({id:r.$id,bookingId:r.bookingId,depositId:r.depositId,userId:r.userId,therapistId:r.therapistId,currentDate:r.currentDate,currentTime:r.currentTime,requestedDate:r.requestedDate,requestedTime:r.requestedTime,reason:r.reason,urgency:r.urgency,status:r.status,submittedAt:new Date(r.submittedAt),respondedAt:r.respondedAt?new Date(r.respondedAt):void 0,therapistResponse:r.therapistResponse,adminNotes:r.adminNotes}))}catch{return[]}}async createFlexibleTimeSlot(t,n,s,i,r=!1,l=24,o=!1,c){try{const d={therapistId:t,date:n,startTime:s,endTime:i,isAvailable:!0,isOutsideCalendar:r,specialNotes:c,minimumNotice:l,requiresApproval:o};return{id:(await K.createDocument(this.DATABASE_ID,this.FLEXIBLE_TIMESLOTS_COLLECTION,se.unique(),d)).$id,...d}}catch(d){throw new Error("Failed to create flexible time slot: ".concat(d instanceof Error?d.message:"Unknown error"))}}async getFlexibleTimeSlots(t,n,s=!0){try{const i=[b.equal("therapistId",t)];return n&&i.push(b.equal("date",n)),s||i.push(b.equal("isOutsideCalendar",!1)),(await K.listDocuments(this.DATABASE_ID,this.FLEXIBLE_TIMESLOTS_COLLECTION,i)).documents.map(l=>({id:l.$id,therapistId:l.therapistId,date:l.date,startTime:l.startTime,endTime:l.endTime,isAvailable:l.isAvailable,isOutsideCalendar:l.isOutsideCalendar,specialNotes:l.specialNotes,minimumNotice:l.minimumNotice,requiresApproval:l.requiresApproval}))}catch{return[]}}async bookFlexibleTimeSlot(t,n){try{await K.updateDocument(this.DATABASE_ID,this.FLEXIBLE_TIMESLOTS_COLLECTION,t,{isAvailable:!1,bookedBy:n,bookedAt:new Date})}catch(s){throw new Error("Failed to book flexible time slot: ".concat(s instanceof Error?s.message:"Unknown error"))}}async getPendingDeposits(t){try{const n=[b.equal("status","paid")];return t&&n.push(b.equal("therapistId",t)),(await K.listDocuments(this.DATABASE_ID,this.SCHEDULED_DEPOSITS_COLLECTION,n)).documents.map(i=>({id:i.$id,bookingId:i.bookingId,userId:i.userId,therapistId:i.therapistId,amount:i.amount,status:i.status,paymentMethod:i.paymentMethod,paymentProofUrl:i.paymentProofUrl,paymentProofId:i.paymentProofId,depositPercentage:i.depositPercentage,isRefundable:!1,createdAt:new Date(i.createdAt),expiresAt:new Date(i.expiresAt),verifiedAt:i.verifiedAt?new Date(i.verifiedAt):void 0,verifiedBy:i.verifiedBy,metadata:i.metadata}))}catch{return[]}}async expireOldDeposits(){try{const t=new Date,n=await K.listDocuments(this.DATABASE_ID,this.SCHEDULED_DEPOSITS_COLLECTION,[b.equal("status","pending"),b.lessThan("expiresAt",t.toISOString())]);let s=0;for(const i of n.documents)await K.updateDocument(this.DATABASE_ID,this.SCHEDULED_DEPOSITS_COLLECTION,i.$id,{status:"expired"}),s++;return s}catch{return 0}}async sendDepositConfirmation(t,n){}async sendDateChangeNotification(t,n){}async sendDateChangeResponse(t,n){}}const To=new ip,rp=({isOpen:a,onClose:t,therapistId:n,therapistName:s,therapistType:i,therapistStatus:r,profilePicture:l,hotelVillaId:o,hotelVillaName:c,hotelVillaType:d,isImmediateBooking:m=!1,pricing:p,providerRating:f,discountPercentage:y=0,discountActive:I=!1})=>{var et,at;const{language:P}=Zo();Se[P==="gb"?"en":P]||Se.id;const{openBookingChat:j}=Ml(),[E,T]=u.useState(!1),[x,A]=u.useState(!1),[S,C]=u.useState(null),_=$g(),{step:L,setStep:U,selectedDuration:$,setSelectedDuration:H,selectedTime:Y,setSelectedTime:ae,customerName:F,customerWhatsApp:V,setCustomerWhatsApp:pe,roomNumber:he,setRoomNumber:de,selectedAvatar:Te,setSelectedAvatar:De,isCreating:we,setIsCreating:B,setError:ne,resetForm:v,AVATAR_OPTIONS:R}=_,{timeSlots:q}=Ug(a,n,i,L,$),X=ap(p,n,s,i,l,o,m),Q=typeof f=="number"&&f>0?f.toFixed(1):null;g.debug("üìä ScheduleBookingPopup pricing debug:",{therapistName:s,receivedPricing:p,discountPercentage:y,pricing60:p==null?void 0:p["60"],pricing90:p==null?void 0:p["90"],pricing120:p==null?void 0:p["120"]});const te=[{minutes:60,price:p&&p[60]?I&&y>0?Math.round(Number(p[60])*(1-y/100)):Number(p[60]):25e4,label:"60 min"},{minutes:90,price:p&&p[90]?I&&y>0?Math.round(Number(p[90])*(1-y/100)):Number(p[90]):35e4,label:"90 min"},{minutes:120,price:p&&p[120]?I&&y>0?Math.round(Number(p[120])*(1-y/100)):Number(p[120]):45e4,label:"120 min"}],oe=async fe=>{try{if(!S)return;const ve=await X(S.formData,{setError:ne,setIsCreating:B,onClose:()=>{},resetForm:v});ve!=null&&ve.success&&(await To.createDepositRequirement(ve.bookingId,S.userId,n,S.totalPrice,50,{originalBookingDate:S.formData.selectedTime.date,originalBookingTime:S.formData.selectedTime.time,serviceDuration:S.formData.selectedDuration,totalBookingPrice:S.totalPrice,therapistName:s,location:c||"Your Location"}),fe.paymentProof&&await To.uploadPaymentProof(ve.bookingId,fe.paymentProof),mt("‚úÖ Booking created! Deposit verification pending","success"),T(!1),C(null),t())}catch(ve){g.error("Error confirming deposit:",ve),mt("‚ùå Failed to process deposit","error")}},Ye=async fe=>{const ve=te.find(Rt=>Rt.minutes===fe.selectedDuration),gt=(ve==null?void 0:ve.price)||0;C({formData:fe,totalPrice:gt,userId:"current-user-id"}),T(!0)};return a?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[100] p-4",onClick:t,children:[e.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full shadow-2xl max-h-[85vh] sm:max-h-[90vh] ",onClick:fe=>fe.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 p-4 rounded-t-2xl sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[l?e.jsx("img",{src:l,alt:s,className:"w-12 h-12 rounded-full object-cover border-2 border-white"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-300 flex items-center justify-center border-2 border-white",children:e.jsx(Ut,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:m?"üü¢ Book Now":"üìÖ Schedule Booking"}),e.jsxs("p",{className:"text-orange-100 text-xs",children:["Indastreet ‚Ä¢ ",s]})]})]}),Q&&e.jsxs("div",{className:"flex items-center gap-1 bg-white/90 rounded-full px-3 py-1 shadow-sm",children:[e.jsx(Ot,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"text-sm font-bold text-black",children:Q})]}),e.jsx("button",{onClick:t,className:"text-white hover:bg-white/20 rounded-full p-2",children:e.jsx(Qe,{size:20})})]})}),e.jsxs("div",{className:"p-3 sm:p-4",children:[L==="duration"&&e.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-2 sm:mb-3",children:P==="id"?"Pilih Durasi":"Select Duration"}),te.map(fe=>e.jsx("button",{onClick:()=>{H(fe.minutes),g.debug("üöÄ Duration selected, opening booking chat..."),j({appwriteId:n.toString(),name:s,image:l,duration:fe.minutes,pricing:p||{60:25e4,90:35e4,120:45e4}}),t()},className:"w-full p-2 sm:p-2.5 rounded-xl border-2 transition-all duration-200 transform hover:scale-105 active:scale-95 ".concat($===fe.minutes?"border-transparent bg-gradient-to-r from-orange-500 to-amber-500 text-white shadow-lg animate-pulse":"border-gray-200 bg-gradient-to-r from-orange-50 to-amber-50 hover:border-orange-500 hover:from-orange-100 hover:to-amber-100 hover:shadow-md"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-left flex items-center gap-2",children:[e.jsx(We,{className:"text-orange-600",size:18}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-800 text-sm",children:fe.label}),i==="therapist"&&e.jsx("div",{className:"text-xs text-gray-500",children:P==="id"?"+ 30 menit waktu perjalanan":"+ 30 min travel time"})]})]}),e.jsxs("div",{className:"text-lg sm:text-xl font-bold ".concat($===fe.minutes?"text-white":"text-orange-700"),children:["IDR ",Math.round(fe.price/1e3),"K"]})]})},fe.minutes))]}),L==="time"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>U("duration"),className:"text-orange-600 text-sm font-medium mb-2",children:["‚Üê ",P==="id"?"Kembali ke durasi":"Back to duration"]}),e.jsxs("h3",{className:"text-base font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(We,{className:"text-orange-500",size:18}),P==="id"?"Pilih Waktu (".concat($," menit)"):"Select Time (".concat($," min)")]}),e.jsx("div",{className:"bg-orange-50 p-3 rounded-lg mb-3",children:e.jsxs("p",{className:"text-xs text-orange-800 flex items-center gap-1",children:[e.jsx(We,{className:"inline w-3 h-3"}),i==="place"?e.jsx(e.Fragment,{children:P==="id"?"Buka hari ini: 9:00‚Äì21:00":"Open today: 9:00‚Äì21:00"}):e.jsx(e.Fragment,{children:P==="id"?"Booking terakhir hari ini: 20:00":"Last booking today: 20:00"})]})}),e.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-64 ",children:q.map((fe,ve)=>e.jsx("button",{onClick:()=>fe.available&&ae(fe),disabled:!fe.available,className:"p-2 rounded-lg text-xs font-medium transition-all ".concat(fe.available?(Y==null?void 0:Y.label)===fe.label?"bg-orange-600 text-white":"bg-gray-100 text-gray-800 hover:bg-orange-100":"bg-red-100 text-red-400 cursor-not-allowed"),children:fe.label},ve))}),Y&&e.jsx("button",{onClick:()=>U("details"),className:"w-full mt-3 bg-orange-600 text-white py-3 rounded-lg font-semibold hover:bg-orange-700",children:"Continue to Details"})]}),L==="details"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>U("time"),className:"text-orange-600 text-sm font-medium mb-2",children:"‚Üê Back to time selection"}),e.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-3",children:"Your Details"}),e.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg mb-3",children:[e.jsxs("div",{className:"text-xs text-orange-800 flex items-center gap-1",children:[e.jsx(Ia,{className:"inline w-3 h-3"}),e.jsx("strong",{children:"Scheduled:"})," Today at ",Y==null?void 0:Y.label]}),e.jsxs("div",{className:"text-xs text-orange-800 mt-1 flex items-center gap-1",children:[e.jsx(We,{className:"inline w-3 h-3"}),e.jsx("strong",{children:"Duration:"})," ",$," min",i==="therapist"?" (+30 min travel)":""]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:[e.jsx("svg",{className:"inline w-3 h-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"WhatsApp Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"inline-flex items-center px-3 py-2 border-2 border-r-0 border-gray-200 bg-gray-50 text-gray-700 rounded-l-lg text-sm font-medium",children:"+62"}),e.jsx("input",{type:"tel",value:V,onChange:fe=>{const ve=fe.target.value.replace(/\D/g,"");pe(ve)},placeholder:"812345678",maxLength:15,className:"flex-1 px-3 py-2 border-2 border-gray-200 rounded-r-lg focus:border-orange-500 focus:outline-none text-sm text-gray-900"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter your number without the country code (+62)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:P==="id"?"Pilih Avatar Anda":"Choose Your Avatar"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:R.map(fe=>e.jsxs("button",{type:"button",onClick:()=>De(fe.imageUrl),className:"relative transition-all hover:scale-105 focus:outline-none",children:[e.jsx("img",{src:fe.imageUrl,alt:fe.label,className:"w-14 h-14 rounded-full object-cover ".concat(Te===fe.imageUrl?"ring-3 ring-orange-500 ring-offset-1 shadow-lg":"hover:ring-2 hover:ring-orange-300 hover:ring-offset-1")}),Te===fe.imageUrl&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-orange-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]},fe.id))})]}),o&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:[e.jsx("svg",{className:"inline w-3 h-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),d==="hotel"?"Hotel":"Villa"," Room Number"]}),e.jsx("input",{type:"text",value:he,onChange:fe=>de(fe.target.value),placeholder:"e.g., 101, 205A",className:"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:outline-none text-sm text-gray-900"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:c?"Your room at ".concat(c):"For service delivery location"})]}),e.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-500 p-3 rounded",children:e.jsxs("p",{className:"text-xs text-orange-800",children:[e.jsx("strong",{children:"üí¨ In-App Chat Confirmation"}),e.jsx("br",{}),m?"You'll be connected directly with ".concat(s," via in-app chat to discuss availability and pricing."):"Your booking will be sent to ".concat(s," via in-app chat. They'll confirm availability and arrival time.")]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-xs text-gray-700",children:e.jsxs("p",{className:"text-blue-800",children:["‚ÑπÔ∏è ",P==="id"?"Pemesanan ini tunduk pada komisi IndaStreetMassage dan aturan platform.":"This booking is subject to IndaStreetMassage commission and platform rules."]})}),e.jsx("button",{onClick:()=>{m?X({selectedDuration:$,selectedTime:Y,customerName:F,customerWhatsApp:V,roomNumber:he,selectedAvatar:Te},{setError:ne,setIsCreating:B,onClose:t,resetForm:v}):Ye({selectedDuration:$,selectedTime:Y,customerName:F,customerWhatsApp:V,roomNumber:he,selectedAvatar:Te})},disabled:!F||!V||we,className:"w-full py-3 rounded-lg font-bold text-white ".concat(F&&V&&!we?"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700":"bg-gray-300 cursor-not-allowed"),children:we?"Processing...":m?"‚úÖ Book Now":"üí≥ Secure with Deposit"})]})]})]}),E&&S&&e.jsx(np,{isOpen:E,onClose:()=>{T(!1),C(null)},onConfirmDeposit:oe,bookingDetails:{therapistName:s,serviceDuration:S.formData.selectedDuration,totalPrice:S.totalPrice,scheduledDate:((et=S.formData.selectedTime)==null?void 0:et.date)||"",scheduledTime:((at=S.formData.selectedTime)==null?void 0:at.time)||"",location:c||"Your Location"},depositPercentage:30}),x&&e.jsx(sp,{isOpen:x,onClose:()=>A(!1),onSubmitRequest:async fe=>{try{g.debug("Date change request:",fe),mt("‚úÖ Date change request submitted","success"),A(!1)}catch(ve){g.error("Error submitting date change request:",ve),mt("‚ùå Failed to submit request","error")}},booking:{id:"current-booking-id",therapistName:s,therapistId:n,currentDate:new Date().toISOString().split("T")[0],currentTime:"10:00",serviceDuration:$,depositAmount:125e3,location:c||"Your Location"}})]}):null},op=({therapist:a,showReviewModal:t,setShowReviewModal:n,showBusyModal:s,setShowBusyModal:i,showReferModal:r,setShowReferModal:l,showBookingPopup:o,setShowBookingPopup:c,showScheduleBookingPopup:d,setShowScheduleBookingPopup:m,showSharePopup:p,setShowSharePopup:f,showJoinPopup:y,setShowJoinPopup:I,pricing:P,displayRating:D,effectiveRating:j,displayStatus:E,selectedDuration:T,priceSliderBookingSource:x,setPriceSliderBookingSource:A,userReferralCode:S,shortShareUrl:C,handleAnonymousReviewSubmit:_})=>{const L=U=>{const $=window.location.origin,H=U.$id||U.id;return"".concat($,"/share/therapist/").concat(H)};return e.jsxs(e.Fragment,{children:[s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-sm w-full p-6 animate-fadeIn",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-3xl",children:"‚è≥"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Therapist Currently Busy"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm leading-relaxed",children:"This therapist is currently booked and unavailable. Please try booking another available therapist or check back later."}),e.jsxs("p",{className:"text-sm font-semibold text-orange-600 mb-6",children:["- ",e.jsx("span",{className:"text-black",children:"Inda"}),e.jsx("span",{className:"text-orange-500",children:"street"})," Admin"]}),e.jsx("button",{onClick:()=>i(!1),className:"w-full px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-semibold rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg",children:"Close"})]})})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-3 sm:p-4",onClick:()=>l(!1),children:e.jsx("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-[88vw] max-h-[80vh] sm:max-w-xs md:max-w-sm p-3 sm:p-4 ",onClick:U=>U.stopPropagation(),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 mx-auto mb-3 sm:mb-4",children:e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/refer%20a%20friend.png",alt:"Refer a Friend",className:"w-full h-full object-contain",loading:"lazy",decoding:"async",width:"128",height:"128"})}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-1 sm:mb-2",children:"Refer a Friend"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-3 sm:mb-4",children:"Share IndaStreet with friends! üéÅ"}),e.jsxs("div",{className:"space-y-2 mb-3 sm:mb-4",children:[e.jsx("p",{className:"text-xs text-gray-600 text-left",children:"üì± Share your referral link:"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:S?"https://www.indastreetmassage.com/ref/".concat(S):"Loading...",readOnly:!0,className:"flex-1 px-2 py-1.5 sm:py-2 border border-gray-300 rounded-lg bg-gray-50 text-xs",placeholder:"Your referral link",title:"Your referral link to share with friends","aria-label":"Referral link"}),e.jsx("button",{onClick:()=>{const U=S?"https://www.indastreetmassage.com/ref/".concat(S):"https://www.indastreetmassage.com";navigator.clipboard.writeText(U),alert("Link copied to clipboard!")},className:"px-3 py-1.5 sm:py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-semibold text-xs whitespace-nowrap",children:"Copy"})]})]}),e.jsxs("div",{className:"space-y-2 mb-3 sm:mb-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Share via:"}),e.jsxs("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:[e.jsxs("button",{onClick:()=>{const U=S?"https://www.indastreetmassage.com/ref/".concat(S):"https://www.indastreetmassage.com",$="Check out IndaStreet - Book amazing massages! üíÜ‚Äç‚ôÄÔ∏è Use my referral link and we both earn coins! ".concat(U);window.open("https://wa.me/?text=".concat(encodeURIComponent($)),"_blank")},className:"flex flex-col items-center gap-1 p-1.5 sm:p-2 rounded-lg transition-all hover:scale-105",children:[e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/whats%20app%20icon.png?updatedAt=1761844859402",alt:"WhatsApp",className:"w-8 h-8 sm:w-10 sm:h-10 object-contain",loading:"lazy",decoding:"async",width:"40",height:"40"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"WhatsApp"})]}),e.jsxs("button",{onClick:()=>{const U=S?"https://www.indastreetmassage.com/ref/".concat(S):"https://www.indastreetmassage.com";window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(U)),"_blank")},className:"flex flex-col items-center gap-1 p-1.5 sm:p-2 rounded-lg transition-all hover:scale-105",children:[e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/facebook.png?updatedAt=1761844676576",alt:"Facebook",className:"w-8 h-8 sm:w-10 sm:h-10 object-contain",loading:"lazy",decoding:"async",width:"40",height:"40"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Facebook"})]}),e.jsxs("button",{onClick:()=>{const U=S?"https://www.indastreetmassage.com/ref/".concat(S):"https://www.indastreetmassage.com",$="Check out IndaStreet - Book amazing massages! üíÜ‚Äç‚ôÄÔ∏è ".concat(U);navigator.clipboard.writeText($),alert("Instagram message copied! Open Instagram and paste to share.")},className:"flex flex-col items-center gap-1 p-1.5 sm:p-2 rounded-lg transition-all hover:scale-105",children:[e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/insta.png?updatedAt=1761845305146",alt:"Instagram",className:"w-8 h-8 sm:w-10 sm:h-10 object-contain",loading:"lazy",decoding:"async",width:"40",height:"40"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Instagram"})]}),e.jsxs("button",{onClick:()=>{const U=S?"https://www.indastreetmassage.com/ref/".concat(S):"https://www.indastreetmassage.com",$="Check out IndaStreet - Book amazing massages! üíÜ‚Äç‚ôÄÔ∏è ".concat(U);navigator.clipboard.writeText($),alert("TikTok message copied! Open TikTok and paste to share.")},className:"flex flex-col items-center gap-1 p-1.5 sm:p-2 rounded-lg transition-all hover:scale-105",children:[e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/tiktok.png?updatedAt=1761845101981",alt:"TikTok",className:"w-8 h-8 sm:w-10 sm:h-10 object-contain",loading:"lazy",decoding:"async",width:"40",height:"40"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"TikTok"})]})]})]}),e.jsx("button",{onClick:()=>l(!1),className:"w-full px-4 py-2 bg-orange-600 text-white font-semibold rounded-lg hover:bg-orange-700 transition-colors text-sm",children:"Close"})]})})}),t&&e.jsx(Rg,{providerName:a.name,providerId:a.$id||a.id,providerType:"therapist",providerImage:a.profilePicture||a.mainImage,onClose:()=>n(!1),onSubmit:_}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx(_g,{therapistId:String(a.id),therapistName:a.name,profilePicture:a.profilePicture||a.mainImage,pricing:{60:P[60],90:P[90],120:P[120]},discountPercentage:a.discountPercentage||0,discountActive:bt(a),initialDuration:T?parseInt(T):void 0,onBookingComplete:U=>{c(!1),A("quick-book")},onClose:()=>{c(!1),A("quick-book")},quickProfile:null})}),d&&e.jsx(rp,{isOpen:d,onClose:()=>m(!1),therapistId:String(a.id),therapistName:a.name,therapistType:"therapist",therapistStatus:E.toLowerCase(),profilePicture:a.profilePicture||a.mainImage,isImmediateBooking:!0,pricing:{60:P[60],90:P[90],120:P[120]},providerRating:j,discountPercentage:a.discountPercentage||0,discountActive:bt(a)}),p&&e.jsx(Am,{isOpen:p,onClose:()=>{f(!1)},title:"Share My Profile",description:"".concat(a.name," - Professional massage therapist in ").concat(a.location,". Book now on IndaStreet!"),url:S&&C?"".concat(C,"?ref=").concat(S):C||L(a),type:"therapist"}),e.jsx(Dm,{isOpen:y,onClose:()=>I(!1)})]})},lp=({endTime:a,onExpired:t,className:n=""})=>{const[s,i]=u.useState({hours:0,minutes:0,seconds:0,total:0});if(u.useEffect(()=>{const l=()=>{const c=new Date().getTime(),m=new Date(a).getTime()-c;if(m>0){const p=Math.floor(m/36e5),f=Math.floor(m%(1e3*60*60)/(1e3*60)),y=Math.floor(m%(1e3*60)/1e3);return{hours:p,minutes:f,seconds:y,total:m}}else return{hours:0,minutes:0,seconds:0,total:0}};i(l());const o=setInterval(()=>{const c=l();i(c),c.total<=0&&(clearInterval(o),t==null||t())},1e3);return()=>clearInterval(o)},[a,t]),s.total<=0)return null;const r=()=>s.hours>0?"".concat(s.hours,":").concat(s.minutes.toString().padStart(2,"0"),":").concat(s.seconds.toString().padStart(2,"0")):"".concat(s.minutes,":").concat(s.seconds.toString().padStart(2,"0"));return e.jsxs("div",{className:"inline-flex items-center gap-1 bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium ".concat(n),children:[e.jsx(We,{className:"w-3 h-3"}),e.jsx("span",{children:r()})]})},cp=({therapist:a,displayStatus:t,isOvertime:n,countdown:s,customVerifiedBadge:i})=>{const r=wo[t]||wo[ke.Available];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-4 -mt-24 pb-4 relative z-50 overflow-visible pointer-events-none",children:e.jsx("div",{className:"flex items-start gap-3",children:e.jsx("div",{className:"flex-shrink-0 relative z-50",children:e.jsx("div",{className:"w-[100px] h-[100px] sm:w-[110px] sm:h-[110px] md:w-[120px] md:h-[120px] rounded-full overflow-hidden relative",children:e.jsx("img",{className:"w-full h-full object-cover pointer-events-auto border-4 border-white rounded-full",src:a.profilePicture||a.mainImage||"/default-avatar.jpg",alt:"".concat(He(a.name)," profile"),style:{aspectRatio:"1/1"},loading:"lazy",onError:l=>{l.target.src="/default-avatar.jpg"}})})})})}),e.jsx("div",{className:"px-4 mt-[2px] mb-3 relative z-40",children:e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("div",{className:"mb-2 ml-[75px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{const l=a.verifiedBadge||a.isVerified,o=a.bankName&&a.accountName&&a.accountNumber,c=a.ktpPhotoUrl,d=a.hotelVillaSafePassStatus==="active",m=l||o&&c||d,p=i||El;return m&&e.jsx("img",{src:p,alt:"Verified",className:"w-5 h-5 flex-shrink-0",title:"Verified Therapist - Bank Details & KTP Complete"})})(),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 uppercase",children:He(a.name)})]})}),e.jsx("div",{className:"overflow-visible flex justify-start ml-[75px]",children:e.jsxs("div",{className:"inline-flex items-center px-2.5 rounded-full font-medium whitespace-nowrap ".concat(n?"bg-red-100 text-red-800":r.bg," ").concat(n?"":r.text),style:{paddingTop:"0px",paddingBottom:"0px",lineHeight:"1",fontSize:"10px",transform:"scaleY(0.9)"},children:[e.jsxs("span",{className:"relative inline-flex mr-1.5",style:{width:"32px",height:"32px",minWidth:"32px",minHeight:"32px"},children:[e.jsx("span",{className:"absolute rounded-full ".concat(n?"bg-red-500":r.dot," ").concat(r.isAvailable&&!n?"":"animate-pulse"," z-10"),style:{width:"8px",height:"8px",left:"12px",top:"12px"}},"".concat(a.$id||a.id,"-dot")),!n&&t===ke.Available&&e.jsxs(wa.Fragment,{children:[e.jsx("span",{className:"absolute rounded-full bg-green-400 opacity-75 animate-ping",style:{width:"20px",height:"20px",left:"6px",top:"6px"}},"".concat(a.$id||a.id,"-ring1")),e.jsx("span",{className:"absolute rounded-full bg-green-300 opacity-50 animate-ping",style:{width:"28px",height:"28px",left:"2px",top:"2px",animationDuration:"1.5s"}},"".concat(a.$id||a.id,"-ring2"))]},"".concat(a.$id||a.id,"-rings")),!n&&t===ke.Busy&&e.jsx("span",{className:"absolute inset-0 rounded-full animate-ping bg-yellow-400"},"".concat(a.$id||a.id,"-busy"))]}),t===ke.Busy?a.busyUntil?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs",children:"Busy"}),e.jsx(lp,{endTime:a.busyUntil,onExpired:()=>{}})]}):s?e.jsxs("span",{className:"text-xs",children:[n?"Busy - Extra Time ":"Busy - Free in "," ",s]}):e.jsx("span",{className:"text-xs",children:"Busy"}):e.jsx("span",{className:"text-xs",children:t})]})})]})})]})};function dp({therapist:a,t}){var s,i;const n=a.massageTypes?typeof a.massageTypes=="string"?Su(a.massageTypes):a.massageTypes:[];return e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"border-t border-gray-100 pt-3",children:[e.jsx("div",{className:"mb-2",children:e.jsx("h4",{className:"text-sm font-semibold text-gray-700 text-center",children:((i=(s=t.home)==null?void 0:s.therapistCard)==null?void 0:i.experiencedArea)||"Areas of Expertise"})}),e.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[n.slice(0,5).map(r=>e.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-800 text-xs font-medium rounded-full border border-orange-300",children:r},r)),n.length===0&&e.jsx("span",{className:"text-xs text-gray-400",children:"No specialties selected"}),n.length>5&&e.jsxs("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-800 text-xs font-medium rounded-full border border-orange-300",children:["+",n.length-5]})]})]})})}const up=({therapist:a,getDynamicSpacing:t,translatedDescriptionLength:n})=>{const s=a.languages?typeof a.languages=="string"?ju(a.languages):a.languages:[],i=s.length>0?s:["Indonesian"],r={english:{flag:"üá¨üáß",name:"EN"},indonesian:{flag:"üáÆüá©",name:"ID"},mandarin:{flag:"üá®üá≥",name:"ZH"},japanese:{flag:"üáØüáµ",name:"JP"},korean:{flag:"üá∞üá∑",name:"KR"},thai:{flag:"üáπüá≠",name:"TH"},vietnamese:{flag:"üáªüá≥",name:"VI"},french:{flag:"üá´üá∑",name:"FR"},german:{flag:"üá©üá™",name:"DE"},spanish:{flag:"üá™üá∏",name:"ES"},portuguese:{flag:"üáµüáπ",name:"PT"},italian:{flag:"üáÆüáπ",name:"IT"},russian:{flag:"üá∑üá∫",name:"RU"},arabic:{flag:"üá∏üá¶",name:"AR"},hindi:{flag:"üáÆüá≥",name:"HI"},en:{flag:"üá¨üáß",name:"EN"},id:{flag:"üáÆüá©",name:"ID"},zh:{flag:"üá®üá≥",name:"ZH"},ja:{flag:"üáØüáµ",name:"JP"},ko:{flag:"üá∞üá∑",name:"KR"},th:{flag:"üáπüá≠",name:"TH"},vi:{flag:"üáªüá≥",name:"VI"},fr:{flag:"üá´üá∑",name:"FR"},de:{flag:"üá©üá™",name:"DE"},es:{flag:"üá™üá∏",name:"ES"},pt:{flag:"üáµüáπ",name:"PT"},it:{flag:"üáÆüáπ",name:"IT"},ru:{flag:"üá∑üá∫",name:"RU"},ar:{flag:"üá∏üá¶",name:"AR"},hi:{flag:"üáÆüá≥",name:"HI"}};return!i||!Array.isArray(i)||i.length===0?null:e.jsxs("div",{className:"px-4 mb-6 ".concat(t("mt-4","mt-3","mt-2",n)),children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-700",children:"Languages"}),a.yearsOfExperience&&e.jsxs("span",{className:"text-xs font-semibold text-gray-700 flex items-center gap-1",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),a.yearsOfExperience," years experience"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.slice(0,3).map(l=>{const o=l.toLowerCase(),c=r[o]||{flag:"üåê",name:l.slice(0,2).toUpperCase()};return e.jsxs("span",{className:"px-2 py-0.5 bg-blue-50 border border-blue-200 text-gray-800 text-xs font-medium rounded-full flex items-center gap-1",children:[e.jsx("span",{className:"text-xs",children:c.flag}),e.jsx("span",{className:"text-xs font-semibold",children:c.name})]},l)}),i.length>3&&e.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",i.length-3]})]})]})},mp=a=>{const t=parseInt(a,10);if(isNaN(t)||t<=0)return"~1h";const n=Math.floor(t/60),s=t%60;return"".concat(n.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0"))},Ao=200,Un={"booking-popup":100,"schedule-booking":90,"price-list":80,"login-required":70,busy:60,review:50,share:40,join:30,refer:20,safepass:10,null:0};function gp(){const[a,t]=u.useState({activeModal:null,isTransitioning:!1,previousModal:null}),n=u.useRef(void 0),s=u.useCallback(async(d,m={})=>{if(!d)return;const{force:p=!1}=m,f=Un[a.activeModal],y=Un[d];!p&&a.activeModal&&y<=f||(a.activeModal&&a.activeModal!==d&&(t(I=>({...I,isTransitioning:!0,previousModal:I.activeModal})),await new Promise(I=>setTimeout(I,Ao)),n.current&&clearTimeout(n.current)),t(I=>({activeModal:d,isTransitioning:!1,previousModal:I.activeModal})))},[a.activeModal]),i=u.useCallback(async d=>{d&&a.activeModal!==d||a.activeModal&&(t(m=>({...m,isTransitioning:!0})),await new Promise(m=>setTimeout(m,Ao)),t({activeModal:null,isTransitioning:!1,previousModal:a.activeModal}))},[a.activeModal]),r=u.useCallback(async()=>{a.activeModal&&await i()},[i,a.activeModal]),l=u.useCallback(async(d,m)=>{a.activeModal===d&&await s(m,{force:!0})},[a.activeModal,s]),o=u.useCallback(d=>a.activeModal===d,[a.activeModal]),c=u.useCallback(d=>{if(!d)return!1;if(!a.activeModal)return!0;const m=Un[a.activeModal];return Un[d]>m},[a.activeModal]);return{...a,openModal:s,closeModal:i,closeAllModals:r,switchModal:l,isModalActive:o,canOpenModal:c}}function pp(){const a=gp(),t=u.useCallback(async()=>{await a.closeAllModals(),await a.openModal("booking-popup")},[a]),n=u.useCallback(async()=>{await a.openModal("price-list")},[a]),s=u.useCallback(async()=>{a.isModalActive("price-list")?await a.switchModal("price-list","schedule-booking"):await a.openModal("schedule-booking")},[a]);return{...a,openBookingModal:t,openPriceListModal:n,openScheduleModal:s}}function hp(){const a=pp(),[t,n]=u.useState(!1),s=u.useMemo(()=>({showBusyModal:a.isModalActive("busy"),showReferModal:a.isModalActive("refer"),showLoginRequiredModal:a.isModalActive("login-required"),showBookingPopup:a.isModalActive("booking-popup"),showScheduleBookingPopup:a.isModalActive("schedule-booking"),showReviewModal:a.isModalActive("review"),showSharePopup:a.isModalActive("share"),showPriceListModal:a.isModalActive("price-list"),showJoinPopup:a.isModalActive("join")}),[a]),i=u.useMemo(()=>({setShowBusyModal:l=>{l?a.openModal("busy"):a.closeModal("busy")},setShowReferModal:l=>{l?a.openModal("refer"):a.closeModal("refer")},setShowLoginRequiredModal:l=>{l?a.openModal("login-required"):a.closeModal("login-required")},setShowBookingPopup:l=>{l?a.openBookingModal():a.closeModal("booking-popup")},setShowScheduleBookingPopup:l=>{l?a.openScheduleModal():a.closeModal("schedule-booking")},setShowReviewModal:l=>{l?a.openModal("review"):a.closeModal("review")},setShowSharePopup:l=>{l?a.openModal("share"):a.closeModal("share")},setShowPriceListModal:l=>{a.isTransitioning||(l?a.openPriceListModal():a.closeModal("price-list"))},setShowJoinPopup:l=>{l?a.openModal("join"):a.closeModal("join")}}),[a]),r=u.useCallback(async(l={})=>{var o;await a.closeAllModals(),await new Promise(c=>setTimeout(c,100)),(o=l.onAfterClose)==null||o.call(l),l.modalType&&await a.openModal(l.modalType)},[a]);return{...s,...i,termsAccepted:t,setTermsAccepted:n,modalManager:a,handleBookNowClick:r,closeAllModals:a.closeAllModals,switchModal:a.switchModal,canOpenModal:a.canOpenModal,isTransitioning:a.isTransitioning}}function fp(){const[a,t]=u.useState([]),[n,s]=u.useState(!1),[i,r]=u.useState(""),[l,o]=u.useState(null),[c,d]=u.useState(null),[m,p]=u.useState("quick-book"),[f,y]=u.useState(null),[I,P]=u.useState(3600),[D,j]=u.useState(""),[E,T]=u.useState(0),[x,A]=u.useState(""),[S,C]=u.useState(!1);return u.useEffect(()=>{const L=setInterval(()=>{T(U=>{const $=[0,1,2].filter(H=>H!==U);return $[Math.floor(Math.random()*$.length)]})},2e3);return()=>clearInterval(L)},[]),{menuData:a,setMenuData:t,menuLoadAttempted:n,setMenuLoadAttempted:s,userReferralCode:i,setUserReferralCode:r,selectedServiceIndex:l,setSelectedServiceIndex:o,selectedDuration:c,setSelectedDuration:d,priceSliderBookingSource:m,setPriceSliderBookingSource:p,highlightedCell:f,setHighlightedCell:y,arrivalCountdown:I,setArrivalCountdown:P,shortShareUrl:D,setShortShareUrl:j,animatedPriceIndex:E,countdown:x,setCountdown:A,isOvertime:S,setIsOvertime:C,handleSelectService:(L,U)=>{o(L),d(U),y(null)}}}function yp(a){const[t,n]=u.useState(()=>{try{if(a.analytics){const d=JSON.parse(a.analytics);if(d&&typeof d.bookings=="number")return d.bookings}}catch{}return 0});u.useEffect(()=>{(async()=>{try{const m=String(a.id||a.$id||"");if(!m)return;const p=await ji.getByProvider(m,"therapist");Array.isArray(p)&&n(p.length)}catch{}})()},[a]);const s=d=>{let m=0;for(let p=0;p<d.length;p++)m=(m<<5)-m+d.charCodeAt(p),m=m&m;return 23+Math.abs(m)%18},i=a.membershipStartDate||a.activeMembershipDate||a.$createdAt,r=(()=>{if(!i)return"‚Äî";try{const d=new Date(i);return isNaN(d.getTime())?"‚Äî":d.toLocaleDateString("en-GB")}catch{return"‚Äî"}})();return{bookingsCount:t,setBookingsCount:n,getInitialBookingCount:s,joinedDisplay:r,calculateDistance:(d,m)=>{const f=d.lat*Math.PI/180,y=m.lat*Math.PI/180,I=(m.lat-d.lat)*Math.PI/180,P=(m.lng-d.lng)*Math.PI/180,D=Math.sin(I/2)*Math.sin(I/2)+Math.cos(f)*Math.cos(y)*Math.sin(P/2)*Math.sin(P/2);return 6371e3*(2*Math.atan2(Math.sqrt(D),Math.sqrt(1-D)))},formatCountdown:d=>{const m=Math.floor(d/3600),p=Math.floor(d%3600/60),f=d%60;return"".concat(m.toString().padStart(2,"0"),":").concat(p.toString().padStart(2,"0"),":").concat(f.toString().padStart(2,"0"))},getDynamicSpacing:(d,m,p,f)=>f<200?p:f<300?m:d}}const bp=({onBookNow:a,onSchedule:t,onPriceSlider:n,hasScheduledBookings:s,hasActiveScheduledBooking:i=!1,bookNowText:r,scheduleText:l,dynamicSpacing:o})=>{const[c,d]=u.useState(null),m=i,f=m?"Complete or cancel your current scheduled booking first":!s?"Scheduled bookings require bank details and KTP in the provider dashboard":void 0;return e.jsxs("div",{className:"flex gap-2 px-4 ".concat(o),children:[e.jsxs("button",{onClick:y=>{y.preventDefault(),y.stopPropagation(),!m&&(d("book"),a())},disabled:m,title:f,className:"flex-1 flex items-center justify-center gap-1 font-bold py-3 px-2 rounded-full transition-colors duration-300 transform touch-manipulation min-h-[48px] ".concat(m?"bg-gray-300 text-gray-500 cursor-not-allowed":c==="book"?"bg-green-500 text-white hover:bg-green-600 active:bg-green-700":"bg-orange-500 text-white hover:bg-orange-600 active:bg-orange-700"," active:scale-95 shadow-md"),children:[e.jsx(en,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Book"})]}),e.jsxs("button",{onClick:y=>{y.preventDefault(),y.stopPropagation(),!(m||!s)&&(d("schedule"),t())},disabled:!s||m,title:f,className:"flex-1 flex items-center justify-center gap-1 font-bold py-3 px-2 rounded-full transition-colors duration-300 transform touch-manipulation min-h-[48px] ".concat(!s||m?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-orange-500 text-white hover:bg-orange-600 active:bg-orange-700"," active:scale-95 shadow-md"),children:[e.jsx(Em,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Schedule"})]}),e.jsxs("button",{onClick:y=>{y.preventDefault(),y.stopPropagation(),d("price"),n()},className:"flex-1 flex items-center justify-center gap-1 font-bold py-3 px-2 rounded-full transition-colors duration-300 transform touch-manipulation min-h-[48px] ".concat(c==="price"?"bg-green-500 text-white hover:bg-green-600 active:bg-green-700":"bg-orange-500 text-white hover:bg-orange-600 active:bg-orange-700"," active:scale-95 shadow-md"),children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Prices"})]})]})},xp=({therapist:a,userLocation:t,onRate:n,onQuickBookWithChat:s,onIncrementAnalytics:i,onShowRegisterPrompt:r,onNavigate:l,onViewPriceList:o,isCustomerLoggedIn:c=!1,activeDiscount:d,t:m,hideJoinButton:p=!1,isSharedProfile:f=!1,customVerifiedBadge:y,shareCount:I,loggedInProviderId:P,avatarOffsetPx:D=0,selectedCity:j})=>{var ga;const E=m;g.debug("üîç TherapistCard Debug:",{therapistName:a.name,isVerified:a.isVerified,customVerifiedBadge:y,hasCustomBadge:!!y}),So("book_now_behavior"),So("schedule_behavior");const{showBusyModal:T,setShowBusyModal:x,showReferModal:A,setShowReferModal:S,showBookingPopup:C,setShowBookingPopup:_,showScheduleBookingPopup:L,setShowScheduleBookingPopup:U,showReviewModal:$,setShowReviewModal:H,showSharePopup:Y,setShowSharePopup:ae,showPriceListModal:F,setShowPriceListModal:V,showJoinPopup:pe,setShowJoinPopup:he,handleBookNowClick:de,closeAllModals:Te}=hp(),[De,we]=u.useState(!1),{menuData:B,setMenuData:ne,menuLoadAttempted:v,setMenuLoadAttempted:R,userReferralCode:q,selectedServiceIndex:X,setSelectedServiceIndex:Q,selectedDuration:te,setSelectedDuration:oe,priceSliderBookingSource:Ye,setPriceSliderBookingSource:et,setHighlightedCell:at,arrivalCountdown:fe,setArrivalCountdown:ve,shortShareUrl:gt,setShortShareUrl:Ft,animatedPriceIndex:Rt,countdown:Kt,setCountdown:Ge,isOvertime:Wt,setIsOvertime:xt,handleSelectService:ua}=fp(),{bookingsCount:ma,setBookingsCount:ea,getInitialBookingCount:ta,joinedDisplay:Ga,calculateDistance:qt,getDynamicSpacing:Ht}=yp(a),{openBookingChat:Ta,openScheduleChat:Aa,openBookingWithService:k,hasActiveScheduledBooking:M}=ng(),O=u.useCallback((me,ge,ye)=>{var ce;k(me,ge,{...ye,source:f?"share":(ce=ye==null?void 0:ye.source)!=null?ce:null})},[k,f]);u.useEffect(()=>{g.debug("üîÑ MODAL STATE CHANGED:",F),F&&(g.debug("‚úÖ Modal is now OPEN"),g.debug("üîç Current location:",window.location.href),g.debug("üîç Session storage:",sessionStorage.getItem("has_entered_app")))},[F]),u.useEffect(()=>()=>{V(!1)},[]),u.useEffect(()=>{at(null)},[F]),u.useEffect(()=>{if(!F){ve(3600);return}const me=setInterval(()=>{ve(ge=>ge<=0?3600:ge-1)},1e3);return()=>clearInterval(me)},[F]),u.useEffect(()=>{const me=ge=>{var ce;const ye=String(a.$id||a.id);((ce=ge.detail)==null?void 0:ce.therapistId)===ye&&V(!0)};return window.addEventListener("openPriceMenu",me),()=>window.removeEventListener("openPriceMenu",me)},[a]);const[ee,be]=u.useState(""),{language:ue}=os(),le=ue==="id"?"id":"en",Le=zn.getTranslation("book_now",le),Be=zn.getTranslation("schedule",le),$e=ue;u.useEffect(()=>{(async()=>{try{const ge=String(a.$id||a.id);g.debug("üîç Fetching/creating share link for therapist:",ge,a.name);const ye=await Tg("therapist",ge,a.name,a.location);g.debug("‚úÖ Share link obtained:",ye.url),Ft(ye.url)}catch(ge){g.error("‚ùå Failed to fetch/create share link:",ge),Ft(Pm(a))}})()},[a]);const xe=(()=>{const me="Certified massage therapist with ".concat(a.yearsOfExperience||5,"+ years experience. Specialized in therapeutic and relaxation techniques. Available for home, hotel, and villa services. Professional, licensed, and highly rated by clients for exceptional service quality.");return $e==="id"?a.description_id||a.description||me:a.description_en||a.description||me})();a.location&&String(a.location).split(",")[0].trim(),u.useMemo(()=>{var ce,Pe;if(!t)return null;let me=null;try{if(a.geopoint&&a.geopoint.lat&&a.geopoint.lng)me=a.geopoint;else if(a.coordinates)if(Array.isArray(a.coordinates))me={lat:a.coordinates[1],lng:a.coordinates[0]};else if(typeof a.coordinates=="string"){const Ue=JSON.parse(a.coordinates);Array.isArray(Ue)?me={lat:Ue[1],lng:Ue[0]}:Ue.lat&&Ue.lng&&(me=Ue)}else(ce=a.coordinates)!=null&&ce.lat&&((Pe=a.coordinates)!=null&&Pe.lng)&&(me=a.coordinates)}catch(Ue){g.warn("Failed to parse therapist coordinates:",Ue)}if(!me)return null;const ge=qt(t,me),ye=ge/1e3;return ye<1?"".concat(Math.round(ge),"m away"):"".concat(ye.toFixed(1),"km away")},[t,a.geopoint,a.coordinates]),u.useEffect(()=>{if(!d)return;const me=setInterval(()=>{const ge=new Date().getTime(),ye=d.expiresAt.getTime()-ge;if(ye<0){be("EXPIRED"),clearInterval(me);return}const ce=Math.floor(ye%(1e3*60*60*24)/(1e3*60*60)),Pe=Math.floor(ye%(1e3*60*60)/(1e3*60)),Ue=Math.floor(ye%(1e3*60)/1e3);be("".concat(ce,"h ").concat(Pe,"m ").concat(Ue,"s"))},1e3);return()=>clearInterval(me)},[d]),u.useEffect(()=>{const me=()=>{try{const ye=a.bookedUntil;if(ye){const ce=new Date(ye);if(!isNaN(ce.getTime())){const Pe=new Date,Ue=ce.getTime()-Pe.getTime();if(Ue>0){xt(!1);const G=Math.floor(Ue/(1e3*60*60)),ht=Math.floor(Ue%(1e3*60*60)/(1e3*60)),Fe=Math.floor(Ue%(1e3*60)/1e3);G>0?Ge("".concat(G,"h ").concat(ht,"m")):ht>0?Ge("".concat(ht,"m ").concat(Fe,"s")):Ge("".concat(Fe,"s"))}else{xt(!0);const G=Math.abs(Ue),ht=Math.floor(G/(1e3*60*60)),Fe=Math.floor(G%(1e3*60*60)/(1e3*60)),Ke=Math.floor(G%(1e3*60)/1e3);ht>0?Ge("".concat(ht,"h ").concat(Fe,"m")):Fe>0?Ge("".concat(Fe,"m ").concat(Ke,"s")):Ge("".concat(Ke,"s"))}}}}catch{Ge(""),xt(!1)}};me();const ge=setInterval(me,1e3);return()=>clearInterval(ge)},[a]);let Me=ke.Busy;const je=String(a.availability||a.status||"");a.isShowcaseProfile?(Me=ke.Busy,g.debug("üé≠ Showcase profile ".concat(a.name," forced to Busy status in ").concat(a.showcaseCity))):je==="Available"||je===ke.Available?Me=ke.Available:(je==="Busy"||je===ke.Busy||je==="busy"||je==="Offline"||je===ke.Offline)&&(Me=ke.Busy);const It={...a,status:Me};let qe=Sm(It);if(qe===ke.Offline){const me=a.available,ge=a.busy,ye=typeof me=="string"&&me.trim().length>0,ce=typeof ge=="string"&&ge.trim().length>0;ce&&!ye?qe=ke.Busy:ye&&!ce?qe=ke.Available:ce&&ye&&(qe=ke.Busy)}u.useEffect(()=>{},[A,c]),u.useEffect(()=>{(async()=>{var ge;try{{const ye=String(a.$id||a.id);g.debug("üçΩÔ∏è Loading menu for therapist:",ye),g.debug("üîç Therapist name:",a.name),g.debug("üîç Therapist $id:",a.$id),g.debug("üîç Therapist id:",a.id);try{const ce=await rl.getByTherapistId(ye);if(g.debug("üìÑ Menu document received:",ce),g.debug("üìÑ Menu document ID:",ce==null?void 0:ce.$id),g.debug("üìÑ Menu document therapistId:",ce==null?void 0:ce.therapistId),g.debug("üìÑ Menu document menuData length:",(ge=ce==null?void 0:ce.menuData)==null?void 0:ge.length),ce!=null&&ce.menuData){g.debug("üìÑ Raw menuData:",ce.menuData);const Pe=JSON.parse(ce.menuData);g.debug("üìÑ Parsed menuData:",Pe),ne(Array.isArray(Pe)?Pe:[]),g.info("‚úÖ Menu items loaded:",Pe.length)}else g.info("‚ÑπÔ∏è No menu data found - using fallback pricing"),g.debug("‚ÑπÔ∏è menuDoc is:",ce),ne([])}catch(ce){g.info("‚ÑπÔ∏è Menu collection not available - using fallback pricing:",ce.message),g.error("‚ùå Full error:",ce),g.error("‚ùå Error stack:",ce.stack),g.error("‚ùå Error code:",ce.code),g.error("‚ùå Error type:",ce.type),g.debug("üîç Therapist details for debugging:"),g.debug("   - Name:",a.name),g.debug("   - ID:",ye),g.debug("   - $id:",a.$id),g.debug("   - id:",a.id),ne([])}}}catch(ye){g.error("‚ùå Outer error in loadMenu:",ye),ne([])}finally{R(!0)}})().catch(ge=>{g.error("‚ùå Unhandled promise rejection:",ge),g.error("‚ùå Promise error stack:",ge instanceof Error?ge.stack:"No stack")})},[a]);const it=async me=>{try{await us.createAnonymous({providerType:me.providerType,providerId:String(me.providerId),rating:me.rating,reviewerName:me.name,reviewContent:"Review by ".concat(me.name)}),H(!1),alert("Thank you for your review! üåü"),setTimeout(async()=>{try{const{softRecover:ge}=await Ce(async()=>{const{softRecover:ye}=await import("./softNavigation.CPJRQeFv.js");return{softRecover:ye}},[]);ge()}catch{window.location.reload()}},1e3)}catch(ge){throw g.error("Error submitting review:",ge),ge}},rt=Tm(B,a),_e=(()=>{if(!v)return{60:0,90:0,120:0};if(rt.length>0){const ce=Nl(rt);if(ce){const Pe={60:Number(ce.price60)*1e3,90:Number(ce.price90)*1e3,120:Number(ce.price120)*1e3};if(Pe[60]>0&&Pe[90]>0&&Pe[120]>0)return li("üí∞ Using lowest (combined menu) pricing for ".concat(a.name,":"),{serviceName:ce.name||ce.serviceName,menuPricing:Pe}),Pe}}if(a.price60&&parseInt(a.price60)>0&&a.price90&&parseInt(a.price90)>0&&a.price120&&parseInt(a.price120)>0)return{60:parseInt(a.price60)*1e3,90:parseInt(a.price90)*1e3,120:parseInt(a.price120)*1e3};const ge=fl(a.pricing)||{60:0,90:0,120:0},ye={60:ge[60]*1e3,90:ge[90]*1e3,120:ge[120]*1e3};if(ye[60]>0&&ye[90]>0&&ye[120]>0)return ye;if(!ll(a)){const ce=String(a.$id||a.id||"");if(ce)return ol(ce)}return ye})(),Gt=cm(a.rating,a.reviewCount),nn=Gt>0?Gt:4.8,za=dm(nn);li("üí∞ TherapistCard pricing for ".concat(a.name,":"),{therapistId:a.$id||a.id,rawPrice60:a.price60,rawPrice90:a.price90,rawPrice120:a.price120,rawPricingJSON:a.pricing,calculatedPricing:_e,discountPercentage:a.discountPercentage}),_e[60]>0||_e[90]>0||_e[120]>0||Nm("‚ö†Ô∏è TherapistCard - ".concat(a.name," has no pricing data:"),{newFormat:{price60:a.price60,price90:a.price90,price120:a.price120},oldFormat:a.pricing,parsedPricing:_e});const sn=me=>{const ge=typeof me=="string"?parseFloat(me):me;if(!ge||ge===0||isNaN(ge))return"Contact";let ye=Math.round(ge/1e3);return ye<1?ye=1:ye>999&&(ye=999),"".concat(ye,"k")},pt=pl(a),In=typeof pt=="string"&&pt.startsWith("data:image/svg+xml");g.debug("%cüñºÔ∏è [TherapistCard] Image Debug","background: #9C27B0; color: white; padding: 6px 12px; border-radius: 4px; font-weight: bold; font-size: 14px;"),g.debug("Therapist:",a.name,"displayImage:",((ga=pt==null?void 0:pt.slice)==null?void 0:ga.call(pt,0,60))+"..."),In&&(g.error("%c‚ùå SVG PLACEHOLDER DETECTED!","background: red; color: white; padding: 4px 8px; font-weight: bold;"),g.error("This will show as gray box with text/number"),g.error("mainImage should be Appwrite or ImageKit URL, not SVG data URL"));const Va=a._locationArea||j,Ya=(()=>{if(j&&j!=="all"){const ge=la.flatMap(Pe=>Pe.cities),ye=j.toLowerCase().trim(),ce=ge.find(Pe=>Pe.locationId===ye||Pe.name.toLowerCase()===ye);if(ce){if(a.serviceAreas)try{const Pe=JSON.parse(a.serviceAreas);if(Array.isArray(Pe)&&Pe.length>0){const Ue=Pe.map(G=>G.split("-").slice(1).map(Fe=>Fe.charAt(0).toUpperCase()+Fe.slice(1)).join(" ")).filter(Boolean);if(Ue.length>0)return"".concat(ce.name," - ").concat(Ue.join(", "))}}catch{}return ce.name}}let me="";if(!Va)me=(a.location||"Bali").split(",")[0].trim();else{const ye=la.flatMap(ce=>ce.cities).find(ce=>ce.locationId===Va);me=(ye==null?void 0:ye.name)||Va}if(a.serviceAreas)try{const ge=JSON.parse(a.serviceAreas);if(Array.isArray(ge)&&ge.length>0){const ye=ge.map(ce=>ce.split("-").slice(1).map(Ue=>Ue.charAt(0).toUpperCase()+Ue.slice(1)).join(" ")).filter(Boolean);if(ye.length>0)return"".concat(me," - ").concat(ye.join(", "))}}catch{}return me})();return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:"\n                @keyframes cardFlash {\n                    0%, 100% { \n                        box-shadow: 0 10px 40px rgba(239, 68, 68, 0.4), 0 0 20px rgba(251, 146, 60, 0.6);\n                    }\n                    50% { \n                        box-shadow: 0 20px 60px rgba(239, 68, 68, 0.6), 0 0 40px rgba(251, 146, 60, 0.8);\n                    }\n                }\n\n                @keyframes discountFade {\n                    0%, 100% { \n                        opacity: 1;\n                    }\n                    50% { \n                        opacity: 0.3;\n                    }\n                }\n\n                .discount-fade {\n                    background: linear-gradient(to right, rgb(249, 115, 22), rgb(234, 88, 12));\n                    animation: discountFade 2s ease-in-out infinite;\n                }\n\n                @keyframes priceRimFade {\n                    0%, 100% { \n                        border-color: rgb(251, 146, 60);\n                        box-shadow: 0 0 0 2px rgba(251, 146, 60, 0.3), 0 4px 6px -1px rgba(251, 146, 60, 0.5);\n                    }\n                    50% { \n                        border-color: rgba(251, 146, 60, 0.3);\n                        box-shadow: 0 0 0 2px rgba(251, 146, 60, 0.1), 0 4px 6px -1px rgba(251, 146, 60, 0.2);\n                    }\n                }\n\n                .price-rim-fade {\n                    animation: priceRimFade 2s ease-in-out infinite;\n                }\n\n            "}),e.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[e.jsxs("span",{className:"text-[11px] text-gray-600 font-medium flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Ga]}),!p&&e.jsxs("button",{onClick:me=>{me.stopPropagation(),he(!0)},className:"text-[11px] text-green-600 font-semibold flex items-center gap-1 hover:text-green-700 hover:underline transition-colors cursor-pointer",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Therapist Join Free"]})]}),e.jsxs("div",{className:"w-full bg-white rounded-xl shadow-lg border border-gray-200 overflow-visible relative active:shadow-xl transition-all touch-manipulation pb-8",children:[e.jsx(Eg,{therapist:a,displayImage:pt,onShareClick:()=>{ae(!0)},customVerifiedBadge:y,bookingsCount:ma===0?ta(String(a.id||a.$id||"")):ma,displayRating:za,shareCount:I}),e.jsxs("div",{className:"px-4 mt-3 flex flex-col items-end",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-black font-medium uppercase",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),Ya]}),e.jsxs("div",{className:"text-xs text-orange-500 mt-1 font-medium uppercase",children:["Serves ",Ya," area"]})]}),e.jsx(cp,{therapist:a,displayStatus:qe,isOvertime:Wt,countdown:Kt,customVerifiedBadge:y}),e.jsxs("div",{className:"mx-4 mb-2 flex items-center justify-between",children:[e.jsxs("p",{className:"text-xs text-gray-600 text-left",children:[e.jsxs("span",{className:"font-bold",children:[zn.getTranslation("accepts",le),":"]})," ",Dg(a.clientPreferences,le)]}),a.hotelVillaSafePassStatus==="active"||a.hasSafePassVerification?e.jsx("button",{type:"button",onClick:ge=>{ge.preventDefault(),ge.stopPropagation(),g.debug("üõ°Ô∏è Opening SafePass verification modal for:",a.name),we(!0)},className:"hover:opacity-90 active:scale-95 transition-all duration-200 cursor-pointer relative z-10",children:e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/hotel%205.png?updatedAt=1770362023320",alt:"SafePass Verified",className:"w-14 h-14 object-contain",loading:"lazy",decoding:"async"})}):null]}),e.jsx("div",{className:"therapist-bio-section bg-white/90 backdrop-blur-sm rounded-lg py-2 px-3 shadow-sm mx-4 mb-3",children:e.jsx("p",{className:"text-sm text-gray-700 leading-5 break-words whitespace-normal line-clamp-6",children:xe})}),e.jsx(dp,{therapist:a,t:E}),e.jsx(up,{therapist:a,getDynamicSpacing:Ht,translatedDescriptionLength:xe.length}),_e[60]>0&&_e[90]>0&&_e[120]>0&&e.jsx(Mg,{pricing:_e,therapist:a,displayRating:za,animatedPriceIndex:Rt,formatPrice:sn,getDynamicSpacing:Ht,translatedDescriptionLength:xe.length,menuData:rt,onPriceClick:()=>{g.debug("üí∞ Price grid clicked - opening price modal"),V(!0)}}),e.jsx(bp,{therapist:a,onBookNow:async()=>{s?(g.debug("üì§ [SHARED PROFILE] Using onQuickBookWithChat handler"),s()):(g.debug("üí¨ [BOOK NOW] Opening persistent chat window..."),Ta(a,f?"share":null)),i("bookings"),ea(me=>me+1)},onSchedule:async()=>{var ye,ce;const me=!!(a.bankName&&a.accountNumber&&a.accountName)||!!a.bankCardDetails,ge=!!a.ktpPhotoUrl;if(me&&ge){try{await Kl.createBookingRequest({userId:"current_user",userDetails:{name:"Current User",phone:"+1234567890",location:"User Location"},serviceType:"scheduled",scheduledTime:new Date(Date.now()+1440*60*1e3),services:[{id:"massage",name:"Massage Service",duration:90,price:((ye=_e==null?void 0:_e[0])==null?void 0:ye.price)||100}],totalPrice:((ce=_e==null?void 0:_e[0])==null?void 0:ce.price)||100,duration:90,location:{address:Ya,coordinates:{lat:0,lng:0}},preferredTherapists:[a.$id],urgency:"normal"})}catch{}Aa(a,f?"share":null),i("bookings"),ea(Pe=>Pe+1)}else alert("Scheduled bookings require the therapist to add bank details and KTP in their dashboard. Please choose another therapist or try again later.")},onPriceSlider:()=>{g.debug("üí∞ [PRICE SLIDER] Opening price modal..."),V(!0)},hasScheduledBookings:!!(a.bankName&&a.accountNumber&&a.accountName||a.bankCardDetails)&&!!a.ktpPhotoUrl,hasActiveScheduledBooking:M,bookNowText:Le,scheduleText:Be,dynamicSpacing:Ht("mt-4","mt-3","mt-3",xe.length)})]}),a.partneredHotelVilla&&e.jsx("div",{className:"mt-3 mb-2 px-2",children:e.jsx("button",{onClick:me=>{me.stopPropagation(),l&&l("indastreet-partners")},className:"w-full bg-gradient-to-r from-amber-50 to-orange-50 border border-orange-200 rounded-lg p-2.5 hover:from-amber-100 hover:to-orange-100 transition-all",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-orange-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})}),e.jsxs("div",{className:"flex-1 text-left min-w-0",children:[e.jsxs("p",{className:"text-xs font-bold text-orange-900 truncate",children:["Partnered with ",a.partneredHotelVilla]}),e.jsx("p",{className:"text-[10px] text-orange-700",children:"View partner hotels & villas ‚Üí"})]})]})})}),e.jsx(op,{therapist:a,showReviewModal:$,setShowReviewModal:H,showBusyModal:T,setShowBusyModal:x,showReferModal:A,setShowReferModal:S,showBookingPopup:C,setShowBookingPopup:_,showScheduleBookingPopup:L,setShowScheduleBookingPopup:U,showSharePopup:Y,setShowSharePopup:ae,showJoinPopup:pe,setShowJoinPopup:he,pricing:_e,displayRating:za,effectiveRating:nn,displayStatus:qe,selectedDuration:te,priceSliderBookingSource:Ye,setPriceSliderBookingSource:et,userReferralCode:q,shortShareUrl:gt,handleAnonymousReviewSubmit:it}),e.jsx("div",{className:"text-center mt-3 mb-2 px-4",children:e.jsxs("button",{type:"button",onClick:me=>{me.preventDefault(),me.stopPropagation(),l?l("contact"):window.location.href="/contact"},className:"inline-flex flex-col items-center cursor-pointer bg-transparent border-none p-0",children:[e.jsx("span",{className:"text-xs font-semibold text-red-600 hover:text-red-700",children:"Report Profile"}),e.jsx("span",{className:"text-[10px] text-gray-500",children:"Violates Stated Standards"})]})}),e.jsx(_m,{showPriceListModal:F,setShowPriceListModal:V,therapist:a,displayRating:za,arrivalCountdown:fe.toString(),formatCountdown:mp,menuData:B,selectedServiceIndex:X,selectedDuration:te,handleSelectService:ua,setSelectedServiceIndex:Q,setSelectedDuration:oe,openBookingWithService:O,chatLang:le,showBookingButtons:!0,handleBookNowClick:de,closeAllModals:Te}),e.jsx(sg,{isOpen:De,onClose:()=>we(!1),therapistName:He(a.name),therapistImage:a.profilePicture||a.mainImage||a.profileImage,safePassIssueDate:"2025-01-15",chatLang:le})]})},kp=["https://ik.imagekit.io/7grri5v7d/avatar%201.png","https://ik.imagekit.io/7grri5v7d/avatar%202.png","https://ik.imagekit.io/7grri5v7d/avatar%203.png","https://ik.imagekit.io/7grri5v7d/avatar%204.png","https://ik.imagekit.io/7grri5v7d/avatar%206.png","https://ik.imagekit.io/7grri5v7d/avatar%207.png","https://ik.imagekit.io/7grri5v7d/avatar%208.png","https://ik.imagekit.io/7grri5v7d/avatar%209.png","https://ik.imagekit.io/7grri5v7d/avatar%2010.png","https://ik.imagekit.io/7grri5v7d/avatar%2011.png","https://ik.imagekit.io/7grri5v7d/avatar%2012.png","https://ik.imagekit.io/7grri5v7d/avatar%2013.png","https://ik.imagekit.io/7grri5v7d/avatar%2014.png","https://ik.imagekit.io/7grri5v7d/avatar%2015.png","https://ik.imagekit.io/7grri5v7d/avatar%2016.png","https://ik.imagekit.io/7grri5v7d/avatar%2017.png","https://ik.imagekit.io/7grri5v7d/avatar%2018.png"],vp=[{template:"Excellent massage service! Very professional and relaxing experience in {city}.",rating:5,length:"short"},{template:"Amazing experience! The therapist was skilled and attentive. Highly recommend!",rating:5,length:"short"},{template:"Best massage in {city}! Will definitely come back for another session.",rating:5,length:"short"},{template:"Great service and very relaxing atmosphere. Perfect for stress relief!",rating:4,length:"short"},{template:"Outstanding massage therapy in {city}. The therapist really understood my needs and targeted all the problem areas. I felt so much better afterwards. The atmosphere was peaceful and clean.",rating:5,length:"medium"},{template:"Very professional service from start to finish. The massage technique was excellent and I could feel my tension melting away. Great value for money in {city}. Will definitely return!",rating:5,length:"medium"},{template:"Fantastic massage experience! The therapist was very knowledgeable about pressure points and muscle therapy. I had chronic back pain that improved significantly after just one session. Highly recommended for anyone in {city}!",rating:5,length:"medium"},{template:"Good massage overall. The therapist was friendly and professional. The room was clean and comfortable. Only minor issue was the wait time, but the quality made up for it.",rating:4,length:"medium"},{template:"Absolutely incredible massage experience in {city}! I came in with severe shoulder and neck pain from working at a computer all day. The therapist took time to understand my specific issues and customized the treatment accordingly. The technique was perfect - just the right amount of pressure. By the end of the session, I felt like a new person. The ambiance was relaxing with soft music and aromatherapy. Will definitely make this a regular part of my wellness routine!",rating:5,length:"long"},{template:"I have been to many massage places in {city}, but this is by far the best. The therapist is extremely skilled and professional. They use traditional techniques combined with modern therapy methods. The treatment room is immaculate and has a very peaceful atmosphere. I particularly appreciated how they checked in about pressure levels throughout the session. My chronic pain has improved dramatically after multiple visits. Cannot recommend highly enough!",rating:5,length:"long"},{template:"Wonderful massage therapy service. I was dealing with sports injury pain and the therapist really knew how to work on those specific areas. They explained what they were doing and gave me helpful advice for recovery. The facility is clean, well-maintained, and has a calming environment. Prices are very reasonable for the quality of service. This is now my go-to place for massage in {city}. Five stars all the way!",rating:5,length:"long"},{template:"Great experience at this massage center. The staff was welcoming and professional from the moment I walked in. The therapist had excellent technique and really focused on my problem areas. The room had perfect lighting and temperature. I felt completely relaxed throughout the entire session. My only suggestion would be slightly longer appointment times, but overall a fantastic experience in {city}!",rating:4,length:"long"},{template:"Perfect massage! The therapist listened to my concerns and provided exactly what I needed. Very skilled hands!",rating:5,length:"short"},{template:"Incredible therapeutic massage in {city}. My back pain is gone! Professional service and clean facility.",rating:5,length:"short"},{template:"Top-notch massage therapy. The therapist was knowledgeable and professional. I felt instant relief from my muscle tension. The environment was peaceful and welcoming. Definitely returning soon!",rating:5,length:"medium"},{template:"Very satisfied with the massage service. The technique was effective and I felt much better afterwards. Good location in {city} and easy to book. Reasonable prices for quality service.",rating:4,length:"medium"}],wp=["Sarah Johnson","Michael Chen","Emma Williams","David Lee","Sophie Martin","James Brown","Olivia Garcia","Daniel Rodriguez","Isabella Martinez","Alexander Kim","Mia Anderson","Ethan Taylor","Ava Thompson","Noah Wilson","Charlotte Davis","Liam Martinez","Amelia White","Lucas Harris","Harper Clark","Mason Lewis","Evelyn Walker","Logan Hall","Abigail Young","Benjamin King"];function Vl(a){let t=0;for(let n=0;n<a.length;n++){const s=a.charCodeAt(n);t=(t<<5)-t+s,t=t&t}return Math.abs(t)}function Yl(a,t){const n=Math.sin(a+t)*1e4;return n-Math.floor(n)}function Np(){return Math.floor(Date.now()/(300*1e3))}function Us(a,t,n){const s=[...a],i=Vl(t+n.toString());for(let r=s.length-1;r>0;r--){const l=Math.floor(Yl(i,r)*(r+1));[s[r],s[l]]=[s[l],s[r]]}return s}function Jl(a,t="Yogyakarta",n=5){const s=Np(),i=Vl(a+s.toString()),r=Us(vp,a,s),l=Us(wp,a,s),o=Us(kp,a,s),c=[];for(let d=0;d<n;d++){const m=r[d%r.length],p=l[d%l.length],f=o[d%o.length],y=m.template.replace(/{city}/g,t),I=Math.floor(Yl(i,d*100)*60),P=new Date(Date.now()-I*24*60*60*1e3).toISOString();c.push({id:"seed_".concat(a,"_").concat(d,"_").concat(s),profileId:a,text:y,rating:m.rating,avatarUrl:f,city:t,userName:p,isSeed:!0,createdAt:P})}return c}function Fn(a,t,n="Yogyakarta"){if(t.length>=5)return t.slice(0,5);const s=5-t.length,i=Jl(a,n,s);return[...t,...i]}function Sp(a){var t;return(a==null?void 0:a.isSeed)===!0||((t=a==null?void 0:a.id)==null?void 0:t.startsWith("seed_"))}const pi=new Map,jp=300*1e3;function Ql(a,t){return"".concat(t,"_").concat(a)}function Ip(a){return a?Date.now()-a.timestamp<jp:!1}async function Tp(a,t,n="Yogyakarta",s={}){const{forceRefresh:i=!1,includeSeeds:r=!0}=s,l=Ql(a,t),o=pi.get(l);if(!i&&Ip(o))return{reviews:r?Fn(String(a),o.data,n):o.data,fromCache:!0,hasRealReviews:o.data.length>0};if(o&&!i){const c=r?Fn(String(a),o.data,n):o.data;return Ap(a,t).catch(d=>{}),{reviews:c,fromCache:!0,hasRealReviews:o.data.length>0}}try{const c=await us.getByProvider(a,t);return pi.set(l,{data:c,timestamp:Date.now(),profileId:String(a),providerType:t}),{reviews:r?Fn(String(a),c,n):c,fromCache:!1,hasRealReviews:c.length>0}}catch{return o?{reviews:r?Fn(String(a),o.data,n):o.data,fromCache:!0,hasRealReviews:o.data.length>0}:{reviews:r?Jl(String(a),n,5):[],fromCache:!1,hasRealReviews:!1}}}async function Ap(a,t,n,s){const i=Ql(a,t);try{const r=await us.getByProvider(a,t);pi.set(i,{data:r,timestamp:Date.now(),profileId:String(a),providerType:t})}catch{}}const Cp=({location:a,limit:t=5,providerId:n,providerName:s,providerType:i="therapist",providerImage:r,onNavigate:l})=>{const[o,c]=u.useState([]),[d,m]=u.useState(new Set),[p,f]=u.useState(!0),[y,I]=u.useState(!1),P=u.useRef(!0),{language:D}=os(),T={en:{title:"Customer Reviews",topReviews:"Top 5 Reviews",post:"Post",loading:"Loading reviews...",showMore:"Show more",showLess:"Show less",previewLabel:"Preview Review"},id:{title:"Ulasan Pelanggan",topReviews:"Top 5 Ulasan",post:"Posting",loading:"Memuat ulasan...",showMore:"Baca lebih lanjut",showLess:"Lihat lebih sedikit",previewLabel:"Ulasan Pratinjau"}}[D==="gb"?"en":D];u.useEffect(()=>()=>{P.current=!1},[]);const x=async()=>{if(P.current)try{if(n){const C=await Tp(n,i,a,{includeSeeds:!0});if(!P.current)return;const _=C.reviews.map((L,U)=>{const $=L.reviewContent||L.text||L.comment||"",H=L.userName||L.reviewerName||L.name||"Anonymous",Y=L.avatarUrl||L.avatar;return{...L,avatar:Y,$id:L.$id||L.id||"review-".concat(U),name:H,reviewerName:H,userName:H,comment:$,text:$,reviewContent:$,reviewText:$,location:L.location||a,isSeed:Sp(L)}});c(_),I(C.hasRealReviews),g.debug("‚úÖ Loaded ".concat(_.length," reviews (").concat(C.hasRealReviews?"with":"no"," real reviews)"))}else c([]),g.debug("‚ÑπÔ∏è No providerId specified, skipping review fetch")}catch(C){g.error("‚ùå Error fetching reviews:",C)}finally{P.current&&f(!1)}};u.useEffect(()=>{P.current=!0,x()},[a,n,i]),u.useEffect(()=>{if(o.length===0)return;const C=setInterval(()=>{g.debug("üîÑ Rotating seed reviews (5-minute refresh)"),x()},300*1e3);return()=>clearInterval(C)},[o.length,a,n,i]);const A=p&&o.length===0,S=()=>{if(l){const C={};n&&(C.providerId=String(n)),s&&(C.providerName=s),i&&(C.providerType=i),r&&(C.providerImage=r),C.returnUrl=window.location.pathname,sessionStorage.setItem("reviewParams",JSON.stringify(C)),l("reviews")}else try{const C=new URL(window.location.origin+"/reviews");n&&C.searchParams.set("providerId",String(n)),s&&C.searchParams.set("providerName",s),i&&C.searchParams.set("providerType",i),r&&C.searchParams.set("providerImage",r),C.searchParams.set("returnUrl",window.location.href),window.location.href=C.toString()}catch{window.location.href="/reviews"}};return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 gap-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"text-xl font-medium text-black",children:T.title}),e.jsx("span",{className:"text-sm text-gray-500",children:s?"".concat(s," ").concat(T.topReviews):a?"".concat(a," ").concat(T.topReviews):T.topReviews})]}),e.jsxs("button",{onClick:S,className:"inline-flex items-center gap-2 px-3 py-2 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors shadow-sm",title:T.post,children:[e.jsx(rs,{className:"w-4 h-4"}),e.jsx("span",{children:T.post})]})]}),A?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((C,_)=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-white shadow-sm animate-pulse",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]})]})},_))}):o.length===0?e.jsx("div",{className:"text-center py-8 text-gray-600",children:e.jsx("p",{className:"text-sm",children:T.loading})}):e.jsx("div",{className:"space-y-4",children:o.map((C,_)=>{const L=C.text||C.reviewContent||C.comment||C.reviewText||"",U=C.userName||C.reviewerName||C.name||"Anonymous",$=C.avatarUrl||C.avatar,H=C.$id||C.id||"review-".concat(_),Y=d.has(H),ae=C.isSeed===!0;return e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg bg-white shadow-sm relative",children:[ae&&e.jsx("div",{className:"absolute top-2 right-2 opacity-0 hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"text-[10px] text-gray-400 bg-gray-100 px-2 py-1 rounded",children:T.previewLabel})}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0 bg-gray-100",children:$&&e.jsx("img",{src:$,alt:U,className:"w-full h-full object-cover",loading:"lazy"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-black truncate",children:U}),e.jsx("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",children:Array.from({length:5}).map((F,V)=>e.jsx(Ot,{className:"w-4 h-4 ".concat(V<C.rating?"fill-yellow-400 text-yellow-400":"text-gray-300")},V))})]}),e.jsx("p",{className:"text-gray-700 text-sm leading-relaxed whitespace-pre-wrap ".concat(Y?"":"line-clamp-3"),children:L}),L.length>150&&e.jsx("button",{onClick:()=>{m(F=>{const V=new Set(F);return V.has(H)?V.delete(H):V.add(H),V})},className:"mt-2 text-xs font-semibold text-orange-600 hover:text-orange-700 transition-colors",children:Y?T.showLess:T.showMore}),C.location&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["üìç ",C.location]})]})]})]},H)})})]})},Pp={professional_standards:{name:"Professional Standards",description:"EU/International standards for certified oils, hygiene, and licensed therapy",color:"bg-blue-500"},reliability_discipline:{name:"Reliability & Discipline",description:"Time management, distance reliability, and booking commitment",color:"bg-green-500"},quality_experience:{name:"Quality & Experience",description:"5-star ratings, customer favorites, and advanced techniques",color:"bg-purple-500"},platform_engagement:{name:"Platform Engagement",description:"Profile completeness, response time, and availability accuracy",color:"bg-orange-500"},premium_growth:{name:"Premium & Growth",description:"Elite membership, continuous improvement, and platform trust",color:"bg-yellow-500"},specialty_badges:{name:"Specialty Badges",description:"Traditional specialization, hotel approval, and wellness focus",color:"bg-teal-500"}},Dp=[{$id:"certified-oils",name:"Certified Oils",description:"Uses certified, skin-safe massage oils. EU/International standard compliant. Builds customer trust & hygiene confidence.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/certified-oils-badge.png",category:"professional_standards",rarity:"rare",dateEarned:"",isVisible:!0},{$id:"hygiene-approved",name:"Hygiene Approved",description:"Clean presentation, proper nail length, optional glove use where appropriate, high sanitation awareness.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/hygiene-badge.png",category:"professional_standards",rarity:"uncommon",dateEarned:"",isVisible:!0},{$id:"licensed-therapist",name:"Licensed Therapist",description:"Holds valid local or international certification. Verified documents on file.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/licensed-badge.png",category:"professional_standards",rarity:"epic",dateEarned:"",isVisible:!0},{$id:"time-keeper",name:"Time Keeper",description:"Always arrives on time. No late starts or cancellations. Strong booking discipline.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/time-keeper-badge.png",category:"reliability_discipline",rarity:"rare",dateEarned:"",isVisible:!0},{$id:"distance-reliable",name:"Distance Reliable",description:"Consistently completes long-distance bookings. No last-minute refusals.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/distance-badge.png",category:"reliability_discipline",rarity:"uncommon",dateEarned:"",isVisible:!0},{$id:"booking-commitment",name:"Booking Commitment",description:"Accepts and completes bookings responsibly. Low cancellation rate.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/commitment-badge.png",category:"reliability_discipline",rarity:"common",dateEarned:"",isVisible:!0},{$id:"five-star-rated",name:"5-Star Rated",description:"Consistently high customer reviews. Quality service confirmed by clients.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/five-star-badge.png",category:"quality_experience",rarity:"epic",dateEarned:"",isVisible:!0},{$id:"customer-favorite",name:"Customer Favorite",description:"Frequently rebooked by customers. High repeat client rate.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/favorite-badge.png",category:"quality_experience",rarity:"rare",dateEarned:"",isVisible:!0},{$id:"advanced-techniques",name:"Advanced Techniques",description:"Skilled in multiple massage styles. Traditional + modern methods.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/advanced-badge.png",category:"quality_experience",rarity:"rare",dateEarned:"",isVisible:!0},{$id:"profile-complete",name:"Profile Complete",description:"Full profile, photos, menu, pricing. Actively maintained dashboard.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/profile-complete-badge.png",category:"platform_engagement",rarity:"common",dateEarned:"",isVisible:!0},{$id:"fast-responder",name:"Fast Responder",description:"Replies quickly to customer messages. High response score.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/fast-response-badge.png",category:"platform_engagement",rarity:"uncommon",dateEarned:"",isVisible:!0},{$id:"verified-availability",name:"Verified Availability",description:"Online status accurate. Updates availability correctly.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/availability-badge.png",category:"platform_engagement",rarity:"common",dateEarned:"",isVisible:!0},{$id:"elite-member",name:"Elite Member",description:"Premium or featured therapist. Consistently meets platform standards.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/elite-badge.png",category:"premium_growth",rarity:"legendary",dateEarned:"",isVisible:!0},{$id:"growth-path",name:"Growth Path",description:"Shows continuous improvement. Increasing ratings & bookings over time.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/growth-badge.png",category:"premium_growth",rarity:"uncommon",dateEarned:"",isVisible:!0},{$id:"platform-trusted",name:"Platform Trusted",description:"Long-term reliability. No policy violations. Strong professional record.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/trusted-badge.png",category:"premium_growth",rarity:"epic",dateEarned:"",isVisible:!0},{$id:"traditional-specialist",name:"Traditional Specialist",description:"Expert in Indonesian traditional massage.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/traditional-badge.png",category:"specialty_badges",rarity:"rare",dateEarned:"",isVisible:!0},{$id:"hotel-approved",name:"Hotel-Approved",description:"Experienced in hotel & spa environments.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/hotel-badge.png",category:"specialty_badges",rarity:"uncommon",dateEarned:"",isVisible:!0},{$id:"long-session-expert",name:"Long Session Expert",description:"Comfortable with 90‚Äì120 min sessions.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/long-session-badge.png",category:"specialty_badges",rarity:"uncommon",dateEarned:"",isVisible:!0},{$id:"wellness-focused",name:"Wellness Focused",description:"Strong relaxation & recovery approach.",badgeUrl:"https://ik.imagekit.io/7grri5v7d/wellness-badge.png",category:"specialty_badges",rarity:"common",dateEarned:"",isVisible:!0}],Ep=({therapistId:a,therapistName:t="Therapist",isVerified:n=!1,verifiedDate:s,safePassStatus:i,mode:r="public",achievements:l=[],onViewAll:o,language:c="en"})=>{const[d,m]=u.useState(!1),p=["certified-oils","hygiene-approved","time-keeper","booking-commitment","profile-complete","fast-responder","growth-path"],f=Dp,y=f.map(T=>({...T,isAchieved:T.$id==="certified-oils"?!0:p.includes(T.$id)})),I=Object.entries(Pp).map(([T,x])=>{const A=y.filter(S=>S.category===T);return{key:T,name:x.name,color:x.color,achievements:A}}).filter(T=>T.achievements.length>0),P=d?I:I.slice(0,3),D=T=>{switch(T){case"professional_standards":return e.jsx(ja,{className:"w-4 h-4"});case"reliability_discipline":return e.jsx(We,{className:"w-4 h-4"});case"quality_experience":return e.jsx(Ot,{className:"w-4 h-4"});case"platform_engagement":return e.jsx(Nc,{className:"w-4 h-4"});case"premium_growth":return e.jsx(Ho,{className:"w-4 h-4"});case"specialty_badges":return e.jsx(Ot,{className:"w-4 h-4"});default:return e.jsx(Fr,{className:"w-4 h-4"})}},j=T=>T.isAchieved?"border-gray-200 bg-white text-gray-800 shadow-sm":"border-red-300 bg-red-100 text-red-700",E=T=>T.isAchieved?"‚úì":"‚úó";return e.jsxs("div",{className:"mt-8 bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center",children:e.jsx(Fr,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-800",children:c==="id"?"Pencapaian Indastreet":"Indastreet Achievements"}),n&&e.jsx("div",{className:"flex items-center gap-2 text-sm",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"‚úì"})}),e.jsx("span",{className:"text-gray-700 font-medium",children:t}),e.jsx("span",{className:"text-gray-600",children:c==="id"?"ID Terverifikasi":"Verified ID"})]})})]})]}),I.length>3&&e.jsxs("button",{onClick:()=>m(!d),className:"flex items-center gap-1 px-3 py-1 bg-orange-100 hover:bg-orange-200 text-orange-700 rounded-full text-sm font-medium transition-colors whitespace-nowrap flex-shrink-0",children:[d?"Show Less":"View All",e.jsx(qo,{className:"w-4 h-4 transition-transform flex-shrink-0 ".concat(d?"rotate-45":"")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[e.jsxs("div",{className:"p-4 rounded-lg border-2 backdrop-blur-md shadow-lg transition-all ".concat(n||i==="active"?"bg-white/80 bg-gradient-to-br from-white/90 to-black/10 border-white/60":"bg-white/60 bg-gradient-to-br from-white/70 to-black/20 border-white/40"),children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:n||i==="active"?e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-white text-lg font-bold",children:"‚úì"})}):e.jsx("div",{className:"w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-white text-lg",children:"?"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-bold text-sm ".concat(n||i==="active"?"text-green-700":"text-gray-600"),children:c==="id"?"Terverifikasi":"Verified"}),e.jsx("p",{className:"text-xs ".concat(n||i==="active"?"text-green-600":"text-gray-500"),children:n||i==="active"?c==="id"?"Bank & KTP Lengkap":"Bank & KTP Complete":c==="id"?"Data Bank/KTP Kurang":"Missing Bank/KTP"}),(n||i==="active")&&s&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[c==="id"?"Sejak":"Since"," ",s]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg border-2 backdrop-blur-md shadow-lg transition-all ".concat(i==="active"?"bg-white/80 bg-gradient-to-br from-white/90 to-black/10 border-white/60":"bg-white/60 bg-gradient-to-br from-white/70 to-black/20 border-white/40"),children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:i==="active"?e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-white text-lg",children:"üè®"})}):e.jsx("div",{className:"w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-white text-lg",children:"üè®"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-bold text-sm ".concat(i==="active"?"text-blue-700":"text-gray-600"),children:c==="id"?"Safe Pass Hotel-Villa":"Hotel-Villa Safe Pass"}),e.jsx("p",{className:"text-xs ".concat(i==="active"?"text-blue-600":"text-gray-500"),children:i==="active"?c==="id"?"Tersertifikasi":"Certified":c==="id"?"Perlu Verifikasi":"Requires Verification"})]})]})]}),e.jsx("div",{className:"space-y-4",children:P.map(T=>e.jsxs("div",{className:"border border-gray-100 rounded-lg p-3 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-6 h-6 bg-orange-500 rounded-full flex items-center justify-center text-white",children:D(T.key)}),e.jsx("h4",{className:"text-sm font-semibold text-orange-800",children:T.name}),e.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[e.jsx("span",{className:"text-xs text-green-600 font-medium",children:T.achievements.filter(x=>x.isAchieved).length}),e.jsx("span",{className:"text-xs text-orange-400",children:"/"}),e.jsx("span",{className:"text-xs text-orange-600",children:T.achievements.length})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:T.achievements.map(x=>e.jsxs("div",{className:"\n                    relative p-2 rounded-md border text-center cursor-pointer transition-all hover:shadow-sm\n                    ".concat(j(x),"\n                  "),title:x.description,children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx("span",{className:"text-lg ".concat(x.isAchieved?"text-green-500":"text-red-500"),children:E(x)})}),e.jsx("h5",{className:"text-xs font-medium leading-tight mb-1",children:x.name}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{className:"text-xs opacity-75 capitalize",children:x.rarity})}),x.rarity==="legendary"&&x.isAchieved&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full flex items-center justify-center",children:e.jsx(Ot,{className:"w-2 h-2 text-yellow-800 fill-current"})})]},x.$id))})]},T.key))}),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsxs("span",{className:"text-gray-600",children:["Achieved: ",y.filter(T=>T.isAchieved).length]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsxs("span",{className:"text-gray-600",children:["Pending: ",y.filter(T=>!T.isAchieved).length]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ja,{className:"w-3 h-3 text-orange-500"}),e.jsxs("span",{className:"text-gray-600",children:["Total: ",f.length," standards"]})]})]}),r==="authenticated"&&o&&e.jsx("button",{onClick:o,className:"text-orange-600 hover:text-orange-700 font-medium",children:"Manage ‚Üí"})]})}),e.jsx("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-amber-500 rounded-full flex items-center justify-center mt-0.5",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"!"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"text-xs text-amber-800 leading-relaxed",children:[e.jsx("span",{className:"font-semibold",children:"Achievement Accountability:"})," Any achievement displayed but not practiced during your massage session gives you the obligation to no payment. Indastreet takes pride in our badge achievements so you can too."]})})]})})]})},Bi=[{name:"Swedish Massage",shortDescription:"Classic relaxation massage with gentle, flowing strokes for stress relief and improved circulation.",fullDescription:"Swedish massage is one of the most popular massage techniques worldwide. It uses five main strokes - effleurage (sliding/gliding), petrissage (kneading), tapotement (rhythmic tapping), friction (cross fiber), and vibration/shaking. This gentle yet effective technique promotes relaxation, improves blood circulation, eases muscle tension, and enhances overall well-being. Perfect for first-time massage recipients and those seeking stress relief.",benefits:["Reduces stress and anxiety","Improves blood circulation","Eases muscle tension","Promotes better sleep","Boosts immune system","Increases flexibility"],duration:"60-90 minutes",intensity:"Light",bestFor:["Beginners","Stress relief","Relaxation","General wellness"]},{name:"Deep Tissue Massage",shortDescription:"Intense therapeutic massage targeting deep muscle layers to relieve chronic pain and tension.",fullDescription:"Deep tissue massage focuses on the deeper layers of muscle and connective tissue. Using slow strokes and deep finger pressure on areas of tension and pain, this technique is particularly beneficial for chronically tense and contracted areas such as stiff necks, low back tightness, and sore shoulders. It helps break down adhesions (bands of painful, rigid tissue) that can disrupt circulation and cause pain, limited movement, and inflammation.",benefits:["Relieves chronic muscle pain","Breaks down scar tissue","Improves posture","Reduces inflammation","Treats sports injuries","Lowers blood pressure"],duration:"60-90 minutes",intensity:"Deep",bestFor:["Chronic pain","Athletes","Muscle injuries","Limited mobility"]},{name:"Sports Massage",shortDescription:"Specialized massage for athletes to enhance performance, prevent injuries, and accelerate recovery.",fullDescription:"Sports massage is designed specifically for people who are involved in physical activity. It focuses on areas of the body that are overused and stressed from repetitive and often aggressive movements. This type of massage can be used before, during, and after athletic events to prepare muscles, reduce recovery time, and prevent injury. It combines techniques from Swedish massage, deep tissue, and stretching to address the specific needs of athletes.",benefits:["Prevents sports injuries","Enhances athletic performance","Reduces muscle soreness","Improves flexibility","Speeds recovery","Increases range of motion"],duration:"30-90 minutes",intensity:"Firm",bestFor:["Athletes","Active individuals","Injury prevention","Pre/post competition"]},{name:"Hot Stone Massage",shortDescription:"Therapeutic massage using heated smooth stones to warm and relax tight muscles.",fullDescription:"Hot stone massage uses smooth, heated basalt stones placed on specific points on the body to warm and loosen tight muscles and balance energy centers. The therapist may also hold stones while applying traditional massage strokes. The heat from the stones penetrates deep into muscles, allowing the therapist to work deeper with less pressure. This ancient technique promotes deep relaxation, eases muscle stiffness, and improves blood flow.",benefits:["Deep muscle relaxation","Improves blood flow","Reduces stress","Eases pain and tension","Promotes better sleep","Boosts immunity"],duration:"75-90 minutes",intensity:"Light",bestFor:["Muscle tension","Stress relief","Chronic pain","Insomnia"]},{name:"Aromatherapy Massage",shortDescription:"Relaxing massage combined with essential oils to enhance emotional and physical well-being.",fullDescription:"Aromatherapy massage combines the therapeutic benefits of massage with the healing properties of essential oils. Different oils are selected based on individual needs - lavender for relaxation, peppermint for energy, eucalyptus for respiratory health, etc. The oils are absorbed through the skin and inhaled during the massage, providing both physical and emotional benefits. This holistic approach treats the mind, body, and spirit.",benefits:["Reduces anxiety and depression","Enhances mood","Relieves pain","Improves sleep quality","Boosts energy","Strengthens immune system"],duration:"60-90 minutes",intensity:"Light",bestFor:["Stress relief","Emotional wellness","Sleep issues","Mood enhancement"]},{name:"Balinese Massage",shortDescription:"Traditional Indonesian massage combining acupressure, reflexology, and aromatherapy for total relaxation.",fullDescription:"Balinese massage is a traditional Indonesian therapy that combines gentle stretches, acupressure, reflexology, and aromatherapy to stimulate the flow of blood, oxygen, and energy around your body. Using a variety of techniques including skin rolling, kneading, stroking, and pressure-point stimulation, this massage promotes deep relaxation, relieves muscle tension, and enhances overall well-being. Essential oils are used to enhance the therapeutic benefits.",benefits:["Deep relaxation","Improves blood circulation","Relieves muscle tension","Reduces stress","Enhances sleep quality","Boosts energy flow"],duration:"60-120 minutes",intensity:"Moderate",bestFor:["Total relaxation","Stress relief","Muscle tension","Energy balance"]},{name:"Javanese Massage",shortDescription:"Gentle Indonesian healing massage focusing on energy flow and holistic wellness.",fullDescription:"Javanese massage is a traditional Indonesian healing technique that focuses on gentle, rhythmic movements to promote energy flow and balance throughout the body. This massage style uses lighter pressure compared to Balinese massage, incorporating elements of meditation and spirituality. The therapist uses hands, thumbs, and sometimes elbows to work on energy lines and pressure points, promoting deep relaxation and inner peace.",benefits:["Promotes energy balance","Reduces stress","Improves circulation","Enhances spiritual wellness","Gentle muscle relaxation","Calms the mind"],duration:"60-90 minutes",intensity:"Light",bestFor:["Stress relief","Energy healing","Gentle relaxation","Holistic wellness"]},{name:"Thai Massage",shortDescription:"Ancient healing practice combining acupressure, stretching, and yoga-like movements.",fullDescription:"Thai massage, also known as Thai yoga massage, is an ancient healing system combining acupressure, Indian Ayurvedic principles, and assisted yoga postures. The recipient remains clothed during the treatment and lies on a mat on the floor. The therapist uses their hands, knees, legs, and feet to move you into a series of yoga-like stretches and applies rhythmic pressure along energy lines. This dynamic bodywork improves flexibility, relieves tension, and energizes the body.",benefits:["Increases flexibility","Improves energy levels","Relieves muscle tension","Enhances athletic performance","Reduces headaches","Improves posture"],duration:"60-120 minutes",intensity:"Moderate",bestFor:["Flexibility","Energy boost","Athletes","Stress relief"]},{name:"Shiatsu Massage",shortDescription:"Japanese finger pressure therapy on energy meridians to balance body energy and promote healing.",fullDescription:'Shiatsu is a Japanese bodywork therapy based on traditional Chinese medicine principles. "Shiatsu" means "finger pressure" in Japanese. The therapist uses thumbs, fingers, and palms to apply pressure to specific points on the body to unblock energy pathways (meridians) and restore balance. Unlike other massage techniques, Shiatsu is typically performed with the client fully clothed on a mat on the floor. It aims to stimulate the body\'s natural healing abilities.',benefits:["Balances energy flow","Reduces stress and anxiety","Relieves pain","Improves circulation","Boosts immune system","Enhances emotional well-being"],duration:"60-90 minutes",intensity:"Moderate",bestFor:["Energy balance","Stress relief","Pain management","Holistic health"]},{name:"Reflexology",shortDescription:"Pressure point therapy on feet, hands, and ears to promote healing throughout the entire body.",fullDescription:"Reflexology is based on the principle that specific points on the feet, hands, and ears correspond to different organs and systems in the body. By applying pressure to these reflex points, reflexologists can improve health in corresponding areas of the body. This ancient practice promotes healing, improves circulation, reduces stress, and restores balance. A typical session focuses primarily on the feet, which contain over 7,000 nerve endings.",benefits:["Reduces stress and tension","Improves circulation","Enhances nerve function","Boosts immune system","Promotes better sleep","Aids digestion"],duration:"30-60 minutes",intensity:"Moderate",bestFor:["Stress relief","Overall wellness","Circulation","Relaxation"]},{name:"Acupressure",shortDescription:"Traditional Chinese medicine technique using finger pressure on specific body points to restore energy balance.",fullDescription:"Acupressure is an ancient Chinese healing technique similar to acupuncture but without needles. Practitioners use their fingers, palms, elbows, or feet to apply pressure to specific points along the body's meridians (energy pathways). This stimulates the body's natural self-healing abilities and promotes energy flow. Acupressure can be used to relieve pain, reduce tension, improve circulation, and treat various health conditions.",benefits:["Relieves pain and tension","Reduces stress","Improves energy flow","Enhances sleep quality","Boosts immune system","Alleviates headaches"],duration:"30-60 minutes",intensity:"Moderate",bestFor:["Pain relief","Energy balance","Stress management","Holistic healing"]},{name:"Lomi Lomi Massage",shortDescription:"Hawaiian massage using flowing movements mimicking ocean waves for profound relaxation and healing.",fullDescription:'Lomi Lomi is a traditional Hawaiian massage that uses long, flowing strokes that mimic the waves of the ocean. "Lomi Lomi" means "to knead" in Hawaiian. This deeply spiritual practice views massage as a sacred healing art. The therapist uses forearms, hands, and elbows in continuous, rhythmic motions, often working on two areas of the body simultaneously. This creates a profound sense of peace and well-being, releasing tension and promoting energy flow.',benefits:["Deep relaxation","Releases muscle tension","Improves circulation","Enhances energy flow","Promotes emotional release","Spiritual healing"],duration:"60-120 minutes",intensity:"Moderate",bestFor:["Deep relaxation","Spiritual wellness","Muscle tension","Stress relief"]},{name:"Kerokan (Coin Rub)",shortDescription:"Traditional Indonesian healing technique using coins to scrape the skin and release negative energy.",fullDescription:'Kerokan is a traditional Indonesian folk medicine technique that involves scraping the skin with coins (usually old coins) or smooth stones lubricated with oil or balm. The therapist applies firm pressure and scrapes in downward strokes on the back, neck, shoulders, and limbs. This creates red marks (petechiae) which are believed to release "bad wind" or negative energy from the body. Kerokan is commonly used to treat colds, flu, fever, and body aches.',benefits:["Relieves cold and flu symptoms","Reduces fever","Alleviates body aches","Improves circulation","Releases toxins","Boosts immune response"],duration:"15-30 minutes",intensity:"Firm",bestFor:["Cold/flu relief","Fever","Body aches","Traditional healing"]},{name:"Jamu Massage",shortDescription:"Indonesian herbal massage using traditional jamu herbs to detoxify, rejuvenate, and heal the body.",fullDescription:"Jamu massage combines traditional Indonesian massage techniques with the healing properties of jamu - herbal medicine made from natural ingredients like turmeric, ginger, lemongrass, and tamarind. The massage incorporates herbal compresses, wraps, and oils infused with these powerful herbs. This holistic treatment detoxifies the body, improves circulation, relieves pain, and promotes overall wellness. It's deeply rooted in Indonesian cultural heritage and traditional medicine.",benefits:["Detoxifies the body","Reduces inflammation","Relieves muscle pain","Improves skin health","Boosts immune system","Enhances energy"],duration:"60-120 minutes",intensity:"Moderate",bestFor:["Detoxification","Pain relief","Traditional healing","Skin health"]},{name:"Prenatal Massage",shortDescription:"Specialized massage for pregnant women to relieve discomfort, reduce stress, and support healthy pregnancy.",fullDescription:"Prenatal massage is specifically designed to address the unique needs of pregnant women. Using specialized positioning (usually side-lying with pillows for support), certified therapists apply gentle techniques to relieve common pregnancy discomforts such as back pain, leg cramps, and swelling. This safe and nurturing therapy reduces stress hormones, improves circulation, and promotes relaxation for both mother and baby. It's typically safe after the first trimester.",benefits:["Reduces pregnancy discomfort","Relieves back and leg pain","Decreases swelling","Improves sleep","Reduces stress hormones","Enhances mood"],duration:"45-60 minutes",intensity:"Light",bestFor:["Pregnant women","Pregnancy discomfort","Stress relief","Better sleep"]},{name:"Lymphatic Massage",shortDescription:"Gentle massage technique to stimulate lymph flow, remove toxins, and boost immune system.",fullDescription:"Lymphatic drainage massage uses very gentle, rhythmic strokes to stimulate the lymphatic system - the body's natural waste removal system. This specialized technique helps move lymph fluid through the body, removing toxins and supporting immune function. It's particularly beneficial for reducing swelling, improving skin health, and supporting post-surgical recovery. The gentle pressure makes it suitable for those who find traditional massage too intense.",benefits:["Reduces swelling and edema","Boosts immune system","Detoxifies the body","Improves skin health","Aids post-surgical recovery","Reduces inflammation"],duration:"45-60 minutes",intensity:"Light",bestFor:["Swelling/edema","Post-surgery","Immune support","Detoxification"]},{name:"Indian Head Massage",shortDescription:"Therapeutic massage focusing on head, neck, and shoulders to relieve tension and promote hair health.",fullDescription:"Indian head massage, also known as champissage, is an ancient Ayurvedic therapy that focuses on the head, neck, and shoulders. Using a variety of techniques including gentle massage, acupressure, and deep kneading, this treatment releases tension, improves circulation to the scalp, and promotes hair growth. Often performed with warm oils infused with herbs, it provides both physical relief and mental clarity. No need to undress - perfect for a quick stress-relief session.",benefits:["Relieves tension headaches","Reduces neck and shoulder pain","Improves scalp circulation","Promotes hair growth","Enhances concentration","Reduces stress"],duration:"30-45 minutes",intensity:"Moderate",bestFor:["Headaches","Neck/shoulder tension","Hair health","Quick relaxation"]},{name:"Abdominal Acupressure",shortDescription:"Specialized pressure point therapy on the abdomen to improve digestion, relieve tension, and support internal organ health.",fullDescription:"Abdominal acupressure is a therapeutic technique that applies gentle to moderate pressure on specific acupressure points located on the abdomen. This ancient healing practice focuses on improving digestive function, relieving bloating and constipation, reducing menstrual cramps, and promoting overall internal organ health. The therapist uses fingers, palms, and sometimes warm compresses to stimulate energy flow and release blockages in the abdominal area, supporting the body's natural healing processes.",benefits:["Improves digestion","Relieves bloating and gas","Reduces menstrual cramps","Alleviates constipation","Supports organ detoxification","Reduces abdominal tension"],duration:"30-45 minutes",intensity:"Light",bestFor:["Digestive issues","Menstrual discomfort","Bloating","Abdominal tension"]},{name:"Vitality Massage",shortDescription:"Energizing full-body massage combining invigorating techniques to boost energy, enhance circulation, and restore vitality.",fullDescription:"Vitality massage is a dynamic, energizing treatment designed to combat fatigue, boost energy levels, and restore overall vitality. This invigorating massage combines various techniques including brisk strokes, percussion movements, stretching, and pressure point stimulation to awaken the body and mind. Often incorporating essential oils known for their energizing properties like peppermint, rosemary, or citrus, this treatment improves circulation, oxygenates tissues, and leaves you feeling refreshed and rejuvenated.",benefits:["Boosts energy levels","Combats fatigue","Improves blood circulation","Enhances mental clarity","Reduces muscle stiffness","Revitalizes body and mind"],duration:"60-90 minutes",intensity:"Moderate",bestFor:["Low energy","Fatigue","Mental fog","Sluggishness"]},{name:"Traditional",shortDescription:"Authentic Indonesian massage combining time-honored techniques for deep relaxation and healing.",fullDescription:"Traditional Indonesian massage is a comprehensive healing therapy that has been practiced for centuries across the archipelago. This therapeutic massage combines deep tissue work, acupressure, gentle stretching, and rhythmic movements to release muscle tension, improve circulation, and restore energy balance. Using natural oils often infused with local herbs and spices, the therapist applies firm but soothing pressure along energy meridians and muscle groups. This holistic approach treats both physical discomfort and promotes spiritual well-being, embodying Indonesia's rich wellness heritage.",benefits:["Releases deep muscle tension","Improves blood circulation","Reduces stress and anxiety","Balances body energy","Relieves chronic pain","Enhances flexibility"],duration:"60-90 minutes",intensity:"Moderate",bestFor:["Muscle tension","Stress relief","Cultural experience","Overall wellness"]},{name:"Feet",shortDescription:"Specialized foot massage targeting pressure points to promote relaxation and overall body wellness.",fullDescription:"Foot massage is a therapeutic treatment focusing exclusively on the feet, which contain thousands of nerve endings connected to every part of the body. This specialized therapy combines reflexology techniques, deep tissue work, and acupressure to relieve foot pain, reduce tension, and promote healing throughout the entire body. The therapist uses thumbs, fingers, and knuckles to apply varying pressure to specific reflex zones, improving circulation, releasing toxins, and restoring balance. Often incorporating warm oils or foot soaks, this treatment is both deeply relaxing and therapeutically beneficial.",benefits:["Relieves foot pain and fatigue","Improves overall circulation","Reduces stress and tension","Promotes better sleep","Supports full-body healing","Enhances mobility"],duration:"30-60 minutes",intensity:"Moderate",bestFor:["Foot pain","Standing jobs","Relaxation","Reflexology benefits"]},{name:"Hands",shortDescription:"Therapeutic hand massage relieving tension, improving circulation, and addressing repetitive strain.",fullDescription:"Hand massage is a specialized treatment targeting the intricate muscles, tendons, and pressure points of the hands and wrists. This therapeutic session is particularly beneficial for those who use their hands extensively - office workers, musicians, craftspeople, or anyone experiencing hand fatigue or discomfort. Using a combination of gentle stretching, kneading, pressure point therapy, and joint mobilization, the therapist works to relieve carpal tunnel symptoms, arthritis pain, and repetitive strain injuries. Hand reflexology principles are often incorporated, as specific points on the hands correspond to various organs and body systems.",benefits:["Relieves hand and wrist pain","Reduces carpal tunnel symptoms","Improves hand flexibility","Enhances circulation","Reduces arthritis discomfort","Promotes relaxation"],duration:"20-45 minutes",intensity:"Light",bestFor:["Office workers","Arthritis","Carpal tunnel","Hand fatigue"]},{name:"Body Scrub",shortDescription:"Exfoliating body treatment using natural scrubs to remove dead skin, detoxify, and reveal smooth, glowing skin.",fullDescription:"Body scrub, also known as body polish or exfoliation treatment, is a luxurious spa therapy that revitalizes the skin from head to toe. Using natural exfoliants such as sea salt, sugar, coffee grounds, rice powder, or ground herbs mixed with nourishing oils, the therapist gently massages the scrub over the entire body in circular motions. This process removes dead skin cells, unclogs pores, stimulates circulation, and promotes cell renewal. After rinsing, the skin is left incredibly soft, smooth, and radiant. Many Indonesian spas use traditional ingredients like turmeric, lulur (yellow rice powder), or boreh (spice paste) for added therapeutic benefits.",benefits:["Removes dead skin cells","Improves skin texture and tone","Boosts circulation","Detoxifies skin","Reduces ingrown hairs","Prepares skin for tanning"],duration:"45-60 minutes",intensity:"Light",bestFor:["Skin rejuvenation","Dry skin","Pre-event prep","Spa experience"]},{name:"Facial",shortDescription:"Comprehensive facial treatment cleansing, nourishing, and rejuvenating skin for a healthy, radiant complexion.",fullDescription:"Facial massage and treatment is a multi-step skincare therapy designed to cleanse, exfoliate, nourish, and rejuvenate facial skin. A typical facial includes deep cleansing, steam treatment, exfoliation, extractions (if needed), facial massage using upward and outward strokes to improve circulation and tone facial muscles, application of serums and masks tailored to your skin type, and moisturization. The facial massage component promotes lymphatic drainage, reduces puffiness, smooths fine lines, and creates a healthy glow. This relaxing treatment not only improves skin health but also provides stress relief and promotes overall well-being.",benefits:["Deep cleanses pores","Improves skin texture","Reduces fine lines","Promotes even skin tone","Boosts circulation","Provides deep relaxation"],duration:"45-90 minutes",intensity:"Light",bestFor:["All skin types","Anti-aging","Acne treatment","Skin health"]}],Xf=a=>Bi.find(t=>t.name.toLowerCase()===a.toLowerCase()),Mp=[{name:"Anti-Aging Facial",shortDescription:"Advanced anti-aging treatment targeting fine lines, wrinkles, and age spots to rejuvenate and firm skin.",fullDescription:"Anti-aging facial is a comprehensive treatment combining cutting-edge techniques and premium products to combat visible signs of aging. This luxurious facial uses potent serums containing retinol, peptides, and antioxidants to stimulate collagen production, improve skin elasticity, and reduce fine lines and wrinkles. The treatment includes deep cleansing, gentle exfoliation, facial massage to promote circulation, application of specialized anti-aging masks, and intensive hydration. Regular sessions can significantly improve skin texture, tone, and firmness, restoring a more youthful, radiant appearance.",benefits:["Reduces fine lines and wrinkles","Firms and lifts skin","Improves skin elasticity","Evens skin tone","Boosts collagen production","Restores youthful glow"],duration:"75-90 minutes",intensity:"Moderate",bestFor:["Mature skin","Fine lines","Wrinkles","Loss of firmness"]},{name:"Collagen Facial",shortDescription:"Intensive collagen-boosting treatment that enhances skin elasticity and reduces wrinkles for firmer, younger-looking skin.",fullDescription:"Collagen facial is a specialized treatment designed to replenish and boost collagen levels in the skin. As we age, our natural collagen production decreases, leading to sagging skin and wrinkles. This facial uses collagen-rich masks, serums, and creams along with techniques that stimulate the skin's own collagen production. The treatment may include gentle microcurrent therapy or LED light therapy to enhance results. Collagen facials deeply hydrate, plump the skin, minimize fine lines, and restore elasticity, leaving your complexion looking firmer, smoother, and more youthful.",benefits:["Boosts skin elasticity","Reduces wrinkles and fine lines","Firms sagging skin","Deeply hydrates","Plumps skin","Improves skin texture"],duration:"60-90 minutes",intensity:"Moderate",bestFor:["Aging skin","Loss of firmness","Wrinkles","Dehydrated skin"]},{name:"Microdermabrasion",shortDescription:"Exfoliating treatment using fine crystals or diamond tips to remove dead skin cells and reveal smoother, brighter skin.",fullDescription:"Microdermabrasion is a non-invasive mechanical exfoliation technique that removes the outermost layer of dead skin cells using fine crystals or a diamond-tipped wand. This controlled exfoliation stimulates cell renewal, improves skin texture, and enhances product absorption. The treatment is effective for reducing fine lines, age spots, acne scars, and hyperpigmentation while promoting a more even skin tone. The procedure also stimulates blood flow and collagen production, resulting in fresher, healthier-looking skin. With no downtime, this treatment is perfect for those seeking immediate radiance and long-term skin improvement.",benefits:["Exfoliates dead skin cells","Reduces fine lines","Minimizes pore size","Fades age spots and hyperpigmentation","Improves skin texture","Enhances product absorption"],duration:"45-60 minutes",intensity:"Moderate",bestFor:["Uneven texture","Fine lines","Sun damage","Age spots"]},{name:"Chemical Peel",shortDescription:"Advanced exfoliation treatment using carefully selected acids to remove damaged outer layers for fresh, youthful skin.",fullDescription:"Chemical peel is a professional skincare treatment that uses various acids (such as glycolic, salicylic, lactic, or TCA) to chemically exfoliate the skin. Depending on the strength - light, medium, or deep - peels can address different concerns from mild texture issues to significant sun damage and scarring. The treatment removes damaged outer layers, stimulating new cell growth and collagen production. This results in smoother, more even-toned skin with reduced appearance of fine lines, acne scars, and hyperpigmentation. Post-treatment, skin may peel for several days as it reveals the fresh, rejuvenated complexion underneath.",benefits:["Removes damaged skin layers","Reduces acne scars","Evens skin tone","Minimizes fine lines","Treats hyperpigmentation","Stimulates cell renewal"],duration:"30-60 minutes",intensity:"Deep",bestFor:["Acne scars","Hyperpigmentation","Sun damage","Wrinkles"]},{name:"LED Light Therapy",shortDescription:"Non-invasive treatment using different colored LED lights to treat various skin concerns and promote healing.",fullDescription:"LED light therapy facial uses different wavelengths of light to penetrate the skin at varying depths, triggering specific cellular responses. Red light stimulates collagen production and reduces inflammation, blue light kills acne-causing bacteria, and near-infrared light promotes healing and reduces redness. This painless, non-invasive treatment has no downtime and is suitable for all skin types. Regular sessions can significantly improve skin texture, reduce breakouts, minimize fine lines, and promote overall skin health. Often combined with other facial treatments, LED therapy enhances results and accelerates healing.",benefits:["Reduces acne and breakouts","Stimulates collagen production","Minimizes inflammation","Improves skin tone","Accelerates healing","No downtime"],duration:"30-45 minutes",intensity:"Gentle",bestFor:["Acne","Anti-aging","Redness","All skin types"]},{name:"Hydrating Facial",shortDescription:"Intensive moisture treatment for dry, dehydrated skin leaving it plump, supple, and radiant.",fullDescription:"Hydrating facial is a deeply moisturizing treatment specifically designed for dry, dehydrated, or dull skin. This luxurious facial uses hydrating serums rich in hyaluronic acid, glycerin, and vitamins to replenish moisture levels and restore the skin's natural barrier. The treatment typically includes gentle cleansing, light exfoliation to remove dry patches, a hydrating massage to boost circulation, and application of intensive moisture masks. The result is plump, dewy skin with improved elasticity and a healthy glow. Perfect for all ages and particularly beneficial in dry climates or after sun exposure.",benefits:["Deep moisture replenishment","Plumps and softens skin","Reduces dryness and flakiness","Restores skin barrier","Improves elasticity","Creates dewy glow"],duration:"60-75 minutes",intensity:"Gentle",bestFor:["Dry skin","Dehydrated skin","Tight skin","Dull complexion"]},{name:"Brightening Facial",shortDescription:"Illuminating treatment that reduces dark spots, evens skin tone, and reveals a luminous, radiant complexion.",fullDescription:"Brightening facial is a specialized treatment targeting hyperpigmentation, dark spots, and uneven skin tone. Using powerful ingredients like vitamin C, kojic acid, licorice extract, and niacinamide, this facial inhibits melanin production while gently exfoliating to reveal brighter skin. The treatment includes deep cleansing, enzymatic or chemical exfoliation, brightening serums and masks, and protective antioxidants. Regular sessions can fade sun spots, age spots, and post-inflammatory hyperpigmentation while preventing new discoloration. The result is a more even, luminous complexion with a healthy, radiant glow.",benefits:["Reduces dark spots and hyperpigmentation","Evens skin tone","Adds luminous radiance","Prevents future discoloration","Improves overall complexion","Boosts skin clarity"],duration:"60-75 minutes",intensity:"Moderate",bestFor:["Dark spots","Uneven tone","Sun damage","Dull skin"]},{name:"Acne Treatment Facial",shortDescription:"Deep cleansing treatment specifically targeting breakouts, clearing pores, and preventing future acne.",fullDescription:"Acne treatment facial is a comprehensive therapy designed to address active breakouts, congested pores, and acne-prone skin. This clinical treatment begins with deep cleansing to remove excess oil and impurities, followed by gentle exfoliation to unclog pores. Steam softens blackheads and whiteheads for safe extraction, performed by trained professionals. Antibacterial and anti-inflammatory treatments including salicylic acid, benzoyl peroxide, or tea tree oil are applied to kill acne-causing bacteria and reduce inflammation. A soothing mask calms redness and irritation, while final products help regulate oil production and prevent future breakouts.",benefits:["Clears active breakouts","Unclogs pores","Reduces inflammation and redness","Controls excess oil","Prevents future acne","Fades acne scars"],duration:"60-75 minutes",intensity:"Moderate",bestFor:["Oily skin","Active acne","Clogged pores","Acne-prone skin"]},{name:"Deep Cleansing Facial",shortDescription:"Thorough purifying treatment that cleanses pores, removes impurities, and refreshes congested skin.",fullDescription:"Deep cleansing facial is a fundamental skincare treatment that thoroughly purifies the skin by removing dirt, oil, makeup residue, and environmental pollutants that accumulate in pores. This essential treatment includes double cleansing, steam to open pores, gentle exfoliation to remove dead skin cells, professional extractions to clear blackheads and congestion, and a purifying mask to draw out impurities. The facial concludes with toner, serum, and moisturizer to balance and protect the skin. Ideal for all skin types, this treatment leaves skin feeling fresh, clean, and rejuvenated while preventing breakouts and maintaining skin health.",benefits:["Deeply cleanses pores","Removes blackheads and congestion","Eliminates impurities","Refreshes skin","Prevents breakouts","Balances oil production"],duration:"60 minutes",intensity:"Moderate",bestFor:["Congested skin","Blackheads","Oily skin","Urban environment"]},{name:"Sensitive Skin Facial",shortDescription:"Gentle, soothing treatment specially formulated for delicate, reactive, and easily irritated skin.",fullDescription:"Sensitive skin facial is a carefully designed treatment using gentle, hypoallergenic products and techniques to care for delicate, reactive skin. This calming facial avoids harsh ingredients, strong acids, and aggressive techniques that could trigger irritation. Instead, it uses mild cleansers, soothing ingredients like chamomile, aloe vera, and calendula, and cooling masks to reduce redness and inflammation. The gentle massage promotes circulation without causing stress to the skin. This nurturing treatment strengthens the skin barrier, reduces sensitivity over time, and leaves skin feeling comfortable, calm, and nourished without any irritation.",benefits:["Calms irritation and redness","Strengthens skin barrier","Reduces sensitivity","Gentle nourishment","Soothes inflammation","No harsh ingredients"],duration:"60 minutes",intensity:"Gentle",bestFor:["Sensitive skin","Reactive skin","Rosacea","Easily irritated skin"]},{name:"Oxygen Facial",shortDescription:"Revitalizing treatment infusing pure oxygen for instant glow, plump skin, and enhanced radiance.",fullDescription:"Oxygen facial is an innovative treatment that uses pressurized oxygen to deliver vitamins, minerals, and botanical extracts deep into the skin. This infusion of pure oxygen and nourishing serums hydrates, plumps, and revitalizes the skin instantly. The treatment stimulates cellular respiration, boosts collagen production, and accelerates cell turnover while providing powerful antioxidant protection. Oxygen facials are particularly popular before special events as they create an immediate luminous glow with no downtime. The treatment is gentle yet effective for all skin types, detoxifying the skin while promoting a healthy, radiant complexion.",benefits:["Instant luminous glow","Deeply hydrates","Plumps fine lines","Boosts circulation","Detoxifies skin","Enhances product absorption"],duration:"45-60 minutes",intensity:"Gentle",bestFor:["Dull skin","Special events","All skin types","Pre-event glow"]},{name:"Gold Facial",shortDescription:"Luxurious treatment using 24K gold particles to brighten, firm, and rejuvenate skin with opulent radiance.",fullDescription:"Gold facial is an indulgent luxury treatment incorporating 24-karat gold particles or gold-infused products for their remarkable anti-aging and skin-enhancing properties. Gold has been used in skincare for centuries due to its ability to improve blood circulation, stimulate cellular renewal, and provide antioxidant protection. This opulent facial includes gold-enriched cleansers, serums, masks, and massage techniques that help firm skin, reduce fine lines, and create a luminous, radiant glow. The treatment is anti-inflammatory, improves skin elasticity, and leaves the complexion looking healthy, bright, and rejuvenated with a golden goddess glow.",benefits:["Firms and lifts skin","Reduces fine lines","Brightens complexion","Improves elasticity","Provides antioxidant protection","Creates luxurious glow"],duration:"75-90 minutes",intensity:"Light",bestFor:["Special occasions","Anti-aging","Dull skin","Luxury treatment"]},{name:"Vitamin C Facial",shortDescription:"Powerful antioxidant treatment for brightening, protecting, and rejuvenating skin with vitamin C.",fullDescription:"Vitamin C facial is a potent antioxidant treatment utilizing high concentrations of vitamin C (ascorbic acid) to brighten, protect, and rejuvenate the skin. Vitamin C is essential for collagen synthesis, making it a powerful anti-aging ingredient. This facial neutralizes free radicals from sun exposure and pollution, fades hyperpigmentation and sun spots, evens skin tone, and boosts radiance. The treatment typically includes vitamin C-infused cleansers, exfoliants, serums, and masks, often combined with other antioxidants like vitamin E and ferulic acid for enhanced effectiveness. Regular treatments result in brighter, more even-toned, protected, and youthful-looking skin.",benefits:["Brightens skin tone","Fades dark spots","Boosts collagen production","Provides antioxidant protection","Evens complexion","Protects against environmental damage"],duration:"60 minutes",intensity:"Moderate",bestFor:["Dull skin","Sun damage","Uneven tone","Anti-aging"]},{name:"Organic/Natural Facial",shortDescription:"Pure, eco-friendly treatment using only natural, chemical-free ingredients for gentle, effective skincare.",fullDescription:"Organic/natural facial is a wholesome treatment using only certified organic, natural, and plant-based ingredients free from synthetic chemicals, parabens, sulfates, and artificial fragrances. This eco-conscious facial harnesses the power of botanical extracts, essential oils, natural clays, and fruit enzymes to cleanse, nourish, and rejuvenate the skin. Each product is carefully selected for its purity and efficacy, providing gentle yet effective skincare suitable for all skin types, especially sensitive skin. This treatment not only benefits your skin but also supports environmental sustainability, offering a natural path to healthy, beautiful skin without harsh chemicals.",benefits:["Chemical-free skincare","Gentle and nourishing","Suitable for sensitive skin","Environmentally friendly","Rich in natural vitamins","No harsh ingredients"],duration:"60-75 minutes",intensity:"Gentle",bestFor:["Sensitive skin","Natural beauty","Eco-conscious","Chemical sensitivity"]},{name:"Men's Facial",shortDescription:"Tailored facial treatment addressing men's specific skin concerns including oil control and shaving irritation.",fullDescription:"Men's facial is specifically designed to address the unique skincare needs of male skin, which tends to be thicker, oilier, and more prone to irritation from daily shaving. This targeted treatment includes deep cleansing to remove excess oil and impurities, exfoliation to prevent ingrown hairs, steam and extractions to clear congested pores, and a purifying mask. Special attention is given to the beard area and neck to soothe shaving irritation and razor burn. The facial concludes with products that control oil, minimize pores, and protect against environmental damage. This treatment helps men maintain healthy, clear, well-groomed skin.",benefits:["Deep pore cleansing","Controls excess oil","Prevents ingrown hairs","Soothes shaving irritation","Reduces breakouts","Refreshes and invigorates"],duration:"60 minutes",intensity:"Moderate",bestFor:["Men's skin","Oily skin","Shaving irritation","Congested pores"]},{name:"Lulur Facial",shortDescription:"Traditional Indonesian beauty treatment using turmeric and rice powder for glowing, radiant skin.",fullDescription:"Lulur facial is an authentic Indonesian beauty ritual that has been used by Javanese royalty for centuries. This traditional treatment uses a blend of finely ground rice, turmeric, sandalwood, and aromatic spices to exfoliate, brighten, and nourish the skin. The golden paste is gently massaged onto the face, providing gentle exfoliation while the turmeric's anti-inflammatory and brightening properties work their magic. After the paste is removed, a cooling yogurt mask soothes and hydrates the skin. This time-honored treatment leaves skin incredibly smooth, bright, and glowing with a healthy radiance, embodying Indonesia's rich wellness heritage.",benefits:["Natural skin brightening","Gentle exfoliation","Anti-inflammatory benefits","Improves skin tone","Traditional healing","Creates golden glow"],duration:"60-75 minutes",intensity:"Gentle",bestFor:["All skin types","Dull skin","Cultural experience","Natural beauty"]},{name:"Javanese Facial",shortDescription:"Ancient Indonesian beauty ritual combining traditional herbs, massage, and healing techniques for holistic skin wellness.",fullDescription:"Javanese facial is an ancient Indonesian healing and beauty treatment that combines herbal remedies, gentle massage, and spiritual wellness practices. This holistic facial uses traditional Indonesian medicinal herbs, flowers, and spices known for their healing and beautifying properties. The treatment includes cleansing with natural ingredients, gentle facial massage using techniques passed down through generations, application of herbal masks made from freshly ground ingredients, and aromatherapy with Indonesian essential oils. This deeply relaxing and culturally rich treatment not only improves skin health but also promotes inner peace and spiritual balance, offering a complete mind-body-skin experience.",benefits:["Holistic skin wellness","Natural herbal healing","Promotes relaxation","Improves circulation","Cultural authenticity","Balances mind and body"],duration:"75-90 minutes",intensity:"Gentle",bestFor:["Holistic wellness","Stress relief","Cultural experience","Sensitive skin"]},{name:"Herbal Facial",shortDescription:"Natural healing treatment using medicinal herbs and botanical extracts for rejuvenation and skin health.",fullDescription:"Herbal facial is a therapeutic treatment harnessing the healing power of medicinal herbs, plants, and botanical extracts. This natural approach to skincare uses fresh or dried herbs specifically selected for their individual skin benefits - chamomile for soothing, lavender for calming, green tea for antioxidants, rosemary for stimulation, and many others. The treatment includes herbal steam to open pores and allow botanical essences to penetrate deeply, application of herbal-infused products, and fresh herbal masks tailored to your skin's needs. This gentle yet effective treatment provides vitamin-rich nourishment, healing properties, and aromatic therapy for complete skin wellness.",benefits:["Natural healing properties","Rich in antioxidants","Soothes and calms","Addresses specific concerns","Aromatherapy benefits","Chemical-free treatment"],duration:"60-75 minutes",intensity:"Gentle",bestFor:["Natural skincare","Sensitive skin","Stressed skin","Holistic health"]}],Zf=a=>Mp.find(t=>t.name.toLowerCase()===a.toLowerCase()),ey=[{category:"Basic Services",types:["Traditional","Body Scrub","Facial","Hands","Feet"]},{category:"Western Massages",types:["Swedish Massage","Deep Tissue Massage","Sports Massage","Hot Stone Massage","Aromatherapy Massage"]},{category:"Eastern & Indonesian Massages",types:["Balinese Massage","Javanese Massage","Thai Massage","Shiatsu Massage","Reflexology","Acupressure","Lomi Lomi Massage"]},{category:"Traditional Indonesian Techniques",types:["Kerokan (Coin Rub)","Jamu Massage","Scraping","Cupping"]},{category:"Specialty Massages",types:["Prenatal Massage","Lymphatic Massage","Indian Head Massage","Abdominal Acupressure","Vitality Massage","Sprain"]}],Rp=[{name:"Swedish Massage",imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20indonesia.png?updatedAt=1759648341961"},{name:"Deep Tissue Massage",imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20indonesia%20bali.png?updatedAt=1759648529103"},{name:"Sports Massage",imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20indonesia%20solo%20indocountry.png?updatedAt=1759650205320"},{name:"Hot Stone Massage",imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20indonesia%20solo%20indo.png?updatedAt=1759649853222"},{name:"Aromatherapy Massage",imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20indonesia%20solo.png?updatedAt=1759649537508"},{name:"Balinese Massage",imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20indonesia%20solo%20indocountry.png?updatedAt=1759650205320"},{name:"Javanese Massage",imageUrl:"https://ik.imagekit.io/7grri5v7d/body%20scrub%20indonisea.png?updatedAt=1759650812089"},{name:"Thai Massage",imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20indonesia%20jogja.png?updatedAt=1759649265005"},{name:"Shiatsu Massage",imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20tables.png?updatedAt=1761608019801"},{name:"Reflexology",imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20indonesia%20balis.png?updatedAt=1759648929022"},{name:"Acupressure",imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20tables.png?updatedAt=1761608423366"},{name:"Lomi Lomi Massage",imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20image%206.png?updatedAt=1760187126997"},{name:"Kerokan (Coin Rub)",imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20indonesia%20solo%20indocountrys.png?updatedAt=1759650484472"},{name:"Jamu Massage",imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20jobs.png?updatedAt=1761571942696"},{name:"Prenatal Massage",imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20table.png?updatedAt=1761607910862"},{name:"Lymphatic Massage",imageUrl:"https://ik.imagekit.io/7grri5v7d/massages.png?updatedAt=1761607624991"},{name:"Indian Head Massage",imageUrl:"https://ik.imagekit.io/7grri5v7d/body%20scrub%20indonisead.png?updatedAt=1759651049627"},{name:"Abdominal Acupressure",imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20tables.png?updatedAt=1761608423366"},{name:"Vitality Massage",imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20image%206.png?updatedAt=1760187126997"},{name:"Feet",imageUrl:"https://ik.imagekit.io/7grri5v7d/foot%20massage.png?updatedAt=1767211778688"},{name:"Hands",imageUrl:"https://ik.imagekit.io/7grri5v7d/hand%20massage.png?updatedAt=1767211549476"},{name:"Facial",imageUrl:"https://ik.imagekit.io/7grri5v7d/facial%202.png?updatedAt=1766551253328"},{name:"Traditional",imageUrl:"https://ik.imagekit.io/7grri5v7d/massage%20deep%20tissue%20indoniseas.png?updatedAt=1762579867409"},{name:"Body Scrub",imageUrl:"https://ik.imagekit.io/7grri5v7d/body%20scrube.png"}],Xl=a=>{const t=Rp.find(n=>n.name.toLowerCase()===a.toLowerCase());return(t==null?void 0:t.imageUrl)||""},Bp=({className:a})=>e.jsx("svg",{className:a,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),Lp=({className:a})=>e.jsx("svg",{className:a,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),Zl=({massage:a,expanded:t,onToggleExpanded:n,showActionButtons:s=!1,onFindTherapists:i,onFindPlaces:r,onPopularityClick:l})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 max-w-full",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.image,alt:a.name,className:"w-full h-40 object-cover",loading:"lazy",onError:o=>{o.target.src="https://via.placeholder.com/400x200/f97316/FFFFFF?text="+encodeURIComponent(a.name)}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),e.jsx("h3",{className:"absolute bottom-3 left-3 text-white font-bold text-lg drop-shadow-lg",children:a.name}),e.jsxs("button",{onClick:o=>{o.stopPropagation(),l==null||l()},className:"absolute top-2 left-2 bg-black/40 backdrop-blur-md px-2 py-0.5 rounded-full border border-white/10 flex items-center gap-1 hover:bg-black/50 transition-colors cursor-pointer","aria-label":"".concat(a.popularity," stars"),children:[e.jsx(Bp,{className:"w-3.5 h-3.5 text-yellow-400"}),e.jsx("span",{className:"font-semibold text-white text-xs",children:a.popularity})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed mb-3",children:a.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 text-xs font-semibold rounded-full",children:a.duration}),e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-full",children:[a.intensity," Pressure"]})]}),a.fullDescription&&e.jsx("button",{onClick:o=>{o.stopPropagation(),n()},className:"text-orange-500 font-semibold text-sm hover:text-orange-600 transition-colors mb-3 flex items-center gap-1",children:t?e.jsxs(e.Fragment,{children:[e.jsx(qo,{className:"w-4 h-4"}),e.jsx("span",{children:"Read Less"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-4 h-4"}),e.jsx("span",{children:"Read More"})]})}),t&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-900 mb-2",children:["About ",a.name]}),e.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:a.fullDescription})]}),a.benefits&&a.benefits.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 mb-2",children:"Key Benefits"}),e.jsx("ul",{className:"space-y-1",children:a.benefits.map((o,c)=>e.jsxs("li",{className:"text-xs text-gray-600 flex items-start gap-2",children:[e.jsx("span",{className:"text-orange-500 mt-0.5",children:"‚úì"}),e.jsx("span",{children:o})]},c))})]}),a.bestFor&&a.bestFor.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 mb-2",children:"Best For"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.bestFor.map((o,c)=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:o},c))})]})]}),s&&e.jsxs("div",{className:"flex gap-3 text-xs mt-3 pt-3 border-t border-gray-100",children:[e.jsx("button",{onClick:o=>{o.stopPropagation(),i==null||i(a.name)},className:"flex items-center gap-2 text-orange-500 font-semibold hover:text-orange-600 transition-colors",children:"Find Therapists ‚Üí"}),e.jsx("div",{className:"flex-1"}),e.jsxs("button",{onClick:o=>{o.stopPropagation(),r==null||r(a.name)},className:"flex items-center gap-2 text-orange-500 font-semibold hover:text-orange-600 transition-colors",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-orange-100 rounded-full",children:e.jsx(Lp,{className:"w-4 h-4"})}),"Find Massage Places ‚Üí"]})]})]})]}),Vt={bodyFront:"https://ik.imagekit.io/7grri5v7d/body%20part%205.png?updatedAt=1770240547579",bodyBack:"https://ik.imagekit.io/7grri5v7d/body%20part%204.png?updatedAt=1770240670476",armHand:"https://ik.imagekit.io/7grri5v7d/body%20part%203.png?updatedAt=1770240730008",headFace:"https://ik.imagekit.io/7grri5v7d/body%20part%202.png?updatedAt=1770240801336",footCalf:"https://ik.imagekit.io/7grri5v7d/body%20part%201.png?updatedAt=1770240868167"},Op=({therapist:a})=>{const[t,n]=u.useState(!1),[s,i]=u.useState(null),[r,l]=u.useState(!1),[o,c]=u.useState({});g.debug("üîÑ TherapistServiceShowcase RENDER"),g.debug("   isMassageTypesOpen:",{isMassageTypesOpen:r}),g.debug("   Therapist ID:",{id:a.id||a.$id}),g.debug("   Therapist Name:",{name:a.name}),wa.useEffect(()=>(g.debug("üü¢ TherapistServiceShowcase MOUNTED"),()=>{g.debug("üî¥ TherapistServiceShowcase UNMOUNTED"),g.debug("   üö® If slider was open, unmount destroyed it!")}),[]),wa.useEffect(()=>{g.debug("üë§ Therapist prop changed"),g.debug("   This re-render could be the cause if it happens when slider opens")},[a]);const d=(D,j)=>{i({src:D,alt:j}),n(!0),document.body.style.overflow="auto"},m=()=>{n(!1),i(null),document.body.style.overflow="auto"},p=()=>{g.debug("‚úÖ openMassageTypes() called at",{timestamp:new Date().toISOString()}),l(!0),c({}),document.body.style.overflow="auto"},f=()=>{g.debug("üö® closeMassageTypes() called at",{timestamp:new Date().toISOString()}),l(!1),c({}),document.body.style.overflow="auto"},y=D=>{c(j=>({...j,[D]:!j[D]}))},I=[4.2,4.5,4.7,4.8],P=D=>I[D%I.length];return u.useEffect(()=>{const D=j=>{j.key==="Escape"&&(t&&m(),r&&f())};return window.addEventListener("keydown",D),()=>{window.removeEventListener("keydown",D)}},[t,r]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden mb-8",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Panduan Fokus & Sensitivitas Pijat"}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"Panduan visual ini memungkinkan Anda untuk berkomunikasi dengan jelas tentang preferensi pijat Anda kepada terapis. Dengan merujuk pada nama gambar dan titik-titik yang diberi nomor, Anda dapat menunjukkan area tertentu untuk difokuskan atau dihindari, memastikan pengalaman pijat yang personal, nyaman, dan efektif."}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'Anda cukup menyebutkan nama gambar dan nomor titik (misalnya, "Punggung Belakang ‚Äì Titik 6") untuk membimbing terapis.'}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 italic",children:"Panduan ini mendukung komunikasi tetapi tidak menggantikan diskusi verbal dengan terapis Anda."})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 min-h-[400px]",children:[e.jsxs("div",{className:"bg-gray-100 rounded-lg overflow-hidden cursor-pointer group relative h-full min-h-[400px]",onClick:()=>d(Vt.bodyFront,"Tubuh Depan - Titik referensi pijat"),children:[e.jsx("img",{src:Vt.bodyFront,alt:"Tubuh Depan - Panduan referensi pijat",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy",onError:D=>{D.target.src="https://via.placeholder.com/300x400/f3f4f6/374151?text=Tubuh+Depan"}}),e.jsx("div",{className:"absolute bottom-2 left-2 right-2 bg-black bg-opacity-60 text-white text-xs px-2 py-1 rounded",children:"Tubuh Depan"})]}),e.jsxs("div",{className:"bg-gray-100 rounded-lg overflow-hidden cursor-pointer group relative h-full min-h-[400px]",onClick:()=>d(Vt.bodyBack,"Punggung Belakang - Titik referensi pijat"),children:[e.jsx("img",{src:Vt.bodyBack,alt:"Punggung Belakang - Panduan referensi pijat",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy",onError:D=>{D.target.src="https://via.placeholder.com/300x400/f3f4f6/374151?text=Punggung+Belakang"}}),e.jsx("div",{className:"absolute bottom-2 left-2 right-2 bg-black bg-opacity-60 text-white text-xs px-2 py-1 rounded",children:"Punggung Belakang"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"aspect-[16/9] bg-gray-100 rounded-lg overflow-hidden cursor-pointer group relative",onClick:()=>d(Vt.armHand,"Lengan dan Tangan - Titik referensi pijat"),children:[e.jsx("img",{src:Vt.armHand,alt:"Lengan dan Tangan - Panduan referensi pijat",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy",onError:D=>{D.target.src="https://via.placeholder.com/400x225/f3f4f6/374151?text=Lengan+dan+Tangan"}}),e.jsx("div",{className:"absolute bottom-2 left-2 right-2 bg-black bg-opacity-60 text-white text-xs px-2 py-1 rounded",children:"Lengan dan Tangan"})]}),e.jsxs("div",{className:"aspect-[16/9] bg-gray-100 rounded-lg overflow-hidden cursor-pointer group relative",onClick:()=>d(Vt.headFace,"Kepala dan Wajah - Titik referensi pijat"),children:[e.jsx("img",{src:Vt.headFace,alt:"Kepala dan Wajah - Panduan referensi pijat",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy",onError:D=>{D.target.src="https://via.placeholder.com/400x225/f3f4f6/374151?text=Kepala+dan+Wajah"}}),e.jsx("div",{className:"absolute bottom-2 left-2 right-2 bg-black bg-opacity-60 text-white text-xs px-2 py-1 rounded",children:"Kepala dan Wajah"})]}),e.jsxs("div",{className:"aspect-[16/9] bg-gray-100 rounded-lg overflow-hidden cursor-pointer group relative",onClick:()=>d(Vt.footCalf,"Kaki dan Betis - Titik referensi pijat"),children:[e.jsx("img",{src:Vt.footCalf,alt:"Kaki dan Betis - Panduan referensi pijat",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy",onError:D=>{D.target.src="https://via.placeholder.com/400x225/f3f4f6/374151?text=Kaki+dan+Betis"}}),e.jsx("div",{className:"absolute bottom-2 left-2 right-2 bg-black bg-opacity-60 text-white text-xs px-2 py-1 rounded",children:"Kaki dan Betis"})]})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Klik gambar apa pun untuk melihat titik referensi detail ‚Ä¢ Gunakan panduan ini untuk mengkomunikasikan preferensi Anda dengan jelas"})})]}),e.jsx("div",{className:"px-4 py-3 border-t border-gray-100 bg-gray-50",children:e.jsxs("button",{onClick:p,className:"flex items-center justify-center gap-2 text-sm text-gray-700 hover:text-indigo-600 transition-colors mx-auto group",children:[e.jsx(is,{size:18,className:"text-gray-500 group-hover:text-indigo-600 transition-colors"}),e.jsx("span",{className:"font-medium",children:"Jenis Pijat Apa"})]})})]}),r&&e.jsxs("div",{className:"fixed inset-0 bg-white z-[9999] overflow-y-auto animate-slideUp",children:[e.jsx("button",{className:"fixed top-4 right-4 z-10 p-2 bg-orange-500 rounded-full shadow-lg hover:bg-orange-600 transition-colors",onClick:D=>{D.stopPropagation(),f()},"aria-label":"Close massage types",children:e.jsx(Qe,{size:24,strokeWidth:2,className:"text-black"})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-12 sm:px-6",onClick:D=>D.stopPropagation(),children:e.jsx("div",{className:"flex flex-col gap-4",children:Bi.map((D,j)=>{const E={name:D.name,description:D.shortDescription,fullDescription:D.fullDescription,benefits:D.benefits||[],duration:D.duration||"60-90 min",intensity:D.intensity||"Medium",bestFor:D.bestFor||[],image:Xl(D.name),popularity:P(j)};return e.jsx(Zl,{massage:E,expanded:o[E.name]||!1,onToggleExpanded:()=>y(E.name),showActionButtons:!1},E.name)})})})]}),t&&s&&e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-[9999] flex items-center justify-center p-4 animate-fadeIn",onClick:m,children:[e.jsx("button",{className:"absolute top-4 right-4 bg-white rounded-full p-2 shadow-lg hover:bg-orange-50 transition-colors z-[10000]",onClick:m,"aria-label":"Close lightbox",children:e.jsx(Qe,{size:32,strokeWidth:2,className:"text-orange-500"})}),e.jsx("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center",onClick:D=>D.stopPropagation(),children:e.jsx("img",{src:s.src,alt:s.alt,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl animate-scaleIn",onError:D=>{D.target.src="https://via.placeholder.com/800x600/f3f4f6/374141?text=Massage+Reference+Guide"}})})]}),e.jsx("style",{children:"\n                @keyframes fadeIn {\n                    from {\n                        opacity: 0;\n                    }\n                    to {\n                        opacity: 1;\n                    }\n                }\n\n                @keyframes scaleIn {\n                    from {\n                        opacity: 0;\n                        transform: scale(0.95);\n                    }\n                    to {\n                        opacity: 1;\n                        transform: scale(1);\n                    }\n                }\n\n                @keyframes slideUp {\n                    from {\n                        opacity: 0;\n                        transform: translateY(100%);\n                    }\n                    to {\n                        opacity: 1;\n                        transform: translateY(0);\n                    }\n                }\n\n                .animate-fadeIn {\n                    animation: fadeIn 0.2s ease-out;\n                }\n\n                .animate-scaleIn {\n                    animation: scaleIn 0.3s ease-out;\n                }\n\n                .animate-slideUp {\n                    animation: slideUp 0.3s ease-out;\n                }\n            "})]})},Co={id:{title:"{city} Therapist",subtitle:"Terapis Pijat Profesional | Layanan Panggilan Ke Rumah | Tersedia di {city}",keywords:"Pijat Panggilan, Terapis Profesional, Massage {city}, Spa di Rumah"},en:{title:"{city} Therapist",subtitle:"Professional Massage Therapist | Home Service Available | {city}",keywords:"Home Massage, Professional Therapist, Massage {city}, Spa at Home"}},_p=(a,t)=>{const s=(typeof t=="string"?t:(t==null?void 0:t.name)||(t==null?void 0:t.city)||"all").toLowerCase(),i=a.name.toLowerCase().replace(/\s+/g,""),r=a.businessType||a.portalType||"massage_therapist",l=a.providerType==="place",o={massage_therapist:["#pijatpanggilan".concat(s),"#terapispijat".concat(s),"#massage".concat(s),"#homeservicemassage","#pijatrumahan","#pijatwanita","#pijattradisional","#terappijatprofesional","#massagetherapy","#relaxation","#wellness","#indonesiamassage"],massage_place:["#spapijat".concat(s),"#massagespa".concat(s),"#pijat".concat(s),"#spamassage","#wellnesscenter","#massagecenter","#sparelaxation","#traditionalmassage","#hotstone","#aromatherapy","#deeptissue","#swedishmassage"],facial_clinic:["#facialclinic".concat(s),"#skintreatment".concat(s),"#dermatology".concat(s),"#medicalskincare","#cosmeticdermatology","#lasertherapy","#botox","#fillers","#skintightening","#pigmentation","#scartreatment","#professionalfacial"],hotel:["#hotelspa".concat(s),"#luxurymassage".concat(s),"#resort".concat(s),"#hotelmassage","#luxuryspa","#resortmassage","#vacationmassage","#sparetreat","#luxurywellness","#premiumspa","#hotelwellness","#spaluxury"],wellness_center:["#wellness".concat(s),"#holistichealing".concat(s),"#wellnesscenter".concat(s),"#holisticmassage","#wellnesstherapy","#mindandbody","#stressrelief","#naturalhealing","#therapeuticmassage","#bodyhealing","#wellnessretreat","#healthylifestyle"]};let c=o.massage_therapist;return r==="facial_clinic"||r==="facial_place"?c=o.facial_clinic:r==="massage_spa"||l&&r!=="facial_clinic"?c=o.massage_place:r==="hotel"?c=o.hotel:r==="wellness_center"&&(c=o.wellness_center),c.push("#".concat(i)),c.join(" ")},$p=({therapist:a,mode:t,customVerifiedBadge:n,shareCount:s,userLocation:i,showHeader:r=!1,showSEOFooter:l=!1,selectedCity:o,onRate:c,onQuickBookWithChat:d,onChatWithBusyTherapist:m,onShowRegisterPrompt:p,onIncrementAnalytics:f,onNavigate:y,isCustomerLoggedIn:I=!1,loggedInProviderId:P,t:D={},language:j="id"})=>{var $,H;const E=a.discountPercentage&&a.discountPercentage>0&&a.discountEndTime?{percentage:a.discountPercentage,expiresAt:new Date(a.discountEndTime)}:null,T=t==="shared"?"https://ik.imagekit.io/7grri5v7d/indastreet%20massage%20logo.png?updatedAt=1764533351258":"",x=Co[j]||Co.id,S=(typeof a.location=="string"?a.location:(($=a.location)==null?void 0:$.name)||((H=a.location)==null?void 0:H.city)||"a").split(" ")[0],C=S&&S.toUpperCase(),_="Professional massage therapy in ".concat(C," - ").concat(He(a.name).toUpperCase()," - Terapis pijat panggilan ").concat(C),L=x.title.replace("{city}",C),U=x.subtitle.replace(/{city}/g,C);return e.jsxs("div",{className:"bg-white",children:[t==="shared"&&e.jsx("div",{className:"w-full bg-white pt-0 pb-8 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:T,alt:_,className:"w-64 h-64 object-contain mx-auto",loading:"eager",fetchPriority:"high"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 uppercase",children:L}),e.jsx("p",{className:"text-base md:text-lg text-gray-700 uppercase",children:U}),e.jsx("p",{className:"text-lg font-semibold text-gray-800 uppercase",children:He(a.name)})]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsx(xp,{therapist:a,userLocation:i,onRate:c||(()=>{}),onBook:()=>{},onQuickBookWithChat:d,onChatWithBusyTherapist:m,onShowRegisterPrompt:p,isCustomerLoggedIn:I,onIncrementAnalytics:f||(()=>{}),loggedInProviderId:P,onNavigate:y,activeDiscount:E,t:D,hideJoinButton:t==="shared",isSharedProfile:t==="shared",selectedCity:o,customVerifiedBadge:n,shareCount:t==="shared"?s:void 0}),e.jsx(Op,{therapist:a}),e.jsx(Ep,{therapistId:a.id||a.$id,therapistName:He(a.name),isVerified:(()=>{const Y=a.bankName&&a.accountName&&a.accountNumber,ae=a.ktpPhotoUrl;return!!(a.isVerified||a.verifiedBadge||Y&&ae)})(),safePassStatus:a.hotelVillaSafePassStatus,verifiedDate:a.verifiedAt,mode:t,onViewAll:void 0,language:j}),e.jsx("div",{className:"mt-8",children:e.jsx(Cp,{location:a.location||"a",limit:5,providerId:a.id||a.$id,providerName:a.name,providerType:"therapist",providerImage:pl(a),onNavigate:y})}),e.jsx("div",{className:"mt-8",children:e.jsx(pg,{})}),t==="authenticated"&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-100 border border-gray-300 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-black mb-2 font-medium",children:[e.jsx(Ho,{className:"w-4 h-4 text-orange-500"}),(()=>{const Y=a.businessType||a.portalType||"massage_therapist";return Y==="facial_clinic"||Y==="facial_place"?"Facial Clinic Is Ranking On Google Search For:":Y==="massage_spa"||a.providerType==="place"?"Massage Spa Is Ranking On Google Search For:":Y==="hotel"?"Hotel Spa Is Ranking On Google Search For:":"Therapist Profile Is Ranking On Google Search For:"})()]}),e.jsx("div",{className:"text-sm text-gray-700 leading-relaxed",children:_p(a,S)})]})]})]})},Up={async getAllCities(){try{const a=h.collections.cities;if(!a){const s=[];return la.forEach(i=>{s.push(...i.cities)}),s}return(await K.listDocuments(h.databaseId,a)).documents.map(s=>{var m,p,f,y;const i=s.cityName||s.name||"",r=s.state||s.province||"";let l=0,o=0,c=s.coordinates;if(typeof c=="string")try{c=JSON.parse(c)}catch{c=null}Array.isArray(c)&&c.length>=2?(l=c[1],o=c[0]):c&&typeof c=="object"&&(l=(p=(m=c.lat)!=null?m:c.latitude)!=null?p:0,o=(y=(f=c.lng)!=null?f:c.longitude)!=null?y:0);let d=[];return Array.isArray(s.aliases)?d=s.aliases.map(I=>String(I).trim()).filter(Boolean):typeof s.aliases=="string"&&(d=s.aliases.split(",").map(I=>I.trim()).filter(Boolean)),{name:i,province:r,coordinates:{lat:l,lng:o},isMainCity:!!s.isMainCity,isTouristDestination:!!s.isTouristDestination,aliases:d}})}catch{const t=[];return la.forEach(n=>{t.push(...n.cities)}),t}},async getCitiesByCategory(){try{const a=await this.getAllCities(),t={};return a.forEach(s=>{let i="";s.province==="Bali"?i="üèùÔ∏è Bali - Tourist Destinations":s.province==="DKI Jakarta"||s.province==="West Java"||s.province==="Central Java"||s.province==="East Java"?i="üèôÔ∏è Java - Major Cities":s.isTouristDestination?i="üèñÔ∏è Popular Beach Destinations":i="üå¥ Other Indonesian Cities",t[i]||(t[i]=[]),t[i].push(s)}),Object.entries(t).map(([s,i])=>({category:s,cities:i}))}catch{return la}},async seedCitiesToAppwrite(){try{let a=0;for(const t of la)for(const n of t.cities)try{await K.createDocument(h.databaseId,h.collections.cities,"unique()",{name:n.name,province:n.province,category:t.category,coordinates:JSON.stringify(n.coordinates),isMainCity:n.isMainCity,isTouristDestination:n.isTouristDestination,aliases:n.aliases?n.aliases.join(", "):""}),a++}catch{}}catch(a){throw a}}},Fp=[{province:"Aceh",cities:["Banda Aceh","Lhokseumawe","Sabang","Subulussalam"],country:"Indonesia"},{province:"Bali",cities:["Denpasar","Canggu","Seminyak","Kuta","Ubud","Sanur","Nusa Dua","Jimbaran"],country:"Indonesia"},{province:"Bangka Belitung Islands",cities:["Pangkalpinang"],country:"Indonesia"},{province:"Banten",cities:["Cilegon","Serang","Tangerang","South Tangerang"],country:"Indonesia"},{province:"Bengkulu",cities:["Bengkulu"],country:"Indonesia"},{province:"Central Java",cities:["Magelang","Pekalongan","Salatiga","Semarang","Surakarta (Solo)","Tegal"],country:"Indonesia"},{province:"Central Kalimantan",cities:["Palangka Raya"],country:"Indonesia"},{province:"Central Papua",cities:["Nabire"],country:"Indonesia"},{province:"Central Sulawesi",cities:["Palu"],country:"Indonesia"},{province:"East Java",cities:["Banyuwangi","Blitar","Jember","Kediri","Madiun","Malang","Mojokerto","Pasuruan","Probolinggo","Surabaya"],country:"Indonesia"},{province:"East Kalimantan",cities:["Balikpapan","Samarinda"],country:"Indonesia"},{province:"East Nusa Tenggara",cities:["Kupang"],country:"Indonesia"},{province:"Gorontalo",cities:["Gorontalo"],country:"Indonesia"},{province:"Highland Papua",cities:["Wamena"],country:"Indonesia"},{province:"Jakarta (Special Capital Region)",cities:["Jakarta"],country:"Indonesia"},{province:"Jambi",cities:["Jambi"],country:"Indonesia"},{province:"Lampung",cities:["Bandar Lampung","Metro"],country:"Indonesia"},{province:"Maluku",cities:["Ambon","Tual"],country:"Indonesia"},{province:"North Kalimantan",cities:["Tarakan"],country:"Indonesia"},{province:"North Maluku",cities:["Ternate","Tidore Islands"],country:"Indonesia"},{province:"North Sulawesi",cities:["Bitung","Kotamobagu","Manado","Tomohon"],country:"Indonesia"},{province:"North Sumatra",cities:["Medan","Binjai","Gunungsitoli","Padang Sidempuan","Pematangsiantar","Sibolga","Tanjungbalai","Tebing Tinggi"],country:"Indonesia"},{province:"Papua",cities:["Jayapura"],country:"Indonesia"},{province:"Riau",cities:["Dumai","Pekanbaru"],country:"Indonesia"},{province:"Riau Islands",cities:["Batam","Tanjung Pinang"],country:"Indonesia"},{province:"South Kalimantan",cities:["Banjarbaru","Banjarmasin"],country:"Indonesia"},{province:"South Papua",cities:["Merauke"],country:"Indonesia"},{province:"South Sulawesi",cities:["Makassar","Palopo","Parepare"],country:"Indonesia"},{province:"South Sumatra",cities:["Lubuklinggau","Palembang","Pagar Alam","Prabumulih"],country:"Indonesia"},{province:"Southeast Sulawesi",cities:["Baubau","Kendari"],country:"Indonesia"},{province:"Southwest Papua",cities:["Sorong"],country:"Indonesia"},{province:"West Java",cities:["Bandung","Bekasi","Bogor","Cimahi","Cirebon","Depok","Sukabumi","Tasikmalaya"],country:"Indonesia"},{province:"West Kalimantan",cities:["Pontianak","Singkawang"],country:"Indonesia"},{province:"West Nusa Tenggara",cities:["Mataram"],country:"Indonesia"},{province:"West Papua",cities:["Manokwari"],country:"Indonesia"},{province:"West Sulawesi",cities:["Mamuju"],country:"Indonesia"},{province:"West Sumatra",cities:["Padang","Padang Panjang","Payakumbuh","Pariaman","Sawahlunto","Solok","Bukittinggi"],country:"Indonesia"},{province:"Special Region of Yogyakarta",cities:["Yogyakarta"],country:"Indonesia"},{province:"Metro Manila",cities:["Manila","Quezon City","Makati","Pasig","Taguig","Mandaluyong","Pasay","Para√±aque","Las Pi√±as","Muntinlupa","Caloocan","Malabon","Navotas","Valenzuela","Marikina","San Juan"],country:"Philippines"},{province:"Cebu",cities:["Cebu City","Mandaue","Lapu-Lapu","Talisay","Toledo","Carcar","Naga","Danao"],country:"Philippines"},{province:"Davao del Sur",cities:["Davao City","Digos"],country:"Philippines"},{province:"Aklan",cities:["Boracay","Kalibo"],country:"Philippines"},{province:"Palawan",cities:["Puerto Princesa","Coron","El Nido"],country:"Philippines"},{province:"Benguet",cities:["Baguio City"],country:"Philippines"},{province:"Iloilo",cities:["Iloilo City","Passi"],country:"Philippines"},{province:"Laguna",cities:["Calamba","San Pablo","Bi√±an","Santa Rosa","Cabuyao"],country:"Philippines"},{province:"Cavite",cities:["Bacoor","Dasmari√±as","Imus","Cavite City","Tagaytay"],country:"Philippines"},{province:"Bulacan",cities:["Malolos","Meycauayan","San Jose del Monte"],country:"Philippines"},{province:"Greater London",cities:["London","Westminster","Camden","Kensington","Chelsea","Islington","Hackney","Tower Hamlets","Newham","Barking and Dagenham","Redbridge","Havering","Bexley","Greenwich","Lewisham","Southwark","Lambeth","Wandsworth","Hammersmith and Fulham","Ealing","Hounslow","Richmond","Kingston","Merton","Sutton","Croydon","Bromley","Brent","Harrow","Hillingdon","Barnet","Enfield","Haringey","Waltham Forest"],country:"United Kingdom"},{province:"Greater Manchester",cities:["Manchester","Salford","Bolton","Bury","Oldham","Rochdale","Stockport","Tameside","Trafford","Wigan"],country:"United Kingdom"},{province:"West Midlands",cities:["Birmingham","Coventry","Wolverhampton","Solihull","Walsall","Dudley","Sandwell"],country:"United Kingdom"},{province:"Merseyside",cities:["Liverpool","Wirral","Sefton","St Helens","Knowsley"],country:"United Kingdom"},{province:"West Yorkshire",cities:["Leeds","Bradford","Wakefield","Huddersfield","Halifax"],country:"United Kingdom"},{province:"Scotland",cities:["Glasgow","Edinburgh","Aberdeen","Dundee","Inverness","Stirling","Perth"],country:"United Kingdom"},{province:"South West England",cities:["Bristol","Plymouth","Exeter","Bournemouth","Poole","Swindon"],country:"United Kingdom"},{province:"Tyne and Wear",cities:["Newcastle","Sunderland","Gateshead","South Shields"],country:"United Kingdom"},{province:"Wales",cities:["Cardiff","Swansea","Newport","Wrexham"],country:"United Kingdom"},{province:"East Sussex",cities:["Brighton","Eastbourne","Hastings"],country:"United Kingdom"},{province:"Oxfordshire",cities:["Oxford"],country:"United Kingdom"},{province:"Cambridgeshire",cities:["Cambridge","Peterborough"],country:"United Kingdom"},{province:"Nottinghamshire",cities:["Nottingham"],country:"United Kingdom"},{province:"South Yorkshire",cities:["Sheffield","Doncaster","Rotherham","Barnsley"],country:"United Kingdom"},{province:"New York",cities:["New York City","Manhattan","Brooklyn","Queens","Bronx","Staten Island","Buffalo","Rochester","Syracuse","Albany"],country:"United States"},{province:"California",cities:["Los Angeles","San Francisco","San Diego","San Jose","Sacramento","Oakland","Santa Monica","Beverly Hills","Long Beach","Anaheim","Pasadena","Riverside","Irvine","Fremont"],country:"United States"},{province:"Illinois",cities:["Chicago","Aurora","Naperville","Joliet","Rockford"],country:"United States"},{province:"Texas",cities:["Houston","San Antonio","Dallas","Austin","Fort Worth","El Paso","Arlington","Corpus Christi","Plano"],country:"United States"},{province:"Arizona",cities:["Phoenix","Tucson","Mesa","Chandler","Scottsdale","Glendale","Tempe"],country:"United States"},{province:"Pennsylvania",cities:["Philadelphia","Pittsburgh","Allentown","Erie"],country:"United States"},{province:"Washington",cities:["Seattle","Spokane","Tacoma","Vancouver","Bellevue"],country:"United States"},{province:"Colorado",cities:["Denver","Colorado Springs","Aurora","Fort Collins","Boulder"],country:"United States"},{province:"District of Columbia",cities:["Washington DC"],country:"United States"},{province:"Massachusetts",cities:["Boston","Worcester","Springfield","Cambridge","Lowell"],country:"United States"},{province:"Nevada",cities:["Las Vegas","Reno","Henderson"],country:"United States"},{province:"Florida",cities:["Miami","Orlando","Tampa","Jacksonville","Fort Lauderdale","St. Petersburg","Tallahassee","Cape Coral"],country:"United States"},{province:"Georgia",cities:["Atlanta","Augusta","Columbus","Savannah","Athens"],country:"United States"},{province:"Oregon",cities:["Portland","Eugene","Salem","Gresham"],country:"United States"},{province:"Tennessee",cities:["Nashville","Memphis","Knoxville","Chattanooga"],country:"United States"},{province:"Louisiana",cities:["New Orleans","Baton Rouge","Shreveport"],country:"United States"},{province:"New South Wales",cities:["Sydney","CBD Sydney","Bondi","Manly","Parramatta","Newcastle","Wollongong","Central Coast","Penrith","Liverpool","Blacktown","Sutherland","Randwick","North Sydney"],country:"Australia"},{province:"Victoria",cities:["Melbourne","CBD Melbourne","St Kilda","Fitzroy","Richmond","South Yarra","Carlton","Prahran","Geelong","Ballarat","Bendigo"],country:"Australia"},{province:"Queensland",cities:["Brisbane","Gold Coast","Cairns","Townsville","Sunshine Coast","Toowoomba","Mackay","Rockhampton"],country:"Australia"},{province:"Western Australia",cities:["Perth","Fremantle","Mandurah","Bunbury","Rockingham","Kalgoorlie"],country:"Australia"},{province:"South Australia",cities:["Adelaide","Mount Gambier","Whyalla","Murray Bridge"],country:"Australia"},{province:"Australian Capital Territory",cities:["Canberra"],country:"Australia"},{province:"Tasmania",cities:["Hobart","Launceston","Burnie","Devonport"],country:"Australia"},{province:"Northern Territory",cities:["Darwin","Alice Springs","Palmerston"],country:"Australia"},{province:"Berlin",cities:["Berlin","Mitte","Kreuzberg","Friedrichshain","Charlottenburg","Prenzlauer Berg","Neuk√∂lln","Tempelhof","Sch√∂neberg","Wedding"],country:"Germany"},{province:"Bavaria",cities:["Munich","Nuremberg","Augsburg","Regensburg","W√ºrzburg","Ingolstadt","Erlangen","F√ºrth"],country:"Germany"},{province:"Hamburg",cities:["Hamburg","Altona","Eimsb√ºttel","Wandsbek","Harburg"],country:"Germany"},{province:"Hesse",cities:["Frankfurt","Wiesbaden","Kassel","Darmstadt","Offenbach","Hanau"],country:"Germany"},{province:"North Rhine-Westphalia",cities:["Cologne","D√ºsseldorf","Dortmund","Essen","Duisburg","Bochum","Wuppertal","Bielefeld","Bonn","M√ºnster","M√∂nchengladbach","Gelsenkirchen","Aachen"],country:"Germany"},{province:"Baden-W√ºrttemberg",cities:["Stuttgart","Mannheim","Karlsruhe","Freiburg","Heidelberg","Ulm","Heilbronn","Pforzheim"],country:"Germany"},{province:"Saxony",cities:["Leipzig","Dresden","Chemnitz","Zwickau"],country:"Germany"},{province:"Lower Saxony",cities:["Hanover","Braunschweig","Oldenburg","Osnabr√ºck","Wolfsburg","G√∂ttingen"],country:"Germany"},{province:"Bremen",cities:["Bremen","Bremerhaven"],country:"Germany"}];async function Kp(a=5){try{const n=(await Sa.getTherapists({limit:1e3})).filter(r=>r.isCustomLocation&&r.customCity&&r.latitude&&r.longitude);if(n.length===0)return[];const s=new Map;n.forEach(r=>{const l=r.customCity.toLowerCase().trim();s.has(l)||s.set(l,[]),s.get(l).push(r)});const i=[];return s.forEach((r,l)=>{if(r.length>=a){let o=0,c=0,d=0;if(r.forEach(m=>{m.latitude&&m.longitude&&(o+=parseFloat(m.latitude),c+=parseFloat(m.longitude),d++)}),d>0){const m=o/d,p=c/d,f=r[0].customCity,y="custom-".concat(l.replace(/\s+/g,"-"));i.push({customCity:f,count:r.length,centerCoordinates:{lat:m,lng:p},locationId:y})}}}),i.sort((r,l)=>l.count-r.count),i}catch{return[]}}const Wp=({selectedCity:a,onCityChange:t,placeholder:n="Select City / Location",className:s="",label:i="City / Tourist Location",showLabel:r=!1,disabled:l=!1,includeAll:o=!0,onCoordinatesChange:c,country:d})=>{const[m,p]=u.useState(!1),[f,y]=u.useState(la),[I,P]=u.useState(!0),[D,j]=u.useState(""),[E,T]=u.useState([]),[x,A]=u.useState(!1),[S,C]=u.useState(!1),[_,L]=u.useState(!1),[U,$]=u.useState(!1),[H,Y]=u.useState(!1),[ae,F]=u.useState(!1),V=u.useRef(null),pe=u.useRef(null),he=u.useRef(null),[de,Te]=u.useState({top:0,left:0,width:0});u.useEffect(()=>{const q=la.flatMap(X=>X.cities).find(X=>X.locationId===a);q&&(A(!1),C(!1),L(!1),$(!1),Y(!1),F(!1),q.province==="Bali"?A(!0):q.province==="West Nusa Tenggara"?C(!0):q.province==="East Nusa Tenggara"?L(!0):["North Sumatra","South Sumatra","West Sumatra","Riau","Lampung","Aceh"].includes(q.province)?$(!0):["South Sulawesi","North Sulawesi","Southeast Sulawesi","Papua","West Papua","Maluku"].includes(q.province)?Y(!0):["Riau Islands","Bangka Belitung","East Kalimantan","DKI Jakarta"].includes(q.province)&&q.isTouristDestination&&F(!0))},[a]),u.useEffect(()=>{},[]),u.useEffect(()=>{(async()=>{try{g.debug("üèôÔ∏è Loading cities from Appwrite...");const q=await Up.getCitiesByCategory();y(q),g.debug("‚úÖ Cities loaded from Appwrite:",q.length,"categories"),g.debug("üìç Loading popular custom locations...");const X=await Kp(5);T(X),g.debug("‚úÖ Popular custom locations loaded:",X.length)}catch(q){g.error("‚ùå Failed to load cities, using static fallback:",q)}finally{P(!1)}})()},[]),u.useEffect(()=>{const R=q=>{const X=q.target,Q=!!V.current&&V.current.contains(X),te=!!he.current&&he.current.contains(X);!Q&&!te&&p(!1)};return document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[]),u.useEffect(()=>{const R=()=>{if(!pe.current)return;const q=pe.current.getBoundingClientRect(),X=q.width;let Q=q.left+window.scrollX;const te=q.bottom+window.scrollY,oe=window.scrollX+document.documentElement.clientWidth-X-8;Q>oe&&(Q=Math.max(window.scrollX+8,oe)),Te({top:te,left:Q,width:X})};if(m){R();const q=()=>R();return window.addEventListener("scroll",q,!0),window.addEventListener("resize",q),()=>{window.removeEventListener("scroll",q,!0),window.removeEventListener("resize",q)}}},[m]);const De=(R,q)=>{if(typeof window!="undefined"&&window.localStorage)try{window.localStorage.setItem("user_city_id",R),window.localStorage.setItem("user_city_name",q||R)}catch{}},we=R=>{if(typeof R=="string")De(R,R),t(R),c&&c(null);else if("customCity"in R)g.debug("üìç Popular custom location selected: ".concat(R.customCity," (").concat(R.count," therapists)")),De(R.locationId,R.customCity),t(R.locationId),c&&R.centerCoordinates&&c({lat:R.centerCoordinates.lat,lng:R.centerCoordinates.lng});else{if(!R.locationId){g.error("‚ùå City missing locationId:",R.name);return}De(R.locationId,R.name),g.debug("üéØ City selected: ".concat(R.name," ‚Üí locationId: ").concat(R.locationId)),t(R.locationId),c&&R.coordinates&&c({lat:R.coordinates.lat,lng:R.coordinates.lng})}p(!1),j("")},B=(()=>{let R=f;return d&&(R=f.map(q=>({...q,cities:q.cities.filter(X=>!!Fp.find(te=>te.cities.includes(X.name)&&te.country===d))})).filter(q=>q.cities.length>0)),D.trim()&&(R=R.map(q=>({...q,cities:q.cities.filter(X=>{var Q;return X.name.toLowerCase().includes(D.toLowerCase())||((Q=X.aliases)==null?void 0:Q.some(te=>te.toLowerCase().includes(D.toLowerCase())))})})).filter(q=>q.cities.length>0)),R})(),ne=()=>{if(a==="all")return n;if(a==="custom")return"üìç Enter Custom Location";const R=E.find(q=>q.locationId===a);if(R)return"üìç ".concat(R.customCity);for(const q of f){const X=q.cities.find(Q=>Q.locationId===a||Q.name.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-")===a||Q.name===a);if(X)return X.name}return a},v=()=>e.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-black transition-transform duration-200 pointer-events-none z-30 ".concat(m?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})});return e.jsxs("div",{className:s,ref:V,children:[r&&e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsxs("svg",{className:"w-5 h-5 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),i]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{type:"button",onClick:()=>{l||(g.debug("üîΩ Dropdown clicked, current isOpen:",m),p(!m))},disabled:l,ref:pe,className:"\n            w-full px-4 py-3.5 bg-white border-2 rounded-lg \n            text-sm text-center cursor-pointer focus:outline-none \n            disabled:bg-gray-100 disabled:cursor-not-allowed text-gray-900\n            transition-all duration-200\n            ".concat(l?"opacity-50 border-gray-200":"","\n            ").concat(m?"ring-2 ring-orange-400 border-orange-500":"border-orange-500 hover:border-orange-600","\n          "),children:ne()}),e.jsx(v,{}),m&&!l&&Fo.createPortal(e.jsxs("div",{ref:he,style:{position:"absolute",top:"".concat(de.top,"px"),left:"".concat(de.left,"px"),width:"".concat(de.width,"px"),zIndex:9999,backgroundColor:"#ffffff",color:"#1f2937",borderRadius:"12px",boxShadow:"0 12px 30px rgba(0,0,0,0.18)",padding:"8px 0"},className:"mt-1 max-h-60 overflow-y-auto",children:[o&&e.jsx("button",{type:"button",onClick:()=>we("all"),className:"\n                  w-full px-4 py-3 text-left text-sm transition-colors duration-150\n                  ".concat(a==="all"?"bg-orange-50 text-orange-700 font-medium":"text-gray-900 hover:bg-gray-50","\n                "),style:{padding:"12px 16px"},children:n}),I?e.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"Loading cities from Appwrite... üèôÔ∏è"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"sticky top-0 border-b-2 border-gray-200 p-3 z-10",style:{backgroundColor:"#ffffff"},children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"üîç Search location...",value:D,onChange:R=>j(R.target.value),className:"w-full px-3 py-2 pr-10 border-2 border-gray-300 rounded-lg text-sm focus:border-orange-500 focus:outline-none",style:{backgroundColor:"#ffffff",color:"#1f2937"},onClick:R=>R.stopPropagation(),onMouseDown:R=>R.stopPropagation()}),D&&e.jsx("button",{type:"button",onClick:R=>{R.stopPropagation(),j("")},className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 text-gray-400 hover:text-orange-500 hover:bg-orange-50 rounded-full transition-all duration-200",title:"Clear search",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),B.length===0?e.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:'No locations found. Try "Other Location" below.'}):B.map((R,q)=>{const Q=(te=>{switch(te){case"üèùÔ∏è Bali":return{expanded:x,setExpanded:A,icon:"üèñÔ∏è"};case"üåä Lombok & Gili":return{expanded:S,setExpanded:C,icon:"üèùÔ∏è"};case"ü¶é Flores & Komodo":return{expanded:_,setExpanded:L,icon:"ü¶é"};case"ü¶Ä Sumatra":return{expanded:U,setExpanded:$,icon:"üåã"};case"üèùÔ∏è Eastern Indonesia":return{expanded:H,setExpanded:Y,icon:"üå∫"};case"üèñÔ∏è Beach Destinations":return{expanded:ae,setExpanded:F,icon:"üèñÔ∏è"};default:return null}})(R.category);return e.jsx("div",{children:Q?e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:te=>{te.stopPropagation(),Q.setExpanded(!Q.expanded)},className:"w-full px-4 py-2 text-left text-sm font-semibold text-gray-700 bg-gray-50 border-b border-gray-100 hover:bg-gray-100 transition-colors duration-150 flex items-center justify-between",children:[e.jsx("span",{children:R.category}),e.jsx("svg",{className:"w-4 h-4 transition-transform duration-200 ".concat(Q.expanded?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),Q.expanded&&e.jsx("div",{className:"border-l-2 border-orange-200",children:R.cities.map((te,oe)=>e.jsxs("button",{type:"button",onClick:()=>we(te),className:"\n                                    w-full text-left text-sm transition-colors duration-150 pl-8\n                                    ".concat(a===(te.locationId||te.name.toLowerCase())?"bg-orange-100 text-orange-800 font-medium border-r-2 border-orange-500":"text-gray-700 hover:bg-gray-50","\n                                  "),style:{padding:"12px 24px 12px 32px"},children:[Q.icon," ",te.name]},"".concat(R.category,"-").concat(te.name,"-").concat(q,"-").concat(oe)))})]}):e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider bg-gray-50 border-b border-gray-100",children:R.category}),R.cities.map((te,oe)=>e.jsx("button",{type:"button",onClick:()=>we(te),className:"\n                                w-full text-left text-sm transition-colors duration-150\n                                ".concat(a===(te.locationId||te.name.toLowerCase())?"bg-orange-50 text-orange-700 font-medium":"text-gray-900 hover:bg-gray-50","\n                              "),style:{padding:"12px 16px"},children:te.name},"".concat(R.category,"-").concat(te.name,"-").concat(q,"-").concat(oe)))]})},"".concat(R.category,"-").concat(q))}),E.length>0&&e.jsxs("div",{className:"border-t-2 border-blue-200",children:[e.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider bg-blue-50 border-b border-blue-100",children:"üìç Popular Other Locations"}),E.map((R,q)=>e.jsx("button",{type:"button",onClick:()=>{we(R),p(!1)},className:"\n                          w-full px-4 py-2 text-left text-sm hover:bg-blue-50 transition-colors duration-150 border-b border-gray-100\n                          ".concat(a===R.locationId?"bg-blue-100 text-blue-800 font-medium":"text-gray-700","\n                        "),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-base",children:"üìç"}),e.jsx("span",{className:"font-medium",children:R.customCity})]}),e.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full",children:[R.count," therapist",R.count!==1?"s":""]})]})},"custom-".concat(R.locationId,"-").concat(q)))]}),e.jsxs("div",{className:"border-t-2 border-gray-200",children:[e.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider bg-orange-50 border-b border-orange-100",children:"üìç Other Location (Custom)"}),e.jsx("button",{type:"button",onClick:()=>{t("custom"),c&&c(null),p(!1)},className:"\n                      w-full px-4 py-3 text-left text-sm hover:bg-orange-50 transition-colors duration-150 border-b border-gray-100\n                      ".concat(a==="custom"?"bg-orange-100 text-orange-800 font-medium":"text-gray-700","\n                    "),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"üìç"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Enter Custom Location"}),e.jsx("div",{className:"text-xs text-gray-500",children:"For cities/areas not listed above"})]})]})}),e.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 bg-yellow-50 border-t border-yellow-100",children:"‚ö†Ô∏è GPS location required for custom locations"})]})]})]}),document.body)]})]})},qp=({therapist:a,onBack:t,userLocation:n,loggedInCustomer:s,loggedInProvider:i,onBook:r,onQuickBookWithChat:l,onChatWithBusyTherapist:o,onShowRegisterPrompt:c,onIncrementAnalytics:d,onNavigate:m,t:p,isSharedView:f=!1,onLanguageChange:y,language:I="id",selectedCity:P="all",onCityChange:D,therapists:j,places:E,onMassageJobsClick:T,onHotelPortalClick:x,onVillaPortalClick:A,onTherapistPortalClick:S,onMassagePlacePortalClick:C,onFacialPortalClick:_,onAgentPortalClick:L,onCustomerPortalClick:U,onAdminPortalClick:$,onTermsClick:H,onPrivacyClick:Y})=>{const[ae,F]=u.useState("home"),[V,pe]=u.useState(P),[he,de]=u.useState(!1);return a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50",children:[!f&&e.jsx(yg,{language:I,onLanguageChange:y,onMenuClick:()=>de(!0)}),!f&&he&&e.jsx(gg,{isHome:!1,isOpen:he,onClose:()=>de(!1),t:p||{},language:I||"id",onMassageJobsClick:T,onHotelPortalClick:x,onVillaPortalClick:A,onTherapistPortalClick:S,onMassagePlacePortalClick:C,onFacialPortalClick:_,onAgentPortalClick:L,onCustomerPortalClick:U,onAdminPortalClick:$,onNavigate:m,onTermsClick:H,onPrivacyClick:Y,onQRCodeClick:()=>m==null?void 0:m("qr-code"),therapists:j||[],places:E||[]}),f&&e.jsx("div",{className:"bg-white pt-6 pb-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/logo%20yoga.png?t=".concat(Date.now()),alt:"IndaStreet Massage Logo",className:"h-32 w-auto object-contain"})})}),e.jsx("div",{className:"bg-white border-b border-gray-100 pt-16",children:e.jsxs("div",{className:"px-3 sm:px-4 pb-3 max-w-6xl mx-auto",children:[n&&e.jsxs("div",{className:"bg-white flex flex-col items-center gap-0.5 pt-4 pb-3",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(fg,{autoPlay:!0}),e.jsxs("svg",{className:"w-4 h-4 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:V==="all"?"All Indonesia":V})]}),e.jsx("p",{className:"text-base font-semibold text-gray-600",children:"Indonesia's Massage Therapist Hub"})]}),e.jsxs("div",{className:"flex bg-gray-200 rounded-full p-1 max-w-md mx-auto",children:[e.jsxs("button",{onClick:()=>{F("home"),m==null||m("home")},className:"w-1/2 py-2.5 px-3 sm:px-4 rounded-full flex items-center justify-center gap-1.5 sm:gap-2 text-xs sm:text-sm font-semibold transition-colors duration-300 min-h-[44px] ".concat(ae==="home"?"bg-orange-500 text-white shadow":"text-gray-600"),children:[e.jsx(hg,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap overflow-hidden text-ellipsis",children:I==="id"?"Layanan Rumah":"Home Service"})]}),e.jsxs("button",{onClick:()=>{F("places"),m==null||m("home")},className:"w-1/2 py-2.5 px-3 sm:px-4 rounded-full flex items-center justify-center gap-1.5 sm:gap-2 text-xs sm:text-sm font-semibold transition-colors duration-300 min-h-[44px] ".concat(ae==="places"?"bg-orange-500 text-white shadow":"text-gray-600"),children:[e.jsx(Ko,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap overflow-hidden text-ellipsis",children:I==="id"?"Tempat Pijat":"Massage Places"})]})]}),e.jsxs("div",{className:"flex flex-row gap-2 items-center max-w-2xl mx-auto mt-4",children:[e.jsx("div",{className:"relative flex-1 min-w-0 max-w-[200px] sm:max-w-none z-20",children:e.jsx(Wp,{selectedCity:V,onCityChange:Te=>{pe(Te),D==null||D(Te)},placeholder:"üáÆüá© All Indonesia",includeAll:!0,showLabel:!1,className:"w-full"})}),e.jsx("div",{className:"flex justify-end flex-shrink-0",children:e.jsxs("button",{onClick:()=>m==null?void 0:m("facialProviders"),className:"px-4 py-2.5 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-semibold text-sm min-h-[44px] flex items-center justify-center gap-2 shadow-sm",title:I==="id"?"Facial Indonesia":"Facials Indonesia",children:[e.jsx(da,{className:"w-5 h-5"}),e.jsx("span",{children:"Facial"})]})})]})]})}),e.jsx($p,{therapist:a,mode:"authenticated",userLocation:n?{...n,address:n.address||"Unknown"}:null,showHeader:!1,showSEOFooter:f,selectedCity:V,onRate:()=>{},onQuickBookWithChat:l?()=>l(a):void 0,onChatWithBusyTherapist:()=>o==null?void 0:o(selectedTherapist),onShowRegisterPrompt:c,onIncrementAnalytics:Te=>d==null?void 0:d(a.id||a.$id,"therapist",Te),isCustomerLoggedIn:!!s,loggedInProviderId:i==null?void 0:i.id,onNavigate:m,t:p||{},language:I}),!f&&e.jsx("div",{className:"max-w-4xl mx-auto px-4",children:e.jsxs("div",{className:"mt-12 mb-6 flex flex-col items-center gap-2",children:[e.jsxs("div",{className:"font-bold text-lg",children:[e.jsx("span",{className:"text-black",children:"Inda"}),e.jsx("span",{className:"text-orange-500",children:"Street"})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 w-full",children:[e.jsx("h3",{className:"text-center text-lg font-bold text-gray-800 mb-4",children:"Quick Links"}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-1 max-w-2xl mx-auto",children:[e.jsx("button",{onClick:()=>m==null?void 0:m("home"),className:"px-4 py-2 text-black hover:text-orange-600 transition-colors text-sm font-medium",children:"Home"}),e.jsx("button",{onClick:()=>m==null?void 0:m("massage-types"),className:"px-4 py-2 text-black hover:text-orange-600 transition-colors text-sm font-medium",children:"Massage Types"}),e.jsx("button",{onClick:()=>m==null?void 0:m("facial-types"),className:"px-4 py-2 text-black hover:text-orange-600 transition-colors text-sm font-medium",children:"Facial Types"}),e.jsx("button",{onClick:()=>m==null?void 0:m("therapist-signup"),className:"px-4 py-2 text-black hover:text-orange-600 transition-colors text-sm font-medium",children:"Join as a Therapist Today"}),e.jsx("button",{onClick:()=>m==null?void 0:m("place-signup"),className:"px-4 py-2 text-black hover:text-orange-600 transition-colors text-sm font-medium",children:"Join Massage Place"}),e.jsx("button",{onClick:()=>m==null?void 0:m("about-us"),className:"px-4 py-2 text-black hover:text-orange-600 transition-colors text-sm font-medium",children:"About Us"}),e.jsx("button",{onClick:()=>m==null?void 0:m("contact-us"),className:"px-4 py-2 text-black hover:text-orange-600 transition-colors text-sm font-medium",children:"Contact Us"})]})]})]})})]}),e.jsx(Fl,{userId:"guest",userName:"Guest User",userRole:"customer"})]}):e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"‚ùå"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Component Load Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Failed to load page component. The component file may be missing or have a syntax error."}),e.jsx("button",{onClick:t,className:"bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Go Back"})]})})};qp.displayName="TherapistProfilePage";class Hp{constructor(){Z(this,"notificationsCollection",h.collections.notifications||"admin_notifications");Z(this,"commissionAuditCollection",h.collections.commissionAudit||"commission_audit")}async notifyNewCommission(t,n,s,i){let r;try{r=await Nn.createCommissionRecord(n.therapistId,n.therapistName,t.bookingId,t.bookingDate,t.scheduledDate,i.serviceAmount,s.customerName||"Customer","Massage Service",60)}catch{}const l={type:"new_commission",title:"üéØ NEW BOOKING COMMISSION - ".concat(t.bookingType.toUpperCase()),message:this.formatNewCommissionMessage(t,n,s,i),commissionId:(r==null?void 0:r.$id)||"pending",bookingId:t.bookingId,therapistId:n.therapistId,therapistName:n.therapistName,customerId:s.customerId,customerName:s.customerName,serviceAmount:i.serviceAmount,commissionAmount:i.commissionAmount,commissionRate:i.commissionRate,bookingType:t.bookingType,bookingDate:t.bookingDate,scheduledDate:t.scheduledDate,paymentDeadline:i.paymentDeadline,priority:"critical",read:!1,actionRequired:!0,actionUrl:"/admin/commissions",createdAt:new Date().toISOString(),notificationAttempts:1,lastNotificationAttempt:new Date().toISOString()};let o=null;for(let c=1;c<=3;c++)try{o=await K.createDocument(h.databaseId,this.notificationsCollection,se.unique(),{...l,notificationAttempts:c});break}catch(d){if(c===3)throw await this.createCommissionAuditLog({type:"notification_failure",bookingId:t.bookingId,therapistId:n.therapistId,error:d instanceof Error?d.message:"Unknown error",attempts:3,timestamp:new Date().toISOString()}),new Error("CRITICAL: Failed to notify admin of commission after 3 attempts: ".concat(d));await new Promise(m=>setTimeout(m,1e3*c))}return this.schedulePaymentReminder(o.$id,t.bookingId,n.therapistName,i.paymentDeadline),o}formatNewCommissionMessage(t,n,s,i){const r={book_now:"BOOK NOW (Immediate)",scheduled:"SCHEDULED BOOKING",order_now:"ORDER NOW (Express)"},o=new Date(i.paymentDeadline).toLocaleString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Asia/Jakarta"});return"üéØ NEW COMMISSION DUE - IMMEDIATE ATTENTION REQUIRED\n\nüìã BOOKING DETAILS:\n‚Ä¢ Booking ID: ".concat(t.bookingId,"\n‚Ä¢ Type: ").concat(r[t.bookingType]||t.bookingType,"\n‚Ä¢ Booking Date: ").concat(new Date(t.bookingDate).toLocaleString("id-ID"),"\n").concat(t.scheduledDate?"‚Ä¢ Scheduled Date: ".concat(new Date(t.scheduledDate).toLocaleString("id-ID")):"","\n\nüë®‚Äç‚öïÔ∏è THERAPIST:\n‚Ä¢ Name: ").concat(n.therapistName,"\n‚Ä¢ ID: ").concat(n.therapistId,"\n\nüë§ CUSTOMER:\n‚Ä¢ Name: ").concat(s.customerName||"Unknown","\n").concat(s.customerId?"‚Ä¢ ID: ".concat(s.customerId):"","\n\nüí∞ FINANCIAL:\n‚Ä¢ Service Amount: IDR ").concat(i.serviceAmount.toLocaleString(),"\n‚Ä¢ Commission (").concat(i.commissionRate,"%): IDR ").concat(i.commissionAmount.toLocaleString(),"\n‚Ä¢ Payment Deadline: ").concat(o," WIB\n\n‚ö†Ô∏è CRITICAL: Therapist must pay commission within 5 hours or account will be deactivated.\n\nüîó Action Required: Monitor payment status and verify proof when submitted.")}async schedulePaymentReminder(t,n,s,i){try{const r=new Date(i),l=new Date(r.getTime()-3600*1e3)}catch{}}async notifyPaymentProofUploaded(t,n,s){try{await K.createDocument(h.databaseId,this.notificationsCollection,se.unique(),{type:"payment_proof_uploaded",title:"üí≥ Payment Proof Uploaded - Verification Required",message:"".concat(s," has uploaded payment proof for booking ").concat(n,". Commission ID: ").concat(t,"\\n\\nAction Required: Verify payment proof in admin dashboard."),commissionId:t,bookingId:n,therapistName:s,priority:"high",read:!1,actionRequired:!0,actionUrl:"/admin/commissions/".concat(t),createdAt:new Date().toISOString(),notificationAttempts:1})}catch{}}async notifyPaymentOverdue(t,n,s,i){try{await K.createDocument(h.databaseId,this.notificationsCollection,se.unique(),{type:"payment_overdue",title:"üö® OVERDUE COMMISSION - Account Deactivated",message:"CRITICAL: ".concat(i," (").concat(s,") failed to pay commission for booking ").concat(n," within deadline.\\n\\nCommission ID: ").concat(t,"\\nAccount Status: DEACTIVATED\\n\\nAction: Account will remain deactivated until payment is verified."),commissionId:t,bookingId:n,therapistId:s,therapistName:i,priority:"critical",read:!1,actionRequired:!0,actionUrl:"/admin/therapists/".concat(s),createdAt:new Date().toISOString(),notificationAttempts:1})}catch{}}async createCommissionAuditLog(t){try{await K.createDocument(h.databaseId,this.commissionAuditCollection,se.unique(),{...t,severity:"critical",resolved:!1})}catch{}}async getUnreadNotifications(t=100){try{return(await K.listDocuments(h.databaseId,this.notificationsCollection,[])).documents}catch{return[]}}async markAsRead(t){try{await K.updateDocument(h.databaseId,this.notificationsCollection,t,{read:!0,readAt:new Date().toISOString()})}catch{}}}const Gp=new Hp,zp={zero:"0",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",nol:"0",satu:"1",dua:"2",tiga:"3",empat:"4",lima:"5",enam:"6",tujuh:"7",delapan:"8",sembilan:"9"},Vp=/[\w.+-]+@[\w-]+\.[\w.-]+/i,Yp=/https?:\/\/[\S]+|www\.[\S]+|wa\.me\/\S+|t\.me\/\S+|telegram\.me\/\S+/i,Po=/@(wa|whatsapp|telegram|line|instagram|tiktok|snapchat|contact|admin)\b/i,Jp=/(wa|whatsapp|line|telegram|contact|admin|instagram|tiktok)/i;function Qp(a){return a.toLowerCase().split(/\s+/).map(t=>zp[t]||"").join("")}function Xp(a){const t=a.toLowerCase(),n=[/whatsapp/i,/\bwa\b/i,/w\.a\./i,/whatapp/i,/whatsap/i,/wa\s*:\s*[\w\d\s\.\-]+/i,/whatsapp\s*:\s*[\w\d\s\.\-]+/i,/(contact|hubungi|kontak|telepon|call|sms)\s*(saya|kamu|kita)?/i];for(const c of n)if(c.test(t))return{isBlocked:!0,reason:"Sharing WhatsApp/contact details is not allowed. Use this chat only.",detectedPattern:"WhatsApp mention"};const s=[/\+?62[\s\-]?8\d{2,3}[\s\-]?\d{3,4}[\s\-]?\d{3,4}/g,/\b0?8\d{2}[\s\-]?\d{3,4}[\s\-]?\d{3,4}\b/g,/\b0?8\d{8,10}\b/g,/\+?\d{10,13}/g,/\d{3,4}[\s\-]\d{3,4}[\s\-]\d{3,4}/g];for(const c of s){const d=a.match(c);if(d){const m=d[0].replace(/\D/g,"");if(m.length>=8&&m.length<=15&&(m.startsWith("0")||m.startsWith("62")||m.startsWith("8")))return{isBlocked:!0,reason:"Phone numbers cannot be shared. Continue communicating here.",detectedPattern:"Phone digits"}}}const i=[/(wa|call|contact|hubungi|telepon|nomor).*?\d{4,}/i,/\d{4,}.*(wa|call|contact|hubungi|telepon)/i,/(zero|nol|o)[\s\-]?8[\s\-]?\d+/i];for(const c of i)if(c.test(a))return{isBlocked:!0,reason:"Sharing contact information (even disguised) is blocked.",detectedPattern:"Mixed format"};if(Qp(t).length>=8)return{isBlocked:!0,reason:"Phone numbers written as words are still considered contact info.",detectedPattern:"Text number format"};const o=a.replace(/\s+/g,"").match(/\d{8,}/g);if(o){for(const c of o)if(c.startsWith("0")||c.startsWith("62")||c.startsWith("8"))return{isBlocked:!0,reason:"Phone numbers (even with spaces) are blocked.",detectedPattern:"Spaced digits"}}return{isBlocked:!1}}function Zp(a){var r;const t=a.trim();if(!t)return{isBlocked:!1};const n=Xp(t);if(n.isBlocked)return{isBlocked:!0,type:"phone",reason:n.reason,detectedPattern:n.detectedPattern,excerpt:t};const s=t.match(Vp);if(s)return{isBlocked:!0,type:"email",reason:"Email addresses cannot be shared. Please stay inside this chat.",detectedPattern:"Email",excerpt:s[0]};const i=t.match(Yp);return i?{isBlocked:!0,type:"url",reason:"External URLs/handles are blocked to keep communication inside the app.",detectedPattern:"URL",excerpt:i[0]}:Po.test(t)?{isBlocked:!0,type:"url",reason:"External handles or contact shortcuts are not allowed.",detectedPattern:"Handle reference",excerpt:(r=t.match(Po))==null?void 0:r[0]}:Jp.test(t)&&t.length<30?{isBlocked:!0,type:"url",reason:"References to other contact methods are blocked.",detectedPattern:"Contact keyword",excerpt:t}:{isBlocked:!1}}const Do=({bankName:a,accountHolderName:t,accountNumber:n,size:s="medium"})=>{const i=r=>r.replace(/\s/g,"").replace(/(.{4})/g,"$1 ").trim();return e.jsx("div",{className:"w-full max-w-sm mx-auto",children:e.jsxs("div",{className:"relative w-full aspect-[1.6/1] rounded-2xl overflow-hidden shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500 via-orange-600 to-amber-600",children:e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white rounded-full blur-3xl -translate-y-16 translate-x-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-black rounded-full blur-3xl translate-y-12 -translate-x-12"})]})}),e.jsxs("div",{className:"relative h-full p-4 sm:p-5 flex flex-col justify-between text-white",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"flex flex-col",children:e.jsxs("h1",{className:"text-lg sm:text-xl font-bold tracking-tight",children:[e.jsx("span",{className:"text-white",children:"Inda"}),e.jsx("span",{className:"text-black",children:"Street"})]})}),e.jsx("div",{className:"w-8 h-6 sm:w-10 sm:h-7 rounded-md bg-gradient-to-br from-yellow-200 via-yellow-300 to-amber-400 shadow-md",children:e.jsx("div",{className:"w-full h-full grid grid-cols-4 grid-rows-3 gap-0.5 p-0.5",children:[...Array(12)].map((r,l)=>e.jsx("div",{className:"bg-yellow-600 rounded-sm opacity-30"},l))})})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e.jsx(Sc,{className:"w-3 h-3 text-white/80"}),e.jsx("span",{className:"text-[10px] sm:text-xs text-white/70 uppercase tracking-wider font-medium",children:"Bank"})]}),e.jsx("p",{className:"text-sm sm:text-base font-bold tracking-wide truncate",children:a||"Nama Bank"})]}),e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e.jsx(_t,{className:"w-3 h-3 text-white/80"}),e.jsx("span",{className:"text-[10px] sm:text-xs text-white/70 uppercase tracking-wider font-medium",children:"Nomor Rekening"})]}),e.jsx("p",{className:"text-base sm:text-lg font-mono font-bold tracking-widest",children:i(n)||"0000 0000 0000"})]}),e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e.jsx(Ut,{className:"w-3 h-3 text-white/80"}),e.jsx("span",{className:"text-[10px] sm:text-xs text-white/70 uppercase tracking-wider font-medium",children:"Nama Pemilik"})]}),e.jsx("p",{className:"text-sm sm:text-base font-bold tracking-wide uppercase truncate",children:t||"Nama Pemilik Rekening"})]})]})]})})},eh="https://syd.cloud.appwrite.io/v1",th="68f23b11000d25eb3664",hi=[5,10,15,20,25,30],fi=[7,14,30,60,90],ah={7:"1 week",14:"2 weeks",30:"1 month",60:"2 months",90:"3 months"},nh="sendReviewDiscount";async function sh(a){if(!hi.includes(a.discountPercentage))return{success:!1,error:"INVALID_PERCENTAGE",message:"Invalid discount percentage. Choose from: ".concat(hi.join(", "),"%")};if(!fi.includes(a.validityDays))return{success:!1,error:"INVALID_PERIOD",message:"Invalid validity period. Choose from: ".concat(fi.join(", ")," days")};try{const t=new ct().setEndpoint(eh).setProject(th),s=await new ss(t).createExecution(nh,JSON.stringify({reviewId:a.reviewId,providerId:a.providerId,providerType:a.providerType,providerName:a.providerName,userId:a.userId,userName:a.userName,discountPercentage:a.discountPercentage,validityDays:a.validityDays}),!1),i=JSON.parse(s.responseBody||"{}");return i.success?{success:!0,discountId:i.discountId,code:i.code,discountPercentage:i.discountPercentage,expiresAt:i.expiresAt,message:i.message}:{success:!1,error:i.error,message:i.message}}catch{return{success:!1,error:"NETWORK_ERROR",message:"Could not send discount. Please try again."}}}function ih(a){return new Date(Date.now()+a*24*60*60*1e3)}function rh(a){return ih(a).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}const oh=({isOpen:a,onClose:t,providerId:n,providerType:s,providerName:i,customerId:r,customerName:l,reviewId:o,onSuccess:c})=>{const[d,m]=u.useState(null),[p,f]=u.useState(null),[y,I]=u.useState(!1),[P,D]=u.useState(null);if(!a)return null;const j=async()=>{if(!(!d||!p)){I(!0),D(null);try{const T=await sh({reviewId:o||"promo_".concat(Date.now()),providerId:n,providerType:s,providerName:i,userId:r,userName:l,discountPercentage:d,validityDays:p});D({success:T.success,code:T.code,message:T.message||(T.success?"Discount code sent to ".concat(l,"!"):T.error||"Failed to send discount")}),T.success&&T.code&&(c==null||c(T.code,d),setTimeout(()=>{t()},3e3))}catch(T){g.error("Failed to send discount:",T),D({success:!1,message:"Network error. Please try again."})}finally{I(!1)}}},E=!!o;return e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-scale-in",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 px-6 py-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(Vs,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:E?"üéÅ Send Thank You Discount":"üéØ Send Promotional Discount"}),e.jsxs("p",{className:"text-sm text-orange-100",children:["To: ",l]})]})]}),e.jsx("button",{onClick:t,className:"w-8 h-8 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center transition-colors",children:e.jsx(Qe,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[P&&e.jsxs("div",{className:"p-4 rounded-xl flex items-start gap-3 ".concat(P.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:[P.success?e.jsx(Xt,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}):e.jsx(xn,{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold ".concat(P.success?"text-green-700":"text-red-700"),children:P.success?"Discount Sent!":"Failed"}),P.code&&e.jsxs("p",{className:"text-lg font-bold text-green-800 mt-1",children:["Code: ",P.code]}),e.jsx("p",{className:"text-sm mt-1 ".concat(P.success?"text-green-600":"text-red-600"),children:P.message})]})]}),!(P!=null&&P.success)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-3",children:[e.jsx(Ot,{className:"w-4 h-4 text-orange-500"}),"Select Discount Amount"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:hi.map(T=>e.jsxs("button",{onClick:()=>m(T),className:"py-3 px-4 rounded-xl border-2 font-bold text-lg transition-all ".concat(d===T?"bg-orange-500 border-orange-600 text-white shadow-lg scale-105":"bg-white border-gray-200 text-gray-700 hover:border-orange-300 hover:bg-orange-50"),children:[T,"%",e.jsx("span",{className:"block text-xs font-normal mt-0.5 opacity-80",children:T===30?"MAX":"OFF"})]},T))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-3",children:[e.jsx(We,{className:"w-4 h-4 text-orange-500"}),"Valid For"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:fi.map(T=>e.jsx("button",{onClick:()=>f(T),className:"py-3 px-3 rounded-xl border-2 font-semibold transition-all ".concat(p===T?"bg-amber-500 border-amber-600 text-white shadow-lg scale-105":"bg-white border-gray-200 text-gray-700 hover:border-amber-300 hover:bg-amber-50"),children:ah[T]},T))})]}),d&&p&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 border-2 border-orange-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(da,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-semibold text-orange-700",children:"Preview"})]}),e.jsxs("div",{className:"text-center py-3 bg-white rounded-lg shadow-sm",children:[e.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:[d,"% OFF"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Valid until ",rh(p)]})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Customer will receive this discount code in their chat"})]}),E&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-3 text-sm text-blue-700",children:[e.jsx("p",{className:"font-semibold",children:"üí° Tip:"}),e.jsx("p",{children:"Thank-you discounts encourage repeat bookings! The customer will see a special banner in their chat."})]})]})]}),!(P!=null&&P.success)&&e.jsx("div",{className:"px-6 pb-6",children:e.jsx("button",{onClick:j,disabled:!d||!p||y,className:"w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all ".concat(d&&p&&!y?"bg-gradient-to-r from-orange-500 to-amber-500 text-white hover:from-orange-600 hover:to-amber-600 shadow-lg hover:shadow-xl transform hover:scale-[1.02]":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ys,{className:"w-5 h-5"}),"Send Discount to ",l]})})}),(P==null?void 0:P.success)&&e.jsx("div",{className:"px-6 pb-6",children:e.jsx("button",{onClick:t,className:"w-full py-3 rounded-xl font-semibold text-gray-600 bg-gray-100 hover:bg-gray-200 transition-colors",children:"Close"})})]}),e.jsx("style",{children:"\n        @keyframes scaleIn {\n          from {\n            transform: scale(0.9);\n            opacity: 0;\n          }\n          to {\n            transform: scale(1);\n            opacity: 1;\n          }\n        }\n        .animate-scale-in {\n          animation: scaleIn 0.2s ease-out forwards;\n        }\n      "})]})},lh="https://syd.cloud.appwrite.io/v1",ch="68f23b11000d25eb3664",ya=jt.CHAT_FLAGS,Fs=5;async function dh(a){if(!a||a==="unknown")return"";const n=new TextEncoder().encode(a+"chat-flag-salt-2026"),s=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(s)).map(r=>r.toString(16).padStart(2,"0")).join("")}async function uh(){try{return"client-side-ip"}catch{return"unknown"}}function mh(a){var s,i,r;return(s=a.chatRoomId)!=null&&s.trim()?(i=a.reporterId)!=null&&i.trim()?(r=a.reportedUserId)!=null&&r.trim()?a.reason?a.reporterId===a.reportedUserId?"Cannot report yourself":a.message&&a.message.length>500?"Message too long (max 500 characters)":["inappropriate_behavior","harassment_abuse","payment_issue","scam_fraud","therapist_no_show","asked_for_contact_number","shared_contact_number","other"].includes(a.reason)?["user","therapist"].includes(a.reporterRole)?null:"Invalid reporter role":"Invalid reason":"Reason is required":"Reported user ID is required":"Reporter ID is required":"Chat room ID is required"}class gh{constructor(){Z(this,"client");Z(this,"databases");this.client=new ct().setEndpoint(lh).setProject(ch),this.databases=new Zt(this.client)}isFeatureEnabled(){return!(!ya||ya==="")}async submitFlag(t){var s,i,r,l;if(!this.isFeatureEnabled())return{success:!1,error:"FEATURE_DISABLED",message:"Chat reporting feature is currently disabled."};const n=mh(t);if(n)return{success:!1,error:"INVALID_DATA",message:n};try{if((await this.databases.listDocuments(Ba,ya,[b.equal("chatRoomId",t.chatRoomId),b.equal("reporterId",t.reporterId),b.limit(1)])).total>0)return{success:!1,error:"DUPLICATE_REPORT",message:"You have already reported this chat."};const c=new Date;if(c.setHours(0,0,0,0),(await this.databases.listDocuments(Ba,ya,[b.equal("reporterId",t.reporterId),b.greaterThanEqual("$createdAt",c.toISOString()),b.limit(Fs+1)])).total>=Fs)return{success:!1,error:"RATE_LIMIT_EXCEEDED",message:"Daily report limit reached (".concat(Fs," per day).")};const m=await uh(),p=await dh(m);return{success:!0,flagId:(await this.databases.createDocument(Ba,ya,se.unique(),{chatRoomId:t.chatRoomId,reporterId:t.reporterId,reporterRole:t.reporterRole,reportedUserId:t.reportedUserId,reportedUserName:t.reportedUserName||"Unknown",reason:t.reason,message:((s=t.message)==null?void 0:s.trim())||null,contactName:((i=t.contactName)==null?void 0:i.trim())||null,whatsappNumber:((r=t.whatsappNumber)==null?void 0:r.trim())||null,status:"open",ipHash:p})).$id,message:"Thank you. Our trust & safety team will review this report."}}catch(o){return(o==null?void 0:o.code)===404||(l=o==null?void 0:o.message)!=null&&l.includes("could not be found")?{success:!1,error:"FEATURE_UNAVAILABLE",message:"Chat reporting feature is not available at this time."}:o.code===409?{success:!1,error:"DUPLICATE_REPORT",message:"You have already reported this chat."}:{success:!1,error:"NETWORK_ERROR",message:"Unable to submit report. Please try again."}}}async hasUserFlagged(t,n){var s;if(!this.isFeatureEnabled())return!1;try{return(await this.databases.listDocuments(Ba,ya,[b.equal("chatRoomId",t),b.equal("reporterId",n),b.limit(1)])).total>0}catch(i){return(i==null?void 0:i.code)===404||(i==null?void 0:i.status)===404||(s=i==null?void 0:i.message)!=null&&s.includes("could not be found"),!1}}async getAllFlags(t,n=50){var s;if(!this.isFeatureEnabled())return[];try{const i=[b.orderDesc("$createdAt"),b.limit(n)];return t&&i.push(b.equal("status",t)),(await this.databases.listDocuments(Ba,ya,i)).documents}catch(i){return(i==null?void 0:i.code)===404||(s=i==null?void 0:i.message)!=null&&s.includes("could not be found")?[]:[]}}async updateFlagStatus(t,n,s){var i;if(!this.isFeatureEnabled())return!1;try{return await this.databases.updateDocument(Ba,ya,t,{status:n,adminNotes:(s==null?void 0:s.trim())||null}),!0}catch(r){return(r==null?void 0:r.code)===404||(i=r==null?void 0:r.message)!=null&&i.includes("could not be found"),!1}}}const ec=new gh,ph=({chatRoomId:a,reporterId:t,reporterRole:n,reportedUserId:s,reportedUserName:i,onSuccess:r,onClose:l})=>{const[o,c]=u.useState(""),[d,m]=u.useState(""),[p,f]=u.useState(""),[y,I]=u.useState(""),[P,D]=u.useState(!1),j=[{value:"inappropriate_language",label:"Inappropriate Language",icon:e.jsx(jc,{className:"w-4 h-4 text-red-500"})},{value:"harassment",label:"Harassment",icon:e.jsx(Et,{className:"w-4 h-4 text-orange-500"})},{value:"spam",label:"Spam",icon:e.jsx(ja,{className:"w-4 h-4 text-yellow-500"})},{value:"fake_profile",label:"Fake Profile",icon:e.jsx(Ut,{className:"w-4 h-4 text-purple-500"})},{value:"asked_for_contact_number",label:"Asked for Contact Number",icon:e.jsx(Ha,{className:"w-4 h-4 text-blue-500"})},{value:"shared_contact_number",label:"Shared Contact Number",icon:e.jsx(Ha,{className:"w-4 h-4 text-indigo-500"})},{value:"other",label:"Other",icon:e.jsx(Ot,{className:"w-4 h-4 text-gray-500"})}],E=async T=>{if(T.preventDefault(),!!o){D(!0);try{await ec.submitFlag({chatRoomId:a,reporterId:t,reporterRole:n,reportedUserId:s,reportedUserName:i,reason:o,message:d.trim()||void 0,contactName:p.trim()||void 0,whatsappNumber:y.trim()||void 0}),r()}catch(x){g.error("Failed to submit report:",x),alert("Failed to submit report. Please try again.")}finally{D(!1)}}};return e.jsxs("div",{className:"w-full h-full bg-white flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"bg-red-500 text-white px-4 py-3 flex items-center gap-3 flex-shrink-0",children:[e.jsx("button",{onClick:l,className:"p-1 hover:bg-red-600 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Report Chat"}),e.jsx("p",{className:"text-red-100 text-sm",children:"Help us maintain service quality"})]})]}),e.jsx("div",{className:"bg-red-50 border-b border-red-100 px-4 py-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ja,{className:"w-4 h-4 text-red-600"})}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-red-800 leading-relaxed",children:["We are committed to providing exceptional service and appreciate your feedback regarding any service standards that may have been compromised. ",e.jsx("strong",{children:"Your identity remains completely confidential."})," Please provide detailed information to help us investigate and take appropriate action regarding any service personnel violations."]})})]})}),e.jsx("div",{className:"flex-1 ",children:e.jsxs("form",{onSubmit:E,className:"p-4 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ut,{className:"w-4 h-4 text-gray-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Contact Information (Optional)"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Your Name:"}),e.jsx("input",{type:"text",value:p,onChange:T=>f(T.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Enter your name",maxLength:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"WhatsApp Number:"}),e.jsx("input",{type:"tel",value:y,onChange:T=>I(T.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"e.g. +62 812 3456 7890",maxLength:20})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Et,{className:"w-4 h-4 text-red-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Reason for Reporting *"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:j.map(T=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-lg border-2 transition-all ".concat(o===T.value?"bg-red-50 border-red-300 shadow-sm":"bg-white border-gray-200 hover:border-red-200 hover:bg-red-25"),children:[e.jsx("input",{type:"radio",name:"reason",value:T.value,checked:o===T.value,onChange:x=>c(x.target.value),className:"text-red-500 focus:ring-red-500"}),e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[T.icon,e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:T.label})]})]},T.value))})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ot,{className:"w-4 h-4 text-gray-600"}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Additional Details"})]}),e.jsx("textarea",{value:d,onChange:T=>m(T.target.value),className:"w-full px-3 py-3 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent resize-none",rows:4,maxLength:500,placeholder:"Please provide detailed information about what happened. The more specific you are, the better we can help..."}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Be specific to help us investigate effectively"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[d.length,"/500"]})]})]}),e.jsx("div",{className:"pt-2 pb-4",children:e.jsx("button",{type:"submit",disabled:!o||P,className:"w-full py-4 rounded-lg font-semibold text-lg transition-all ".concat(o&&!P?"bg-red-500 text-white hover:bg-red-600 shadow-lg hover:shadow-xl transform hover:scale-[1.02]":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:P?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting Report..."]}):"Submit Report"})})]})})]})};function tc({chatRoomId:a,reporterId:t,reporterRole:n,reportedUserId:s,reportedUserName:i,className:r="",onReportFormToggle:l}){const[o,c]=u.useState(!1),[d,m]=u.useState(!1),[p,f]=u.useState(!0),[y,I]=u.useState(!1);u.useEffect(()=>{(async()=>{if(!a||!t){f(!1);return}try{const E=await ec.hasUserFlagged(a,t);m(E)}catch(E){g.error("Failed to check report status:",E)}finally{f(!1)}})()},[a,t]);const P=()=>{m(!0),c(!1),l==null||l(!1),I(!0),setTimeout(()=>{I(!1)},3e3)},D=()=>{if(d||p)return;const j=!o;c(j),l==null||l(j)};return!a||!t||!s||t===s?null:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center ".concat(r),children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:D,disabled:d||p,className:"\n              w-8 h-8 rounded-full flex items-center justify-center transition-all duration-200\n              ".concat(d?"bg-green-100 text-green-600 cursor-default":p?"bg-gray-100 text-gray-400 cursor-wait":o?"bg-red-500 text-white scale-110":"bg-red-100 text-red-600 hover:bg-red-500 hover:text-white hover:scale-110 cursor-pointer","\n            "),title:d?"Chat already reported":p?"Checking status...":o?"Close report form":"Report this chat",children:d?e.jsx(Pt,{className:"w-4 h-4"}):e.jsx("span",{className:"text-sm",children:"üö©"})}),y&&e.jsxs("div",{className:"absolute top-full right-0 mt-2 px-3 py-2 bg-green-600 text-white text-xs rounded-lg shadow-lg whitespace-nowrap z-50",children:["Report submitted successfully",e.jsx("div",{className:"absolute bottom-full right-2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-green-600"})]})]}),e.jsx("span",{className:"text-xs text-gray-600 mt-1 font-medium",children:"Report"})]}),o&&e.jsx("div",{className:"fixed inset-0 z-[9999] bg-white",children:e.jsx(ph,{chatRoomId:a,reporterId:t,reporterRole:n,reportedUserId:s,reportedUserName:i,onSuccess:P,onClose:()=>{c(!1),l==null||l(!1)}})})]})}const hh=({seconds:a})=>{const[t,n]=u.useState(a);u.useEffect(()=>{if(t<=0)return;const r=setInterval(()=>{n(l=>Math.max(0,l-1))},1e3);return()=>clearInterval(r)},[t]);const s=Math.floor(t/60),i=t%60;return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-bold",children:["‚è±Ô∏è ",s,":",i.toString().padStart(2,"0")]})};function ty({providerId:a,providerRole:t,providerName:n,customerId:s,customerName:i,bookingId:r,bookingDetails:l,bankDetails:o,isOpen:c,onClose:d}){var ne;const[m,p]=u.useState([]),[f,y]=u.useState(""),[I,P]=u.useState(!1),[D]=u.useState(0),[j,E]=u.useState(null),[T,x]=u.useState(null),[A,S]=u.useState(!1),[C,_]=u.useState(!1),[L,U]=u.useState(null);u.useRef(null);const $=u.useRef(null),H=u.useRef([]),Y=async()=>{try{const v=ia.generateConversationId(s,a),R=await Ze.getMessages(v);if(R&&R.length>0){const X=R.map(te=>({$id:te.$id||Date.now().toString(),$createdAt:te.$createdAt||new Date().toISOString(),senderId:te.senderId,senderName:te.senderName,senderAvatar:te.senderAvatar||te.receiverAvatar,message:te.message,messageType:te.messageType,isRead:te.isRead,countdown:te.messageType==="auto-reply"?300:void 0,statusType:JSON.parse(te.metadata||"{}").statusType,showActions:JSON.parse(te.metadata||"{}").showActions})),Q=R.find(te=>te.senderId===s&&(te.senderAvatar||te.receiverAvatar));Q&&E(Q.senderAvatar||Q.receiverAvatar),p(X)}else{const X=(l==null?void 0:l.date)||new Date().toLocaleString(),Q=(l==null?void 0:l.duration)||60,oe=((l==null?void 0:l.price)||0).toLocaleString(),Ye=t==="therapist"?"Home/Hotel Service":"Visit Location",et="Booking request created:\nüìÖ "+X+"\n‚è±Ô∏è Duration: "+Q+" minutes\nüí∞ Price: Rp "+oe+"\nüìç "+Ye;await Ze.sendMessage({conversationId:v,senderId:"system",senderName:"System",senderRole:"admin",receiverId:s,receiverName:i,receiverRole:"customer",message:et,messageType:"booking",bookingId:r}),await Ze.sendMessage({conversationId:v,senderId:"system",senderName:"Auto Reply",senderRole:"admin",receiverId:s,receiverName:i,receiverRole:"customer",message:"".concat(n," has received your booking requirement and will reply within 5 minutes"),messageType:"auto-reply",bookingId:r,metadata:{countdown:300}});const fe=(await Ze.getMessages(v)).map(ve=>({$id:ve.$id||Date.now().toString(),$createdAt:ve.$createdAt||new Date().toISOString(),senderId:ve.senderId,senderName:ve.senderName,senderAvatar:ve.senderAvatar||ve.receiverAvatar,message:ve.message,messageType:ve.messageType,isRead:ve.isRead,countdown:ve.messageType==="auto-reply"?300:void 0}));p(fe)}T||x("pending");const q=Ze.subscribeToMessages(v,X=>{p(Q=>{if(!Q.some(oe=>oe.$id===X.$id)){if(X.senderId!=="system"&&X.senderId!==a)try{const oe=new Audio("/sounds/booking-notification.mp3");oe.volume=.7,oe.play().catch(Ye=>{})}catch{}return[...Q,X]}return Q})});return()=>q()}catch{}};u.useEffect(()=>{c&&Y()},[c]);const ae=()=>{if(!(o!=null&&o.bankName)||!(o!=null&&o.accountHolderName)||!(o!=null&&o.accountNumber)){alert("Informasi bank belum lengkap. Silakan isi detail bank di halaman Pengaturan > Informasi Pembayaran.");return}setShowConfirmDialog(!0)},F=async()=>{setShowConfirmDialog(!1);try{const v=ia.generateConversationId(s,a);await Ze.sendMessage({conversationId:v,senderId:a,senderName:n,senderRole:"therapist",receiverId:s,receiverName:i,receiverRole:"customer",message:"üí≥ PAYMENT INFORMATION / INFORMASI PEMBAYARAN\n\nüí∞ Amount: ".concat(l!=null&&l.price?"Rp "+l.price.toLocaleString("id-ID"):"As agreed","\n\nüî∏ PAYMENT OPTIONS:\nüíµ Cash - Pay directly after service\nüè¶ Bank Transfer - Details below:\n\nüè¶ Bank: ").concat((o==null?void 0:o.bankName)||"N/A","\nüë§ Name: ").concat((o==null?void 0:o.accountHolderName)||"N/A","\nüí∞ Account: ").concat((o==null?void 0:o.accountNumber)||"N/A","\n\n‚úÖ Choose your preferred payment method after service completion.\n\n‚ö†Ô∏è For bank transfer: Please transfer exact amount and notify me when complete."),messageType:"text",bookingId:r,metadata:{paymentCard:{bankName:(o==null?void 0:o.bankName)||"N/A",accountHolderName:(o==null?void 0:o.accountHolderName)||"N/A",accountNumber:(o==null?void 0:o.accountNumber)||"N/A"}}}),Y()}catch{alert("Gagal membagikan informasi pembayaran")}},V=async()=>{if(!(!(o!=null&&o.bankName)||!(o!=null&&o.accountHolderName)||!(o!=null&&o.accountNumber)))try{const v="".concat(s,"_").concat(a);await Ze.sendMessage({conversationId:v,senderId:"system",senderName:"Payment System",senderRole:"admin",receiverId:s,receiverName:i,receiverRole:"customer",message:"üí≥ PAYMENT INFORMATION / INFORMASI PEMBAYARAN\n\nüí∞ Amount: ".concat(l!=null&&l.price?"Rp "+l.price.toLocaleString("id-ID"):"As agreed","\n\nüî∏ PAYMENT OPTIONS:\nüíµ Cash - Pay directly after service\nüè¶ Bank Transfer - Details below:\n\nüè¶ Bank: ").concat((o==null?void 0:o.bankName)||"N/A","\nüë§ Name: ").concat((o==null?void 0:o.accountHolderName)||"N/A","\nüí∞ Account: ").concat((o==null?void 0:o.accountNumber)||"N/A","\n\n‚úÖ Booking confirmed! Choose payment method after service.\n\n‚ö†Ô∏è For transfers: Use exact amount and confirm when sent."),messageType:"text",bookingId:r,metadata:{paymentCard:{bankName:(o==null?void 0:o.bankName)||"N/A",accountHolderName:(o==null?void 0:o.accountHolderName)||"N/A",accountNumber:(o==null?void 0:o.accountNumber)||"N/A"}}})}catch{}},pe=async()=>{var v;if(!A){if((l==null?void 0:l.type)==="scheduled"&&(!(o!=null&&o.bankName)||!(o!=null&&o.accountHolderName)||!(o!=null&&o.accountNumber))){alert("Untuk menerima booking terjadwal, Anda harus melengkapi informasi bank terlebih dahulu. Silakan pergi ke halaman Pengaturan > Informasi Pembayaran.");return}S(!0);try{const R=ia.generateConversationId(s,a);if(r&&await Oa.updateStatus(r,"confirmed"),await Ze.sendMessage({conversationId:R,senderId:"system",senderName:"System",senderRole:"admin",receiverId:s,receiverName:i,receiverRole:"customer",message:"‚úÖ Booking Accepted!\n\n".concat(n," has confirmed your booking.\n\nYou can now chat directly to coordinate details."),messageType:"status-update",bookingId:r,metadata:{statusType:"confirmed"}}),x("accepted"),(l==null?void 0:l.type)==="scheduled"&&(o!=null&&o.bankName)&&setTimeout(async()=>{await V()},1e3),r&&(l!=null&&l.price)){try{await Gp.notifyNewCommission({bookingId:r,bookingType:(l==null?void 0:l.type)==="scheduled"?"scheduled":"book_now",bookingDate:new Date().toISOString(),scheduledDate:l==null?void 0:l.date},{therapistId:a,therapistName:n},{customerId:s,customerName:i},{serviceAmount:l.price,commissionAmount:Math.round(l.price*.3),commissionRate:30,paymentDeadline:new Date(Date.now()+300*60*1e3).toISOString()})}catch{}try{const q=await Nn.createCommissionRecord(a,n,r,new Date().toISOString(),l==null?void 0:l.date,l.price,i||"Customer","Massage Service",(l==null?void 0:l.duration)||60),Q=new Date(q.paymentDeadline||new Date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),te=(v=q.commissionAmount)==null?void 0:v.toLocaleString("en-US");await Ze.sendMessage({conversationId:R,senderId:"system",senderName:"IndaStreet Billing",senderRole:"admin",receiverId:a,receiverName:n,receiverRole:"therapist",message:"üí≥ Commission Due (Pro 30%)\n\nBooking: ".concat(r,"\nAmount: IDR ").concat(te,"\nDeadline: ").concat(Q," (within 3 hours)\n\nPlease upload payment proof in Payments 30% to avoid penalties."),messageType:"system",bookingId:r})}catch{}}await Oa.notifyAdmin("‚úÖ Booking ".concat(r," accepted by therapist ").concat(n)),window.dispatchEvent(new CustomEvent("refreshBookings"))}catch{alert("Failed to accept booking. Please try again.")}finally{S(!1)}}},he=async()=>{if(!(A||!window.confirm("‚ö†Ô∏è Warning: Rejecting Orders Affects Your Ranking\n\nRejecting bookings will lower your position in search results and a repeated pattern harms your account.\n3 rejections/cancels in 24 hours will pause new bookings for 48 hours.\n\nAre you sure you want to reject this booking?"))){S(!0);try{const R=ia.generateConversationId(s,a);r&&await Oa.updateStatus(r,"cancelled"),await Ze.sendMessage({conversationId:R,senderId:"system",senderName:"System",senderRole:"admin",receiverId:s,receiverName:i,receiverRole:"customer",message:"‚ùå Booking Declined\n\n".concat(n," is unable to accept this booking.\n\nüîç We are searching for an alternative therapist for you."),messageType:"status-update",bookingId:r,metadata:{statusType:"cancelled"}}),x("rejected"),await Oa.notifyAdmin("‚ùå Booking ".concat(r," rejected by therapist ").concat(n," - Ranking penalty applied")),window.dispatchEvent(new CustomEvent("refreshBookings")),setTimeout(()=>{d()},3e3)}catch{alert("Failed to reject booking. Please try again.")}finally{S(!1)}}},de=async()=>{try{const v=ia.generateConversationId(s,a);await Ze.sendMessage({conversationId:v,senderId:"system",senderName:"System",senderRole:"admin",receiverId:s,receiverName:i,receiverRole:"customer",message:"‚ùå Booking request cancelled by customer",messageType:"status-update",bookingId:r,metadata:{statusType:"cancelled"}}),r&&await Oa.updateStatus(r,"cancelled"),await Oa.notifyAdmin("‚ùå Booking ".concat(r," cancelled by customer ").concat(i)),De("cancelled","‚ùå Booking cancelled. Please view directory for your preferred Therapist / Places."),setTimeout(()=>{d(),window.location.href="/therapists"},2e3)}catch{}},Te=async()=>{if(!(!f.trim()||I)){if(P(!0),T!=="accepted"){alert("Chat unlocks after you accept the booking. Please accept or reject first.");return}try{const v=f.trim(),R=[...H.current.slice(-4),v].join(" ").trim(),q=Zp(R);if(q.isBlocked){P(!1),blockAndAlert(q,"message_send",R);return}const X=ia.generateConversationId(s,a),Q=v;await Ze.sendMessage({conversationId:X,senderId:a,senderName:n,senderRole:"therapist",receiverId:s,receiverName:i,receiverRole:"customer",message:v,messageType:"text",bookingId:r,metadata:{translated:Q,language:"id"}}),y(""),pushToMessageHistory(v)}catch{alert("Failed to send message")}finally{P(!1)}}},De=(v,R)=>{const q={pending:"‚è≥ Your booking is pending confirmation",confirmed:"‚úÖ Your booking has been confirmed! The therapist will arrive at the scheduled time.",completed:"üéâ Booking completed! Thank you for using our service. Please rate your experience.",cancelled:"‚ùå This booking has been cancelled."},X={$id:Date.now().toString(),$createdAt:new Date().toISOString(),senderId:"system",senderName:"System",message:R||q[v],messageType:"status-update",isRead:!1,statusType:v};p(Q=>[...Q,X])};window.addBookingStatusUpdate=De;const we=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),Te())},B=v=>new Date(v).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return c?e.jsxs("div",{className:"fixed bottom-4 right-4 w-96 h-[600px] bg-white rounded-lg shadow-2xl flex flex-col z-50 border border-gray-200",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white px-4 py-3 rounded-t-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center text-orange-600 font-bold overflow-hidden",children:j?j.startsWith("http")?e.jsx("img",{src:j,alt:i,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-2xl",children:j}):e.jsx("img",{src:"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(i),"&background=f97316&color=fff&size=128"),alt:i,className:"w-full h-full object-cover",onError:v=>{const R=v.target;R.style.display="none",R.parentElement.innerHTML=i.charAt(0).toUpperCase()}})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:i}),e.jsx("p",{className:"text-xs text-orange-100",children:"Customer"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>setShowDiscountModal(!0),className:"p-2 hover:bg-white/20 rounded-full transition-colors group",title:"Send Discount Code",children:e.jsx("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})})}),(o==null?void 0:o.bankName)&&e.jsx("button",{onClick:ae,className:"p-2 hover:bg-white/20 rounded-full transition-colors group",title:"Bagikan Informasi Pembayaran",children:e.jsx("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),D>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1 font-bold",children:D}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-amber-50 border-b border-amber-200 px-4 py-2 text-sm",children:e.jsxs("div",{className:"flex items-center justify-between text-amber-900",children:[e.jsxs("span",{children:["üìÖ Booking #",r==null?void 0:r.slice(-6)]}),e.jsxs("span",{children:[l.duration||60," min ‚Ä¢ Rp ",(ne=l.price)==null?void 0:ne.toLocaleString()]})]})}),l.latitude&&l.longitude&&e.jsx("div",{className:"bg-blue-50 border-b border-blue-200 px-4 py-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-900 mb-1",children:"Customer Location (GPS)"}),e.jsxs("p",{className:"text-xs text-blue-700 font-mono",children:["Lat: ",l.latitude.toFixed(6),", Lng: ",l.longitude.toFixed(6)]}),e.jsxs("a",{href:"https://www.google.com/maps?q=".concat(l.latitude,",").concat(l.longitude),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 mt-2 px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white text-xs font-medium rounded-lg transition-colors",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"Open in Google Maps"]})]})]})})]}),e.jsx("div",{className:"absolute top-24 right-4 z-[1]",children:e.jsx(tc,{chatRoomId:"therapist-".concat(a,"-").concat(s),reporterId:a,reporterRole:"therapist",reportedUserId:s,reportedUserName:i,onReportFormToggle:()=>{}})}),e.jsxs("div",{className:"flex-1  p-4 space-y-3 bg-gray-50",children:[m.length===0?e.jsxs("div",{className:"text-center text-gray-500 mt-8",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-3 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),e.jsxs("p",{className:"font-medium",children:["Start chatting with ",i]}),e.jsx("p",{className:"text-xs mt-1",children:"Messages appear here in real-time"})]}):m.map(v=>{var oe;const R=v.senderId===a,q=v.messageType==="system"||v.messageType==="booking"||v.messageType==="status-update",X=v.messageType==="auto-reply";let Q="",te="";return v.messageType==="booking"?(Q="bg-blue-50 border-2 border-blue-200 text-blue-900",te="üìã"):v.messageType==="auto-reply"?(Q="bg-orange-50 border-2 border-orange-200 text-orange-900",te="ü§ñ"):v.messageType==="fallback"?(Q="bg-amber-50 border-2 border-amber-300 text-amber-900",te="‚ö†Ô∏è"):v.messageType==="payment-card"?(Q="bg-gradient-to-br from-blue-50 to-indigo-100 border-2 border-blue-200 text-blue-900",te="üí≥"):v.messageType==="status-update"?(Q={pending:"bg-yellow-50 border-2 border-yellow-200 text-yellow-900",confirmed:"bg-green-50 border-2 border-green-200 text-green-900",completed:"bg-purple-50 border-2 border-purple-200 text-purple-900",cancelled:"bg-red-50 border-2 border-red-200 text-red-900"}[v.statusType||"pending"],te=v.statusType==="confirmed"?"‚úÖ":v.statusType==="completed"?"üéâ":v.statusType==="cancelled"?"‚ùå":"‚è≥"):q?(Q="bg-gray-200 text-gray-700",te="‚ÑπÔ∏è"):R?Q="bg-orange-500 text-white":Q="bg-white text-gray-900 shadow-sm",e.jsxs("div",{className:"flex gap-2 items-end ".concat(R&&!q&&!X?"justify-end":q||X?"justify-center":"justify-start"),children:[!R&&!q&&!X&&e.jsx("div",{className:"flex-shrink-0 mb-1",children:v.senderAvatar&&v.senderAvatar.startsWith("http")?e.jsx("img",{src:v.senderAvatar,alt:v.senderName,className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:v.senderAvatar||"üë§"})})}),e.jsxs("div",{className:"".concat(q||X?"max-w-[90%]":"max-w-[75%]"," rounded-2xl px-4 py-3 ").concat(Q),children:[(q||X||v.messageType==="fallback")&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:te}),e.jsx("span",{className:"font-bold text-xs uppercase tracking-wide",children:v.messageType==="booking"?"New Booking Request":v.messageType==="auto-reply"?"Auto Reply":v.messageType==="fallback"?"Alternative Options":v.messageType==="status-update"?"Status Update":v.messageType==="payment-card"?"Payment Information":"System"})]}),e.jsx("p",{className:"whitespace-pre-wrap break-words text-sm",children:v.message}),v.messageType==="payment-card"&&((oe=v.metadata)==null?void 0:oe.paymentCard)&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-4 cursor-pointer hover:shadow-lg transition-all duration-200 hover:border-green-300",onClick:()=>U(v.metadata.paymentCard),title:"Click to enlarge",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),e.jsx("h4",{className:"font-bold text-green-900",children:"Bank Transfer Details"})]}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})}),"Click to enlarge"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 font-medium uppercase tracking-wider",children:"Bank"}),e.jsx("p",{className:"font-bold text-gray-900",children:v.metadata.paymentCard.bankName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 font-medium uppercase tracking-wider",children:"Account Name"}),e.jsx("p",{className:"font-bold text-gray-900",children:v.metadata.paymentCard.accountHolderName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 font-medium uppercase tracking-wider",children:"Account Number"}),e.jsx("p",{className:"font-mono font-bold text-lg text-gray-900",children:v.metadata.paymentCard.accountNumber})]})]}),e.jsx("div",{className:"mt-3 bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"text-xs text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Payment can be made via:"}),e.jsxs("p",{children:["üíµ ",e.jsx("strong",{children:"Cash"})," - Pay directly after service"]}),e.jsxs("p",{children:["üè¶ ",e.jsx("strong",{children:"Bank Transfer"})," - Use details above"]})]})]})})]})}),v.messageType==="booking"&&!T&&e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("div",{className:"bg-amber-100 border-l-4 border-amber-500 p-3 rounded",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-amber-600 mt-0.5",children:"‚ö†Ô∏è"}),e.jsxs("div",{className:"text-xs text-amber-900",children:[e.jsx("p",{className:"font-bold mb-1",children:"Important Notice"}),e.jsx("p",{children:"Rejecting bookings will lower your ranking position in search results, making it harder for customers to find you."})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:pe,disabled:A,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-br from-green-500 via-green-600 to-green-700 text-white rounded-xl hover:from-green-600 hover:via-green-700 hover:to-green-800 font-bold transition-all shadow-lg shadow-green-300/50 hover:shadow-xl hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),A?"Processing...":"Accept"]}),e.jsxs("button",{onClick:he,disabled:A,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-br from-red-500 via-red-600 to-red-700 text-white rounded-xl hover:from-red-600 hover:via-red-700 hover:to-red-800 font-bold transition-all shadow-lg shadow-red-300/50 hover:shadow-xl hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),A?"Processing...":"Reject"]})]})]}),v.messageType==="booking"&&T==="accepted"&&e.jsx("div",{className:"mt-3 p-3 bg-green-100 border border-green-300 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-900 font-bold flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Booking Accepted! You can now chat with the customer."]})}),v.messageType==="booking"&&T==="rejected"&&e.jsx("div",{className:"mt-3 p-3 bg-red-100 border border-red-300 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-900 font-bold flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Booking Rejected. Searching for alternative therapist for customer."]})}),X&&v.countdown&&e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(hh,{seconds:v.countdown})}),v.showActions&&e.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[e.jsxs("button",{onClick:de,className:"w-full px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 font-semibold text-sm transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel & Browse Directory"]}),e.jsxs("button",{onClick:d,className:"w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 font-semibold text-sm transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Wait for Match"]})]}),!q&&!X&&!v.showActions&&e.jsx("p",{className:"text-xs mt-1 ".concat(R?"text-orange-100":"text-gray-500"),children:B(v.$createdAt)})]}),R&&!q&&!X&&e.jsx("div",{className:"flex-shrink-0 mb-1",children:e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-400 to-amber-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-xs",children:n.charAt(0).toUpperCase()})})})]},v.$id)}),e.jsx("div",{ref:$})]}),e.jsx("div",{className:"border-t border-gray-200 p-3 bg-white rounded-b-lg",children:T!=="accepted"?e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-2 border-orange-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-gray-900 mb-1",children:"üîí Accept Booking to Chat"}),e.jsx("p",{className:"text-sm text-gray-700",children:"You must accept the booking request above before you can chat with the customer."})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-end space-x-2",children:[e.jsx("textarea",{value:f,onChange:v=>y(v.target.value),onKeyPress:we,onPaste:handleTextareaPaste,placeholder:"Type a message...",className:"flex-1 border border-gray-300 rounded-xl px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500 resize-none text-sm",rows:2,disabled:I}),e.jsx("button",{onClick:Te,disabled:!f.trim()||I,className:"bg-orange-500 text-white p-3 rounded-xl hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:I?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),(o==null?void 0:o.bankName)&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("button",{onClick:()=>_(!C),className:"text-xs text-orange-600 hover:text-orange-700 font-semibold flex items-center gap-1",children:["üí≥ ",C?"Sembunyikan":"Bagikan Info Pembayaran"]}),C&&e.jsxs("div",{className:"mt-3 p-3 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx("div",{className:"mb-2",children:e.jsx(Do,{bankName:(o==null?void 0:o.bankName)||"N/A",accountHolderName:(o==null?void 0:o.accountHolderName)||"N/A",accountNumber:(o==null?void 0:o.accountNumber)||"N/A",size:"small"})}),e.jsx("button",{onClick:V,className:"w-full py-2 bg-orange-500 hover:bg-orange-600 text-white text-sm font-bold rounded-lg transition-colors",children:"üì§ Kirim ke Customer"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 px-1",children:"Press Enter to send ‚Ä¢ Shift+Enter for new line"}),e.jsx("p",{className:"text-xs text-amber-600 mt-1 px-1",children:"‚ö†Ô∏è Berbagi nomor telepon atau WhatsApp tidak diperbolehkan"})]})}),showConfirmDialog&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md mx-4 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white p-6 text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"üí≥"}),e.jsx("h3",{className:"text-xl font-bold",children:"Bagikan Info Pembayaran"}),e.jsx("p",{className:"text-orange-100 text-sm mt-1",children:"Konfirmasi untuk mengirim detail bank ke customer"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx("div",{className:"transform scale-75",children:e.jsx(Do,{bankName:(o==null?void 0:o.bankName)||"",accountHolderName:(o==null?void 0:o.accountHolderName)||"",accountNumber:(o==null?void 0:o.accountNumber)||"",size:"small"})})}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-amber-600 mt-0.5",children:"‚ÑπÔ∏è"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold text-amber-900 mb-1",children:"Informasi yang akan dibagikan:"}),e.jsxs("ul",{className:"text-amber-800 space-y-0.5",children:[e.jsxs("li",{children:["‚Ä¢ Nama Bank: ",o==null?void 0:o.bankName]}),e.jsxs("li",{children:["‚Ä¢ Nama Account: ",o==null?void 0:o.accountHolderName]}),e.jsxs("li",{children:["‚Ä¢ Nomor Rekening: ",o==null?void 0:o.accountNumber]})]}),e.jsx("p",{className:"mt-3 text-amber-900 font-semibold",children:"Kartu akan terlihat oleh Anda dan customer di chat."})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>setShowConfirmDialog(!1),className:"flex-1 py-3 px-4 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition-colors",children:"Batal"}),e.jsx("button",{onClick:F,className:"flex-1 py-3 px-4 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white rounded-xl font-bold transition-all shadow-lg hover:shadow-xl",children:"‚úÖ Konfirmasi & Kirim"})]})]})]})}),e.jsx(oh,{isOpen:showDiscountModal,onClose:()=>setShowDiscountModal(!1),providerId:a,providerType:t,providerName:n,customerId:s,customerName:i,onSuccess:(v,R)=>{const q={$id:"discount_".concat(Date.now()),$createdAt:new Date().toISOString(),senderId:"system",senderName:"System",message:"üéÅ You sent a ".concat(R,"% discount code to ").concat(i,"!"),messageType:"system",isRead:!0};p(X=>[...X,q])}}),L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] ",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Payment Details"})]}),e.jsx("button",{onClick:()=>U(null),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",title:"Close",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 font-medium uppercase tracking-wider block mb-2",children:"Bank Name"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 bg-white rounded-lg p-3 border border-gray-200",children:L.bankName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 font-medium uppercase tracking-wider block mb-2",children:"Account Holder Name"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 bg-white rounded-lg p-3 border border-gray-200",children:L.accountHolderName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 font-medium uppercase tracking-wider block mb-2",children:"Account Number"}),e.jsx("p",{className:"text-2xl font-mono font-bold text-gray-900 bg-white rounded-lg p-3 border border-gray-200 tracking-wider",children:L.accountNumber})]})]}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-2",children:"Payment Options:"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{children:["üíµ ",e.jsx("strong",{children:"Cash Payment"})," - Pay directly after service completion"]}),e.jsxs("p",{children:["üè¶ ",e.jsx("strong",{children:"Bank Transfer"})," - Use the account details above"]})]}),e.jsx("p",{className:"mt-2 text-xs text-blue-600",children:"‚ö†Ô∏è For bank transfers: Please use the exact amount and confirm payment when sent."})]})]})})]})})]})})]}):null}const fh=h.databaseId,yh=h.collections,Eo=h.bucketId,Mo=Jo.THERAPIST_DOCUMENTS,Ks=5,bh=["image/jpeg","image/jpg","image/png","image/gif"],Ro=["Jakarta","Surabaya","Bandung","Medan","Semarang","Makassar","Palembang","Tangerang","Depok","Batam","Denpasar","Bandar Lampung","Padang","Malang","Bogor","Pekanbaru","Yogyakarta","Bekasi","Banjarmasin","Solo","Balikpapan","Manado","Pontianak","Samarinda","Cimahi","Jambi","Mataram","Serang","Tasikmalaya","Kupang","Sukabumi","Cirebon","Bengkulu","Palu","Ambon","Kediri","Kendari","Pematangsiantar","Tegal","Binjai","Jayapura","Pangkalpinang","Bitung","Tarakan","Tanjungpinang","Gorontalo","Dumai","Magelang","Sorong","Batu","Baubau","Ternate","Mojokerto","Pasuruan","Probolinggo","Lubuklinggau"],Ws=["Swedish Massage","Deep Tissue Massage","Thai Massage","Balinese Massage","Shiatsu","Hot Stone Massage","Aromatherapy Massage","Sports Massage","Reflexology","Traditional Indonesian Massage","Prenatal Massage","Couples Massage","Four Hands Massage","Head Massage"],xh=({onBack:a,onSuccess:t,onNavigateToPayment:n})=>{const[s,i]=u.useState({therapistName:"",gender:"",age:"",religion:"",location:"",primarySpecialization:"",jobTitle:"",jobDescription:"",yearsOfExperience:"",experienceLevel:"Basic Skill",workedAbroadBefore:!1,hasReferences:!1,currentlyWorking:!1,minimumSalary:"",contactWhatsApp:"",availability:"full-time",statusAvailability:"available",jobSeekingActive:!0,willingToRelocateDomestic:!1,willingToRelocateInternational:!1,accommodation:"not-required",certifications:"",requiredLicenses:"",languages:[],preferredLocations:[],massageTypes:[],specializations:[],profileImageUrl:"",profileImageFile:null,cvFile:null,cvFileUrl:"",cvFileName:"",cvFileType:""}),[r,l]=u.useState(!1),[o,c]=u.useState(""),[d,m]=u.useState(""),p=u.useRef(null),f=u.useRef(null),y=(x,A)=>{i(S=>({...S,[x]:A}))},I=(x,A)=>{i(S=>({...S,[x]:S[x].includes(A)?S[x].filter(C=>C!==A):[...S[x],A]}))},P=x=>bh.includes(x.type)?x.size/(1024*1024)>Ks?"File size exceeds ".concat(Ks,"MB limit."):null:"Invalid file type. Please upload: JPG, JPEG, PNG, or GIF.",D=x=>{var S;const A=(S=x.target.files)==null?void 0:S[0];A&&A.type.startsWith("image/")&&i(C=>({...C,profileImageFile:A,profileImageUrl:""})),x.target.value=""},j=x=>{var S;const A=(S=x.target.files)==null?void 0:S[0];if(A){const C=P(A);if(C){c(C);return}c(""),i(_=>({..._,cvFile:A,cvFileName:A.name,cvFileType:A.type}))}x.target.value=""},E=()=>{i(x=>({...x,cvFile:null,cvFileUrl:"",cvFileName:"",cvFileType:""}))},T=async x=>{var A,S,C,_,L,U,$;x.preventDefault(),c(""),m(""),l(!0);try{if(!((A=s.therapistName)!=null&&A.trim()))throw new Error("Full Name is required.");if(!((S=s.primarySpecialization)!=null&&S.trim())&&!((C=s.jobTitle)!=null&&C.trim()))throw new Error("Primary Specialization is required.");if(!((_=s.jobDescription)!=null&&_.trim()))throw new Error("Professional Bio is required.");if(!((L=s.contactWhatsApp)!=null&&L.trim()))throw new Error("WhatsApp Number is required.");if(!((U=s.location)!=null&&U.trim()))throw new Error("Location is required.");const H=s.yearsOfExperience?parseInt(s.yearsOfExperience,10):NaN;if(isNaN(H)||H<0)throw new Error("Years of Experience must be a valid number.");let Y=($=s.profileImageUrl)==null?void 0:$.trim();if(s.profileImageFile){const he=se.unique();await Qt.createFile(Eo,he,s.profileImageFile),Y=Qt.getFileView(Eo,he).toString()}if(!Y)throw new Error("Profile Image is required. Please upload a photo.");let ae="",F="";if(s.cvFile){const he=P(s.cvFile);if(he)throw new Error(he);const de=se.unique();await Qt.createFile(Mo,de,s.cvFile),ae=Qt.getFileView(Mo,de).toString(),F=s.cvFile.type}const V=se.unique(),pe=se.unique();await K.createDocument(fh,yh.therapistJobListings,V,{therapistId:pe,therapistName:s.therapistName.trim(),listingId:Math.floor(Math.random()*1e6)+1,jobTitle:s.primarySpecialization||s.jobTitle,jobDescription:s.jobDescription.trim(),jobType:s.primarySpecialization||s.jobTitle,location:s.location.trim(),minimumSalary:s.minimumSalary||"Negotiable",availability:s.availability,status:s.statusAvailability,jobSeekingActive:s.jobSeekingActive,willingToRelocateDomestic:s.willingToRelocateDomestic,willingToRelocateInternational:s.willingToRelocateInternational,accommodation:s.accommodation,preferredLocations:s.preferredLocations.join(", "),isActive:!1,listingDate:new Date().toISOString(),expiryDate:new Date(Date.now()+2160*60*60*1e3).toISOString(),profileImage:Y,requiredLicenses:s.certifications||s.requiredLicenses||null,gender:s.gender||null,age:s.age?parseInt(s.age,10):null,religion:s.religion||null,experienceYears:H,yearsExperience:H,workedAbroadBefore:s.workedAbroadBefore||null,hasReferences:s.hasReferences||null,currentlyWorking:s.currentlyWorking||null,languages:s.languages.length>0?s.languages:null,specializations:s.massageTypes.length>0?s.massageTypes:null,cvFileUrl:ae||null,cvFileType:F||null}),m("Profile submitted successfully! Redirecting to payment..."),n?n(V):t==null||t()}catch(H){c(H.message||"Failed to create listing. Please try again.")}finally{l(!1)}};return e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50",children:[e.jsx("header",{className:"bg-white p-4 shadow-md sticky top-0 z-20",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:[e.jsx("span",{className:"text-black",children:"Inda"}),e.jsxs("span",{className:"text-orange-500",children:[e.jsx("span",{className:"inline-block animate-float",children:"S"}),"treet"]})]}),e.jsx("div",{className:"flex items-center gap-3 text-gray-600",children:e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Go back",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})})]})}),e.jsx("div",{className:"bg-gray-50 py-6 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsxs("h2",{className:"text-3xl font-bold text-gray-900 mb-2 text-center flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-8 h-8 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Register Your Profile"]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Post your profile and find work opportunities"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/massage_table-removebg-preview.png?updatedAt=1762490531609",alt:"Massage Table",className:"w-32 h-32 object-contain"})})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Only verified and registered IndaStreet members may publish listings. This protects our professional ecosystem and ensures quality opportunities."}),e.jsxs("form",{onSubmit:T,className:"bg-white rounded-xl shadow-lg p-6 space-y-6",children:[o&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:o}),d&&e.jsx("div",{className:"bg-emerald-50 border border-emerald-200 text-emerald-800 px-4 py-3 rounded-lg font-medium",children:d}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Basic Info"]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-1 text-sm font-semibold text-gray-700 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.therapistName,onChange:x=>y("therapistName",x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter your full name",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Profile Image ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:D,className:"hidden"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{type:"button",onClick:()=>{var x;return(x=p.current)==null?void 0:x.click()},className:"px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-orange-500 hover:bg-orange-50/50 transition-colors text-sm font-medium text-gray-600",children:s.profileImageFile?s.profileImageFile.name:"Choose Photo"}),s.profileImageFile&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(s.profileImageFile),alt:"Preview",className:"w-16 h-16 rounded-full object-cover ring-2 ring-slate-200"}),e.jsx("button",{type:"button",onClick:()=>i(x=>({...x,profileImageFile:null})),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full text-xs",children:"√ó"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG, GIF. Max 5MB."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Location ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:s.location,onChange:x=>y("location",x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select city (Indonesia)"}),Ro.map(x=>e.jsx("option",{value:x,children:x},x))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Primary Specialization ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:s.primarySpecialization,onChange:x=>y("primarySpecialization",x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select primary specialization"}),Ws.map(x=>e.jsx("option",{value:x,children:x},x))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Secondary Specializations (optional)"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-32 overflow-y-auto border border-gray-200 rounded-lg p-3",children:Ws.filter(x=>x!==s.primarySpecialization).map(x=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.massageTypes.includes(x),onChange:()=>I("massageTypes",x),className:"w-4 h-4 text-orange-500 rounded"}),e.jsx("span",{className:"text-sm",children:x})]},x))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Years of Experience ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:s.yearsOfExperience,onChange:x=>y("yearsOfExperience",x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",placeholder:"0",min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Gender"}),e.jsxs("select",{value:s.gender,onChange:x=>y("gender",x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent","aria-label":"Select gender",children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Age"}),e.jsx("input",{type:"number",value:s.age,onChange:x=>y("age",x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Age",min:"18",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Religion"}),e.jsxs("select",{value:s.religion,onChange:x=>y("religion",x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent","aria-label":"Select religion",children:[e.jsx("option",{value:"",children:"Select religion"}),e.jsx("option",{value:"Islam",children:"Islam"}),e.jsx("option",{value:"Christianity",children:"Christianity"}),e.jsx("option",{value:"Catholicism",children:"Catholicism"}),e.jsx("option",{value:"Hinduism",children:"Hinduism"}),e.jsx("option",{value:"Buddhism",children:"Buddhism"}),e.jsx("option",{value:"Confucianism",children:"Confucianism"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-1 text-sm font-semibold text-gray-700 mb-2",children:[e.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"WhatsApp Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",value:s.contactWhatsApp,onChange:x=>y("contactWhatsApp",x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"+62 xxx xxx xxxx",required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Professional Details"]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Professional Bio ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:s.jobDescription,onChange:x=>y("jobDescription",x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",rows:4,placeholder:"Describe your experience, skills, and what you're looking for...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Experience Level"}),e.jsxs("select",{value:s.experienceLevel,onChange:x=>y("experienceLevel",x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent","aria-label":"Select experience level",children:[e.jsx("option",{value:"Experienced",children:"Experienced"}),e.jsx("option",{value:"Basic Skill",children:"Basic Skill"}),e.jsx("option",{value:"Require Training",children:"Require Training"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-1 text-sm font-semibold text-gray-700 mb-2",children:[e.jsx("svg",{className:"w-4 h-4 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Minimum Salary Expected (Monthly in IDR)"]}),e.jsx("input",{type:"text",value:s.minimumSalary,onChange:x=>y("minimumSalary",x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., Rp 5,000,000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Availability (status)"}),e.jsxs("select",{value:s.statusAvailability,onChange:x=>y("statusAvailability",x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"available",children:"üü¢ Available"}),e.jsx("option",{value:"busy",children:"üü° Busy"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Work Schedule"}),e.jsxs("select",{value:s.availability,onChange:x=>y("availability",x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"full-time",children:"Full-time"}),e.jsx("option",{value:"part-time",children:"Part-time"}),e.jsx("option",{value:"both",children:"Both"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.jobSeekingActive,onChange:x=>y("jobSeekingActive",x.target.checked),className:"w-5 h-5 text-orange-500 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Job Seeking Active (show my profile to employers)"})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Work History"}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.workedAbroadBefore,onChange:x=>y("workedAbroadBefore",x.target.checked),className:"w-5 h-5 text-orange-500 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Has worked abroad before"})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.hasReferences,onChange:x=>y("hasReferences",x.target.checked),className:"w-5 h-5 text-orange-500 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Has references from previous employers"})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.currentlyWorking,onChange:x=>y("currentlyWorking",x.target.checked),className:"w-5 h-5 text-orange-500 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Currently working"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"My Massage Skills"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Ws.map(x=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.massageTypes.includes(x),onChange:()=>I("massageTypes",x),className:"w-4 h-4 text-orange-500 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:x})]},x))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Preferred Work Locations"}),e.jsx("div",{className:"max-h-48  border border-gray-200 rounded-lg p-3",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Ro.map(x=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.preferredLocations.includes(x),onChange:()=>I("preferredLocations",x),className:"w-4 h-4 text-orange-500 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:x})]},x))})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Relocation & Accommodation"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.willingToRelocateDomestic,onChange:x=>y("willingToRelocateDomestic",x.target.checked),className:"w-4 h-4 text-orange-500 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Willing to relocate within Indonesia"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.willingToRelocateInternational,onChange:x=>y("willingToRelocateInternational",x.target.checked),className:"w-4 h-4 text-orange-500 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Willing to relocate internationally"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Accommodation Requirement"}),e.jsxs("select",{value:s.accommodation,onChange:x=>y("accommodation",x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent","aria-label":"Select accommodation requirement",children:[e.jsx("option",{value:"required",children:"Required"}),e.jsx("option",{value:"preferred",children:"Preferred"}),e.jsx("option",{value:"not-required",children:"Not Required"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Certifications & CV"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Certifications"}),e.jsx("input",{type:"text",value:s.certifications,onChange:x=>y("certifications",x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., Certified Massage Therapist, Spa License"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"CV / Resume Upload (optional)"}),e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Accepted: JPG, JPEG, PNG, GIF. Max ",Ks,"MB."]}),e.jsx("input",{ref:f,type:"file",accept:".jpg,.jpeg,.png,.gif,image/jpeg,image/jpg,image/png,image/gif",onChange:j,className:"hidden"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{type:"button",onClick:()=>{var x;return(x=f.current)==null?void 0:x.click()},className:"px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-orange-500 hover:bg-orange-50/50 transition-colors text-sm font-medium text-gray-600",children:s.cvFileName||"Choose CV File"}),s.cvFile&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm text-gray-600",children:s.cvFileName}),s.cvFile.type.startsWith("image/")&&e.jsx("img",{src:URL.createObjectURL(s.cvFile),alt:"CV preview",className:"w-16 h-16 object-cover rounded border"}),e.jsx("button",{type:"button",onClick:E,className:"text-red-600 text-sm font-medium hover:underline",children:"Remove"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Languages Spoken"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Indonesian","English","Javanese","Balinese","Sundanese","Chinese","Japanese","Arabic"].map(x=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer px-3 py-2 bg-gray-50 rounded-lg border border-gray-200 hover:border-orange-300",children:[e.jsx("input",{type:"checkbox",checked:s.languages.includes(x),onChange:()=>I("languages",x),className:"w-4 h-4 text-orange-500 rounded"}),e.jsx("span",{className:"text-sm",children:x})]},x))})]})]}),e.jsx("div",{className:"pt-6 border-t border-gray-200",children:e.jsx("button",{type:"submit",disabled:r,className:"w-full py-4 rounded-lg font-semibold text-white transition-all ".concat(r?"bg-gray-400 cursor-not-allowed":"bg-orange-500 hover:bg-orange-600"),children:r?"Submitting...":"Submit Profile"})})]})]})]})},ay=Object.freeze(Object.defineProperty({__proto__:null,default:xh},Symbol.toStringTag,{value:"Module"})),kh=({className:a="w-6 h-6"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),Kn=15e4,vh="6281392000050",wh=({listingId:a,onBack:t,onNavigate:n,onOpenMenu:s})=>{const[i,r]=u.useState(null),[l,o]=u.useState(!0),[c,d]=u.useState(!1),m={name:"BCA (Bank Central Asia)",accountNumber:"1234567890",accountName:"IndaStreet Platform"};u.useEffect(()=>{a&&(async()=>{try{const P=await K.getDocument(h.databaseId,h.collections.therapistJobListings||"therapist_job_listings",a);r(P)}catch{}finally{o(!1)}})()},[a]);const p=I=>"Rp "+new Intl.NumberFormat("id-ID",{minimumFractionDigits:0}).format(I),f=I=>{navigator.clipboard.writeText(I),alert("Copied to clipboard!")},y=async()=>{const I="Hi IndaStreet,\n\nI have completed payment for my Find Professionals listing:\n\nName: ".concat((i==null?void 0:i.therapistName)||"N/A","\nJob Title: ").concat((i==null?void 0:i.jobTitle)||"N/A","\nAmount Paid: ").concat(p(Kn),"\nListing ID: ").concat(a,"\n\n[Please attach your payment screenshot when sending this message]\n\nThank you!");try{await K.updateDocument(h.databaseId,h.collections.therapistJobListings||"therapist_job_listings",a,{whatsappsent:!0,whatsappsentat:new Date().toISOString()})}catch{}window.open("https://wa.me/".concat(vh,"?text=").concat(encodeURIComponent(I)),"_blank"),d(!0)};return l?e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50 flex flex-col",children:[e.jsx("header",{className:"bg-white shadow-md",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{onClick:()=>n==null?void 0:n("massage-jobs"),className:"text-2xl font-bold tracking-tight hover:opacity-80 transition-opacity",children:[e.jsx("span",{className:"text-black",children:"Inda"}),e.jsx("span",{className:"text-orange-500",children:"Street"})]})}),e.jsx("div",{className:"flex items-center gap-3 text-gray-600",children:e.jsx("button",{onClick:s,title:"Menu",children:e.jsx(kh,{className:"w-6 h-6"})})})]})}),e.jsx("div",{className:"bg-white border-b px-4 py-3",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3",children:[e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Go,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Payment Details"}),e.jsx("p",{className:"text-sm text-gray-500",children:"List your service in Find Professionals"})]})]})}),e.jsxs("div",{className:"flex-1 max-w-4xl mx-auto px-4 py-8 space-y-6 w-full",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Listing Fee"}),e.jsx("div",{className:"text-2xl font-bold text-orange-500 mb-4",children:p(Kn)}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"One-time fee to list your profile in Find Professionals for 90 days."})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bank Transfer"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Bank"}),e.jsx("span",{className:"font-medium",children:m.name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Account"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono font-medium",children:m.accountNumber}),e.jsx("button",{onClick:()=>f(m.accountNumber),className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(Ic,{className:"w-4 h-4 text-gray-500"})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Account Name"}),e.jsx("span",{className:"font-medium",children:m.accountName})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[e.jsx("span",{className:"text-gray-600",children:"Amount"}),e.jsx("span",{className:"font-bold text-orange-500",children:p(Kn)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Next Steps"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-600 text-sm",children:[e.jsxs("li",{children:["Transfer ",p(Kn)," to the account above"]}),e.jsx("li",{children:"Take a screenshot of your payment confirmation"}),e.jsx("li",{children:"Click the button below to send your payment proof via WhatsApp"}),e.jsx("li",{children:"Our team will verify and activate your listing within 1-2 business days"})]})]}),e.jsx("button",{onClick:y,disabled:c,className:"w-full py-4 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-semibold rounded-xl transition-colors flex items-center justify-center gap-2",children:c?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"w-5 h-5"}),"WhatsApp Opened ‚Äì Send Your Screenshot"]}):e.jsx(e.Fragment,{children:"Send Payment Proof via WhatsApp"})})]})]})},ny=Object.freeze(Object.defineProperty({__proto__:null,default:wh},Symbol.toStringTag,{value:"Module"})),Nh=({therapist:a,onStatusChange:t,onNavigateToDashboard:n,onNavigateToHome:s,onLogout:i,t:r})=>{const[l,o]=u.useState((a==null?void 0:a.status)||ke.Offline),[c,d]=u.useState((a==null?void 0:a.discountPercentage)||null),[m,p]=u.useState((a==null?void 0:a.discountDuration)||null),[f,y]=u.useState(!1),[I,P]=u.useState(120),[D,j]=u.useState(null),[E,T]=u.useState(null);u.useEffect(()=>{const _=()=>{if(!a||a.status!==ke.Busy||!a.busyUntil){j(null);return}const U=new Date(a.busyUntil).getTime(),$=Date.now(),H=U-$;if(H<=0){j("00m");return}const Y=Math.ceil(H/6e4),ae=Math.floor(Y/60),F=Y%60;j(ae>0?"".concat(ae,"h ").concat(F,"m"):"".concat(F,"m"))};_();const L=setInterval(_,3e4);return()=>clearInterval(L)},[a]),u.useEffect(()=>{const _=()=>{if(!(a!=null&&a.isDiscountActive)||!a.discountEndTime){T(null);return}const U=new Date(a.discountEndTime).getTime(),$=Date.now(),H=U-$;if(H<=0){T("expired");return}const Y=Math.ceil(H/6e4),ae=Math.floor(Y/60),F=Y%60,V=Math.floor(ae/24),pe=ae%24;V>0?T("".concat(V,"d ").concat(pe,"h")):ae>0?T("".concat(ae,"h ").concat(F,"m")):T("".concat(F,"m"))};_();const L=setInterval(_,6e4);return()=>clearInterval(L)},[a==null?void 0:a.isDiscountActive,a==null?void 0:a.discountEndTime]),u.useEffect(()=>{a&&o(a.status)},[a]);const x=async _=>{o(_);try{const L={status:_.toLowerCase(),availability:_};if(_===ke.Busy){const U=I||120,$=new Date(Date.now()+U*60*1e3).toISOString();L.bookedUntil=$,L.busyDuration=U,L.busy=$,L.available=""}else _===ke.Available?(L.available=new Date().toISOString(),L.busy="",L.bookedUntil=null,L.busyDuration=null):(L.available="",L.busy="",L.bookedUntil=null,L.busyDuration=null);if(a){const U=await Sa.update(String(a.$id||a.id),L);mt("Status set: ".concat(_),"success"),window.dispatchEvent(new CustomEvent("refreshData",{detail:{source:"therapist-status-update",therapistId:a.id,newStatus:_}}))}}catch{mt("Status update failed","error")}t(_)},A=async()=>{if(!(!a||c==null||m==null)){y(!0);try{const _=new Date(Date.now()+m*60*60*1e3).toISOString(),L=await Sa.update(String(a.$id||a.id),{discountPercentage:c,discountDuration:m,discountEndTime:_,isDiscountActive:!0});mt("Discount applied","success")}catch{mt("Discount failed","error")}finally{y(!1)}}},S=async()=>{if(a){y(!0);try{await Sa.update(String(a.$id||a.id),{discountPercentage:0,discountDuration:0,discountEndTime:null,isDiscountActive:!1}),d(null),p(null),mt("Discount cleared","success")}catch{mt("Clear failed","error")}finally{y(!1)}}},C={[ke.Available]:{bg:"bg-green-500",hoverBg:"hover:bg-green-600",text:"text-white",label:"Available",icon:"üõèÔ∏è",description:"Ready to accept bookings"},[ke.Busy]:{bg:"bg-yellow-500",hoverBg:"hover:bg-yellow-600",text:"text-white",label:"Busy",icon:"‚è≥",description:"Currently with a client"},[ke.Offline]:{bg:"bg-red-500",hoverBg:"hover:bg-red-600",text:"text-white",label:"Offline",icon:"‚òï",description:"Not accepting bookings"}};return e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gradient-to-br from-orange-50 via-white to-amber-50",children:[e.jsx("div",{className:"w-full bg-white border-b shadow-sm",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-orange-500 to-amber-500 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"I"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Status Dashboard"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage your availability & promotions"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:n,className:"text-xs px-3 py-2 rounded-lg bg-orange-100 text-orange-700 hover:bg-orange-200 font-medium",children:"Profile"})})]})}),e.jsx("main",{className:"flex items-center justify-center p-4 py-8",children:e.jsxs("div",{className:"w-full max-w-4xl space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 px-6 py-4",children:[e.jsx("h2",{className:"text-white text-lg font-bold",children:"üü¢ Online Status"}),e.jsx("p",{className:"text-green-100 text-sm",children:"Set your availability for customers"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>x(ke.Available),className:"relative aspect-square rounded-2xl border-4 transition-all transform hover:scale-105 ".concat(l===ke.Available?"bg-green-500 border-green-600 shadow-lg":"bg-white border-gray-300 hover:border-green-400"),children:[e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-4",children:[e.jsx("div",{className:"text-5xl mb-2 ".concat(l===ke.Available?"animate-bounce":""),children:"‚úÖ"}),e.jsx("div",{className:"text-lg font-bold ".concat(l===ke.Available?"text-white":"text-gray-700"),children:"Available"}),e.jsx("div",{className:"text-xs mt-1 ".concat(l===ke.Available?"text-green-100":"text-gray-500"),children:"Ready for bookings"})]}),l===ke.Available&&e.jsx("div",{className:"absolute top-2 right-2 w-4 h-4 bg-white rounded-full animate-pulse"})]}),e.jsxs("button",{onClick:()=>x(ke.Busy),className:"relative aspect-square rounded-2xl border-4 transition-all transform hover:scale-105 ".concat(l===ke.Busy?"bg-yellow-500 border-yellow-600 shadow-lg":"bg-white border-gray-300 hover:border-yellow-400"),children:[e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-4",children:[e.jsx("div",{className:"text-5xl mb-2",children:"‚è≥"}),e.jsx("div",{className:"text-lg font-bold ".concat(l===ke.Busy?"text-white":"text-gray-700"),children:"Busy"}),e.jsx("div",{className:"text-xs mt-1 ".concat(l===ke.Busy?"text-yellow-100":"text-gray-500"),children:"With a client"})]}),l===ke.Busy&&D&&e.jsx("div",{className:"absolute bottom-2 left-2 right-2 bg-white/90 rounded px-2 py-1 text-xs font-semibold text-yellow-700 text-center",children:D})]}),e.jsx("button",{onClick:()=>x(ke.Offline),className:"relative aspect-square rounded-2xl border-4 transition-all transform hover:scale-105 ".concat(l===ke.Offline?"bg-red-500 border-red-600 shadow-lg":"bg-white border-gray-300 hover:border-red-400"),children:e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-4",children:[e.jsx("div",{className:"text-5xl mb-2",children:"üî¥"}),e.jsx("div",{className:"text-lg font-bold ".concat(l===ke.Offline?"text-white":"text-gray-700"),children:"Offline"}),e.jsx("div",{className:"text-xs mt-1 ".concat(l===ke.Offline?"text-red-100":"text-gray-500"),children:"Not available"})]})})]}),e.jsx("div",{className:"bg-gray-50 border-2 border-gray-200 rounded-xl p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full ".concat(l===ke.Available?"bg-green-500 animate-pulse":l===ke.Busy?"bg-yellow-500":"bg-red-500")}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Current Status:"}),e.jsx("span",{className:"text-sm font-bold ".concat(l===ke.Available?"text-green-600":l===ke.Busy?"text-yellow-600":"text-red-600"),children:C[l].label})]})})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 px-6 py-4",children:[e.jsx("h2",{className:"text-white text-lg font-bold",children:"üéØ Discount Badge"}),e.jsx("p",{className:"text-orange-100 text-sm",children:"Add a promotion badge to your profile card"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Select Discount Percentage:"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:[10,15,20,30].map(_=>e.jsx("button",{onClick:()=>d(_),className:"aspect-square rounded-xl border-3 transition-all transform hover:scale-105 ".concat(c===_?"bg-orange-500 border-orange-600 text-white shadow-lg":"bg-white border-gray-300 hover:border-orange-400 text-gray-700"),children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsxs("div",{className:"text-3xl font-bold ".concat(c===_?"text-white":"text-orange-600"),children:[_,"%"]}),e.jsx("div",{className:"text-xs mt-1 ".concat(c===_?"text-orange-100":"text-gray-500"),children:"OFF"})]})},_))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Select Duration:"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[4,8,12].map(_=>e.jsxs("button",{onClick:()=>p(_),className:"py-4 rounded-xl border-3 transition-all transform hover:scale-105 ".concat(m===_?"bg-amber-500 border-amber-600 text-white shadow-lg":"bg-white border-gray-300 hover:border-amber-400 text-gray-700"),children:[e.jsxs("div",{className:"text-2xl font-bold ".concat(m===_?"text-white":"text-amber-600"),children:[_,"h"]}),e.jsxs("div",{className:"text-xs mt-1 ".concat(m===_?"text-amber-100":"text-gray-500"),children:[_," hours"]})]},_))})]}),(a==null?void 0:a.isDiscountActive)&&e.jsx("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-semibold text-orange-900",children:"Active Discount: "}),e.jsxs("span",{className:"text-lg font-bold text-orange-600",children:[a.discountPercentage,"% OFF"]})]}),E&&E!=="expired"&&e.jsxs("div",{className:"text-sm text-orange-700",children:["Ends in: ",e.jsx("span",{className:"font-bold",children:E})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{disabled:f||c==null||m==null,onClick:A,className:"flex-1 px-6 py-4 rounded-xl bg-gradient-to-r from-orange-600 to-amber-600 text-white font-bold text-lg hover:from-orange-700 hover:to-amber-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transition-all transform hover:scale-[1.02]",children:f?"‚è≥ Activating...":"üöÄ Activate Discount"}),e.jsx("button",{disabled:f||!(a!=null&&a.isDiscountActive),onClick:S,className:"px-6 py-4 rounded-xl bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Clear"})]}),e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 text-sm text-blue-900",children:[e.jsx("p",{className:"font-semibold mb-2",children:"üí° How it works:"}),e.jsxs("ul",{className:"space-y-1 text-xs",children:[e.jsx("li",{children:"‚Ä¢ Select discount percentage (10-30%)"}),e.jsx("li",{children:"‚Ä¢ Choose how long it runs (4-12 hours)"}),e.jsx("li",{children:'‚Ä¢ Click "Activate Discount" to publish'}),e.jsx("li",{children:"‚Ä¢ Badge appears instantly on your profile card"}),e.jsx("li",{children:"‚Ä¢ Discount ends automatically after time expires"})]})]})]})]})]})})]})},sy=Object.freeze(Object.defineProperty({__proto__:null,default:Nh},Symbol.toStringTag,{value:"Module"})),Sh=({className:a="w-6 h-6"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),jh=({className:a="w-6 h-6"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Ih=({onNavigate:a})=>{const[t,n]=u.useState(!1);return e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50",children:[e.jsx("header",{className:"p-4 bg-white sticky top-0 z-20 shadow-sm",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-2xl font-bold",children:[e.jsx("span",{className:"text-black",children:"Inda"}),e.jsxs("span",{className:"text-orange-500",children:[e.jsx("span",{className:"inline-block animate-float",children:"S"}),"treet"]})]}),e.jsx("div",{className:"flex items-center gap-4 text-gray-600",children:e.jsx("button",{onClick:()=>n(!0),title:"Menu",children:e.jsx(Sh,{className:"w-6 h-6"})})})]})}),t&&e.jsxs("div",{className:"fixed inset-0 z-50",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:()=>n(!1),"aria-hidden":"true"}),e.jsxs("div",{className:"absolute right-0 top-0 bottom-0 w-[70%] sm:w-80 bg-gradient-to-br from-white via-gray-50 to-gray-100 shadow-2xl flex flex-col transform transition-transform ease-in-out duration-300 ".concat(t?"translate-x-0":"translate-x-full"),children:[e.jsxs("div",{className:"p-6 flex justify-between items-center",children:[e.jsxs("h2",{className:"font-bold text-2xl",children:[e.jsx("span",{className:"text-black",children:"inda"}),e.jsx("span",{className:"text-orange-500",children:"Street"})]}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-600 hover:bg-gray-200 p-2 rounded-full transition-all","aria-label":"Close menu",children:e.jsx(jh,{})})]}),e.jsx("nav",{className:"flex-grow  p-4",children:e.jsx("div",{className:"space-y-2",children:e.jsxs("button",{onClick:()=>a("home"),className:"flex items-center gap-4 w-full text-left p-4 rounded-xl bg-white shadow-sm hover:shadow-md transition-all duration-200 border-l-4 border-orange-500 group",children:[e.jsx("span",{className:"text-2xl",children:"üè†"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"font-semibold text-gray-800 group-hover:text-orange-600 transition-colors",children:"Back to Home"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Return to main page"})]})]})})})]})]}),e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gradient-to-br from-teal-50 via-white to-blue-50",children:[e.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-blue-600 text-white py-20 relative bg-cover bg-center",style:{backgroundImage:"url(https://ik.imagekit.io/7grri5v7d/massage%20places%20indonisea.png?updatedAt=1761571657409)"},children:[e.jsx("div",{className:"absolute inset-0 bg-black/30"}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 text-center relative z-10",children:[e.jsx("h1",{className:"text-5xl font-bold mb-6 drop-shadow-[0_2px_8px_rgba(0,0,0,0.8)]",children:"üßò For Therapists"}),e.jsx("p",{className:"text-xl text-white max-w-3xl mx-auto drop-shadow-[0_2px_8px_rgba(0,0,0,0.8)]",children:"Join Indonesia's leading wellness marketplace and grow your massage therapy business"})]})]}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-16",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100 p-8 mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2 text-center",children:"Why Join IndaStreet as a Therapist?"}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl p-4 pb-20 mb-8 mx-auto max-w-md",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:"FREE TO JOIN!"})]}),e.jsx("p",{className:"text-white font-semibold text-lg",children:"Get 1 Month Free Membership"}),e.jsx("p",{className:"text-green-100 text-sm mt-1",children:"Start building your client base at no cost"})]})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-teal-100 rounded-full flex items-center justify-center mb-4 mx-auto",children:e.jsx("span",{className:"text-3xl",children:"üìà"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Grow Your Client Base"}),e.jsx("p",{className:"text-gray-600",children:"Connect with 50+ hotels, villas, and thousands of direct customers across Indonesia."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4 mx-auto",children:e.jsx("span",{className:"text-3xl",children:"üí∞"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Flexible Pricing"}),e.jsx("p",{className:"text-gray-600",children:"Set your own rates and negotiate directly with clients. No hidden commissions."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mb-4 mx-auto",children:e.jsx("span",{className:"text-3xl",children:"üì±"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Easy Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage your profile, bookings, and availability through our simple dashboard."})]})]})]}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2 text-center",children:"Affordable Membership Packages"}),e.jsx("p",{className:"text-center text-green-600 font-semibold text-lg mb-8",children:"üéâ First Month FREE for all new members!"}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow border-2 border-green-500 relative",children:[e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-1 rounded-full text-sm font-bold",children:"FREE"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"1st Month"}),e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"FREE"}),e.jsx("div",{className:"text-sm text-gray-500 line-through mb-4",children:"IDR 100K"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Perfect for getting started"}),e.jsxs("ul",{className:"text-left text-sm text-gray-600 space-y-2",children:[e.jsx("li",{children:"‚úì Profile verification"}),e.jsx("li",{children:"‚úì Booking dashboard"}),e.jsx("li",{children:"‚úì WhatsApp integration"}),e.jsx("li",{children:"‚úì Search visibility"})]})]})]}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow border-2 border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"After 1st Month"}),e.jsx("div",{className:"text-3xl font-bold text-teal-600 mb-4",children:"IDR 100K"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Continue with monthly"}),e.jsxs("ul",{className:"text-left text-sm text-gray-600 space-y-2",children:[e.jsx("li",{children:"‚úì Profile verification"}),e.jsx("li",{children:"‚úì Booking dashboard"}),e.jsx("li",{children:"‚úì WhatsApp integration"}),e.jsx("li",{children:"‚úì Search visibility"})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow border-2 border-teal-500",children:[e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsx("span",{className:"bg-teal-500 text-white px-3 py-1 rounded-full text-xs font-bold",children:"POPULAR"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"3 Months"}),e.jsx("div",{className:"text-3xl font-bold text-teal-600 mb-2",children:"IDR 250K"}),e.jsx("div",{className:"text-sm text-green-600 font-bold mb-4",children:"Save 17%"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Best value for growth"}),e.jsxs("ul",{className:"text-left text-sm text-gray-600 space-y-2",children:[e.jsx("li",{children:"‚úì All basic features"}),e.jsx("li",{children:"‚úì Priority support"}),e.jsx("li",{children:"‚úì Featured placement"}),e.jsx("li",{children:"‚úì Analytics dashboard"})]})]})]}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow border-2 border-gray-200 relative",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"6 Months"}),e.jsx("div",{className:"text-3xl font-bold text-teal-600 mb-2",children:"IDR 450K"}),e.jsx("div",{className:"text-sm text-green-600 font-bold mb-4",children:"Save 25%"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Long-term commitment"}),e.jsxs("ul",{className:"text-left text-sm text-gray-600 space-y-2",children:[e.jsx("li",{children:"‚úì All popular features"}),e.jsx("li",{children:"‚úì Premium badge"}),e.jsx("li",{children:"‚úì Marketing support"}),e.jsx("li",{children:"‚úì Priority listings"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-600 to-blue-600 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow text-white relative",children:[e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsx("span",{className:"bg-orange-500 text-white px-3 py-1 rounded-full text-xs font-bold",children:"BEST DEAL"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"1 Year"}),e.jsx("div",{className:"text-3xl font-bold mb-2",children:"IDR 800K"}),e.jsx("div",{className:"text-sm font-bold mb-4",children:"Save 33%"}),e.jsx("p",{className:"text-sm mb-4",children:"Maximum savings"}),e.jsxs("ul",{className:"text-left text-sm space-y-2",children:[e.jsx("li",{children:"‚úì All premium features"}),e.jsx("li",{children:"‚úì VIP support"}),e.jsx("li",{children:"‚úì Top search ranking"}),e.jsx("li",{children:"‚úì Exclusive perks"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-blue-50 rounded-2xl p-8 mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"How to Get Started"}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-teal-600 text-white rounded-full flex items-center justify-center text-xl font-bold mb-4 mx-auto",children:"1"}),e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Create Profile"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Sign up and fill in your details, certifications, and specializations"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 text-white rounded-full flex items-center justify-center text-xl font-bold mb-4 mx-auto",children:"2"}),e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Get Verified"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Upload certifications for admin verification and approval"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-600 text-white rounded-full flex items-center justify-center text-xl font-bold mb-4 mx-auto",children:"3"}),e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Choose Package"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Select membership plan and complete payment via bank transfer"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-600 text-white rounded-full flex items-center justify-center text-xl font-bold mb-4 mx-auto",children:"4"}),e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Start Earning"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive bookings via WhatsApp and grow your business"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100 p-8 mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Required Certifications"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border-l-4 border-teal-500 pl-6 py-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"‚úì Accepted Certifications"}),e.jsxs("ul",{className:"text-gray-600 space-y-2",children:[e.jsx("li",{children:"‚Ä¢ Traditional Balinese Massage Certificate"}),e.jsx("li",{children:"‚Ä¢ Swedish Massage Certification"}),e.jsx("li",{children:"‚Ä¢ Deep Tissue Therapy"}),e.jsx("li",{children:"‚Ä¢ Aromatherapy Certification"}),e.jsx("li",{children:"‚Ä¢ Reflexology Training"}),e.jsx("li",{children:"‚Ä¢ Sports Massage Qualification"}),e.jsx("li",{children:"‚Ä¢ Thai Massage Certificate"}),e.jsx("li",{children:"‚Ä¢ Any recognized professional qualification"})]})]}),e.jsxs("div",{className:"border-l-4 border-blue-500 pl-6 py-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"üìã Verification Process"}),e.jsxs("ul",{className:"text-gray-600 space-y-2",children:[e.jsx("li",{children:"‚Ä¢ Upload clear photos/scans of certificates"}),e.jsx("li",{children:"‚Ä¢ Include certification number if available"}),e.jsx("li",{children:"‚Ä¢ Provide institution name and date"}),e.jsx("li",{children:"‚Ä¢ Admin reviews within 24-48 hours"}),e.jsx("li",{children:"‚Ä¢ Get verified badge on approval"}),e.jsx("li",{children:"‚Ä¢ Profile goes live immediately after payment"})]})]})]})]}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Platform Features"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[e.jsx("div",{className:"w-12 h-12 bg-teal-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-2xl",children:"üìç"})}),e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Multi-Location Support"}),e.jsx("p",{className:"text-sm text-gray-600",children:"List multiple service areas across Bali, Jakarta, Yogyakarta, and other cities"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-2xl",children:"üí¨"})}),e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"WhatsApp Integration"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Direct booking requests sent to your WhatsApp for instant communication"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-2xl",children:"üìä"})}),e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Track profile views, booking requests, and performance metrics"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-2xl",children:"üéØ"})}),e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Specialty Tags"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Highlight your expertise in specific massage techniques and treatments"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-2xl",children:"üíº"})}),e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Job Opportunities"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get discovered by hotels seeking permanent therapist employees"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-2xl",children:"üåü"})}),e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Client Reviews"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Build your reputation with verified client ratings and testimonials"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-blue-50 rounded-2xl p-8 mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Therapist Success Stories"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-teal-100 rounded-full flex items-center justify-center mr-4",children:e.jsx("span",{className:"text-2xl",children:"üë©"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:"Made Wayan"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Traditional Balinese"})]})]}),e.jsx("p",{className:"text-gray-600 italic text-sm",children:'"IndaStreet doubled my monthly bookings! I now work with 5 hotels in Seminyak and earn IDR 15 million per month."'}),e.jsx("div",{className:"mt-4 text-yellow-500",children:"‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:e.jsx("span",{className:"text-2xl",children:"üë®"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:"Ketut Agus"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Deep Tissue Specialist"})]})]}),e.jsx("p",{className:"text-gray-600 italic text-sm",children:'"The platform is so easy to use. WhatsApp bookings are instant and I manage everything from my phone. Best decision!"'}),e.jsx("div",{className:"mt-4 text-yellow-500",children:"‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mr-4",children:e.jsx("span",{className:"text-2xl",children:"üë©"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:"Sari Dewi"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Aromatherapy Expert"})]})]}),e.jsx("p",{className:"text-gray-600 italic text-sm",children:'"Found my dream job through the platform! A luxury villa hired me full-time. Thank you IndaStreet!"'}),e.jsx("div",{className:"mt-4 text-yellow-500",children:"‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-blue-600 rounded-2xl p-12 text-center text-white",children:[e.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Ready to Grow Your Business?"}),e.jsx("p",{className:"text-xl mb-8 max-w-2xl mx-auto",children:"Join 500+ professional therapists already earning more with IndaStreet"}),e.jsx("button",{onClick:()=>a("registrationChoice"),className:"px-8 py-4 bg-white text-teal-600 font-bold rounded-lg hover:bg-gray-100 transition-colors shadow-lg text-lg",children:"Sign Up as Therapist"}),e.jsxs("p",{className:"mt-6 text-sm",children:["Have questions? ",e.jsx("button",{onClick:()=>a("contact"),className:"underline font-bold",children:"Contact our team"})]})]})]})]})]})},iy=Object.freeze(Object.defineProperty({__proto__:null,default:Ih},Symbol.toStringTag,{value:"Module"})),Th=()=>e.jsxs("div",{className:"therapist-terms-container",children:[e.jsxs("div",{className:"terms-header",children:[e.jsx("h1",{children:"Therapist Terms & Conditions"}),e.jsx("p",{className:"last-updated",children:"Last Updated: January 1, 2026"}),e.jsx("p",{className:"version",children:"Version 2.0"})]}),e.jsxs("div",{className:"terms-content",children:[e.jsxs("section",{className:"terms-intro",children:[e.jsx("h2",{children:"Introduction"}),e.jsx("p",{children:'By registering as a massage therapist, facial therapist, or wellness provider (collectively "Therapist") on the IndaStreet platform (the "Platform"), you acknowledge that you have read, understood, and agree to be bound by these Therapist Terms & Conditions ("Terms").'}),e.jsxs("p",{children:[e.jsx("strong",{children:"These Terms are legally binding."})," If you do not agree with any provision, you must not register or use the Platform."]})]}),e.jsxs("section",{className:"terms-section critical",children:[e.jsx("div",{className:"section-number",children:"1"}),e.jsx("h2",{children:"Mandatory Booking Response Obligation"}),e.jsx("h3",{children:"1.1 Response Requirement"}),e.jsxs("p",{children:["When your availability status is set to ",e.jsx("strong",{children:'"Available"'})," or",e.jsx("strong",{children:'"Online"'})," on the Platform, you hereby agree and acknowledge that:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:["You ",e.jsx("strong",{children:"must respond"})," to all booking requests within ",e.jsx("strong",{children:"five (5) minutes"}),"of receiving notification from the Platform."]}),e.jsxs("li",{children:['"Response" means either:',e.jsxs("ul",{children:[e.jsx("li",{children:"(a) Accepting the booking request, or"}),e.jsx("li",{children:"(b) Declining the booking request with a valid reason"})]})]}),e.jsxs("li",{children:["Failure to respond within the five (5) minute window constitutes a ",e.jsx("strong",{children:'"Missed Booking"'}),"."]})]}),e.jsx("h3",{children:"1.2 Missed Booking Definition"}),e.jsx("p",{children:'A booking is considered "missed" when:'}),e.jsxs("ul",{children:[e.jsx("li",{children:"No action (accept or decline) is taken within five (5) minutes"}),e.jsx("li",{children:"The booking request expires due to timeout"}),e.jsx("li",{children:"The Platform system logs indicate no timely response"})]}),e.jsx("h3",{children:"1.3 Legal Justification"}),e.jsx("p",{children:"This requirement exists to:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Maintain customer trust and Platform reliability"}),e.jsx("li",{children:"Ensure fair opportunity distribution among therapists"}),e.jsx("li",{children:"Protect the Platform's reputation and business operations"}),e.jsx("li",{children:"Provide customers with timely service confirmation"})]}),e.jsxs("div",{className:"legal-notice",children:[e.jsx("strong",{children:"‚öñÔ∏è LEGAL NOTICE:"}),' By marking yourself as "Available", you represent that you are ready, willing, and able to receive and respond to booking requests immediately. This constitutes an offer to perform services and creates reasonable customer expectations.']})]}),e.jsxs("section",{className:"terms-section critical",children:[e.jsx("div",{className:"section-number",children:"2"}),e.jsx("h2",{children:"Notification Responsibility & Device Readiness"}),e.jsx("h3",{children:"2.1 Technology Acknowledgment"}),e.jsx("p",{children:"You acknowledge and understand that the Platform delivers booking notifications via:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Web Push Notifications (browser-based)"}),e.jsx("li",{children:"Progressive Web App (PWA) notifications"}),e.jsx("li",{children:"In-app alerts and modals"}),e.jsx("li",{children:"Badge counters and visual indicators"}),e.jsx("li",{children:"Email notifications (supplementary)"})]}),e.jsx("h3",{children:"2.2 Sole Responsibility"}),e.jsxs("p",{children:["You, as the Therapist, are ",e.jsx("strong",{children:"solely and exclusively responsible"})," for:"]}),e.jsxs("ol",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Maintaining an Active Login Session:"}),' Ensuring you are logged into the Platform when marked as "Available".']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Enabling Push Notifications:"})," Granting necessary browser and device permissions for notification delivery."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Device Configuration:"})," Ensuring your device is:",e.jsxs("ul",{children:[e.jsx("li",{children:"Not on silent or mute mode (if sound alerts are required)"}),e.jsx("li",{children:"Connected to a stable internet connection"}),e.jsx("li",{children:"Running a compatible browser version"}),e.jsx("li",{children:"Not in battery-saving mode that restricts notifications"})]})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Platform Monitoring:"}),' Actively checking the Platform when your status is "Available".']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Browser/App Status:"})," Keeping the Platform open or the PWA installed and running to receive notifications."]})]}),e.jsx("h3",{children:"2.3 Platform Non-Liability"}),e.jsxs("p",{children:[e.jsx("strong",{children:"The Platform is NOT responsible"})," for missed bookings resulting from:"]}),e.jsxs("ul",{children:[e.jsx("li",{children:"Device on silent, mute, or do-not-disturb mode"}),e.jsx("li",{children:"Network connectivity issues (Wi-Fi, mobile data)"}),e.jsx("li",{children:"Browser or operating system restrictions on notifications"}),e.jsx("li",{children:"Device battery dead or powered off"}),e.jsx("li",{children:"Notification permissions not granted"}),e.jsx("li",{children:"Platform app/browser not actively open or running"}),e.jsx("li",{children:"Third-party browser extensions blocking notifications"}),e.jsx("li",{children:"Operating system updates requiring app restart"}),e.jsx("li",{children:"Any other technical issue on the Therapist's end"})]}),e.jsxs("div",{className:"legal-notice warning",children:[e.jsx("strong",{children:"‚ö†Ô∏è IMPORTANT:"}),' The Platform provides reasonable notification mechanisms. It is your professional obligation to ensure you are equipped to receive them. "I didn\'t hear/see the notification" is not a valid defense for missed bookings.']})]}),e.jsxs("section",{className:"terms-section critical",children:[e.jsx("div",{className:"section-number",children:"3"}),e.jsx("h2",{children:"Performance-Based Availability Scoring System"}),e.jsx("h3",{children:"3.1 Scoring System Overview"}),e.jsxs("p",{children:["The Platform operates an automated ",e.jsx("strong",{children:"Availability Score"})," system (0-100 points) that tracks and measures therapist responsiveness."]}),e.jsx("h3",{children:"3.2 Score Calculation"}),e.jsx("p",{children:"Your Availability Score is calculated based on:"}),e.jsxs("table",{className:"scoring-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Action"}),e.jsx("th",{children:"Response Time"}),e.jsx("th",{children:"Points"}),e.jsx("th",{children:"Impact"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"positive",children:[e.jsx("td",{children:"Accept Booking"}),e.jsx("td",{children:"< 1 minute"}),e.jsx("td",{children:e.jsx("strong",{children:"+7 points"})}),e.jsx("td",{children:"Excellent"})]}),e.jsxs("tr",{className:"positive",children:[e.jsx("td",{children:"Accept Booking"}),e.jsx("td",{children:"1-5 minutes"}),e.jsx("td",{children:e.jsx("strong",{children:"+5 points"})}),e.jsx("td",{children:"Good"})]}),e.jsxs("tr",{className:"neutral",children:[e.jsx("td",{children:"Accept Booking"}),e.jsx("td",{children:"> 5 minutes"}),e.jsx("td",{children:"+2 points"}),e.jsx("td",{children:"Late but better than miss"})]}),e.jsxs("tr",{className:"neutral",children:[e.jsx("td",{children:"Decline Booking"}),e.jsx("td",{children:"Any (with reason)"}),e.jsx("td",{children:"0 points"}),e.jsx("td",{children:"No penalty"})]}),e.jsxs("tr",{className:"negative",children:[e.jsx("td",{children:"Missed Booking"}),e.jsx("td",{children:"> 5 minutes"}),e.jsx("td",{children:e.jsx("strong",{children:"-10 points"})}),e.jsx("td",{children:"Significant penalty"})]}),e.jsxs("tr",{className:"negative-severe",children:[e.jsx("td",{children:"Missed Booking (3+ consecutive)"}),e.jsx("td",{children:"> 5 minutes"}),e.jsx("td",{children:e.jsx("strong",{children:"-20 points"})}),e.jsx("td",{children:"Severe penalty"})]})]})]}),e.jsx("h3",{children:"3.3 Visibility & Ranking Adjustment"}),e.jsxs("p",{children:[e.jsx("strong",{children:"The Platform reserves the right"})," to automatically adjust your:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Search Visibility:"})," Your ranking in customer search results"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Booking Priority:"})," Your position in booking request queues"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Featured Status:"}),' Eligibility for "Top Therapist" or featured placements']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Badge Display:"}),' Visibility of "Highly Responsive" and similar badges']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Profile Prominence:"})," Display priority on the Platform homepage"]})]}),e.jsx("h3",{children:"3.4 Score Ranges & Effects"}),e.jsxs("table",{className:"score-ranges-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Score Range"}),e.jsx("th",{children:"Classification"}),e.jsx("th",{children:"Search Visibility"}),e.jsx("th",{children:"Badges"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"elite",children:[e.jsx("td",{children:"90-100"}),e.jsx("td",{children:"Elite"}),e.jsx("td",{children:"1.5x boost (50% increase)"}),e.jsx("td",{children:"üåü Highly Responsive, Lightning Fast"})]}),e.jsxs("tr",{className:"excellent",children:[e.jsx("td",{children:"80-89"}),e.jsx("td",{children:"Excellent"}),e.jsx("td",{children:"1.2x boost (20% increase)"}),e.jsx("td",{children:"‚úÖ Responsive, Quick Responder"})]}),e.jsxs("tr",{className:"good",children:[e.jsx("td",{children:"60-79"}),e.jsx("td",{children:"Good"}),e.jsx("td",{children:"1.0x (Normal visibility)"}),e.jsx("td",{children:"Standard profile"})]}),e.jsxs("tr",{className:"fair",children:[e.jsx("td",{children:"40-59"}),e.jsx("td",{children:"Fair"}),e.jsx("td",{children:"0.6x penalty (40% reduction)"}),e.jsx("td",{children:"‚ö†Ô∏è Warning displayed"})]}),e.jsxs("tr",{className:"poor",children:[e.jsx("td",{children:"0-39"}),e.jsx("td",{children:"Needs Improvement"}),e.jsx("td",{children:"0.3x penalty (70% reduction)"}),e.jsx("td",{children:"üö´ Improvement Required flag"})]})]})]}),e.jsx("h3",{children:"3.5 Automated & Non-Negotiable"}),e.jsx("p",{children:e.jsx("strong",{children:"You acknowledge and agree that:"})}),e.jsxs("ul",{children:[e.jsxs("li",{children:["Score adjustments are ",e.jsx("strong",{children:"automated"})," and calculated by platform algorithms"]}),e.jsxs("li",{children:["Visibility changes are ",e.jsx("strong",{children:"non-negotiable"})," and applied immediately"]}),e.jsxs("li",{children:["The system is ",e.jsx("strong",{children:"applied equally"})," to all therapists without discrimination"]}),e.jsxs("li",{children:["Scores are based on ",e.jsx("strong",{children:"objective metrics"})," (timestamps, response logs)"]}),e.jsxs("li",{children:["You have ",e.jsx("strong",{children:"no right to dispute"})," automated score calculations unless proven system error"]})]}),e.jsxs("div",{className:"legal-notice",children:[e.jsx("strong",{children:"‚öñÔ∏è LEGAL BASIS:"})," This performance-based system is standard practice in marketplace platforms (Uber, DoorDash, Airbnb) and is necessary to maintain platform quality, customer satisfaction, and fair competition among service providers."]})]}),e.jsxs("section",{className:"terms-section critical",children:[e.jsx("div",{className:"section-number",children:"4"}),e.jsx("h2",{children:"Penalties for Missed Bookings & Non-Responsiveness"}),e.jsx("h3",{children:"4.1 Penalty Authority"}),e.jsxs("p",{children:[e.jsx("strong",{children:"The Platform may apply one or more of the following actions"})," in response to missed bookings, repeated non-responsiveness, or poor availability scores:"]}),e.jsx("h3",{children:"4.2 Progressive Enforcement Actions"}),e.jsxs("ol",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"First Tier: Visibility Reduction"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Automatic lowering of search ranking"}),e.jsx("li",{children:'Removal from "Featured Therapists" section'}),e.jsx("li",{children:'Badge removal ("Highly Responsive", "Top Rated")'}),e.jsx("li",{children:"No notification to therapist (automatic enforcement)"})]})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Second Tier: Booking Eligibility Suspension"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Temporary suspension from receiving new booking requests (24-72 hours)"}),e.jsx("li",{children:"Warning notice displayed on therapist dashboard"}),e.jsx("li",{children:"Required acknowledgment of terms before re-activation"})]})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Third Tier: Extended Suspension"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Suspension from Platform for 7-30 days"}),e.jsx("li",{children:"Removal from all customer-facing search results"}),e.jsx("li",{children:"Mandatory performance improvement plan"}),e.jsx("li",{children:"May require re-verification or re-training"})]})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Fourth Tier: Permanent Account Deactivation"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Permanent removal from the Platform"}),e.jsx("li",{children:"Loss of all accumulated reviews and ratings"}),e.jsx("li",{children:"Ineligibility for future re-registration"}),e.jsxs("li",{children:["Applied in cases of:",e.jsxs("ul",{children:[e.jsx("li",{children:"Chronic non-responsiveness (10+ missed bookings in 30 days)"}),e.jsx("li",{children:"Availability score consistently below 30 for 60+ days"}),e.jsx("li",{children:"Repeated violations of platform policies"}),e.jsx("li",{children:"Evidence of intentional booking manipulation"})]})]})]})]})]}),e.jsx("h3",{children:"4.3 Enforcement Criteria"}),e.jsx("p",{children:"Penalties are applied based on:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Frequency:"})," Number of missed bookings within a rolling 30-day period"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Severity:"})," Impact on customers and Platform operations"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Pattern:"})," Consistent poor performance vs. isolated incidents"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Score Trend:"})," Declining vs. improving availability scores"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Customer Impact:"})," Number of customers affected by no-shows or delays"]})]}),e.jsx("h3",{children:"4.4 No Refund or Compensation"}),e.jsx("p",{children:e.jsx("strong",{children:"You acknowledge and agree that:"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"No refund of any fees or commissions will be issued upon suspension or termination"}),e.jsx("li",{children:"You are not entitled to compensation for lost bookings during suspension"}),e.jsx("li",{children:"The Platform has no obligation to restore your account or data after termination"}),e.jsxs("li",{children:["Penalties are ",e.jsx("strong",{children:"in addition to"})," any other remedies available to the Platform"]})]}),e.jsxs("div",{className:"legal-notice warning",children:[e.jsx("strong",{children:"‚ö†Ô∏è CRITICAL:"})," Repeated missed bookings directly harm customer experience, damage Platform reputation, and violate the fundamental performance expectations set forth in these Terms. The Platform has a legitimate business interest in maintaining service quality through enforcement actions."]})]}),e.jsxs("section",{className:"terms-section critical",children:[e.jsx("div",{className:"section-number",children:"5"}),e.jsx("h2",{children:"Platform-Only Communication Policy"}),e.jsx("h3",{children:"5.1 Exclusive Communication Channel"}),e.jsx("p",{children:e.jsx("strong",{children:"All booking-related communication MUST occur exclusively within the Platform."})}),e.jsx("p",{children:'"Booking-related communication" includes but is not limited to:'}),e.jsxs("ul",{children:[e.jsx("li",{children:"Initial booking inquiries and requests"}),e.jsx("li",{children:"Service details, pricing, and availability discussions"}),e.jsx("li",{children:"Appointment confirmations and modifications"}),e.jsx("li",{children:"Pre-appointment coordination (arrival time, location details)"}),e.jsx("li",{children:"Payment discussions and receipt confirmations"}),e.jsx("li",{children:"Post-service follow-up and feedback"})]}),e.jsx("h3",{children:"5.2 Strict Prohibition on External Contact"}),e.jsx("p",{children:e.jsx("strong",{children:"Therapists are STRICTLY PROHIBITED from:"})}),e.jsxs("ol",{children:[e.jsx("li",{children:"Requesting customer phone numbers for direct contact"}),e.jsx("li",{children:"Requesting customer email addresses"}),e.jsx("li",{children:"Requesting customer WhatsApp, Telegram, or other messaging app contacts"}),e.jsx("li",{children:"Sharing their own phone number or WhatsApp with customers"}),e.jsx("li",{children:"Encouraging customers to contact them outside the Platform"}),e.jsx("li",{children:"Coordinating bookings through any channel other than the Platform"}),e.jsx("li",{children:"Arranging direct payments that bypass Platform commission"}),e.jsx("li",{children:"Soliciting customers for future bookings outside the Platform"})]}),e.jsx("h3",{children:"5.3 Legal Justification for This Policy"}),e.jsx("p",{children:"This policy exists to:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Protect Commission Revenue:"})," The Platform earns commission only on tracked bookings"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Ensure Quality Control:"})," Platform can monitor and resolve disputes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Maintain Customer Privacy:"})," Prevent unauthorized use of customer data"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Enable Dispute Resolution:"})," All communication is logged for evidence"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Comply with Data Protection Laws:"})," Customer data must remain within secure Platform"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Prevent Platform Bypass:"})," Customers and therapists building direct relationships outside platform"]})]}),e.jsx("h3",{children:"5.4 Violation Consequences"}),e.jsx("p",{children:e.jsx("strong",{children:"Violation of this policy may result in:"})}),e.jsxs("table",{className:"violation-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Offense"}),e.jsx("th",{children:"First Violation"}),e.jsx("th",{children:"Second Violation"}),e.jsx("th",{children:"Third Violation"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Requesting customer contact"}),e.jsx("td",{children:"7-day suspension"}),e.jsx("td",{children:"30-day suspension"}),e.jsx("td",{children:"Permanent termination"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Sharing personal contact"}),e.jsx("td",{children:"14-day suspension"}),e.jsx("td",{children:"Permanent termination"}),e.jsx("td",{children:"N/A"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Coordinating direct bookings"}),e.jsx("td",{children:"30-day suspension + fine"}),e.jsx("td",{children:"Permanent termination + legal action"}),e.jsx("td",{children:"N/A"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Repeated pattern of bypass"}),e.jsx("td",{colSpan:3,children:"Immediate permanent termination + legal action for lost revenue"})]})]})]}),e.jsx("h3",{children:"5.5 Monitoring & Enforcement"}),e.jsx("p",{children:e.jsx("strong",{children:"You acknowledge and agree that:"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"The Platform may monitor all in-platform messages for policy compliance"}),e.jsx("li",{children:"Automated systems may flag suspicious communication patterns"}),e.jsx("li",{children:"Customer reports of external contact requests will be investigated"}),e.jsx("li",{children:"Evidence of policy violations may result in immediate action without prior warning"}),e.jsx("li",{children:"The Platform reserves the right to share evidence of violations with legal authorities if fraud is suspected"})]}),e.jsxs("div",{className:"legal-notice danger",children:[e.jsx("strong",{children:"üö® SEVERE VIOLATION:"})," Attempting to bypass the Platform by coordinating bookings externally constitutes breach of contract, violation of commission agreements, and potential fraud. The Platform reserves all legal remedies including pursuing lost commission revenue through legal action."]})]}),e.jsxs("section",{className:"terms-section critical",children:[e.jsx("div",{className:"section-number",children:"6"}),e.jsx("h2",{children:"Platform Authority & Final Determination"}),e.jsx("h3",{children:"6.1 Platform's Final Authority"}),e.jsxs("p",{children:[e.jsx("strong",{children:"You acknowledge and irrevocably agree that the Platform retains final, absolute, and non-appealable authority"})," in determining:"]}),e.jsxs("ul",{children:[e.jsx("li",{children:"Whether a booking was missed or properly responded to"}),e.jsx("li",{children:"Accuracy of availability scores and performance metrics"}),e.jsx("li",{children:"Appropriateness of visibility adjustments and ranking changes"}),e.jsx("li",{children:"Application of penalties, suspensions, or terminations"}),e.jsx("li",{children:"Interpretation of policy violations"}),e.jsx("li",{children:"Resolution of disputes between therapists and customers"}),e.jsx("li",{children:"Any other matter related to Platform operations and these Terms"})]}),e.jsx("h3",{children:"6.2 Evidentiary Standard"}),e.jsx("p",{children:e.jsx("strong",{children:"Decisions based on the following shall be considered final and conclusive:"})}),e.jsxs("ol",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"System Logs:"})," Platform database records, timestamps, and API logs"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Automated Metrics:"})," Response times, acceptance rates, score calculations"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Notification Delivery Records:"})," Push notification sent timestamps and delivery confirmations"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"User Action Timestamps:"})," Login times, page views, button clicks"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Platform Analytics:"})," Aggregate data showing therapist performance patterns"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Customer Reports:"})," Verified customer complaints or feedback"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"In-Platform Messages:"})," All communication logs within the Platform chat system"]})]}),e.jsx("h3",{children:"6.3 Limited Appeal Rights"}),e.jsxs("p",{children:["You may appeal a penalty or termination decision ",e.jsx("strong",{children:"ONLY"})," if you can provide:"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Clear and convincing evidence"})," of a Platform system error (e.g., server logs showing notification failure on Platform's end)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Technical documentation"})," proving Platform malfunction beyond reasonable doubt"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Third-party verification"})," of extraordinary circumstances (medical emergency, natural disaster, etc.)"]})]}),e.jsx("p",{children:e.jsx("strong",{children:"The following are NOT valid grounds for appeal:"})}),e.jsxs("ul",{children:[e.jsx("li",{children:'"I didn\'t see the notification" (Your responsibility per Section 2)'}),e.jsx("li",{children:'"My phone was on silent" (Your responsibility per Section 2)'}),e.jsx("li",{children:'"I was busy with another customer" (Manage availability status accordingly)'}),e.jsx("li",{children:'"The notification came too fast" (5 minutes is reasonable industry standard)'}),e.jsx("li",{children:'"This is unfair" (Subjective opinion; policy applies equally to all)'}),e.jsx("li",{children:'"I disagree with the score" (Scores are objective algorithmic calculations)'})]}),e.jsx("h3",{children:"6.4 No Obligation to Provide Service"}),e.jsx("p",{children:e.jsx("strong",{children:"You acknowledge that:"})}),e.jsxs("ul",{children:[e.jsxs("li",{children:["The Platform operates as a ",e.jsx("strong",{children:"marketplace"}),", not an employer"]}),e.jsxs("li",{children:["The Platform has ",e.jsx("strong",{children:"no obligation"})," to provide you with bookings"]}),e.jsxs("li",{children:["You are an ",e.jsx("strong",{children:"independent contractor"}),", not an employee or agent"]}),e.jsxs("li",{children:["The Platform may ",e.jsx("strong",{children:"terminate your account at any time"})," for any reason or no reason, with or without notice"]}),e.jsx("li",{children:"These Terms do not create any partnership, joint venture, or employment relationship"})]}),e.jsx("h3",{children:"6.5 Waiver of Legal Claims"}),e.jsx("p",{children:e.jsx("strong",{children:"By accepting these Terms, you waive any right to:"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"Sue the Platform for enforcement of these policies"}),e.jsx("li",{children:"Claim lost income due to visibility reduction or suspension"}),e.jsx("li",{children:"Demand restoration of account or data after termination"}),e.jsx("li",{children:"Challenge the Platform's scoring algorithms or enforcement decisions"}),e.jsx("li",{children:"Seek injunctive relief to prevent account suspension or termination"})]}),e.jsxs("div",{className:"legal-notice",children:[e.jsx("strong",{children:"‚öñÔ∏è BINDING AGREEMENT:"})," This section establishes the Platform's authority to enforce all policies in these Terms. By continuing to use the Platform, you acknowledge that you have read, understood, and voluntarily agreed to be bound by these provisions."]})]}),e.jsxs("section",{className:"terms-section",children:[e.jsx("div",{className:"section-number",children:"7"}),e.jsx("h2",{children:"Additional Terms"}),e.jsx("h3",{children:"7.1 Modification of Terms"}),e.jsx("p",{children:"The Platform reserves the right to modify these Terms at any time. You will be notified of material changes via email or in-app notification. Continued use of the Platform after modification constitutes acceptance of the updated Terms."}),e.jsx("h3",{children:"7.2 Severability"}),e.jsx("p",{children:"If any provision of these Terms is found to be unenforceable or invalid, that provision shall be limited or eliminated to the minimum extent necessary, and the remaining provisions shall remain in full force and effect."}),e.jsx("h3",{children:"7.3 Governing Law"}),e.jsx("p",{children:"These Terms shall be governed by and construed in accordance with the laws of the Republic of Indonesia, without regard to conflict of law principles."}),e.jsx("h3",{children:"7.4 Dispute Resolution"}),e.jsx("p",{children:"Any dispute arising from these Terms shall be resolved through binding arbitration in Bali, Indonesia, in accordance with the rules of the Indonesian National Board of Arbitration (BANI)."}),e.jsx("h3",{children:"7.5 Entire Agreement"}),e.jsx("p",{children:"These Terms, together with the Platform's Privacy Policy and General Terms of Service, constitute the entire agreement between you and the Platform regarding your use of the Platform as a therapist."})]}),e.jsxs("section",{className:"terms-acceptance",children:[e.jsx("h2",{children:"Acceptance & Acknowledgment"}),e.jsx("p",{children:'By clicking "I Accept" or "Register" or by using the Platform as a therapist, you acknowledge that:'}),e.jsxs("ul",{children:[e.jsx("li",{children:"‚úÖ You have read and understood these Therapist Terms & Conditions in their entirety"}),e.jsx("li",{children:"‚úÖ You agree to be legally bound by all provisions"}),e.jsx("li",{children:"‚úÖ You understand the penalties for missed bookings and policy violations"}),e.jsx("li",{children:"‚úÖ You accept the Platform's authority to enforce these Terms"}),e.jsx("li",{children:"‚úÖ You waive any rights that conflict with these Terms"}),e.jsx("li",{children:"‚úÖ You understand this is a legally binding contract"})]}),e.jsxs("div",{className:"signature-section",children:[e.jsx("p",{children:e.jsx("strong",{children:"IndaStreet Platform"})}),e.jsx("p",{children:"Effective Date: January 1, 2026"}),e.jsx("p",{children:"Version 2.0 - Includes Platform-Only Communication & Availability Scoring"})]})]})]})]}),ry=Object.freeze(Object.defineProperty({__proto__:null,default:Th},Symbol.toStringTag,{value:"Module"})),Ah=({value:a,onChange:t,minDate:n,label:s="Select Date"})=>{const[i,r]=u.useState(!1),[l,o]=u.useState(new Date),c=u.useRef(null);u.useEffect(()=>{const C=_=>{c.current&&!c.current.contains(_.target)&&r(!1)};return i&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[i]),u.useEffect(()=>{a&&o(new Date(a))},[a]);const d=C=>new Date(C.getFullYear(),C.getMonth()+1,0).getDate(),m=C=>new Date(C.getFullYear(),C.getMonth(),1).getDay(),p=C=>C.toISOString().split("T")[0],f=C=>C?new Date(C):null,y=C=>n?C<new Date(n):!1,I=C=>{const _=new Date;return C.toDateString()===_.toDateString()},P=C=>{if(!a)return!1;const _=f(a);return _&&C.toDateString()===_.toDateString()},D=C=>{const _=new Date(l.getFullYear(),l.getMonth(),C);y(_)||(t(p(_)),r(!1))},j=()=>{o(new Date(l.getFullYear(),l.getMonth()-1))},E=()=>{o(new Date(l.getFullYear(),l.getMonth()+1))},T=()=>{const C=new Date;t(p(C)),o(C),r(!1)},x=()=>{t(""),r(!1)},A=()=>{const C=[],_=d(l),L=m(l);for(let U=0;U<L;U++)C.push(e.jsx("div",{className:"aspect-square p-2"},"empty-".concat(U)));for(let U=1;U<=_;U++){const $=new Date(l.getFullYear(),l.getMonth(),U),H=y($),Y=P($),ae=I($);C.push(e.jsx("button",{type:"button",onClick:()=>D(U),disabled:H,className:"aspect-square p-2 text-sm font-medium rounded-lg transition-all ".concat(Y?"bg-green-500 text-white shadow-lg scale-110":ae?"bg-orange-100 text-orange-600 border-2 border-orange-500":H?"text-gray-300 cursor-not-allowed":"text-white hover:bg-gray-700"),children:U},U))}return C},S=a?new Date(a).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}):"Select a date";return e.jsxs("div",{ref:c,className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Ia,{className:"w-4 h-4 inline mr-1"}),s]}),e.jsxs("button",{type:"button",onClick:()=>r(!i),className:"w-full px-4 py-2 bg-white border-2 border-gray-300 rounded-xl focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all text-gray-800 text-left flex items-center justify-between",children:[e.jsx("span",{children:S}),e.jsx(Ia,{className:"w-5 h-5 text-gray-400"})]}),i&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-900 rounded-xl shadow-2xl border border-gray-700 z-[10000] overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-800 px-4 py-3 flex items-center justify-between border-b border-gray-700",children:[e.jsx("button",{type:"button",onClick:j,className:"p-2 hover:bg-gray-700 rounded-lg transition-all",children:e.jsx(Go,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"text-white font-bold text-center",children:l.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("button",{type:"button",onClick:E,className:"p-2 hover:bg-gray-700 rounded-lg transition-all",children:"‚Üí"})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 px-4 py-2 bg-gray-800 border-b border-gray-700",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(C=>e.jsx("div",{className:"text-xs font-medium text-gray-400 text-center",children:C},C))}),e.jsx("div",{className:"grid grid-cols-7 gap-1 p-4 bg-gray-900",children:A()}),e.jsxs("div",{className:"flex gap-2 px-4 py-3 bg-gray-800 border-t border-gray-700",children:[e.jsx("button",{type:"button",onClick:x,className:"flex-1 px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-all font-medium",children:"Clear"}),e.jsx("button",{type:"button",onClick:T,className:"flex-1 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-all font-medium",children:"Today"})]})]})]})},Ch="https://syd.cloud.appwrite.io/v1",Ph="68f23b11000d25eb3664",Dh="validateDiscount";async function Eh(a,t={}){if(!a||a.trim().length===0)return{success:!1,valid:!1,error:"EMPTY_CODE",message:"Please enter a discount code"};try{const n=new ct().setEndpoint(Ch).setProject(Ph),i=await new ss(n).createExecution(Dh,JSON.stringify({action:"validate",code:a.toUpperCase().trim(),userId:t.userId,providerId:t.providerId}),!1),r=JSON.parse(i.responseBody||"{}");return r.valid,r}catch{return{success:!1,valid:!1,error:"NETWORK_ERROR",message:"Could not validate code. Please try again."}}}function Mh({booking:a,onAccept:t,onDecline:n,onExpire:s,isVisible:i,className:r=""}){const[l,o]=u.useState(0),[c,d]=u.useState(!1),[m,p]=u.useState(!1),[f,y]=u.useState(!1),[I,P]=u.useState("");u.useEffect(()=>{if(!i)return;const L=()=>{const $=Date.now(),H=a.expiresAt-$;H<=0?(o(0),s(a.id)):o(H)};L();const U=setInterval(L,100);return()=>clearInterval(U)},[a.expiresAt,a.id,s,i]);const D=L=>{if(!Number.isFinite(L)||L<0)return"--:--";const U=Math.ceil(L/1e3),$=Math.floor(U/60),H=U%60;return"".concat($,":").concat(H.toString().padStart(2,"0"))},E=(()=>{const L=l/1e3;return L<=60?"critical":L<=120?"warning":"normal"})(),x={critical:{bg:"bg-red-500",text:"text-white",border:"border-red-600",pulse:"animate-pulse",timerBg:"bg-red-600",shadow:"shadow-red-500/50"},warning:{bg:"bg-orange-500",text:"text-white",border:"border-orange-600",pulse:"animate-bounce",timerBg:"bg-orange-600",shadow:"shadow-orange-500/50"},normal:{bg:"bg-blue-500",text:"text-white",border:"border-blue-600",pulse:"",timerBg:"bg-blue-600",shadow:"shadow-blue-500/50"}}[E],A=async()=>{d(!0);try{await t(a.id)}catch{alert("Failed to accept booking. Please try again."),d(!1)}},S=()=>{y(!0)},C=async()=>{if(!I.trim()){alert("Please provide a reason for declining");return}p(!0);try{await n(a.id,I)}catch{alert("Failed to decline booking. Please try again."),p(!1)}},_=L=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(L);return i?e.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50 ".concat(r),children:[e.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm"}),e.jsxs("div",{className:"relative mx-4 mt-4 rounded-xl shadow-2xl ".concat(x.shadow," ").concat(x.bg," ").concat(x.text," overflow-hidden"),children:[e.jsx("div",{className:"absolute inset-0 rounded-xl border-2 ".concat(x.border," ").concat(x.pulse)}),e.jsx("div",{className:"p-4 border-b border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full ".concat(x.timerBg," ").concat(x.pulse)}),e.jsx("h1",{className:"text-lg font-bold",children:"üö® New Booking Request"}),a.bookingType==="book_now"&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-white/20 rounded-full",children:"üî• URGENT"})]}),e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg ".concat(x.timerBg," ").concat(x.pulse),children:[e.jsx(We,{className:"w-5 h-5"}),e.jsx("span",{className:"text-2xl font-mono font-bold",children:D(l)})]})]})}),f?e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-200",children:[e.jsx(Et,{className:"w-5 h-5"}),e.jsx("h3",{className:"font-semibold",children:"Why are you declining this booking?"})]}),e.jsx("textarea",{value:I,onChange:L=>P(L.target.value),placeholder:"Please provide a reason...",className:"w-full p-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:border-white/40 resize-none",rows:3}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:C,disabled:m||!I.trim(),className:"flex-1 flex items-center justify-center gap-2 py-3 px-4 bg-red-600 hover:bg-red-700 disabled:bg-red-600/50 text-white font-semibold rounded-lg transition-colors",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Declining..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-5 h-5"}),"Confirm Decline"]})}),e.jsx("button",{onClick:()=>y(!1),disabled:m,className:"px-6 py-3 bg-white/20 hover:bg-white/30 text-white font-semibold rounded-lg transition-colors",children:"Cancel"})]})]}):e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/10 rounded-lg",children:[e.jsx(Ut,{className:"w-5 h-5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs opacity-80",children:"Customer"}),e.jsx("div",{className:"font-semibold",children:a.customerName}),a.customerPhone&&e.jsx("div",{className:"text-xs opacity-70",children:a.customerPhone})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/10 rounded-lg",children:[e.jsx(da,{className:"w-5 h-5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs opacity-80",children:"Service"}),e.jsx("div",{className:"font-semibold",children:a.service}),e.jsxs("div",{className:"text-xs opacity-70",children:[a.duration," minutes"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/10 rounded-lg",children:[e.jsx(Mt,{className:"w-5 h-5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs opacity-80",children:"Location"}),e.jsx("div",{className:"font-semibold text-sm",children:a.location})]})]}),(a.date||a.time)&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/10 rounded-lg",children:[e.jsx(Ia,{className:"w-5 h-5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs opacity-80",children:"Scheduled"}),e.jsx("div",{className:"font-semibold",children:a.date&&a.time?"".concat(a.date," ").concat(a.time):a.bookingType==="book_now"?"Now":"Flexible"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/10 rounded-lg",children:[e.jsx(zo,{className:"w-5 h-5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs opacity-80",children:"Total Payment"}),e.jsx("div",{className:"font-bold text-lg",children:_(a.totalPrice)}),a.discountCode&&a.originalPrice&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"line-through opacity-60",children:_(a.originalPrice)}),e.jsxs("span",{className:"bg-green-500/20 px-2 py-1 rounded",children:[a.discountCode," (-",a.discountPercentage,"%)"]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:A,disabled:c||m,className:"flex-1 flex items-center justify-center gap-2 py-3 px-4 bg-green-600 hover:bg-green-700 disabled:bg-green-600/50 text-white font-semibold rounded-lg transition-colors",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Accepting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"w-5 h-5"}),"Accept Booking"]})}),e.jsxs("button",{onClick:S,disabled:c||m,className:"flex-1 flex items-center justify-center gap-2 py-3 px-4 bg-red-600 hover:bg-red-700 disabled:bg-red-600/50 text-white font-semibold rounded-lg transition-colors",children:[e.jsx(Qe,{className:"w-5 h-5"}),"Decline"]})]})]})]})]}):null}class Rh{constructor(){Z(this,"audioContext",null);Z(this,"audioBuffers",new Map);Z(this,"isSupported",!1);Z(this,"sounds",new Map);this.initializeAudioContext(),this.loadDefaultSounds(),this.requestNotificationPermission()}initializeAudioContext(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.isSupported=!0,document.addEventListener("click",this.resumeAudioContext.bind(this),{once:!0}),document.addEventListener("touchstart",this.resumeAudioContext.bind(this),{once:!0})}catch{this.isSupported=!1}}resumeAudioContext(){this.audioContext&&this.audioContext.state==="suspended"&&this.audioContext.resume()}loadDefaultSounds(){this.sounds.set("booking",{type:"booking",file:"/sounds/booking-notification.mp3",volume:.8}),this.sounds.set("chat",{type:"chat",file:"/sounds/message-notification.mp3",volume:.7}),this.sounds.set("coin",{type:"coin",file:"/sounds/success-notification.mp3",volume:.9}),this.sounds.set("general",{type:"general",file:"/sounds/booking-notification.mp3",volume:.6}),this.sounds.set("urgent",{type:"urgent",file:"/sounds/alert-notification.mp3",volume:1}),this.sounds.set("success",{type:"success",file:"/sounds/success-notification.mp3",volume:.8}),this.sounds.set("achievement",{type:"achievement",file:"/sounds/success-notification.mp3",volume:.9})}async requestNotificationPermission(){return"Notification"in window?await Notification.requestPermission()==="granted":!1}async loadAudioBuffer(t){if(!this.audioContext||!this.isSupported)return null;try{const s=await(await fetch(t)).arrayBuffer();return await this.audioContext.decodeAudioData(s)}catch{return null}}async playAudioBuffer(t,n=.7){if(!(!this.audioContext||!t))try{const s=this.audioContext.createBufferSource(),i=this.audioContext.createGain();s.buffer=t,i.gain.value=n,s.connect(i),i.connect(this.audioContext.destination),s.start()}catch{}}playAudioFallback(t,n=.7){try{const s=new Audio(t);s.volume=n,s.play().catch(i=>{})}catch{}}async playNotification(t,n){var o,c;const s=this.sounds.get(t),i=(n==null?void 0:n.customUrl)||(s==null?void 0:s.file)||"/sounds/general-notification.mp3",r=(c=(o=n==null?void 0:n.volume)!=null?o:s==null?void 0:s.volume)!=null?c:.7;let l=this.audioBuffers.get(i);if(!l){const d=await this.loadAudioBuffer(i);d&&(this.audioBuffers.set(i,d),l=d)}this.isSupported&&l?await this.playAudioBuffer(l,r):this.playAudioFallback(i,r)}async playBookingSound(t){await this.playNotification("booking",{volume:t})}async playChatSound(t){await this.playNotification("chat",{volume:t})}async playCoinSound(t=1){let n=.7,s="coin";t>=100?(n=1,s="achievement"):t>=50?(n=.9,s="success"):t>=25&&(n=.8),await this.playNotification(s,{volume:n})}async playUrgentSound(){await this.playNotification("urgent")}async playGeneralSound(t){await this.playNotification("general",{volume:t})}async preloadSounds(){const t=Array.from(this.sounds.values()).map(async n=>{if(!this.audioBuffers.has(n.file)){const s=await this.loadAudioBuffer(n.file);s&&this.audioBuffers.set(n.file,s)}});await Promise.all(t)}async showNotificationWithSound(t,n){if((n==null?void 0:n.playSound)!==!1&&await this.playNotification((n==null?void 0:n.soundType)||"general"),"Notification"in window&&Notification.permission==="granted")try{const s=new Notification(t,{icon:"/icons/notification-icon.png",badge:"/icons/badge-icon.png",tag:"massage-app-notification",requireInteraction:!1,silent:!0,...n});setTimeout(()=>{s.close()},5e3)}catch{}}async testSound(t="general"){await this.playNotification(t,{forcePlay:!0})}getSoundConfig(t){return this.sounds.get(t)}updateSoundConfig(t,n){const s=this.sounds.get(t);s&&this.sounds.set(t,{...s,...n})}isAudioSupported(){return this.isSupported}setNotificationsEnabled(t){localStorage.setItem("notifications_enabled",t.toString())}areNotificationsEnabled(){const t=localStorage.getItem("notifications_enabled");return t===null?!0:t==="true"}}const Bh=new Rh,Wa=class Wa{constructor(){Z(this,"audioService");Z(this,"preferences",{sound:!0,vibration:!0,autoOpenChat:!0,volume:.8});Z(this,"activeNotifications",new Map);Z(this,"notificationHandlers",[]);this.initializeAudio(),this.setupLocationTracking(),this.requestPermissions()}static getInstance(){return Wa.instance||(Wa.instance=new Wa),Wa.instance}async initializeAudio(){try{this.audioService=Bh,W.info("üîä Therapist audio service initialized")}catch(t){W.error("Failed to initialize audio service:",t)}}setupLocationTracking(){if(typeof window!="undefined"){const t=()=>{const n=document.referrer,s=new Date().toISOString(),i=navigator.userAgent;Ju.getCurrentLocation().then(r=>{W.info("üìç User location tracked:",{entryTime:s,referrer:n,userAgent:i,location:r?{lat:r.lat,lng:r.lng,accuracy:r.accuracy||"N/A"}:"Permission denied"}),sessionStorage.setItem("userEntryData",JSON.stringify({entryTime:s,referrer:n,userAgent:i,location:r}))}).catch(r=>{W.info("üìç Location tracking blocked:",r.message)})};document.readyState==="complete"?t():window.addEventListener("load",t)}}async requestPermissions(){try{"Notification"in window&&await Notification.requestPermission(),"vibrate"in navigator&&W.info("üì≥ Vibration supported")}catch(t){W.warn("Permission request failed:",t)}}async notifyBookingRequest(t){if(W.info("üîî Sending booking notification to therapist:",t.bookingId),this.activeNotifications.set(t.bookingId,t),this.preferences.sound&&this.audioService)try{await this.audioService.playSound("booking",{volume:this.preferences.volume,loop:!0,stopOnAction:!0})}catch(n){W.warn("Failed to play notification sound:",n)}this.preferences.vibration&&"vibrate"in navigator&&navigator.vibrate([800,200,800,200,800]),this.showBrowserNotification(t),this.preferences.autoOpenChat&&this.openChatWindow(t),this.notificationHandlers.forEach(n=>n(t)),setTimeout(()=>{this.expireNotification(t.bookingId)},300*1e3)}showBrowserNotification(t){if("Notification"in window&&Notification.permission==="granted"){const n=new Notification("New Booking Request",{body:"".concat(t.customerName," wants a ").concat(t.duration,"min ").concat(t.serviceType," massage at ").concat(t.location.address),icon:"/icon-192.png",badge:"/icon-192.png",tag:"booking-".concat(t.bookingId),requireInteraction:!0,actions:[{action:"accept",title:"Accept"},{action:"reject",title:"Reject"}]});n.onclick=()=>{this.openChatWindow(t),n.close()}}}openChatWindow(t){const n=new CustomEvent("openTherapistChat",{detail:{bookingId:t.bookingId,customerId:t.customerId,customerName:t.customerName,booking:t}});window.dispatchEvent(n)}async acceptBooking(t){this.activeNotifications.get(t)&&(W.info("‚úÖ Therapist accepted booking:",t),this.audioService&&this.audioService.stopSound("booking"),this.audioService&&await this.audioService.playSound("success",{volume:.6}),"vibrate"in navigator&&navigator.vibrate([100,50,100]),this.activeNotifications.delete(t),await this.sendBookingResponse(t,"accepted"))}async rejectBooking(t,n){this.activeNotifications.get(t)&&(W.info("‚ùå Therapist rejected booking: ".concat(t," - ").concat(n)),this.audioService&&this.audioService.stopSound("booking"),this.activeNotifications.delete(t),await this.sendBookingResponse(t,"rejected",n))}async sendBookingResponse(t,n,s){try{const i=await fetch("/api/booking/respond",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookingId:t,status:n,reason:s,respondedAt:new Date().toISOString()})});if(!i.ok)throw new Error("HTTP error! status: ".concat(i.status));W.info("üì§ Booking ".concat(n," sent to server:"),t)}catch(i){throw W.error("Failed to send booking response:",i),i}}expireNotification(t){this.activeNotifications.get(t)&&(W.info("‚è∞ Booking notification expired:",t),this.audioService&&this.audioService.stopSound("booking"),this.activeNotifications.delete(t))}onBookingNotification(t){return this.notificationHandlers.push(t),()=>{const n=this.notificationHandlers.indexOf(t);n>-1&&this.notificationHandlers.splice(n,1)}}getActiveNotifications(){return Array.from(this.activeNotifications.values())}updatePreferences(t){this.preferences={...this.preferences,...t},W.info("üîß Notification preferences updated:",this.preferences)}getUserEntryData(){if(typeof window!="undefined"){const t=sessionStorage.getItem("userEntryData");return t?JSON.parse(t):null}return null}};Z(Wa,"instance");let yi=Wa;const qs=yi.getInstance();class Lh{constructor(){Z(this,"DEPOSIT_PERCENTAGE",.3);Z(this,"NOTIFICATION_HOURS_BEFORE",5)}async createScheduledBookingWithDeposit(t){try{const n=Math.round(t.totalPrice*this.DEPOSIT_PERCENTAGE),s=t.totalPrice-n,i=n,r={bookingId:t.bookingId,customerId:t.customerId,customerName:t.customerName,therapistId:t.therapistId,therapistName:t.therapistName,providerType:t.providerType,serviceType:t.serviceType,duration:t.duration,totalPrice:t.totalPrice,depositAmount:n,remainingAmount:s,scheduledDate:t.scheduledDate,scheduledTime:t.scheduledTime,location:t.location,coordinates:t.coordinates,depositStatus:"pending",paymentMethod:"bank_transfer",payoutStatus:"pending",payoutAmount:i,isNonRefundable:!0,policyAcknowledgedAt:new Date().toISOString(),noShowStatus:"none",penaltyApplied:!1,remindersSent:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},l=await K.createDocument(h.databaseId,"scheduled_booking_deposits",se.unique(),r);return this.scheduleBookingReminder(l.$id,t.scheduledDate,t.scheduledTime),await this.sendNotification({type:"deposit_paid",recipientId:t.customerId,recipientType:"customer",title:"Deposit Required for Scheduled Booking",message:"Please pay 30% deposit (".concat(this.formatPrice(n),") to confirm your ").concat(t.serviceType," booking on ").concat(t.scheduledDate,". Deposits are non-refundable."),urgent:!0,bookingId:t.bookingId}),{...r,$id:l.$id}}catch(n){throw n}}async processDepositPayment(t,n,s,i){try{const r=se.unique(),l=await Qt.createFile("payment_proofs",r,n),o="".concat(h.endpoint,"/storage/buckets/payment_proofs/files/").concat(r,"/view");await K.updateDocument(h.databaseId,"scheduled_booking_deposits",t,{depositStatus:"paid",paymentMethod:s,paymentProofUrl:o,paidAt:new Date().toISOString(),updatedAt:new Date().toISOString()});const c=await K.getDocument(h.databaseId,"scheduled_booking_deposits",t);await this.sendNotification({type:"deposit_paid",recipientId:c.therapistId,recipientType:"therapist",title:"Customer Paid Deposit",message:"".concat(c.customerName," paid ").concat(this.formatPrice(c.depositAmount)," deposit for ").concat(c.serviceType," on ").concat(c.scheduledDate,". Please review and approve."),urgent:!1,bookingId:c.bookingId}),await this.sendNotification({type:"deposit_paid",recipientId:"admin",recipientType:"admin",title:"Deposit Payment Awaiting Approval",message:"".concat(c.customerName," ‚Üí ").concat(c.therapistName,": ").concat(this.formatPrice(c.depositAmount)," deposit for ").concat(c.serviceType),urgent:!1,bookingId:c.bookingId})}catch(r){throw r}}async approveDepositAndPayout(t,n){try{const s=await K.getDocument(h.databaseId,"scheduled_booking_deposits",t),i=await K.getDocument(h.databaseId,h.collections.therapistsCollection,s.therapistId),r={bankName:i.bankName,accountName:i.accountName,accountNumber:i.accountNumber,swiftCode:i.swiftCode,isVerified:!0,verifiedAt:i.bankVerifiedAt};if(!r.accountNumber)throw new Error("Therapist bank details not complete");await K.updateDocument(h.databaseId,"scheduled_booking_deposits",t,{depositStatus:"approved",approvedAt:new Date().toISOString(),approvedBy:n,payoutStatus:"processed",payoutDate:new Date().toISOString(),payoutReference:"PAYOUT_".concat(Date.now()),updatedAt:new Date().toISOString()}),await this.createPayoutRecord(s,r),await this.sendNotification({type:"deposit_approved",recipientId:s.customerId,recipientType:"customer",title:"Booking Confirmed",message:"Your ".concat(s.serviceType," booking with ").concat(s.therapistName," is confirmed for ").concat(s.scheduledDate," at ").concat(s.scheduledTime,". You will receive a reminder 5 hours before your appointment."),urgent:!1,bookingId:s.bookingId}),await this.sendNotification({type:"payout_sent",recipientId:s.therapistId,recipientType:"therapist",title:"Deposit Payout Sent",message:"".concat(this.formatPrice(s.payoutAmount)," has been sent to your ").concat(r.bankName," account ending in ").concat(r.accountNumber.slice(-4)," for booking on ").concat(s.scheduledDate,"."),urgent:!1,bookingId:s.bookingId}),await this.displayBankCardInChat(s,r)}catch(s){throw s}}scheduleBookingReminder(t,n,s){try{const i=new Date("".concat(n,"T").concat(s)),r=new Date(i.getTime()-this.NOTIFICATION_HOURS_BEFORE*60*60*1e3),l=new Date;if(r>l){const o=r.getTime()-l.getTime();setTimeout(()=>{this.sendBookingReminder(t)},o)}}catch{}}async sendBookingReminder(t){try{const n=await K.getDocument(h.databaseId,"scheduled_booking_deposits",t),s=new Date().toISOString();await K.updateDocument(h.databaseId,"scheduled_booking_deposits",t,{remindersSent:[...n.remindersSent,s],lastReminderAt:s,updatedAt:new Date().toISOString()}),await this.sendNotification({type:"reminder_5h",recipientId:n.customerId,recipientType:"customer",title:"Upcoming Appointment Reminder",message:"Your ".concat(n.serviceType," appointment with ").concat(n.therapistName," is in 5 hours at ").concat(n.scheduledTime,". Location: ").concat(n.location,". Remember: deposits are non-refundable."),urgent:!0,bookingId:n.bookingId}),await this.sendNotification({type:"reminder_5h",recipientId:n.therapistId,recipientType:"therapist",title:"Upcoming Booking Reminder",message:"You have a ".concat(n.serviceType," appointment with ").concat(n.customerName," in 5 hours at ").concat(n.scheduledTime,". Location: ").concat(n.location,"."),urgent:!0,bookingId:n.bookingId})}catch{}}async reportNoShow(t,n,s){try{const i=await K.getDocument(h.databaseId,"scheduled_booking_deposits",t);await K.updateDocument(h.databaseId,"scheduled_booking_deposits",t,{noShowStatus:"confirmed",noShowReportedAt:new Date().toISOString(),penaltyApplied:!0,updatedAt:new Date().toISOString()}),await this.sendNotification({type:"no_show",recipientId:i.customerId,recipientType:"customer",title:"Booking No-Show - Deposit Forfeited",message:"Your ".concat(this.formatPrice(i.depositAmount)," deposit for the ").concat(i.serviceType," appointment on ").concat(i.scheduledDate," has been forfeited due to no-show. Deposits are non-refundable as per our policy."),urgent:!0,bookingId:i.bookingId}),await this.sendNotification({type:"no_show",recipientId:i.therapistId,recipientType:"therapist",title:"Customer No-Show Confirmed",message:"".concat(i.customerName," did not show up for the ").concat(i.serviceType," appointment. You will keep the ").concat(this.formatPrice(i.payoutAmount)," deposit payment."),urgent:!1,bookingId:i.bookingId})}catch(i){throw i}}async createPayoutRecord(t,n){try{const s={depositId:t.$id,bookingId:t.bookingId,therapistId:t.therapistId,therapistName:t.therapistName,amount:t.payoutAmount,bankName:n.bankName,accountName:n.accountName,accountNumber:n.accountNumber,payoutReference:"PAYOUT_".concat(Date.now()),status:"sent",createdAt:new Date().toISOString()};await K.createDocument(h.databaseId,"therapist_payouts",se.unique(),s)}catch{}}async displayBankCardInChat(t,n){try{const{serverEnforcedChatService:s}=await Ce(async()=>{const{serverEnforcedChatService:l}=await Promise.resolve().then(()=>ao);return{serverEnforcedChatService:l}},void 0),i="üí≥ THERAPIST BANK DETAILS\n      \n‚úÖ Booking Confirmed - Remaining Balance: ".concat(this.formatPrice(t.remainingAmount),"\n\nüè¶ Bank Information:\n‚Ä¢ Bank: ").concat(n.bankName,"\n‚Ä¢ Account Name: ").concat(n.accountName,"\n‚Ä¢ Account Number: ").concat(n.accountNumber,"\n").concat(n.swiftCode?"‚Ä¢ SWIFT Code: ".concat(n.swiftCode):"","\n\n‚ö†Ô∏è IMPORTANT:\n‚Ä¢ Pay remaining ").concat(this.formatPrice(t.remainingAmount)," after service completion\n‚Ä¢ Only pay to these exact bank details\n‚Ä¢ Your ").concat(this.formatPrice(t.depositAmount)," deposit is non-refundable\n‚Ä¢ Report any suspicious payment requests immediately"),r="".concat(t.customerId,"_").concat(t.therapistId);await s.sendMessage({conversationId:r,senderId:"system",senderName:"IndaStreet System",senderRole:"admin",receiverId:t.customerId,receiverName:t.customerName,receiverRole:"customer",message:i,messageType:"bank_card"})}catch{}}async sendNotification(t){try{if(await K.createDocument(h.databaseId,"notifications",se.unique(),{recipientId:t.recipientId,recipientType:t.recipientType,type:t.type,title:t.title,message:t.message,urgent:t.urgent,bookingId:t.bookingId,read:!1,createdAt:new Date().toISOString()}),t.recipientType!=="admin"){const{serverEnforcedChatService:n}=await Ce(async()=>{const{serverEnforcedChatService:i}=await Promise.resolve().then(()=>ao);return{serverEnforcedChatService:i}},void 0),s=t.recipientType==="customer"?"".concat(t.recipientId,"_system"):"system_".concat(t.recipientId);await n.sendMessage({conversationId:s,senderId:"system",senderName:"IndaStreet Notifications",senderRole:"admin",receiverId:t.recipientId,receiverName:t.recipientType.charAt(0).toUpperCase()+t.recipientType.slice(1),receiverRole:t.recipientType,message:"".concat(t.title,"\n\n").concat(t.message),messageType:"system"})}}catch{}}async getScheduledBookingsForDashboard(t,n){try{const s=[b.equal("therapistId",t),b.orderDesc("createdAt")];return n&&n.length>0&&s.push(b.equal("depositStatus",n)),(await K.listDocuments(h.databaseId,"scheduled_booking_deposits",s)).documents}catch{return[]}}formatPrice(t){return"Rp ".concat(t.toLocaleString("id-ID"))}async getUpcomingBookingsForReminders(){try{const t=new Date(Date.now()+18e6),n=new Date(Date.now()+360*60*1e3);return(await K.listDocuments(h.databaseId,"scheduled_booking_deposits",[b.equal("depositStatus","approved"),b.lessThanEqual("scheduledDate",n.toISOString()),b.greaterThanEqual("scheduledDate",t.toISOString())])).documents.filter(i=>!i.remindersSent.some(l=>{const o=new Date(l);return new Date().getTime()-o.getTime()<3600*1e3}))}catch{return[]}}}const Bo=new Lh,Oh=(a,t,n)=>{const[s,i]=u.useState({name:"",countryCode:"+62",whatsApp:"",location:"",locationType:"",coordinates:null,hotelVillaName:"",roomNumber:"",massageFor:"",address1:"",address2:""}),[r,l]=u.useState(""),[o,c]=u.useState(""),[d,m]=u.useState(""),[p,f]=u.useState(null),[y,I]=u.useState(!1),[P,D]=u.useState(null);return u.useEffect(()=>{(a||t==="duration")&&(i({name:"",countryCode:"+62",whatsApp:"",location:"",locationType:"",coordinates:null,hotelVillaName:"",roomNumber:"",massageFor:"",address1:"",address2:""}),D(null),l(""),c(""))},[a,t]),u.useEffect(()=>{i({name:"",countryCode:"+62",whatsApp:"",location:"",locationType:"",coordinates:null,hotelVillaName:"",roomNumber:"",massageFor:"",address1:"",address2:""}),D(null),l(""),c(""),m(""),f(null)},[n]),{customerForm:s,setCustomerForm:i,selectedDate:r,setSelectedDate:l,selectedTime:o,setSelectedTime:c,discountCode:d,setDiscountCode:m,discountValidation:p,setDiscountValidation:f,isValidatingDiscount:y,setIsValidatingDiscount:I,clientMismatchError:P,setClientMismatchError:D,resetForm:()=>{i({name:"",countryCode:"+62",whatsApp:"",location:"",locationType:"",coordinates:null,hotelVillaName:"",roomNumber:"",massageFor:"",address1:"",address2:""}),l(""),c(""),m(""),f(null),D(null)}}},Hs=[{minutes:60,label:"1 Hour"},{minutes:90,label:"1.5 Hours"},{minutes:120,label:"2 Hours"}],Ct=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),vn=a=>new Date(a).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),_h=({isOpen:a,onClose:t,onSubmitPayment:n,depositAmount:s,therapistName:i,scheduledDate:r,scheduledTime:l,serviceType:o,isProcessing:c})=>{const[d,m]=u.useState("bank_transfer"),[p,f]=u.useState(null),[y,I]=u.useState(""),[P,D]=u.useState(!1),[j,E]=u.useState(!1);if(!a)return null;const T=S=>{var _;const C=(_=S.target.files)==null?void 0:_[0];if(C){if(!["image/jpeg","image/png","image/jpg"].includes(C.type)){alert("Please upload a JPG or PNG image file");return}if(C.size>5242880){alert("File size must be less than 5MB");return}f(C)}},x=async()=>{if(!p){alert("Please upload payment proof");return}if(!P){alert("Please accept the terms and conditions");return}try{E(!0),await n(p,d,y)}catch(S){g.error("Failed to submit payment:",S)}finally{E(!1)}},A=S=>"Rp ".concat(S.toLocaleString("id-ID"));return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full mx-4 max-h-[90vh] ",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"üí≥ Pay 30% Deposit"}),e.jsx("button",{onClick:t,disabled:c,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(Qe,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[e.jsxs("h3",{className:"font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"}),"Booking Summary"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Therapist:"}),e.jsx("span",{className:"font-medium text-blue-900",children:i})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Service:"}),e.jsx("span",{className:"font-medium text-blue-900",children:o})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Date & Time:"}),e.jsxs("span",{className:"font-medium text-blue-900",children:[r," at ",l]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-blue-200",children:[e.jsx("span",{className:"text-blue-700",children:"Deposit Required (30%):"}),e.jsx("span",{className:"font-bold text-blue-900 text-lg",children:A(s)})]})]})]}),e.jsx("div",{className:"bg-yellow-50 rounded-xl p-4 border border-yellow-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Et,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"‚ö†Ô∏è Non-Refundable Deposit Policy"}),e.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[e.jsxs("li",{children:["‚Ä¢ Deposits are ",e.jsx("strong",{children:"non-refundable"})," under any circumstances"]}),e.jsx("li",{children:"‚Ä¢ If you don't show up, you forfeit the entire deposit"}),e.jsx("li",{children:"‚Ä¢ Rescheduling requires 24-hour notice (subject to availability)"}),e.jsx("li",{children:"‚Ä¢ Payment secures your appointment slot"})]})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payment Method"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>m("bank_transfer"),className:"p-4 rounded-xl border-2 transition-all ".concat(d==="bank_transfer"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"),children:[e.jsx(_t,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-medium",children:"Bank Transfer"})]}),e.jsxs("button",{type:"button",onClick:()=>m("e_wallet"),className:"p-4 rounded-xl border-2 transition-all ".concat(d==="e_wallet"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"),children:[e.jsx("div",{className:"w-6 h-6 mx-auto mb-2 bg-green-500 rounded text-white text-xs flex items-center justify-center",children:"üí≥"}),e.jsx("div",{className:"text-sm font-medium",children:"E-Wallet"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Payment Instructions"}),e.jsxs("ol",{className:"text-sm text-gray-700 space-y-1",children:[e.jsxs("li",{children:["1. Transfer ",A(s)," to the therapist's account"]}),e.jsx("li",{children:"2. Take a clear photo of the transaction receipt"}),e.jsx("li",{children:"3. Upload the payment proof below"}),e.jsx("li",{children:"4. Add any notes if needed"}),e.jsx("li",{children:"5. Wait for therapist approval (usually within 2 hours)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Payment Proof *"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:T,className:"hidden",id:"payment-proof",disabled:c}),e.jsx("label",{htmlFor:"payment-proof",className:"cursor-pointer",children:p?e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600",children:[e.jsx(Xt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:p.name})]}):e.jsxs("div",{children:[e.jsx(Tc,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload payment proof"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG up to 5MB"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes (Optional)"}),e.jsx("textarea",{value:y,onChange:S=>I(S.target.value),placeholder:"Any additional information about your payment...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3,disabled:c})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",id:"terms",checked:P,onChange:S=>D(S.target.checked),className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500",disabled:c}),e.jsxs("label",{htmlFor:"terms",className:"text-sm text-gray-700",children:["I understand and accept that this deposit is ",e.jsx("strong",{children:"non-refundable"})," and I agree to the booking terms and conditions."]})]}),e.jsxs("div",{className:"flex items-start gap-3 bg-green-50 rounded-xl p-4 border border-green-200",children:[e.jsx(ja,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-green-900",children:"üõ°Ô∏è Security Notice"}),e.jsx("p",{className:"text-xs text-green-800 mt-1",children:"Only pay to the therapist's verified bank account shown in this app. Report any suspicious payment requests immediately."})]})]})]}),e.jsxs("div",{className:"px-6 pb-6 flex gap-3",children:[e.jsx("button",{onClick:t,disabled:c,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:x,disabled:!p||!P||c||j,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:j||c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):"Submit Payment Proof"})]})]})})},ac=Hr({id:sa().min(1,"üö® CRITICAL: Booking ID is required"),bookingId:sa().optional(),status:Gr(["pending","waiting_others","therapist_accepted","user_confirmed","on_the_way","completed","cancelled"],"üö® CRITICAL: Invalid booking status"),serviceType:sa().min(1,"üö® CRITICAL: Service type is required"),duration:un().positive("üö® CRITICAL: Service duration must be positive"),customerName:sa().min(1,"üö® CRITICAL: Customer name is required"),totalPrice:un().positive("üö® CRITICAL: Total price must be positive"),bookingType:Gr(["book_now","scheduled"],"üö® CRITICAL: Invalid booking type"),locationZone:sa().optional(),scheduledDate:sa().optional(),scheduledTime:sa().optional(),coordinates:Hr({lat:un(),lng:un()}).optional(),createdAt:sa().optional(),responseDeadline:sa().optional()}),nc=un().int("üö® CRITICAL: Countdown must be an integer").nonnegative("üö® CRITICAL: Countdown cannot be negative").nullable();function $h(a){try{return ac.parse(a)}catch(t){if(t instanceof Yo){const n=t.issues.map(s=>"".concat(s.path.join("."),": ").concat(s.message)).join("\n");throw new Error("üö® BOOKING VALIDATION FAILED üö®\n\nChat cannot render without valid booking data.\n\nValidation Errors:\n".concat(n,"\n\nThis is a CRITICAL ERROR that must be fixed immediately."))}throw t}}function Uh(a){try{return nc.parse(a)}catch(t){throw t instanceof Yo?new Error("üö® COUNTDOWN TIMER VALIDATION FAILED üö®\n\nTimer state is corrupted: ".concat(t.issues[0].message,"\n\nThis is a CRITICAL ERROR that affects booking UX.")):t}}function Fh(a,t,n="PersistentChatWindow"){if(a&&!t)throw new Error("üö® CRITICAL VIOLATION: ".concat(n," opened without booking data! üö®\n\nRULE VIOLATION: Chat CANNOT render without valid booking object\n\nThis violates the booking-in-chat lock-in rules and must be fixed immediately.\n\nStack trace follows..."))}function Kh(a,t){if(a)throw new Error("üö® CRITICAL VIOLATION: Inline booking banner detected at ".concat(t,"! üö®\n\nRULE VIOLATION: BookingWelcomeBanner is SINGLE SOURCE OF TRUTH\n\nAll booking info must be rendered through BookingWelcomeBanner component.\nInline rendering is FORBIDDEN to prevent regression.\n\nRemove the inline booking render and use BookingWelcomeBanner instead."))}function Wh(a){}function qh(a,t,n){}const Lo={validateBookingData:$h,validateCountdownTimer:Uh,guardChatRequiresBooking:Fh,guardNoInlineBookingBanner:Kh,warnMissingOptionalFields:Wh,validateTimerPersistence:qh,BookingDataSchema:ac,CountdownTimerSchema:nc};class Hh{constructor(){Z(this,"currentSession",null);Z(this,"sessions",[])}startBookingFlow(t,n){const s="booking_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(7));return this.currentSession={sessionId:s,startTime:Date.now(),checkpoints:[],therapistId:t,customerId:n},this.checkpoint("initialization","started",{therapistId:t,customerId:n}),s}checkpoint(t,n,s,i){if(!this.currentSession)return;const r={step:t,timestamp:Date.now(),status:n,data:s,error:i};this.currentSession.checkpoints.push(r),i&&(this.currentSession.failurePoint=t,this.currentSession.failureReason=i)}endBookingFlow(t,n){this.currentSession&&(this.currentSession.endTime=Date.now(),this.currentSession.endTime-this.currentSession.startTime,this.currentSession.checkpoints.forEach((s,i)=>{s.timestamp-this.currentSession.startTime,s.status==="success"||s.status}),this.sessions.push({...this.currentSession}),this.sessions.length>10&&(this.sessions=this.sessions.slice(-10)),this.currentSession=null)}getDiagnosticReport(){return this.currentSession?["‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê","üîç BOOKING FLOW DIAGNOSTIC REPORT","‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê","Session ID: ".concat(this.currentSession.sessionId),"Therapist ID: ".concat(this.currentSession.therapistId||"NOT SET"),"Customer ID: ".concat(this.currentSession.customerId||"NOT SET"),"Duration: ".concat(Date.now()-this.currentSession.startTime,"ms"),"","CHECKPOINTS:",...this.currentSession.checkpoints.map((n,s)=>"".concat(s+1,". [").concat(n.timestamp-this.currentSession.startTime,"ms] ").concat(n.step,": ").concat(n.status)+(n.error?" - ERROR: ".concat(n.error):"")),"",this.currentSession.failurePoint?"‚ùå FAILED AT: ".concat(this.currentSession.failurePoint):"‚úÖ NO FAILURES YET",this.currentSession.failureReason?"Reason: ".concat(this.currentSession.failureReason):"","‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê"].join("\n"):"No active booking session"}getRecentSessions(){return this.sessions}analyzeFailurePatterns(){const t={},n={};return this.sessions.forEach(s=>{s.failurePoint&&(t[s.failurePoint]=(t[s.failurePoint]||0)+1),s.failureReason&&(n[s.failureReason]=(n[s.failureReason]||0)+1)}),{totalSessions:this.sessions.length,failedSessions:this.sessions.filter(s=>s.failurePoint).length,successSessions:this.sessions.filter(s=>!s.failurePoint).length,commonFailurePoints:Object.entries(t).sort((s,i)=>i[1]-s[1]),commonFailureReasons:Object.entries(n).sort((s,i)=>i[1]-s[1])}}}const _a=new Hh;typeof window!="undefined"&&(window.bookingFlowMonitor=_a);const Li="indastreet_booking_draft";function Gh(a){try{const t={...a,savedAt:new Date().toISOString()};sessionStorage.setItem(Li,JSON.stringify(t))}catch{}}function zh(){try{const a=sessionStorage.getItem(Li);if(!a)return null;const t=JSON.parse(a),n=new Date(t.savedAt).getTime();return Date.now()-n>1800*1e3?(sc(),null):t}catch{return null}}function sc(){try{sessionStorage.removeItem(Li)}catch{}}const Vh="indastreet_customer_logged_in";function Yh({isOpen:a,onClose:t,onAuthSuccess:n,language:s="en"}){const[i,r]=u.useState("signin"),[l,o]=u.useState(""),[c,d]=u.useState(""),[m,p]=u.useState(""),[f,y]=u.useState(!1),[I,P]=u.useState(!1),[D,j]=u.useState(null),E={en:{title:"Confirm Your Booking",subtext:"To protect both clients and professionals, please sign in or create your free IndaStreet account to continue.",signIn:"Sign In",createAccount:"Create Account",alreadyHave:"Already have an account? Sign in to continue.",noAccount:"Don't have an account? Create one to continue.",email:"Email",password:"Password",fullName:"Full Name",signInButton:"Sign In & Continue",createButton:"Create Free Account & Continue",trust:"Your information is secure and used only to manage your bookings, deposits, and service communication.",cancel:"Cancel"},id:{title:"Konfirmasi Pemesanan Anda",subtext:"Untuk melindungi klien dan profesional, silakan masuk atau buat akun IndaStreet gratis untuk melanjutkan.",signIn:"Masuk",createAccount:"Buat Akun",alreadyHave:"Sudah punya akun? Masuk untuk melanjutkan.",noAccount:"Belum punya akun? Buat akun untuk melanjutkan.",email:"Email",password:"Kata Sandi",fullName:"Nama Lengkap",signInButton:"Masuk & Lanjutkan",createButton:"Buat Akun Gratis & Lanjutkan",trust:"Informasi Anda aman dan hanya digunakan untuk mengelola pemesanan, deposit, dan komunikasi layanan.",cancel:"Batal"}}[s],T=async A=>{A.preventDefault(),j(null),P(!0);try{await zr(l.trim().toLowerCase(),c);const S=await ca.get();Oo(S),n(S)}catch(S){j((S==null?void 0:S.message)||(s==="id"?"Login gagal. Periksa email dan kata sandi.":"Sign in failed. Check email and password."))}finally{P(!1)}},x=async A=>{if(A.preventDefault(),j(null),!m.trim()){j(s==="id"?"Nama wajib diisi.":"Name is required.");return}if(c.length<8){j(s==="id"?"Kata sandi minimal 8 karakter.":"Password must be at least 8 characters.");return}P(!0);try{await Rc(l.trim().toLowerCase(),c,m.trim()),await zr(l.trim().toLowerCase(),c);const S=await ca.get();Oo(S),n(S)}catch(S){const C=(S==null?void 0:S.message)||"";C.includes("already")||C.includes("exists")?j(s==="id"?"Email sudah terdaftar. Silakan masuk.":"This email is already registered. Please sign in."):j(C||(s==="id"?"Pendaftaran gagal. Coba lagi.":"Registration failed. Please try again."))}finally{P(!1)}};return a?e.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center bg-black/70 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full border-2 border-orange-500 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:E.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:E.subtext})]}),e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex rounded-lg bg-gray-100 p-1 mb-4",children:[e.jsx("button",{type:"button",onClick:()=>{r("signin"),j(null)},className:"flex-1 py-2 text-sm font-medium rounded-md ".concat(i==="signin"?"bg-white text-orange-600 shadow":"text-gray-600"),children:E.signIn}),e.jsx("button",{type:"button",onClick:()=>{r("signup"),j(null)},className:"flex-1 py-2 text-sm font-medium rounded-md ".concat(i==="signup"?"bg-white text-orange-600 shadow":"text-gray-600"),children:E.createAccount})]}),D&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:D}),i==="signin"?e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:E.email}),e.jsxs("div",{className:"relative",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"email",value:l,onChange:A=>o(A.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"you@example.com",required:!0,autoComplete:"email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:E.password}),e.jsxs("div",{className:"relative",children:[e.jsx(Js,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:f?"text":"password",value:c,onChange:A=>d(A.target.value),className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",required:!0,autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:()=>y(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:f?e.jsx(Wr,{className:"h-4 w-4"}):e.jsx(qr,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:E.alreadyHave}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:t,className:"flex-1 py-2.5 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50",children:E.cancel}),e.jsx("button",{type:"submit",disabled:I,className:"flex-1 py-2.5 bg-orange-500 text-white rounded-lg font-semibold hover:bg-orange-600 disabled:opacity-70",children:I?"...":E.signInButton})]})]}):e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:E.fullName}),e.jsxs("div",{className:"relative",children:[e.jsx(Ut,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:m,onChange:A=>p(A.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:s==="id"?"Nama lengkap":"Full name",required:!0,autoComplete:"name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:E.email}),e.jsxs("div",{className:"relative",children:[e.jsx(Kr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"email",value:l,onChange:A=>o(A.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"you@example.com",required:!0,autoComplete:"email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:E.password}),e.jsxs("div",{className:"relative",children:[e.jsx(Js,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:f?"text":"password",value:c,onChange:A=>d(A.target.value),className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:s==="id"?"Min. 8 karakter":"Min. 8 characters",required:!0,minLength:8,autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>y(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:f?e.jsx(Wr,{className:"h-4 w-4"}):e.jsx(qr,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:E.noAccount}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:t,className:"flex-1 py-2.5 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50",children:E.cancel}),e.jsx("button",{type:"submit",disabled:I,className:"flex-1 py-2.5 bg-orange-500 text-white rounded-lg font-semibold hover:bg-orange-600 disabled:opacity-70",children:I?"...":E.createButton})]})]}),e.jsx("p",{className:"mt-4 text-xs text-gray-500 text-center",children:E.trust})]})]})}):null}function Oo(a){try{window.dispatchEvent(new CustomEvent(Vh,{detail:{user:{$id:a.$id,name:a.name,email:a.email}}}))}catch{}}const Jh=({therapist:a,booking:t,onConfirmBooking:n,onCancelBooking:s,onRequestLocation:i,onContactTherapist:r})=>{const l=t.estimatedArrival||45,o=t.acceptedAt?new Date(t.acceptedAt):new Date;return e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-2xl p-4 m-4 shadow-lg",children:[e.jsxs("div",{className:"mb-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl p-4 shadow-lg text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(Xt,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-lg font-bold",children:"Therapist Accepted!"})]}),e.jsxs("p",{className:"text-sm opacity-90",children:[a.name," has accepted your booking and is preparing to visit"]})]}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-green-100 mb-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.image||"/placeholder-avatar.jpg",alt:a.name,className:"w-16 h-16 rounded-full object-cover border-3 border-green-400"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",children:e.jsx(Xt,{className:"w-3 h-3 text-white"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 text-lg",children:a.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ot,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),e.jsxs("span",{children:[a.rating||4.9," ‚Ä¢ Licensed Therapist"]})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Accepted ",vn(o)," ‚Ä¢ Preparing to visit"]})]})]})}),e.jsx("div",{className:"bg-green-100 rounded-xl p-3 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-800",children:"Estimated Arrival"}),e.jsxs("p",{className:"text-green-600 text-sm",children:["~",l," minutes from confirmation"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-700",children:[l,"min"]}),e.jsx("div",{className:"text-xs text-green-600",children:"ETA"})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:n,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-4 rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-[1.02]",children:[e.jsx(Xt,{className:"w-5 h-5"}),"Confirm Booking - Let's Start!"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:r,className:"bg-white border-2 border-green-400 text-green-600 font-semibold py-3 rounded-xl hover:bg-green-50 transition-all flex items-center justify-center gap-2",children:[e.jsx(rs,{className:"w-4 h-4"}),"Chat Now"]}),e.jsxs("button",{onClick:i,className:"bg-white border-2 border-blue-400 text-blue-600 font-semibold py-3 rounded-xl hover:bg-blue-50 transition-all flex items-center justify-center gap-2",children:[e.jsx(Mt,{className:"w-4 h-4"}),"Share Location"]})]}),e.jsx("button",{onClick:s,className:"w-full text-sm text-gray-500 hover:text-gray-700 py-2 transition-colors",children:"Cancel this booking"})]})]})},Qh=({therapist:a,booking:t,onContactTherapist:n,onUpdateLocation:s})=>{const[i,r]=u.useState(t.estimatedArrival||30),[l,o]=u.useState(!0);u.useEffect(()=>{const d=setInterval(()=>{r(m=>Math.max(0,m-1))},6e4);return()=>clearInterval(d)},[]),u.useEffect(()=>{const d=setInterval(()=>{o(m=>!m)},2e3);return()=>clearInterval(d)},[]);const c=t.departedAt?new Date(t.departedAt):new Date;return e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 border border-blue-200 rounded-2xl p-4 m-4 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(Ac,{className:"w-6 h-6 text-white transition-transform duration-500 ".concat(l?"translate-x-1":"translate-x-0")})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white animate-pulse"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-blue-800 text-lg",children:"Therapist On The Way!"}),e.jsxs("p",{className:"text-blue-600 text-sm",children:["üöó ",a.name," is heading to your location"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl p-4 text-white mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Cc,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-lg",children:"Live ETA"}),e.jsxs("p",{className:"text-blue-100 text-sm",children:["Departed ",vn(c)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-3xl font-bold font-mono",children:[i,"min"]}),e.jsx("div",{className:"text-blue-200 text-xs",children:"Arriving Soon"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:e.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-1000 relative overflow-hidden",style:{width:"".concat(Math.max(10,100-i*2),"%")},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"})})}),e.jsxs("div",{className:"flex justify-between text-xs text-blue-200 mt-1",children:[e.jsx("span",{children:"Departed"}),e.jsx("span",{children:"Arriving"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-blue-100 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("img",{src:a.image||"/placeholder-avatar.jpg",alt:a.name,className:"w-12 h-12 rounded-full object-cover border-2 border-blue-400"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600",children:"Licensed Professional"})]})]}),t.currentLocation&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[e.jsx(Mt,{className:"w-4 h-4 text-blue-500"}),e.jsxs("span",{children:["Currently: ",t.currentLocation]})]}),t.notes&&e.jsx("div",{className:"bg-blue-50 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["üí¨ ",e.jsx("strong",{children:"Update:"})," ",t.notes]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-center text-sm text-gray-600 font-medium",children:"Need to contact your therapist?"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:()=>n("whatsapp"),className:"bg-green-500 text-white font-semibold py-3 rounded-xl hover:bg-green-600 transition-all flex flex-col items-center gap-1",children:[e.jsx(en,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"WhatsApp"})]}),e.jsxs("button",{onClick:()=>n("call"),className:"bg-blue-500 text-white font-semibold py-3 rounded-xl hover:bg-blue-600 transition-all flex flex-col items-center gap-1",children:[e.jsx(Ha,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"Call"})]}),e.jsxs("button",{onClick:()=>n("chat"),className:"bg-orange-500 text-white font-semibold py-3 rounded-xl hover:bg-orange-600 transition-all flex flex-col items-center gap-1",children:[e.jsx(en,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"In-App"})]})]}),e.jsxs("button",{onClick:s,className:"w-full bg-white border-2 border-blue-400 text-blue-600 font-semibold py-3 rounded-xl hover:bg-blue-50 transition-all flex items-center justify-center gap-2",children:[e.jsx(Mt,{className:"w-4 h-4"}),"Share My Current Location"]})]}),e.jsxs("div",{className:"mt-4 bg-blue-50 rounded-xl p-4 border border-blue-200",children:[e.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:"üè† Preparation Checklist"}),e.jsxs("div",{className:"space-y-1 text-sm text-blue-700",children:[e.jsx("p",{children:"‚úì Clear path to massage area"}),e.jsx("p",{children:"‚úì Towels and water ready"}),e.jsx("p",{children:"‚úì Phone accessible for updates"}),e.jsx("p",{children:"‚úì Payment method prepared"})]})]})]})},Xh=({therapist:a,booking:t,onStartService:n,onContactTherapist:s,onEmergencyContact:i,onConfirmPaymentMethod:r})=>{const[l,o]=u.useState(null),[c,d]=u.useState(!1),m=t.arrivedAt?new Date(t.arrivedAt):new Date,p=()=>{if(!l){alert("Please select payment method first");return}r(l),n()};return e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-200 rounded-2xl p-4 m-4 shadow-lg",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-500 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(Xt,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"font-bold text-purple-800 text-xl mb-1",children:"üéâ Therapist Has Arrived!"}),e.jsxs("p",{className:"text-purple-600 text-sm",children:[a.name," is here ‚Ä¢ Arrived ",vn(m)]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-purple-100 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.image||"/placeholder-avatar.jpg",alt:a.name,className:"w-16 h-16 rounded-full object-cover border-3 border-purple-400"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",children:e.jsx(Xt,{className:"w-3 h-3 text-white"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 text-lg",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ready to begin your massage"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Mt,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{className:"text-xs text-purple-600",children:t.location||"At your location"})]})]})]}),e.jsxs("button",{onClick:s,className:"w-full bg-purple-100 text-purple-700 font-semibold py-2 rounded-lg hover:bg-purple-200 transition-all flex items-center justify-center gap-2",children:[e.jsx(Ha,{className:"w-4 h-4"}),"Contact Therapist"]})]}),e.jsxs("div",{className:"bg-purple-100 rounded-xl p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(da,{className:"w-5 h-5 text-purple-600"}),e.jsx("h5",{className:"font-semibold text-purple-800",children:"Service Details"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-700",children:"Service:"}),e.jsx("span",{className:"font-semibold text-purple-900",children:t.serviceType})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-700",children:"Duration:"}),e.jsxs("span",{className:"font-semibold text-purple-900",children:[t.duration," minutes"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-700",children:"Total:"}),e.jsx("span",{className:"font-bold text-purple-900 text-lg",children:Ct(t.totalPrice)})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"font-semibold text-purple-800 mb-3 flex items-center gap-2",children:[e.jsx(_t,{className:"w-5 h-5"}),"Select Payment Method"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:()=>o("cash"),className:"p-3 rounded-xl border-2 transition-all ".concat(l==="cash"?"border-purple-500 bg-purple-100 text-purple-700":"border-gray-200 bg-white text-gray-700 hover:border-purple-300"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-1",children:"üíµ"}),e.jsx("div",{className:"font-semibold",children:"Cash"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Pay after service"})]})}),e.jsx("button",{onClick:()=>o("bank_transfer"),className:"p-3 rounded-xl border-2 transition-all ".concat(l==="bank_transfer"?"border-purple-500 bg-purple-100 text-purple-700":"border-gray-200 bg-white text-gray-700 hover:border-purple-300"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-1",children:"üè¶"}),e.jsx("div",{className:"font-semibold",children:"Bank Transfer"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Digital payment"})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-purple-100 mb-4",children:[e.jsx("h5",{className:"font-semibold text-purple-800 mb-3",children:"‚úì Pre-Service Checklist"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"clean-area",defaultChecked:!0,className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),e.jsx("label",{htmlFor:"clean-area",className:"text-sm text-gray-700",children:"Massage area is clean and prepared"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"towels-ready",defaultChecked:!0,className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),e.jsx("label",{htmlFor:"towels-ready",className:"text-sm text-gray-700",children:"Clean towels are available"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"payment-ready",checked:l!==null,onChange:()=>{},className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),e.jsx("label",{htmlFor:"payment-ready",className:"text-sm text-gray-700",children:"Payment method selected"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"ready-to-start",checked:c,onChange:f=>d(f.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),e.jsx("label",{htmlFor:"ready-to-start",className:"text-sm text-gray-700 font-semibold",children:"I'm ready to begin the massage"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:p,disabled:!l||!c,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold py-4 rounded-xl hover:from-purple-600 hover:to-pink-600 transition-all duration-200 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[e.jsx(da,{className:"w-5 h-5"}),"Start My Massage Session"]}),e.jsxs("button",{onClick:i,className:"w-full bg-red-50 border-2 border-red-200 text-red-600 font-semibold py-2 rounded-xl hover:bg-red-100 transition-all flex items-center justify-center gap-2",children:[e.jsx(xn,{className:"w-4 h-4"}),"Emergency Contact"]})]}),e.jsx("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-xl p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(xn,{className:"w-4 h-4 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-xs text-yellow-800",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Safety Reminder:"}),e.jsx("p",{children:"Your therapist is a licensed professional. Feel free to communicate any preferences or concerns before the session begins."})]})]})})]})},Zh=({type:a,initialSeconds:t,title:n,description:s,onExpire:i,onWarning:r,isActive:l=!0,canPause:o=!1,warningThreshold:c=60,urgentThreshold:d=30})=>{const[m,p]=u.useState(t),[f,y]=u.useState(!l),[I,P]=u.useState(!1);u.useEffect(()=>{if(f||I)return;const _=setInterval(()=>{p(L=>{const U=L-1;return U===c&&r&&r(U),U<=0?(P(!0),i&&i(),0):U})},1e3);return()=>clearInterval(_)},[f,I,i,r,c]);const D=_=>{const L=Math.floor(_/3600),U=Math.floor(_%3600/60),$=_%60;return L>0?"".concat(L,":").concat(U.toString().padStart(2,"0"),":").concat($.toString().padStart(2,"0")):"".concat(U,":").concat($.toString().padStart(2,"0"))},j=()=>I?"expired":m<=d?"urgent":m<=c?"warning":"normal",T=(()=>{switch(j()){case"expired":return{bg:"bg-red-100",border:"border-red-300",text:"text-red-800",accent:"text-red-600",progress:"bg-red-500"};case"urgent":return{bg:"bg-red-50",border:"border-red-200",text:"text-red-700",accent:"text-red-500",progress:"bg-red-400"};case"warning":return{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",accent:"text-yellow-600",progress:"bg-yellow-500"};default:return{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",accent:"text-blue-600",progress:"bg-blue-500"}}})(),x=j(),A=(t-m)/t*100,S=()=>I?e.jsx(Et,{className:"w-6 h-6"}):f?e.jsx(ys,{className:"w-6 h-6"}):e.jsx(We,{className:"w-6 h-6 ".concat(x==="urgent"?"animate-pulse":"")}),C=()=>{switch(a){case"response":return"üì± Response Timer";case"service":return"‚ú® Service Timer";case"break":return"‚òï Break Timer";case"overtime":return"‚è∞ Overtime";default:return"üï∞Ô∏è Timer"}};return e.jsxs("div",{className:"mx-4 mb-3 p-4 rounded-xl border-2 ".concat(T.bg," ").concat(T.border," ").concat(x==="urgent"?"animate-pulse":""),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:T.accent,children:S()}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold ".concat(T.text),children:n}),e.jsx("p",{className:"text-xs text-gray-600",children:C()})]})]}),o&&!I&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>y(!f),className:"p-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-all",children:f?e.jsx(Wo,{className:"w-4 h-4"}):e.jsx(ys,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{p(t),P(!1),y(!1)},className:"p-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-all",children:e.jsx(Pc,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-4xl font-mono font-bold ".concat(T.accent," ").concat(x==="urgent"?"animate-bounce":""),children:D(m)}),s&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"h-3 rounded-full transition-all duration-1000 ".concat(T.progress),style:{width:"".concat(Math.min(100,A),"%")}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"Started"}),e.jsx("span",{children:I?"Expired":f?"Paused":"Active"}),e.jsx("span",{children:"Ends"})]})]}),e.jsxs("div",{className:"text-center",children:[I&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-red-700 font-semibold",children:[e.jsx(Et,{className:"w-5 h-5"}),e.jsx("span",{children:"Timer Expired!"})]}),x==="urgent"&&!I&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-red-600 font-semibold",children:[e.jsx(Et,{className:"w-4 h-4"}),e.jsxs("span",{children:["Urgent: ",m," seconds remaining"]})]}),x==="warning"&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow-600 font-medium",children:[e.jsx(We,{className:"w-4 h-4"}),e.jsxs("span",{children:["Ending soon: ",D(m)," left"]})]}),f&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-600",children:[e.jsx(ys,{className:"w-4 h-4"}),e.jsx("span",{children:"Timer paused"})]})]}),a==="response"&&x==="warning"&&e.jsx("div",{className:"mt-3 p-2 bg-yellow-100 rounded-lg",children:e.jsx("p",{className:"text-xs text-yellow-800 text-center",children:"üîç Searching for alternative therapists if no response..."})}),a==="service"&&x==="normal"&&e.jsx("div",{className:"mt-3 p-2 bg-blue-100 rounded-lg",children:e.jsx("p",{className:"text-xs text-blue-800 text-center",children:"‚ú® Enjoy your relaxing massage session"})}),a==="overtime"&&e.jsx("div",{className:"mt-3 p-2 bg-orange-100 rounded-lg",children:e.jsx("p",{className:"text-xs text-orange-800 text-center",children:"üí∞ Additional charges may apply for extended service"})})]})},ef=({pricing:a,selectedMethod:t,onMethodSelect:n,onPaymentSubmit:s,isProcessing:i=!1,showTipping:r=!0,allowPromoCode:l=!0,currency:o="USD"})=>{const[c,d]=u.useState(a.tip||0),[m,p]=u.useState(a.promoCode||""),[f,y]=u.useState(!1),[I,P]=u.useState({number:"",expiry:"",cvv:"",name:""}),D=[{id:"card",name:"Credit/Debit Card",icon:e.jsx(_t,{className:"w-6 h-6"}),description:"Visa, Mastercard, American Express",available:!0,processingTime:"Instant",fees:"No fees"},{id:"paypal",name:"PayPal",icon:e.jsx(Dc,{className:"w-6 h-6"}),description:"Pay with your PayPal account",available:!0,processingTime:"Instant",fees:"No fees"},{id:"apple_pay",name:"Apple Pay",icon:e.jsx(Ha,{className:"w-6 h-6"}),description:"Quick and secure payment",available:!0,processingTime:"Instant",fees:"No fees"},{id:"google_pay",name:"Google Pay",icon:e.jsx(Ha,{className:"w-6 h-6"}),description:"Pay with Google",available:!0,processingTime:"Instant",fees:"No fees"},{id:"cash",name:"Cash Payment",icon:e.jsx(zo,{className:"w-6 h-6"}),description:"Pay therapist directly in cash",available:!0,processingTime:"On arrival",fees:"No fees"}],j=S=>new Intl.NumberFormat("en-US",{style:"currency",currency:o}).format(S),E=()=>{const S=a.servicePrice+(a.travelFee||0)+c,C=a.discount||0;return Math.max(0,S-C)},T=[15,18,20,25],x=S=>{const C=Math.round(a.servicePrice*S/100);d(C)},A=()=>{const S={method:t,amount:E(),tip:c,promoCode:m,cardDetails:t==="card"?I:void 0};s(S)};return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mx-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(_t,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:"Payment Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Choose your preferred payment method"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Pricing Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Massage Service"}),e.jsx("span",{children:j(a.servicePrice)})]}),a.travelFee&&a.travelFee>0&&e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Travel Fee"}),e.jsx("span",{children:j(a.travelFee)})]}),r&&e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Tip"}),e.jsx("span",{children:j(c)})]}),a.discount&&a.discount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Vs,{className:"w-4 h-4"}),"Discount ",m&&"(".concat(m,")")]}),e.jsxs("span",{children:["-",j(a.discount)]})]}),e.jsx("hr",{className:"my-2"}),e.jsxs("div",{className:"flex justify-between font-bold text-lg text-gray-800",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:j(E())})]})]})]}),r&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:"Add Tip"}),e.jsx(is,{className:"w-4 h-4 text-gray-400",title:"Tips help support our therapists"})]}),e.jsx("div",{className:"flex gap-2 mb-3",children:T.map(S=>{const C=Math.round(a.servicePrice*S/100);return e.jsxs("button",{onClick:()=>x(S),className:"px-4 py-2 rounded-lg border transition-colors ".concat(c===C?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:border-gray-400"),children:[S,"%"]},S)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Custom:"}),e.jsx("input",{type:"number",value:c,onChange:S=>d(Number(S.target.value)||0),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-center",min:"0"}),e.jsx("span",{className:"text-sm text-gray-600",children:"USD"})]})]}),l&&e.jsx("div",{className:"mb-6",children:f?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:m,onChange:S=>p(S.target.value.toUpperCase()),placeholder:"Enter promo code",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:()=>{},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Apply"})]}):e.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium transition-colors",children:[e.jsx(Vs,{className:"w-4 h-4"}),"Have a promo code?"]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Payment Method"}),e.jsx("div",{className:"space-y-3",children:D.map(S=>e.jsxs("div",{onClick:()=>S.available&&n(S.id),className:"p-4 border rounded-xl cursor-pointer transition-all ".concat(t===S.id?"border-blue-500 bg-blue-50":S.available?"border-gray-200 hover:border-gray-300":"border-gray-200 bg-gray-50 cursor-not-allowed opacity-50"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:t===S.id?"text-blue-600":"text-gray-600",children:S.icon}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800",children:S.name}),e.jsx("p",{className:"text-sm text-gray-600",children:S.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[e.jsx(We,{className:"w-3 h-3"}),S.processingTime]}),e.jsx("div",{className:"text-xs text-gray-500",children:S.fees})]})]}),t===S.id&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[S.id==="card"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"Card number",value:I.number,onChange:C=>P({...I,number:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",placeholder:"MM/YY",value:I.expiry,onChange:C=>P({...I,expiry:C.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("input",{type:"text",placeholder:"CVV",value:I.cvv,onChange:C=>P({...I,cvv:C.target.value}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsx("input",{type:"text",placeholder:"Cardholder name",value:I.name,onChange:C=>P({...I,name:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),S.id==="cash"&&e.jsxs("div",{className:"text-sm text-amber-700 bg-amber-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xn,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Pay on arrival"})]}),e.jsx("p",{className:"mt-1",children:"Please have exact change ready. The therapist will confirm payment before starting the service."})]})]})]},S.id))})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700 mb-2",children:[e.jsx(ja,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Secure Payment"})]}),e.jsx("p",{className:"text-sm text-green-700",children:"Your payment information is encrypted and secure. We use industry-standard security measures to protect your data."})]}),e.jsx("button",{onClick:A,disabled:!t||i,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-bold py-4 px-6 rounded-xl transition-colors flex items-center justify-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing Payment..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Js,{className:"w-5 h-5"}),"Pay ",j(E())]})})]})},tf=u.createContext(void 0),Gs={requested:{primary:"text-blue-600",secondary:"text-blue-500",accent:"text-blue-700",background:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon:"text-blue-600",gradient:"bg-gradient-to-br from-blue-50 to-blue-100",shadow:"shadow-blue-100",animation:"animate-pulse"},accepted:{primary:"text-green-600",secondary:"text-green-500",accent:"text-green-700",background:"bg-green-50",border:"border-green-200",text:"text-green-800",icon:"text-green-600",gradient:"bg-gradient-to-br from-green-50 to-green-100",shadow:"shadow-green-100"},confirmed:{primary:"text-emerald-600",secondary:"text-emerald-500",accent:"text-emerald-700",background:"bg-emerald-50",border:"border-emerald-200",text:"text-emerald-800",icon:"text-emerald-600",gradient:"bg-gradient-to-br from-emerald-50 to-emerald-100",shadow:"shadow-emerald-100"},preparing:{primary:"text-purple-600",secondary:"text-purple-500",accent:"text-purple-700",background:"bg-purple-50",border:"border-purple-200",text:"text-purple-800",icon:"text-purple-600",gradient:"bg-gradient-to-br from-purple-50 to-purple-100",shadow:"shadow-purple-100",animation:"animate-bounce"},en_route:{primary:"text-orange-600",secondary:"text-orange-500",accent:"text-orange-700",background:"bg-orange-50",border:"border-orange-200",text:"text-orange-800",icon:"text-orange-600",gradient:"bg-gradient-to-br from-orange-50 to-orange-100",shadow:"shadow-orange-100",animation:"animate-pulse"},arrived:{primary:"text-indigo-600",secondary:"text-indigo-500",accent:"text-indigo-700",background:"bg-indigo-50",border:"border-indigo-200",text:"text-indigo-800",icon:"text-indigo-600",gradient:"bg-gradient-to-br from-indigo-50 to-indigo-100",shadow:"shadow-indigo-100"},in_progress:{primary:"text-pink-600",secondary:"text-pink-500",accent:"text-pink-700",background:"bg-pink-50",border:"border-pink-200",text:"text-pink-800",icon:"text-pink-600",gradient:"bg-gradient-to-br from-pink-50 to-pink-100",shadow:"shadow-pink-100",animation:"animate-pulse"},completed:{primary:"text-teal-600",secondary:"text-teal-500",accent:"text-teal-700",background:"bg-teal-50",border:"border-teal-200",text:"text-teal-800",icon:"text-teal-600",gradient:"bg-gradient-to-br from-teal-50 to-teal-100",shadow:"shadow-teal-100"}},af=({children:a,initialStatus:t="requested"})=>{const[n,s]=u.useState(t),[i,r]=u.useState(Gs[t]),l=m=>{s(m),r(Gs[m])},o=m=>Gs[m],c=(m,p=i)=>{m.style.setProperty("--theme-primary",p.primary),m.style.setProperty("--theme-secondary",p.secondary),m.style.setProperty("--theme-accent",p.accent),m.style.setProperty("--theme-background",p.background),m.style.setProperty("--theme-border",p.border),m.style.setProperty("--theme-text",p.text),m.style.setProperty("--theme-icon",p.icon)};u.useEffect(()=>{const m=setTimeout(()=>{try{const p=document.documentElement;if(p&&c(p,i),document.body){const y=(document.body.className||"").replace(/booking-status-\w+/g,"").trim();document.body.className=y,document.body.classList.add("booking-status-".concat(n))}}catch{}},0);return()=>{clearTimeout(m);try{if(document.body){const p=document.body.className||"";document.body.className=p.replace(/booking-status-\w+/g,"").trim()}}catch{}}},[n,i]);const d={currentTheme:i,setBookingStatus:l,getThemeForStatus:o,applyThemeToElement:c};return e.jsx(tf.Provider,{value:d,children:e.jsx("div",{className:"theme-provider ".concat(i.gradient," transition-all duration-500"),"data-status":n,children:a})})},_o=({bookingStatus:a,onNotificationAction:t,soundEnabled:n=!0,pushEnabled:s=!0,smsEnabled:i=!1,emailEnabled:r=!0,maxNotifications:l=5})=>{const[o,c]=u.useState([]),[d,m]=u.useState(!1),[p,f]=u.useState({sound:n,push:s,sms:i,email:r,doNotDisturb:!1,quietHours:{start:"22:00",end:"08:00"}}),[y,I]=u.useState(new Map),[P,D]=u.useState(new Set),[j,E]=u.useState(new Map),[T,x]=u.useState("healthy"),[A,S]=u.useState(new Set),C=u.useRef(null),_=u.useRef(new Map),L=u.useRef(new Map),U=u.useRef(null),$={status_update:"/sounds/status-update.mp3",message:"/sounds/message.mp3",reminder:"/sounds/reminder.mp3",error:"/sounds/error.mp3",success:"/sounds/success.mp3",info:"/sounds/info.mp3"},H=B=>{const ne=Date.now().toString()+Math.random().toString(36).substr(2,9),v={...B,id:ne};if(c(R=>[v,...R].slice(0,l)),ae(v),(B.priority==="urgent"||B.priority==="high")&&setTimeout(()=>de(ne),1e4),v.autoClose&&v.closeAfter){const R=setTimeout(()=>{Y(ne)},v.closeAfter);_.current.set(ne,R)}return ne},Y=(B,ne=!1)=>{c(R=>R.filter(q=>q.id!==B)),ne&&S(R=>new Set([...R,B]));const v=_.current.get(B);v&&(clearTimeout(v),_.current.delete(B)),L.current.forEach((R,q)=>{q.startsWith(B)&&(clearTimeout(R),L.current.delete(q))})},ae=async B=>{const{deliveryMethods:ne,type:v,title:R,message:q,sound:X,vibration:Q}=B;De()&&B.priority!=="urgent"||(ne.includes("in_app"),ne.includes("sound")&&p.sound&&!p.doNotDisturb&&F(X||$[v]),Q&&"vibrate"in navigator&&navigator.vibrate([200,100,200]),ne.includes("push")&&p.push&&await V(R,q,B),ne.includes("sms")&&p.sms&&await pe(),ne.includes("email")&&p.email&&await he())},F=B=>{C.current&&(C.current.src=B,C.current.play().catch(ne=>{}))},V=async(B,ne,v)=>{if("Notification"in window)if(Notification.permission==="granted"){const R=new Notification(B,{body:ne,icon:"/icons/notification-icon.png",badge:"/icons/badge-icon.png",tag:v.id,requireInteraction:v.persistent,silent:p.doNotDisturb});R.onclick=()=>{window.focus(),R.close()}}else Notification.permission!=="denied"&&await Notification.requestPermission()==="granted"&&await V(B,ne,v)},pe=async(B,ne)=>{},he=async(B,ne,v)=>{},de=(B,ne=1)=>{if(A.has(B))return;const v=5,R=5e3,q=6e4;if(ne>v){D(te=>new Set([...te,B]));return}const X=Math.min(R*Math.pow(2,ne-1),q),Q=setTimeout(()=>{if(A.has(B))return;const te=o.find(oe=>oe.id===B);if(te&&!document.hidden&&!De()){if(Te(te.priority==="urgent"?"critical":"urgent"),"vibrate"in navigator){const oe=Array(ne).fill([300,200]).flat();navigator.vibrate(oe)}de(B,ne+1)}},X);L.current.set("".concat(B,"-").concat(ne),Q)},Te=async(B="normal")=>{try{if(C.current&&p.sound){C.current.currentTime=0,await C.current.play();return}if(!U.current&&window.AudioContext&&(U.current=new AudioContext),U.current){const ne=U.current.createOscillator(),v=U.current.createGain();ne.connect(v),v.connect(U.current.destination);const R=B==="critical"?1e3:B==="urgent"?800:600;ne.frequency.setValueAtTime(R,U.current.currentTime),v.gain.setValueAtTime(.3,U.current.currentTime),ne.start(),ne.stop(U.current.currentTime+.3)}}catch{}},De=()=>{if(p.doNotDisturb)return!0;const B=new Date,ne="".concat(B.getHours().toString().padStart(2,"0"),":").concat(B.getMinutes().toString().padStart(2,"0")),{start:v,end:R}=p.quietHours;return v<=R?ne>=v&&ne<=R:ne>=v||ne<=R};u.useEffect(()=>{const B={requested:()=>H({type:"status_update",priority:"medium",title:"Booking Requested",message:"Your massage booking has been sent to nearby therapists.",deliveryMethods:["in_app","push"],autoClose:!0,closeAfter:5e3}),accepted:()=>H({type:"status_update",priority:"high",title:"Booking Accepted!",message:"A therapist has accepted your booking request.",deliveryMethods:["in_app","push","sound"],sound:$.success,vibration:!0,autoClose:!0,closeAfter:8e3,actionButtons:[{id:"view_therapist",label:"View Therapist",action:()=>{},style:"primary"}]}),confirmed:()=>H({type:"status_update",priority:"medium",title:"Booking Confirmed",message:"Your massage booking has been confirmed.",deliveryMethods:["in_app","email"],autoClose:!0,closeAfter:5e3}),preparing:()=>H({type:"status_update",priority:"medium",title:"Therapist Preparing",message:"Your therapist is preparing equipment and will depart soon.",deliveryMethods:["in_app","push"],autoClose:!0,closeAfter:6e3}),en_route:()=>H({type:"status_update",priority:"high",title:"Therapist En Route",message:"Your therapist is on the way to your location.",deliveryMethods:["in_app","push","sound"],sound:$.status_update,vibration:!0,persistent:!0,actionButtons:[{id:"track_therapist",label:"Track Location",action:()=>{},style:"primary"}]}),arrived:()=>H({type:"status_update",priority:"urgent",title:"Therapist Arrived!",message:"Your therapist has arrived at your location.",deliveryMethods:["in_app","push","sound","sms"],sound:$.success,vibration:!0,persistent:!0,actionButtons:[{id:"confirm_arrival",label:"Confirm",action:()=>{},style:"primary"}]}),in_progress:()=>H({type:"status_update",priority:"low",title:"Session Started",message:"Your massage session has begun. Enjoy and relax!",deliveryMethods:["in_app"],autoClose:!0,closeAfter:4e3}),completed:()=>H({type:"success",priority:"medium",title:"Session Completed",message:"Your massage session has ended. Please rate your experience.",deliveryMethods:["in_app","push","email"],sound:$.success,actionButtons:[{id:"rate_session",label:"Rate & Review",action:()=>{},style:"primary"}]})};B[a]&&B[a]()},[a]);const we=(B,ne)=>{const v="border-l-4 transition-all duration-300 hover:shadow-lg",R={low:"bg-gray-50 border-l-gray-400",medium:"bg-blue-50 border-l-blue-500",high:"bg-yellow-50 border-l-yellow-500",urgent:"bg-red-50 border-l-red-500 animate-pulse"},q={status_update:e.jsx(Ec,{className:"w-5 h-5"}),message:e.jsx(rs,{className:"w-5 h-5"}),reminder:e.jsx(We,{className:"w-5 h-5"}),error:e.jsx(Et,{className:"w-5 h-5"}),success:e.jsx(Xt,{className:"w-5 h-5"}),info:e.jsx(is,{className:"w-5 h-5"})};return{className:"".concat(v," ").concat(R[ne]),icon:q[B]}};return e.jsxs(e.Fragment,{children:[e.jsx("audio",{ref:C,preload:"none"}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-3 max-w-sm",children:o.map(B=>{const ne=we(B.type,B.priority);return e.jsx("div",{className:"p-4 rounded-lg shadow-lg ".concat(ne.className),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-gray-600 mt-0.5",children:ne.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800 text-sm",children:B.title}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:B.message}),B.actionButtons&&e.jsx("div",{className:"flex gap-2 mt-3",children:B.actionButtons.map(v=>e.jsx("button",{onClick:()=>{v.action(),t==null||t(v.id,B.id)},className:"px-3 py-1 text-xs rounded font-medium transition-colors ".concat(v.style==="primary"?"bg-blue-600 text-white hover:bg-blue-700":v.style==="danger"?"bg-red-600 text-white hover:bg-red-700":"bg-gray-200 text-gray-800 hover:bg-gray-300"),children:v.label},v.id))})]})]}),!B.persistent&&e.jsx("button",{onClick:()=>Y(B.id),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Qe,{className:"w-4 h-4"})})]})},B.id)})})]})},nf=({therapistName:a,therapistImage:t,bookingId:n,bookingDetails:s,countdownSeconds:i,onCancel:r,showConfirmation:l=!0})=>{const[o,c]=u.useState(i);u.useEffect(()=>{},[]),u.useEffect(()=>(document.body.classList.add("modal-open"),document.body.classList.add("booking-active"),()=>{document.body.classList.remove("modal-open"),document.body.classList.remove("booking-active")}),[]),u.useEffect(()=>{if(o<=0)return;const m=setInterval(()=>{c(p=>{const f=p-1;return f<=0?(clearInterval(m),0):f})},1e3);return()=>{clearInterval(m)}},[]);const d=m=>{const p=Math.floor(m/60),f=m%60;return"".concat(p,":").concat(f.toString().padStart(2,"0"))};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:"\n        @keyframes glow {\n          from {\n            box-shadow: 0 0 5px rgba(30,142,62,0.4);\n          }\n          to {\n            box-shadow: 0 0 15px rgba(30,142,62,0.9);\n          }\n        }\n        \n        .booking-status.sent {\n          animation: glow 1.5s infinite alternate;\n        }\n\n        /* Prevent body scroll when booking container is open */\n        body.booking-active {\n          overflow: hidden;\n          position: fixed;\n          width: 100%;\n          height: 100%;\n        }\n      "}),e.jsxs("div",{className:"booking-chat",style:{position:"fixed",inset:0,background:"#fff",display:"flex",flexDirection:"column",zIndex:9999},children:[e.jsx("div",{className:"booking-header",style:{padding:"16px",borderBottom:"1px solid #eee",backgroundColor:"#f9fafb"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t&&e.jsx("img",{src:t,alt:a,style:{width:"48px",height:"48px",borderRadius:"50%",objectFit:"cover",border:"2px solid #f97316"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,margin:0,color:"#111827"},children:"Booking Request"}),e.jsxs("span",{style:{fontSize:"14px",color:"#6b7280",display:"block",marginTop:"2px"},children:["Therapist: ",a]})]})]})}),e.jsxs("div",{className:"booking-body p-4",style:{flex:1,overflowY:"auto",WebkitOverflowScrolling:"touch"},children:[e.jsxs("div",{className:"text-center py-6 px-4 mb-4",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-r from-orange-400 to-orange-600 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:e.jsx(en,{className:"w-10 h-10 text-white"})}),e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gray-300 rounded-full border-3 border-white animate-bounce",children:e.jsx("div",{className:"w-full h-full bg-gray-200 rounded-full animate-ping"})})]}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["üéâ Welcome ",a," Massage Service"]}),e.jsxs("p",{className:"text-gray-500 text-sm leading-relaxed",children:["Your booking has been successfully submitted.",e.jsx("br",{}),"You can chat directly with your therapist once they accept booking."]})]}),e.jsxs("div",{className:"bg-gray-100 rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsx("h4",{className:"font-semibold text-gray-800 text-sm mb-4",children:"Detail Booking"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Layanan:"}),e.jsx("span",{children:(s==null?void 0:s.serviceType)||"Pijat"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Durasi:"}),e.jsxs("span",{children:[(s==null?void 0:s.duration)||60," menit"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Harga:"}),e.jsx("span",{className:"font-semibold",children:s!=null&&s.price?Ct(s.price):"‚Äî"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Arrival:"}),e.jsx("span",{children:"30-60 Minutes"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Pembayaran:"}),e.jsx("span",{children:"Tunai ‚Ä¢ Transfer"})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-300",children:[o>0&&e.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-r from-orange-50 to-orange-100 rounded-xl border-2 border-orange-300 shadow-md relative",children:[e.jsx("button",{onClick:r,className:"absolute top-3 right-3 p-1.5 rounded-lg text-red-600 hover:bg-red-100 hover:text-red-700 transition-colors",title:"Cancel booking","aria-label":"Cancel booking",children:e.jsx(Qe,{className:"w-4 h-4"})}),e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("p",{className:"text-xs font-semibold text-orange-800 uppercase tracking-wide mb-1",children:"‚è∞ Therapist Response Countdown"}),e.jsx("p",{className:"text-xs text-orange-600",children:"Therapist has 5 minutes to accept booking"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 bg-white px-5 py-3 rounded-lg",children:[e.jsx(We,{className:"w-6 h-6 text-orange-600 animate-pulse"}),e.jsx("span",{className:"text-3xl font-bold text-orange-600 font-mono",children:d(o)})]}),e.jsx("div",{className:"mt-2 text-center",children:e.jsx("p",{className:"text-xs text-orange-700 font-medium",children:"Time remaining for therapist to respond"})})]}),l&&o>0&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-3 border-2 border-green-200 text-center",children:[e.jsx("p",{className:"text-sm font-semibold text-green-800 mb-1",children:"‚úÖ Booking Request Sent"}),e.jsx("p",{className:"text-xs text-green-600",children:"Waiting for therapist to respond..."})]}),o<=0&&e.jsx("div",{className:"p-4 rounded-xl text-center font-semibold text-red-600 bg-red-50 border-2 border-red-200",children:"‚è∞ Booking request expired - No response received"})]})]})]}),e.jsx("div",{className:"booking-actions",style:{padding:"16px",borderTop:"1px solid #eee",backgroundColor:"#f9fafb"},children:e.jsxs("button",{onClick:r,className:"cancel",disabled:o<=0,style:{width:"100%",padding:"12px 16px",backgroundColor:o<=0?"#9ca3af":"#ef4444",color:"#fff",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:600,cursor:o<=0?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:m=>{o>0&&(m.currentTarget.style.backgroundColor="#dc2626")},onMouseLeave:m=>{o>0&&(m.currentTarget.style.backgroundColor="#ef4444")},children:[e.jsx(Qe,{size:18}),o<=0?"Booking Expired":"Cancel Booking"]})})]})]})},sf=({currentBooking:a,bookingCountdown:t,onCancelBooking:n})=>{const s=r=>{if(r==null||!Number.isFinite(r)||r<=0)return"--:--";const l=Math.floor(r/60),o=r%60;return"".concat(l,":").concat(o.toString().padStart(2,"0"))},i=r=>{const o=a.bookingType==="book_now"?"5 minutes":"25 minutes";switch(r){case"pending":return"‚è≥ Waiting for therapist to respond (up to ".concat(o,"). You can cancel below if needed.");case"waiting_others":return"üîç Searching for available therapists...";case"therapist_accepted":return"‚úÖ Therapist accepted! Please confirm your booking below.";case"user_confirmed":return"üéØ Booking confirmed! Therapist will contact you shortly.";case"on_the_way":return"üöó Therapist is on the way to your location!";case"completed":return"‚ú® Service completed - Payment is ready";case"cancelled":return"‚ùå Booking was cancelled";default:return""}};return e.jsxs("div",{className:"bg-white border-b border-gray-200",children:[e.jsxs("div",{className:"px-4 py-3 bg-white",children:[e.jsx("div",{className:"bg-green-50 rounded-lg p-3 mb-3 border-2 border-green-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-semibold text-green-800 mb-1",children:"‚úÖ Booking Request Sent"}),e.jsx("p",{className:"text-xs text-green-600",children:"Waiting for therapist to respond"})]})}),Number.isFinite(t)&&t!==null&&t>0&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 rounded-xl p-4 border-2 border-orange-300 mb-3 shadow-md relative",children:[n&&(a.status==="pending"||a.status==="waiting_others")&&e.jsx("button",{onClick:n,className:"absolute top-3 right-3 p-1.5 rounded-lg text-red-600 hover:bg-red-100 hover:text-red-700 transition-colors",title:"Cancel booking","aria-label":"Cancel booking",children:e.jsx(Qe,{className:"w-4 h-4"})}),e.jsx("div",{className:"text-center mb-2",children:e.jsx("p",{className:"text-xs font-semibold text-orange-800 uppercase tracking-wide",children:"‚è∞ Therapist Response Countdown"})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 bg-white px-5 py-3 rounded-lg",children:[e.jsx(We,{className:"w-6 h-6 text-orange-600 animate-pulse"}),e.jsx("span",{className:"text-3xl font-bold text-orange-600 font-mono",children:s(t)})]}),e.jsx("div",{className:"mt-2 text-center",children:e.jsx("p",{className:"text-xs text-orange-700 font-medium",children:"Time remaining for therapist to respond"})})]}),e.jsx("p",{className:"text-gray-600 text-xs mt-2",children:i(a.status)}),(a.status==="pending"||a.status==="waiting_others")&&n&&e.jsxs("button",{onClick:n,className:"mt-3 w-full bg-white hover:bg-gray-50 text-red-600 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 border border-red-300 flex items-center justify-center gap-2",children:[e.jsx("span",{children:"‚úï"}),e.jsx("span",{children:"Cancel Booking"})]})]}),e.jsx("div",{className:"px-4 py-3 bg-white border-t border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-2 rounded-lg border border-gray-200",children:[e.jsx(da,{className:"w-4 h-4 text-gray-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Service"}),e.jsxs("div",{className:"font-bold text-gray-800",children:[a.providerType==="facial"?"Facial Clinic":a.providerType==="place"?"Massage Spa":"Massage",a.duration?" (".concat(a.duration," min)"):""]}),a.massageFor&&e.jsxs("div",{className:"text-xs text-gray-600 mt-0.5",children:["For: ",a.massageFor==="male"?"Male":a.massageFor==="female"?"Female":a.massageFor==="children"?"Children":a.massageFor]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-2 rounded-lg border border-gray-200",children:[e.jsx(_t,{className:"w-4 h-4 text-gray-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Total Price"}),e.jsx("div",{className:"font-medium text-gray-800",children:Ct(a.totalPrice)})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-2 rounded-lg border border-gray-200",children:[e.jsx(Ut,{className:"w-4 h-4 text-gray-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Customer"}),e.jsx("div",{className:"font-medium text-gray-800",children:a.customerName})]})]}),a.locationZone&&e.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-2 rounded-lg border border-gray-200",children:[e.jsx(Mt,{className:"w-4 h-4 text-gray-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Location"}),e.jsx("div",{className:"font-medium text-gray-800",children:a.locationZone})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ia,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-gray-600",children:"Type:"}),e.jsxs("span",{className:"font-medium text-gray-800",children:[a.serviceType||"Professional Massage",a.duration?" (".concat(a.duration," min)"):"",a.bookingType==="scheduled"&&a.scheduledDate&&" ¬∑ ".concat(a.scheduledDate," ").concat(a.scheduledTime||"")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vo,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-gray-600",children:"ID:"}),e.jsxs("span",{className:"font-mono text-xs text-gray-800",children:["#",a.bookingId||a.id]})]})]})})]})};function rf(a,t){return Promise.race([a,new Promise((n,s)=>setTimeout(()=>s(new Error("Operation timed out after ".concat(t,"ms"))),t))])}async function of(a,t=3,n=1e3,s=5e3){const i=Date.now();let r=null;for(let o=1;o<=t;o++){const c=Date.now();try{g.debug("üîÑ [ORDER_NOW_MONITOR] Booking attempt #".concat(o," start: ").concat(new Date(c).toISOString()));const d=await rf(a(),s),m=Date.now()-c;if(!d)throw new Error("Booking creation returned false - Appwrite validation failed");if(!(d===!0||typeof d=="object"&&d!==null))throw new Error("Booking creation failed - got result: ".concat(JSON.stringify(d)));return g.debug("‚úÖ [ORDER_NOW_MONITOR] Booking attempt #".concat(o," SUCCESS | Duration: ").concat(m,"ms")),{success:!0,data:d,attempts:o,duration:Date.now()-i}}catch(d){r=d;const m=Date.now()-c;g.error("‚ùå [ORDER_NOW_MONITOR] Booking attempt #".concat(o," FAILED | Duration: ").concat(m,"ms | Error: ").concat(r.message));const p=r.status||r.code;if(!(p===429||p>=500||r.message.includes("timeout")||r.message.includes("ETIMEDOUT")||r.message.includes("ECONNREFUSED")||r.message.includes("network")||r.message.includes("Rate limit")))return g.error("üö´ [ORDER_NOW_MONITOR] Non-retryable error detected (status: ".concat(p,")")),g.error("   ‚Üí This is a validation/client error, not a transient failure"),g.error("   ‚Üí Stopping retries immediately to prevent unnecessary API calls"),{success:!1,error:r,attempts:o,duration:Date.now()-i};if(o<t){const y=n*Math.pow(2,o-1);g.debug("‚è≥ [ORDER_NOW_MONITOR] Retrying in ".concat(y,"ms...")),await new Promise(I=>setTimeout(I,y))}}}const l=Date.now()-i;return g.error("üí• [ORDER_NOW_MONITOR] All ".concat(t," booking attempts FAILED | Total duration: ").concat(l,"ms")),{success:!1,error:r||new Error("Unknown error"),attempts:t,duration:l}}function lf(a){const t=a.message.toLowerCase();return t.includes("timeout")||t.includes("timed out")?"timeout":t.includes("network")||t.includes("fetch")||t.includes("connection")?"network":t.includes("validation")||t.includes("invalid")||t.includes("required")?"validation":"unknown"}function cf(){var _i,$i,Ui,Fi,Ki,Wi,qi,Hi,Gi,zi,Vi,Yi,Ji,Qi,Xi,Zi,er,tr,ar,nr,sr,ir,rr,or,lr,cr,dr,ur,mr,gr,pr,hr,fr,yr,br,xr,kr,vr,wr,Nr,Sr,jr,Ir,Tr,Ar;const{chatState:a,isLocked:t,isConnected:n,openChat:s,minimizeChat:i,maximizeChat:r,closeChat:l,setBookingStep:o,setSelectedDuration:c,setSelectedDateTime:d,setCustomerDetails:m,sendMessage:p,addMessage:f,createBooking:y,acceptBooking:I,rejectBooking:P,confirmBooking:D,confirmPaymentReceived:j,rejectPaymentProof:E,updateBookingPaymentProof:T,refundDeposit:x,cancelBooking:A,shareBankCard:S,confirmPayment:C,addSystemNotification:_,lockChat:L,unlockChat:U,recordDepositTimeout:$,timerState:H,isGuestUser:Y,refreshUser:ae}=Mi();wa.useEffect(()=>{if(a.isOpen&&a.bookingStep==="chat"&&a.currentBooking!==void 0&&a.currentBooking!==null)try{const w=Lo.validateBookingData(a.currentBooking);Lo.validateCountdownTimer(H.remainingSeconds)}catch(w){g.error("‚ïê".repeat(80)),g.error("üö® BOOKING VALIDATION FAILED - CHAT CANNOT RENDER üö®"),g.error("‚ïê".repeat(80)),g.error(w),g.error("‚ïê".repeat(80)),g.debug("‚è≥ Booking creation in progress - countdown will appear when ready")}},[a.isOpen,a.currentBooking,H.remainingSeconds,a.bookingStep,l]),wa.useEffect(()=>{a.isOpen&&!a.currentBooking&&a.bookingStep==="chat"&&(g.debug('üîí [GUARD] Chat in "chat" step without active booking - likely old messages'),g.debug("üí° [INFO] This is normal when viewing message history. Order Now flow will create new booking."))},[a.isOpen,a.currentBooking,a.bookingStep]);const[F,V]=u.useState(""),[pe,he]=u.useState(!1),[de,Te]=u.useState(!1),[De,we]=u.useState(null),{customerForm:B,setCustomerForm:ne,selectedDate:v,setSelectedDate:R,selectedTime:q,setSelectedTime:X,discountCode:Q,setDiscountCode:te,discountValidation:oe,setDiscountValidation:Ye,isValidatingDiscount:et,setIsValidatingDiscount:at,clientMismatchError:fe,setClientMismatchError:ve}=Oh(a.isMinimized,a.bookingStep,(_i=a.therapist)==null?void 0:_i.id),[gt,Ft]=u.useState(3600),[Rt,Kt]=u.useState(300),[Ge,Wt]=u.useState([]),[xt,ua]=u.useState([]),[ma,ea]=u.useState([]),[ta,Ga]=u.useState(!1),[qt,Ht]=u.useState(0),[Ta,Aa]=u.useState(!1),k=u.useRef(null),[M,O]=u.useState(null);u.useEffect(()=>{if(a.isTherapistView){g.debug("üîî Initializing therapist notifications");const w=qs.onBookingNotification(re=>{g.debug("üì® New booking notification received:",re),Wt(Ee=>[...Ee,re]);const Ie=window.location.hash.replace("#","").split("/")[0];!a.isOpen&&Ie!=="landing"&&Ie!==""&&Ie!=="home"&&(g.debug("üîî Auto-opening chat for therapist notification"),r())}),z=re=>{const{bookingId:Ie,customerId:Ee,customerName:tt,booking:Xe}=re.detail;g.debug("üéØ Opening chat for booking:",Ie)};return window.addEventListener("openTherapistChat",z),()=>{w(),window.removeEventListener("openTherapistChat",z)}}},[a.isTherapistView,r]);const[ee,be]=u.useState(()=>{const w=localStorage.getItem("chat_ui_language");return w==="en"||w==="gb"?"en":"id"});u.useEffect(()=>{document.documentElement.setAttribute("data-lang",ee),g.debug("üåê [CHAT UI] Language:",{language:ee==="id"?"Indonesian":"English"})},[ee]);const ue=async w=>{try{await qs.acceptBooking(w),await I(),Wt(z=>z.filter(re=>re.bookingId!==w)),_("‚úÖ Booking accepted successfully!")}catch(z){g.error("Failed to accept booking:",z),_("‚ùå Failed to accept booking. Please try again.")}},le=async w=>{try{await qs.rejectBooking(w),await P(),Wt(z=>z.filter(re=>re.bookingId!==w)),_("üìù Booking declined.")}catch(z){g.error("Failed to decline booking:",z),_("‚ùå Failed to decline booking. Please try again.")}},[Le,Be]=u.useState(!1),[$e,Oe]=u.useState(!1),[xe,Me]=u.useState(!1),[je,It]=u.useState(0),[qe,it]=u.useState(!1),[rt,aa]=u.useState(!1),[_e,Gt]=u.useState({}),nn=u.useRef(null),za=async()=>{if(!(!Q.trim()||!a.therapist)){at(!0),Ye(null);try{const w=await Eh(Q.trim().toUpperCase(),{providerId:a.therapist.id});w.valid?Ye({valid:!0,percentage:w.discountPercentage,message:"üéâ ".concat(w.discountPercentage,"% discount will be applied!"),codeData:w}):Ye({valid:!1,message:w.message||"Invalid discount code"})}catch(w){const z=w;g.error("Discount validation error:",z),Ye({valid:!1,message:"Failed to validate discount code"})}finally{at(!1)}}};u.useEffect(()=>{const w=setInterval(()=>{Ft(z=>Math.max(0,z-1))},1e3);return()=>clearInterval(w)},[]),u.useEffect(()=>{if(!a.currentBooking||Rt<=0||a.currentBooking.status!=="pending"&&a.currentBooking.status!=="waiting_others")return;const w=setInterval(()=>{Kt(z=>{var Ie;const re=z-1;if(re<=0){const Ee=(Ie=a.currentBooking)==null?void 0:Ie.documentId;Ee&&Ce(async()=>{const{bookingLifecycleService:tt}=await Promise.resolve().then(()=>Hn);return{bookingLifecycleService:tt}},void 0).then(({bookingLifecycleService:tt})=>{tt.expireBooking(Ee,"Therapist timeout").catch(Xe=>g.error("Expire booking on countdown:",Xe))}),_("‚è∞ Booking expired ‚Äì no response in time. Suggested therapists and places are shown below.")}return Math.max(0,re)})},1e3);return()=>clearInterval(w)},[($i=a.currentBooking)==null?void 0:$i.status,Rt,(Ui=a.currentBooking)==null?void 0:Ui.documentId,_]),u.useEffect(()=>{var w;if(a.currentBooking&&(a.currentBooking.status==="pending"||a.currentBooking.status==="waiting_others")){const z=((w=a.currentBooking)==null?void 0:w.bookingType)==="SCHEDULED",re=z?1800:300;g.debug("üîÑ Resetting countdown timer for new booking:",{bookingId:a.currentBooking.id,isScheduled:z,seconds:re}),Kt(re)}},[(Fi=a.currentBooking)==null?void 0:Fi.id]);const hs=(Ki=a.currentBooking)==null?void 0:Ki.lifecycleStatus,sn=a.currentBooking&&(hs==="EXPIRED"||hs==="DECLINED");u.useEffect(()=>{if(!sn){ua([]),ea([]);return}xt.length>0||ta||(Ga(!0),(async()=>{var w,z;try{const re=((w=a.therapist)==null?void 0:w.appwriteId)||((z=a.therapist)==null?void 0:z.$id)||"",{therapistService:Ie,placesService:Ee}=await Ce(async()=>{const{therapistService:Ae,placesService:An}=await Promise.resolve().then(()=>kl);return{therapistService:Ae,placesService:An}},void 0),[tt,Xe]=await Promise.all([Ie.getTherapists().catch(()=>[]),Ee.getPlaces().catch(()=>[])]),nt=Ae=>Ae&&Ae===re,Tt=tt.filter(Ae=>(Ae.status||Ae.availability||"").toString().toLowerCase()==="available"&&!nt(Ae.$id||Ae.id)).slice(0,10).map(Ae=>({appwriteId:Ae.$id||Ae.id,name:Ae.name||"Therapist",image:Ae.mainImage||Ae.profilePicture||Ae.image})),pa=Xe.filter(Ae=>Ae.isLive!==!1&&(Ae.isOpen!==!1||Ae.status==="open"||Ae.status==="OPEN")&&!nt(Ae.$id||Ae.id)).slice(0,10).map(Ae=>({appwriteId:Ae.$id||Ae.id,name:Ae.name||"Place",image:Ae.mainImage||Ae.profilePicture}));Tt.length===0&&pa.length===0?(ua([]),ea([]),_("No other active therapists or open places right now. You can try again later or browse the home page.")):(ua(Tt),ea(pa))}catch(re){g.error("Failed to load suggested therapists/places",re)}finally{Ga(!1)}})())},[sn,ta,xt.length,(Wi=a.therapist)==null?void 0:Wi.appwriteId,_]);const pt=!!(a.currentBooking&&((qi=a.currentBooking)==null?void 0:qi.bookingType)==="SCHEDULED"&&((Hi=a.currentBooking)==null?void 0:Hi.lifecycleStatus)==="ACCEPTED"),In=(Gi=a.currentBooking)==null?void 0:Gi.acceptedAt,Va=(zi=a.currentBooking)==null?void 0:zi.depositDeadlineExtendedAt,Tn=u.useRef(!1);u.useEffect(()=>{if(!pt){Ht(0),Tn.current=!1;return}const w=Va||In;if(!w){Ht(0);return}const z=new Date(w).getTime()+1800*1e3,re=()=>{const Ee=Math.max(0,Math.floor((z-Date.now())/1e3));Ht(Ee)};re();const Ie=setInterval(re,1e3);return()=>clearInterval(Ie)},[pt,In,Va]),u.useEffect(()=>{var z,re;if(!pt||qt!==0||Tn.current)return;Tn.current=!0;const w=((z=a.therapist)==null?void 0:z.appwriteId)||((re=a.therapist)==null?void 0:re.$id);w&&$(w)},[pt,qt,$,a.therapist]);const Ya=w=>{const z=Math.floor(w/60),re=w%60;return"".concat(z.toString().padStart(2,"0"),":").concat(re.toString().padStart(2,"0"))},ga=(Vi=a.messages.find(w=>w.messageType==="payment_proof"))==null?void 0:Vi.createdAt,me=!!(a.isTherapistView&&a.currentBooking&&((Yi=a.currentBooking)==null?void 0:Yi.bookingType)==="SCHEDULED"&&((Ji=a.currentBooking)==null?void 0:Ji.lifecycleStatus)==="ACCEPTED"&&ga),[ge,ye]=u.useState(0);u.useEffect(()=>{if(!me||!ga){ye(0);return}const w=new Date(ga).getTime()+1800*1e3,z=()=>{ye(Math.max(0,Math.floor((w-Date.now())/1e3)))};z();const re=setInterval(z,1e3);return()=>clearInterval(re)},[me,ga]);const ce=u.useRef(!1),Pe=u.useRef(ge);u.useEffect(()=>{if(!me){ce.current=!1,Pe.current=ge;return}Pe.current>0&&ge===0&&!ce.current&&(_("Reminder: Please confirm or reject the payment proof. If no response within 24 hours, the booking may be expired."),ce.current=!0),Pe.current=ge},[me,ge,_]),u.useEffect(()=>{me&&(ce.current=!1)},[ga,(Qi=a.currentBooking)==null?void 0:Qi.documentId,me]);const Ue=u.useRef(0);u.useEffect(()=>{if(!a.isTherapistView||!a.isOpen)return;const z=a.messages.filter(re=>re.messageType==="payment_proof"&&re.senderId==="customer").length;z>Ue.current?(Ue.current=z,z>0&&(Mc.playNotification("payment_success",.7).catch(()=>{}),typeof document!="undefined"&&document.hidden&&typeof Notification!="undefined"&&(Notification.permission==="granted"?new Notification("Payment proof received",{body:"Customer uploaded payment proof. Confirm or reject within 30 minutes.",icon:"/favicon.ico"}):Notification.permission==="default"&&Notification.requestPermission().then(re=>{re==="granted"&&new Notification("Payment proof received",{body:"Customer uploaded payment proof. Confirm or reject within 30 minutes.",icon:"/favicon.ico"})})))):Ue.current=z},[a.isTherapistView,a.isOpen,a.messages]);const{therapist:G,messages:ht,bookingStep:Fe,selectedDuration:Ke,isMinimized:ic}=a,Ca=a.bookingMode==="schedule";if(u.useLayoutEffect(()=>{var w;a.isOpen&&a.messages.length>0&&a.bookingStep==="chat"&&((w=nn.current)==null||w.scrollIntoView({behavior:"smooth"}))},[a.isOpen,a.messages.length,a.bookingStep]),wa.useEffect(()=>{a.isOpen&&g.debug("üé® [BOOKING STEP CHANGED]",{newStep:Fe,shouldShowChat:Fe==="chat",shouldShowDetails:Fe==="details",shouldShowDuration:Fe==="duration",hasBooking:!!a.currentBooking,messageCount:ht.length})},[a.isOpen,Fe,ht.length,a.currentBooking]),!a.isOpen||!G)return null;const dt=w=>{g.debug("üîç [PRICING DEBUG] Getting price for",{minutes:w}),g.debug("üîç [PRICING DEBUG] Therapist object:",{name:G.name,price60:G.price60,price90:G.price90,price120:G.price120,pricing:G.pricing});const z=!!(G.price60&&parseInt(G.price60)>0||G.price90&&parseInt(G.price90)>0||G.price120&&parseInt(G.price120)>0);if(g.debug("üîç [PRICING DEBUG] Has valid separate fields:",{hasValidSeparateFields:z}),z){const tt="price".concat(w),Xe=G[tt],nt=Xe?parseInt(Xe)*1e3:0;return g.debug("‚úÖ [PRICING DEBUG] Using separate field:",{priceField:tt,price:Xe,finalPrice:nt}),nt}const re=G.pricing||{},Ie=re[w.toString()]||re[60]||0,Ee=Ie*1e3;return g.debug("‚úÖ [PRICING DEBUG] Using pricing object:",{pricing:re,basePrice:Ie,finalPrice:Ee}),Ee},rc=w=>{c(w),o(Ca?"datetime":"details"),g.debug("‚è±Ô∏è Duration selected: ".concat(w," minutes - ").concat(Ct(dt(w))))},oc=()=>{if(!v||!q)return;d(v,q),o("details");const z=new Date(v).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});f({senderId:"system",senderName:"System",message:"üìÖ Scheduled for ".concat(z," at ").concat(q),type:"system"})},lc=async w=>{var pa,Ae,An,Cr,Pr,Dr,Er,Mr,Rr,Br,Lr,Or,_r;g.debug("üéØ [HANDLE CUSTOMER SUBMIT] Function called"),_a.startBookingFlow((G==null?void 0:G.id)||(G==null?void 0:G.$id),a.currentUserId||"guest"),_a.checkpoint("submit_handler_start","started"),w.preventDefault(),w.stopPropagation(),w&&w.nativeEvent&&w.nativeEvent.stopImmediatePropagation(),O(null),L(),g.debug("üîí Chat locked for Order Now form submission"),g.debug("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê"),g.debug("üöÄ [ORDER NOW] Form submission started"),g.debug("Current URL:",{url:window.location.href}),g.debug("Current booking step:",{step:a.bookingStep}),g.debug("Chat is open:",{isOpen:a.isOpen}),g.debug("Chat is locked:",{isLocked:t}),g.debug("‚úÖ [PROTECTION] Chat locked during order process"),g.debug("üîå [CONNECTION] Real-time connected:",{isConnected:n}),g.debug("üì° [CONNECTION] Testing chat connectivity..."),n||g.warn("‚ö†Ô∏è [CONNECTION] Chat not connected to real-time - proceeding anyway"),g.debug("Customer form data:",{name:B.name,whatsApp:B.whatsApp,locationType:B.locationType}),g.debug("Form validation state:",{hasName:!!B.name,hasWhatsApp:!!B.whatsApp,hasLocationType:!!B.locationType,clientMismatchError:!!fe}),g.debug("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê");const z=B.whatsApp&&B.whatsApp.length>=8&&B.whatsApp.length<=15,re=B.name&&B.name.trim().length>0;if(!re||!z||fe||!B.locationType){if(g.error("‚ùå [ORDER NOW] Button should be disabled! Missing required fields:"),g.error("- Name:",re?"OK":"MISSING/INVALID"),g.error("- WhatsApp:",z?"OK":"MISSING/INVALID (length: ".concat(((pa=B.whatsApp)==null?void 0:pa.length)||0,")")),g.error("- Location Type:",B.locationType?"OK":"MISSING"),g.error("- Client Mismatch:",fe?"ERROR":"OK"),O({errorPoint:"Form Validation",errorReason:"Required fields are missing or invalid. Please check: "+[!re&&"Name",!z&&"WhatsApp (8-15 digits)",!B.locationType&&"Location Type",fe&&"Client Information Mismatch"].filter(Boolean).join(", "),errorDetails:{name:re?"‚úÖ":"‚ùå",whatsApp:z?"‚úÖ":"‚ùå",locationType:B.locationType?"‚úÖ":"‚ùå",clientMismatch:fe||"none"},timestamp:new Date().toLocaleString()}),_("‚ùå Please fill in all required fields: Name, WhatsApp, and Location Type"),(B.locationType==="hotel"||B.locationType==="villa")&&(g.error("- Hotel/Villa Name:",B.hotelVillaName?"OK":"MISSING"),g.error("- Room Number:",B.roomNumber?"OK":"MISSING"),!B.hotelVillaName||!B.roomNumber)){g.error("‚ùå Hotel/Villa booking requires name and room number"),_("‚ùå Hotel/Villa bookings require facility name and room number"),U();return}typeof window!="undefined"&&window.reportBookingComplianceError&&window.reportBookingComplianceError({type:"booking-failure",message:"Order Now clicked with missing fields: Name=".concat(!!re,", WhatsApp=").concat(!!z,", LocationType=").concat(!!B.locationType),component:"PersistentChatWindow-ValidationError",severity:"high"}),U();return}const Ie=Date.now();if(setTimeout(()=>{const na=a.currentBooking!==null,ft=a.bookingStep;g.debug("üîç [ORDER NOW MONITOR] Progress check after 8 seconds:"),g.debug("- Booking created:",{bookingCreated:na}),g.debug("- Current step:",{currentStep:ft}),na&&ft==="chat"?(g.debug("‚úÖ ORDER NOW SUCCESS - Booking created and chat opened!"),g.debug("- Flow completed in",{durationMs:Date.now()-Ie})):na?g.debug("üîç ORDER NOW PROCESSING - Booking exists, waiting for chat step"):(g.debug("üîç ORDER NOW IN PROGRESS - Booking creation still processing"),g.debug("- This is normal for network delays or validation"))},8e3),g.debug("üìã [FLOW] Starting booking creation process"),g.debug("üîç [DEBUG] About to validate required fields..."),!B.name||!B.whatsApp){g.error("‚ùå [VALIDATION FAILED] Missing required fields"),g.error("- Name:",B.name||"MISSING"),g.error("- WhatsApp:",B.whatsApp||"MISSING"),O({errorPoint:"Form Validation",errorReason:"Missing required fields",errorDetails:{name:!!B.name,whatsApp:!!B.whatsApp},timestamp:new Date().toLocaleString()}),he(!1);return}g.debug("‚úÖ [VALIDATION] Required fields present");const Ee="".concat(B.countryCode).concat(B.whatsApp);g.debug("‚úÖ Setting customer WhatsApp:",{fullWhatsApp:Ee}),m({name:B.name,whatsApp:Ee,location:B.location}),g.debug("‚úÖ Customer details set:",{name:B.name,whatsApp:Ee,location:B.location});const tt={home:"üè† Home",hotel:"üè® Hotel",villa:"üè° Villa"};B.locationType&&tt[B.locationType],B.coordinates&&"https://www.google.com/maps?q=".concat(B.coordinates.lat,",").concat(B.coordinates.lng);const Xe=dt(Ke||60),nt=(oe==null?void 0:oe.valid)&&oe.percentage,Tt=nt?Xe*(1-(oe.percentage||0)/100):Xe;try{he(!0),g.debug("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê"),g.debug("üì§ PRE-BOOKING VALIDATION"),g.debug("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê"),g.debug("‚úì Customer Name:",{name:B.name}),g.debug("‚úì Customer WhatsApp:",{whatsapp:"".concat(B.countryCode).concat(B.whatsApp)}),g.debug("‚úì Treatment For:",{massageFor:B.massageFor}),g.debug("‚úì Location Type:",{locationType:B.locationType}),g.debug("‚úì Location:",{location:B.location}),g.debug("‚úì Selected Duration:",{selectedDuration:Ke}),g.debug("‚úì Original Price:",{originalPrice:Xe}),g.debug("‚úì Discounted Price:",{discountedPrice:Tt}),g.debug("‚úì Therapist:",{name:G==null?void 0:G.name,id:G==null?void 0:G.id}),g.debug("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê");const na=!!(v&&q),ft=((Ae=B.location)==null?void 0:Ae.trim())||"Location provided in chat";if(Y){const Je={customerName:B.name,customerPhone:Ee,customerWhatsApp:Ee,duration:Ke||60,serviceType:((An=a.selectedService)==null?void 0:An.serviceName)||"Professional Treatment",price:Tt,totalPrice:Tt,locationZone:B.location||"Bali",location:ft,locationType:B.locationType,address:ft,hotelVillaName:B.hotelVillaName,roomNumber:B.roomNumber,coordinates:B.coordinates,discountCode:nt?Q:void 0,discountPercentage:nt?oe==null?void 0:oe.percentage:void 0,originalPrice:nt?Xe:void 0,...na&&{scheduledDate:v,scheduledTime:q}};Gh({bookingType:na?"SCHEDULED":"ORDER_NOW",payload:Je,selectedDate:v||void 0,selectedTime:q||void 0,therapistId:(G==null?void 0:G.id)||(G==null?void 0:G.$id),therapistName:G==null?void 0:G.name}),he(!1),Me(!0);return}try{if(g.debug("‚úÖ Creating booking..."),na){g.debug("üìÖ Creating scheduled booking...");const Je=((Cr=B.location)==null?void 0:Cr.trim())||"Location provided in chat";g.debug("üîç Scheduled Simple Location Debug:",{locationType:B.locationType,locationText:Je,originalLocation:B.location});try{await Oi({duration:Ke||60,totalPrice:Tt,originalPrice:nt?Xe:void 0,discountCode:nt?Q:void 0,discountPercentage:nt?oe.percentage:void 0,serviceType:((Pr=a.selectedService)==null?void 0:Pr.serviceName)||"Professional Treatment",locationZone:B.location||"Bali",location:Je,coordinates:B.coordinates||void 0,scheduledDate:v,scheduledTime:q,customerPhone:Ee,customerWhatsApp:Ee,customerName:B.name,locationType:B.locationType,address:Je,roomNumber:B.roomNumber||void 0}),g.debug("‚úÖ Scheduled booking created"),g.debug("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê"),g.debug("‚úÖ [ORDER NOW] Scheduled booking created"),g.debug("üìã [FLOW STEP 2 ‚úÖ] Booking creation completed"),g.debug("üìã [FLOW STEP 3 ‚Üí] Chat session already exists, proceeding to step transition..."),g.debug("Switching to chat step..."),g.debug("Current URL (should NOT change):",{url:window.location.href}),g.debug("Current step before setBookingStep:",{step:a.bookingStep}),g.debug("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê"),o("chat"),g.debug("‚úÖ CHAT OPENED AFTER SCHEDULED BOOKING"),g.debug('‚úÖ setBookingStep("chat") called for scheduled booking'),g.debug("Current step after setBookingStep:",{step:a.bookingStep})}catch(Bt){throw g.error("‚ùå Scheduled booking failed:",Bt),O({errorPoint:"Scheduled Booking Creation",errorReason:Bt.message||"Failed to create scheduled booking",errorDetails:{errorName:Bt.name,errorStack:(Dr=Bt.stack)==null?void 0:Dr.split("\n").slice(0,3).join("\n")},timestamp:new Date().toLocaleString()}),U(),Bt}}else{g.debug("üìù Creating immediate booking with reliability layer...");try{g.debug("üìù [ORDER_NOW_MONITOR] Initiating booking creation with timeout and retry protection");const Je=((Er=B.location)==null?void 0:Er.trim())||"Location provided in chat";g.debug("üîç Simple Location Debug:",{locationType:B.locationType,locationText:Je,originalLocation:B.location});const Bt={customerName:B.name,customerPhone:Ee,customerWhatsApp:Ee,duration:Ke||60,serviceType:((Mr=a.selectedService)==null?void 0:Mr.serviceName)||"Professional Treatment",price:Tt,totalPrice:Tt,locationZone:B.location||"Bali",location:Je,locationType:B.locationType,address:Je,hotelVillaName:B.hotelVillaName,roomNumber:B.roomNumber,coordinates:B.coordinates,discountCode:nt?Q:void 0,discountPercentage:nt?oe.percentage:void 0};g.debug("üöÄ [ORDER_NOW_MONITOR] Booking payload prepared:",{customerName:Bt.customerName,duration:Bt.duration,price:Bt.price,location:Bt.location});const ze=await of(async()=>y(Bt),3,1e3,5e3);g.debug("üìä [ORDER_NOW_MONITOR] Booking operation completed:",{success:ze.success,attempts:ze.attempts,duration:ze.duration,bookingId:ze.success?((Rr=ze.data)==null?void 0:Rr.id)||"unknown":null,timestamp:new Date().toISOString()});const zt=ze.success?ze.data:!1;if(_a.checkpoint("booking_creation",zt?"success":"failed",{bookingCreated:!!zt,therapistId:(G==null?void 0:G.id)||(G==null?void 0:G.$id),attempts:ze.attempts,duration:ze.duration},zt?void 0:"Booking creation failed after ".concat(ze.attempts," attempts")),g.debug("üìù [ORDER_NOW_MONITOR] Booking created:",{created:!!zt,bookingId:zt?zt.id:null}),!zt){const Ja=ze.error?lf(ze.error):"unknown";g.error("‚ùå [ORDER_NOW_MONITOR] Booking creation FAILED after all retries"),g.error("üìä [ORDER_NOW_MONITOR] Failure reason:",Ja),g.error("üìä [ORDER_NOW_MONITOR] Error details:",(Br=ze.error)==null?void 0:Br.message),g.error("üìä [ORDER_NOW_MONITOR] Total attempts:",ze.attempts),g.error("üìä [ORDER_NOW_MONITOR] Total duration:",{duration:ze.duration,unit:"ms"}),_a.checkpoint("booking_creation","failed",{bookingCreated:!1,therapistId:(G==null?void 0:G.id)||(G==null?void 0:G.$id),errorCategory:Ja,attempts:ze.attempts,duration:ze.duration},"Booking failed: ".concat(Ja," - ").concat((Lr=ze.error)==null?void 0:Lr.message));let Cn="‚ùå Booking could not be completed. Please try again.";Ja==="timeout"?Cn="‚è±Ô∏è Booking request timed out. Please check your connection and try again.":Ja==="network"?Cn="üåê Network error. Please check your internet connection and try again.":Ja==="validation"&&(Cn="‚ö†Ô∏è Please check your booking details and try again."),_(Cn),he(!1);return}g.debug("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê"),g.debug("‚úÖ [ORDER_NOW_MONITOR] Booking created successfully"),g.debug("üìã [FLOW STEP 1 ‚úÖ] Message sending completed"),g.debug("üìã [FLOW STEP 2 ‚úÖ] Booking creation successful"),g.debug("üìä [ORDER_NOW_MONITOR] Success metrics:",{attempts:ze.attempts,duration:ze.duration+"ms",bookingId:(zt==null?void 0:zt.id)||"unknown",timestamp:new Date().toISOString()}),g.debug("Current URL (should NOT change):",{url:window.location.href}),g.debug("üîç [DEBUG] Current bookingStep BEFORE setBookingStep:",{step:a.bookingStep}),g.debug("üîç [DEBUG] Current booking object:",{booking:a.currentBooking}),g.debug("üîç [DEBUG] isOpen:",{isOpen:a.isOpen}),g.debug("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê"),g.debug("‚úÖ [BOOKING‚ÜíCHAT] Booking created with chat mode enabled"),g.debug('‚úÖ [STATE] createBooking set bookingStep to "chat" atomically with booking data'),g.debug("üé™ [BOOKING‚ÜíCHAT] Chat window opened after booking success"),g.debug("üìã [FLOW STEP 3 ‚úÖ] Chat session ready with booking integration"),g.debug("‚è±Ô∏è [FLOW STEP 4 ‚úÖ] Welcome timer started"),g.debug('‚úÖ setBookingStep("chat") called for immediate booking with chat integration'),g.debug("üì° [DASHBOARD NOTIFY] Therapist dashboard will receive real-time notification"),_a.checkpoint("booking_success","success",{bookingCreated:!0,chatStep:a.bookingStep,attempts:ze.attempts,duration:ze.duration}),_a.endBookingFlow(!0)}catch(Je){throw g.error("‚ùå createBooking threw error:",Je),O({errorPoint:"Immediate Booking Creation",errorReason:Je.message||"Failed to create immediate booking",errorDetails:{errorName:Je.name,errorStack:(Or=Je.stack)==null?void 0:Or.split("\n").slice(0,3).join("\n")},timestamp:new Date().toLocaleString()}),U(),Je}}}catch(Je){throw g.error("‚ùå Error in booking flow:",Je),g.error("‚ùå Error name:",Je.name),g.error("‚ùå Error message:",Je.message),g.error("‚ùå Error stack:",Je.stack),Je}return he(!1),!1}catch(na){const ft=na;return g.error("‚ùå [OUTER CATCH] Failed to send booking request:",ft),g.error("‚ùå [OUTER CATCH] Error name:",ft.name),g.error("‚ùå [OUTER CATCH] Error message:",ft.message),g.error("‚ùå [OUTER CATCH] Error stack:",ft.stack),O({errorPoint:"Booking Flow - Final Catch",errorReason:ft.message||"An unexpected error occurred during booking submission",errorDetails:{errorName:ft.name,errorMessage:ft.message,errorStack:(_r=ft.stack)==null?void 0:_r.split("\n").slice(0,5).join("\n"),formData:{name:B.name?"‚úÖ Provided":"‚ùå Missing",whatsApp:B.whatsApp?"‚úÖ Provided":"‚ùå Missing",locationType:B.locationType||"‚ùå Missing"}},timestamp:new Date().toLocaleString()}),g.debug("üîÑ [ERROR RECOVERY] Staying in details step for user to retry booking..."),_("‚ùå Booking failed. Please check your details and try again."),U(),g.debug("üîì Chat unlocked after booking error - user can retry"),!1}finally{g.debug("üèÅ Finishing submission, setting isSending to false"),he(!1),g.debug("‚úÖ [BOOKING ISOLATION] Cleanup handled by isolation layer")}return!1},Oi=async w=>{try{const z=a.therapist;if(!z)return;const re=w.totalPrice,Ie=Math.round(re*.3);It(Ie);const Ee=z.appwriteId||z.$id||z.id,tt=(z==null?void 0:z.providerType)||"therapist",Xe=await Bo.createScheduledBookingWithDeposit({bookingId:"scheduled_".concat(Date.now()),customerId:a.currentUserId||"guest",customerName:a.customerName||"Guest Customer",therapistId:Ee,therapistName:He(z.name),providerType:tt,serviceType:w.serviceType,duration:w.duration,totalPrice:re,scheduledDate:w.scheduledDate,scheduledTime:w.scheduledTime,location:w.location||"Location TBD",coordinates:w.coordinates});Oe(!0),_("üìÖ Scheduled booking created! Please pay 30% deposit (".concat(Ct(Ie),") to confirm your appointment. Deposits are non-refundable.")),g.debug("üí∞ Scheduled booking created with deposit requirement:",Xe)}catch(z){g.error("‚ùå Failed to create scheduled booking with deposit:",z),_("‚ùå Failed to create scheduled booking. Please try again.")}},cc=async()=>{await ae();const w=zh();if(!w){Me(!1);return}sc(),Me(!1),w.bookingType==="ORDER_NOW"?await y(w.payload)&&o("chat"):(await Oi({duration:w.payload.duration,totalPrice:w.payload.totalPrice,originalPrice:w.payload.originalPrice,serviceType:w.payload.serviceType,scheduledDate:w.selectedDate,scheduledTime:w.selectedTime,location:w.payload.location,locationZone:w.payload.locationZone,coordinates:w.payload.coordinates,customerName:w.payload.customerName,customerPhone:w.payload.customerPhone,customerWhatsApp:w.payload.customerWhatsApp}),o("chat"))},dc=async(w,z)=>{if(a.currentBooking)try{it(!0),await Bo.processDepositPayment(a.currentBooking.id,w,z,"Customer deposit payment for scheduled booking"),Oe(!1),_("‚úÖ Deposit payment submitted! Your booking will be confirmed once the therapist approves your payment proof. You will receive notifications about your upcoming appointment."),g.debug("üí≥ Deposit payment submitted successfully")}catch(re){g.error("‚ùå Failed to process deposit payment:",re),_("‚ùå Failed to process deposit payment. Please try again.")}finally{it(!1)}},uc=async w=>{var Ie,Ee;const z=(Ie=w.target.files)==null?void 0:Ie[0];if(w.target.value="",!z)return;if(!["image/jpeg","image/png","image/jpg"].includes(z.type)){_("‚ùå Please upload a JPG or PNG image.");return}if(z.size>5*1024*1024){_("‚ùå File must be 5MB or smaller.");return}Aa(!0);try{const{appwriteStorage:tt}=await Ce(async()=>{const{appwriteStorage:Ae}=await Promise.resolve().then(()=>wn);return{appwriteStorage:Ae}},void 0),{ID:Xe}=await Ce(async()=>{const{ID:Ae}=await import("./vendor-appwrite.BT2H32tF.js");return{ID:Ae}},[]),{APPWRITE_CONFIG:nt}=await Ce(async()=>{const{APPWRITE_CONFIG:Ae}=await Promise.resolve().then(()=>kn);return{APPWRITE_CONFIG:Ae}},void 0),Tt=Xe.unique();await tt.createFile("payment_proofs",Tt,z);const pa="".concat(nt.endpoint,"/storage/buckets/payment_proofs/files/").concat(Tt,"/view");f({senderId:"customer",senderName:a.customerName||"You",type:"payment_proof",message:pa}),(Ee=a.currentBooking)!=null&&Ee.documentId&&T(a.currentBooking.documentId,pa).catch(()=>{}),_("‚úÖ Payment proof uploaded. Therapist can view it in this chat.")}catch(tt){g.error("Upload payment proof failed",tt),_("‚ùå Failed to upload proof. Please try again.")}finally{Aa(!1)}},mc=async w=>{if(w.preventDefault(),!F.trim()||pe)return;const z=F.trim(),re=ag(z);if(!re.isValid){we(re.warning),setTimeout(()=>we(null),5e3);return}V(""),we(null),he(!0);try{const Ie=await p(z);!Ie.sent&&Ie.warning&&(we(Ie.warning),setTimeout(()=>we(null),5e3))}catch(Ie){const Ee=Ie;g.error("Failed to send message:",Ee)}finally{he(!1)}},fs=ht.length>0&&Fe==="chat";if(ic)return e.jsxs("button",{onClick:r,className:"fixed bottom-4 right-4 z-[9999] flex items-center gap-3 px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",style:{fontFamily:"system-ui, -apple-system, sans-serif"},children:[e.jsx("div",{className:"relative",children:fs?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:G.profilePicture||G.mainImage||G.profileImageUrl||G.heroImageUrl||G.image||G.profileImage||Na(G.appwriteId||G.id||G.$id||""),alt:He(G.name),className:"w-10 h-10 rounded-full object-cover border-2 border-white"}),e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(en,{className:"w-6 h-6 text-white"})})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-sm",children:fs?He(G.name):"Continue Booking"}),e.jsx("div",{className:"text-xs text-orange-100",children:fs?"Tap to continue chat":"Tap to continue"})]})]});const gc=w=>{g.debug("Booking expired:",{bookingId:w}),_("‚è∞ Booking request expired due to timeout.")},pc=()=>{if(!a.currentBooking)return null;const w=a.currentBooking,z=300*1e3,re=new Date(w.createdAt||Date.now()).getTime();return{id:w.id,customerName:w.customerName,customerPhone:w.customerPhone,service:w.serviceType,duration:w.duration,date:w.scheduledDate,time:w.scheduledTime,location:w.locationZone,coordinates:w.coordinates,totalPrice:w.totalPrice,bookingType:w.bookingType,discountCode:w.discountCode,discountPercentage:w.discountPercentage,originalPrice:w.originalPrice,createdAt:re,expiresAt:re+z}};return a.isOpen?(g.debug("üîç PersistentChatWindow RENDER: therapist being displayed:",{name:G==null?void 0:G.name,id:G==null?void 0:G.id}),g.debug("üîç PersistentChatWindow RENDER: chatState.therapist:",{name:(Xi=a.therapist)==null?void 0:Xi.name,id:(Zi=a.therapist)==null?void 0:Zi.id}),e.jsxs(af,{initialStatus:((er=a.currentBooking)==null?void 0:er.status)||"requested",children:[a.currentBooking&&H.isActive&&H.remainingSeconds>0&&!a.isTherapistView&&!a.isOpen&&e.jsx(nf,{therapistName:((tr=a.therapist)==null?void 0:tr.name)||"Therapist",therapistImage:((ar=a.therapist)==null?void 0:ar.profilePicture)||((nr=a.therapist)==null?void 0:nr.mainImage)||((sr=a.therapist)==null?void 0:sr.profileImageUrl)||((ir=a.therapist)==null?void 0:ir.image)||((rr=a.therapist)==null?void 0:rr.profileImage),bookingId:a.currentBooking.bookingId,bookingDetails:{customerName:a.currentBooking.customerName,customerWhatsApp:a.currentBooking.customerWhatsApp,massageFor:a.currentBooking.massageFor,locationType:a.currentBooking.locationType,duration:a.currentBooking.duration,price:dt(a.currentBooking.duration||60),serviceType:a.currentBooking.serviceType||"Professional Treatment"},countdownSeconds:H.remainingSeconds,onCancel:()=>A(),showConfirmation:!0}),e.jsxs("div",{className:"chat-theme-wrapper",children:[e.jsx("style",{children:"\n          .scrollbar-hide::-webkit-scrollbar {\n            display: none; /* Safari and Chrome */\n          }\n          \n          @keyframes slideUp {\n            from {\n              transform: translateY(100%);\n              opacity: 0;\n            }\n            to {\n              transform: translateY(0);\n              opacity: 1;\n            }\n          }\n          .animate-slide-up {\n            animation: slideUp 0.3s ease-out forwards;\n          }\n          \n          /* Shake animation for error container */\n          @keyframes shake {\n            0%, 100% { transform: translateX(0); }\n            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }\n            20%, 40%, 60%, 80% { transform: translateX(5px); }\n          }\n          .animate-shake {\n            animation: shake 0.5s ease-in-out;\n          }\n        "}),((or=a.currentBooking)==null?void 0:or.status)==="pending"&&a.isTherapistView&&e.jsx(Mh,{booking:pc(),onAccept:ue,onDecline:le,onExpire:gc,isVisible:!0}),me&&e.jsxs("div",{className:"mx-4 mb-4 p-4 rounded-xl border-2 bg-gradient-to-br from-violet-50 to-indigo-50 border-violet-200",children:[e.jsxs("h4",{className:"font-bold text-violet-900 mb-2 flex items-center gap-2",children:[e.jsx(_t,{className:"w-5 h-5"}),"Confirm payment received"]}),e.jsx("p",{className:"text-sm text-violet-800 mb-3",children:"Customer submitted payment proof. Confirm or reject within 30 minutes. Once confirmed, the slot will be marked as booked (red) on your calendar."}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/80 rounded-lg border border-violet-200 mb-3",children:[e.jsx(We,{className:"w-6 h-6 text-violet-600"}),e.jsx("span",{className:"font-mono text-xl font-bold text-violet-800",children:Ya(ge)}),e.jsx("span",{className:"text-sm text-violet-700",children:"remaining"})]}),ge>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>j(),className:"flex-1 py-2.5 px-4 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-medium text-sm",children:"Confirm payment received"}),e.jsx("button",{type:"button",onClick:()=>E(),className:"flex-1 py-2.5 px-4 rounded-lg bg-amber-600 hover:bg-amber-700 text-white font-medium text-sm",children:"Reject proof"})]}),ge===0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>j(),className:"flex-1 py-2.5 px-4 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-medium text-sm",children:"Confirm payment received"}),e.jsx("button",{type:"button",onClick:()=>E(),className:"flex-1 py-2.5 px-4 rounded-lg bg-amber-600 hover:bg-amber-700 text-white font-medium text-sm",children:"Reject proof"})]})]}),a.isTherapistView&&a.currentBooking&&((lr=a.currentBooking)==null?void 0:lr.bookingType)==="SCHEDULED"&&(((cr=a.currentBooking)==null?void 0:cr.lifecycleStatus)==="ACCEPTED"||((dr=a.currentBooking)==null?void 0:dr.lifecycleStatus)==="CONFIRMED")&&e.jsx("div",{className:"mx-4 mb-4",children:e.jsx("button",{type:"button",onClick:()=>window.confirm("Refund deposit to customer and cancel this booking?")&&x(),className:"text-xs text-amber-700 hover:text-amber-900 underline",children:"Refund deposit (exception: no-show / agree to refund)"})}),e.jsxs("div",{"data-testid":"persistent-chat-window",className:"fixed bottom-0 pb-[env(safe-area-inset-bottom)] left-0 right-0 sm:bottom-4 sm:left-auto sm:right-4 z-[9999] w-full sm:w-[380px] sm:max-w-[calc(100%-32px)] bg-white sm:rounded-2xl rounded-t-2xl shadow-2xl flex flex-col animate-slide-up",style:{height:"min(600px, calc(100dvh - 60px - env(safe-area-inset-bottom)))",maxHeight:"calc(100dvh - 60px - env(safe-area-inset-bottom))",fontFamily:"system-ui, -apple-system, sans-serif"},children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white px-4 py-4 flex items-center gap-3",children:[e.jsx("img",{src:G.profilePicture||G.mainImage||G.profileImageUrl||G.heroImageUrl||G.image||G.profileImage||Na(G.appwriteId||G.id||G.$id||""),alt:He(G.name),className:"w-10 h-10 rounded-full object-cover border-2 border-white/20 flex-shrink-0 bg-gray-200",onError:w=>{w.target.src=Na(G.appwriteId||G.id||G.$id||"")}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-base truncate",id:"chat-therapist-name","data-gb":"Nama Terapis|Therapist Name",children:He(G.name)}),(G.status||"").toUpperCase()==="AVAILABLE"&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),e.jsx("span",{className:"text-green-100",id:"availability-status","data-gb":"Tersedia|Available",children:"Available"})]})]}),e.jsx("button",{className:"p-2 rounded-full transition-colors ".concat(a.currentBooking?"bg-gray-500/50 text-gray-300 cursor-not-allowed opacity-50":"bg-white/20 text-white hover:bg-white/30"),onClick:()=>{if(a.currentBooking){g.warn("üîí [UI LANGUAGE] Switching disabled during active booking"),alert("‚ö†Ô∏è Language switching is temporarily disabled during booking to prevent data loss.");return}const w=ee==="id"?"en":"id";be(w),localStorage.setItem("chat_ui_language",w),document.documentElement.setAttribute("data-lang",w),g.debug("üåê [UI LANGUAGE] Switched to:",{language:w==="id"?"Indonesian":"English"}),g.debug("üí¨ [MESSAGES] Stay in original language (NOT translated)")},id:"language-selector","data-gb":"Bahasa|Language",title:a.currentBooking?"Language switching disabled during booking":ee==="id"?"üåê Switch to English (UI only)":"üåê Beralih ke Bahasa Indonesia (UI saja)",disabled:!!a.currentBooking,children:e.jsx("span",{className:"text-lg",children:ee==="id"?"üáÆüá©":"üá¨üáß"})}),e.jsx("button",{onClick:i,className:"p-2 hover:bg-white/20 transition-colors rounded-full",title:"Minimize Chat",id:"minimize-chat-btn","data-gb":"Perkecil Chat|Minimize Chat",children:e.jsx("svg",{className:"w-5 h-5 font-bold",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M19 9l-7 7-7-7",stroke:"currentColor",fill:"none"})})})]}),M&&e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 m-4 rounded-lg shadow-lg animate-shake relative z-50",role:"alert",style:{position:"sticky",top:"10px",border:"2px solid #ef4444"},children:[e.jsx("div",{className:"animate-pulse bg-red-100 absolute -top-1 -left-1 -right-1 h-2 rounded-t opacity-50"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Et,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-red-800 font-bold text-lg",children:"‚ö†Ô∏è Booking Error"}),e.jsx("button",{onClick:()=>O(null),className:"text-red-600 hover:text-red-800 transition-colors p-1 rounded hover:bg-red-100",title:"Clear error",children:e.jsx(Qe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"bg-white rounded p-2 border border-red-200",children:[e.jsx("p",{className:"text-gray-700 font-semibold mb-1",children:"üìç Error Point:"}),e.jsx("p",{className:"text-red-700 font-mono text-xs bg-red-50 p-2 rounded",children:M.errorPoint})]}),e.jsxs("div",{className:"bg-white rounded p-2 border border-red-200",children:[e.jsx("p",{className:"text-gray-700 font-semibold mb-1",children:"‚ùå Reason:"}),e.jsx("p",{className:"text-red-600",children:M.errorReason})]}),M.errorDetails&&e.jsxs("div",{className:"bg-white rounded p-2 border border-red-200",children:[e.jsx("p",{className:"text-gray-700 font-semibold mb-2",children:"üîç Detailed Error Information:"}),M.errorDetails.appwriteDetails&&e.jsxs("div",{className:"mb-3 p-3 bg-orange-50 rounded border border-orange-200",children:[e.jsx("p",{className:"font-semibold text-orange-800 mb-1",children:"üìä Appwrite Service Details:"}),e.jsxs("div",{className:"text-sm text-orange-700 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Issue:"})," ",M.errorDetails.appwriteDetails.issue]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Solution:"})," ",M.errorDetails.appwriteDetails.solution]}),M.errorDetails.appwriteDetails.currentConfig&&e.jsxs("p",{children:[e.jsx("strong",{children:"Config:"})," ",M.errorDetails.appwriteDetails.currentConfig]})]})]}),e.jsxs("details",{className:"cursor-pointer mb-2",children:[e.jsx("summary",{className:"text-sm text-gray-600 hover:text-gray-800 py-1",children:"üìã Form Data Status"}),e.jsx("div",{className:"mt-2 p-2 bg-gray-50 rounded text-xs",children:Object.entries(M.errorDetails.formData||{}).map(([w,z])=>e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsxs("span",{className:"capitalize font-medium",children:[w,":"]}),e.jsx("span",{className:z!=null&&z.toString().includes("‚úÖ")?"text-green-600":"text-red-600",children:z==null?void 0:z.toString()})]},w))})]}),e.jsxs("details",{className:"cursor-pointer mb-2",children:[e.jsx("summary",{className:"text-sm text-gray-600 hover:text-gray-800 py-1",children:"üîß System Information"}),e.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-xs font-mono",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Time:"})," ",(ur=M.errorDetails.systemInfo)==null?void 0:ur.timestamp]}),e.jsxs("p",{children:[e.jsx("strong",{children:"URL:"})," ",(mr=M.errorDetails.systemInfo)==null?void 0:mr.url]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Browser:"})," ",(gr=M.errorDetails.systemInfo)==null?void 0:gr.userAgent]})]})]}),e.jsxs("details",{className:"cursor-pointer",children:[e.jsx("summary",{className:"text-sm text-gray-600 hover:text-gray-800 py-1",children:"‚ö†Ô∏è Full Error Details"}),e.jsx("pre",{className:"text-xs text-gray-600 font-mono bg-gray-50 p-2 rounded overflow-x-auto mt-2",children:JSON.stringify(M.errorDetails,null,2)})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t border-red-200",children:["‚è∞ ",M.timestamp]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"üí° What to do:"}),e.jsxs("ul",{className:"text-sm text-gray-700 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Check your internet connection"}),e.jsx("li",{children:"Verify all form fields are filled correctly"}),e.jsx("li",{children:"Try again in a few moments"}),e.jsx("li",{children:"Contact support if error persists"})]}),e.jsxs("div",{className:"mt-3 p-2 bg-blue-50 rounded border border-blue-200",children:[e.jsx("p",{className:"text-xs text-blue-700 mb-2",children:"üîß Debug Actions:"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>{g.debug("üîç Current Form State:",B),g.debug("üîç Current Chat State:",a),g.debug("üîç Full Error Object:",M)},className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded hover:bg-blue-200",children:"Log All States"}),e.jsx("button",{onClick:()=>{const w={error:M,form:B,timestamp:new Date().toISOString(),url:window.location.href};navigator.clipboard.writeText(JSON.stringify(w,null,2)).then(()=>{alert("Complete error report copied to clipboard! üìã")}).catch(()=>{alert("Error details logged to console"),g.debug("üìã Complete Error Report:",w)})},className:"text-xs px-2 py-1 bg-green-100 text-green-800 rounded hover:bg-green-200",children:"Copy Error Report"}),e.jsx("button",{onClick:()=>{O(null),g.debug("üßπ Error cleared from UI")},className:"text-xs px-2 py-1 bg-gray-100 text-gray-800 rounded hover:bg-gray-200",children:"Clear Error"}),e.jsx("button",{onClick:async()=>{try{const{runSystemDiagnostics:w,displayDiagnostics:z}=await Ce(async()=>{const{runSystemDiagnostics:Ie,displayDiagnostics:Ee}=await import("./chatDiagnostics.CLX0e1Et.js");return{runSystemDiagnostics:Ie,displayDiagnostics:Ee}},__vite__mapDeps([10,5,2,7,3,6]));g.debug("üîç Running system diagnostics...");const re=await w();z(re),alert("Diagnostics complete! Check console for details.\nOverall status: ".concat(re.overall))}catch(w){g.error("‚ùå Diagnostics failed:",w),alert("Failed to run diagnostics. Check console for details.")}},className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded hover:bg-yellow-200",children:"üîç Run Diagnostics"})]})]})]})]})]})]}),e.jsx(e.Fragment,{children:a.isTherapistView&&Ge.length>0&&e.jsx("div",{className:"p-4 bg-gradient-to-r from-orange-400 to-red-500",children:Ge.map(w=>e.jsx("div",{className:"bg-white rounded-lg p-4 mb-3 last:mb-0 shadow-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center animate-pulse",children:e.jsx("div",{className:"w-6 h-6 bg-orange-500 rounded-full"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-1",id:"new-booking-title","data-gb":"Permintaan Booking Baru|New Booking Request",children:"üîî Permintaan Booking Baru"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-700 mb-3",children:[e.jsxs("div",{children:[e.jsx("strong",{id:"customer-label","data-gb":"Pelanggan|Customer",children:"Pelanggan:"})," ",w.customerName]}),e.jsxs("div",{children:[e.jsx("strong",{id:"service-type-label","data-gb":"Layanan|Service",children:"Layanan:"})," ",w.serviceType]}),e.jsxs("div",{children:[e.jsx("strong",{id:"duration-booking-label","data-gb":"Durasi|Duration",children:"Durasi:"})," ",w.duration," menit"]}),e.jsxs("div",{children:[e.jsx("strong",{id:"price-booking-label","data-gb":"Harga|Price",children:"Harga:"})," ",Math.round(w.price/1e3),"k"]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("strong",{id:"location-label","data-gb":"Lokasi|Location",children:"Lokasi:"})," ",w.location.address]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ue(w.bookingId),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-medium",id:"accept-booking-btn","data-gb":"Terima Booking|Accept Booking",children:"‚úÖ Terima Booking"}),e.jsx("button",{onClick:()=>le(w.bookingId),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-medium",id:"decline-booking-btn","data-gb":"Tolak|Decline",children:"‚ùå Tolak"})]})]})]})},w.bookingId))})}),e.jsxs("div",{className:"flex-1 bg-white flex flex-col min-h-0 ".concat(Fe==="chat"?"":"overflow-y-auto"),style:Fe==="chat"?{}:{overscrollBehavior:"contain",WebkitOverflowScrolling:"touch"},children:[Fe==="duration"&&e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-48 h-48 mx-auto mb-3 rounded-full overflow-hidden",children:e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/indastreet%20massage%20logo.png?updatedAt=1764533351258",alt:"Indastreet Massage",className:"w-full h-full object-cover"})}),e.jsx("h4",{className:"font-semibold text-gray-800",children:"Select Duration"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Choose your preferred massage duration"})]}),e.jsx("style",{children:"\n              :root {\n                --container-height: 68px;\n                --container-gap: 12px;\n                --hand-size: 120px;\n                --hand-offset: 15px;\n              }\n              @keyframes handMove {\n                0%, 10% { transform: translateX(-50%) translateY(calc(var(--container-height) / 2 + var(--hand-offset))); }\n                15% { transform: translateX(-50%) translateY(calc(var(--container-height) / 2 + var(--hand-offset) + 5px)) scale(0.95); }\n                20%, 30% { transform: translateX(-50%) translateY(calc(var(--container-height) / 2 + var(--hand-offset))); }\n                33%, 43% { transform: translateX(-50%) translateY(calc(var(--container-height) + var(--container-gap) + var(--container-height) / 2 + var(--hand-offset))); }\n                48% { transform: translateX(-50%) translateY(calc(var(--container-height) + var(--container-gap) + var(--container-height) / 2 + var(--hand-offset) + 5px)) scale(0.95); }\n                53%, 63% { transform: translateX(-50%) translateY(calc(var(--container-height) + var(--container-gap) + var(--container-height) / 2 + var(--hand-offset))); }\n                66%, 76% { transform: translateX(-50%) translateY(calc((var(--container-height) + var(--container-gap)) * 2 + var(--container-height) / 2 + var(--hand-offset))); }\n                81% { transform: translateX(-50%) translateY(calc((var(--container-height) + var(--container-gap)) * 2 + var(--container-height) / 2 + var(--hand-offset) + 5px)) scale(0.95); }\n                86%, 96% { transform: translateX(-50%) translateY(calc((var(--container-height) + var(--container-gap)) * 2 + var(--container-height) / 2 + var(--hand-offset))); }\n                100% { transform: translateX(-50%) translateY(calc(var(--container-height) / 2 + var(--hand-offset))); }\n              }\n              @keyframes containerHighlight1 {\n                0%, 10% { border-color: #fb923c; background-color: #fff7ed; box-shadow: 0 10px 15px -3px rgba(251, 146, 60, 0.3); }\n                15% { border-color: #f97316; background-color: #ffedd5; box-shadow: 0 10px 15px -3px rgba(249, 115, 22, 0.4); transform: scale(1.02); }\n                20%, 100% { border-color: #e5e7eb; background-color: white; box-shadow: none; transform: scale(1); }\n              }\n              @keyframes containerHighlight2 {\n                0%, 32% { border-color: #e5e7eb; background-color: white; box-shadow: none; transform: scale(1); }\n                33%, 43% { border-color: #fb923c; background-color: #fff7ed; box-shadow: 0 10px 15px -3px rgba(251, 146, 60, 0.3); }\n                48% { border-color: #f97316; background-color: #ffedd5; box-shadow: 0 10px 15px -3px rgba(249, 115, 22, 0.4); transform: scale(1.02); }\n                53%, 100% { border-color: #e5e7eb; background-color: white; box-shadow: none; transform: scale(1); }\n              }\n              @keyframes containerHighlight3 {\n                0%, 65% { border-color: #e5e7eb; background-color: white; box-shadow: none; transform: scale(1); }\n                66%, 76% { border-color: #fb923c; background-color: #fff7ed; box-shadow: 0 10px 15px -3px rgba(251, 146, 60, 0.3); }\n                81% { border-color: #f97316; background-color: #ffedd5; box-shadow: 0 10px 15px -3px rgba(249, 115, 22, 0.4); transform: scale(1.02); }\n                86%, 100% { border-color: #e5e7eb; background-color: white; box-shadow: none; transform: scale(1); }\n              }\n              .hand-animation { animation: handMove 10s ease-in-out infinite; }\n              .container-animate-1 { animation: containerHighlight1 10s ease-in-out infinite; }\n              .container-animate-2 { animation: containerHighlight2 10s ease-in-out infinite; }\n              .container-animate-3 { animation: containerHighlight3 10s ease-in-out infinite; }\n              .duration-container { height: var(--container-height); }\n            "}),e.jsxs("div",{className:"relative",children:[!Le&&e.jsx("div",{className:"absolute left-1/2 top-0 z-10 hand-animation pointer-events-none",children:e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/glove-removebg-preview.png",alt:"Click to select",className:"w-[120px] h-[120px] drop-shadow-lg object-contain"})}),e.jsx("div",{className:"space-y-3",children:Hs.map((w,z)=>{const re=dt(w.minutes),Ie=z===0?"container-animate-1":z===1?"container-animate-2":"container-animate-3";return e.jsx("div",{className:"w-full",children:e.jsx("button",{onClick:()=>rc(w.minutes),className:"w-full p-4 bg-white border-2 border-gray-200 rounded-xl hover:border-orange-400 hover:bg-orange-50 hover:shadow-lg hover:scale-[1.02] transition-all duration-200 text-left group cursor-pointer duration-container ".concat(Ie),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800 group-hover:text-orange-600",children:w.label}),e.jsxs("div",{className:"text-sm text-gray-500",children:[w.minutes," minutes"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-orange-500 text-lg",children:[Math.round(re/1e3),"k"]}),e.jsx("div",{className:"text-xs text-gray-400 group-hover:text-orange-400",children:"Book Now ‚Üí"})]})]})})},w.minutes)})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>{Gt({}),aa(!0)},className:"text-sm text-orange-600 font-medium hover:text-orange-700 underline-offset-2 hover:underline",children:"Not sure? View massage types"})}),e.jsx("p",{className:"text-xs text-gray-400 text-center mt-4",children:"Indonesia's Premium Choice"})]},"duration-step"),Fe==="datetime"&&e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-3 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(Ia,{className:"w-8 h-8 text-orange-500"})}),e.jsx("h4",{className:"font-semibold text-gray-800",children:"Schedule Appointment"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[((pr=Hs.find(w=>w.minutes===Ke))==null?void 0:pr.label)||"".concat(Ke," min")," ‚Ä¢ ",Ct(dt(Ke||60))]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ah,{value:v,onChange:R,minDate:new Date().toISOString().split("T")[0],label:"Select Date"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(We,{className:"w-4 h-4 inline mr-1"}),"Select Time"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00"].map(w=>e.jsx("button",{type:"button",onClick:()=>X(w),className:"py-2 px-3 rounded-lg text-sm font-medium transition-all ".concat(q===w?"bg-orange-500 text-white":"bg-white border-2 border-gray-200 text-gray-700 hover:border-orange-400"),children:w},w))})]}),v&&q&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-3",children:e.jsxs("div",{className:"text-sm text-orange-800",children:[e.jsx("strong",{children:"Selected:"})," ",new Date(v).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})," at ",q]})}),e.jsxs("button",{onClick:oc,disabled:!v||!q,className:"w-full py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-semibold rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(Pt,{className:"w-5 h-5"}),"Continue to Details"]})]})]},"datetime-step"),Fe==="confirmation"&&a.selectedService&&e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 rounded-2xl p-4 border border-orange-200 shadow-sm mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:G.profilePicture||G.mainImage||G.profileImageUrl||G.heroImageUrl||G.image||G.profileImage||Na(G.appwriteId||G.id||G.$id||""),alt:He(G.name),className:"w-14 h-14 rounded-full object-cover border-2 border-orange-400 shadow-md"}),e.jsx("span",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",children:e.jsx(Pt,{className:"w-3 h-3 text-white"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900",children:He(G.name)}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[e.jsx(Ot,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),e.jsx("span",{children:"4.9"}),e.jsx("span",{className:"text-gray-400",children:"‚Ä¢"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Available"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 border border-orange-200 mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-semibold text-orange-600 uppercase tracking-wide",children:"Selected Service"}),e.jsx(da,{className:"w-4 h-4 text-orange-400"})]}),e.jsx("div",{className:"font-bold text-lg text-gray-900 mb-1",children:a.selectedService.serviceName}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(We,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-medium",children:[a.selectedService.duration," min"]})]}),e.jsx("div",{className:"text-xl font-bold text-orange-600",children:Ct(a.selectedService.price)})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 rounded-xl p-3 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(We,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs opacity-90",children:"Estimated Arrival"}),e.jsx("div",{className:"font-semibold",children:"~1 Hour"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs opacity-90",children:"Countdown"}),e.jsx("div",{className:"font-bold text-2xl font-mono tracking-wider",children:Ya(gt)})]})]})})]}),e.jsxs("button",{onClick:()=>o("details"),className:"w-full py-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-[1.02]",children:[e.jsx(Pt,{className:"w-5 h-5"}),"Confirm & Book Now"]}),e.jsx("button",{onClick:()=>o("duration"),className:"w-full mt-3 py-2 text-sm text-orange-600 hover:text-orange-700 font-medium",children:"‚Üê Change selection"})]},"confirmation-step"),Fe==="details"&&e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-64 h-64 mx-auto -mt-[15px] flex items-center justify-center",children:e.jsx("img",{src:"https://ik.imagekit.io/7grri5v7d/indastreet%20massage%20logo.png?updatedAt=1764533351258",alt:"Indastreet Massage",className:"w-64 h-64 object-contain"})}),e.jsx("h4",{className:"text-lg font-bold text-gray-800 text-center mb-2 -mt-[20px]",children:"Booking Details"})]}),e.jsxs("div",{className:"text-center mb-4",children:[a.selectedService?e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("p",{className:"text-lg font-medium text-orange-600",children:a.selectedService.serviceName}),e.jsxs("p",{className:"text-base text-gray-700",children:[e.jsxs("span",{className:"font-bold",children:[a.selectedService.duration," min"]})," ‚Ä¢ ",e.jsxs("span",{className:"font-bold",children:["IDR ",a.selectedService.price.toLocaleString("id-ID")]})]})]}):e.jsxs("p",{className:"text-base text-gray-700 mt-1",children:[e.jsx("span",{className:"font-bold",children:((hr=Hs.find(w=>w.minutes===Ke))==null?void 0:hr.label)||"".concat(Ke," min")})," ‚Ä¢ ",e.jsxs("span",{className:"font-bold",children:[Math.round(dt(Ke||60)/1e3),"k"]})]}),Ca&&v&&q&&e.jsxs("p",{className:"text-sm text-orange-600 mt-1",children:["üìÖ ",new Date(v).toLocaleDateString("en-US",{month:"short",day:"numeric"})," at ",q]}),Ca?e.jsx("p",{className:"text-sm text-orange-600 mt-2 font-medium",children:"‚è∞ Required 20 Minute Before Therapy"}):e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"üïê Estimated Arrival: 30-60 minutes"})]}),e.jsxs("form",{onSubmit:w=>(w.preventDefault(),w.stopPropagation(),lc(w),!1),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(Ut,{className:"w-4 h-4 inline mr-1"}),"Your Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"customer_name",autoComplete:"name",inputMode:"text",value:B.name,onChange:w=>ne(z=>({...z,name:w.target.value})),onFocus:w=>{setTimeout(()=>w.target.scrollIntoView({behavior:"smooth",block:"center"}),300)},placeholder:"Enter your name",className:"w-full px-4 py-3 border-2 rounded-xl focus:ring-2 outline-none transition-all text-base ".concat(B.name.trim()?"border-gray-200 focus:border-orange-400 focus:ring-orange-100":"border-red-300 focus:border-red-500 focus:ring-red-200 bg-red-50 animate-pulse"),style:{fontSize:"16px"},required:!0}),!B.name.trim()&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1 font-medium",children:[e.jsx("span",{children:"‚ö†Ô∏è"})," Name is required to proceed"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-1",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"WhatsApp Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{name:"country_code",value:B.countryCode,onChange:w=>ne(z=>({...z,countryCode:w.target.value})),className:"px-2 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:ring-2 focus:ring-orange-100 outline-none transition-all bg-white text-base accent-orange-500",style:{fontSize:"16px",accentColor:"#f97316"},children:[e.jsx("option",{value:"+62",children:"üáÆüá© +62"}),e.jsx("option",{value:"+1",children:"üá∫üá∏ +1"}),e.jsx("option",{value:"+44",children:"üá¨üáß +44"}),e.jsx("option",{value:"+61",children:"üá¶üá∫ +61"}),e.jsx("option",{value:"+65",children:"üá∏üá¨ +65"}),e.jsx("option",{value:"+60",children:"üá≤üáæ +60"}),e.jsx("option",{value:"+66",children:"üáπüá≠ +66"}),e.jsx("option",{value:"+81",children:"üáØüáµ +81"}),e.jsx("option",{value:"+82",children:"üá∞üá∑ +82"}),e.jsx("option",{value:"+86",children:"üá®üá≥ +86"}),e.jsx("option",{value:"+91",children:"üáÆüá≥ +91"}),e.jsx("option",{value:"+49",children:"üá©üá™ +49"}),e.jsx("option",{value:"+33",children:"üá´üá∑ +33"}),e.jsx("option",{value:"+31",children:"üá≥üá± +31"}),e.jsx("option",{value:"+7",children:"üá∑üá∫ +7"})]}),e.jsx("input",{type:"tel",name:"whatsapp_number",autoComplete:"tel",inputMode:"numeric",pattern:"[0-9]*",value:B.whatsApp,onChange:w=>ne(z=>({...z,whatsApp:w.target.value.replace(/[^0-9]/g,"")})),onFocus:w=>{setTimeout(()=>w.target.scrollIntoView({behavior:"smooth",block:"center"}),300)},placeholder:"812 3456 7890",className:"flex-1 px-4 py-3 border-2 rounded-xl focus:ring-2 outline-none transition-all text-base ".concat(!B.whatsApp.trim()||B.whatsApp.length<8||B.whatsApp.length>15?"border-red-300 focus:border-red-500 focus:ring-red-200 bg-red-50 animate-pulse":"border-gray-200 focus:border-orange-400 focus:ring-orange-100"),style:{fontSize:"16px"},required:!0})]}),(!B.whatsApp.trim()||B.whatsApp.length<8||B.whatsApp.length>15)&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1 font-medium",children:[e.jsx("span",{children:"‚ö†Ô∏è"})," Valid WhatsApp number required (8-15 digits)"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-4 text-center",children:["Treatment For ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"male",label:"Male",icon:"https://ik.imagekit.io/7grri5v7d/male_ss-removebg-preview.png",isImage:!0},{value:"female",label:"Female",icon:"https://ik.imagekit.io/7grri5v7d/male_sss-removebg-preview.png",isImage:!0},{value:"children",label:"Children",icon:"https://ik.imagekit.io/7grri5v7d/male_ssss-removebg-preview.png",isImage:!0}].map(w=>{const z=G.clientPreferences||"Males And Females";let re=!0;return w.value==="male"?re=z==="Males Only"||z==="Males And Females"||z==="All Ages And Genders":w.value==="female"?re=z==="Females Only"||z==="Males And Females"||z==="All Ages And Genders":w.value==="children"&&(re=z==="Babies Only"||z==="All Ages And Genders"),e.jsx("button",{type:"button",onClick:()=>{if(ne(Ie=>({...Ie,massageFor:w.value})),re)ve(null);else{const Ie={"Males Only":"Male clients only","Females Only":"Female clients only","Males And Females":"Male and Female clients","Babies Only":"Babies/Children only","All Ages And Genders":"All ages and genders"};ve("Unfortunately ".concat(He(G.name)," only provides massage service for ").concat(Ie[z]||z))}},className:"text-sm font-medium transition-all flex flex-col items-center gap-1 relative ".concat(w.isImage?B.massageFor===w.value?"scale-105":"":"py-3 px-2 rounded-xl ".concat(B.massageFor===w.value?re?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg scale-105":"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg scale-105":"bg-white border-2 border-gray-200 text-gray-700 hover:border-orange-400 hover:bg-orange-50")),children:w.isImage?e.jsxs("div",{className:"relative -mt-[10px]",children:[e.jsx("img",{src:w.icon,alt:w.label,className:"w-[100px] h-[100px] object-cover"}),e.jsx("span",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 font-bold text-sm drop-shadow-lg ".concat(B.massageFor===w.value?"text-orange-500":"text-white"),children:w.label})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xl",children:w.icon}),e.jsx("span",{children:w.label})]})},w.value)})}),fe&&e.jsxs("div",{className:"mt-3 p-3 bg-red-50 border border-red-300 rounded-xl",children:[e.jsxs("p",{className:"text-sm text-red-700 font-medium",children:["‚ö†Ô∏è ",fe]}),e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Please choose a different therapist or select a compatible option."})]}),!B.massageFor&&e.jsxs("p",{className:"text-xs text-orange-600 mt-2 text-center flex items-center justify-center gap-1 font-medium",children:[e.jsx("span",{children:"‚ö†Ô∏è"})," Please select who the treatment is for (some therapists only serve specific clients)"]})]}),Ca?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4 text-center",children:"Treatment Center Address"}),e.jsxs("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-xl p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(Mt,{className:"w-5 h-5 text-orange-600 mr-2"}),e.jsx("span",{className:"text-sm font-semibold text-orange-800",children:"Treatment Location"})]}),e.jsx("p",{className:"text-gray-800 font-medium",children:((fr=a.therapist)==null?void 0:fr.location)||"Professional Treatment Center"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:((yr=a.therapist)==null?void 0:yr.city)||"Bali"})]})]}):e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-4 text-center",children:["My Location ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"home",label:"Home",icon:"https://ik.imagekit.io/7grri5v7d/home%20icon.png",isImage:!0},{value:"hotel",label:"Hotel",icon:"https://ik.imagekit.io/7grri5v7d/hotel%20icon.png",isImage:!0},{value:"villa",label:"Villa",icon:"https://ik.imagekit.io/7grri5v7d/villa%20icon.png",isImage:!0}].map(w=>e.jsx("button",{type:"button",onClick:()=>ne(z=>({...z,locationType:w.value})),className:"text-sm font-medium transition-all flex flex-col items-center gap-1 relative ".concat(w.isImage?B.locationType===w.value?"scale-105":"":"py-3 px-2 rounded-xl ".concat(B.locationType===w.value?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg scale-105":"bg-white border-2 border-gray-200 text-gray-700 hover:border-orange-400 hover:bg-orange-50")),children:w.isImage?e.jsxs("div",{className:"relative -mt-[10px]",children:[e.jsx("img",{src:w.icon,alt:w.label,className:"w-[100px] h-[100px] object-cover"}),e.jsx("span",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 font-bold text-sm drop-shadow-lg ".concat(B.locationType===w.value?"text-orange-500":"text-white"),children:w.label})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xl",children:w.icon}),e.jsx("span",{children:w.label})]})},w.value))}),!B.locationType&&e.jsxs("p",{className:"text-xs text-red-600 mt-2 text-center flex items-center justify-center gap-1 font-medium",children:[e.jsx("span",{children:"‚ö†Ô∏è"})," Please select your location type"]})]}),!Ca&&e.jsx("div",{className:"text-center",children:e.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-4",children:"Massage Location"})}),!Ca&&B.locationType==="home"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Line 1 *"}),e.jsx("input",{type:"text",name:"address_line_1",autoComplete:"address-line1",inputMode:"text",value:B.address1||"",onChange:w=>ne(z=>({...z,address1:w.target.value})),onFocus:w=>{setTimeout(()=>w.target.scrollIntoView({behavior:"smooth",block:"center"}),300)},placeholder:"Street address, building name",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:ring-2 focus:ring-orange-100 outline-none transition-all text-base",style:{fontSize:"16px"},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Line 2 (Area/District) *"}),e.jsx("input",{type:"text",name:"address_line_2",autoComplete:"address-line2",inputMode:"text",value:B.address2||"",onChange:w=>ne(z=>({...z,address2:w.target.value})),onFocus:w=>{setTimeout(()=>w.target.scrollIntoView({behavior:"smooth",block:"center"}),300)},placeholder:"e.g. Seminyak, Kuta, Ubud",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:ring-2 focus:ring-orange-100 outline-none transition-all text-base",style:{fontSize:"16px"},required:!0})]})]}),!Ca&&(B.locationType==="hotel"||B.locationType==="villa")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 01-1 1h-2a1 1 0 01-1-1v-2a1 1 0 00-1-1H9a1 1 0 00-1 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V4zm3 1h2v2H7V5zm2 4H7v2h2V9zm2-4h2v2h-2V5zm2 4h-2v2h2V9z",clipRule:"evenodd"})}),B.locationType==="hotel"?"Hotel":"Villa"," Name *"]}),e.jsx("input",{type:"text",name:"hotel_villa_name",autoComplete:"organization",inputMode:"text",value:B.hotelVillaName,onChange:w=>ne(z=>({...z,hotelVillaName:w.target.value})),onFocus:w=>{setTimeout(()=>w.target.scrollIntoView({behavior:"smooth",block:"center"}),300)},placeholder:B.locationType==="hotel"?"e.g. Grand Hyatt Bali":"e.g. Villa Seminyak Estate",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:ring-2 focus:ring-orange-100 outline-none transition-all text-base",style:{fontSize:"16px"},required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})}),"Room Number *"]}),e.jsx("input",{type:"text",name:"room_number",inputMode:"text",value:B.roomNumber,onChange:w=>ne(z=>({...z,roomNumber:w.target.value})),onFocus:w=>{setTimeout(()=>w.target.scrollIntoView({behavior:"smooth",block:"center"}),300)},placeholder:"e.g. Room 1205",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:ring-2 focus:ring-orange-100 outline-none transition-all text-base",style:{fontSize:"16px"},required:!0})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Have a Discount Code?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"discount_code",inputMode:"text",autoCapitalize:"characters",value:Q,onChange:w=>{te(w.target.value.toUpperCase()),Ye(null)},onFocus:w=>{setTimeout(()=>w.target.scrollIntoView({behavior:"smooth",block:"center"}),300)},placeholder:"Enter code",disabled:oe==null?void 0:oe.valid,className:"flex-1 px-4 py-3 border-2 rounded-xl outline-none transition-all text-base ".concat(oe!=null&&oe.valid?"border-green-400 bg-green-50 text-green-700":oe===null?"border-gray-200 focus:border-orange-400 focus:ring-2 focus:ring-orange-100":"border-red-300 bg-red-50"),style:{fontSize:"16px"}}),!(oe!=null&&oe.valid)&&e.jsx("button",{type:"button",onClick:za,disabled:et||!Q.trim(),className:"px-4 py-3 bg-orange-500 text-white font-medium rounded-xl hover:bg-orange-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:et?e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Vo,{className:"w-4 h-4"}),"Apply"]})})]}),oe&&e.jsx("div",{className:"mt-2 p-3 rounded-xl text-sm ".concat(oe.valid?"bg-green-100 border border-green-300":"bg-red-50 border border-red-200"),children:oe.valid?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-700",children:oe.message}),e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Original: ",Ct(dt(Ke||60))," ‚Üí",e.jsx("span",{className:"font-bold ml-1",children:Ct(dt(Ke||60)*(1-(oe.percentage||0)/100))})]})]}),e.jsx("button",{type:"button",onClick:()=>{te(""),Ye(null)},className:"ml-auto text-green-600 hover:text-green-800",children:e.jsx(Qe,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Et,{className:"w-5 h-5"}),e.jsx("p",{children:oe.message})]})})]}),(oe==null?void 0:oe.valid)&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Original Price:"}),e.jsx("span",{className:"text-gray-400 line-through",children:Ct(dt(Ke||60))})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-green-600 font-medium",children:["Discount (",oe.percentage,"%):"]}),e.jsxs("span",{className:"text-green-600",children:["-",Ct(dt(Ke||60)*(oe.percentage||0)/100)]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-green-200",children:[e.jsx("span",{className:"text-gray-800 font-bold",children:"You Pay:"}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:Ct(dt(Ke||60)*(1-(oe.percentage||0)/100))})]})]}),e.jsx("div",{className:"border-t-2 border-gray-200 pt-4 mt-4",children:e.jsx("button",{type:"submit","data-testid":"order-now-button",disabled:pe||!B.name.trim()||!B.whatsApp||B.whatsApp.length<8||B.whatsApp.length>15||!!fe||!B.locationType||(B.locationType==="hotel"||B.locationType==="villa")&&(!B.hotelVillaName||!B.roomNumber),className:"w-full py-3 font-semibold rounded-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 ".concat(!pe&&B.name.trim()&&B.whatsApp&&B.whatsApp.length>=8&&B.whatsApp.length<=15&&!fe&&B.locationType&&!((B.locationType==="hotel"||B.locationType==="villa")&&(!B.hotelVillaName||!B.roomNumber))?"bg-green-500 hover:bg-green-600 text-white":"bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700"),children:pe?e.jsxs(wa.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Sending..."]},"sending"):e.jsxs(wa.Fragment,{children:[e.jsx(Ys,{className:"w-5 h-5"}),"Order Now"]},"ready")})})]})]},"details-step"),e.jsxs("div",{className:"flex flex-col min-h-0 ".concat(Fe==="chat"?"flex-1":"hidden"),children:[e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:e.jsxs("div",{className:"p-4 space-y-3",children:[a.currentBooking&&e.jsx(sf,{currentBooking:{status:a.currentBooking.status,serviceType:((br=a.selectedService)==null?void 0:br.serviceName)||a.currentBooking.serviceType||"Professional Massage",providerType:((xr=a.currentBooking)==null?void 0:xr.providerType)||"therapist",massageFor:((kr=a.currentBooking)==null?void 0:kr.massageFor)||B.massageFor,duration:a.selectedDuration||a.currentBooking.duration||60,customerName:a.currentBooking.customerName||a.customerName||B.name||"Customer",locationZone:a.currentBooking.locationZone||a.currentBooking.address,totalPrice:(vr=a.currentBooking.totalPrice)!=null?vr:dt(a.selectedDuration||60),bookingType:a.currentBooking.bookingType==="SCHEDULED"||a.currentBooking.bookingType==="scheduled"?"scheduled":"book_now",scheduledDate:a.currentBooking.scheduledDate,scheduledTime:a.currentBooking.scheduledTime,bookingId:a.currentBooking.bookingId||a.currentBooking.id,id:a.currentBooking.id},bookingCountdown:H.isActive&&H.remainingSeconds>0?H.remainingSeconds:null,onCancelBooking:A}),ht.length===0&&!a.currentBooking&&e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("div",{className:"relative mb-6",children:e.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-r from-orange-400 to-orange-600 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:e.jsx(en,{className:"w-10 h-10 text-white"})})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["üéâ Welcome ",He(G.name)," Massage Service"]}),e.jsx("p",{className:"text-gray-500 text-sm leading-relaxed",children:"Your booking has been submitted. Chat with your therapist once they accept."})]})]}),ht.length>0&&e.jsx(e.Fragment,{children:ht.map(w=>{const z=w.senderType==="customer"||w.senderId!==G.id&&w.senderType!=="therapist"&&w.senderType!=="system";if(w.senderType==="system"||w.isSystemMessage){const Ie=w.message.includes("‚úÖ")||w.message.includes("üéâ")||w.message.includes("‚ú®"),Ee=w.message.includes("‚ö†Ô∏è")||w.message.includes("‚è∞"),tt=w.message.includes("‚ùå"),Xe=w.message.includes("üì®")||w.message.includes("üîÑ")||w.message.includes("üöó")||w.message.includes("üí≥");return e.jsx("div",{className:"flex justify-center my-3",children:e.jsxs("div",{className:"text-sm px-5 py-3 rounded-2xl max-w-[90%] text-center shadow-sm animate-fade-in ".concat(tt?"bg-gradient-to-r from-red-50 to-red-100 text-red-800 border border-red-200":Ee?"bg-gradient-to-r from-yellow-50 to-yellow-100 text-yellow-900 border border-yellow-200":Ie?"bg-gradient-to-r from-green-50 to-green-100 text-green-800 border border-green-200":Xe?"bg-gradient-to-r from-blue-50 to-blue-100 text-blue-800 border border-blue-200":"bg-gradient-to-r from-gray-50 to-gray-100 text-gray-700 border border-gray-200"),children:[e.jsx("p",{className:"whitespace-pre-wrap font-medium leading-relaxed",children:w.message}),e.jsx("div",{className:"text-xs mt-2 opacity-70",children:vn(w.createdAt)})]})},w.$id)}return e.jsx("div",{className:"flex ".concat(z?"justify-end":"justify-start"," animate-fade-in-up"),children:e.jsxs("div",{className:"max-w-[75%] px-4 py-3 rounded-2xl shadow-sm transition-all duration-200 hover:shadow-md chat-bubble-hover ".concat(z?"bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-br-md":"bg-white border border-gray-200 text-gray-800 rounded-bl-md hover:border-gray-300"),children:[!z&&e.jsx("div",{className:"text-xs font-medium text-orange-500 mb-1",children:w.senderName}),w.messageType==="payment_proof"&&w.message.startsWith("http")?e.jsxs("div",{className:"space-y-1",children:[e.jsx("img",{src:w.message,alt:"Payment proof",className:"max-w-full rounded-lg border border-gray-200 max-h-64 object-contain"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Payment proof"})]}):e.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:w.message}),e.jsxs("div",{className:"text-xs mt-1 flex items-center gap-1 ".concat(z?"text-orange-100 justify-end":"text-gray-400"),children:[vn(w.createdAt),z&&w.read&&e.jsx(Pt,{className:"w-3 h-3"})]})]})},w.$id)})}),e.jsx("div",{ref:nn})]})}),a.currentBooking&&e.jsxs(e.Fragment,{children:[pt&&e.jsxs("div",{className:"mx-4 mb-4 p-4 rounded-xl border-2 bg-gradient-to-br from-emerald-50 to-teal-50 border-emerald-200",children:[e.jsxs("h4",{className:"font-bold text-emerald-900 mb-2 flex items-center gap-2",children:[e.jsx(_t,{className:"w-5 h-5"}),"Secure your booking ‚Äì 30% deposit"]}),e.jsx("p",{className:"text-sm text-emerald-800 mb-3",children:"Transfer 30% deposit and upload proof of payment in this chat within 30 minutes."}),e.jsx("p",{className:"text-xs text-amber-800 mb-3 bg-amber-50/80 border border-amber-200 rounded-lg px-3 py-2",children:"‚ö†Ô∏è Deposit is non-refundable; you cannot switch therapist/place for this booking. Refund only if: no-show, service not provided, or therapist/place agrees to refund."}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/80 rounded-lg border border-emerald-200",children:[e.jsx(We,{className:"w-6 h-6 text-emerald-600"}),e.jsxs("span",{className:"font-mono text-xl font-bold text-emerald-800",children:[Math.floor(qt/60),":",(qt%60).toString().padStart(2,"0")]}),e.jsx("span",{className:"text-sm text-emerald-700",children:"remaining"})]}),qt<=0&&e.jsx("p",{className:"text-sm text-amber-700 mt-2",children:"Time‚Äôs up. Upload proof if you‚Äôve already transferred, or the slot may be released."}),e.jsx("input",{ref:k,type:"file",accept:"image/jpeg,image/png,image/jpg",className:"hidden",onChange:uc}),e.jsx("button",{type:"button",disabled:Ta,onClick:()=>{var w;return(w=k.current)==null?void 0:w.click()},className:"mt-3 w-full py-2.5 px-4 rounded-lg bg-emerald-600 hover:bg-emerald-700 disabled:opacity-50 text-white font-medium text-sm flex items-center justify-center gap-2",children:Ta?"Uploading‚Ä¶":"Upload payment proof (JPG/PNG, max 5MB)"})]}),sn&&e.jsxs("div",{className:"mx-4 mb-4 p-4 rounded-xl border-2 bg-gradient-to-br from-amber-50 to-orange-50 border-amber-200",children:[e.jsxs("h4",{className:"font-bold text-amber-900 mb-2 flex items-center gap-2",children:[e.jsx(da,{className:"w-5 h-5"}),"Suggested therapists & places"]}),e.jsx("p",{className:"text-sm text-amber-800 mb-3",children:"Click to view and book with an available therapist or open place."}),ta?e.jsx("p",{className:"text-sm text-amber-700",children:"Loading‚Ä¶"}):e.jsxs("div",{className:"space-y-2",children:[xt.map(w=>e.jsxs("button",{type:"button",onClick:()=>s({id:w.name,appwriteId:w.appwriteId,name:w.name,mainImage:w.image},"book","search"),className:"w-full text-left p-3 rounded-lg bg-white/80 hover:bg-white border border-amber-200 flex items-center gap-3",children:[w.image?e.jsx("img",{src:w.image,alt:"",className:"w-10 h-10 rounded-full object-cover"}):e.jsx(Ut,{className:"w-10 h-10 text-amber-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:w.name}),e.jsx("span",{className:"text-xs text-amber-700 ml-auto",children:"Therapist"})]},w.appwriteId)),ma.map(w=>e.jsxs("button",{type:"button",onClick:()=>s({id:w.name,appwriteId:w.appwriteId,name:w.name,mainImage:w.image},"book","search"),className:"w-full text-left p-3 rounded-lg bg-white/80 hover:bg-white border border-amber-200 flex items-center gap-3",children:[w.image?e.jsx("img",{src:w.image,alt:"",className:"w-10 h-10 rounded-full object-cover"}):e.jsx(Mt,{className:"w-10 h-10 text-amber-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:w.name}),e.jsx("span",{className:"text-xs text-amber-700 ml-auto",children:"Place"})]},w.appwriteId)),!ta&&xt.length===0&&ma.length===0&&e.jsx("p",{className:"text-sm text-amber-700",children:"No suggested options right now. Try again later or search from the home page."})]})]}),!1,(a.currentBooking.status==="therapist_accepted"||a.currentBooking.status==="user_confirmed")&&e.jsx(Jh,{therapist:{id:G.id,name:He(G.name),image:G.image,rating:4.9,whatsApp:G.whatsApp||G.phone},booking:{estimatedArrival:45,acceptedAt:new Date().toISOString(),location:a.currentBooking.locationZone},onConfirmBooking:D,onCancelBooking:A,onRequestLocation:()=>g.debug("Request location"),onContactTherapist:()=>window.open("tel:".concat(G.phone))}),a.currentBooking.status==="on_the_way"&&e.jsx(Qh,{therapist:{id:G.id,name:He(G.name),image:G.image,whatsApp:G.whatsApp,phone:G.phone},booking:{estimatedArrival:Math.floor(gt/60),departedAt:new Date().toISOString(),currentLocation:"Heading to your location",notes:"Your therapist is on the way"},onContactTherapist:w=>{w==="call"&&window.open("tel:".concat(G.phone)),w==="whatsapp"&&window.open("https://wa.me/".concat(G.whatsApp)),w==="chat"&&o("chat")},onUpdateLocation:()=>g.debug("Update location")}),a.currentBooking.status==="user_confirmed"&&e.jsx(Xh,{therapist:{id:G.id,name:He(G.name),image:G.image,phone:G.phone},booking:{serviceType:"Traditional Massage",duration:Ke||60,totalPrice:dt(Ke||60),arrivedAt:new Date().toISOString(),location:a.currentBooking.locationZone},onStartService:()=>g.debug("Start service"),onContactTherapist:()=>window.open("tel:".concat(G.phone)),onEmergencyContact:()=>window.open("tel:911"),onConfirmPaymentMethod:w=>g.debug("Payment method:",{method:w})}),a.currentBooking.status==="completed"&&e.jsx(Zh,{type:"service",initialSeconds:(Ke||60)*60,title:"Massage Session",description:"Enjoy your relaxing massage",isActive:!0}),a.currentBooking.status==="completed"&&!a.currentBooking.paymentStatus&&e.jsx(ef,{pricing:{servicePrice:dt(Ke||60),total:dt(Ke||60)},onMethodSelect:()=>{},onPaymentSubmit:()=>{},showTipping:!0,allowPromoCode:!0}),a.currentBooking&&e.jsx(_o,{bookingStatus:a.currentBooking.status,soundEnabled:!0,pushEnabled:!0})]})]},"chat-step"),a.currentBooking&&e.jsx(_o,{bookingStatus:a.currentBooking.status,soundEnabled:!0,pushEnabled:!0}),Fe==="chat"&&((wr=a.currentBooking)==null?void 0:wr.status)==="therapist_accepted"&&e.jsxs("div",{className:"p-3 bg-blue-50 border-t border-blue-200",children:[e.jsxs("p",{className:"text-xs text-blue-700 mb-2 text-center",children:["‚úÖ ",He(G.name)," accepted your booking. Confirm now!"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:D,className:"flex-1 py-2.5 bg-gradient-to-r from-green-500 to-emerald-600 text-white text-sm font-semibold rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all flex items-center justify-center gap-1",children:[e.jsx(Pt,{className:"w-4 h-4"}),"Confirm Booking"]}),e.jsx("button",{onClick:A,className:"px-4 py-2.5 bg-gray-200 text-gray-700 text-sm font-semibold rounded-xl hover:bg-gray-300 transition-all",children:"Cancel"})]})]}),Fe==="chat"&&((Nr=a.currentBooking)==null?void 0:Nr.status)==="completed"&&!((Sr=a.currentBooking)!=null&&Sr.paymentStatus)&&e.jsxs("div",{className:"flex-shrink-0 p-3 bg-emerald-50 border-t border-emerald-200",children:[e.jsx("p",{className:"text-xs text-emerald-700 mb-2 text-center",children:"‚ú® Service completed! Choose payment method:"}),e.jsx("p",{className:"text-xs text-emerald-600 mb-3 text-center",children:"üí° For bank transfer, use details shared in chat above"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>C("cash"),className:"flex-1 py-2.5 bg-white border-2 border-emerald-400 text-emerald-700 text-sm font-semibold rounded-xl hover:bg-emerald-50 transition-all flex items-center justify-center gap-1",children:"üíµ Cash"}),e.jsxs("button",{onClick:()=>{S(),C("bank_transfer")},className:"flex-1 py-2.5 bg-gradient-to-r from-emerald-500 to-green-600 text-white text-sm font-semibold rounded-xl hover:from-emerald-600 hover:to-green-700 transition-all flex items-center justify-center gap-1",children:[e.jsx(_t,{className:"w-4 h-4"}),"Bank Transfer"]})]})]}),Fe==="chat"&&e.jsxs("form",{onSubmit:mc,className:"flex-shrink-0 p-3 bg-white border-t border-gray-100",children:[De&&e.jsxs("div",{className:"mb-2 p-2 bg-red-50 border border-red-300 rounded-lg flex items-start gap-2",children:[e.jsx(Et,{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-red-700",children:De})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tc,{chatRoomId:"user-".concat(((jr=a.therapist)==null?void 0:jr.id)||"unknown"),reporterId:"user-current",reporterRole:"user",reportedUserId:((Ir=a.therapist)==null?void 0:Ir.id)||"unknown",reportedUserName:(Tr=a.therapist)==null?void 0:Tr.name,onReportFormToggle:Be}),e.jsx("input",{type:"text",name:"chat_message",inputMode:"text",autoComplete:"off",value:F,onChange:w=>{V(w.target.value),De&&we(null)},onFocus:w=>{setTimeout(()=>{w.target.scrollIntoView({behavior:"smooth",block:"end"})},300)},placeholder:"üí¨ Message ".concat(He(G.name),"... (Press Enter to send)"),className:"flex-1 px-4 py-3 bg-gray-50 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-orange-400 focus:border-transparent outline-none text-base transition-all duration-200 placeholder-gray-400 hover:bg-gray-100",style:{fontSize:"16px"},disabled:pe,onKeyPress:w=>{var z;w.key==="Enter"&&F.trim()&&(w.preventDefault(),(z=document.querySelector('button[type="submit"]'))==null||z.click())}}),e.jsx("button",{type:"submit",disabled:!F.trim()||pe,className:"p-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-full hover:from-orange-600 hover:to-orange-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg",children:pe?e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(Ys,{className:"w-5 h-5"})})]})]})]}),e.jsx(_h,{isOpen:$e,onClose:()=>Oe(!1),onSubmitPayment:dc,depositAmount:je,therapistName:((Ar=a.therapist)==null?void 0:Ar.name)||"Therapist",scheduledDate:v||"TBD",scheduledTime:q||"TBD",serviceType:"Traditional Massage",isProcessing:qe}),rt&&e.jsxs("div",{className:"fixed inset-0 bg-white z-[9999] overflow-y-auto animate-slideUp",children:[e.jsx("button",{className:"fixed top-4 right-4 z-10 p-2 bg-orange-500 rounded-full shadow-lg hover:bg-orange-600 transition-colors",onClick:()=>{aa(!1),Gt({})},"aria-label":"Close massage types",children:e.jsx(Qe,{size:24,strokeWidth:2,className:"text-black"})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-12 sm:px-6",children:e.jsx("div",{className:"flex flex-col gap-4",children:Bi.map((w,z)=>{const re={name:w.name,description:w.shortDescription,fullDescription:w.fullDescription,benefits:w.benefits||[],duration:w.duration||"60-90 min",intensity:w.intensity||"Medium",bestFor:w.bestFor||[],image:Xl(w.name),popularity:[4.2,4.5,4.7,4.8][z%4]};return e.jsx(Zl,{massage:re,expanded:_e[re.name]||!1,onToggleExpanded:()=>Gt(Ie=>({...Ie,[re.name]:!Ie[re.name]})),showActionButtons:!1},re.name)})})})]})]})]}),xe&&e.jsx(Yh,{isOpen:xe,onClose:()=>{Me(!1),U()},onAuthSuccess:cc,language:ee})]})):null}const df=u.memo(cf);function $o(){if(typeof window=="undefined")return"";let a=window.location.hash.replace("#","").replace(/^\//,"").trim();return!a&&window.location.pathname&&window.location.pathname!=="/"&&(a=window.location.pathname.replace(/^\//,"").trim()),a.split("/")[0]||""}function uf(a){return!a||a==="landing"||a==="home"}function mf(a){const[t,n]=u.useState($o),{chatState:s}=Mi(),i=s.isOpen;return u.useEffect(()=>{const r=()=>n($o());return r(),window.addEventListener("hashchange",r),window.addEventListener("popstate",r),()=>{window.removeEventListener("hashchange",r),window.removeEventListener("popstate",r)}},[]),uf(t)||!i?null:e.jsx(e.Fragment,{children:e.jsx(df,{...a})})}const oy=Object.freeze(Object.defineProperty({__proto__:null,default:mf},Symbol.toStringTag,{value:"Module"}));export{Cp as $,h as A,Fc as B,jt as C,kf as D,If as E,Fl as F,Lf as G,hg as H,la as I,jf as J,Wp as K,ju as L,ey as M,_f as N,dm as O,Do as P,cm as Q,Pf as R,Jo as S,Rg as T,yg as U,Jt as V,Am as W,Uf as X,zg as Y,Ru as Z,Ce as _,Qt as a,N as a$,pg as a0,vm as a1,wm as a2,an as a3,km as a4,Cf as a5,Df as a6,Ef as a7,Af as a8,ke as a9,sm as aA,ng as aB,Tm as aC,pl as aD,bt as aE,Pm as aF,Dm as aG,_m as aH,sg as aI,rl as aJ,Nl as aK,ll as aL,ol as aM,Bf as aN,Nu as aO,fg as aP,om as aQ,Ds as aR,dd as aS,al as aT,Mu as aU,mn as aV,qp as aW,Gf as aX,zf as aY,Vf as aZ,yu as a_,$t as aa,ds as ab,oi as ac,os as ad,Na as ae,He as af,Se as ag,Of as ah,wu as ai,po as aj,xm as ak,qa as al,$f as am,Im as an,li as ao,Td as ap,el as aq,Wf as ar,bm as as,xl as at,wd as au,xf as av,Xo as aw,Bu as ax,Ju as ay,am as az,Sf as b,Ml as b0,as as b1,Os as b2,Yf as b3,Nn as b4,Gp as b5,Nm as b6,ty as b7,Jf as b8,Nf as b9,Hf as bA,Qf as bB,ns as bC,ay as bD,ny as bE,sy as bF,iy as bG,ry as bH,oy as bI,Du as ba,Cd as bb,oh as bc,$p as bd,Ba as be,hl as bf,Tf as bg,ro as bh,ha as bi,pn as bj,Eu as bk,Gu as bl,zu as bm,si as bn,Rf as bo,qf as bp,Kf as bq,wn as br,vf as bs,kn as bt,wf as bu,jd as bv,Mf as bw,kl as bx,ym as by,Ff as bz,ca as c,K as d,gg as e,ig as f,W as g,Sa as h,vu as i,Ad as j,El as k,g as l,At as m,ji as n,Yt as o,Iu as p,Ci as q,us as r,mt as s,Vu as t,Zo as u,Xl as v,Xf as w,fl as x,Su as y,Zf as z};
