import{a as m,j as e}from"./vendor-react.DJgHGAhw.js";import{l as r,i as y}from"./route-therapist.DVVqC6AH.js";import"./vendor-appwrite.BT2H32tF.js";const k=({className:s="w-6 h-6"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),N=({className:s="w-16 h-16"})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),F=({id:s,label:x,currentImage:o,onImageChange:v,className:h,heightClass:j="h-48",imageClassName:p,variant:w="default"})=>{const[l,i]=m.useState(o),d=m.useRef(null);m.useEffect(()=>{r.debug("ðŸ–¼ï¸ ImageUpload: currentImage changed to:",(o==null?void 0:o.substring(0,100))+"..."),i(o)},[o]);const f=async t=>{var b;r.debug("ðŸ“‚ File input change event triggered");const a=(b=t.target.files)==null?void 0:b[0];if(r.debug("ðŸ“‚ Selected file:",a),a){r.debug("ðŸ“¸ Image selected:",a.name,"Size:",a.size,"Type:",a.type);const u=new FileReader;u.onloadend=async()=>{const c=u.result;r.debug("ðŸ“¸ Image read as base64, length:",c.length),i(c);try{r.debug("ðŸ“¤ Starting upload to Appwrite Storage...");const n=await y.uploadProfileImage(c);r.debug("âœ… Upload successful! URL:",n),i(n),v(n)}catch(n){r.error("âŒ Error uploading image:",n),alert("Error uploading image: ".concat(n instanceof Error?n.message:"Unknown error",". Please try again.")),i(null)}},u.onerror=c=>{r.error("âŒ Error reading file:",c),alert("Error reading file. Please try again.")},u.readAsDataURL(a)}},g=()=>{var t;if(r.debug("ðŸ–±ï¸ ImageUpload: File input triggered for:",s),r.debug("ðŸ–±ï¸ File input ref:",d.current),!d.current){r.error("âŒ File input ref is null!");return}(t=d.current)==null||t.click()};return w==="profile"?e.jsxs("div",{className:h,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:x}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"relative w-32 h-32 rounded-full border-4 border-dashed border-gray-300 hover:border-brand-orange cursor-pointer transition-colors overflow-hidden bg-gray-100",onClick:g,onKeyDown:t=>(t.key==="Enter"||t.key===" ")&&g(),role:"button",tabIndex:0,children:l&&l.length>0?e.jsx("img",{src:l,alt:"Profile Preview",className:p||"w-full h-full object-cover",onError:()=>{r.error("âŒ Failed to load image preview:",l.substring(0,100)),i(null)}}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-400",children:[e.jsx(N,{className:"w-16 h-16"}),e.jsx("span",{className:"text-xs mt-1",children:"Upload"})]})})}),e.jsx("input",{id:s,type:"file",accept:"image/*",capture:"environment",ref:d,onChange:f,className:"hidden"})]}):e.jsxs("div",{className:h,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:x}),e.jsx("div",{className:"relative w-full ".concat(j," border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center text-center text-gray-500 cursor-pointer hover:border-brand-green hover:text-brand-green transition-colors bg-gray-50 group"),onClick:g,onKeyDown:t=>(t.key==="Enter"||t.key===" ")&&g(),role:"button",tabIndex:0,children:l&&l.length>0?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:l,alt:"Preview",className:p||"w-full h-full object-cover rounded-lg"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg px-4 py-2 flex items-center gap-2 shadow-lg",children:[e.jsx("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Change Image"})]})})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(k,{className:"w-8 h-8 mb-1"}),e.jsx("span",{className:"text-xs",children:"Click to upload"})]})}),e.jsx("input",{id:s,type:"file",accept:"image/*",ref:d,onChange:f,className:"hidden"})]})};export{F as I};
