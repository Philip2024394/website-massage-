const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/App.1fxTHtx8.js","assets/route-therapist.DVVqC6AH.js","assets/vendor-appwrite.BT2H32tF.js","assets/vendor-react.DJgHGAhw.js","assets/route-booking.yuk30L8G.js","assets/vendor-misc.BCNplu90.js","assets/route-portals.BJGRQhN_.js","assets/route-therapist.ChBoUtyP.css","assets/vendor-ui.D6Y-8hbd.js","assets/route-payment.T2FKxZVj.js"])))=>i.map(i=>d[i]);
var m=Object.defineProperty;var h=(i,r,e)=>r in i?m(i,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[r]=e;var o=(i,r,e)=>h(i,typeof r!="symbol"?r+"":r,e);import{j as a,R as p,a as l,t as g,aw as f,H as y,aY as v}from"./vendor-react.DJgHGAhw.js";import{_ as b}from"./route-therapist.DVVqC6AH.js";import"./vendor-appwrite.BT2H32tF.js";import"./route-booking.yuk30L8G.js";import"./vendor-misc.BCNplu90.js";import"./route-portals.BJGRQhN_.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=e(t);fetch(t.href,n)}})();const x=({children:i})=>a.jsx("div",{className:"app-shell min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-white",children:a.jsx("main",{className:"flex-1 min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))]",children:i})}),S=()=>a.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-white",children:a.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-3xl font-bold mb-4",children:[a.jsx("span",{className:"text-black",children:"Inda"}),a.jsx("span",{className:"text-orange-500",children:"Street"})]}),a.jsx("div",{className:"w-8 h-8 border-3 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto"})]})})}),E=p.lazy(()=>b(()=>import("./App.1fxTHtx8.js").then(i=>i.A),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),w=()=>a.jsx(x,{children:a.jsx(l.Suspense,{fallback:a.jsx(S,{}),children:a.jsx(E,{})})}),j=l.createContext(void 0),N=({children:i})=>{const[r,e]=l.useState(()=>{try{const t=localStorage.getItem("app_language");return t==="id"||t==="en"?t:"id"}catch{return"id"}}),s=t=>{e(t)};return a.jsx(j.Provider,{value:{language:r,setLanguage:s},children:i})};class C{constructor(){o(this,"errorQueue",[]);o(this,"isProcessing",!1);o(this,"maxQueueSize",100);o(this,"batchSize",10);o(this,"isRateLimited",!1);o(this,"rateLimitResetTime",0)}async logError(r,e){try{if(this.isRateLimited&&Date.now()<this.rateLimitResetTime)return;const s=this.createErrorEntry(r,e);this.errorQueue.push(s),!this.isProcessing&&this.errorQueue.length>=this.batchSize&&await this.processQueue(),this.errorQueue.length>this.maxQueueSize&&(this.errorQueue=this.errorQueue.slice(-this.maxQueueSize))}catch{}}createErrorEntry(r,e){const s=r instanceof Error?r.message:r,t=r instanceof Error?r.stack:void 0;return{timestamp:new Date().toISOString(),errorType:this.detectErrorType(s),message:s,stack:t,context:(e==null?void 0:e.context)||{},userId:(e==null?void 0:e.userId)||this.getCurrentUserId(),userRole:(e==null?void 0:e.userRole)||this.getCurrentUserRole(),page:(e==null?void 0:e.page)||this.getCurrentPage(),userAgent:navigator.userAgent,severity:(e==null?void 0:e.severity)||this.calculateSeverity(s)}}detectErrorType(r){const e=r.toLowerCase();return e.includes("network")||e.includes("fetch")?"network":e.includes("auth")||e.includes("permission")||e.includes("unauthorized")?"auth":e.includes("validation")||e.includes("invalid")||e.includes("required")?"validation":e.includes("api")||e.includes("endpoint")||e.includes("request")?"api":"runtime"}calculateSeverity(r){const e=r.toLowerCase();return e.includes("payment")||e.includes("transaction")||e.includes("booking creation")||e.includes("security")||e.includes("unauthorized access")?"critical":e.includes("data loss")||e.includes("auth")||e.includes("login")||e.includes("session")?"high":e.includes("failed to load")||e.includes("network")||e.includes("timeout")?"medium":"low"}getCurrentUserId(){try{const r=localStorage.getItem("currentUser");if(r){const e=JSON.parse(r);return e.$id||e.id}}catch{return}}getCurrentUserRole(){try{const r=localStorage.getItem("currentUser");if(r)return JSON.parse(r).role||"guest"}catch{return"guest"}}getCurrentPage(){return window.location.pathname}async processQueue(){if(!(this.isProcessing||this.errorQueue.length===0)){this.isProcessing=!0;try{const e=this.errorQueue.splice(0,this.batchSize).map(s=>this.uploadToDatabase(s).catch(t=>{}));await Promise.allSettled(e)}catch{}finally{this.isProcessing=!1,this.errorQueue.length>=this.batchSize&&setTimeout(()=>this.processQueue(),1e3)}}}async uploadToDatabase(r){}storeLocally(r){try{const e="pendingErrorLogs",s=localStorage.getItem(e),t=s?JSON.parse(s):[];t.push(r);const n=t.slice(-50);localStorage.setItem(e,JSON.stringify(n))}catch{}}async flushQueue(){this.errorQueue.length>0&&await this.processQueue()}getPendingLocalErrors(){try{const r=localStorage.getItem("pendingErrorLogs");return r?JSON.parse(r):[]}catch{return[]}}clearLocalErrors(){try{localStorage.removeItem("pendingErrorLogs")}catch{}}}const u=new C;typeof window!="undefined"&&window.addEventListener("beforeunload",()=>{u.flushQueue()});class L extends l.Component{constructor(e){super(e);o(this,"handleReset",()=>{this.setState({hasError:!1,error:null}),window.location.href="/"});this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){const s=(e==null?void 0:e.message)||"",t=(e==null?void 0:e.stack)||"";return s.includes("removeChild")||s.includes("The node to be removed is not a child")||s.includes("insertBefore")||s.includes("replaceChild")||s.includes("appendChild")||s.includes("NotFoundError")||s.includes("Failed to execute")||(e==null?void 0:e.name)==="NotFoundError"||t.includes("removeChild")||t.includes("insertBefore")||t.includes("commitDeletionEffectsOnFiber")||t.includes("react-dom")?{hasError:!1,error:null}:{hasError:!0,error:e}}componentDidCatch(e,s){const t=(e==null?void 0:e.message)||"",n=(e==null?void 0:e.stack)||"";if(t.includes("removeChild")||t.includes("The node to be removed is not a child")||t.includes("insertBefore")||t.includes("replaceChild")||t.includes("appendChild")||t.includes("NotFoundError")||t.includes("Failed to execute")||(e==null?void 0:e.name)==="NotFoundError"||n.includes("removeChild")||n.includes("insertBefore")||n.includes("commitDeletionEffectsOnFiber")||n.includes("react-dom")){u.logError(e,{errorType:"runtime",severity:"low",context:{type:"DOM manipulation error",componentStack:s.componentStack}});return}u.logError(e,{errorType:"runtime",severity:"high",context:{componentStack:s.componentStack,errorInfo:s}})}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const e=this.state.error,s=e&&(e.code===536870904||e.code==="536870904"||typeof e.message=="string"&&e.message.includes("536870904")),t=s?"Connection issue":"Feature Temporarily Unavailable",n=s?"Connection or service error. Please try again or return to the homepage.":"We're currently updating this feature to serve you better. Please try again in a moment or return to the homepage.";return a.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gradient-to-br from-orange-50 to-white flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full",children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center",children:a.jsx(g,{className:"w-12 h-12 text-orange-600"})})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 text-center mb-3",children:t}),a.jsx("p",{className:"text-gray-600 text-center mb-8 leading-relaxed",children:n}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-bold py-4 px-6 rounded-xl transition-all transform hover:scale-105 flex items-center justify-center gap-2 shadow-lg",children:[a.jsx(f,{className:"w-5 h-5"}),"Try Again"]}),a.jsxs("button",{onClick:this.handleReset,className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-4 px-6 rounded-xl transition-all flex items-center justify-center gap-2",children:[a.jsx(y,{className:"w-5 h-5"}),"Go to Homepage"]})]}),a.jsx("p",{className:"text-xs text-gray-500 text-center mt-6",children:"Our technical team has been automatically notified of this issue."})]})})}return this.props.children}}performance.mark("app-start");const d=document.getElementById("root");if(!d)throw new Error("Could not find root element to mount to");const O=v.createRoot(d,{onRecoverableError:i=>{}});performance.mark("react-start");O.render(a.jsx(L,{children:a.jsx(N,{children:a.jsx(w,{})})}));setTimeout(()=>{performance.mark("react-complete");try{const i=performance.measure("app-to-react","app-start","react-start"),r=performance.measure("react-render","react-start","react-complete"),e=performance.measure("total-load","app-start","react-complete")}catch{}},100);const I=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{I as A};
