import{a as l,j as e}from"./vendor-react.DJgHGAhw.js";import{e as j,al as S}from"./route-therapist.DVVqC6AH.js";import{k as I}from"./App.1fxTHtx8.js";const E=({children:t,providerName:o,providerType:r,city:a,error:n,loading:c,onNavigate:d})=>{const[u,f]=l.useState(!1);return c?e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})}):n||!o?e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-white flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ˜”"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Profile Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:n||"The profile you're looking for doesn't exist or has been removed."}),e.jsx("a",{href:"/",className:"inline-block bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600 transition",children:"ðŸ  Go to Homepage"})]})}):e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-white",children:[e.jsx("button",{onClick:()=>f(!0),className:"fixed top-4 left-4 z-50 bg-white rounded-full p-3 shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-200","aria-label":"Open navigation menu",children:e.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsx(j,{isOpen:u,onClose:()=>f(!1),onNavigate:d||(()=>{}),t:s=>s}),e.jsx("div",{className:"w-full",children:t})]})};function N(t){try{const r=new URL(t).pathname.split("/").filter(Boolean),a=r.indexOf("share");return a!==-1&&r.length>a+1?r[a+1].replace("#",""):null}catch{return null}}async function k(t,o){try{const r=await S.getByShortIdOrSlug(t);if(!r)return{entity:null,shareLink:null};const a=o.find(n=>(n.$id||n.id)===r.entityId);return{entity:a||null,shareLink:r}}catch{return{entity:null,shareLink:null}}}function M({providers:t,providerType:o,selectedProvider:r}){const[a,n]=l.useState(!0),[c,d]=l.useState(null),[u,f]=l.useState(null),{id:s,type:m,isShortUrl:h}=l.useMemo(()=>{const i=N(window.location.href);return i&&(!/^[a-f0-9]{20,}$/i.test(i)||i.includes("-"))?{id:i,type:null,isShortUrl:!0}:{...I(window.location.href),isShortUrl:!1}},[]);l.useEffect(()=>{h&&s&&t&&t.length>0&&k(s,t).then(({entity:i})=>{f(i),n(!1)}).catch(i=>{d("Share link not found"),n(!1)})},[h,s,t]);const p=l.useMemo(()=>{if(r)return r;if(u)return u;if(h)return null;if(m&&m!==o)return d("Invalid provider type in URL"),null;if(!s||!t||t.length===0)return d("Provider not found"),null;const i=t.find(x=>{var v,b;const g=((b=(v=x.id)!=null?v:x.$id)!=null?b:"").toString();if(g===s)return!0;const y=g.replace(/[-_]/g,""),w=s.replace(/[-_]/g,"");return y===w});return i||d("Provider not found"),i||null},[r,u,t,s,o,m,h]);return l.useEffect(()=>{n(!1)},[p]),{provider:p,loading:a,error:c,providerId:s}}export{E as S,M as u};
