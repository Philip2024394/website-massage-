var c=Object.defineProperty;var d=(o,t,e)=>t in o?c(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var r=(o,t,e)=>d(o,typeof t!="symbol"?t+"":t,e);class u{constructor(){r(this,"timers",new Map);r(this,"callbacks",new Map);r(this,"expiredCallbacks",new Map)}startCountdown(t,e,n,i){this.stopCountdown(t),this.callbacks.set(t,n),this.expiredCallbacks.set(t,i);let a=e*60;this.updateCountdown(t,a);const l=setInterval(()=>{a--,a<=0?this.handleExpired(t):this.updateCountdown(t,a)},1e3);this.timers.set(t,l)}stopCountdown(t){const e=this.timers.get(t);e&&(clearInterval(e),this.timers.delete(t),this.callbacks.delete(t),this.expiredCallbacks.delete(t))}stopAllCountdowns(){this.timers.forEach((t,e)=>{clearInterval(t)}),this.timers.clear(),this.callbacks.clear(),this.expiredCallbacks.clear()}updateCountdown(t,e){const n=Math.floor(e/60),i=e%60,a={minutes:n,seconds:i,totalSeconds:e,isExpired:!1,formattedTime:"".concat(n,":").concat(i.toString().padStart(2,"0"))},l=this.callbacks.get(t);l&&l(a)}handleExpired(t){const e={minutes:0,seconds:0,totalSeconds:0,isExpired:!0,formattedTime:"0:00"},n=this.callbacks.get(t);n&&n(e);const i=this.expiredCallbacks.get(t);i&&i(),this.stopCountdown(t)}isCountdownRunning(t){return this.timers.has(t)}getActiveCountdownCount(){return this.timers.size}}const s=new u,C=s.startCountdown.bind(s),h=s.stopCountdown.bind(s),p=s.stopAllCountdowns.bind(s);s.isCountdownRunning.bind(s);s.getActiveCountdownCount.bind(s);typeof window!="undefined"&&window.addEventListener("beforeunload",()=>{p()});export{C as startBookingCountdown,p as stopAllBookingCountdowns,h as stopBookingCountdown};
