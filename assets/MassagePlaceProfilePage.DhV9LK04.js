import{j as e,a as i,R as L,d as U}from"./vendor-react.DJgHGAhw.js";import{M as B}from"./MassagePlaceCard.MsOXjXY2.js";import{F as l,Y as E,Z as O,U as V,K as z,e as J,$ as q,a0 as H}from"./route-therapist.DVVqC6AH.js";import"./vendor-appwrite.BT2H32tF.js";import"./cardConstants.BKSexKMn.js";import"./App.1fxTHtx8.js";import"./vendor-misc.BCNplu90.js";import"./vendor-ui.D6Y-8hbd.js";import"./route-portals.BJGRQhN_.js";import"./route-booking.yuk30L8G.js";import"./route-payment.T2FKxZVj.js";const me=({place:s,onBack:c,onBook:K,userLocation:n,loggedInCustomer:u,onLanguageChange:f,language:j="id",selectedCity:g="all",onCityChange:o,onMassageJobsClick:v,onTherapistJobsClick:W,onVillaPortalClick:p,onTherapistPortalClick:w,onMassagePlacePortalClick:b,onAgentPortalClick:M,onCustomerPortalClick:N,onAdminPortalClick:P,onNavigate:r,onTermsClick:k,onPrivacyClick:y,therapists:C=[],places:R=[]})=>{if(!s)return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Place not found"}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:"Go Back"})]})}),e.jsx(l,{userId:"guest",userName:"Guest User",userRole:"customer"})]});const[I,d]=i.useState(!1),[Y,Z]=i.useState("places"),[S,D]=i.useState(g),[,A]=i.useState([]),[_,Q]=i.useState(!1);E(),i.useEffect(()=>{O.getAll().then(t=>A(t)).catch(t=>{})},[]);const[F,T]=i.useState(s.distance),$=()=>{if(s.isVerified)return!0;if(s.activeMembershipDate){const t=new Date(s.activeMembershipDate),a=new Date;if(a.setMonth(a.getMonth()-3),t<=a)return!0}return!1};return L.useEffect(()=>{if(n&&s&&s.coordinates){const t=typeof s.coordinates=="string"?JSON.parse(s.coordinates):s.coordinates;if(t&&t.lat&&t.lng){const m=(t.lat-n.lat)*Math.PI/180,x=(t.lng-n.lng)*Math.PI/180,h=Math.sin(m/2)*Math.sin(m/2)+Math.cos(n.lat*Math.PI/180)*Math.cos(t.lat*Math.PI/180)*Math.sin(x/2)*Math.sin(x/2),G=6371*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)));T(G)}}},[n,s,s==null?void 0:s.coordinates]),s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50  w-full max-w-full",children:[e.jsx(V,{language:j,onLanguageChange:f,onMenuClick:()=>d(!0)}),e.jsx("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 pt-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:s.name}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),e.jsx("span",{className:"font-medium",children:s.location})]})]})})}),e.jsx("div",{className:"hidden",children:e.jsx("div",{className:"px-3 sm:px-4 pt-3 pb-3 max-w-6xl mx-auto",children:e.jsxs("div",{className:"flex flex-row gap-2 items-center max-w-2xl mx-auto",children:[e.jsx("div",{className:"relative flex-1 min-w-0 max-w-[200px] sm:max-w-none z-20",children:e.jsx(z,{selectedCity:S,onCityChange:t=>{D(t),o==null||o(t)},placeholder:"ðŸ‡®ðŸ‡© All Indonesia",includeAll:!0,showLabel:!1,className:"w-full"})}),e.jsx("div",{className:"flex justify-end flex-shrink-0",children:e.jsxs("button",{onClick:()=>r==null?void 0:r("facialProviders"),className:"px-4 py-2.5 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-semibold text-sm min-h-[44px] flex items-center justify-center gap-2 shadow-sm",title:"Facials Indonesia",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsx("span",{children:"Facial"})]})})]})})}),e.jsx(J,{isOpen:I,onClose:()=>d(!1),onMassageJobsClick:v,onTherapistPortalClick:w||(()=>{}),onVillaPortalClick:p||(()=>{}),onMassagePlacePortalClick:b||(()=>{}),onAgentPortalClick:M||(()=>{}),onCustomerPortalClick:N,onAdminPortalClick:P||(()=>{}),onNavigate:r,onTermsClick:k,onPrivacyClick:y,therapists:C,places:R}),e.jsx("main",{className:"w-full max-w-full mx-auto px-4 py-6 pb-24 ",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx(B,{place:{...s,distance:F||0,isVerified:$()},userLocation:n,onRate:()=>{},onSelectPlace:t=>{},onNavigate:r,onIncrementAnalytics:t=>{},onShowRegisterPrompt:()=>{},isCustomerLoggedIn:!!u,activeDiscount:(()=>{if(!(s&&(s.id==="1"||s.$id==="1"||s.name&&s.name.toLowerCase().includes("relax"))))return null;let a=20;return s.id==="2"||s.$id==="2"?a=15:s.id==="3"||s.$id==="3"?a=10:(s.id==="4"||s.$id==="4")&&(a=5),{percentage:a,expiresAt:new Date(Date.now()+10800*1e3)}})(),t:{}}),e.jsx("div",{className:"mt-8",children:e.jsx(q,{location:s.location||"Bali",limit:5,providerId:s.id||s.$id,providerName:s.name,providerType:"place",providerImage:s.profilePicture||s.mainImage,onNavigate:r})}),e.jsx("div",{className:"mt-8",children:e.jsx(H,{})})]})})]}),e.jsx(l,{userId:"guest",userName:"Guest User",userRole:"customer"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Place not found"}),e.jsx("button",{onClick:c,className:"px-6 py-3 bg-orange-500 text-white rounded-lg",children:"Go Back"})]})}),e.jsx(l,{userId:"guest",userName:"Guest User",userRole:"customer"})]})};export{me as default};
