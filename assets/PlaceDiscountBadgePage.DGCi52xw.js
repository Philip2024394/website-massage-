import{a as o,j as e,aa as $,J as f,ar as b,Z as j,p as v,n as O}from"./vendor-react.DJgHGAhw.js";import{N as _}from"./NotificationBell.CyVqwYx2.js";const E=({onBack:N,placeId:c,placeName:w,onNavigateToNotifications:h,unreadNotificationsCount:y=0})=>{var u;const[l,x]=o.useState([]),[n,p]=o.useState(null),[A,m]=o.useState(!1),[B,d]=o.useState(!1),g=[{percentage:5,color:"from-blue-400 to-blue-600",borderColor:"border-blue-500"},{percentage:10,color:"from-green-400 to-green-600",borderColor:"border-green-500"},{percentage:15,color:"from-orange-400 to-orange-600",borderColor:"border-orange-500"},{percentage:20,color:"from-red-400 to-red-600",borderColor:"border-red-500"}],C=[1,2,4,6,8,12,24];o.useEffect(()=>{const s=localStorage.getItem("place_discount_badges_".concat(c));if(s){const r=JSON.parse(s).map(a=>({...a,activatedAt:a.activatedAt?new Date(a.activatedAt):void 0,expiresAt:a.expiresAt?new Date(a.expiresAt):void 0})).filter(a=>a.isActive&&(!a.expiresAt||a.expiresAt>new Date));x(r)}},[c]);const k=(s,t)=>{p({percentage:s,duration:t}),m(!0)},D=()=>{if(!n)return;const s=new Date,t=new Date(s.getTime()+n.duration*60*60*1e3),r={id:"".concat(n.percentage,"_").concat(Date.now()),percentage:n.percentage,duration:n.duration,isActive:!0,activatedAt:s,expiresAt:t},a=[...l,r];x(a),localStorage.setItem("place_discount_badges_".concat(c),JSON.stringify(a)),m(!1),p(null);const i=document.createElement("div");i.innerHTML='\n            <div class="fixed top-4 left-4 right-4 bg-green-500 text-white p-4 rounded-lg shadow-lg z-50 flex items-center gap-3">\n                <div class="w-6 h-6 bg-white rounded-full flex items-center justify-center">\n                    <svg class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20">\n                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>\n                    </svg>\n                </div>\n                <span class="font-medium">ðŸŽ¯ '.concat(n.percentage,"% discount badge activated for ").concat(n.duration," hours!</span>\n            </div>\n        "),document.body.appendChild(i),setTimeout(()=>{try{i&&i.parentNode&&i.parentNode.contains(i)&&i.parentNode.removeChild(i)}catch{}},4e3)},S=s=>{const t=l.filter(r=>r.id!==s);x(t),localStorage.setItem("place_discount_badges_".concat(c),JSON.stringify(t))},M=s=>{const t=new Date,r=s.getTime()-t.getTime(),a=Math.floor(r/(1e3*60*60)),i=Math.floor(r%(1e3*60*60)/(1e3*60));return a>0?"".concat(a,"h ").concat(i,"m remaining"):i>0?"".concat(i,"m remaining"):"Expiring soon"};return e.jsxs("div",{className:"min-h-[calc(100vh-env(safe-area-inset-top)-env(safe-area-inset-bottom))] bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm px-4 py-3 sticky top-0 z-40",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[e.jsxs("h1",{className:"text-xl sm:text-2xl font-bold",children:[e.jsx("span",{className:"text-gray-900",children:"Inda"}),e.jsx("span",{className:"text-orange-500",children:"Street"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[h&&e.jsx(_,{count:y,onClick:h}),e.jsx("button",{onClick:()=>d(!0),className:"p-2 text-gray-700 hover:text-orange-500 hover:bg-orange-50 rounded-lg transition-colors",children:e.jsx($,{className:"w-5 h-5 text-orange-600"})})]})]})}),B&&e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>d(!1)}),e.jsxs("div",{className:"absolute right-0 top-0 h-full w-80 bg-gradient-to-br from-orange-500 to-red-500 shadow-xl",children:[e.jsx("div",{className:"p-6 border-b border-orange-400",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Menu"}),e.jsx("button",{onClick:()=>d(!1),className:"p-2 text-white hover:bg-orange-600 rounded-lg transition-colors",children:e.jsx(f,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-1",children:e.jsxs("button",{onClick:()=>{d(!1),N()},className:"w-full flex items-center gap-3 px-4 py-3 text-white hover:bg-orange-600 rounded-lg transition-colors text-left",children:[e.jsx(f,{className:"w-5 h-5"}),e.jsx("span",{children:"Back to Dashboard"})]})})})]})]}),e.jsxs("main",{className:"p-6 space-y-6 max-w-4xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(b,{className:"w-8 h-8 text-orange-500"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Discount Badge Manager"}),e.jsx("p",{className:"text-sm text-gray-600",children:w})]})]})}),l.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5 text-green-500"}),"Active Discount Badges"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-20",children:l.map(s=>{const t=g.find(r=>r.percentage===s.percentage);return e.jsxs("div",{className:"bg-gradient-to-r ".concat(t==null?void 0:t.color," rounded-lg p-4 text-white relative overflow-hidden"),children:[e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-white/20 rounded-full -translate-y-8 translate-x-8"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-2xl font-bold",children:[s.percentage,"% OFF"]}),e.jsx(v,{className:"w-6 h-6"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(O,{className:"w-4 h-4"}),s.expiresAt&&M(s.expiresAt)]}),e.jsx("button",{onClick:()=>S(s.id),className:"mt-3 px-3 py-1 bg-white/20 backdrop-blur-sm rounded-md text-xs font-medium hover:bg-white/30 transition-colors",children:"Deactivate"})]})]},s.id)})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Activate New Discount Badge"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Choose a discount percentage and duration. The badge will appear on your massage place card and attract more customers."}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pb-20 mb-6",children:g.map(s=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gradient-to-r ".concat(s.color," rounded-lg p-4 text-white text-center cursor-pointer transition-transform hover:scale-105"),children:[e.jsxs("div",{className:"text-2xl font-bold",children:[s.percentage,"%"]}),e.jsx("div",{className:"text-sm",children:"OFF"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Duration:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:C.map(t=>e.jsxs("button",{onClick:()=>k(s.percentage,t),className:"px-4 py-3 text-sm font-medium rounded-lg border-2 transition-all hover:scale-105 ".concat(s.borderColor," text-gray-700 hover:bg-gray-50 min-h-[44px] flex items-center justify-center"),disabled:l.some(r=>r.percentage===s.percentage&&r.isActive),children:[t,"h"]},t))})]})]},s.percentage))}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 pb-20",children:[e.jsx("h3",{className:"font-semibold text-orange-900 mb-2",children:"ðŸ’¡ Tips for Maximum Impact:"}),e.jsxs("ul",{className:"text-sm text-orange-800 space-y-1",children:[e.jsx("li",{children:"â€¢ Activate badges during peak hours (evening/weekend) for better visibility"}),e.jsx("li",{children:"â€¢ Higher percentages attract more bookings but reduce profit margins"}),e.jsx("li",{children:"â€¢ Use shorter durations for flash sales, longer for sustained promotion"}),e.jsx("li",{children:"â€¢ Monitor booking increases to optimize your discount strategy"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"How Discount Badges Work"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(b,{className:"w-6 h-6 text-blue-600"})}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"1. Activate Badge"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Choose discount percentage and duration"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(v,{className:"w-6 h-6 text-green-600"})}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"2. Increased Visibility"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Your place appears higher in search results"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(j,{className:"w-6 h-6 text-purple-600"})}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"3. More Bookings"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Attract customers with attractive discounts"})]})]})]})]}),A&&n&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 pb-20",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 px-6 py-4",children:e.jsx("h3",{className:"text-xl font-bold text-white",children:"Confirm Discount Badge Activation"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r ".concat((u=g.find(s=>s.percentage===n.percentage))==null?void 0:u.color," rounded-lg p-4 text-white inline-block mb-4"),children:e.jsxs("div",{className:"text-3xl font-bold",children:[n.percentage,"% OFF"]})}),e.jsxs("p",{className:"text-gray-600",children:["This discount badge will be active for ",e.jsxs("strong",{children:[n.duration," hours"]})," and will appear on your massage place card."]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 pb-20 mb-6",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," Once activated, the badge cannot be modified. You can deactivate it early if needed."]})})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>m(!1),className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:D,className:"flex-1 px-4 py-2 text-sm font-semibold text-white bg-gradient-to-r from-orange-600 to-orange-700 rounded-lg hover:from-orange-700 hover:to-orange-800 shadow-md transition-all",children:"Activate Badge"})]})]})})]})};export{E as default};
