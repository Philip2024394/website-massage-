import{a as l,j as r}from"./vendor-react.DJgHGAhw.js";import{u as v,S as k}from"./useSharedProfile.Cbuv3HUv.js";import{F as I}from"./FacialPlaceCard.DjrSskkp.js";import{a0 as j}from"./route-therapist.DVVqC6AH.js";import{a as N,b as m,e as d,d as F}from"./App.1fxTHtx8.js";import"./vendor-appwrite.BT2H32tF.js";import"./cardConstants.BKSexKMn.js";import"./route-booking.yuk30L8G.js";import"./vendor-misc.BCNplu90.js";import"./route-portals.BJGRQhN_.js";import"./vendor-ui.D6Y-8hbd.js";import"./route-payment.T2FKxZVj.js";const q=({facialPlaces:p,selectedPlace:h,userLocation:u,loggedInCustomer:f,handleQuickBookWithChat:P,onNavigate:g,language:T="en"})=>{const{provider:e,loading:w,error:x,providerId:s}=v({providers:p,providerType:"facial",selectedProvider:h});return l.useEffect(()=>{if(e&&s){const i=typeof window!="undefined"&&window.crypto&&window.crypto.randomUUID?window.crypto.randomUUID():null,a=sessionStorage.getItem("shared_link_session_id")||i||"session_".concat(Date.now());sessionStorage.setItem("shared_link_session_id",a),N.trackSharedLinkView(Number(s),a).catch(t=>{});try{const t=m.parseShareChainFromUrl();(t||document.referrer.includes("wa.me")||document.referrer.includes("facebook.com")||document.referrer.includes("t.me")||document.referrer.includes("twitter.com")||window.location.pathname.includes("/share/")||window.location.hash.includes("shared=true")||window.location.search.includes("si=")||window.location.search.includes("shared=1"))&&m.trackSharedProfileViewWithChain({memberId:e.$id,memberName:e.name||"Unknown Facial Place",memberType:"facial",shareChain:t,metadata:{referrer:document.referrer,url:window.location.href,timestamp:new Date().toISOString(),chainDepth:(t==null?void 0:t.shareDepth)||0,originalSharer:t==null?void 0:t.originalSharerUserId}}).catch(n=>{})}catch{}}},[e,s]),l.useEffect(()=>{if(!e)return;const i="".concat(e.name," | Professional Facial Spa | IndaStreet"),a="Book facial services at ".concat(e.name).concat(e.city?" in ".concat(e.city):"",". Professional facial treatments, verified specialists."),t=d(e);document.title=i,[{name:"description",content:a},{property:"og:title",content:i},{property:"og:description",content:a},{property:"og:url",content:t},{property:"og:type",content:"business.business"}].forEach(({name:n,property:c,content:S})=>{const b=n?'meta[name="'.concat(n,'"]'):'meta[property="'.concat(c,'"]');let o=document.querySelector(b);o||(o=document.createElement("meta"),n&&o.setAttribute("name",n),c&&o.setAttribute("property",c),document.head.appendChild(o)),o.setAttribute("content",S)})},[e]),r.jsx(k,{providerName:(e==null?void 0:e.name)||"",providerType:"facial",city:e==null?void 0:e.city,error:x,loading:w,children:e&&r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx(I,{place:e,userLocation:u,onSelectPlace:()=>{},onRate:()=>{},onIncrementAnalytics:()=>{},onNavigate:g,isCustomerLoggedIn:!!f,t:()=>""}),r.jsxs("div",{className:"mt-6 bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"ðŸ“¤ Share This Facial Spa"}),r.jsxs("p",{className:"text-gray-600 mb-4 text-sm",children:["Share ",e.name," with friends and family"]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsx("button",{onClick:()=>{const i=d(e),a=F(e.name,"facial",e.city);window.open("https://wa.me/?text=".concat(encodeURIComponent(a+"\n"+i)),"_blank")},className:"flex items-center gap-2 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition",children:"ðŸ“± WhatsApp"}),r.jsx("button",{onClick:()=>{var a;const i=d(e);(a=navigator.clipboard)==null||a.writeText(i),alert("Link copied to clipboard!")},className:"flex items-center gap-2 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition",children:"ðŸ“‹ Copy Link"})]})]}),r.jsx("div",{className:"mt-8",children:r.jsx(j,{})})]})})};export{q as SharedFacialProfile,q as default};
