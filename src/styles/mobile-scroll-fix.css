/* üîí GLOBAL MOBILE SCROLL GUARANTEE - PERMANENT FIX */

/* RULE #1: BODY IS THE ONLY SCROLLER ON MOBILE */
html, body {
  width: 100%;
  height: auto;
  min-height: 100%;
  overflow-x: hidden;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* NEVER LOCK SCROLL BY DEFAULT */
body {
  position: relative;
}

/* üö´ MOBILE BANS ENFORCEMENT */
/* Prevent height: 100vh and h-screen disasters */
.h-screen, .min-h-screen {
  height: auto !important;
  min-height: auto !important;
}

/* Override any vh units on mobile */
@media (max-width: 768px) {
  *[style*="100vh"], 
  *[style*="100dvh"],
  *[class*="h-screen"],
  *[class*="min-h-screen"] {
    height: auto !important;
    min-height: auto !important;
  }
}

/* ‚úÖ SAFE PAGE LAYOUT PATTERN - USE EVERYWHERE */
.safe-page-wrapper {
  min-height: auto;
  overflow: visible;
}

.safe-page-wrapper main {
  min-height: auto;
  overflow: visible;
}

/* Fixed headers are allowed, but not full page wrappers */
.safe-header {
  position: sticky;
  top: 0;
  z-index: 50;
}

/* Therapist dashboard - safe approach */
.therapist-dashboard {
  min-height: auto;
  overflow: visible;
}

.therapist-content {
  min-height: auto;
  overflow: visible;
  padding-bottom: 2rem;
}

/* üí¨ CHAT WINDOW CLEANUP (PRODUCTION READY) */
.chat-messages {
  max-height: 60vh;
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

.chat-window {
  /* Chat has its own scroll - page scroll remains enabled */
  position: fixed;
  max-height: 80vh;
  overflow-y: auto; /* FIXED: Allow chat internal scrolling */
  z-index: 9999;
}

/* NEVER lock body scroll for chat - violates ONE SCROLL AUTHORITY */
body.chat-open {
  overflow: visible !important;
  position: relative !important;
}

/* üîÅ MODAL & LOADER SAFE PATTERNS */
.modal-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1000;
  /* backdrop only, no body lock */
}

.modal-content {
  max-height: 90vh;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* ‚úÖ SAFE MOBILE PATTERNS */
@media (max-width: 768px) {
  /* Body must always scroll */
  body {
    overflow-y: auto !important;
    position: relative !important;
  }
  
  /* No viewport height constraints */
  .page-container {
    min-height: auto;
    overflow: visible;
  }
  
  /* Let content grow naturally */
  main {
    min-height: auto;
    overflow: visible;
  }
  
  /* Ensure main content can scroll */
  main {
    height: auto !important;
    min-height: auto !important;
    max-height: none !important;
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
  }
  
  /* Fix any container that blocks scrolling */
  .container, .max-w-sm, .max-w-md, .max-w-lg {
    max-height: none !important;
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
  }
  
  /* Critical: Force scroll on any problematic containers */
  div[class*="overflow-hidden"]:not(.therapist-page-container) {
    overflow: visible !important;
  }
  
  div[class*="overflow-y-hidden"] {
    overflow-y: visible !important;
  }
}